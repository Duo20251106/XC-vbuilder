{"version":3,"file":"charts-C1SfFys0.js","sources":["../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/core/env.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/core/platform.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/core/util.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/core/vector.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/mixin/Draggable.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/core/Eventful.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/core/fourPointsTransform.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/core/dom.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/core/event.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/core/GestureMgr.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/core/matrix.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/core/Point.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/core/BoundingRect.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/Handler.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/core/timsort.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/constants.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/Storage.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/animation/requestAnimationFrame.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/animation/easing.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/core/curve.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/animation/cubicEasing.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/animation/Clip.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/core/LRU.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/tool/color.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/svg/helper.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/animation/Animator.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/animation/Animation.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/dom/HandlerProxy.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/config.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/core/Transformable.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/contain/text.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/Element.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/Group.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/zrender.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/Displayable.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/core/bbox.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/core/PathProxy.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/contain/line.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/contain/cubic.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/contain/quadratic.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/contain/util.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/contain/arc.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/contain/windingLine.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/contain/path.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/Path.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/tool/transformPath.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/tool/path.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/Image.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/shape/Circle.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/helper/roundRect.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/helper/subPixelOptimize.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/shape/Rect.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/shape/Ellipse.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/shape/Line.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/helper/smoothBezier.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/helper/poly.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/shape/Polygon.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/shape/Polyline.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/Gradient.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/LinearGradient.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/RadialGradient.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/helper/image.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/helper/parseText.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/TSpan.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/helper/roundSector.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/shape/Sector.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/CompoundPath.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/IncrementalDisplayable.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/Text.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/shape/Arc.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/shape/BezierCurve.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/graphic/shape/Ring.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/core/OrientedBoundingRect.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/canvas/helper.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/canvas/dashStyle.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/canvas/graphic.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/canvas/Layer.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/canvas/Painter.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/util/clazz.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/model/mixin/makeStyleMapper.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/model/mixin/areaStyle.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/util/number.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/util/log.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/util/model.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/util/innerStore.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/util/states.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/animation/basicTransition.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/util/graphic.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/label/labelStyle.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/model/mixin/textStyle.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/model/mixin/lineStyle.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/model/mixin/itemStyle.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/model/Model.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/data/DataDiffer.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/util/types.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/data/helper/sourceHelper.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/data/Source.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/data/helper/dataProvider.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/data/helper/dimensionHelper.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/data/SeriesDimensionDefine.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/data/helper/dataValueHelper.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/data/DataStore.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/data/helper/SeriesDataSchema.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/data/SeriesData.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/data/helper/createDimensions.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/core/CoordinateSystem.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/model/referHelper.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/data/helper/dataStackHelper.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/helper/createSeriesData.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/util/component.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/i18n/langEN.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/i18n/langZH.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/core/locale.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/scale/break.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/util/time.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/util/format.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/util/layout.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/model/Component.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/model/mixin/palette.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/model/mixin/dataFormat.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/core/task.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/data/helper/transform.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/data/helper/sourceManager.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/visual/tokens.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/tooltip/tooltipMarkup.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/tooltip/seriesFormatTooltip.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/model/Series.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/util/symbol.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/helper/labelHelper.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/helper/Symbol.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/helper/SymbolDraw.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/helper/createRenderPlanner.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/view/Chart.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/layout/barGrid.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/util/throttle.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/legacy/dataSelectAction.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/label/labelLayoutHelper.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/visual/LegendVisualProvider.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/model/globalDefault.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/model/internalComponentCreator.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/model/Global.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/core/ExtensionAPI.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/model/OptionManager.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/preprocessor/helper/compatStyle.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/preprocessor/backwardCompat.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/processor/dataStack.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/view/Component.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/visual/style.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/loading/default.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/core/Scheduler.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/theme/dark.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/util/ECEventProcessor.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/visual/symbol.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/visual/helper.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/util/event.js","../../../../node_modules/.pnpm/zrender@6.0.0/node_modules/zrender/lib/core/WeakMap.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/util/decal.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/visual/decal.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/core/lifecycle.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/core/impl.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/core/echarts.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/extension.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/cartesian/GridModel.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/axisModelCommonMixin.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/cartesian/AxisModel.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/axisDefault.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/data/OrdinalMeta.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/axisCommonTypes.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/axis/axisBreakHelper.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/axisModelCreator.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/scale/helper.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/scale/Scale.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/scale/Ordinal.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/scale/Interval.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/scale/Time.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/scale/Log.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/scaleRawExtentInfo.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/axisHelper.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/cartesian/Cartesian.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/cartesian/Cartesian2D.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/axisTickLabelBuilder.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/Axis.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/cartesian/Axis2D.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/axis/axisAction.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/axis/AxisBuilder.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/cartesian/cartesianAxisHelper.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/axisAlignTicks.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/cartesian/Grid.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/axisPointer/modelHelper.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/axis/AxisView.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/axis/axisSplitHelper.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/axis/CartesianAxisView.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/grid/installSimple.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/helper/interactionMutex.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/helper/cursorHelper.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/helper/RoamController.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/helper/roamHelper.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/coord/View.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/data/helper/linkSeriesData.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/graph/categoryFilter.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/graph/categoryVisual.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/graph/edgeVisual.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/helper/multipleGraphEdgeHelper.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/graph/simpleLayoutHelper.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/graph/simpleLayout.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/graph/graphHelper.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/graph/circularLayoutHelper.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/graph/circularLayout.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/graph/forceHelper.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/graph/forceLayout.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/graph/createView.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/helper/LinePath.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/helper/Line.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/helper/LineDraw.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/graph/adjustEdge.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/helper/thumbnailBridge.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/graph/GraphView.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/data/Graph.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/helper/createGraphFromNodeEdge.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/graph/GraphSeries.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/chart/graph/install.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/helper/sliderMove.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/helper/BrushController.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/helper/brushHelper.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/axisPointer/BaseAxisPointer.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/axisPointer/viewHelper.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/axisPointer/CartesianAxisPointer.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/axisPointer/AxisPointerModel.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/axisPointer/globalListener.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/axisPointer/AxisPointerView.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/axisPointer/findPointFromSeries.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/axisPointer/axisTrigger.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/axisPointer/install.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/grid/install.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/helper.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/DataZoomModel.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/SelectZoomModel.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/DataZoomView.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/SelectZoomView.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/AxisProxy.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/dataZoomProcessor.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/dataZoomAction.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/installCommon.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/installDataZoomSelect.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/toolbox/featureManager.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/toolbox/ToolboxModel.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/helper/listComponent.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/toolbox/ToolboxView.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/toolbox/feature/SaveAsImage.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/toolbox/feature/MagicType.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/toolbox/feature/DataView.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/dataZoom/history.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/toolbox/feature/Restore.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/helper/BrushTargetManager.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/toolbox/feature/DataZoom.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/toolbox/install.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/tooltip/TooltipModel.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/tooltip/helper.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/tooltip/TooltipHTMLContent.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/tooltip/TooltipRichContent.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/tooltip/TooltipView.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/tooltip/install.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/title/install.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/legend/LegendModel.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/legend/LegendView.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/legend/legendFilter.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/legend/legendAction.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/legend/installLegendPlain.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/legend/ScrollableLegendModel.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/legend/ScrollableLegendView.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/legend/scrollableLegendAction.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/legend/installLegendScroll.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/component/legend/install.js","../../../../node_modules/.pnpm/echarts@6.0.0/node_modules/echarts/lib/renderer/installCanvasRenderer.js","../../../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/ascending.js","../../../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/descending.js","../../../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/bisector.js","../../../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/number.js","../../../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/bisect.js","../../../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/fsum.js","../../../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/ticks.js","../../../../node_modules/.pnpm/d3-array@3.2.4/node_modules/d3-array/src/merge.js","../../../../node_modules/.pnpm/d3-dispatch@3.0.1/node_modules/d3-dispatch/src/dispatch.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/namespaces.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/namespace.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/creator.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selector.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/select.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/array.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selectorAll.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/selectAll.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/matcher.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/selectChild.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/selectChildren.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/filter.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/sparse.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/enter.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/constant.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/data.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/exit.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/join.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/merge.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/order.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/sort.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/call.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/nodes.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/node.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/size.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/empty.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/each.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/attr.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/window.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/style.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/property.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/classed.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/text.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/html.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/raise.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/lower.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/append.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/insert.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/remove.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/clone.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/datum.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/on.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/dispatch.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/iterator.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/index.js","../../../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/select.js","../../../../node_modules/.pnpm/d3-color@3.1.0/node_modules/d3-color/src/define.js","../../../../node_modules/.pnpm/d3-color@3.1.0/node_modules/d3-color/src/color.js","../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/constant.js","../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/color.js","../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/rgb.js","../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/numberArray.js","../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/array.js","../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/date.js","../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/number.js","../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/object.js","../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/string.js","../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/value.js","../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/round.js","../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/transform/decompose.js","../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/transform/parse.js","../../../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/transform/index.js","../../../../node_modules/.pnpm/d3-timer@3.0.1/node_modules/d3-timer/src/timer.js","../../../../node_modules/.pnpm/d3-timer@3.0.1/node_modules/d3-timer/src/timeout.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/schedule.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/interrupt.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/selection/interrupt.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/tween.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/interpolate.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/attr.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/attrTween.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/delay.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/duration.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/ease.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/easeVarying.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/filter.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/merge.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/on.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/remove.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/select.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/selectAll.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/selection.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/style.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/styleTween.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/text.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/textTween.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/transition.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/end.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/index.js","../../../../node_modules/.pnpm/d3-ease@3.0.1/node_modules/d3-ease/src/cubic.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/selection/transition.js","../../../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/selection/index.js","../../../../node_modules/.pnpm/d3-fetch@3.0.1/node_modules/d3-fetch/src/json.js","../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/formatDecimal.js","../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/exponent.js","../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/formatGroup.js","../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/formatNumerals.js","../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/formatSpecifier.js","../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/formatTrim.js","../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/formatPrefixAuto.js","../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/formatRounded.js","../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/formatTypes.js","../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/identity.js","../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/locale.js","../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/defaultLocale.js","../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/precisionFixed.js","../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/precisionPrefix.js","../../../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/precisionRound.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/math.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/noop.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/stream.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/cartesian.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/compose.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/rotation.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/circle.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/clip/buffer.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/pointEqual.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/clip/rejoin.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/polygonContains.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/clip/index.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/clip/antimeridian.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/clip/circle.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/clip/line.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/clip/rectangle.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/identity.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/path/area.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/path/bounds.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/path/centroid.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/path/context.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/path/measure.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/path/string.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/path/index.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/transform.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/projection/fit.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/projection/resample.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/projection/index.js","../../../../node_modules/.pnpm/d3-geo@3.1.1/node_modules/d3-geo/src/projection/mercator.js","../../../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/init.js","../../../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/constant.js","../../../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/number.js","../../../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/continuous.js","../../../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/tickFormat.js","../../../../node_modules/.pnpm/d3-scale@4.0.2/node_modules/d3-scale/src/linear.js","../../../../node_modules/.pnpm/d3-zoom@3.0.0/node_modules/d3-zoom/src/transform.js"],"sourcesContent":["var Browser = (function () {\n    function Browser() {\n        this.firefox = false;\n        this.ie = false;\n        this.edge = false;\n        this.newEdge = false;\n        this.weChat = false;\n    }\n    return Browser;\n}());\nvar Env = (function () {\n    function Env() {\n        this.browser = new Browser();\n        this.node = false;\n        this.wxa = false;\n        this.worker = false;\n        this.svgSupported = false;\n        this.touchEventsSupported = false;\n        this.pointerEventsSupported = false;\n        this.domSupported = false;\n        this.transformSupported = false;\n        this.transform3dSupported = false;\n        this.hasGlobalWindow = typeof window !== 'undefined';\n    }\n    return Env;\n}());\nvar env = new Env();\nif (typeof wx === 'object' && typeof wx.getSystemInfoSync === 'function') {\n    env.wxa = true;\n    env.touchEventsSupported = true;\n}\nelse if (typeof document === 'undefined' && typeof self !== 'undefined') {\n    env.worker = true;\n}\nelse if (!env.hasGlobalWindow\n    || 'Deno' in window\n    || (typeof navigator !== 'undefined' && typeof navigator.userAgent === 'string'\n        && navigator.userAgent.indexOf('Node.js') > -1)) {\n    env.node = true;\n    env.svgSupported = true;\n}\nelse {\n    detect(navigator.userAgent, env);\n}\nfunction detect(ua, env) {\n    var browser = env.browser;\n    var firefox = ua.match(/Firefox\\/([\\d.]+)/);\n    var ie = ua.match(/MSIE\\s([\\d.]+)/)\n        || ua.match(/Trident\\/.+?rv:(([\\d.]+))/);\n    var edge = ua.match(/Edge?\\/([\\d.]+)/);\n    var weChat = (/micromessenger/i).test(ua);\n    if (firefox) {\n        browser.firefox = true;\n        browser.version = firefox[1];\n    }\n    if (ie) {\n        browser.ie = true;\n        browser.version = ie[1];\n    }\n    if (edge) {\n        browser.edge = true;\n        browser.version = edge[1];\n        browser.newEdge = +edge[1].split('.')[0] > 18;\n    }\n    if (weChat) {\n        browser.weChat = true;\n    }\n    env.svgSupported = typeof SVGRect !== 'undefined';\n    env.touchEventsSupported = 'ontouchstart' in window && !browser.ie && !browser.edge;\n    env.pointerEventsSupported = 'onpointerdown' in window\n        && (browser.edge || (browser.ie && +browser.version >= 11));\n    var domSupported = env.domSupported = typeof document !== 'undefined';\n    if (domSupported) {\n        var style = document.documentElement.style;\n        env.transform3dSupported = ((browser.ie && 'transition' in style)\n            || browser.edge\n            || (('WebKitCSSMatrix' in window) && ('m11' in new WebKitCSSMatrix()))\n            || 'MozPerspective' in style)\n            && !('OTransition' in style);\n        env.transformSupported = env.transform3dSupported\n            || (browser.ie && +browser.version >= 9);\n    }\n}\nexport default env;\n","export var DEFAULT_FONT_SIZE = 12;\nexport var DEFAULT_FONT_FAMILY = 'sans-serif';\nexport var DEFAULT_FONT = DEFAULT_FONT_SIZE + \"px \" + DEFAULT_FONT_FAMILY;\nvar OFFSET = 20;\nvar SCALE = 100;\nvar defaultWidthMapStr = \"007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\\\\\WQb\\\\0FWLg\\\\bWb\\\\WQ\\\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\\\FFF5.5N\";\nfunction getTextWidthMap(mapStr) {\n    var map = {};\n    if (typeof JSON === 'undefined') {\n        return map;\n    }\n    for (var i = 0; i < mapStr.length; i++) {\n        var char = String.fromCharCode(i + 32);\n        var size = (mapStr.charCodeAt(i) - OFFSET) / SCALE;\n        map[char] = size;\n    }\n    return map;\n}\nexport var DEFAULT_TEXT_WIDTH_MAP = getTextWidthMap(defaultWidthMapStr);\nexport var platformApi = {\n    createCanvas: function () {\n        return typeof document !== 'undefined'\n            && document.createElement('canvas');\n    },\n    measureText: (function () {\n        var _ctx;\n        var _cachedFont;\n        return function (text, font) {\n            if (!_ctx) {\n                var canvas = platformApi.createCanvas();\n                _ctx = canvas && canvas.getContext('2d');\n            }\n            if (_ctx) {\n                if (_cachedFont !== font) {\n                    _cachedFont = _ctx.font = font || DEFAULT_FONT;\n                }\n                return _ctx.measureText(text);\n            }\n            else {\n                text = text || '';\n                font = font || DEFAULT_FONT;\n                var res = /((?:\\d+)?\\.?\\d*)px/.exec(font);\n                var fontSize = res && +res[1] || DEFAULT_FONT_SIZE;\n                var width = 0;\n                if (font.indexOf('mono') >= 0) {\n                    width = fontSize * text.length;\n                }\n                else {\n                    for (var i = 0; i < text.length; i++) {\n                        var preCalcWidth = DEFAULT_TEXT_WIDTH_MAP[text[i]];\n                        width += preCalcWidth == null ? fontSize : (preCalcWidth * fontSize);\n                    }\n                }\n                return { width: width };\n            }\n        };\n    })(),\n    loadImage: function (src, onload, onerror) {\n        var image = new Image();\n        image.onload = onload;\n        image.onerror = onerror;\n        image.src = src;\n        return image;\n    }\n};\nexport function setPlatformAPI(newPlatformApis) {\n    for (var key in platformApi) {\n        if (newPlatformApis[key]) {\n            platformApi[key] = newPlatformApis[key];\n        }\n    }\n}\n","import { platformApi } from './platform.js';\nvar BUILTIN_OBJECT = reduce([\n    'Function',\n    'RegExp',\n    'Date',\n    'Error',\n    'CanvasGradient',\n    'CanvasPattern',\n    'Image',\n    'Canvas'\n], function (obj, val) {\n    obj['[object ' + val + ']'] = true;\n    return obj;\n}, {});\nvar TYPED_ARRAY = reduce([\n    'Int8',\n    'Uint8',\n    'Uint8Clamped',\n    'Int16',\n    'Uint16',\n    'Int32',\n    'Uint32',\n    'Float32',\n    'Float64'\n], function (obj, val) {\n    obj['[object ' + val + 'Array]'] = true;\n    return obj;\n}, {});\nvar objToString = Object.prototype.toString;\nvar arrayProto = Array.prototype;\nvar nativeForEach = arrayProto.forEach;\nvar nativeFilter = arrayProto.filter;\nvar nativeSlice = arrayProto.slice;\nvar nativeMap = arrayProto.map;\nvar ctorFunction = function () { }.constructor;\nvar protoFunction = ctorFunction ? ctorFunction.prototype : null;\nvar protoKey = '__proto__';\nvar idStart = 0x0907;\nexport function guid() {\n    return idStart++;\n}\nexport function logError() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    if (typeof console !== 'undefined') {\n        console.error.apply(console, args);\n    }\n}\nexport function clone(source) {\n    if (source == null || typeof source !== 'object') {\n        return source;\n    }\n    var result = source;\n    var typeStr = objToString.call(source);\n    if (typeStr === '[object Array]') {\n        if (!isPrimitive(source)) {\n            result = [];\n            for (var i = 0, len = source.length; i < len; i++) {\n                result[i] = clone(source[i]);\n            }\n        }\n    }\n    else if (TYPED_ARRAY[typeStr]) {\n        if (!isPrimitive(source)) {\n            var Ctor = source.constructor;\n            if (Ctor.from) {\n                result = Ctor.from(source);\n            }\n            else {\n                result = new Ctor(source.length);\n                for (var i = 0, len = source.length; i < len; i++) {\n                    result[i] = source[i];\n                }\n            }\n        }\n    }\n    else if (!BUILTIN_OBJECT[typeStr] && !isPrimitive(source) && !isDom(source)) {\n        result = {};\n        for (var key in source) {\n            if (source.hasOwnProperty(key) && key !== protoKey) {\n                result[key] = clone(source[key]);\n            }\n        }\n    }\n    return result;\n}\nexport function merge(target, source, overwrite) {\n    if (!isObject(source) || !isObject(target)) {\n        return overwrite ? clone(source) : target;\n    }\n    for (var key in source) {\n        if (source.hasOwnProperty(key) && key !== protoKey) {\n            var targetProp = target[key];\n            var sourceProp = source[key];\n            if (isObject(sourceProp)\n                && isObject(targetProp)\n                && !isArray(sourceProp)\n                && !isArray(targetProp)\n                && !isDom(sourceProp)\n                && !isDom(targetProp)\n                && !isBuiltInObject(sourceProp)\n                && !isBuiltInObject(targetProp)\n                && !isPrimitive(sourceProp)\n                && !isPrimitive(targetProp)) {\n                merge(targetProp, sourceProp, overwrite);\n            }\n            else if (overwrite || !(key in target)) {\n                target[key] = clone(source[key]);\n            }\n        }\n    }\n    return target;\n}\nexport function mergeAll(targetAndSources, overwrite) {\n    var result = targetAndSources[0];\n    for (var i = 1, len = targetAndSources.length; i < len; i++) {\n        result = merge(result, targetAndSources[i], overwrite);\n    }\n    return result;\n}\nexport function extend(target, source) {\n    if (Object.assign) {\n        Object.assign(target, source);\n    }\n    else {\n        for (var key in source) {\n            if (source.hasOwnProperty(key) && key !== protoKey) {\n                target[key] = source[key];\n            }\n        }\n    }\n    return target;\n}\nexport function defaults(target, source, overlay) {\n    var keysArr = keys(source);\n    for (var i = 0, len = keysArr.length; i < len; i++) {\n        var key = keysArr[i];\n        if ((overlay ? source[key] != null : target[key] == null)) {\n            target[key] = source[key];\n        }\n    }\n    return target;\n}\nexport var createCanvas = platformApi.createCanvas;\nexport function indexOf(array, value) {\n    if (array) {\n        if (array.indexOf) {\n            return array.indexOf(value);\n        }\n        for (var i = 0, len = array.length; i < len; i++) {\n            if (array[i] === value) {\n                return i;\n            }\n        }\n    }\n    return -1;\n}\nexport function inherits(clazz, baseClazz) {\n    var clazzPrototype = clazz.prototype;\n    function F() { }\n    F.prototype = baseClazz.prototype;\n    clazz.prototype = new F();\n    for (var prop in clazzPrototype) {\n        if (clazzPrototype.hasOwnProperty(prop)) {\n            clazz.prototype[prop] = clazzPrototype[prop];\n        }\n    }\n    clazz.prototype.constructor = clazz;\n    clazz.superClass = baseClazz;\n}\nexport function mixin(target, source, override) {\n    target = 'prototype' in target ? target.prototype : target;\n    source = 'prototype' in source ? source.prototype : source;\n    if (Object.getOwnPropertyNames) {\n        var keyList = Object.getOwnPropertyNames(source);\n        for (var i = 0; i < keyList.length; i++) {\n            var key = keyList[i];\n            if (key !== 'constructor') {\n                if ((override ? source[key] != null : target[key] == null)) {\n                    target[key] = source[key];\n                }\n            }\n        }\n    }\n    else {\n        defaults(target, source, override);\n    }\n}\nexport function isArrayLike(data) {\n    if (!data) {\n        return false;\n    }\n    if (typeof data === 'string') {\n        return false;\n    }\n    return typeof data.length === 'number';\n}\nexport function each(arr, cb, context) {\n    if (!(arr && cb)) {\n        return;\n    }\n    if (arr.forEach && arr.forEach === nativeForEach) {\n        arr.forEach(cb, context);\n    }\n    else if (arr.length === +arr.length) {\n        for (var i = 0, len = arr.length; i < len; i++) {\n            cb.call(context, arr[i], i, arr);\n        }\n    }\n    else {\n        for (var key in arr) {\n            if (arr.hasOwnProperty(key)) {\n                cb.call(context, arr[key], key, arr);\n            }\n        }\n    }\n}\nexport function map(arr, cb, context) {\n    if (!arr) {\n        return [];\n    }\n    if (!cb) {\n        return slice(arr);\n    }\n    if (arr.map && arr.map === nativeMap) {\n        return arr.map(cb, context);\n    }\n    else {\n        var result = [];\n        for (var i = 0, len = arr.length; i < len; i++) {\n            result.push(cb.call(context, arr[i], i, arr));\n        }\n        return result;\n    }\n}\nexport function reduce(arr, cb, memo, context) {\n    if (!(arr && cb)) {\n        return;\n    }\n    for (var i = 0, len = arr.length; i < len; i++) {\n        memo = cb.call(context, memo, arr[i], i, arr);\n    }\n    return memo;\n}\nexport function filter(arr, cb, context) {\n    if (!arr) {\n        return [];\n    }\n    if (!cb) {\n        return slice(arr);\n    }\n    if (arr.filter && arr.filter === nativeFilter) {\n        return arr.filter(cb, context);\n    }\n    else {\n        var result = [];\n        for (var i = 0, len = arr.length; i < len; i++) {\n            if (cb.call(context, arr[i], i, arr)) {\n                result.push(arr[i]);\n            }\n        }\n        return result;\n    }\n}\nexport function find(arr, cb, context) {\n    if (!(arr && cb)) {\n        return;\n    }\n    for (var i = 0, len = arr.length; i < len; i++) {\n        if (cb.call(context, arr[i], i, arr)) {\n            return arr[i];\n        }\n    }\n}\nexport function keys(obj) {\n    if (!obj) {\n        return [];\n    }\n    if (Object.keys) {\n        return Object.keys(obj);\n    }\n    var keyList = [];\n    for (var key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            keyList.push(key);\n        }\n    }\n    return keyList;\n}\nfunction bindPolyfill(func, context) {\n    var args = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        args[_i - 2] = arguments[_i];\n    }\n    return function () {\n        return func.apply(context, args.concat(nativeSlice.call(arguments)));\n    };\n}\nexport var bind = (protoFunction && isFunction(protoFunction.bind))\n    ? protoFunction.call.bind(protoFunction.bind)\n    : bindPolyfill;\nfunction curry(func) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    return function () {\n        return func.apply(this, args.concat(nativeSlice.call(arguments)));\n    };\n}\nexport { curry };\nexport function isArray(value) {\n    if (Array.isArray) {\n        return Array.isArray(value);\n    }\n    return objToString.call(value) === '[object Array]';\n}\nexport function isFunction(value) {\n    return typeof value === 'function';\n}\nexport function isString(value) {\n    return typeof value === 'string';\n}\nexport function isStringSafe(value) {\n    return objToString.call(value) === '[object String]';\n}\nexport function isNumber(value) {\n    return typeof value === 'number';\n}\nexport function isObject(value) {\n    var type = typeof value;\n    return type === 'function' || (!!value && type === 'object');\n}\nexport function isBuiltInObject(value) {\n    return !!BUILTIN_OBJECT[objToString.call(value)];\n}\nexport function isTypedArray(value) {\n    return !!TYPED_ARRAY[objToString.call(value)];\n}\nexport function isDom(value) {\n    return typeof value === 'object'\n        && typeof value.nodeType === 'number'\n        && typeof value.ownerDocument === 'object';\n}\nexport function isGradientObject(value) {\n    return value.colorStops != null;\n}\nexport function isImagePatternObject(value) {\n    return value.image != null;\n}\nexport function isRegExp(value) {\n    return objToString.call(value) === '[object RegExp]';\n}\nexport function eqNaN(value) {\n    return value !== value;\n}\nexport function retrieve() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    for (var i = 0, len = args.length; i < len; i++) {\n        if (args[i] != null) {\n            return args[i];\n        }\n    }\n}\nexport function retrieve2(value0, value1) {\n    return value0 != null\n        ? value0\n        : value1;\n}\nexport function retrieve3(value0, value1, value2) {\n    return value0 != null\n        ? value0\n        : value1 != null\n            ? value1\n            : value2;\n}\nexport function slice(arr) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    return nativeSlice.apply(arr, args);\n}\nexport function normalizeCssArray(val) {\n    if (typeof (val) === 'number') {\n        return [val, val, val, val];\n    }\n    var len = val.length;\n    if (len === 2) {\n        return [val[0], val[1], val[0], val[1]];\n    }\n    else if (len === 3) {\n        return [val[0], val[1], val[2], val[1]];\n    }\n    return val;\n}\nexport function assert(condition, message) {\n    if (!condition) {\n        throw new Error(message);\n    }\n}\nexport function trim(str) {\n    if (str == null) {\n        return null;\n    }\n    else if (typeof str.trim === 'function') {\n        return str.trim();\n    }\n    else {\n        return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n    }\n}\nvar primitiveKey = '__ec_primitive__';\nexport function setAsPrimitive(obj) {\n    obj[primitiveKey] = true;\n}\nexport function isPrimitive(obj) {\n    return obj[primitiveKey];\n}\nvar MapPolyfill = (function () {\n    function MapPolyfill() {\n        this.data = {};\n    }\n    MapPolyfill.prototype[\"delete\"] = function (key) {\n        var existed = this.has(key);\n        if (existed) {\n            delete this.data[key];\n        }\n        return existed;\n    };\n    MapPolyfill.prototype.has = function (key) {\n        return this.data.hasOwnProperty(key);\n    };\n    MapPolyfill.prototype.get = function (key) {\n        return this.data[key];\n    };\n    MapPolyfill.prototype.set = function (key, value) {\n        this.data[key] = value;\n        return this;\n    };\n    MapPolyfill.prototype.keys = function () {\n        return keys(this.data);\n    };\n    MapPolyfill.prototype.forEach = function (callback) {\n        var data = this.data;\n        for (var key in data) {\n            if (data.hasOwnProperty(key)) {\n                callback(data[key], key);\n            }\n        }\n    };\n    return MapPolyfill;\n}());\nvar isNativeMapSupported = typeof Map === 'function';\nfunction maybeNativeMap() {\n    return (isNativeMapSupported ? new Map() : new MapPolyfill());\n}\nvar HashMap = (function () {\n    function HashMap(obj) {\n        var isArr = isArray(obj);\n        this.data = maybeNativeMap();\n        var thisMap = this;\n        (obj instanceof HashMap)\n            ? obj.each(visit)\n            : (obj && each(obj, visit));\n        function visit(value, key) {\n            isArr ? thisMap.set(value, key) : thisMap.set(key, value);\n        }\n    }\n    HashMap.prototype.hasKey = function (key) {\n        return this.data.has(key);\n    };\n    HashMap.prototype.get = function (key) {\n        return this.data.get(key);\n    };\n    HashMap.prototype.set = function (key, value) {\n        this.data.set(key, value);\n        return value;\n    };\n    HashMap.prototype.each = function (cb, context) {\n        this.data.forEach(function (value, key) {\n            cb.call(context, value, key);\n        });\n    };\n    HashMap.prototype.keys = function () {\n        var keys = this.data.keys();\n        return isNativeMapSupported\n            ? Array.from(keys)\n            : keys;\n    };\n    HashMap.prototype.removeKey = function (key) {\n        this.data[\"delete\"](key);\n    };\n    return HashMap;\n}());\nexport { HashMap };\nexport function createHashMap(obj) {\n    return new HashMap(obj);\n}\nexport function concatArray(a, b) {\n    var newArray = new a.constructor(a.length + b.length);\n    for (var i = 0; i < a.length; i++) {\n        newArray[i] = a[i];\n    }\n    var offset = a.length;\n    for (var i = 0; i < b.length; i++) {\n        newArray[i + offset] = b[i];\n    }\n    return newArray;\n}\nexport function createObject(proto, properties) {\n    var obj;\n    if (Object.create) {\n        obj = Object.create(proto);\n    }\n    else {\n        var StyleCtor = function () { };\n        StyleCtor.prototype = proto;\n        obj = new StyleCtor();\n    }\n    if (properties) {\n        extend(obj, properties);\n    }\n    return obj;\n}\nexport function disableUserSelect(dom) {\n    var domStyle = dom.style;\n    domStyle.webkitUserSelect = 'none';\n    domStyle.userSelect = 'none';\n    domStyle.webkitTapHighlightColor = 'rgba(0,0,0,0)';\n    domStyle['-webkit-touch-callout'] = 'none';\n}\nexport function hasOwn(own, prop) {\n    return own.hasOwnProperty(prop);\n}\nexport function noop() { }\nexport var RADIAN_TO_DEGREE = 180 / Math.PI;\nexport var EPSILON = Number.EPSILON || Math.pow(2, -52);\n","export function create(x, y) {\n    if (x == null) {\n        x = 0;\n    }\n    if (y == null) {\n        y = 0;\n    }\n    return [x, y];\n}\nexport function copy(out, v) {\n    out[0] = v[0];\n    out[1] = v[1];\n    return out;\n}\nexport function clone(v) {\n    return [v[0], v[1]];\n}\nexport function set(out, a, b) {\n    out[0] = a;\n    out[1] = b;\n    return out;\n}\nexport function add(out, v1, v2) {\n    out[0] = v1[0] + v2[0];\n    out[1] = v1[1] + v2[1];\n    return out;\n}\nexport function scaleAndAdd(out, v1, v2, a) {\n    out[0] = v1[0] + v2[0] * a;\n    out[1] = v1[1] + v2[1] * a;\n    return out;\n}\nexport function sub(out, v1, v2) {\n    out[0] = v1[0] - v2[0];\n    out[1] = v1[1] - v2[1];\n    return out;\n}\nexport function len(v) {\n    return Math.sqrt(lenSquare(v));\n}\nexport var length = len;\nexport function lenSquare(v) {\n    return v[0] * v[0] + v[1] * v[1];\n}\nexport var lengthSquare = lenSquare;\nexport function mul(out, v1, v2) {\n    out[0] = v1[0] * v2[0];\n    out[1] = v1[1] * v2[1];\n    return out;\n}\nexport function div(out, v1, v2) {\n    out[0] = v1[0] / v2[0];\n    out[1] = v1[1] / v2[1];\n    return out;\n}\nexport function dot(v1, v2) {\n    return v1[0] * v2[0] + v1[1] * v2[1];\n}\nexport function scale(out, v, s) {\n    out[0] = v[0] * s;\n    out[1] = v[1] * s;\n    return out;\n}\nexport function normalize(out, v) {\n    var d = len(v);\n    if (d === 0) {\n        out[0] = 0;\n        out[1] = 0;\n    }\n    else {\n        out[0] = v[0] / d;\n        out[1] = v[1] / d;\n    }\n    return out;\n}\nexport function distance(v1, v2) {\n    return Math.sqrt((v1[0] - v2[0]) * (v1[0] - v2[0])\n        + (v1[1] - v2[1]) * (v1[1] - v2[1]));\n}\nexport var dist = distance;\nexport function distanceSquare(v1, v2) {\n    return (v1[0] - v2[0]) * (v1[0] - v2[0])\n        + (v1[1] - v2[1]) * (v1[1] - v2[1]);\n}\nexport var distSquare = distanceSquare;\nexport function negate(out, v) {\n    out[0] = -v[0];\n    out[1] = -v[1];\n    return out;\n}\nexport function lerp(out, v1, v2, t) {\n    out[0] = v1[0] + t * (v2[0] - v1[0]);\n    out[1] = v1[1] + t * (v2[1] - v1[1]);\n    return out;\n}\nexport function applyTransform(out, v, m) {\n    var x = v[0];\n    var y = v[1];\n    out[0] = m[0] * x + m[2] * y + m[4];\n    out[1] = m[1] * x + m[3] * y + m[5];\n    return out;\n}\nexport function min(out, v1, v2) {\n    out[0] = Math.min(v1[0], v2[0]);\n    out[1] = Math.min(v1[1], v2[1]);\n    return out;\n}\nexport function max(out, v1, v2) {\n    out[0] = Math.max(v1[0], v2[0]);\n    out[1] = Math.max(v1[1], v2[1]);\n    return out;\n}\n","var Param = (function () {\n    function Param(target, e) {\n        this.target = target;\n        this.topTarget = e && e.topTarget;\n    }\n    return Param;\n}());\nvar Draggable = (function () {\n    function Draggable(handler) {\n        this.handler = handler;\n        handler.on('mousedown', this._dragStart, this);\n        handler.on('mousemove', this._drag, this);\n        handler.on('mouseup', this._dragEnd, this);\n    }\n    Draggable.prototype._dragStart = function (e) {\n        var draggingTarget = e.target;\n        while (draggingTarget && !draggingTarget.draggable) {\n            draggingTarget = draggingTarget.parent || draggingTarget.__hostTarget;\n        }\n        if (draggingTarget) {\n            this._draggingTarget = draggingTarget;\n            draggingTarget.dragging = true;\n            this._x = e.offsetX;\n            this._y = e.offsetY;\n            this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragstart', e.event);\n        }\n    };\n    Draggable.prototype._drag = function (e) {\n        var draggingTarget = this._draggingTarget;\n        if (draggingTarget) {\n            var x = e.offsetX;\n            var y = e.offsetY;\n            var dx = x - this._x;\n            var dy = y - this._y;\n            this._x = x;\n            this._y = y;\n            draggingTarget.drift(dx, dy, e);\n            this.handler.dispatchToElement(new Param(draggingTarget, e), 'drag', e.event);\n            var dropTarget = this.handler.findHover(x, y, draggingTarget).target;\n            var lastDropTarget = this._dropTarget;\n            this._dropTarget = dropTarget;\n            if (draggingTarget !== dropTarget) {\n                if (lastDropTarget && dropTarget !== lastDropTarget) {\n                    this.handler.dispatchToElement(new Param(lastDropTarget, e), 'dragleave', e.event);\n                }\n                if (dropTarget && dropTarget !== lastDropTarget) {\n                    this.handler.dispatchToElement(new Param(dropTarget, e), 'dragenter', e.event);\n                }\n            }\n        }\n    };\n    Draggable.prototype._dragEnd = function (e) {\n        var draggingTarget = this._draggingTarget;\n        if (draggingTarget) {\n            draggingTarget.dragging = false;\n        }\n        this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragend', e.event);\n        if (this._dropTarget) {\n            this.handler.dispatchToElement(new Param(this._dropTarget, e), 'drop', e.event);\n        }\n        this._draggingTarget = null;\n        this._dropTarget = null;\n    };\n    return Draggable;\n}());\nexport default Draggable;\n","var Eventful = (function () {\n    function Eventful(eventProcessors) {\n        if (eventProcessors) {\n            this._$eventProcessor = eventProcessors;\n        }\n    }\n    Eventful.prototype.on = function (event, query, handler, context) {\n        if (!this._$handlers) {\n            this._$handlers = {};\n        }\n        var _h = this._$handlers;\n        if (typeof query === 'function') {\n            context = handler;\n            handler = query;\n            query = null;\n        }\n        if (!handler || !event) {\n            return this;\n        }\n        var eventProcessor = this._$eventProcessor;\n        if (query != null && eventProcessor && eventProcessor.normalizeQuery) {\n            query = eventProcessor.normalizeQuery(query);\n        }\n        if (!_h[event]) {\n            _h[event] = [];\n        }\n        for (var i = 0; i < _h[event].length; i++) {\n            if (_h[event][i].h === handler) {\n                return this;\n            }\n        }\n        var wrap = {\n            h: handler,\n            query: query,\n            ctx: (context || this),\n            callAtLast: handler.zrEventfulCallAtLast\n        };\n        var lastIndex = _h[event].length - 1;\n        var lastWrap = _h[event][lastIndex];\n        (lastWrap && lastWrap.callAtLast)\n            ? _h[event].splice(lastIndex, 0, wrap)\n            : _h[event].push(wrap);\n        return this;\n    };\n    Eventful.prototype.isSilent = function (eventName) {\n        var _h = this._$handlers;\n        return !_h || !_h[eventName] || !_h[eventName].length;\n    };\n    Eventful.prototype.off = function (eventType, handler) {\n        var _h = this._$handlers;\n        if (!_h) {\n            return this;\n        }\n        if (!eventType) {\n            this._$handlers = {};\n            return this;\n        }\n        if (handler) {\n            if (_h[eventType]) {\n                var newList = [];\n                for (var i = 0, l = _h[eventType].length; i < l; i++) {\n                    if (_h[eventType][i].h !== handler) {\n                        newList.push(_h[eventType][i]);\n                    }\n                }\n                _h[eventType] = newList;\n            }\n            if (_h[eventType] && _h[eventType].length === 0) {\n                delete _h[eventType];\n            }\n        }\n        else {\n            delete _h[eventType];\n        }\n        return this;\n    };\n    Eventful.prototype.trigger = function (eventType) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this._$handlers) {\n            return this;\n        }\n        var _h = this._$handlers[eventType];\n        var eventProcessor = this._$eventProcessor;\n        if (_h) {\n            var argLen = args.length;\n            var len = _h.length;\n            for (var i = 0; i < len; i++) {\n                var hItem = _h[i];\n                if (eventProcessor\n                    && eventProcessor.filter\n                    && hItem.query != null\n                    && !eventProcessor.filter(eventType, hItem.query)) {\n                    continue;\n                }\n                switch (argLen) {\n                    case 0:\n                        hItem.h.call(hItem.ctx);\n                        break;\n                    case 1:\n                        hItem.h.call(hItem.ctx, args[0]);\n                        break;\n                    case 2:\n                        hItem.h.call(hItem.ctx, args[0], args[1]);\n                        break;\n                    default:\n                        hItem.h.apply(hItem.ctx, args);\n                        break;\n                }\n            }\n        }\n        eventProcessor && eventProcessor.afterTrigger\n            && eventProcessor.afterTrigger(eventType);\n        return this;\n    };\n    Eventful.prototype.triggerWithContext = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this._$handlers) {\n            return this;\n        }\n        var _h = this._$handlers[type];\n        var eventProcessor = this._$eventProcessor;\n        if (_h) {\n            var argLen = args.length;\n            var ctx = args[argLen - 1];\n            var len = _h.length;\n            for (var i = 0; i < len; i++) {\n                var hItem = _h[i];\n                if (eventProcessor\n                    && eventProcessor.filter\n                    && hItem.query != null\n                    && !eventProcessor.filter(type, hItem.query)) {\n                    continue;\n                }\n                switch (argLen) {\n                    case 0:\n                        hItem.h.call(ctx);\n                        break;\n                    case 1:\n                        hItem.h.call(ctx, args[0]);\n                        break;\n                    case 2:\n                        hItem.h.call(ctx, args[0], args[1]);\n                        break;\n                    default:\n                        hItem.h.apply(ctx, args.slice(1, argLen - 1));\n                        break;\n                }\n            }\n        }\n        eventProcessor && eventProcessor.afterTrigger\n            && eventProcessor.afterTrigger(type);\n        return this;\n    };\n    return Eventful;\n}());\nexport default Eventful;\n","var LN2 = Math.log(2);\nfunction determinant(rows, rank, rowStart, rowMask, colMask, detCache) {\n    var cacheKey = rowMask + '-' + colMask;\n    var fullRank = rows.length;\n    if (detCache.hasOwnProperty(cacheKey)) {\n        return detCache[cacheKey];\n    }\n    if (rank === 1) {\n        var colStart = Math.round(Math.log(((1 << fullRank) - 1) & ~colMask) / LN2);\n        return rows[rowStart][colStart];\n    }\n    var subRowMask = rowMask | (1 << rowStart);\n    var subRowStart = rowStart + 1;\n    while (rowMask & (1 << subRowStart)) {\n        subRowStart++;\n    }\n    var sum = 0;\n    for (var j = 0, colLocalIdx = 0; j < fullRank; j++) {\n        var colTag = 1 << j;\n        if (!(colTag & colMask)) {\n            sum += (colLocalIdx % 2 ? -1 : 1) * rows[rowStart][j]\n                * determinant(rows, rank - 1, subRowStart, subRowMask, colMask | colTag, detCache);\n            colLocalIdx++;\n        }\n    }\n    detCache[cacheKey] = sum;\n    return sum;\n}\nexport function buildTransformer(src, dest) {\n    var mA = [\n        [src[0], src[1], 1, 0, 0, 0, -dest[0] * src[0], -dest[0] * src[1]],\n        [0, 0, 0, src[0], src[1], 1, -dest[1] * src[0], -dest[1] * src[1]],\n        [src[2], src[3], 1, 0, 0, 0, -dest[2] * src[2], -dest[2] * src[3]],\n        [0, 0, 0, src[2], src[3], 1, -dest[3] * src[2], -dest[3] * src[3]],\n        [src[4], src[5], 1, 0, 0, 0, -dest[4] * src[4], -dest[4] * src[5]],\n        [0, 0, 0, src[4], src[5], 1, -dest[5] * src[4], -dest[5] * src[5]],\n        [src[6], src[7], 1, 0, 0, 0, -dest[6] * src[6], -dest[6] * src[7]],\n        [0, 0, 0, src[6], src[7], 1, -dest[7] * src[6], -dest[7] * src[7]]\n    ];\n    var detCache = {};\n    var det = determinant(mA, 8, 0, 0, 0, detCache);\n    if (det === 0) {\n        return;\n    }\n    var vh = [];\n    for (var i = 0; i < 8; i++) {\n        for (var j = 0; j < 8; j++) {\n            vh[j] == null && (vh[j] = 0);\n            vh[j] += ((i + j) % 2 ? -1 : 1)\n                * determinant(mA, 7, i === 0 ? 1 : 0, 1 << i, 1 << j, detCache)\n                / det * dest[i];\n        }\n    }\n    return function (out, srcPointX, srcPointY) {\n        var pk = srcPointX * vh[6] + srcPointY * vh[7] + 1;\n        out[0] = (srcPointX * vh[0] + srcPointY * vh[1] + vh[2]) / pk;\n        out[1] = (srcPointX * vh[3] + srcPointY * vh[4] + vh[5]) / pk;\n    };\n}\n","import env from './env.js';\nimport { buildTransformer } from './fourPointsTransform.js';\nimport { each } from './util.js';\nvar EVENT_SAVED_PROP = '___zrEVENTSAVED';\nvar _calcOut = [];\nexport function transformLocalCoord(out, elFrom, elTarget, inX, inY) {\n    return transformCoordWithViewport(_calcOut, elFrom, inX, inY, true)\n        && transformCoordWithViewport(out, elTarget, _calcOut[0], _calcOut[1]);\n}\nexport function transformLocalCoordClear(elFrom, elTarget) {\n    elFrom && dealClear(elFrom);\n    elTarget && dealClear(elTarget);\n    function dealClear(el) {\n        var saved = el[EVENT_SAVED_PROP];\n        if (saved) {\n            saved.clearMarkers && saved.clearMarkers();\n            delete el[EVENT_SAVED_PROP];\n        }\n    }\n}\nexport function transformCoordWithViewport(out, el, inX, inY, inverse) {\n    if (el.getBoundingClientRect && env.domSupported && !isCanvasEl(el)) {\n        var saved = el[EVENT_SAVED_PROP] || (el[EVENT_SAVED_PROP] = {});\n        var markers = prepareCoordMarkers(el, saved);\n        var transformer = preparePointerTransformer(markers, saved, inverse);\n        if (transformer) {\n            transformer(out, inX, inY);\n            return true;\n        }\n    }\n    return false;\n}\nfunction prepareCoordMarkers(el, saved) {\n    var markers = saved.markers;\n    if (markers) {\n        return markers;\n    }\n    markers = saved.markers = [];\n    var propLR = ['left', 'right'];\n    var propTB = ['top', 'bottom'];\n    for (var i = 0; i < 4; i++) {\n        var marker = document.createElement('div');\n        var stl = marker.style;\n        var idxLR = i % 2;\n        var idxTB = (i >> 1) % 2;\n        stl.cssText = [\n            'position: absolute',\n            'visibility: hidden',\n            'padding: 0',\n            'margin: 0',\n            'border-width: 0',\n            'user-select: none',\n            'width:0',\n            'height:0',\n            propLR[idxLR] + ':0',\n            propTB[idxTB] + ':0',\n            propLR[1 - idxLR] + ':auto',\n            propTB[1 - idxTB] + ':auto',\n            ''\n        ].join('!important;');\n        el.appendChild(marker);\n        markers.push(marker);\n    }\n    saved.clearMarkers = function () {\n        each(markers, function (marker) {\n            marker.parentNode && marker.parentNode.removeChild(marker);\n        });\n    };\n    return markers;\n}\nfunction preparePointerTransformer(markers, saved, inverse) {\n    var transformerName = inverse ? 'invTrans' : 'trans';\n    var transformer = saved[transformerName];\n    var oldSrcCoords = saved.srcCoords;\n    var srcCoords = [];\n    var destCoords = [];\n    var oldCoordTheSame = true;\n    for (var i = 0; i < 4; i++) {\n        var rect = markers[i].getBoundingClientRect();\n        var ii = 2 * i;\n        var x = rect.left;\n        var y = rect.top;\n        srcCoords.push(x, y);\n        oldCoordTheSame = oldCoordTheSame && oldSrcCoords && x === oldSrcCoords[ii] && y === oldSrcCoords[ii + 1];\n        destCoords.push(markers[i].offsetLeft, markers[i].offsetTop);\n    }\n    return (oldCoordTheSame && transformer)\n        ? transformer\n        : (saved.srcCoords = srcCoords,\n            saved[transformerName] = inverse\n                ? buildTransformer(destCoords, srcCoords)\n                : buildTransformer(srcCoords, destCoords));\n}\nexport function isCanvasEl(el) {\n    return el.nodeName.toUpperCase() === 'CANVAS';\n}\nvar replaceReg = /([&<>\"'])/g;\nvar replaceMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    '\\'': '&#39;'\n};\nexport function encodeHTML(source) {\n    return source == null\n        ? ''\n        : (source + '').replace(replaceReg, function (str, c) {\n            return replaceMap[c];\n        });\n}\n","import Eventful from './Eventful.js';\nimport env from './env.js';\nimport { isCanvasEl, transformCoordWithViewport } from './dom.js';\nvar MOUSE_EVENT_REG = /^(?:mouse|pointer|contextmenu|drag|drop)|click/;\nvar _calcOut = [];\nvar firefoxNotSupportOffsetXY = env.browser.firefox\n    && +env.browser.version.split('.')[0] < 39;\nexport function clientToLocal(el, e, out, calculate) {\n    out = out || {};\n    if (calculate) {\n        calculateZrXY(el, e, out);\n    }\n    else if (firefoxNotSupportOffsetXY\n        && e.layerX != null\n        && e.layerX !== e.offsetX) {\n        out.zrX = e.layerX;\n        out.zrY = e.layerY;\n    }\n    else if (e.offsetX != null) {\n        out.zrX = e.offsetX;\n        out.zrY = e.offsetY;\n    }\n    else {\n        calculateZrXY(el, e, out);\n    }\n    return out;\n}\nfunction calculateZrXY(el, e, out) {\n    if (env.domSupported && el.getBoundingClientRect) {\n        var ex = e.clientX;\n        var ey = e.clientY;\n        if (isCanvasEl(el)) {\n            var box = el.getBoundingClientRect();\n            out.zrX = ex - box.left;\n            out.zrY = ey - box.top;\n            return;\n        }\n        else {\n            if (transformCoordWithViewport(_calcOut, el, ex, ey)) {\n                out.zrX = _calcOut[0];\n                out.zrY = _calcOut[1];\n                return;\n            }\n        }\n    }\n    out.zrX = out.zrY = 0;\n}\nexport function getNativeEvent(e) {\n    return e\n        || window.event;\n}\nexport function normalizeEvent(el, e, calculate) {\n    e = getNativeEvent(e);\n    if (e.zrX != null) {\n        return e;\n    }\n    var eventType = e.type;\n    var isTouch = eventType && eventType.indexOf('touch') >= 0;\n    if (!isTouch) {\n        clientToLocal(el, e, e, calculate);\n        var wheelDelta = getWheelDeltaMayPolyfill(e);\n        e.zrDelta = wheelDelta ? wheelDelta / 120 : -(e.detail || 0) / 3;\n    }\n    else {\n        var touch = eventType !== 'touchend'\n            ? e.targetTouches[0]\n            : e.changedTouches[0];\n        touch && clientToLocal(el, touch, e, calculate);\n    }\n    var button = e.button;\n    if (e.which == null && button !== undefined && MOUSE_EVENT_REG.test(e.type)) {\n        e.which = (button & 1 ? 1 : (button & 2 ? 3 : (button & 4 ? 2 : 0)));\n    }\n    return e;\n}\nfunction getWheelDeltaMayPolyfill(e) {\n    var rawWheelDelta = e.wheelDelta;\n    if (rawWheelDelta) {\n        return rawWheelDelta;\n    }\n    var deltaX = e.deltaX;\n    var deltaY = e.deltaY;\n    if (deltaX == null || deltaY == null) {\n        return rawWheelDelta;\n    }\n    var delta = deltaY !== 0 ? Math.abs(deltaY) : Math.abs(deltaX);\n    var sign = deltaY > 0 ? -1\n        : deltaY < 0 ? 1\n            : deltaX > 0 ? -1\n                : 1;\n    return 3 * delta * sign;\n}\nexport function addEventListener(el, name, handler, opt) {\n    el.addEventListener(name, handler, opt);\n}\nexport function removeEventListener(el, name, handler, opt) {\n    el.removeEventListener(name, handler, opt);\n}\nexport var stop = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    e.cancelBubble = true;\n};\nexport function isMiddleOrRightButtonOnMouseUpDown(e) {\n    return e.which === 2 || e.which === 3;\n}\nexport { Eventful as Dispatcher };\n","import * as eventUtil from './event.js';\nvar GestureMgr = (function () {\n    function GestureMgr() {\n        this._track = [];\n    }\n    GestureMgr.prototype.recognize = function (event, target, root) {\n        this._doTrack(event, target, root);\n        return this._recognize(event);\n    };\n    GestureMgr.prototype.clear = function () {\n        this._track.length = 0;\n        return this;\n    };\n    GestureMgr.prototype._doTrack = function (event, target, root) {\n        var touches = event.touches;\n        if (!touches) {\n            return;\n        }\n        var trackItem = {\n            points: [],\n            touches: [],\n            target: target,\n            event: event\n        };\n        for (var i = 0, len = touches.length; i < len; i++) {\n            var touch = touches[i];\n            var pos = eventUtil.clientToLocal(root, touch, {});\n            trackItem.points.push([pos.zrX, pos.zrY]);\n            trackItem.touches.push(touch);\n        }\n        this._track.push(trackItem);\n    };\n    GestureMgr.prototype._recognize = function (event) {\n        for (var eventName in recognizers) {\n            if (recognizers.hasOwnProperty(eventName)) {\n                var gestureInfo = recognizers[eventName](this._track, event);\n                if (gestureInfo) {\n                    return gestureInfo;\n                }\n            }\n        }\n    };\n    return GestureMgr;\n}());\nexport { GestureMgr };\nfunction dist(pointPair) {\n    var dx = pointPair[1][0] - pointPair[0][0];\n    var dy = pointPair[1][1] - pointPair[0][1];\n    return Math.sqrt(dx * dx + dy * dy);\n}\nfunction center(pointPair) {\n    return [\n        (pointPair[0][0] + pointPair[1][0]) / 2,\n        (pointPair[0][1] + pointPair[1][1]) / 2\n    ];\n}\nvar recognizers = {\n    pinch: function (tracks, event) {\n        var trackLen = tracks.length;\n        if (!trackLen) {\n            return;\n        }\n        var pinchEnd = (tracks[trackLen - 1] || {}).points;\n        var pinchPre = (tracks[trackLen - 2] || {}).points || pinchEnd;\n        if (pinchPre\n            && pinchPre.length > 1\n            && pinchEnd\n            && pinchEnd.length > 1) {\n            var pinchScale = dist(pinchEnd) / dist(pinchPre);\n            !isFinite(pinchScale) && (pinchScale = 1);\n            event.pinchScale = pinchScale;\n            var pinchCenter = center(pinchEnd);\n            event.pinchX = pinchCenter[0];\n            event.pinchY = pinchCenter[1];\n            return {\n                type: 'pinch',\n                target: tracks[0].target,\n                event: event\n            };\n        }\n    }\n};\n","export function create() {\n    return [1, 0, 0, 1, 0, 0];\n}\nexport function identity(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    out[4] = 0;\n    out[5] = 0;\n    return out;\n}\nexport function copy(out, m) {\n    out[0] = m[0];\n    out[1] = m[1];\n    out[2] = m[2];\n    out[3] = m[3];\n    out[4] = m[4];\n    out[5] = m[5];\n    return out;\n}\nexport function mul(out, m1, m2) {\n    var out0 = m1[0] * m2[0] + m1[2] * m2[1];\n    var out1 = m1[1] * m2[0] + m1[3] * m2[1];\n    var out2 = m1[0] * m2[2] + m1[2] * m2[3];\n    var out3 = m1[1] * m2[2] + m1[3] * m2[3];\n    var out4 = m1[0] * m2[4] + m1[2] * m2[5] + m1[4];\n    var out5 = m1[1] * m2[4] + m1[3] * m2[5] + m1[5];\n    out[0] = out0;\n    out[1] = out1;\n    out[2] = out2;\n    out[3] = out3;\n    out[4] = out4;\n    out[5] = out5;\n    return out;\n}\nexport function translate(out, a, v) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4] + v[0];\n    out[5] = a[5] + v[1];\n    return out;\n}\nexport function rotate(out, a, rad, pivot) {\n    if (pivot === void 0) { pivot = [0, 0]; }\n    var aa = a[0];\n    var ac = a[2];\n    var atx = a[4];\n    var ab = a[1];\n    var ad = a[3];\n    var aty = a[5];\n    var st = Math.sin(rad);\n    var ct = Math.cos(rad);\n    out[0] = aa * ct + ab * st;\n    out[1] = -aa * st + ab * ct;\n    out[2] = ac * ct + ad * st;\n    out[3] = -ac * st + ct * ad;\n    out[4] = ct * (atx - pivot[0]) + st * (aty - pivot[1]) + pivot[0];\n    out[5] = ct * (aty - pivot[1]) - st * (atx - pivot[0]) + pivot[1];\n    return out;\n}\nexport function scale(out, a, v) {\n    var vx = v[0];\n    var vy = v[1];\n    out[0] = a[0] * vx;\n    out[1] = a[1] * vy;\n    out[2] = a[2] * vx;\n    out[3] = a[3] * vy;\n    out[4] = a[4] * vx;\n    out[5] = a[5] * vy;\n    return out;\n}\nexport function invert(out, a) {\n    var aa = a[0];\n    var ac = a[2];\n    var atx = a[4];\n    var ab = a[1];\n    var ad = a[3];\n    var aty = a[5];\n    var det = aa * ad - ab * ac;\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n    out[0] = ad * det;\n    out[1] = -ab * det;\n    out[2] = -ac * det;\n    out[3] = aa * det;\n    out[4] = (ac * aty - ad * atx) * det;\n    out[5] = (ab * atx - aa * aty) * det;\n    return out;\n}\nexport function clone(a) {\n    var b = create();\n    copy(b, a);\n    return b;\n}\n","var Point = (function () {\n    function Point(x, y) {\n        this.x = x || 0;\n        this.y = y || 0;\n    }\n    Point.prototype.copy = function (other) {\n        this.x = other.x;\n        this.y = other.y;\n        return this;\n    };\n    Point.prototype.clone = function () {\n        return new Point(this.x, this.y);\n    };\n    Point.prototype.set = function (x, y) {\n        this.x = x;\n        this.y = y;\n        return this;\n    };\n    Point.prototype.equal = function (other) {\n        return other.x === this.x && other.y === this.y;\n    };\n    Point.prototype.add = function (other) {\n        this.x += other.x;\n        this.y += other.y;\n        return this;\n    };\n    Point.prototype.scale = function (scalar) {\n        this.x *= scalar;\n        this.y *= scalar;\n    };\n    Point.prototype.scaleAndAdd = function (other, scalar) {\n        this.x += other.x * scalar;\n        this.y += other.y * scalar;\n    };\n    Point.prototype.sub = function (other) {\n        this.x -= other.x;\n        this.y -= other.y;\n        return this;\n    };\n    Point.prototype.dot = function (other) {\n        return this.x * other.x + this.y * other.y;\n    };\n    Point.prototype.len = function () {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    };\n    Point.prototype.lenSquare = function () {\n        return this.x * this.x + this.y * this.y;\n    };\n    Point.prototype.normalize = function () {\n        var len = this.len();\n        this.x /= len;\n        this.y /= len;\n        return this;\n    };\n    Point.prototype.distance = function (other) {\n        var dx = this.x - other.x;\n        var dy = this.y - other.y;\n        return Math.sqrt(dx * dx + dy * dy);\n    };\n    Point.prototype.distanceSquare = function (other) {\n        var dx = this.x - other.x;\n        var dy = this.y - other.y;\n        return dx * dx + dy * dy;\n    };\n    Point.prototype.negate = function () {\n        this.x = -this.x;\n        this.y = -this.y;\n        return this;\n    };\n    Point.prototype.transform = function (m) {\n        if (!m) {\n            return;\n        }\n        var x = this.x;\n        var y = this.y;\n        this.x = m[0] * x + m[2] * y + m[4];\n        this.y = m[1] * x + m[3] * y + m[5];\n        return this;\n    };\n    Point.prototype.toArray = function (out) {\n        out[0] = this.x;\n        out[1] = this.y;\n        return out;\n    };\n    Point.prototype.fromArray = function (input) {\n        this.x = input[0];\n        this.y = input[1];\n    };\n    Point.set = function (p, x, y) {\n        p.x = x;\n        p.y = y;\n    };\n    Point.copy = function (p, p2) {\n        p.x = p2.x;\n        p.y = p2.y;\n    };\n    Point.len = function (p) {\n        return Math.sqrt(p.x * p.x + p.y * p.y);\n    };\n    Point.lenSquare = function (p) {\n        return p.x * p.x + p.y * p.y;\n    };\n    Point.dot = function (p0, p1) {\n        return p0.x * p1.x + p0.y * p1.y;\n    };\n    Point.add = function (out, p0, p1) {\n        out.x = p0.x + p1.x;\n        out.y = p0.y + p1.y;\n    };\n    Point.sub = function (out, p0, p1) {\n        out.x = p0.x - p1.x;\n        out.y = p0.y - p1.y;\n    };\n    Point.scale = function (out, p0, scalar) {\n        out.x = p0.x * scalar;\n        out.y = p0.y * scalar;\n    };\n    Point.scaleAndAdd = function (out, p0, p1, scalar) {\n        out.x = p0.x + p1.x * scalar;\n        out.y = p0.y + p1.y * scalar;\n    };\n    Point.lerp = function (out, p0, p1, t) {\n        var onet = 1 - t;\n        out.x = onet * p0.x + t * p1.x;\n        out.y = onet * p0.y + t * p1.y;\n    };\n    return Point;\n}());\nexport default Point;\n","import * as matrix from './matrix.js';\nimport Point from './Point.js';\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathAbs = Math.abs;\nvar XY = ['x', 'y'];\nvar WH = ['width', 'height'];\nvar lt = new Point();\nvar rb = new Point();\nvar lb = new Point();\nvar rt = new Point();\nvar _intersectCtx = createIntersectContext();\nvar _minTv = _intersectCtx.minTv;\nvar _maxTv = _intersectCtx.maxTv;\nvar _lenMinMax = [0, 0];\nvar BoundingRect = (function () {\n    function BoundingRect(x, y, width, height) {\n        BoundingRect.set(this, x, y, width, height);\n    }\n    BoundingRect.set = function (target, x, y, width, height) {\n        if (width < 0) {\n            x = x + width;\n            width = -width;\n        }\n        if (height < 0) {\n            y = y + height;\n            height = -height;\n        }\n        target.x = x;\n        target.y = y;\n        target.width = width;\n        target.height = height;\n        return target;\n    };\n    BoundingRect.prototype.union = function (other) {\n        var x = mathMin(other.x, this.x);\n        var y = mathMin(other.y, this.y);\n        if (isFinite(this.x) && isFinite(this.width)) {\n            this.width = mathMax(other.x + other.width, this.x + this.width) - x;\n        }\n        else {\n            this.width = other.width;\n        }\n        if (isFinite(this.y) && isFinite(this.height)) {\n            this.height = mathMax(other.y + other.height, this.y + this.height) - y;\n        }\n        else {\n            this.height = other.height;\n        }\n        this.x = x;\n        this.y = y;\n    };\n    BoundingRect.prototype.applyTransform = function (m) {\n        BoundingRect.applyTransform(this, this, m);\n    };\n    BoundingRect.prototype.calculateTransform = function (b) {\n        var a = this;\n        var sx = b.width / a.width;\n        var sy = b.height / a.height;\n        var m = matrix.create();\n        matrix.translate(m, m, [-a.x, -a.y]);\n        matrix.scale(m, m, [sx, sy]);\n        matrix.translate(m, m, [b.x, b.y]);\n        return m;\n    };\n    BoundingRect.prototype.intersect = function (b, mtv, opt) {\n        return BoundingRect.intersect(this, b, mtv, opt);\n    };\n    BoundingRect.intersect = function (a, b, mtv, opt) {\n        if (mtv) {\n            Point.set(mtv, 0, 0);\n        }\n        var outIntersectRect = opt && opt.outIntersectRect || null;\n        var clamp = opt && opt.clamp;\n        if (outIntersectRect) {\n            outIntersectRect.x = outIntersectRect.y = outIntersectRect.width = outIntersectRect.height = NaN;\n        }\n        if (!a || !b) {\n            return false;\n        }\n        if (!(a instanceof BoundingRect)) {\n            a = BoundingRect.set(_tmpIntersectA, a.x, a.y, a.width, a.height);\n        }\n        if (!(b instanceof BoundingRect)) {\n            b = BoundingRect.set(_tmpIntersectB, b.x, b.y, b.width, b.height);\n        }\n        var useMTV = !!mtv;\n        _intersectCtx.reset(opt, useMTV);\n        var touchThreshold = _intersectCtx.touchThreshold;\n        var ax0 = a.x + touchThreshold;\n        var ax1 = a.x + a.width - touchThreshold;\n        var ay0 = a.y + touchThreshold;\n        var ay1 = a.y + a.height - touchThreshold;\n        var bx0 = b.x + touchThreshold;\n        var bx1 = b.x + b.width - touchThreshold;\n        var by0 = b.y + touchThreshold;\n        var by1 = b.y + b.height - touchThreshold;\n        if (ax0 > ax1 || ay0 > ay1 || bx0 > bx1 || by0 > by1) {\n            return false;\n        }\n        var overlap = !(ax1 < bx0 || bx1 < ax0 || ay1 < by0 || by1 < ay0);\n        if (useMTV || outIntersectRect) {\n            _lenMinMax[0] = Infinity;\n            _lenMinMax[1] = 0;\n            intersectOneDim(ax0, ax1, bx0, bx1, 0, useMTV, outIntersectRect, clamp);\n            intersectOneDim(ay0, ay1, by0, by1, 1, useMTV, outIntersectRect, clamp);\n            if (useMTV) {\n                Point.copy(mtv, overlap\n                    ? (_intersectCtx.useDir ? _intersectCtx.dirMinTv : _minTv)\n                    : _maxTv);\n            }\n        }\n        return overlap;\n    };\n    BoundingRect.contain = function (rect, x, y) {\n        return x >= rect.x\n            && x <= (rect.x + rect.width)\n            && y >= rect.y\n            && y <= (rect.y + rect.height);\n    };\n    BoundingRect.prototype.contain = function (x, y) {\n        return BoundingRect.contain(this, x, y);\n    };\n    BoundingRect.prototype.clone = function () {\n        return new BoundingRect(this.x, this.y, this.width, this.height);\n    };\n    BoundingRect.prototype.copy = function (other) {\n        BoundingRect.copy(this, other);\n    };\n    BoundingRect.prototype.plain = function () {\n        return {\n            x: this.x,\n            y: this.y,\n            width: this.width,\n            height: this.height\n        };\n    };\n    BoundingRect.prototype.isFinite = function () {\n        return isFinite(this.x)\n            && isFinite(this.y)\n            && isFinite(this.width)\n            && isFinite(this.height);\n    };\n    BoundingRect.prototype.isZero = function () {\n        return this.width === 0 || this.height === 0;\n    };\n    BoundingRect.create = function (rect) {\n        return new BoundingRect(rect.x, rect.y, rect.width, rect.height);\n    };\n    BoundingRect.copy = function (target, source) {\n        target.x = source.x;\n        target.y = source.y;\n        target.width = source.width;\n        target.height = source.height;\n        return target;\n    };\n    BoundingRect.applyTransform = function (target, source, m) {\n        if (!m) {\n            if (target !== source) {\n                BoundingRect.copy(target, source);\n            }\n            return;\n        }\n        if (m[1] < 1e-5 && m[1] > -1e-5 && m[2] < 1e-5 && m[2] > -1e-5) {\n            var sx = m[0];\n            var sy = m[3];\n            var tx = m[4];\n            var ty = m[5];\n            target.x = source.x * sx + tx;\n            target.y = source.y * sy + ty;\n            target.width = source.width * sx;\n            target.height = source.height * sy;\n            if (target.width < 0) {\n                target.x += target.width;\n                target.width = -target.width;\n            }\n            if (target.height < 0) {\n                target.y += target.height;\n                target.height = -target.height;\n            }\n            return;\n        }\n        lt.x = lb.x = source.x;\n        lt.y = rt.y = source.y;\n        rb.x = rt.x = source.x + source.width;\n        rb.y = lb.y = source.y + source.height;\n        lt.transform(m);\n        rt.transform(m);\n        rb.transform(m);\n        lb.transform(m);\n        target.x = mathMin(lt.x, rb.x, lb.x, rt.x);\n        target.y = mathMin(lt.y, rb.y, lb.y, rt.y);\n        var maxX = mathMax(lt.x, rb.x, lb.x, rt.x);\n        var maxY = mathMax(lt.y, rb.y, lb.y, rt.y);\n        target.width = maxX - target.x;\n        target.height = maxY - target.y;\n    };\n    return BoundingRect;\n}());\nvar _tmpIntersectA = new BoundingRect(0, 0, 0, 0);\nvar _tmpIntersectB = new BoundingRect(0, 0, 0, 0);\nfunction intersectOneDim(a0, a1, b0, b1, updateDimIdx, useMTV, outIntersectRect, clamp) {\n    var d0 = mathAbs(a1 - b0);\n    var d1 = mathAbs(b1 - a0);\n    var d01min = mathMin(d0, d1);\n    var updateDim = XY[updateDimIdx];\n    var zeroDim = XY[1 - updateDimIdx];\n    var wh = WH[updateDimIdx];\n    if (a1 < b0 || b1 < a0) {\n        if (d0 < d1) {\n            if (useMTV) {\n                _maxTv[updateDim] = -d0;\n            }\n            if (clamp) {\n                outIntersectRect[updateDim] = a1;\n                outIntersectRect[wh] = 0;\n            }\n        }\n        else {\n            if (useMTV) {\n                _maxTv[updateDim] = d1;\n            }\n            if (clamp) {\n                outIntersectRect[updateDim] = a0;\n                outIntersectRect[wh] = 0;\n            }\n        }\n    }\n    else {\n        if (outIntersectRect) {\n            outIntersectRect[updateDim] = mathMax(a0, b0);\n            outIntersectRect[wh] = mathMin(a1, b1) - outIntersectRect[updateDim];\n        }\n        if (useMTV) {\n            if (d01min < _lenMinMax[0] || _intersectCtx.useDir) {\n                _lenMinMax[0] = mathMin(d01min, _lenMinMax[0]);\n                if (d0 < d1 || !_intersectCtx.bidirectional) {\n                    _minTv[updateDim] = d0;\n                    _minTv[zeroDim] = 0;\n                    if (_intersectCtx.useDir) {\n                        _intersectCtx.calcDirMTV();\n                    }\n                }\n                if (d0 >= d1 || !_intersectCtx.bidirectional) {\n                    _minTv[updateDim] = -d1;\n                    _minTv[zeroDim] = 0;\n                    if (_intersectCtx.useDir) {\n                        _intersectCtx.calcDirMTV();\n                    }\n                }\n            }\n        }\n    }\n}\nexport function createIntersectContext() {\n    var _direction = 0;\n    var _dirCheckVec = new Point();\n    var _dirTmp = new Point();\n    var _ctx = {\n        minTv: new Point(),\n        maxTv: new Point(),\n        useDir: false,\n        dirMinTv: new Point(),\n        touchThreshold: 0,\n        bidirectional: true,\n        negativeSize: false,\n        reset: function (opt, useMTV) {\n            _ctx.touchThreshold = 0;\n            if (opt && opt.touchThreshold != null) {\n                _ctx.touchThreshold = mathMax(0, opt.touchThreshold);\n            }\n            _ctx.negativeSize = false;\n            if (!useMTV) {\n                return;\n            }\n            _ctx.minTv.set(Infinity, Infinity);\n            _ctx.maxTv.set(0, 0);\n            _ctx.useDir = false;\n            if (opt && opt.direction != null) {\n                _ctx.useDir = true;\n                _ctx.dirMinTv.copy(_ctx.minTv);\n                _dirTmp.copy(_ctx.minTv);\n                _direction = opt.direction;\n                _ctx.bidirectional = opt.bidirectional == null || !!opt.bidirectional;\n                if (!_ctx.bidirectional) {\n                    _dirCheckVec.set(Math.cos(_direction), Math.sin(_direction));\n                }\n            }\n        },\n        calcDirMTV: function () {\n            var minTv = _ctx.minTv;\n            var dirMinTv = _ctx.dirMinTv;\n            var squareMag = minTv.y * minTv.y + minTv.x * minTv.x;\n            var dirSin = Math.sin(_direction);\n            var dirCos = Math.cos(_direction);\n            var dotProd = dirSin * minTv.y + dirCos * minTv.x;\n            if (nearZero(dotProd)) {\n                if (nearZero(minTv.x) && nearZero(minTv.y)) {\n                    dirMinTv.set(0, 0);\n                }\n                return;\n            }\n            _dirTmp.x = squareMag * dirCos / dotProd;\n            _dirTmp.y = squareMag * dirSin / dotProd;\n            if (nearZero(_dirTmp.x) && nearZero(_dirTmp.y)) {\n                dirMinTv.set(0, 0);\n                return;\n            }\n            if ((_ctx.bidirectional\n                || _dirCheckVec.dot(_dirTmp) > 0)\n                && _dirTmp.len() < dirMinTv.len()) {\n                dirMinTv.copy(_dirTmp);\n            }\n        }\n    };\n    function nearZero(val) {\n        return mathAbs(val) < 1e-10;\n    }\n    return _ctx;\n}\nexport default BoundingRect;\n","import { __extends } from \"tslib\";\nimport * as util from './core/util.js';\nimport * as vec2 from './core/vector.js';\nimport Draggable from './mixin/Draggable.js';\nimport Eventful from './core/Eventful.js';\nimport * as eventTool from './core/event.js';\nimport { GestureMgr } from './core/GestureMgr.js';\nimport BoundingRect from './core/BoundingRect.js';\nvar SILENT = 'silent';\nfunction makeEventPacket(eveType, targetInfo, event) {\n    return {\n        type: eveType,\n        event: event,\n        target: targetInfo.target,\n        topTarget: targetInfo.topTarget,\n        cancelBubble: false,\n        offsetX: event.zrX,\n        offsetY: event.zrY,\n        gestureEvent: event.gestureEvent,\n        pinchX: event.pinchX,\n        pinchY: event.pinchY,\n        pinchScale: event.pinchScale,\n        wheelDelta: event.zrDelta,\n        zrByTouch: event.zrByTouch,\n        which: event.which,\n        stop: stopEvent\n    };\n}\nfunction stopEvent() {\n    eventTool.stop(this.event);\n}\nvar EmptyProxy = (function (_super) {\n    __extends(EmptyProxy, _super);\n    function EmptyProxy() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handler = null;\n        return _this;\n    }\n    EmptyProxy.prototype.dispose = function () { };\n    EmptyProxy.prototype.setCursor = function () { };\n    return EmptyProxy;\n}(Eventful));\nvar HoveredResult = (function () {\n    function HoveredResult(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    return HoveredResult;\n}());\nvar handlerNames = [\n    'click', 'dblclick', 'mousewheel', 'mouseout',\n    'mouseup', 'mousedown', 'mousemove', 'contextmenu'\n];\nvar tmpRect = new BoundingRect(0, 0, 0, 0);\nvar Handler = (function (_super) {\n    __extends(Handler, _super);\n    function Handler(storage, painter, proxy, painterRoot, pointerSize) {\n        var _this = _super.call(this) || this;\n        _this._hovered = new HoveredResult(0, 0);\n        _this.storage = storage;\n        _this.painter = painter;\n        _this.painterRoot = painterRoot;\n        _this._pointerSize = pointerSize;\n        proxy = proxy || new EmptyProxy();\n        _this.proxy = null;\n        _this.setHandlerProxy(proxy);\n        _this._draggingMgr = new Draggable(_this);\n        return _this;\n    }\n    Handler.prototype.setHandlerProxy = function (proxy) {\n        if (this.proxy) {\n            this.proxy.dispose();\n        }\n        if (proxy) {\n            util.each(handlerNames, function (name) {\n                proxy.on && proxy.on(name, this[name], this);\n            }, this);\n            proxy.handler = this;\n        }\n        this.proxy = proxy;\n    };\n    Handler.prototype.mousemove = function (event) {\n        var x = event.zrX;\n        var y = event.zrY;\n        var isOutside = isOutsideBoundary(this, x, y);\n        var lastHovered = this._hovered;\n        var lastHoveredTarget = lastHovered.target;\n        if (lastHoveredTarget && !lastHoveredTarget.__zr) {\n            lastHovered = this.findHover(lastHovered.x, lastHovered.y);\n            lastHoveredTarget = lastHovered.target;\n        }\n        var hovered = this._hovered = isOutside ? new HoveredResult(x, y) : this.findHover(x, y);\n        var hoveredTarget = hovered.target;\n        var proxy = this.proxy;\n        proxy.setCursor && proxy.setCursor(hoveredTarget ? hoveredTarget.cursor : 'default');\n        if (lastHoveredTarget && hoveredTarget !== lastHoveredTarget) {\n            this.dispatchToElement(lastHovered, 'mouseout', event);\n        }\n        this.dispatchToElement(hovered, 'mousemove', event);\n        if (hoveredTarget && hoveredTarget !== lastHoveredTarget) {\n            this.dispatchToElement(hovered, 'mouseover', event);\n        }\n    };\n    Handler.prototype.mouseout = function (event) {\n        var eventControl = event.zrEventControl;\n        if (eventControl !== 'only_globalout') {\n            this.dispatchToElement(this._hovered, 'mouseout', event);\n        }\n        if (eventControl !== 'no_globalout') {\n            this.trigger('globalout', { type: 'globalout', event: event });\n        }\n    };\n    Handler.prototype.resize = function () {\n        this._hovered = new HoveredResult(0, 0);\n    };\n    Handler.prototype.dispatch = function (eventName, eventArgs) {\n        var handler = this[eventName];\n        handler && handler.call(this, eventArgs);\n    };\n    Handler.prototype.dispose = function () {\n        this.proxy.dispose();\n        this.storage = null;\n        this.proxy = null;\n        this.painter = null;\n    };\n    Handler.prototype.setCursorStyle = function (cursorStyle) {\n        var proxy = this.proxy;\n        proxy.setCursor && proxy.setCursor(cursorStyle);\n    };\n    Handler.prototype.dispatchToElement = function (targetInfo, eventName, event) {\n        targetInfo = targetInfo || {};\n        var el = targetInfo.target;\n        if (el && el.silent) {\n            return;\n        }\n        var eventKey = ('on' + eventName);\n        var eventPacket = makeEventPacket(eventName, targetInfo, event);\n        while (el) {\n            el[eventKey]\n                && (eventPacket.cancelBubble = !!el[eventKey].call(el, eventPacket));\n            el.trigger(eventName, eventPacket);\n            el = el.__hostTarget ? el.__hostTarget : el.parent;\n            if (eventPacket.cancelBubble) {\n                break;\n            }\n        }\n        if (!eventPacket.cancelBubble) {\n            this.trigger(eventName, eventPacket);\n            if (this.painter && this.painter.eachOtherLayer) {\n                this.painter.eachOtherLayer(function (layer) {\n                    if (typeof (layer[eventKey]) === 'function') {\n                        layer[eventKey].call(layer, eventPacket);\n                    }\n                    if (layer.trigger) {\n                        layer.trigger(eventName, eventPacket);\n                    }\n                });\n            }\n        }\n    };\n    Handler.prototype.findHover = function (x, y, exclude) {\n        var list = this.storage.getDisplayList();\n        var out = new HoveredResult(x, y);\n        setHoverTarget(list, out, x, y, exclude);\n        if (this._pointerSize && !out.target) {\n            var candidates = [];\n            var pointerSize = this._pointerSize;\n            var targetSizeHalf = pointerSize / 2;\n            var pointerRect = new BoundingRect(x - targetSizeHalf, y - targetSizeHalf, pointerSize, pointerSize);\n            for (var i = list.length - 1; i >= 0; i--) {\n                var el = list[i];\n                if (el !== exclude\n                    && !el.ignore\n                    && !el.ignoreCoarsePointer\n                    && (!el.parent || !el.parent.ignoreCoarsePointer)) {\n                    tmpRect.copy(el.getBoundingRect());\n                    if (el.transform) {\n                        tmpRect.applyTransform(el.transform);\n                    }\n                    if (tmpRect.intersect(pointerRect)) {\n                        candidates.push(el);\n                    }\n                }\n            }\n            if (candidates.length) {\n                var rStep = 4;\n                var thetaStep = Math.PI / 12;\n                var PI2 = Math.PI * 2;\n                for (var r = 0; r < targetSizeHalf; r += rStep) {\n                    for (var theta = 0; theta < PI2; theta += thetaStep) {\n                        var x1 = x + r * Math.cos(theta);\n                        var y1 = y + r * Math.sin(theta);\n                        setHoverTarget(candidates, out, x1, y1, exclude);\n                        if (out.target) {\n                            return out;\n                        }\n                    }\n                }\n            }\n        }\n        return out;\n    };\n    Handler.prototype.processGesture = function (event, stage) {\n        if (!this._gestureMgr) {\n            this._gestureMgr = new GestureMgr();\n        }\n        var gestureMgr = this._gestureMgr;\n        stage === 'start' && gestureMgr.clear();\n        var gestureInfo = gestureMgr.recognize(event, this.findHover(event.zrX, event.zrY, null).target, this.proxy.dom);\n        stage === 'end' && gestureMgr.clear();\n        if (gestureInfo) {\n            var type = gestureInfo.type;\n            event.gestureEvent = type;\n            var res = new HoveredResult();\n            res.target = gestureInfo.target;\n            this.dispatchToElement(res, type, gestureInfo.event);\n        }\n    };\n    return Handler;\n}(Eventful));\nutil.each(['click', 'mousedown', 'mouseup', 'mousewheel', 'dblclick', 'contextmenu'], function (name) {\n    Handler.prototype[name] = function (event) {\n        var x = event.zrX;\n        var y = event.zrY;\n        var isOutside = isOutsideBoundary(this, x, y);\n        var hovered;\n        var hoveredTarget;\n        if (name !== 'mouseup' || !isOutside) {\n            hovered = this.findHover(x, y);\n            hoveredTarget = hovered.target;\n        }\n        if (name === 'mousedown') {\n            this._downEl = hoveredTarget;\n            this._downPoint = [event.zrX, event.zrY];\n            this._upEl = hoveredTarget;\n        }\n        else if (name === 'mouseup') {\n            this._upEl = hoveredTarget;\n        }\n        else if (name === 'click') {\n            if (this._downEl !== this._upEl\n                || !this._downPoint\n                || vec2.dist(this._downPoint, [event.zrX, event.zrY]) > 4) {\n                return;\n            }\n            this._downPoint = null;\n        }\n        this.dispatchToElement(hovered, name, event);\n    };\n});\nfunction isHover(displayable, x, y) {\n    if (displayable[displayable.rectHover ? 'rectContain' : 'contain'](x, y)) {\n        var el = displayable;\n        var isSilent = void 0;\n        var ignoreClip = false;\n        while (el) {\n            if (el.ignoreClip) {\n                ignoreClip = true;\n            }\n            if (!ignoreClip) {\n                var clipPath = el.getClipPath();\n                if (clipPath && !clipPath.contain(x, y)) {\n                    return false;\n                }\n            }\n            if (el.silent) {\n                isSilent = true;\n            }\n            var hostEl = el.__hostTarget;\n            el = hostEl ? (el.ignoreHostSilent ? null : hostEl) : el.parent;\n        }\n        return isSilent ? SILENT : true;\n    }\n    return false;\n}\nfunction setHoverTarget(list, out, x, y, exclude) {\n    for (var i = list.length - 1; i >= 0; i--) {\n        var el = list[i];\n        var hoverCheckResult = void 0;\n        if (el !== exclude\n            && !el.ignore\n            && (hoverCheckResult = isHover(el, x, y))) {\n            !out.topTarget && (out.topTarget = el);\n            if (hoverCheckResult !== SILENT) {\n                out.target = el;\n                break;\n            }\n        }\n    }\n}\nfunction isOutsideBoundary(handlerInstance, x, y) {\n    var painter = handlerInstance.painter;\n    return x < 0 || x > painter.getWidth() || y < 0 || y > painter.getHeight();\n}\nexport default Handler;\n","var DEFAULT_MIN_MERGE = 32;\nvar DEFAULT_MIN_GALLOPING = 7;\nfunction minRunLength(n) {\n    var r = 0;\n    while (n >= DEFAULT_MIN_MERGE) {\n        r |= n & 1;\n        n >>= 1;\n    }\n    return n + r;\n}\nfunction makeAscendingRun(array, lo, hi, compare) {\n    var runHi = lo + 1;\n    if (runHi === hi) {\n        return 1;\n    }\n    if (compare(array[runHi++], array[lo]) < 0) {\n        while (runHi < hi && compare(array[runHi], array[runHi - 1]) < 0) {\n            runHi++;\n        }\n        reverseRun(array, lo, runHi);\n    }\n    else {\n        while (runHi < hi && compare(array[runHi], array[runHi - 1]) >= 0) {\n            runHi++;\n        }\n    }\n    return runHi - lo;\n}\nfunction reverseRun(array, lo, hi) {\n    hi--;\n    while (lo < hi) {\n        var t = array[lo];\n        array[lo++] = array[hi];\n        array[hi--] = t;\n    }\n}\nfunction binaryInsertionSort(array, lo, hi, start, compare) {\n    if (start === lo) {\n        start++;\n    }\n    for (; start < hi; start++) {\n        var pivot = array[start];\n        var left = lo;\n        var right = start;\n        var mid;\n        while (left < right) {\n            mid = left + right >>> 1;\n            if (compare(pivot, array[mid]) < 0) {\n                right = mid;\n            }\n            else {\n                left = mid + 1;\n            }\n        }\n        var n = start - left;\n        switch (n) {\n            case 3:\n                array[left + 3] = array[left + 2];\n            case 2:\n                array[left + 2] = array[left + 1];\n            case 1:\n                array[left + 1] = array[left];\n                break;\n            default:\n                while (n > 0) {\n                    array[left + n] = array[left + n - 1];\n                    n--;\n                }\n        }\n        array[left] = pivot;\n    }\n}\nfunction gallopLeft(value, array, start, length, hint, compare) {\n    var lastOffset = 0;\n    var maxOffset = 0;\n    var offset = 1;\n    if (compare(value, array[start + hint]) > 0) {\n        maxOffset = length - hint;\n        while (offset < maxOffset && compare(value, array[start + hint + offset]) > 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n        lastOffset += hint;\n        offset += hint;\n    }\n    else {\n        maxOffset = hint + 1;\n        while (offset < maxOffset && compare(value, array[start + hint - offset]) <= 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n        var tmp = lastOffset;\n        lastOffset = hint - offset;\n        offset = hint - tmp;\n    }\n    lastOffset++;\n    while (lastOffset < offset) {\n        var m = lastOffset + (offset - lastOffset >>> 1);\n        if (compare(value, array[start + m]) > 0) {\n            lastOffset = m + 1;\n        }\n        else {\n            offset = m;\n        }\n    }\n    return offset;\n}\nfunction gallopRight(value, array, start, length, hint, compare) {\n    var lastOffset = 0;\n    var maxOffset = 0;\n    var offset = 1;\n    if (compare(value, array[start + hint]) < 0) {\n        maxOffset = hint + 1;\n        while (offset < maxOffset && compare(value, array[start + hint - offset]) < 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n        var tmp = lastOffset;\n        lastOffset = hint - offset;\n        offset = hint - tmp;\n    }\n    else {\n        maxOffset = length - hint;\n        while (offset < maxOffset && compare(value, array[start + hint + offset]) >= 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n        lastOffset += hint;\n        offset += hint;\n    }\n    lastOffset++;\n    while (lastOffset < offset) {\n        var m = lastOffset + (offset - lastOffset >>> 1);\n        if (compare(value, array[start + m]) < 0) {\n            offset = m;\n        }\n        else {\n            lastOffset = m + 1;\n        }\n    }\n    return offset;\n}\nfunction TimSort(array, compare) {\n    var minGallop = DEFAULT_MIN_GALLOPING;\n    var runStart;\n    var runLength;\n    var stackSize = 0;\n    var tmp = [];\n    runStart = [];\n    runLength = [];\n    function pushRun(_runStart, _runLength) {\n        runStart[stackSize] = _runStart;\n        runLength[stackSize] = _runLength;\n        stackSize += 1;\n    }\n    function mergeRuns() {\n        while (stackSize > 1) {\n            var n = stackSize - 2;\n            if ((n >= 1 && runLength[n - 1] <= runLength[n] + runLength[n + 1])\n                || (n >= 2 && runLength[n - 2] <= runLength[n] + runLength[n - 1])) {\n                if (runLength[n - 1] < runLength[n + 1]) {\n                    n--;\n                }\n            }\n            else if (runLength[n] > runLength[n + 1]) {\n                break;\n            }\n            mergeAt(n);\n        }\n    }\n    function forceMergeRuns() {\n        while (stackSize > 1) {\n            var n = stackSize - 2;\n            if (n > 0 && runLength[n - 1] < runLength[n + 1]) {\n                n--;\n            }\n            mergeAt(n);\n        }\n    }\n    function mergeAt(i) {\n        var start1 = runStart[i];\n        var length1 = runLength[i];\n        var start2 = runStart[i + 1];\n        var length2 = runLength[i + 1];\n        runLength[i] = length1 + length2;\n        if (i === stackSize - 3) {\n            runStart[i + 1] = runStart[i + 2];\n            runLength[i + 1] = runLength[i + 2];\n        }\n        stackSize--;\n        var k = gallopRight(array[start2], array, start1, length1, 0, compare);\n        start1 += k;\n        length1 -= k;\n        if (length1 === 0) {\n            return;\n        }\n        length2 = gallopLeft(array[start1 + length1 - 1], array, start2, length2, length2 - 1, compare);\n        if (length2 === 0) {\n            return;\n        }\n        if (length1 <= length2) {\n            mergeLow(start1, length1, start2, length2);\n        }\n        else {\n            mergeHigh(start1, length1, start2, length2);\n        }\n    }\n    function mergeLow(start1, length1, start2, length2) {\n        var i = 0;\n        for (i = 0; i < length1; i++) {\n            tmp[i] = array[start1 + i];\n        }\n        var cursor1 = 0;\n        var cursor2 = start2;\n        var dest = start1;\n        array[dest++] = array[cursor2++];\n        if (--length2 === 0) {\n            for (i = 0; i < length1; i++) {\n                array[dest + i] = tmp[cursor1 + i];\n            }\n            return;\n        }\n        if (length1 === 1) {\n            for (i = 0; i < length2; i++) {\n                array[dest + i] = array[cursor2 + i];\n            }\n            array[dest + length2] = tmp[cursor1];\n            return;\n        }\n        var _minGallop = minGallop;\n        var count1;\n        var count2;\n        var exit;\n        while (1) {\n            count1 = 0;\n            count2 = 0;\n            exit = false;\n            do {\n                if (compare(array[cursor2], tmp[cursor1]) < 0) {\n                    array[dest++] = array[cursor2++];\n                    count2++;\n                    count1 = 0;\n                    if (--length2 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                else {\n                    array[dest++] = tmp[cursor1++];\n                    count1++;\n                    count2 = 0;\n                    if (--length1 === 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n            } while ((count1 | count2) < _minGallop);\n            if (exit) {\n                break;\n            }\n            do {\n                count1 = gallopRight(array[cursor2], tmp, cursor1, length1, 0, compare);\n                if (count1 !== 0) {\n                    for (i = 0; i < count1; i++) {\n                        array[dest + i] = tmp[cursor1 + i];\n                    }\n                    dest += count1;\n                    cursor1 += count1;\n                    length1 -= count1;\n                    if (length1 <= 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n                array[dest++] = array[cursor2++];\n                if (--length2 === 0) {\n                    exit = true;\n                    break;\n                }\n                count2 = gallopLeft(tmp[cursor1], array, cursor2, length2, 0, compare);\n                if (count2 !== 0) {\n                    for (i = 0; i < count2; i++) {\n                        array[dest + i] = array[cursor2 + i];\n                    }\n                    dest += count2;\n                    cursor2 += count2;\n                    length2 -= count2;\n                    if (length2 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                array[dest++] = tmp[cursor1++];\n                if (--length1 === 1) {\n                    exit = true;\n                    break;\n                }\n                _minGallop--;\n            } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\n            if (exit) {\n                break;\n            }\n            if (_minGallop < 0) {\n                _minGallop = 0;\n            }\n            _minGallop += 2;\n        }\n        minGallop = _minGallop;\n        minGallop < 1 && (minGallop = 1);\n        if (length1 === 1) {\n            for (i = 0; i < length2; i++) {\n                array[dest + i] = array[cursor2 + i];\n            }\n            array[dest + length2] = tmp[cursor1];\n        }\n        else if (length1 === 0) {\n            throw new Error();\n        }\n        else {\n            for (i = 0; i < length1; i++) {\n                array[dest + i] = tmp[cursor1 + i];\n            }\n        }\n    }\n    function mergeHigh(start1, length1, start2, length2) {\n        var i = 0;\n        for (i = 0; i < length2; i++) {\n            tmp[i] = array[start2 + i];\n        }\n        var cursor1 = start1 + length1 - 1;\n        var cursor2 = length2 - 1;\n        var dest = start2 + length2 - 1;\n        var customCursor = 0;\n        var customDest = 0;\n        array[dest--] = array[cursor1--];\n        if (--length1 === 0) {\n            customCursor = dest - (length2 - 1);\n            for (i = 0; i < length2; i++) {\n                array[customCursor + i] = tmp[i];\n            }\n            return;\n        }\n        if (length2 === 1) {\n            dest -= length1;\n            cursor1 -= length1;\n            customDest = dest + 1;\n            customCursor = cursor1 + 1;\n            for (i = length1 - 1; i >= 0; i--) {\n                array[customDest + i] = array[customCursor + i];\n            }\n            array[dest] = tmp[cursor2];\n            return;\n        }\n        var _minGallop = minGallop;\n        while (true) {\n            var count1 = 0;\n            var count2 = 0;\n            var exit = false;\n            do {\n                if (compare(tmp[cursor2], array[cursor1]) < 0) {\n                    array[dest--] = array[cursor1--];\n                    count1++;\n                    count2 = 0;\n                    if (--length1 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                else {\n                    array[dest--] = tmp[cursor2--];\n                    count2++;\n                    count1 = 0;\n                    if (--length2 === 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n            } while ((count1 | count2) < _minGallop);\n            if (exit) {\n                break;\n            }\n            do {\n                count1 = length1 - gallopRight(tmp[cursor2], array, start1, length1, length1 - 1, compare);\n                if (count1 !== 0) {\n                    dest -= count1;\n                    cursor1 -= count1;\n                    length1 -= count1;\n                    customDest = dest + 1;\n                    customCursor = cursor1 + 1;\n                    for (i = count1 - 1; i >= 0; i--) {\n                        array[customDest + i] = array[customCursor + i];\n                    }\n                    if (length1 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                array[dest--] = tmp[cursor2--];\n                if (--length2 === 1) {\n                    exit = true;\n                    break;\n                }\n                count2 = length2 - gallopLeft(array[cursor1], tmp, 0, length2, length2 - 1, compare);\n                if (count2 !== 0) {\n                    dest -= count2;\n                    cursor2 -= count2;\n                    length2 -= count2;\n                    customDest = dest + 1;\n                    customCursor = cursor2 + 1;\n                    for (i = 0; i < count2; i++) {\n                        array[customDest + i] = tmp[customCursor + i];\n                    }\n                    if (length2 <= 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n                array[dest--] = array[cursor1--];\n                if (--length1 === 0) {\n                    exit = true;\n                    break;\n                }\n                _minGallop--;\n            } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\n            if (exit) {\n                break;\n            }\n            if (_minGallop < 0) {\n                _minGallop = 0;\n            }\n            _minGallop += 2;\n        }\n        minGallop = _minGallop;\n        if (minGallop < 1) {\n            minGallop = 1;\n        }\n        if (length2 === 1) {\n            dest -= length1;\n            cursor1 -= length1;\n            customDest = dest + 1;\n            customCursor = cursor1 + 1;\n            for (i = length1 - 1; i >= 0; i--) {\n                array[customDest + i] = array[customCursor + i];\n            }\n            array[dest] = tmp[cursor2];\n        }\n        else if (length2 === 0) {\n            throw new Error();\n        }\n        else {\n            customCursor = dest - (length2 - 1);\n            for (i = 0; i < length2; i++) {\n                array[customCursor + i] = tmp[i];\n            }\n        }\n    }\n    return {\n        mergeRuns: mergeRuns,\n        forceMergeRuns: forceMergeRuns,\n        pushRun: pushRun\n    };\n}\nexport default function sort(array, compare, lo, hi) {\n    if (!lo) {\n        lo = 0;\n    }\n    if (!hi) {\n        hi = array.length;\n    }\n    var remaining = hi - lo;\n    if (remaining < 2) {\n        return;\n    }\n    var runLength = 0;\n    if (remaining < DEFAULT_MIN_MERGE) {\n        runLength = makeAscendingRun(array, lo, hi, compare);\n        binaryInsertionSort(array, lo, hi, lo + runLength, compare);\n        return;\n    }\n    var ts = TimSort(array, compare);\n    var minRun = minRunLength(remaining);\n    do {\n        runLength = makeAscendingRun(array, lo, hi, compare);\n        if (runLength < minRun) {\n            var force = remaining;\n            if (force > minRun) {\n                force = minRun;\n            }\n            binaryInsertionSort(array, lo, lo + force, lo + runLength, compare);\n            runLength = force;\n        }\n        ts.pushRun(lo, runLength);\n        ts.mergeRuns();\n        remaining -= runLength;\n        lo += runLength;\n    } while (remaining !== 0);\n    ts.forceMergeRuns();\n}\n","export var REDRAW_BIT = 1;\nexport var STYLE_CHANGED_BIT = 2;\nexport var SHAPE_CHANGED_BIT = 4;\n","import * as util from './core/util.js';\nimport timsort from './core/timsort.js';\nimport { REDRAW_BIT } from './graphic/constants.js';\nvar invalidZErrorLogged = false;\nfunction logInvalidZError() {\n    if (invalidZErrorLogged) {\n        return;\n    }\n    invalidZErrorLogged = true;\n    console.warn('z / z2 / zlevel of displayable is invalid, which may cause unexpected errors');\n}\nfunction shapeCompareFunc(a, b) {\n    if (a.zlevel === b.zlevel) {\n        if (a.z === b.z) {\n            return a.z2 - b.z2;\n        }\n        return a.z - b.z;\n    }\n    return a.zlevel - b.zlevel;\n}\nvar Storage = (function () {\n    function Storage() {\n        this._roots = [];\n        this._displayList = [];\n        this._displayListLen = 0;\n        this.displayableSortFunc = shapeCompareFunc;\n    }\n    Storage.prototype.traverse = function (cb, context) {\n        for (var i = 0; i < this._roots.length; i++) {\n            this._roots[i].traverse(cb, context);\n        }\n    };\n    Storage.prototype.getDisplayList = function (update, includeIgnore) {\n        includeIgnore = includeIgnore || false;\n        var displayList = this._displayList;\n        if (update || !displayList.length) {\n            this.updateDisplayList(includeIgnore);\n        }\n        return displayList;\n    };\n    Storage.prototype.updateDisplayList = function (includeIgnore) {\n        this._displayListLen = 0;\n        var roots = this._roots;\n        var displayList = this._displayList;\n        for (var i = 0, len = roots.length; i < len; i++) {\n            this._updateAndAddDisplayable(roots[i], null, includeIgnore);\n        }\n        displayList.length = this._displayListLen;\n        timsort(displayList, shapeCompareFunc);\n    };\n    Storage.prototype._updateAndAddDisplayable = function (el, parentClipPaths, includeIgnore) {\n        if (el.ignore && !includeIgnore) {\n            return;\n        }\n        el.beforeUpdate();\n        el.update();\n        el.afterUpdate();\n        var userSetClipPath = el.getClipPath();\n        var parentHasClipPaths = parentClipPaths && parentClipPaths.length;\n        var clipPathIdx = 0;\n        var thisClipPaths = el.__clipPaths;\n        if (!el.ignoreClip\n            && (parentHasClipPaths || userSetClipPath)) {\n            if (!thisClipPaths) {\n                thisClipPaths = el.__clipPaths = [];\n            }\n            if (parentHasClipPaths) {\n                for (var idx = 0; idx < parentClipPaths.length; idx++) {\n                    thisClipPaths[clipPathIdx++] = parentClipPaths[idx];\n                }\n            }\n            var currentClipPath = userSetClipPath;\n            var parentClipPath = el;\n            while (currentClipPath) {\n                currentClipPath.parent = parentClipPath;\n                currentClipPath.updateTransform();\n                thisClipPaths[clipPathIdx++] = currentClipPath;\n                parentClipPath = currentClipPath;\n                currentClipPath = currentClipPath.getClipPath();\n            }\n        }\n        if (thisClipPaths) {\n            thisClipPaths.length = clipPathIdx;\n        }\n        if (el.childrenRef) {\n            var children = el.childrenRef();\n            for (var i = 0; i < children.length; i++) {\n                var child = children[i];\n                if (el.__dirty) {\n                    child.__dirty |= REDRAW_BIT;\n                }\n                this._updateAndAddDisplayable(child, thisClipPaths, includeIgnore);\n            }\n            el.__dirty = 0;\n        }\n        else {\n            var disp = el;\n            if (isNaN(disp.z)) {\n                logInvalidZError();\n                disp.z = 0;\n            }\n            if (isNaN(disp.z2)) {\n                logInvalidZError();\n                disp.z2 = 0;\n            }\n            if (isNaN(disp.zlevel)) {\n                logInvalidZError();\n                disp.zlevel = 0;\n            }\n            this._displayList[this._displayListLen++] = disp;\n        }\n        var decalEl = el.getDecalElement && el.getDecalElement();\n        if (decalEl) {\n            this._updateAndAddDisplayable(decalEl, thisClipPaths, includeIgnore);\n        }\n        var textGuide = el.getTextGuideLine();\n        if (textGuide) {\n            this._updateAndAddDisplayable(textGuide, thisClipPaths, includeIgnore);\n        }\n        var textEl = el.getTextContent();\n        if (textEl) {\n            this._updateAndAddDisplayable(textEl, thisClipPaths, includeIgnore);\n        }\n    };\n    Storage.prototype.addRoot = function (el) {\n        if (el.__zr && el.__zr.storage === this) {\n            return;\n        }\n        this._roots.push(el);\n    };\n    Storage.prototype.delRoot = function (el) {\n        if (el instanceof Array) {\n            for (var i = 0, l = el.length; i < l; i++) {\n                this.delRoot(el[i]);\n            }\n            return;\n        }\n        var idx = util.indexOf(this._roots, el);\n        if (idx >= 0) {\n            this._roots.splice(idx, 1);\n        }\n    };\n    Storage.prototype.delAllRoots = function () {\n        this._roots = [];\n        this._displayList = [];\n        this._displayListLen = 0;\n        return;\n    };\n    Storage.prototype.getRoots = function () {\n        return this._roots;\n    };\n    Storage.prototype.dispose = function () {\n        this._displayList = null;\n        this._roots = null;\n    };\n    return Storage;\n}());\nexport default Storage;\n","import env from '../core/env.js';\nvar requestAnimationFrame;\nrequestAnimationFrame = (env.hasGlobalWindow\n    && ((window.requestAnimationFrame && window.requestAnimationFrame.bind(window))\n        || (window.msRequestAnimationFrame && window.msRequestAnimationFrame.bind(window))\n        || window.mozRequestAnimationFrame\n        || window.webkitRequestAnimationFrame)) || function (func) {\n    return setTimeout(func, 16);\n};\nexport default requestAnimationFrame;\n","var easingFuncs = {\n    linear: function (k) {\n        return k;\n    },\n    quadraticIn: function (k) {\n        return k * k;\n    },\n    quadraticOut: function (k) {\n        return k * (2 - k);\n    },\n    quadraticInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k;\n        }\n        return -0.5 * (--k * (k - 2) - 1);\n    },\n    cubicIn: function (k) {\n        return k * k * k;\n    },\n    cubicOut: function (k) {\n        return --k * k * k + 1;\n    },\n    cubicInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k;\n        }\n        return 0.5 * ((k -= 2) * k * k + 2);\n    },\n    quarticIn: function (k) {\n        return k * k * k * k;\n    },\n    quarticOut: function (k) {\n        return 1 - (--k * k * k * k);\n    },\n    quarticInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k * k;\n        }\n        return -0.5 * ((k -= 2) * k * k * k - 2);\n    },\n    quinticIn: function (k) {\n        return k * k * k * k * k;\n    },\n    quinticOut: function (k) {\n        return --k * k * k * k * k + 1;\n    },\n    quinticInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k * k * k;\n        }\n        return 0.5 * ((k -= 2) * k * k * k * k + 2);\n    },\n    sinusoidalIn: function (k) {\n        return 1 - Math.cos(k * Math.PI / 2);\n    },\n    sinusoidalOut: function (k) {\n        return Math.sin(k * Math.PI / 2);\n    },\n    sinusoidalInOut: function (k) {\n        return 0.5 * (1 - Math.cos(Math.PI * k));\n    },\n    exponentialIn: function (k) {\n        return k === 0 ? 0 : Math.pow(1024, k - 1);\n    },\n    exponentialOut: function (k) {\n        return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n    },\n    exponentialInOut: function (k) {\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if ((k *= 2) < 1) {\n            return 0.5 * Math.pow(1024, k - 1);\n        }\n        return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n    },\n    circularIn: function (k) {\n        return 1 - Math.sqrt(1 - k * k);\n    },\n    circularOut: function (k) {\n        return Math.sqrt(1 - (--k * k));\n    },\n    circularInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return -0.5 * (Math.sqrt(1 - k * k) - 1);\n        }\n        return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n    },\n    elasticIn: function (k) {\n        var s;\n        var a = 0.1;\n        var p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        return -(a * Math.pow(2, 10 * (k -= 1))\n            * Math.sin((k - s) * (2 * Math.PI) / p));\n    },\n    elasticOut: function (k) {\n        var s;\n        var a = 0.1;\n        var p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        return (a * Math.pow(2, -10 * k)\n            * Math.sin((k - s) * (2 * Math.PI) / p) + 1);\n    },\n    elasticInOut: function (k) {\n        var s;\n        var a = 0.1;\n        var p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        if ((k *= 2) < 1) {\n            return -0.5 * (a * Math.pow(2, 10 * (k -= 1))\n                * Math.sin((k - s) * (2 * Math.PI) / p));\n        }\n        return a * Math.pow(2, -10 * (k -= 1))\n            * Math.sin((k - s) * (2 * Math.PI) / p) * 0.5 + 1;\n    },\n    backIn: function (k) {\n        var s = 1.70158;\n        return k * k * ((s + 1) * k - s);\n    },\n    backOut: function (k) {\n        var s = 1.70158;\n        return --k * k * ((s + 1) * k + s) + 1;\n    },\n    backInOut: function (k) {\n        var s = 1.70158 * 1.525;\n        if ((k *= 2) < 1) {\n            return 0.5 * (k * k * ((s + 1) * k - s));\n        }\n        return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n    },\n    bounceIn: function (k) {\n        return 1 - easingFuncs.bounceOut(1 - k);\n    },\n    bounceOut: function (k) {\n        if (k < (1 / 2.75)) {\n            return 7.5625 * k * k;\n        }\n        else if (k < (2 / 2.75)) {\n            return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\n        }\n        else if (k < (2.5 / 2.75)) {\n            return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\n        }\n        else {\n            return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\n        }\n    },\n    bounceInOut: function (k) {\n        if (k < 0.5) {\n            return easingFuncs.bounceIn(k * 2) * 0.5;\n        }\n        return easingFuncs.bounceOut(k * 2 - 1) * 0.5 + 0.5;\n    }\n};\nexport default easingFuncs;\n","import { create as v2Create, distSquare as v2DistSquare } from './vector.js';\nvar mathPow = Math.pow;\nvar mathSqrt = Math.sqrt;\nvar EPSILON = 1e-8;\nvar EPSILON_NUMERIC = 1e-4;\nvar THREE_SQRT = mathSqrt(3);\nvar ONE_THIRD = 1 / 3;\nvar _v0 = v2Create();\nvar _v1 = v2Create();\nvar _v2 = v2Create();\nfunction isAroundZero(val) {\n    return val > -EPSILON && val < EPSILON;\n}\nfunction isNotAroundZero(val) {\n    return val > EPSILON || val < -EPSILON;\n}\nexport function cubicAt(p0, p1, p2, p3, t) {\n    var onet = 1 - t;\n    return onet * onet * (onet * p0 + 3 * t * p1)\n        + t * t * (t * p3 + 3 * onet * p2);\n}\nexport function cubicDerivativeAt(p0, p1, p2, p3, t) {\n    var onet = 1 - t;\n    return 3 * (((p1 - p0) * onet + 2 * (p2 - p1) * t) * onet\n        + (p3 - p2) * t * t);\n}\nexport function cubicRootAt(p0, p1, p2, p3, val, roots) {\n    var a = p3 + 3 * (p1 - p2) - p0;\n    var b = 3 * (p2 - p1 * 2 + p0);\n    var c = 3 * (p1 - p0);\n    var d = p0 - val;\n    var A = b * b - 3 * a * c;\n    var B = b * c - 9 * a * d;\n    var C = c * c - 3 * b * d;\n    var n = 0;\n    if (isAroundZero(A) && isAroundZero(B)) {\n        if (isAroundZero(b)) {\n            roots[0] = 0;\n        }\n        else {\n            var t1 = -c / b;\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n        }\n    }\n    else {\n        var disc = B * B - 4 * A * C;\n        if (isAroundZero(disc)) {\n            var K = B / A;\n            var t1 = -b / a + K;\n            var t2 = -K / 2;\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                roots[n++] = t2;\n            }\n        }\n        else if (disc > 0) {\n            var discSqrt = mathSqrt(disc);\n            var Y1 = A * b + 1.5 * a * (-B + discSqrt);\n            var Y2 = A * b + 1.5 * a * (-B - discSqrt);\n            if (Y1 < 0) {\n                Y1 = -mathPow(-Y1, ONE_THIRD);\n            }\n            else {\n                Y1 = mathPow(Y1, ONE_THIRD);\n            }\n            if (Y2 < 0) {\n                Y2 = -mathPow(-Y2, ONE_THIRD);\n            }\n            else {\n                Y2 = mathPow(Y2, ONE_THIRD);\n            }\n            var t1 = (-b - (Y1 + Y2)) / (3 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n        }\n        else {\n            var T = (2 * A * b - 3 * a * B) / (2 * mathSqrt(A * A * A));\n            var theta = Math.acos(T) / 3;\n            var ASqrt = mathSqrt(A);\n            var tmp = Math.cos(theta);\n            var t1 = (-b - 2 * ASqrt * tmp) / (3 * a);\n            var t2 = (-b + ASqrt * (tmp + THREE_SQRT * Math.sin(theta))) / (3 * a);\n            var t3 = (-b + ASqrt * (tmp - THREE_SQRT * Math.sin(theta))) / (3 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                roots[n++] = t2;\n            }\n            if (t3 >= 0 && t3 <= 1) {\n                roots[n++] = t3;\n            }\n        }\n    }\n    return n;\n}\nexport function cubicExtrema(p0, p1, p2, p3, extrema) {\n    var b = 6 * p2 - 12 * p1 + 6 * p0;\n    var a = 9 * p1 + 3 * p3 - 3 * p0 - 9 * p2;\n    var c = 3 * p1 - 3 * p0;\n    var n = 0;\n    if (isAroundZero(a)) {\n        if (isNotAroundZero(b)) {\n            var t1 = -c / b;\n            if (t1 >= 0 && t1 <= 1) {\n                extrema[n++] = t1;\n            }\n        }\n    }\n    else {\n        var disc = b * b - 4 * a * c;\n        if (isAroundZero(disc)) {\n            extrema[0] = -b / (2 * a);\n        }\n        else if (disc > 0) {\n            var discSqrt = mathSqrt(disc);\n            var t1 = (-b + discSqrt) / (2 * a);\n            var t2 = (-b - discSqrt) / (2 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                extrema[n++] = t1;\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                extrema[n++] = t2;\n            }\n        }\n    }\n    return n;\n}\nexport function cubicSubdivide(p0, p1, p2, p3, t, out) {\n    var p01 = (p1 - p0) * t + p0;\n    var p12 = (p2 - p1) * t + p1;\n    var p23 = (p3 - p2) * t + p2;\n    var p012 = (p12 - p01) * t + p01;\n    var p123 = (p23 - p12) * t + p12;\n    var p0123 = (p123 - p012) * t + p012;\n    out[0] = p0;\n    out[1] = p01;\n    out[2] = p012;\n    out[3] = p0123;\n    out[4] = p0123;\n    out[5] = p123;\n    out[6] = p23;\n    out[7] = p3;\n}\nexport function cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, out) {\n    var t;\n    var interval = 0.005;\n    var d = Infinity;\n    var prev;\n    var next;\n    var d1;\n    var d2;\n    _v0[0] = x;\n    _v0[1] = y;\n    for (var _t = 0; _t < 1; _t += 0.05) {\n        _v1[0] = cubicAt(x0, x1, x2, x3, _t);\n        _v1[1] = cubicAt(y0, y1, y2, y3, _t);\n        d1 = v2DistSquare(_v0, _v1);\n        if (d1 < d) {\n            t = _t;\n            d = d1;\n        }\n    }\n    d = Infinity;\n    for (var i = 0; i < 32; i++) {\n        if (interval < EPSILON_NUMERIC) {\n            break;\n        }\n        prev = t - interval;\n        next = t + interval;\n        _v1[0] = cubicAt(x0, x1, x2, x3, prev);\n        _v1[1] = cubicAt(y0, y1, y2, y3, prev);\n        d1 = v2DistSquare(_v1, _v0);\n        if (prev >= 0 && d1 < d) {\n            t = prev;\n            d = d1;\n        }\n        else {\n            _v2[0] = cubicAt(x0, x1, x2, x3, next);\n            _v2[1] = cubicAt(y0, y1, y2, y3, next);\n            d2 = v2DistSquare(_v2, _v0);\n            if (next <= 1 && d2 < d) {\n                t = next;\n                d = d2;\n            }\n            else {\n                interval *= 0.5;\n            }\n        }\n    }\n    if (out) {\n        out[0] = cubicAt(x0, x1, x2, x3, t);\n        out[1] = cubicAt(y0, y1, y2, y3, t);\n    }\n    return mathSqrt(d);\n}\nexport function cubicLength(x0, y0, x1, y1, x2, y2, x3, y3, iteration) {\n    var px = x0;\n    var py = y0;\n    var d = 0;\n    var step = 1 / iteration;\n    for (var i = 1; i <= iteration; i++) {\n        var t = i * step;\n        var x = cubicAt(x0, x1, x2, x3, t);\n        var y = cubicAt(y0, y1, y2, y3, t);\n        var dx = x - px;\n        var dy = y - py;\n        d += Math.sqrt(dx * dx + dy * dy);\n        px = x;\n        py = y;\n    }\n    return d;\n}\nexport function quadraticAt(p0, p1, p2, t) {\n    var onet = 1 - t;\n    return onet * (onet * p0 + 2 * t * p1) + t * t * p2;\n}\nexport function quadraticDerivativeAt(p0, p1, p2, t) {\n    return 2 * ((1 - t) * (p1 - p0) + t * (p2 - p1));\n}\nexport function quadraticRootAt(p0, p1, p2, val, roots) {\n    var a = p0 - 2 * p1 + p2;\n    var b = 2 * (p1 - p0);\n    var c = p0 - val;\n    var n = 0;\n    if (isAroundZero(a)) {\n        if (isNotAroundZero(b)) {\n            var t1 = -c / b;\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n        }\n    }\n    else {\n        var disc = b * b - 4 * a * c;\n        if (isAroundZero(disc)) {\n            var t1 = -b / (2 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n        }\n        else if (disc > 0) {\n            var discSqrt = mathSqrt(disc);\n            var t1 = (-b + discSqrt) / (2 * a);\n            var t2 = (-b - discSqrt) / (2 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                roots[n++] = t2;\n            }\n        }\n    }\n    return n;\n}\nexport function quadraticExtremum(p0, p1, p2) {\n    var divider = p0 + p2 - 2 * p1;\n    if (divider === 0) {\n        return 0.5;\n    }\n    else {\n        return (p0 - p1) / divider;\n    }\n}\nexport function quadraticSubdivide(p0, p1, p2, t, out) {\n    var p01 = (p1 - p0) * t + p0;\n    var p12 = (p2 - p1) * t + p1;\n    var p012 = (p12 - p01) * t + p01;\n    out[0] = p0;\n    out[1] = p01;\n    out[2] = p012;\n    out[3] = p012;\n    out[4] = p12;\n    out[5] = p2;\n}\nexport function quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, out) {\n    var t;\n    var interval = 0.005;\n    var d = Infinity;\n    _v0[0] = x;\n    _v0[1] = y;\n    for (var _t = 0; _t < 1; _t += 0.05) {\n        _v1[0] = quadraticAt(x0, x1, x2, _t);\n        _v1[1] = quadraticAt(y0, y1, y2, _t);\n        var d1 = v2DistSquare(_v0, _v1);\n        if (d1 < d) {\n            t = _t;\n            d = d1;\n        }\n    }\n    d = Infinity;\n    for (var i = 0; i < 32; i++) {\n        if (interval < EPSILON_NUMERIC) {\n            break;\n        }\n        var prev = t - interval;\n        var next = t + interval;\n        _v1[0] = quadraticAt(x0, x1, x2, prev);\n        _v1[1] = quadraticAt(y0, y1, y2, prev);\n        var d1 = v2DistSquare(_v1, _v0);\n        if (prev >= 0 && d1 < d) {\n            t = prev;\n            d = d1;\n        }\n        else {\n            _v2[0] = quadraticAt(x0, x1, x2, next);\n            _v2[1] = quadraticAt(y0, y1, y2, next);\n            var d2 = v2DistSquare(_v2, _v0);\n            if (next <= 1 && d2 < d) {\n                t = next;\n                d = d2;\n            }\n            else {\n                interval *= 0.5;\n            }\n        }\n    }\n    if (out) {\n        out[0] = quadraticAt(x0, x1, x2, t);\n        out[1] = quadraticAt(y0, y1, y2, t);\n    }\n    return mathSqrt(d);\n}\nexport function quadraticLength(x0, y0, x1, y1, x2, y2, iteration) {\n    var px = x0;\n    var py = y0;\n    var d = 0;\n    var step = 1 / iteration;\n    for (var i = 1; i <= iteration; i++) {\n        var t = i * step;\n        var x = quadraticAt(x0, x1, x2, t);\n        var y = quadraticAt(y0, y1, y2, t);\n        var dx = x - px;\n        var dy = y - py;\n        d += Math.sqrt(dx * dx + dy * dy);\n        px = x;\n        py = y;\n    }\n    return d;\n}\n","import { cubicAt, cubicRootAt } from '../core/curve.js';\nimport { trim } from '../core/util.js';\nvar regexp = /cubic-bezier\\(([0-9,\\.e ]+)\\)/;\nexport function createCubicEasingFunc(cubicEasingStr) {\n    var cubic = cubicEasingStr && regexp.exec(cubicEasingStr);\n    if (cubic) {\n        var points = cubic[1].split(',');\n        var a_1 = +trim(points[0]);\n        var b_1 = +trim(points[1]);\n        var c_1 = +trim(points[2]);\n        var d_1 = +trim(points[3]);\n        if (isNaN(a_1 + b_1 + c_1 + d_1)) {\n            return;\n        }\n        var roots_1 = [];\n        return function (p) {\n            return p <= 0\n                ? 0 : p >= 1\n                ? 1\n                : cubicRootAt(0, a_1, c_1, 1, p, roots_1) && cubicAt(0, b_1, d_1, 1, roots_1[0]);\n        };\n    }\n}\n","import easingFuncs from './easing.js';\nimport { isFunction, noop } from '../core/util.js';\nimport { createCubicEasingFunc } from './cubicEasing.js';\nvar Clip = (function () {\n    function Clip(opts) {\n        this._inited = false;\n        this._startTime = 0;\n        this._pausedTime = 0;\n        this._paused = false;\n        this._life = opts.life || 1000;\n        this._delay = opts.delay || 0;\n        this.loop = opts.loop || false;\n        this.onframe = opts.onframe || noop;\n        this.ondestroy = opts.ondestroy || noop;\n        this.onrestart = opts.onrestart || noop;\n        opts.easing && this.setEasing(opts.easing);\n    }\n    Clip.prototype.step = function (globalTime, deltaTime) {\n        if (!this._inited) {\n            this._startTime = globalTime + this._delay;\n            this._inited = true;\n        }\n        if (this._paused) {\n            this._pausedTime += deltaTime;\n            return;\n        }\n        var life = this._life;\n        var elapsedTime = globalTime - this._startTime - this._pausedTime;\n        var percent = elapsedTime / life;\n        if (percent < 0) {\n            percent = 0;\n        }\n        percent = Math.min(percent, 1);\n        var easingFunc = this.easingFunc;\n        var schedule = easingFunc ? easingFunc(percent) : percent;\n        this.onframe(schedule);\n        if (percent === 1) {\n            if (this.loop) {\n                var remainder = elapsedTime % life;\n                this._startTime = globalTime - remainder;\n                this._pausedTime = 0;\n                this.onrestart();\n            }\n            else {\n                return true;\n            }\n        }\n        return false;\n    };\n    Clip.prototype.pause = function () {\n        this._paused = true;\n    };\n    Clip.prototype.resume = function () {\n        this._paused = false;\n    };\n    Clip.prototype.setEasing = function (easing) {\n        this.easing = easing;\n        this.easingFunc = isFunction(easing)\n            ? easing\n            : easingFuncs[easing] || createCubicEasingFunc(easing);\n    };\n    return Clip;\n}());\nexport default Clip;\n","var Entry = (function () {\n    function Entry(val) {\n        this.value = val;\n    }\n    return Entry;\n}());\nexport { Entry };\nvar LinkedList = (function () {\n    function LinkedList() {\n        this._len = 0;\n    }\n    LinkedList.prototype.insert = function (val) {\n        var entry = new Entry(val);\n        this.insertEntry(entry);\n        return entry;\n    };\n    LinkedList.prototype.insertEntry = function (entry) {\n        if (!this.head) {\n            this.head = this.tail = entry;\n        }\n        else {\n            this.tail.next = entry;\n            entry.prev = this.tail;\n            entry.next = null;\n            this.tail = entry;\n        }\n        this._len++;\n    };\n    LinkedList.prototype.remove = function (entry) {\n        var prev = entry.prev;\n        var next = entry.next;\n        if (prev) {\n            prev.next = next;\n        }\n        else {\n            this.head = next;\n        }\n        if (next) {\n            next.prev = prev;\n        }\n        else {\n            this.tail = prev;\n        }\n        entry.next = entry.prev = null;\n        this._len--;\n    };\n    LinkedList.prototype.len = function () {\n        return this._len;\n    };\n    LinkedList.prototype.clear = function () {\n        this.head = this.tail = null;\n        this._len = 0;\n    };\n    return LinkedList;\n}());\nexport { LinkedList };\nvar LRU = (function () {\n    function LRU(maxSize) {\n        this._list = new LinkedList();\n        this._maxSize = 10;\n        this._map = {};\n        this._maxSize = maxSize;\n    }\n    LRU.prototype.put = function (key, value) {\n        var list = this._list;\n        var map = this._map;\n        var removed = null;\n        if (map[key] == null) {\n            var len = list.len();\n            var entry = this._lastRemovedEntry;\n            if (len >= this._maxSize && len > 0) {\n                var leastUsedEntry = list.head;\n                list.remove(leastUsedEntry);\n                delete map[leastUsedEntry.key];\n                removed = leastUsedEntry.value;\n                this._lastRemovedEntry = leastUsedEntry;\n            }\n            if (entry) {\n                entry.value = value;\n            }\n            else {\n                entry = new Entry(value);\n            }\n            entry.key = key;\n            list.insertEntry(entry);\n            map[key] = entry;\n        }\n        return removed;\n    };\n    LRU.prototype.get = function (key) {\n        var entry = this._map[key];\n        var list = this._list;\n        if (entry != null) {\n            if (entry !== list.tail) {\n                list.remove(entry);\n                list.insertEntry(entry);\n            }\n            return entry.value;\n        }\n    };\n    LRU.prototype.clear = function () {\n        this._list.clear();\n        this._map = {};\n    };\n    LRU.prototype.len = function () {\n        return this._list.len();\n    };\n    return LRU;\n}());\nexport default LRU;\n","import LRU from '../core/LRU.js';\nimport { extend, isFunction, isGradientObject, isString, map } from '../core/util.js';\nvar kCSSColorTable = {\n    'transparent': [0, 0, 0, 0], 'aliceblue': [240, 248, 255, 1],\n    'antiquewhite': [250, 235, 215, 1], 'aqua': [0, 255, 255, 1],\n    'aquamarine': [127, 255, 212, 1], 'azure': [240, 255, 255, 1],\n    'beige': [245, 245, 220, 1], 'bisque': [255, 228, 196, 1],\n    'black': [0, 0, 0, 1], 'blanchedalmond': [255, 235, 205, 1],\n    'blue': [0, 0, 255, 1], 'blueviolet': [138, 43, 226, 1],\n    'brown': [165, 42, 42, 1], 'burlywood': [222, 184, 135, 1],\n    'cadetblue': [95, 158, 160, 1], 'chartreuse': [127, 255, 0, 1],\n    'chocolate': [210, 105, 30, 1], 'coral': [255, 127, 80, 1],\n    'cornflowerblue': [100, 149, 237, 1], 'cornsilk': [255, 248, 220, 1],\n    'crimson': [220, 20, 60, 1], 'cyan': [0, 255, 255, 1],\n    'darkblue': [0, 0, 139, 1], 'darkcyan': [0, 139, 139, 1],\n    'darkgoldenrod': [184, 134, 11, 1], 'darkgray': [169, 169, 169, 1],\n    'darkgreen': [0, 100, 0, 1], 'darkgrey': [169, 169, 169, 1],\n    'darkkhaki': [189, 183, 107, 1], 'darkmagenta': [139, 0, 139, 1],\n    'darkolivegreen': [85, 107, 47, 1], 'darkorange': [255, 140, 0, 1],\n    'darkorchid': [153, 50, 204, 1], 'darkred': [139, 0, 0, 1],\n    'darksalmon': [233, 150, 122, 1], 'darkseagreen': [143, 188, 143, 1],\n    'darkslateblue': [72, 61, 139, 1], 'darkslategray': [47, 79, 79, 1],\n    'darkslategrey': [47, 79, 79, 1], 'darkturquoise': [0, 206, 209, 1],\n    'darkviolet': [148, 0, 211, 1], 'deeppink': [255, 20, 147, 1],\n    'deepskyblue': [0, 191, 255, 1], 'dimgray': [105, 105, 105, 1],\n    'dimgrey': [105, 105, 105, 1], 'dodgerblue': [30, 144, 255, 1],\n    'firebrick': [178, 34, 34, 1], 'floralwhite': [255, 250, 240, 1],\n    'forestgreen': [34, 139, 34, 1], 'fuchsia': [255, 0, 255, 1],\n    'gainsboro': [220, 220, 220, 1], 'ghostwhite': [248, 248, 255, 1],\n    'gold': [255, 215, 0, 1], 'goldenrod': [218, 165, 32, 1],\n    'gray': [128, 128, 128, 1], 'green': [0, 128, 0, 1],\n    'greenyellow': [173, 255, 47, 1], 'grey': [128, 128, 128, 1],\n    'honeydew': [240, 255, 240, 1], 'hotpink': [255, 105, 180, 1],\n    'indianred': [205, 92, 92, 1], 'indigo': [75, 0, 130, 1],\n    'ivory': [255, 255, 240, 1], 'khaki': [240, 230, 140, 1],\n    'lavender': [230, 230, 250, 1], 'lavenderblush': [255, 240, 245, 1],\n    'lawngreen': [124, 252, 0, 1], 'lemonchiffon': [255, 250, 205, 1],\n    'lightblue': [173, 216, 230, 1], 'lightcoral': [240, 128, 128, 1],\n    'lightcyan': [224, 255, 255, 1], 'lightgoldenrodyellow': [250, 250, 210, 1],\n    'lightgray': [211, 211, 211, 1], 'lightgreen': [144, 238, 144, 1],\n    'lightgrey': [211, 211, 211, 1], 'lightpink': [255, 182, 193, 1],\n    'lightsalmon': [255, 160, 122, 1], 'lightseagreen': [32, 178, 170, 1],\n    'lightskyblue': [135, 206, 250, 1], 'lightslategray': [119, 136, 153, 1],\n    'lightslategrey': [119, 136, 153, 1], 'lightsteelblue': [176, 196, 222, 1],\n    'lightyellow': [255, 255, 224, 1], 'lime': [0, 255, 0, 1],\n    'limegreen': [50, 205, 50, 1], 'linen': [250, 240, 230, 1],\n    'magenta': [255, 0, 255, 1], 'maroon': [128, 0, 0, 1],\n    'mediumaquamarine': [102, 205, 170, 1], 'mediumblue': [0, 0, 205, 1],\n    'mediumorchid': [186, 85, 211, 1], 'mediumpurple': [147, 112, 219, 1],\n    'mediumseagreen': [60, 179, 113, 1], 'mediumslateblue': [123, 104, 238, 1],\n    'mediumspringgreen': [0, 250, 154, 1], 'mediumturquoise': [72, 209, 204, 1],\n    'mediumvioletred': [199, 21, 133, 1], 'midnightblue': [25, 25, 112, 1],\n    'mintcream': [245, 255, 250, 1], 'mistyrose': [255, 228, 225, 1],\n    'moccasin': [255, 228, 181, 1], 'navajowhite': [255, 222, 173, 1],\n    'navy': [0, 0, 128, 1], 'oldlace': [253, 245, 230, 1],\n    'olive': [128, 128, 0, 1], 'olivedrab': [107, 142, 35, 1],\n    'orange': [255, 165, 0, 1], 'orangered': [255, 69, 0, 1],\n    'orchid': [218, 112, 214, 1], 'palegoldenrod': [238, 232, 170, 1],\n    'palegreen': [152, 251, 152, 1], 'paleturquoise': [175, 238, 238, 1],\n    'palevioletred': [219, 112, 147, 1], 'papayawhip': [255, 239, 213, 1],\n    'peachpuff': [255, 218, 185, 1], 'peru': [205, 133, 63, 1],\n    'pink': [255, 192, 203, 1], 'plum': [221, 160, 221, 1],\n    'powderblue': [176, 224, 230, 1], 'purple': [128, 0, 128, 1],\n    'red': [255, 0, 0, 1], 'rosybrown': [188, 143, 143, 1],\n    'royalblue': [65, 105, 225, 1], 'saddlebrown': [139, 69, 19, 1],\n    'salmon': [250, 128, 114, 1], 'sandybrown': [244, 164, 96, 1],\n    'seagreen': [46, 139, 87, 1], 'seashell': [255, 245, 238, 1],\n    'sienna': [160, 82, 45, 1], 'silver': [192, 192, 192, 1],\n    'skyblue': [135, 206, 235, 1], 'slateblue': [106, 90, 205, 1],\n    'slategray': [112, 128, 144, 1], 'slategrey': [112, 128, 144, 1],\n    'snow': [255, 250, 250, 1], 'springgreen': [0, 255, 127, 1],\n    'steelblue': [70, 130, 180, 1], 'tan': [210, 180, 140, 1],\n    'teal': [0, 128, 128, 1], 'thistle': [216, 191, 216, 1],\n    'tomato': [255, 99, 71, 1], 'turquoise': [64, 224, 208, 1],\n    'violet': [238, 130, 238, 1], 'wheat': [245, 222, 179, 1],\n    'white': [255, 255, 255, 1], 'whitesmoke': [245, 245, 245, 1],\n    'yellow': [255, 255, 0, 1], 'yellowgreen': [154, 205, 50, 1]\n};\nfunction clampCssByte(i) {\n    i = Math.round(i);\n    return i < 0 ? 0 : i > 255 ? 255 : i;\n}\nfunction clampCssAngle(i) {\n    i = Math.round(i);\n    return i < 0 ? 0 : i > 360 ? 360 : i;\n}\nfunction clampCssFloat(f) {\n    return f < 0 ? 0 : f > 1 ? 1 : f;\n}\nexport function parseCssInt(val) {\n    var str = val;\n    if (str.length && str.charAt(str.length - 1) === '%') {\n        return clampCssByte(parseFloat(str) / 100 * 255);\n    }\n    return clampCssByte(parseInt(str, 10));\n}\nexport function parseCssFloat(val) {\n    var str = val;\n    if (str.length && str.charAt(str.length - 1) === '%') {\n        return clampCssFloat(parseFloat(str) / 100);\n    }\n    return clampCssFloat(parseFloat(str));\n}\nfunction cssHueToRgb(m1, m2, h) {\n    if (h < 0) {\n        h += 1;\n    }\n    else if (h > 1) {\n        h -= 1;\n    }\n    if (h * 6 < 1) {\n        return m1 + (m2 - m1) * h * 6;\n    }\n    if (h * 2 < 1) {\n        return m2;\n    }\n    if (h * 3 < 2) {\n        return m1 + (m2 - m1) * (2 / 3 - h) * 6;\n    }\n    return m1;\n}\nfunction lerpNumber(a, b, p) {\n    return a + (b - a) * p;\n}\nfunction setRgba(out, r, g, b, a) {\n    out[0] = r;\n    out[1] = g;\n    out[2] = b;\n    out[3] = a;\n    return out;\n}\nfunction copyRgba(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n}\nvar colorCache = new LRU(20);\nvar lastRemovedArr = null;\nfunction putToCache(colorStr, rgbaArr) {\n    if (lastRemovedArr) {\n        copyRgba(lastRemovedArr, rgbaArr);\n    }\n    lastRemovedArr = colorCache.put(colorStr, lastRemovedArr || (rgbaArr.slice()));\n}\nexport function parse(colorStr, rgbaArr) {\n    if (!colorStr) {\n        return;\n    }\n    rgbaArr = rgbaArr || [];\n    var cached = colorCache.get(colorStr);\n    if (cached) {\n        return copyRgba(rgbaArr, cached);\n    }\n    colorStr = colorStr + '';\n    var str = colorStr.replace(/ /g, '').toLowerCase();\n    if (str in kCSSColorTable) {\n        copyRgba(rgbaArr, kCSSColorTable[str]);\n        putToCache(colorStr, rgbaArr);\n        return rgbaArr;\n    }\n    var strLen = str.length;\n    if (str.charAt(0) === '#') {\n        if (strLen === 4 || strLen === 5) {\n            var iv = parseInt(str.slice(1, 4), 16);\n            if (!(iv >= 0 && iv <= 0xfff)) {\n                setRgba(rgbaArr, 0, 0, 0, 1);\n                return;\n            }\n            setRgba(rgbaArr, ((iv & 0xf00) >> 4) | ((iv & 0xf00) >> 8), (iv & 0xf0) | ((iv & 0xf0) >> 4), (iv & 0xf) | ((iv & 0xf) << 4), strLen === 5 ? parseInt(str.slice(4), 16) / 0xf : 1);\n            putToCache(colorStr, rgbaArr);\n            return rgbaArr;\n        }\n        else if (strLen === 7 || strLen === 9) {\n            var iv = parseInt(str.slice(1, 7), 16);\n            if (!(iv >= 0 && iv <= 0xffffff)) {\n                setRgba(rgbaArr, 0, 0, 0, 1);\n                return;\n            }\n            setRgba(rgbaArr, (iv & 0xff0000) >> 16, (iv & 0xff00) >> 8, iv & 0xff, strLen === 9 ? parseInt(str.slice(7), 16) / 0xff : 1);\n            putToCache(colorStr, rgbaArr);\n            return rgbaArr;\n        }\n        return;\n    }\n    var op = str.indexOf('(');\n    var ep = str.indexOf(')');\n    if (op !== -1 && ep + 1 === strLen) {\n        var fname = str.substr(0, op);\n        var params = str.substr(op + 1, ep - (op + 1)).split(',');\n        var alpha = 1;\n        switch (fname) {\n            case 'rgba':\n                if (params.length !== 4) {\n                    return params.length === 3\n                        ? setRgba(rgbaArr, +params[0], +params[1], +params[2], 1)\n                        : setRgba(rgbaArr, 0, 0, 0, 1);\n                }\n                alpha = parseCssFloat(params.pop());\n            case 'rgb':\n                if (params.length >= 3) {\n                    setRgba(rgbaArr, parseCssInt(params[0]), parseCssInt(params[1]), parseCssInt(params[2]), params.length === 3 ? alpha : parseCssFloat(params[3]));\n                    putToCache(colorStr, rgbaArr);\n                    return rgbaArr;\n                }\n                else {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n            case 'hsla':\n                if (params.length !== 4) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                params[3] = parseCssFloat(params[3]);\n                hsla2rgba(params, rgbaArr);\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            case 'hsl':\n                if (params.length !== 3) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                hsla2rgba(params, rgbaArr);\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            default:\n                return;\n        }\n    }\n    setRgba(rgbaArr, 0, 0, 0, 1);\n    return;\n}\nfunction hsla2rgba(hsla, rgba) {\n    var h = (((parseFloat(hsla[0]) % 360) + 360) % 360) / 360;\n    var s = parseCssFloat(hsla[1]);\n    var l = parseCssFloat(hsla[2]);\n    var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n    var m1 = l * 2 - m2;\n    rgba = rgba || [];\n    setRgba(rgba, clampCssByte(cssHueToRgb(m1, m2, h + 1 / 3) * 255), clampCssByte(cssHueToRgb(m1, m2, h) * 255), clampCssByte(cssHueToRgb(m1, m2, h - 1 / 3) * 255), 1);\n    if (hsla.length === 4) {\n        rgba[3] = hsla[3];\n    }\n    return rgba;\n}\nfunction rgba2hsla(rgba) {\n    if (!rgba) {\n        return;\n    }\n    var R = rgba[0] / 255;\n    var G = rgba[1] / 255;\n    var B = rgba[2] / 255;\n    var vMin = Math.min(R, G, B);\n    var vMax = Math.max(R, G, B);\n    var delta = vMax - vMin;\n    var L = (vMax + vMin) / 2;\n    var H;\n    var S;\n    if (delta === 0) {\n        H = 0;\n        S = 0;\n    }\n    else {\n        if (L < 0.5) {\n            S = delta / (vMax + vMin);\n        }\n        else {\n            S = delta / (2 - vMax - vMin);\n        }\n        var deltaR = (((vMax - R) / 6) + (delta / 2)) / delta;\n        var deltaG = (((vMax - G) / 6) + (delta / 2)) / delta;\n        var deltaB = (((vMax - B) / 6) + (delta / 2)) / delta;\n        if (R === vMax) {\n            H = deltaB - deltaG;\n        }\n        else if (G === vMax) {\n            H = (1 / 3) + deltaR - deltaB;\n        }\n        else if (B === vMax) {\n            H = (2 / 3) + deltaG - deltaR;\n        }\n        if (H < 0) {\n            H += 1;\n        }\n        if (H > 1) {\n            H -= 1;\n        }\n    }\n    var hsla = [H * 360, S, L];\n    if (rgba[3] != null) {\n        hsla.push(rgba[3]);\n    }\n    return hsla;\n}\nexport function lift(color, level) {\n    var colorArr = parse(color);\n    if (colorArr) {\n        for (var i = 0; i < 3; i++) {\n            if (level < 0) {\n                colorArr[i] = colorArr[i] * (1 - level) | 0;\n            }\n            else {\n                colorArr[i] = ((255 - colorArr[i]) * level + colorArr[i]) | 0;\n            }\n            if (colorArr[i] > 255) {\n                colorArr[i] = 255;\n            }\n            else if (colorArr[i] < 0) {\n                colorArr[i] = 0;\n            }\n        }\n        return stringify(colorArr, colorArr.length === 4 ? 'rgba' : 'rgb');\n    }\n}\nexport function toHex(color) {\n    var colorArr = parse(color);\n    if (colorArr) {\n        return ((1 << 24) + (colorArr[0] << 16) + (colorArr[1] << 8) + (+colorArr[2])).toString(16).slice(1);\n    }\n}\nexport function fastLerp(normalizedValue, colors, out) {\n    if (!(colors && colors.length)\n        || !(normalizedValue >= 0 && normalizedValue <= 1)) {\n        return;\n    }\n    out = out || [];\n    var value = normalizedValue * (colors.length - 1);\n    var leftIndex = Math.floor(value);\n    var rightIndex = Math.ceil(value);\n    var leftColor = colors[leftIndex];\n    var rightColor = colors[rightIndex];\n    var dv = value - leftIndex;\n    out[0] = clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv));\n    out[1] = clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv));\n    out[2] = clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv));\n    out[3] = clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv));\n    return out;\n}\nexport var fastMapToColor = fastLerp;\nexport function lerp(normalizedValue, colors, fullOutput) {\n    if (!(colors && colors.length)\n        || !(normalizedValue >= 0 && normalizedValue <= 1)) {\n        return;\n    }\n    var value = normalizedValue * (colors.length - 1);\n    var leftIndex = Math.floor(value);\n    var rightIndex = Math.ceil(value);\n    var leftColor = parse(colors[leftIndex]);\n    var rightColor = parse(colors[rightIndex]);\n    var dv = value - leftIndex;\n    var color = stringify([\n        clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv)),\n        clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv)),\n        clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv)),\n        clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv))\n    ], 'rgba');\n    return fullOutput\n        ? {\n            color: color,\n            leftIndex: leftIndex,\n            rightIndex: rightIndex,\n            value: value\n        }\n        : color;\n}\nexport var mapToColor = lerp;\nexport function modifyHSL(color, h, s, l) {\n    var colorArr = parse(color);\n    if (color) {\n        colorArr = rgba2hsla(colorArr);\n        h != null && (colorArr[0] = clampCssAngle(isFunction(h) ? h(colorArr[0]) : h));\n        s != null && (colorArr[1] = parseCssFloat(isFunction(s) ? s(colorArr[1]) : s));\n        l != null && (colorArr[2] = parseCssFloat(isFunction(l) ? l(colorArr[2]) : l));\n        return stringify(hsla2rgba(colorArr), 'rgba');\n    }\n}\nexport function modifyAlpha(color, alpha) {\n    var colorArr = parse(color);\n    if (colorArr && alpha != null) {\n        colorArr[3] = clampCssFloat(alpha);\n        return stringify(colorArr, 'rgba');\n    }\n}\nexport function stringify(arrColor, type) {\n    if (!arrColor || !arrColor.length) {\n        return;\n    }\n    var colorStr = arrColor[0] + ',' + arrColor[1] + ',' + arrColor[2];\n    if (type === 'rgba' || type === 'hsva' || type === 'hsla') {\n        colorStr += ',' + arrColor[3];\n    }\n    return type + '(' + colorStr + ')';\n}\nexport function lum(color, backgroundLum) {\n    var arr = parse(color);\n    return arr\n        ? (0.299 * arr[0] + 0.587 * arr[1] + 0.114 * arr[2]) * arr[3] / 255\n            + (1 - arr[3]) * backgroundLum\n        : 0;\n}\nexport function random() {\n    return stringify([\n        Math.round(Math.random() * 255),\n        Math.round(Math.random() * 255),\n        Math.round(Math.random() * 255)\n    ], 'rgb');\n}\nvar liftedColorCache = new LRU(100);\nexport function liftColor(color) {\n    if (isString(color)) {\n        var liftedColor = liftedColorCache.get(color);\n        if (!liftedColor) {\n            liftedColor = lift(color, -0.1);\n            liftedColorCache.put(color, liftedColor);\n        }\n        return liftedColor;\n    }\n    else if (isGradientObject(color)) {\n        var ret = extend({}, color);\n        ret.colorStops = map(color.colorStops, function (stop) { return ({\n            offset: stop.offset,\n            color: lift(stop.color, -0.1)\n        }); });\n        return ret;\n    }\n    return color;\n}\n","import { RADIAN_TO_DEGREE, retrieve2, logError, isFunction } from '../core/util.js';\nimport { parse } from '../tool/color.js';\nimport env from '../core/env.js';\nvar mathRound = Math.round;\nexport function normalizeColor(color) {\n    var opacity;\n    if (!color || color === 'transparent') {\n        color = 'none';\n    }\n    else if (typeof color === 'string' && color.indexOf('rgba') > -1) {\n        var arr = parse(color);\n        if (arr) {\n            color = 'rgb(' + arr[0] + ',' + arr[1] + ',' + arr[2] + ')';\n            opacity = arr[3];\n        }\n    }\n    return {\n        color: color,\n        opacity: opacity == null ? 1 : opacity\n    };\n}\nvar EPSILON = 1e-4;\nexport function isAroundZero(transform) {\n    return transform < EPSILON && transform > -EPSILON;\n}\nexport function round3(transform) {\n    return mathRound(transform * 1e3) / 1e3;\n}\nexport function round4(transform) {\n    return mathRound(transform * 1e4) / 1e4;\n}\nexport function round1(transform) {\n    return mathRound(transform * 10) / 10;\n}\nexport function getMatrixStr(m) {\n    return 'matrix('\n        + round3(m[0]) + ','\n        + round3(m[1]) + ','\n        + round3(m[2]) + ','\n        + round3(m[3]) + ','\n        + round4(m[4]) + ','\n        + round4(m[5])\n        + ')';\n}\nexport var TEXT_ALIGN_TO_ANCHOR = {\n    left: 'start',\n    right: 'end',\n    center: 'middle',\n    middle: 'middle'\n};\nexport function adjustTextY(y, lineHeight, textBaseline) {\n    if (textBaseline === 'top') {\n        y += lineHeight / 2;\n    }\n    else if (textBaseline === 'bottom') {\n        y -= lineHeight / 2;\n    }\n    return y;\n}\nexport function hasShadow(style) {\n    return style\n        && (style.shadowBlur || style.shadowOffsetX || style.shadowOffsetY);\n}\nexport function getShadowKey(displayable) {\n    var style = displayable.style;\n    var globalScale = displayable.getGlobalScale();\n    return [\n        style.shadowColor,\n        (style.shadowBlur || 0).toFixed(2),\n        (style.shadowOffsetX || 0).toFixed(2),\n        (style.shadowOffsetY || 0).toFixed(2),\n        globalScale[0],\n        globalScale[1]\n    ].join(',');\n}\nexport function getClipPathsKey(clipPaths) {\n    var key = [];\n    if (clipPaths) {\n        for (var i = 0; i < clipPaths.length; i++) {\n            var clipPath = clipPaths[i];\n            key.push(clipPath.id);\n        }\n    }\n    return key.join(',');\n}\nexport function isImagePattern(val) {\n    return val && (!!val.image);\n}\nexport function isSVGPattern(val) {\n    return val && (!!val.svgElement);\n}\nexport function isPattern(val) {\n    return isImagePattern(val) || isSVGPattern(val);\n}\nexport function isLinearGradient(val) {\n    return val.type === 'linear';\n}\nexport function isRadialGradient(val) {\n    return val.type === 'radial';\n}\nexport function isGradient(val) {\n    return val && (val.type === 'linear'\n        || val.type === 'radial');\n}\nexport function getIdURL(id) {\n    return \"url(#\" + id + \")\";\n}\nexport function getPathPrecision(el) {\n    var scale = el.getGlobalScale();\n    var size = Math.max(scale[0], scale[1]);\n    return Math.max(Math.ceil(Math.log(size) / Math.log(10)), 1);\n}\nexport function getSRTTransformString(transform) {\n    var x = transform.x || 0;\n    var y = transform.y || 0;\n    var rotation = (transform.rotation || 0) * RADIAN_TO_DEGREE;\n    var scaleX = retrieve2(transform.scaleX, 1);\n    var scaleY = retrieve2(transform.scaleY, 1);\n    var skewX = transform.skewX || 0;\n    var skewY = transform.skewY || 0;\n    var res = [];\n    if (x || y) {\n        res.push(\"translate(\" + x + \"px,\" + y + \"px)\");\n    }\n    if (rotation) {\n        res.push(\"rotate(\" + rotation + \")\");\n    }\n    if (scaleX !== 1 || scaleY !== 1) {\n        res.push(\"scale(\" + scaleX + \",\" + scaleY + \")\");\n    }\n    if (skewX || skewY) {\n        res.push(\"skew(\" + mathRound(skewX * RADIAN_TO_DEGREE) + \"deg, \" + mathRound(skewY * RADIAN_TO_DEGREE) + \"deg)\");\n    }\n    return res.join(' ');\n}\nexport var encodeBase64 = (function () {\n    if (env.hasGlobalWindow && isFunction(window.btoa)) {\n        return function (str) {\n            return window.btoa(unescape(encodeURIComponent(str)));\n        };\n    }\n    if (typeof Buffer !== 'undefined') {\n        return function (str) {\n            return Buffer.from(str).toString('base64');\n        };\n    }\n    return function (str) {\n        if (process.env.NODE_ENV !== 'production') {\n            logError('Base64 isn\\'t natively supported in the current environment.');\n        }\n        return null;\n    };\n})();\n","import Clip from './Clip.js';\nimport * as color from '../tool/color.js';\nimport { eqNaN, extend, isArrayLike, isFunction, isGradientObject, isNumber, isString, keys, logError, map } from '../core/util.js';\nimport easingFuncs from './easing.js';\nimport { createCubicEasingFunc } from './cubicEasing.js';\nimport { isLinearGradient, isRadialGradient } from '../svg/helper.js';\n;\nvar arraySlice = Array.prototype.slice;\nfunction interpolateNumber(p0, p1, percent) {\n    return (p1 - p0) * percent + p0;\n}\nfunction interpolate1DArray(out, p0, p1, percent) {\n    var len = p0.length;\n    for (var i = 0; i < len; i++) {\n        out[i] = interpolateNumber(p0[i], p1[i], percent);\n    }\n    return out;\n}\nfunction interpolate2DArray(out, p0, p1, percent) {\n    var len = p0.length;\n    var len2 = len && p0[0].length;\n    for (var i = 0; i < len; i++) {\n        if (!out[i]) {\n            out[i] = [];\n        }\n        for (var j = 0; j < len2; j++) {\n            out[i][j] = interpolateNumber(p0[i][j], p1[i][j], percent);\n        }\n    }\n    return out;\n}\nfunction add1DArray(out, p0, p1, sign) {\n    var len = p0.length;\n    for (var i = 0; i < len; i++) {\n        out[i] = p0[i] + p1[i] * sign;\n    }\n    return out;\n}\nfunction add2DArray(out, p0, p1, sign) {\n    var len = p0.length;\n    var len2 = len && p0[0].length;\n    for (var i = 0; i < len; i++) {\n        if (!out[i]) {\n            out[i] = [];\n        }\n        for (var j = 0; j < len2; j++) {\n            out[i][j] = p0[i][j] + p1[i][j] * sign;\n        }\n    }\n    return out;\n}\nfunction fillColorStops(val0, val1) {\n    var len0 = val0.length;\n    var len1 = val1.length;\n    var shorterArr = len0 > len1 ? val1 : val0;\n    var shorterLen = Math.min(len0, len1);\n    var last = shorterArr[shorterLen - 1] || { color: [0, 0, 0, 0], offset: 0 };\n    for (var i = shorterLen; i < Math.max(len0, len1); i++) {\n        shorterArr.push({\n            offset: last.offset,\n            color: last.color.slice()\n        });\n    }\n}\nfunction fillArray(val0, val1, arrDim) {\n    var arr0 = val0;\n    var arr1 = val1;\n    if (!arr0.push || !arr1.push) {\n        return;\n    }\n    var arr0Len = arr0.length;\n    var arr1Len = arr1.length;\n    if (arr0Len !== arr1Len) {\n        var isPreviousLarger = arr0Len > arr1Len;\n        if (isPreviousLarger) {\n            arr0.length = arr1Len;\n        }\n        else {\n            for (var i = arr0Len; i < arr1Len; i++) {\n                arr0.push(arrDim === 1 ? arr1[i] : arraySlice.call(arr1[i]));\n            }\n        }\n    }\n    var len2 = arr0[0] && arr0[0].length;\n    for (var i = 0; i < arr0.length; i++) {\n        if (arrDim === 1) {\n            if (isNaN(arr0[i])) {\n                arr0[i] = arr1[i];\n            }\n        }\n        else {\n            for (var j = 0; j < len2; j++) {\n                if (isNaN(arr0[i][j])) {\n                    arr0[i][j] = arr1[i][j];\n                }\n            }\n        }\n    }\n}\nexport function cloneValue(value) {\n    if (isArrayLike(value)) {\n        var len = value.length;\n        if (isArrayLike(value[0])) {\n            var ret = [];\n            for (var i = 0; i < len; i++) {\n                ret.push(arraySlice.call(value[i]));\n            }\n            return ret;\n        }\n        return arraySlice.call(value);\n    }\n    return value;\n}\nfunction rgba2String(rgba) {\n    rgba[0] = Math.floor(rgba[0]) || 0;\n    rgba[1] = Math.floor(rgba[1]) || 0;\n    rgba[2] = Math.floor(rgba[2]) || 0;\n    rgba[3] = rgba[3] == null ? 1 : rgba[3];\n    return 'rgba(' + rgba.join(',') + ')';\n}\nfunction guessArrayDim(value) {\n    return isArrayLike(value && value[0]) ? 2 : 1;\n}\nvar VALUE_TYPE_NUMBER = 0;\nvar VALUE_TYPE_1D_ARRAY = 1;\nvar VALUE_TYPE_2D_ARRAY = 2;\nvar VALUE_TYPE_COLOR = 3;\nvar VALUE_TYPE_LINEAR_GRADIENT = 4;\nvar VALUE_TYPE_RADIAL_GRADIENT = 5;\nvar VALUE_TYPE_UNKOWN = 6;\nfunction isGradientValueType(valType) {\n    return valType === VALUE_TYPE_LINEAR_GRADIENT || valType === VALUE_TYPE_RADIAL_GRADIENT;\n}\nfunction isArrayValueType(valType) {\n    return valType === VALUE_TYPE_1D_ARRAY || valType === VALUE_TYPE_2D_ARRAY;\n}\nvar tmpRgba = [0, 0, 0, 0];\nvar Track = (function () {\n    function Track(propName) {\n        this.keyframes = [];\n        this.discrete = false;\n        this._invalid = false;\n        this._needsSort = false;\n        this._lastFr = 0;\n        this._lastFrP = 0;\n        this.propName = propName;\n    }\n    Track.prototype.isFinished = function () {\n        return this._finished;\n    };\n    Track.prototype.setFinished = function () {\n        this._finished = true;\n        if (this._additiveTrack) {\n            this._additiveTrack.setFinished();\n        }\n    };\n    Track.prototype.needsAnimate = function () {\n        return this.keyframes.length >= 1;\n    };\n    Track.prototype.getAdditiveTrack = function () {\n        return this._additiveTrack;\n    };\n    Track.prototype.addKeyframe = function (time, rawValue, easing) {\n        this._needsSort = true;\n        var keyframes = this.keyframes;\n        var len = keyframes.length;\n        var discrete = false;\n        var valType = VALUE_TYPE_UNKOWN;\n        var value = rawValue;\n        if (isArrayLike(rawValue)) {\n            var arrayDim = guessArrayDim(rawValue);\n            valType = arrayDim;\n            if (arrayDim === 1 && !isNumber(rawValue[0])\n                || arrayDim === 2 && !isNumber(rawValue[0][0])) {\n                discrete = true;\n            }\n        }\n        else {\n            if (isNumber(rawValue) && !eqNaN(rawValue)) {\n                valType = VALUE_TYPE_NUMBER;\n            }\n            else if (isString(rawValue)) {\n                if (!isNaN(+rawValue)) {\n                    valType = VALUE_TYPE_NUMBER;\n                }\n                else {\n                    var colorArray = color.parse(rawValue);\n                    if (colorArray) {\n                        value = colorArray;\n                        valType = VALUE_TYPE_COLOR;\n                    }\n                }\n            }\n            else if (isGradientObject(rawValue)) {\n                var parsedGradient = extend({}, value);\n                parsedGradient.colorStops = map(rawValue.colorStops, function (colorStop) { return ({\n                    offset: colorStop.offset,\n                    color: color.parse(colorStop.color)\n                }); });\n                if (isLinearGradient(rawValue)) {\n                    valType = VALUE_TYPE_LINEAR_GRADIENT;\n                }\n                else if (isRadialGradient(rawValue)) {\n                    valType = VALUE_TYPE_RADIAL_GRADIENT;\n                }\n                value = parsedGradient;\n            }\n        }\n        if (len === 0) {\n            this.valType = valType;\n        }\n        else if (valType !== this.valType || valType === VALUE_TYPE_UNKOWN) {\n            discrete = true;\n        }\n        this.discrete = this.discrete || discrete;\n        var kf = {\n            time: time,\n            value: value,\n            rawValue: rawValue,\n            percent: 0\n        };\n        if (easing) {\n            kf.easing = easing;\n            kf.easingFunc = isFunction(easing)\n                ? easing\n                : easingFuncs[easing] || createCubicEasingFunc(easing);\n        }\n        keyframes.push(kf);\n        return kf;\n    };\n    Track.prototype.prepare = function (maxTime, additiveTrack) {\n        var kfs = this.keyframes;\n        if (this._needsSort) {\n            kfs.sort(function (a, b) {\n                return a.time - b.time;\n            });\n        }\n        var valType = this.valType;\n        var kfsLen = kfs.length;\n        var lastKf = kfs[kfsLen - 1];\n        var isDiscrete = this.discrete;\n        var isArr = isArrayValueType(valType);\n        var isGradient = isGradientValueType(valType);\n        for (var i = 0; i < kfsLen; i++) {\n            var kf = kfs[i];\n            var value = kf.value;\n            var lastValue = lastKf.value;\n            kf.percent = kf.time / maxTime;\n            if (!isDiscrete) {\n                if (isArr && i !== kfsLen - 1) {\n                    fillArray(value, lastValue, valType);\n                }\n                else if (isGradient) {\n                    fillColorStops(value.colorStops, lastValue.colorStops);\n                }\n            }\n        }\n        if (!isDiscrete\n            && valType !== VALUE_TYPE_RADIAL_GRADIENT\n            && additiveTrack\n            && this.needsAnimate()\n            && additiveTrack.needsAnimate()\n            && valType === additiveTrack.valType\n            && !additiveTrack._finished) {\n            this._additiveTrack = additiveTrack;\n            var startValue = kfs[0].value;\n            for (var i = 0; i < kfsLen; i++) {\n                if (valType === VALUE_TYPE_NUMBER) {\n                    kfs[i].additiveValue = kfs[i].value - startValue;\n                }\n                else if (valType === VALUE_TYPE_COLOR) {\n                    kfs[i].additiveValue =\n                        add1DArray([], kfs[i].value, startValue, -1);\n                }\n                else if (isArrayValueType(valType)) {\n                    kfs[i].additiveValue = valType === VALUE_TYPE_1D_ARRAY\n                        ? add1DArray([], kfs[i].value, startValue, -1)\n                        : add2DArray([], kfs[i].value, startValue, -1);\n                }\n            }\n        }\n    };\n    Track.prototype.step = function (target, percent) {\n        if (this._finished) {\n            return;\n        }\n        if (this._additiveTrack && this._additiveTrack._finished) {\n            this._additiveTrack = null;\n        }\n        var isAdditive = this._additiveTrack != null;\n        var valueKey = isAdditive ? 'additiveValue' : 'value';\n        var valType = this.valType;\n        var keyframes = this.keyframes;\n        var kfsNum = keyframes.length;\n        var propName = this.propName;\n        var isValueColor = valType === VALUE_TYPE_COLOR;\n        var frameIdx;\n        var lastFrame = this._lastFr;\n        var mathMin = Math.min;\n        var frame;\n        var nextFrame;\n        if (kfsNum === 1) {\n            frame = nextFrame = keyframes[0];\n        }\n        else {\n            if (percent < 0) {\n                frameIdx = 0;\n            }\n            else if (percent < this._lastFrP) {\n                var start = mathMin(lastFrame + 1, kfsNum - 1);\n                for (frameIdx = start; frameIdx >= 0; frameIdx--) {\n                    if (keyframes[frameIdx].percent <= percent) {\n                        break;\n                    }\n                }\n                frameIdx = mathMin(frameIdx, kfsNum - 2);\n            }\n            else {\n                for (frameIdx = lastFrame; frameIdx < kfsNum; frameIdx++) {\n                    if (keyframes[frameIdx].percent > percent) {\n                        break;\n                    }\n                }\n                frameIdx = mathMin(frameIdx - 1, kfsNum - 2);\n            }\n            nextFrame = keyframes[frameIdx + 1];\n            frame = keyframes[frameIdx];\n        }\n        if (!(frame && nextFrame)) {\n            return;\n        }\n        this._lastFr = frameIdx;\n        this._lastFrP = percent;\n        var interval = (nextFrame.percent - frame.percent);\n        var w = interval === 0 ? 1 : mathMin((percent - frame.percent) / interval, 1);\n        if (nextFrame.easingFunc) {\n            w = nextFrame.easingFunc(w);\n        }\n        var targetArr = isAdditive ? this._additiveValue\n            : (isValueColor ? tmpRgba : target[propName]);\n        if ((isArrayValueType(valType) || isValueColor) && !targetArr) {\n            targetArr = this._additiveValue = [];\n        }\n        if (this.discrete) {\n            target[propName] = w < 1 ? frame.rawValue : nextFrame.rawValue;\n        }\n        else if (isArrayValueType(valType)) {\n            valType === VALUE_TYPE_1D_ARRAY\n                ? interpolate1DArray(targetArr, frame[valueKey], nextFrame[valueKey], w)\n                : interpolate2DArray(targetArr, frame[valueKey], nextFrame[valueKey], w);\n        }\n        else if (isGradientValueType(valType)) {\n            var val = frame[valueKey];\n            var nextVal_1 = nextFrame[valueKey];\n            var isLinearGradient_1 = valType === VALUE_TYPE_LINEAR_GRADIENT;\n            target[propName] = {\n                type: isLinearGradient_1 ? 'linear' : 'radial',\n                x: interpolateNumber(val.x, nextVal_1.x, w),\n                y: interpolateNumber(val.y, nextVal_1.y, w),\n                colorStops: map(val.colorStops, function (colorStop, idx) {\n                    var nextColorStop = nextVal_1.colorStops[idx];\n                    return {\n                        offset: interpolateNumber(colorStop.offset, nextColorStop.offset, w),\n                        color: rgba2String(interpolate1DArray([], colorStop.color, nextColorStop.color, w))\n                    };\n                }),\n                global: nextVal_1.global\n            };\n            if (isLinearGradient_1) {\n                target[propName].x2 = interpolateNumber(val.x2, nextVal_1.x2, w);\n                target[propName].y2 = interpolateNumber(val.y2, nextVal_1.y2, w);\n            }\n            else {\n                target[propName].r = interpolateNumber(val.r, nextVal_1.r, w);\n            }\n        }\n        else if (isValueColor) {\n            interpolate1DArray(targetArr, frame[valueKey], nextFrame[valueKey], w);\n            if (!isAdditive) {\n                target[propName] = rgba2String(targetArr);\n            }\n        }\n        else {\n            var value = interpolateNumber(frame[valueKey], nextFrame[valueKey], w);\n            if (isAdditive) {\n                this._additiveValue = value;\n            }\n            else {\n                target[propName] = value;\n            }\n        }\n        if (isAdditive) {\n            this._addToTarget(target);\n        }\n    };\n    Track.prototype._addToTarget = function (target) {\n        var valType = this.valType;\n        var propName = this.propName;\n        var additiveValue = this._additiveValue;\n        if (valType === VALUE_TYPE_NUMBER) {\n            target[propName] = target[propName] + additiveValue;\n        }\n        else if (valType === VALUE_TYPE_COLOR) {\n            color.parse(target[propName], tmpRgba);\n            add1DArray(tmpRgba, tmpRgba, additiveValue, 1);\n            target[propName] = rgba2String(tmpRgba);\n        }\n        else if (valType === VALUE_TYPE_1D_ARRAY) {\n            add1DArray(target[propName], target[propName], additiveValue, 1);\n        }\n        else if (valType === VALUE_TYPE_2D_ARRAY) {\n            add2DArray(target[propName], target[propName], additiveValue, 1);\n        }\n    };\n    return Track;\n}());\nvar Animator = (function () {\n    function Animator(target, loop, allowDiscreteAnimation, additiveTo) {\n        this._tracks = {};\n        this._trackKeys = [];\n        this._maxTime = 0;\n        this._started = 0;\n        this._clip = null;\n        this._target = target;\n        this._loop = loop;\n        if (loop && additiveTo) {\n            logError('Can\\' use additive animation on looped animation.');\n            return;\n        }\n        this._additiveAnimators = additiveTo;\n        this._allowDiscrete = allowDiscreteAnimation;\n    }\n    Animator.prototype.getMaxTime = function () {\n        return this._maxTime;\n    };\n    Animator.prototype.getDelay = function () {\n        return this._delay;\n    };\n    Animator.prototype.getLoop = function () {\n        return this._loop;\n    };\n    Animator.prototype.getTarget = function () {\n        return this._target;\n    };\n    Animator.prototype.changeTarget = function (target) {\n        this._target = target;\n    };\n    Animator.prototype.when = function (time, props, easing) {\n        return this.whenWithKeys(time, props, keys(props), easing);\n    };\n    Animator.prototype.whenWithKeys = function (time, props, propNames, easing) {\n        var tracks = this._tracks;\n        for (var i = 0; i < propNames.length; i++) {\n            var propName = propNames[i];\n            var track = tracks[propName];\n            if (!track) {\n                track = tracks[propName] = new Track(propName);\n                var initialValue = void 0;\n                var additiveTrack = this._getAdditiveTrack(propName);\n                if (additiveTrack) {\n                    var addtiveTrackKfs = additiveTrack.keyframes;\n                    var lastFinalKf = addtiveTrackKfs[addtiveTrackKfs.length - 1];\n                    initialValue = lastFinalKf && lastFinalKf.value;\n                    if (additiveTrack.valType === VALUE_TYPE_COLOR && initialValue) {\n                        initialValue = rgba2String(initialValue);\n                    }\n                }\n                else {\n                    initialValue = this._target[propName];\n                }\n                if (initialValue == null) {\n                    continue;\n                }\n                if (time > 0) {\n                    track.addKeyframe(0, cloneValue(initialValue), easing);\n                }\n                this._trackKeys.push(propName);\n            }\n            track.addKeyframe(time, cloneValue(props[propName]), easing);\n        }\n        this._maxTime = Math.max(this._maxTime, time);\n        return this;\n    };\n    Animator.prototype.pause = function () {\n        this._clip.pause();\n        this._paused = true;\n    };\n    Animator.prototype.resume = function () {\n        this._clip.resume();\n        this._paused = false;\n    };\n    Animator.prototype.isPaused = function () {\n        return !!this._paused;\n    };\n    Animator.prototype.duration = function (duration) {\n        this._maxTime = duration;\n        this._force = true;\n        return this;\n    };\n    Animator.prototype._doneCallback = function () {\n        this._setTracksFinished();\n        this._clip = null;\n        var doneList = this._doneCbs;\n        if (doneList) {\n            var len = doneList.length;\n            for (var i = 0; i < len; i++) {\n                doneList[i].call(this);\n            }\n        }\n    };\n    Animator.prototype._abortedCallback = function () {\n        this._setTracksFinished();\n        var animation = this.animation;\n        var abortedList = this._abortedCbs;\n        if (animation) {\n            animation.removeClip(this._clip);\n        }\n        this._clip = null;\n        if (abortedList) {\n            for (var i = 0; i < abortedList.length; i++) {\n                abortedList[i].call(this);\n            }\n        }\n    };\n    Animator.prototype._setTracksFinished = function () {\n        var tracks = this._tracks;\n        var tracksKeys = this._trackKeys;\n        for (var i = 0; i < tracksKeys.length; i++) {\n            tracks[tracksKeys[i]].setFinished();\n        }\n    };\n    Animator.prototype._getAdditiveTrack = function (trackName) {\n        var additiveTrack;\n        var additiveAnimators = this._additiveAnimators;\n        if (additiveAnimators) {\n            for (var i = 0; i < additiveAnimators.length; i++) {\n                var track = additiveAnimators[i].getTrack(trackName);\n                if (track) {\n                    additiveTrack = track;\n                }\n            }\n        }\n        return additiveTrack;\n    };\n    Animator.prototype.start = function (easing) {\n        if (this._started > 0) {\n            return;\n        }\n        this._started = 1;\n        var self = this;\n        var tracks = [];\n        var maxTime = this._maxTime || 0;\n        for (var i = 0; i < this._trackKeys.length; i++) {\n            var propName = this._trackKeys[i];\n            var track = this._tracks[propName];\n            var additiveTrack = this._getAdditiveTrack(propName);\n            var kfs = track.keyframes;\n            var kfsNum = kfs.length;\n            track.prepare(maxTime, additiveTrack);\n            if (track.needsAnimate()) {\n                if (!this._allowDiscrete && track.discrete) {\n                    var lastKf = kfs[kfsNum - 1];\n                    if (lastKf) {\n                        self._target[track.propName] = lastKf.rawValue;\n                    }\n                    track.setFinished();\n                }\n                else {\n                    tracks.push(track);\n                }\n            }\n        }\n        if (tracks.length || this._force) {\n            var clip = new Clip({\n                life: maxTime,\n                loop: this._loop,\n                delay: this._delay || 0,\n                onframe: function (percent) {\n                    self._started = 2;\n                    var additiveAnimators = self._additiveAnimators;\n                    if (additiveAnimators) {\n                        var stillHasAdditiveAnimator = false;\n                        for (var i = 0; i < additiveAnimators.length; i++) {\n                            if (additiveAnimators[i]._clip) {\n                                stillHasAdditiveAnimator = true;\n                                break;\n                            }\n                        }\n                        if (!stillHasAdditiveAnimator) {\n                            self._additiveAnimators = null;\n                        }\n                    }\n                    for (var i = 0; i < tracks.length; i++) {\n                        tracks[i].step(self._target, percent);\n                    }\n                    var onframeList = self._onframeCbs;\n                    if (onframeList) {\n                        for (var i = 0; i < onframeList.length; i++) {\n                            onframeList[i](self._target, percent);\n                        }\n                    }\n                },\n                ondestroy: function () {\n                    self._doneCallback();\n                }\n            });\n            this._clip = clip;\n            if (this.animation) {\n                this.animation.addClip(clip);\n            }\n            if (easing) {\n                clip.setEasing(easing);\n            }\n        }\n        else {\n            this._doneCallback();\n        }\n        return this;\n    };\n    Animator.prototype.stop = function (forwardToLast) {\n        if (!this._clip) {\n            return;\n        }\n        var clip = this._clip;\n        if (forwardToLast) {\n            clip.onframe(1);\n        }\n        this._abortedCallback();\n    };\n    Animator.prototype.delay = function (time) {\n        this._delay = time;\n        return this;\n    };\n    Animator.prototype.during = function (cb) {\n        if (cb) {\n            if (!this._onframeCbs) {\n                this._onframeCbs = [];\n            }\n            this._onframeCbs.push(cb);\n        }\n        return this;\n    };\n    Animator.prototype.done = function (cb) {\n        if (cb) {\n            if (!this._doneCbs) {\n                this._doneCbs = [];\n            }\n            this._doneCbs.push(cb);\n        }\n        return this;\n    };\n    Animator.prototype.aborted = function (cb) {\n        if (cb) {\n            if (!this._abortedCbs) {\n                this._abortedCbs = [];\n            }\n            this._abortedCbs.push(cb);\n        }\n        return this;\n    };\n    Animator.prototype.getClip = function () {\n        return this._clip;\n    };\n    Animator.prototype.getTrack = function (propName) {\n        return this._tracks[propName];\n    };\n    Animator.prototype.getTracks = function () {\n        var _this = this;\n        return map(this._trackKeys, function (key) { return _this._tracks[key]; });\n    };\n    Animator.prototype.stopTracks = function (propNames, forwardToLast) {\n        if (!propNames.length || !this._clip) {\n            return true;\n        }\n        var tracks = this._tracks;\n        var tracksKeys = this._trackKeys;\n        for (var i = 0; i < propNames.length; i++) {\n            var track = tracks[propNames[i]];\n            if (track && !track.isFinished()) {\n                if (forwardToLast) {\n                    track.step(this._target, 1);\n                }\n                else if (this._started === 1) {\n                    track.step(this._target, 0);\n                }\n                track.setFinished();\n            }\n        }\n        var allAborted = true;\n        for (var i = 0; i < tracksKeys.length; i++) {\n            if (!tracks[tracksKeys[i]].isFinished()) {\n                allAborted = false;\n                break;\n            }\n        }\n        if (allAborted) {\n            this._abortedCallback();\n        }\n        return allAborted;\n    };\n    Animator.prototype.saveTo = function (target, trackKeys, firstOrLast) {\n        if (!target) {\n            return;\n        }\n        trackKeys = trackKeys || this._trackKeys;\n        for (var i = 0; i < trackKeys.length; i++) {\n            var propName = trackKeys[i];\n            var track = this._tracks[propName];\n            if (!track || track.isFinished()) {\n                continue;\n            }\n            var kfs = track.keyframes;\n            var kf = kfs[firstOrLast ? 0 : kfs.length - 1];\n            if (kf) {\n                target[propName] = cloneValue(kf.rawValue);\n            }\n        }\n    };\n    Animator.prototype.__changeFinalValue = function (finalProps, trackKeys) {\n        trackKeys = trackKeys || keys(finalProps);\n        for (var i = 0; i < trackKeys.length; i++) {\n            var propName = trackKeys[i];\n            var track = this._tracks[propName];\n            if (!track) {\n                continue;\n            }\n            var kfs = track.keyframes;\n            if (kfs.length > 1) {\n                var lastKf = kfs.pop();\n                track.addKeyframe(lastKf.time, finalProps[propName]);\n                track.prepare(this._maxTime, track.getAdditiveTrack());\n            }\n        }\n    };\n    return Animator;\n}());\nexport default Animator;\n","import { __extends } from \"tslib\";\nimport Eventful from '../core/Eventful.js';\nimport requestAnimationFrame from './requestAnimationFrame.js';\nimport Animator from './Animator.js';\nexport function getTime() {\n    return new Date().getTime();\n}\nvar Animation = (function (_super) {\n    __extends(Animation, _super);\n    function Animation(opts) {\n        var _this = _super.call(this) || this;\n        _this._running = false;\n        _this._time = 0;\n        _this._pausedTime = 0;\n        _this._pauseStart = 0;\n        _this._paused = false;\n        opts = opts || {};\n        _this.stage = opts.stage || {};\n        return _this;\n    }\n    Animation.prototype.addClip = function (clip) {\n        if (clip.animation) {\n            this.removeClip(clip);\n        }\n        if (!this._head) {\n            this._head = this._tail = clip;\n        }\n        else {\n            this._tail.next = clip;\n            clip.prev = this._tail;\n            clip.next = null;\n            this._tail = clip;\n        }\n        clip.animation = this;\n    };\n    Animation.prototype.addAnimator = function (animator) {\n        animator.animation = this;\n        var clip = animator.getClip();\n        if (clip) {\n            this.addClip(clip);\n        }\n    };\n    Animation.prototype.removeClip = function (clip) {\n        if (!clip.animation) {\n            return;\n        }\n        var prev = clip.prev;\n        var next = clip.next;\n        if (prev) {\n            prev.next = next;\n        }\n        else {\n            this._head = next;\n        }\n        if (next) {\n            next.prev = prev;\n        }\n        else {\n            this._tail = prev;\n        }\n        clip.next = clip.prev = clip.animation = null;\n    };\n    Animation.prototype.removeAnimator = function (animator) {\n        var clip = animator.getClip();\n        if (clip) {\n            this.removeClip(clip);\n        }\n        animator.animation = null;\n    };\n    Animation.prototype.update = function (notTriggerFrameAndStageUpdate) {\n        var time = getTime() - this._pausedTime;\n        var delta = time - this._time;\n        var clip = this._head;\n        while (clip) {\n            var nextClip = clip.next;\n            var finished = clip.step(time, delta);\n            if (finished) {\n                clip.ondestroy();\n                this.removeClip(clip);\n                clip = nextClip;\n            }\n            else {\n                clip = nextClip;\n            }\n        }\n        this._time = time;\n        if (!notTriggerFrameAndStageUpdate) {\n            this.trigger('frame', delta);\n            this.stage.update && this.stage.update();\n        }\n    };\n    Animation.prototype._startLoop = function () {\n        var self = this;\n        this._running = true;\n        function step() {\n            if (self._running) {\n                requestAnimationFrame(step);\n                !self._paused && self.update();\n            }\n        }\n        requestAnimationFrame(step);\n    };\n    Animation.prototype.start = function () {\n        if (this._running) {\n            return;\n        }\n        this._time = getTime();\n        this._pausedTime = 0;\n        this._startLoop();\n    };\n    Animation.prototype.stop = function () {\n        this._running = false;\n    };\n    Animation.prototype.pause = function () {\n        if (!this._paused) {\n            this._pauseStart = getTime();\n            this._paused = true;\n        }\n    };\n    Animation.prototype.resume = function () {\n        if (this._paused) {\n            this._pausedTime += getTime() - this._pauseStart;\n            this._paused = false;\n        }\n    };\n    Animation.prototype.clear = function () {\n        var clip = this._head;\n        while (clip) {\n            var nextClip = clip.next;\n            clip.prev = clip.next = clip.animation = null;\n            clip = nextClip;\n        }\n        this._head = this._tail = null;\n    };\n    Animation.prototype.isFinished = function () {\n        return this._head == null;\n    };\n    Animation.prototype.animate = function (target, options) {\n        options = options || {};\n        this.start();\n        var animator = new Animator(target, options.loop);\n        this.addAnimator(animator);\n        return animator;\n    };\n    return Animation;\n}(Eventful));\nexport default Animation;\n","import { __extends } from \"tslib\";\nimport { addEventListener, removeEventListener, normalizeEvent, getNativeEvent } from '../core/event.js';\nimport * as zrUtil from '../core/util.js';\nimport Eventful from '../core/Eventful.js';\nimport env from '../core/env.js';\nvar TOUCH_CLICK_DELAY = 300;\nvar globalEventSupported = env.domSupported;\nvar localNativeListenerNames = (function () {\n    var mouseHandlerNames = [\n        'click', 'dblclick', 'mousewheel', 'wheel', 'mouseout',\n        'mouseup', 'mousedown', 'mousemove', 'contextmenu'\n    ];\n    var touchHandlerNames = [\n        'touchstart', 'touchend', 'touchmove'\n    ];\n    var pointerEventNameMap = {\n        pointerdown: 1, pointerup: 1, pointermove: 1, pointerout: 1\n    };\n    var pointerHandlerNames = zrUtil.map(mouseHandlerNames, function (name) {\n        var nm = name.replace('mouse', 'pointer');\n        return pointerEventNameMap.hasOwnProperty(nm) ? nm : name;\n    });\n    return {\n        mouse: mouseHandlerNames,\n        touch: touchHandlerNames,\n        pointer: pointerHandlerNames\n    };\n})();\nvar globalNativeListenerNames = {\n    mouse: ['mousemove', 'mouseup'],\n    pointer: ['pointermove', 'pointerup']\n};\nvar wheelEventSupported = false;\nfunction isPointerFromTouch(event) {\n    var pointerType = event.pointerType;\n    return pointerType === 'pen' || pointerType === 'touch';\n}\nfunction setTouchTimer(scope) {\n    scope.touching = true;\n    if (scope.touchTimer != null) {\n        clearTimeout(scope.touchTimer);\n        scope.touchTimer = null;\n    }\n    scope.touchTimer = setTimeout(function () {\n        scope.touching = false;\n        scope.touchTimer = null;\n    }, 700);\n}\nfunction markTouch(event) {\n    event && (event.zrByTouch = true);\n}\nfunction normalizeGlobalEvent(instance, event) {\n    return normalizeEvent(instance.dom, new FakeGlobalEvent(instance, event), true);\n}\nfunction isLocalEl(instance, el) {\n    var elTmp = el;\n    var isLocal = false;\n    while (elTmp && elTmp.nodeType !== 9\n        && !(isLocal = elTmp.domBelongToZr\n            || (elTmp !== el && elTmp === instance.painterRoot))) {\n        elTmp = elTmp.parentNode;\n    }\n    return isLocal;\n}\nvar FakeGlobalEvent = (function () {\n    function FakeGlobalEvent(instance, event) {\n        this.stopPropagation = zrUtil.noop;\n        this.stopImmediatePropagation = zrUtil.noop;\n        this.preventDefault = zrUtil.noop;\n        this.type = event.type;\n        this.target = this.currentTarget = instance.dom;\n        this.pointerType = event.pointerType;\n        this.clientX = event.clientX;\n        this.clientY = event.clientY;\n    }\n    return FakeGlobalEvent;\n}());\nvar localDOMHandlers = {\n    mousedown: function (event) {\n        event = normalizeEvent(this.dom, event);\n        this.__mayPointerCapture = [event.zrX, event.zrY];\n        this.trigger('mousedown', event);\n    },\n    mousemove: function (event) {\n        event = normalizeEvent(this.dom, event);\n        var downPoint = this.__mayPointerCapture;\n        if (downPoint && (event.zrX !== downPoint[0] || event.zrY !== downPoint[1])) {\n            this.__togglePointerCapture(true);\n        }\n        this.trigger('mousemove', event);\n    },\n    mouseup: function (event) {\n        event = normalizeEvent(this.dom, event);\n        this.__togglePointerCapture(false);\n        this.trigger('mouseup', event);\n    },\n    mouseout: function (event) {\n        event = normalizeEvent(this.dom, event);\n        var element = event.toElement || event.relatedTarget;\n        if (!isLocalEl(this, element)) {\n            if (this.__pointerCapturing) {\n                event.zrEventControl = 'no_globalout';\n            }\n            this.trigger('mouseout', event);\n        }\n    },\n    wheel: function (event) {\n        wheelEventSupported = true;\n        event = normalizeEvent(this.dom, event);\n        this.trigger('mousewheel', event);\n    },\n    mousewheel: function (event) {\n        if (wheelEventSupported) {\n            return;\n        }\n        event = normalizeEvent(this.dom, event);\n        this.trigger('mousewheel', event);\n    },\n    touchstart: function (event) {\n        event = normalizeEvent(this.dom, event);\n        markTouch(event);\n        this.__lastTouchMoment = new Date();\n        this.handler.processGesture(event, 'start');\n        localDOMHandlers.mousemove.call(this, event);\n        localDOMHandlers.mousedown.call(this, event);\n    },\n    touchmove: function (event) {\n        event = normalizeEvent(this.dom, event);\n        markTouch(event);\n        this.handler.processGesture(event, 'change');\n        localDOMHandlers.mousemove.call(this, event);\n    },\n    touchend: function (event) {\n        event = normalizeEvent(this.dom, event);\n        markTouch(event);\n        this.handler.processGesture(event, 'end');\n        localDOMHandlers.mouseup.call(this, event);\n        if (+new Date() - (+this.__lastTouchMoment) < TOUCH_CLICK_DELAY) {\n            localDOMHandlers.click.call(this, event);\n        }\n    },\n    pointerdown: function (event) {\n        localDOMHandlers.mousedown.call(this, event);\n    },\n    pointermove: function (event) {\n        if (!isPointerFromTouch(event)) {\n            localDOMHandlers.mousemove.call(this, event);\n        }\n    },\n    pointerup: function (event) {\n        localDOMHandlers.mouseup.call(this, event);\n    },\n    pointerout: function (event) {\n        if (!isPointerFromTouch(event)) {\n            localDOMHandlers.mouseout.call(this, event);\n        }\n    }\n};\nzrUtil.each(['click', 'dblclick', 'contextmenu'], function (name) {\n    localDOMHandlers[name] = function (event) {\n        event = normalizeEvent(this.dom, event);\n        this.trigger(name, event);\n    };\n});\nvar globalDOMHandlers = {\n    pointermove: function (event) {\n        if (!isPointerFromTouch(event)) {\n            globalDOMHandlers.mousemove.call(this, event);\n        }\n    },\n    pointerup: function (event) {\n        globalDOMHandlers.mouseup.call(this, event);\n    },\n    mousemove: function (event) {\n        this.trigger('mousemove', event);\n    },\n    mouseup: function (event) {\n        var pointerCaptureReleasing = this.__pointerCapturing;\n        this.__togglePointerCapture(false);\n        this.trigger('mouseup', event);\n        if (pointerCaptureReleasing) {\n            event.zrEventControl = 'only_globalout';\n            this.trigger('mouseout', event);\n        }\n    }\n};\nfunction mountLocalDOMEventListeners(instance, scope) {\n    var domHandlers = scope.domHandlers;\n    if (env.pointerEventsSupported) {\n        zrUtil.each(localNativeListenerNames.pointer, function (nativeEventName) {\n            mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n                domHandlers[nativeEventName].call(instance, event);\n            });\n        });\n    }\n    else {\n        if (env.touchEventsSupported) {\n            zrUtil.each(localNativeListenerNames.touch, function (nativeEventName) {\n                mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n                    domHandlers[nativeEventName].call(instance, event);\n                    setTouchTimer(scope);\n                });\n            });\n        }\n        zrUtil.each(localNativeListenerNames.mouse, function (nativeEventName) {\n            mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n                event = getNativeEvent(event);\n                if (!scope.touching) {\n                    domHandlers[nativeEventName].call(instance, event);\n                }\n            });\n        });\n    }\n}\nfunction mountGlobalDOMEventListeners(instance, scope) {\n    if (env.pointerEventsSupported) {\n        zrUtil.each(globalNativeListenerNames.pointer, mount);\n    }\n    else if (!env.touchEventsSupported) {\n        zrUtil.each(globalNativeListenerNames.mouse, mount);\n    }\n    function mount(nativeEventName) {\n        function nativeEventListener(event) {\n            event = getNativeEvent(event);\n            if (!isLocalEl(instance, event.target)) {\n                event = normalizeGlobalEvent(instance, event);\n                scope.domHandlers[nativeEventName].call(instance, event);\n            }\n        }\n        mountSingleDOMEventListener(scope, nativeEventName, nativeEventListener, { capture: true });\n    }\n}\nfunction mountSingleDOMEventListener(scope, nativeEventName, listener, opt) {\n    scope.mounted[nativeEventName] = listener;\n    scope.listenerOpts[nativeEventName] = opt;\n    addEventListener(scope.domTarget, nativeEventName, listener, opt);\n}\nfunction unmountDOMEventListeners(scope) {\n    var mounted = scope.mounted;\n    for (var nativeEventName in mounted) {\n        if (mounted.hasOwnProperty(nativeEventName)) {\n            removeEventListener(scope.domTarget, nativeEventName, mounted[nativeEventName], scope.listenerOpts[nativeEventName]);\n        }\n    }\n    scope.mounted = {};\n}\nvar DOMHandlerScope = (function () {\n    function DOMHandlerScope(domTarget, domHandlers) {\n        this.mounted = {};\n        this.listenerOpts = {};\n        this.touching = false;\n        this.domTarget = domTarget;\n        this.domHandlers = domHandlers;\n    }\n    return DOMHandlerScope;\n}());\nvar HandlerDomProxy = (function (_super) {\n    __extends(HandlerDomProxy, _super);\n    function HandlerDomProxy(dom, painterRoot) {\n        var _this = _super.call(this) || this;\n        _this.__pointerCapturing = false;\n        _this.dom = dom;\n        _this.painterRoot = painterRoot;\n        _this._localHandlerScope = new DOMHandlerScope(dom, localDOMHandlers);\n        if (globalEventSupported) {\n            _this._globalHandlerScope = new DOMHandlerScope(document, globalDOMHandlers);\n        }\n        mountLocalDOMEventListeners(_this, _this._localHandlerScope);\n        return _this;\n    }\n    HandlerDomProxy.prototype.dispose = function () {\n        unmountDOMEventListeners(this._localHandlerScope);\n        if (globalEventSupported) {\n            unmountDOMEventListeners(this._globalHandlerScope);\n        }\n    };\n    HandlerDomProxy.prototype.setCursor = function (cursorStyle) {\n        this.dom.style && (this.dom.style.cursor = cursorStyle || 'default');\n    };\n    HandlerDomProxy.prototype.__togglePointerCapture = function (isPointerCapturing) {\n        this.__mayPointerCapture = null;\n        if (globalEventSupported\n            && ((+this.__pointerCapturing) ^ (+isPointerCapturing))) {\n            this.__pointerCapturing = isPointerCapturing;\n            var globalHandlerScope = this._globalHandlerScope;\n            isPointerCapturing\n                ? mountGlobalDOMEventListeners(this, globalHandlerScope)\n                : unmountDOMEventListeners(globalHandlerScope);\n        }\n    };\n    return HandlerDomProxy;\n}(Eventful));\nexport default HandlerDomProxy;\n","import env from './core/env.js';\nvar dpr = 1;\nif (env.hasGlobalWindow) {\n    dpr = Math.max(window.devicePixelRatio\n        || (window.screen && window.screen.deviceXDPI / window.screen.logicalXDPI)\n        || 1, 1);\n}\nexport var debugMode = 0;\nexport var devicePixelRatio = dpr;\nexport var DARK_MODE_THRESHOLD = 0.4;\nexport var DARK_LABEL_COLOR = '#333';\nexport var LIGHT_LABEL_COLOR = '#ccc';\nexport var LIGHTER_LABEL_COLOR = '#eee';\n","import * as matrix from './matrix.js';\nimport * as vector from './vector.js';\nvar mIdentity = matrix.identity;\nvar EPSILON = 5e-5;\nfunction isNotAroundZero(val) {\n    return val > EPSILON || val < -EPSILON;\n}\nvar scaleTmp = [];\nvar tmpTransform = [];\nvar originTransform = matrix.create();\nvar abs = Math.abs;\nvar Transformable = (function () {\n    function Transformable() {\n    }\n    Transformable.prototype.getLocalTransform = function (m) {\n        return Transformable.getLocalTransform(this, m);\n    };\n    Transformable.prototype.setPosition = function (arr) {\n        this.x = arr[0];\n        this.y = arr[1];\n    };\n    Transformable.prototype.setScale = function (arr) {\n        this.scaleX = arr[0];\n        this.scaleY = arr[1];\n    };\n    Transformable.prototype.setSkew = function (arr) {\n        this.skewX = arr[0];\n        this.skewY = arr[1];\n    };\n    Transformable.prototype.setOrigin = function (arr) {\n        this.originX = arr[0];\n        this.originY = arr[1];\n    };\n    Transformable.prototype.needLocalTransform = function () {\n        return isNotAroundZero(this.rotation)\n            || isNotAroundZero(this.x)\n            || isNotAroundZero(this.y)\n            || isNotAroundZero(this.scaleX - 1)\n            || isNotAroundZero(this.scaleY - 1)\n            || isNotAroundZero(this.skewX)\n            || isNotAroundZero(this.skewY);\n    };\n    Transformable.prototype.updateTransform = function () {\n        var parentTransform = this.parent && this.parent.transform;\n        var needLocalTransform = this.needLocalTransform();\n        var m = this.transform;\n        if (!(needLocalTransform || parentTransform)) {\n            if (m) {\n                mIdentity(m);\n                this.invTransform = null;\n            }\n            return;\n        }\n        m = m || matrix.create();\n        if (needLocalTransform) {\n            this.getLocalTransform(m);\n        }\n        else {\n            mIdentity(m);\n        }\n        if (parentTransform) {\n            if (needLocalTransform) {\n                matrix.mul(m, parentTransform, m);\n            }\n            else {\n                matrix.copy(m, parentTransform);\n            }\n        }\n        this.transform = m;\n        this._resolveGlobalScaleRatio(m);\n    };\n    Transformable.prototype._resolveGlobalScaleRatio = function (m) {\n        var globalScaleRatio = this.globalScaleRatio;\n        if (globalScaleRatio != null && globalScaleRatio !== 1) {\n            this.getGlobalScale(scaleTmp);\n            var relX = scaleTmp[0] < 0 ? -1 : 1;\n            var relY = scaleTmp[1] < 0 ? -1 : 1;\n            var sx = ((scaleTmp[0] - relX) * globalScaleRatio + relX) / scaleTmp[0] || 0;\n            var sy = ((scaleTmp[1] - relY) * globalScaleRatio + relY) / scaleTmp[1] || 0;\n            m[0] *= sx;\n            m[1] *= sx;\n            m[2] *= sy;\n            m[3] *= sy;\n        }\n        this.invTransform = this.invTransform || matrix.create();\n        matrix.invert(this.invTransform, m);\n    };\n    Transformable.prototype.getComputedTransform = function () {\n        var transformNode = this;\n        var ancestors = [];\n        while (transformNode) {\n            ancestors.push(transformNode);\n            transformNode = transformNode.parent;\n        }\n        while (transformNode = ancestors.pop()) {\n            transformNode.updateTransform();\n        }\n        return this.transform;\n    };\n    Transformable.prototype.setLocalTransform = function (m) {\n        if (!m) {\n            return;\n        }\n        var sx = m[0] * m[0] + m[1] * m[1];\n        var sy = m[2] * m[2] + m[3] * m[3];\n        var rotation = Math.atan2(m[1], m[0]);\n        var shearX = Math.PI / 2 + rotation - Math.atan2(m[3], m[2]);\n        sy = Math.sqrt(sy) * Math.cos(shearX);\n        sx = Math.sqrt(sx);\n        this.skewX = shearX;\n        this.skewY = 0;\n        this.rotation = -rotation;\n        this.x = +m[4];\n        this.y = +m[5];\n        this.scaleX = sx;\n        this.scaleY = sy;\n        this.originX = 0;\n        this.originY = 0;\n    };\n    Transformable.prototype.decomposeTransform = function () {\n        if (!this.transform) {\n            return;\n        }\n        var parent = this.parent;\n        var m = this.transform;\n        if (parent && parent.transform) {\n            parent.invTransform = parent.invTransform || matrix.create();\n            matrix.mul(tmpTransform, parent.invTransform, m);\n            m = tmpTransform;\n        }\n        var ox = this.originX;\n        var oy = this.originY;\n        if (ox || oy) {\n            originTransform[4] = ox;\n            originTransform[5] = oy;\n            matrix.mul(tmpTransform, m, originTransform);\n            tmpTransform[4] -= ox;\n            tmpTransform[5] -= oy;\n            m = tmpTransform;\n        }\n        this.setLocalTransform(m);\n    };\n    Transformable.prototype.getGlobalScale = function (out) {\n        var m = this.transform;\n        out = out || [];\n        if (!m) {\n            out[0] = 1;\n            out[1] = 1;\n            return out;\n        }\n        out[0] = Math.sqrt(m[0] * m[0] + m[1] * m[1]);\n        out[1] = Math.sqrt(m[2] * m[2] + m[3] * m[3]);\n        if (m[0] < 0) {\n            out[0] = -out[0];\n        }\n        if (m[3] < 0) {\n            out[1] = -out[1];\n        }\n        return out;\n    };\n    Transformable.prototype.transformCoordToLocal = function (x, y) {\n        var v2 = [x, y];\n        var invTransform = this.invTransform;\n        if (invTransform) {\n            vector.applyTransform(v2, v2, invTransform);\n        }\n        return v2;\n    };\n    Transformable.prototype.transformCoordToGlobal = function (x, y) {\n        var v2 = [x, y];\n        var transform = this.transform;\n        if (transform) {\n            vector.applyTransform(v2, v2, transform);\n        }\n        return v2;\n    };\n    Transformable.prototype.getLineScale = function () {\n        var m = this.transform;\n        return m && abs(m[0] - 1) > 1e-10 && abs(m[3] - 1) > 1e-10\n            ? Math.sqrt(abs(m[0] * m[3] - m[2] * m[1]))\n            : 1;\n    };\n    Transformable.prototype.copyTransform = function (source) {\n        copyTransform(this, source);\n    };\n    Transformable.getLocalTransform = function (target, m) {\n        m = m || [];\n        var ox = target.originX || 0;\n        var oy = target.originY || 0;\n        var sx = target.scaleX;\n        var sy = target.scaleY;\n        var ax = target.anchorX;\n        var ay = target.anchorY;\n        var rotation = target.rotation || 0;\n        var x = target.x;\n        var y = target.y;\n        var skewX = target.skewX ? Math.tan(target.skewX) : 0;\n        var skewY = target.skewY ? Math.tan(-target.skewY) : 0;\n        if (ox || oy || ax || ay) {\n            var dx = ox + ax;\n            var dy = oy + ay;\n            m[4] = -dx * sx - skewX * dy * sy;\n            m[5] = -dy * sy - skewY * dx * sx;\n        }\n        else {\n            m[4] = m[5] = 0;\n        }\n        m[0] = sx;\n        m[3] = sy;\n        m[1] = skewY * sx;\n        m[2] = skewX * sy;\n        rotation && matrix.rotate(m, m, rotation);\n        m[4] += ox + x;\n        m[5] += oy + y;\n        return m;\n    };\n    Transformable.initDefaultProps = (function () {\n        var proto = Transformable.prototype;\n        proto.scaleX =\n            proto.scaleY =\n                proto.globalScaleRatio = 1;\n        proto.x =\n            proto.y =\n                proto.originX =\n                    proto.originY =\n                        proto.skewX =\n                            proto.skewY =\n                                proto.rotation =\n                                    proto.anchorX =\n                                        proto.anchorY = 0;\n    })();\n    return Transformable;\n}());\n;\nexport var TRANSFORMABLE_PROPS = [\n    'x', 'y', 'originX', 'originY', 'anchorX', 'anchorY', 'rotation', 'scaleX', 'scaleY', 'skewX', 'skewY'\n];\nexport function copyTransform(target, source) {\n    for (var i = 0; i < TRANSFORMABLE_PROPS.length; i++) {\n        var propName = TRANSFORMABLE_PROPS[i];\n        target[propName] = source[propName];\n    }\n}\nexport default Transformable;\n","import BoundingRect from '../core/BoundingRect.js';\nimport LRU from '../core/LRU.js';\nimport { DEFAULT_FONT, platformApi } from '../core/platform.js';\nexport function getWidth(text, font) {\n    return measureWidth(ensureFontMeasureInfo(font), text);\n}\nexport function ensureFontMeasureInfo(font) {\n    if (!_fontMeasureInfoCache) {\n        _fontMeasureInfoCache = new LRU(100);\n    }\n    font = font || DEFAULT_FONT;\n    var measureInfo = _fontMeasureInfoCache.get(font);\n    if (!measureInfo) {\n        measureInfo = {\n            font: font,\n            strWidthCache: new LRU(500),\n            asciiWidthMap: null,\n            asciiWidthMapTried: false,\n            stWideCharWidth: platformApi.measureText('', font).width,\n            asciiCharWidth: platformApi.measureText('a', font).width\n        };\n        _fontMeasureInfoCache.put(font, measureInfo);\n    }\n    return measureInfo;\n}\nvar _fontMeasureInfoCache;\nfunction tryCreateASCIIWidthMap(font) {\n    if (_getASCIIWidthMapLongCount >= GET_ASCII_WIDTH_LONG_COUNT_MAX) {\n        return;\n    }\n    font = font || DEFAULT_FONT;\n    var asciiWidthMap = [];\n    var start = +(new Date());\n    for (var code = 0; code <= 127; code++) {\n        asciiWidthMap[code] = platformApi.measureText(String.fromCharCode(code), font).width;\n    }\n    var cost = +(new Date()) - start;\n    if (cost > 16) {\n        _getASCIIWidthMapLongCount = GET_ASCII_WIDTH_LONG_COUNT_MAX;\n    }\n    else if (cost > 2) {\n        _getASCIIWidthMapLongCount++;\n    }\n    return asciiWidthMap;\n}\nvar _getASCIIWidthMapLongCount = 0;\nvar GET_ASCII_WIDTH_LONG_COUNT_MAX = 5;\nexport function measureCharWidth(fontMeasureInfo, charCode) {\n    if (!fontMeasureInfo.asciiWidthMapTried) {\n        fontMeasureInfo.asciiWidthMap = tryCreateASCIIWidthMap(fontMeasureInfo.font);\n        fontMeasureInfo.asciiWidthMapTried = true;\n    }\n    return (0 <= charCode && charCode <= 127)\n        ? (fontMeasureInfo.asciiWidthMap != null\n            ? fontMeasureInfo.asciiWidthMap[charCode]\n            : fontMeasureInfo.asciiCharWidth)\n        : fontMeasureInfo.stWideCharWidth;\n}\nexport function measureWidth(fontMeasureInfo, text) {\n    var strWidthCache = fontMeasureInfo.strWidthCache;\n    var width = strWidthCache.get(text);\n    if (width == null) {\n        width = platformApi.measureText(text, fontMeasureInfo.font).width;\n        strWidthCache.put(text, width);\n    }\n    return width;\n}\nexport function innerGetBoundingRect(text, font, textAlign, textBaseline) {\n    var width = measureWidth(ensureFontMeasureInfo(font), text);\n    var height = getLineHeight(font);\n    var x = adjustTextX(0, width, textAlign);\n    var y = adjustTextY(0, height, textBaseline);\n    var rect = new BoundingRect(x, y, width, height);\n    return rect;\n}\nexport function getBoundingRect(text, font, textAlign, textBaseline) {\n    var textLines = ((text || '') + '').split('\\n');\n    var len = textLines.length;\n    if (len === 1) {\n        return innerGetBoundingRect(textLines[0], font, textAlign, textBaseline);\n    }\n    else {\n        var uniondRect = new BoundingRect(0, 0, 0, 0);\n        for (var i = 0; i < textLines.length; i++) {\n            var rect = innerGetBoundingRect(textLines[i], font, textAlign, textBaseline);\n            i === 0 ? uniondRect.copy(rect) : uniondRect.union(rect);\n        }\n        return uniondRect;\n    }\n}\nexport function adjustTextX(x, width, textAlign, inverse) {\n    if (textAlign === 'right') {\n        !inverse ? (x -= width) : (x += width);\n    }\n    else if (textAlign === 'center') {\n        !inverse ? (x -= width / 2) : (x += width / 2);\n    }\n    return x;\n}\nexport function adjustTextY(y, height, verticalAlign, inverse) {\n    if (verticalAlign === 'middle') {\n        !inverse ? (y -= height / 2) : (y += height / 2);\n    }\n    else if (verticalAlign === 'bottom') {\n        !inverse ? (y -= height) : (y += height);\n    }\n    return y;\n}\nexport function getLineHeight(font) {\n    return ensureFontMeasureInfo(font).stWideCharWidth;\n}\nexport function measureText(text, font) {\n    return platformApi.measureText(text, font);\n}\nexport function parsePercent(value, maxValue) {\n    if (typeof value === 'string') {\n        if (value.lastIndexOf('%') >= 0) {\n            return parseFloat(value) / 100 * maxValue;\n        }\n        return parseFloat(value);\n    }\n    return value;\n}\nexport function calculateTextPosition(out, opts, rect) {\n    var textPosition = opts.position || 'inside';\n    var distance = opts.distance != null ? opts.distance : 5;\n    var height = rect.height;\n    var width = rect.width;\n    var halfHeight = height / 2;\n    var x = rect.x;\n    var y = rect.y;\n    var textAlign = 'left';\n    var textVerticalAlign = 'top';\n    if (textPosition instanceof Array) {\n        x += parsePercent(textPosition[0], rect.width);\n        y += parsePercent(textPosition[1], rect.height);\n        textAlign = null;\n        textVerticalAlign = null;\n    }\n    else {\n        switch (textPosition) {\n            case 'left':\n                x -= distance;\n                y += halfHeight;\n                textAlign = 'right';\n                textVerticalAlign = 'middle';\n                break;\n            case 'right':\n                x += distance + width;\n                y += halfHeight;\n                textVerticalAlign = 'middle';\n                break;\n            case 'top':\n                x += width / 2;\n                y -= distance;\n                textAlign = 'center';\n                textVerticalAlign = 'bottom';\n                break;\n            case 'bottom':\n                x += width / 2;\n                y += height + distance;\n                textAlign = 'center';\n                break;\n            case 'inside':\n                x += width / 2;\n                y += halfHeight;\n                textAlign = 'center';\n                textVerticalAlign = 'middle';\n                break;\n            case 'insideLeft':\n                x += distance;\n                y += halfHeight;\n                textVerticalAlign = 'middle';\n                break;\n            case 'insideRight':\n                x += width - distance;\n                y += halfHeight;\n                textAlign = 'right';\n                textVerticalAlign = 'middle';\n                break;\n            case 'insideTop':\n                x += width / 2;\n                y += distance;\n                textAlign = 'center';\n                break;\n            case 'insideBottom':\n                x += width / 2;\n                y += height - distance;\n                textAlign = 'center';\n                textVerticalAlign = 'bottom';\n                break;\n            case 'insideTopLeft':\n                x += distance;\n                y += distance;\n                break;\n            case 'insideTopRight':\n                x += width - distance;\n                y += distance;\n                textAlign = 'right';\n                break;\n            case 'insideBottomLeft':\n                x += distance;\n                y += height - distance;\n                textVerticalAlign = 'bottom';\n                break;\n            case 'insideBottomRight':\n                x += width - distance;\n                y += height - distance;\n                textAlign = 'right';\n                textVerticalAlign = 'bottom';\n                break;\n        }\n    }\n    out = out || {};\n    out.x = x;\n    out.y = y;\n    out.align = textAlign;\n    out.verticalAlign = textVerticalAlign;\n    return out;\n}\n","import Transformable, { TRANSFORMABLE_PROPS } from './core/Transformable.js';\nimport Animator, { cloneValue } from './animation/Animator.js';\nimport BoundingRect from './core/BoundingRect.js';\nimport Eventful from './core/Eventful.js';\nimport { calculateTextPosition, parsePercent } from './contain/text.js';\nimport { guid, isObject, keys, extend, indexOf, logError, mixin, isArrayLike, isTypedArray, isGradientObject, filter, reduce } from './core/util.js';\nimport { LIGHT_LABEL_COLOR, DARK_LABEL_COLOR } from './config.js';\nimport { parse, stringify } from './tool/color.js';\nimport { REDRAW_BIT } from './graphic/constants.js';\nimport { invert } from './core/matrix.js';\nexport var PRESERVED_NORMAL_STATE = '__zr_normal__';\nvar PRIMARY_STATES_KEYS = TRANSFORMABLE_PROPS.concat(['ignore']);\nvar DEFAULT_ANIMATABLE_MAP = reduce(TRANSFORMABLE_PROPS, function (obj, key) {\n    obj[key] = true;\n    return obj;\n}, { ignore: false });\nvar tmpTextPosCalcRes = {};\nvar tmpBoundingRect = new BoundingRect(0, 0, 0, 0);\nvar tmpInnerTextTrans = [];\nvar Element = (function () {\n    function Element(props) {\n        this.id = guid();\n        this.animators = [];\n        this.currentStates = [];\n        this.states = {};\n        this._init(props);\n    }\n    Element.prototype._init = function (props) {\n        this.attr(props);\n    };\n    Element.prototype.drift = function (dx, dy, e) {\n        switch (this.draggable) {\n            case 'horizontal':\n                dy = 0;\n                break;\n            case 'vertical':\n                dx = 0;\n                break;\n        }\n        var m = this.transform;\n        if (!m) {\n            m = this.transform = [1, 0, 0, 1, 0, 0];\n        }\n        m[4] += dx;\n        m[5] += dy;\n        this.decomposeTransform();\n        this.markRedraw();\n    };\n    Element.prototype.beforeUpdate = function () { };\n    Element.prototype.afterUpdate = function () { };\n    Element.prototype.update = function () {\n        this.updateTransform();\n        if (this.__dirty) {\n            this.updateInnerText();\n        }\n    };\n    Element.prototype.updateInnerText = function (forceUpdate) {\n        var textEl = this._textContent;\n        if (textEl && (!textEl.ignore || forceUpdate)) {\n            if (!this.textConfig) {\n                this.textConfig = {};\n            }\n            var textConfig = this.textConfig;\n            var isLocal = textConfig.local;\n            var innerTransformable = textEl.innerTransformable;\n            var textAlign = void 0;\n            var textVerticalAlign = void 0;\n            var textStyleChanged = false;\n            innerTransformable.parent = isLocal ? this : null;\n            var innerOrigin = false;\n            innerTransformable.copyTransform(textEl);\n            var hasPosition = textConfig.position != null;\n            var autoOverflowArea = textConfig.autoOverflowArea;\n            var layoutRect = void 0;\n            if (autoOverflowArea || hasPosition) {\n                layoutRect = tmpBoundingRect;\n                if (textConfig.layoutRect) {\n                    layoutRect.copy(textConfig.layoutRect);\n                }\n                else {\n                    layoutRect.copy(this.getBoundingRect());\n                }\n                if (!isLocal) {\n                    layoutRect.applyTransform(this.transform);\n                }\n            }\n            if (hasPosition) {\n                if (this.calculateTextPosition) {\n                    this.calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);\n                }\n                else {\n                    calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);\n                }\n                innerTransformable.x = tmpTextPosCalcRes.x;\n                innerTransformable.y = tmpTextPosCalcRes.y;\n                textAlign = tmpTextPosCalcRes.align;\n                textVerticalAlign = tmpTextPosCalcRes.verticalAlign;\n                var textOrigin = textConfig.origin;\n                if (textOrigin && textConfig.rotation != null) {\n                    var relOriginX = void 0;\n                    var relOriginY = void 0;\n                    if (textOrigin === 'center') {\n                        relOriginX = layoutRect.width * 0.5;\n                        relOriginY = layoutRect.height * 0.5;\n                    }\n                    else {\n                        relOriginX = parsePercent(textOrigin[0], layoutRect.width);\n                        relOriginY = parsePercent(textOrigin[1], layoutRect.height);\n                    }\n                    innerOrigin = true;\n                    innerTransformable.originX = -innerTransformable.x + relOriginX + (isLocal ? 0 : layoutRect.x);\n                    innerTransformable.originY = -innerTransformable.y + relOriginY + (isLocal ? 0 : layoutRect.y);\n                }\n            }\n            if (textConfig.rotation != null) {\n                innerTransformable.rotation = textConfig.rotation;\n            }\n            var textOffset = textConfig.offset;\n            if (textOffset) {\n                innerTransformable.x += textOffset[0];\n                innerTransformable.y += textOffset[1];\n                if (!innerOrigin) {\n                    innerTransformable.originX = -textOffset[0];\n                    innerTransformable.originY = -textOffset[1];\n                }\n            }\n            var innerTextDefaultStyle = this._innerTextDefaultStyle || (this._innerTextDefaultStyle = {});\n            if (autoOverflowArea) {\n                var overflowRect = innerTextDefaultStyle.overflowRect =\n                    innerTextDefaultStyle.overflowRect || new BoundingRect(0, 0, 0, 0);\n                innerTransformable.getLocalTransform(tmpInnerTextTrans);\n                invert(tmpInnerTextTrans, tmpInnerTextTrans);\n                BoundingRect.copy(overflowRect, layoutRect);\n                overflowRect.applyTransform(tmpInnerTextTrans);\n            }\n            else {\n                innerTextDefaultStyle.overflowRect = null;\n            }\n            var isInside = textConfig.inside == null\n                ? (typeof textConfig.position === 'string' && textConfig.position.indexOf('inside') >= 0)\n                : textConfig.inside;\n            var textFill = void 0;\n            var textStroke = void 0;\n            var autoStroke = void 0;\n            if (isInside && this.canBeInsideText()) {\n                textFill = textConfig.insideFill;\n                textStroke = textConfig.insideStroke;\n                if (textFill == null || textFill === 'auto') {\n                    textFill = this.getInsideTextFill();\n                }\n                if (textStroke == null || textStroke === 'auto') {\n                    textStroke = this.getInsideTextStroke(textFill);\n                    autoStroke = true;\n                }\n            }\n            else {\n                textFill = textConfig.outsideFill;\n                textStroke = textConfig.outsideStroke;\n                if (textFill == null || textFill === 'auto') {\n                    textFill = this.getOutsideFill();\n                }\n                if (textStroke == null || textStroke === 'auto') {\n                    textStroke = this.getOutsideStroke(textFill);\n                    autoStroke = true;\n                }\n            }\n            textFill = textFill || '#000';\n            if (textFill !== innerTextDefaultStyle.fill\n                || textStroke !== innerTextDefaultStyle.stroke\n                || autoStroke !== innerTextDefaultStyle.autoStroke\n                || textAlign !== innerTextDefaultStyle.align\n                || textVerticalAlign !== innerTextDefaultStyle.verticalAlign) {\n                textStyleChanged = true;\n                innerTextDefaultStyle.fill = textFill;\n                innerTextDefaultStyle.stroke = textStroke;\n                innerTextDefaultStyle.autoStroke = autoStroke;\n                innerTextDefaultStyle.align = textAlign;\n                innerTextDefaultStyle.verticalAlign = textVerticalAlign;\n                textEl.setDefaultTextStyle(innerTextDefaultStyle);\n            }\n            textEl.__dirty |= REDRAW_BIT;\n            if (textStyleChanged) {\n                textEl.dirtyStyle(true);\n            }\n        }\n    };\n    Element.prototype.canBeInsideText = function () {\n        return true;\n    };\n    Element.prototype.getInsideTextFill = function () {\n        return '#fff';\n    };\n    Element.prototype.getInsideTextStroke = function (textFill) {\n        return '#000';\n    };\n    Element.prototype.getOutsideFill = function () {\n        return this.__zr && this.__zr.isDarkMode() ? LIGHT_LABEL_COLOR : DARK_LABEL_COLOR;\n    };\n    Element.prototype.getOutsideStroke = function (textFill) {\n        var backgroundColor = this.__zr && this.__zr.getBackgroundColor();\n        var colorArr = typeof backgroundColor === 'string' && parse(backgroundColor);\n        if (!colorArr) {\n            colorArr = [255, 255, 255, 1];\n        }\n        var alpha = colorArr[3];\n        var isDark = this.__zr.isDarkMode();\n        for (var i = 0; i < 3; i++) {\n            colorArr[i] = colorArr[i] * alpha + (isDark ? 0 : 255) * (1 - alpha);\n        }\n        colorArr[3] = 1;\n        return stringify(colorArr, 'rgba');\n    };\n    Element.prototype.traverse = function (cb, context) { };\n    Element.prototype.attrKV = function (key, value) {\n        if (key === 'textConfig') {\n            this.setTextConfig(value);\n        }\n        else if (key === 'textContent') {\n            this.setTextContent(value);\n        }\n        else if (key === 'clipPath') {\n            this.setClipPath(value);\n        }\n        else if (key === 'extra') {\n            this.extra = this.extra || {};\n            extend(this.extra, value);\n        }\n        else {\n            this[key] = value;\n        }\n    };\n    Element.prototype.hide = function () {\n        this.ignore = true;\n        this.markRedraw();\n    };\n    Element.prototype.show = function () {\n        this.ignore = false;\n        this.markRedraw();\n    };\n    Element.prototype.attr = function (keyOrObj, value) {\n        if (typeof keyOrObj === 'string') {\n            this.attrKV(keyOrObj, value);\n        }\n        else if (isObject(keyOrObj)) {\n            var obj = keyOrObj;\n            var keysArr = keys(obj);\n            for (var i = 0; i < keysArr.length; i++) {\n                var key = keysArr[i];\n                this.attrKV(key, keyOrObj[key]);\n            }\n        }\n        this.markRedraw();\n        return this;\n    };\n    Element.prototype.saveCurrentToNormalState = function (toState) {\n        this._innerSaveToNormal(toState);\n        var normalState = this._normalState;\n        for (var i = 0; i < this.animators.length; i++) {\n            var animator = this.animators[i];\n            var fromStateTransition = animator.__fromStateTransition;\n            if (animator.getLoop() || fromStateTransition && fromStateTransition !== PRESERVED_NORMAL_STATE) {\n                continue;\n            }\n            var targetName = animator.targetName;\n            var target = targetName\n                ? normalState[targetName] : normalState;\n            animator.saveTo(target);\n        }\n    };\n    Element.prototype._innerSaveToNormal = function (toState) {\n        var normalState = this._normalState;\n        if (!normalState) {\n            normalState = this._normalState = {};\n        }\n        if (toState.textConfig && !normalState.textConfig) {\n            normalState.textConfig = this.textConfig;\n        }\n        this._savePrimaryToNormal(toState, normalState, PRIMARY_STATES_KEYS);\n    };\n    Element.prototype._savePrimaryToNormal = function (toState, normalState, primaryKeys) {\n        for (var i = 0; i < primaryKeys.length; i++) {\n            var key = primaryKeys[i];\n            if (toState[key] != null && !(key in normalState)) {\n                normalState[key] = this[key];\n            }\n        }\n    };\n    Element.prototype.hasState = function () {\n        return this.currentStates.length > 0;\n    };\n    Element.prototype.getState = function (name) {\n        return this.states[name];\n    };\n    Element.prototype.ensureState = function (name) {\n        var states = this.states;\n        if (!states[name]) {\n            states[name] = {};\n        }\n        return states[name];\n    };\n    Element.prototype.clearStates = function (noAnimation) {\n        this.useState(PRESERVED_NORMAL_STATE, false, noAnimation);\n    };\n    Element.prototype.useState = function (stateName, keepCurrentStates, noAnimation, forceUseHoverLayer) {\n        var toNormalState = stateName === PRESERVED_NORMAL_STATE;\n        var hasStates = this.hasState();\n        if (!hasStates && toNormalState) {\n            return;\n        }\n        var currentStates = this.currentStates;\n        var animationCfg = this.stateTransition;\n        if (indexOf(currentStates, stateName) >= 0 && (keepCurrentStates || currentStates.length === 1)) {\n            return;\n        }\n        var state;\n        if (this.stateProxy && !toNormalState) {\n            state = this.stateProxy(stateName);\n        }\n        if (!state) {\n            state = (this.states && this.states[stateName]);\n        }\n        if (!state && !toNormalState) {\n            logError(\"State \" + stateName + \" not exists.\");\n            return;\n        }\n        if (!toNormalState) {\n            this.saveCurrentToNormalState(state);\n        }\n        var useHoverLayer = !!((state && state.hoverLayer) || forceUseHoverLayer);\n        if (useHoverLayer) {\n            this._toggleHoverLayerFlag(true);\n        }\n        this._applyStateObj(stateName, state, this._normalState, keepCurrentStates, !noAnimation && !this.__inHover && animationCfg && animationCfg.duration > 0, animationCfg);\n        var textContent = this._textContent;\n        var textGuide = this._textGuide;\n        if (textContent) {\n            textContent.useState(stateName, keepCurrentStates, noAnimation, useHoverLayer);\n        }\n        if (textGuide) {\n            textGuide.useState(stateName, keepCurrentStates, noAnimation, useHoverLayer);\n        }\n        if (toNormalState) {\n            this.currentStates = [];\n            this._normalState = {};\n        }\n        else {\n            if (!keepCurrentStates) {\n                this.currentStates = [stateName];\n            }\n            else {\n                this.currentStates.push(stateName);\n            }\n        }\n        this._updateAnimationTargets();\n        this.markRedraw();\n        if (!useHoverLayer && this.__inHover) {\n            this._toggleHoverLayerFlag(false);\n            this.__dirty &= ~REDRAW_BIT;\n        }\n        return state;\n    };\n    Element.prototype.useStates = function (states, noAnimation, forceUseHoverLayer) {\n        if (!states.length) {\n            this.clearStates();\n        }\n        else {\n            var stateObjects = [];\n            var currentStates = this.currentStates;\n            var len = states.length;\n            var notChange = len === currentStates.length;\n            if (notChange) {\n                for (var i = 0; i < len; i++) {\n                    if (states[i] !== currentStates[i]) {\n                        notChange = false;\n                        break;\n                    }\n                }\n            }\n            if (notChange) {\n                return;\n            }\n            for (var i = 0; i < len; i++) {\n                var stateName = states[i];\n                var stateObj = void 0;\n                if (this.stateProxy) {\n                    stateObj = this.stateProxy(stateName, states);\n                }\n                if (!stateObj) {\n                    stateObj = this.states[stateName];\n                }\n                if (stateObj) {\n                    stateObjects.push(stateObj);\n                }\n            }\n            var lastStateObj = stateObjects[len - 1];\n            var useHoverLayer = !!((lastStateObj && lastStateObj.hoverLayer) || forceUseHoverLayer);\n            if (useHoverLayer) {\n                this._toggleHoverLayerFlag(true);\n            }\n            var mergedState = this._mergeStates(stateObjects);\n            var animationCfg = this.stateTransition;\n            this.saveCurrentToNormalState(mergedState);\n            this._applyStateObj(states.join(','), mergedState, this._normalState, false, !noAnimation && !this.__inHover && animationCfg && animationCfg.duration > 0, animationCfg);\n            var textContent = this._textContent;\n            var textGuide = this._textGuide;\n            if (textContent) {\n                textContent.useStates(states, noAnimation, useHoverLayer);\n            }\n            if (textGuide) {\n                textGuide.useStates(states, noAnimation, useHoverLayer);\n            }\n            this._updateAnimationTargets();\n            this.currentStates = states.slice();\n            this.markRedraw();\n            if (!useHoverLayer && this.__inHover) {\n                this._toggleHoverLayerFlag(false);\n                this.__dirty &= ~REDRAW_BIT;\n            }\n        }\n    };\n    Element.prototype.isSilent = function () {\n        var el = this;\n        while (el) {\n            if (el.silent) {\n                return true;\n            }\n            var hostEl = el.__hostTarget;\n            el = hostEl ? (el.ignoreHostSilent ? null : hostEl) : el.parent;\n        }\n        return false;\n    };\n    Element.prototype._updateAnimationTargets = function () {\n        for (var i = 0; i < this.animators.length; i++) {\n            var animator = this.animators[i];\n            if (animator.targetName) {\n                animator.changeTarget(this[animator.targetName]);\n            }\n        }\n    };\n    Element.prototype.removeState = function (state) {\n        var idx = indexOf(this.currentStates, state);\n        if (idx >= 0) {\n            var currentStates = this.currentStates.slice();\n            currentStates.splice(idx, 1);\n            this.useStates(currentStates);\n        }\n    };\n    Element.prototype.replaceState = function (oldState, newState, forceAdd) {\n        var currentStates = this.currentStates.slice();\n        var idx = indexOf(currentStates, oldState);\n        var newStateExists = indexOf(currentStates, newState) >= 0;\n        if (idx >= 0) {\n            if (!newStateExists) {\n                currentStates[idx] = newState;\n            }\n            else {\n                currentStates.splice(idx, 1);\n            }\n        }\n        else if (forceAdd && !newStateExists) {\n            currentStates.push(newState);\n        }\n        this.useStates(currentStates);\n    };\n    Element.prototype.toggleState = function (state, enable) {\n        if (enable) {\n            this.useState(state, true);\n        }\n        else {\n            this.removeState(state);\n        }\n    };\n    Element.prototype._mergeStates = function (states) {\n        var mergedState = {};\n        var mergedTextConfig;\n        for (var i = 0; i < states.length; i++) {\n            var state = states[i];\n            extend(mergedState, state);\n            if (state.textConfig) {\n                mergedTextConfig = mergedTextConfig || {};\n                extend(mergedTextConfig, state.textConfig);\n            }\n        }\n        if (mergedTextConfig) {\n            mergedState.textConfig = mergedTextConfig;\n        }\n        return mergedState;\n    };\n    Element.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n        var needsRestoreToNormal = !(state && keepCurrentStates);\n        if (state && state.textConfig) {\n            this.textConfig = extend({}, keepCurrentStates ? this.textConfig : normalState.textConfig);\n            extend(this.textConfig, state.textConfig);\n        }\n        else if (needsRestoreToNormal) {\n            if (normalState.textConfig) {\n                this.textConfig = normalState.textConfig;\n            }\n        }\n        var transitionTarget = {};\n        var hasTransition = false;\n        for (var i = 0; i < PRIMARY_STATES_KEYS.length; i++) {\n            var key = PRIMARY_STATES_KEYS[i];\n            var propNeedsTransition = transition && DEFAULT_ANIMATABLE_MAP[key];\n            if (state && state[key] != null) {\n                if (propNeedsTransition) {\n                    hasTransition = true;\n                    transitionTarget[key] = state[key];\n                }\n                else {\n                    this[key] = state[key];\n                }\n            }\n            else if (needsRestoreToNormal) {\n                if (normalState[key] != null) {\n                    if (propNeedsTransition) {\n                        hasTransition = true;\n                        transitionTarget[key] = normalState[key];\n                    }\n                    else {\n                        this[key] = normalState[key];\n                    }\n                }\n            }\n        }\n        if (!transition) {\n            for (var i = 0; i < this.animators.length; i++) {\n                var animator = this.animators[i];\n                var targetName = animator.targetName;\n                if (!animator.getLoop()) {\n                    animator.__changeFinalValue(targetName\n                        ? (state || normalState)[targetName]\n                        : (state || normalState));\n                }\n            }\n        }\n        if (hasTransition) {\n            this._transitionState(stateName, transitionTarget, animationCfg);\n        }\n    };\n    Element.prototype._attachComponent = function (componentEl) {\n        if (componentEl.__zr && !componentEl.__hostTarget) {\n            if (process.env.NODE_ENV !== 'production') {\n                throw new Error('Text element has been added to zrender.');\n            }\n            return;\n        }\n        if (componentEl === this) {\n            if (process.env.NODE_ENV !== 'production') {\n                throw new Error('Recursive component attachment.');\n            }\n            return;\n        }\n        var zr = this.__zr;\n        if (zr) {\n            componentEl.addSelfToZr(zr);\n        }\n        componentEl.__zr = zr;\n        componentEl.__hostTarget = this;\n    };\n    Element.prototype._detachComponent = function (componentEl) {\n        if (componentEl.__zr) {\n            componentEl.removeSelfFromZr(componentEl.__zr);\n        }\n        componentEl.__zr = null;\n        componentEl.__hostTarget = null;\n    };\n    Element.prototype.getClipPath = function () {\n        return this._clipPath;\n    };\n    Element.prototype.setClipPath = function (clipPath) {\n        if (this._clipPath && this._clipPath !== clipPath) {\n            this.removeClipPath();\n        }\n        this._attachComponent(clipPath);\n        this._clipPath = clipPath;\n        this.markRedraw();\n    };\n    Element.prototype.removeClipPath = function () {\n        var clipPath = this._clipPath;\n        if (clipPath) {\n            this._detachComponent(clipPath);\n            this._clipPath = null;\n            this.markRedraw();\n        }\n    };\n    Element.prototype.getTextContent = function () {\n        return this._textContent;\n    };\n    Element.prototype.setTextContent = function (textEl) {\n        var previousTextContent = this._textContent;\n        if (previousTextContent === textEl) {\n            return;\n        }\n        if (previousTextContent && previousTextContent !== textEl) {\n            this.removeTextContent();\n        }\n        if (process.env.NODE_ENV !== 'production') {\n            if (textEl.__zr && !textEl.__hostTarget) {\n                throw new Error('Text element has been added to zrender.');\n            }\n        }\n        textEl.innerTransformable = new Transformable();\n        this._attachComponent(textEl);\n        this._textContent = textEl;\n        this.markRedraw();\n    };\n    Element.prototype.setTextConfig = function (cfg) {\n        if (!this.textConfig) {\n            this.textConfig = {};\n        }\n        extend(this.textConfig, cfg);\n        this.markRedraw();\n    };\n    Element.prototype.removeTextConfig = function () {\n        this.textConfig = null;\n        this.markRedraw();\n    };\n    Element.prototype.removeTextContent = function () {\n        var textEl = this._textContent;\n        if (textEl) {\n            textEl.innerTransformable = null;\n            this._detachComponent(textEl);\n            this._textContent = null;\n            this._innerTextDefaultStyle = null;\n            this.markRedraw();\n        }\n    };\n    Element.prototype.getTextGuideLine = function () {\n        return this._textGuide;\n    };\n    Element.prototype.setTextGuideLine = function (guideLine) {\n        if (this._textGuide && this._textGuide !== guideLine) {\n            this.removeTextGuideLine();\n        }\n        this._attachComponent(guideLine);\n        this._textGuide = guideLine;\n        this.markRedraw();\n    };\n    Element.prototype.removeTextGuideLine = function () {\n        var textGuide = this._textGuide;\n        if (textGuide) {\n            this._detachComponent(textGuide);\n            this._textGuide = null;\n            this.markRedraw();\n        }\n    };\n    Element.prototype.markRedraw = function () {\n        this.__dirty |= REDRAW_BIT;\n        var zr = this.__zr;\n        if (zr) {\n            if (this.__inHover) {\n                zr.refreshHover();\n            }\n            else {\n                zr.refresh();\n            }\n        }\n        if (this.__hostTarget) {\n            this.__hostTarget.markRedraw();\n        }\n    };\n    Element.prototype.dirty = function () {\n        this.markRedraw();\n    };\n    Element.prototype._toggleHoverLayerFlag = function (inHover) {\n        this.__inHover = inHover;\n        var textContent = this._textContent;\n        var textGuide = this._textGuide;\n        if (textContent) {\n            textContent.__inHover = inHover;\n        }\n        if (textGuide) {\n            textGuide.__inHover = inHover;\n        }\n    };\n    Element.prototype.addSelfToZr = function (zr) {\n        if (this.__zr === zr) {\n            return;\n        }\n        this.__zr = zr;\n        var animators = this.animators;\n        if (animators) {\n            for (var i = 0; i < animators.length; i++) {\n                zr.animation.addAnimator(animators[i]);\n            }\n        }\n        if (this._clipPath) {\n            this._clipPath.addSelfToZr(zr);\n        }\n        if (this._textContent) {\n            this._textContent.addSelfToZr(zr);\n        }\n        if (this._textGuide) {\n            this._textGuide.addSelfToZr(zr);\n        }\n    };\n    Element.prototype.removeSelfFromZr = function (zr) {\n        if (!this.__zr) {\n            return;\n        }\n        this.__zr = null;\n        var animators = this.animators;\n        if (animators) {\n            for (var i = 0; i < animators.length; i++) {\n                zr.animation.removeAnimator(animators[i]);\n            }\n        }\n        if (this._clipPath) {\n            this._clipPath.removeSelfFromZr(zr);\n        }\n        if (this._textContent) {\n            this._textContent.removeSelfFromZr(zr);\n        }\n        if (this._textGuide) {\n            this._textGuide.removeSelfFromZr(zr);\n        }\n    };\n    Element.prototype.animate = function (key, loop, allowDiscreteAnimation) {\n        var target = key ? this[key] : this;\n        if (process.env.NODE_ENV !== 'production') {\n            if (!target) {\n                logError('Property \"'\n                    + key\n                    + '\" is not existed in element '\n                    + this.id);\n                return;\n            }\n        }\n        var animator = new Animator(target, loop, allowDiscreteAnimation);\n        key && (animator.targetName = key);\n        this.addAnimator(animator, key);\n        return animator;\n    };\n    Element.prototype.addAnimator = function (animator, key) {\n        var zr = this.__zr;\n        var el = this;\n        animator.during(function () {\n            el.updateDuringAnimation(key);\n        }).done(function () {\n            var animators = el.animators;\n            var idx = indexOf(animators, animator);\n            if (idx >= 0) {\n                animators.splice(idx, 1);\n            }\n        });\n        this.animators.push(animator);\n        if (zr) {\n            zr.animation.addAnimator(animator);\n        }\n        zr && zr.wakeUp();\n    };\n    Element.prototype.updateDuringAnimation = function (key) {\n        this.markRedraw();\n    };\n    Element.prototype.stopAnimation = function (scope, forwardToLast) {\n        var animators = this.animators;\n        var len = animators.length;\n        var leftAnimators = [];\n        for (var i = 0; i < len; i++) {\n            var animator = animators[i];\n            if (!scope || scope === animator.scope) {\n                animator.stop(forwardToLast);\n            }\n            else {\n                leftAnimators.push(animator);\n            }\n        }\n        this.animators = leftAnimators;\n        return this;\n    };\n    Element.prototype.animateTo = function (target, cfg, animationProps) {\n        animateTo(this, target, cfg, animationProps);\n    };\n    Element.prototype.animateFrom = function (target, cfg, animationProps) {\n        animateTo(this, target, cfg, animationProps, true);\n    };\n    Element.prototype._transitionState = function (stateName, target, cfg, animationProps) {\n        var animators = animateTo(this, target, cfg, animationProps);\n        for (var i = 0; i < animators.length; i++) {\n            animators[i].__fromStateTransition = stateName;\n        }\n    };\n    Element.prototype.getBoundingRect = function () {\n        return null;\n    };\n    Element.prototype.getPaintRect = function () {\n        return null;\n    };\n    Element.initDefaultProps = (function () {\n        var elProto = Element.prototype;\n        elProto.type = 'element';\n        elProto.name = '';\n        elProto.ignore =\n            elProto.silent =\n                elProto.ignoreHostSilent =\n                    elProto.isGroup =\n                        elProto.draggable =\n                            elProto.dragging =\n                                elProto.ignoreClip =\n                                    elProto.__inHover = false;\n        elProto.__dirty = REDRAW_BIT;\n        var logs = {};\n        function logDeprecatedError(key, xKey, yKey) {\n            if (!logs[key + xKey + yKey]) {\n                console.warn(\"DEPRECATED: '\" + key + \"' has been deprecated. use '\" + xKey + \"', '\" + yKey + \"' instead\");\n                logs[key + xKey + yKey] = true;\n            }\n        }\n        function createLegacyProperty(key, privateKey, xKey, yKey) {\n            Object.defineProperty(elProto, key, {\n                get: function () {\n                    if (process.env.NODE_ENV !== 'production') {\n                        logDeprecatedError(key, xKey, yKey);\n                    }\n                    if (!this[privateKey]) {\n                        var pos = this[privateKey] = [];\n                        enhanceArray(this, pos);\n                    }\n                    return this[privateKey];\n                },\n                set: function (pos) {\n                    if (process.env.NODE_ENV !== 'production') {\n                        logDeprecatedError(key, xKey, yKey);\n                    }\n                    this[xKey] = pos[0];\n                    this[yKey] = pos[1];\n                    this[privateKey] = pos;\n                    enhanceArray(this, pos);\n                }\n            });\n            function enhanceArray(self, pos) {\n                Object.defineProperty(pos, 0, {\n                    get: function () {\n                        return self[xKey];\n                    },\n                    set: function (val) {\n                        self[xKey] = val;\n                    }\n                });\n                Object.defineProperty(pos, 1, {\n                    get: function () {\n                        return self[yKey];\n                    },\n                    set: function (val) {\n                        self[yKey] = val;\n                    }\n                });\n            }\n        }\n        if (Object.defineProperty) {\n            createLegacyProperty('position', '_legacyPos', 'x', 'y');\n            createLegacyProperty('scale', '_legacyScale', 'scaleX', 'scaleY');\n            createLegacyProperty('origin', '_legacyOrigin', 'originX', 'originY');\n        }\n    })();\n    return Element;\n}());\nmixin(Element, Eventful);\nmixin(Element, Transformable);\nfunction animateTo(animatable, target, cfg, animationProps, reverse) {\n    cfg = cfg || {};\n    var animators = [];\n    animateToShallow(animatable, '', animatable, target, cfg, animationProps, animators, reverse);\n    var finishCount = animators.length;\n    var doneHappened = false;\n    var cfgDone = cfg.done;\n    var cfgAborted = cfg.aborted;\n    var doneCb = function () {\n        doneHappened = true;\n        finishCount--;\n        if (finishCount <= 0) {\n            doneHappened\n                ? (cfgDone && cfgDone())\n                : (cfgAborted && cfgAborted());\n        }\n    };\n    var abortedCb = function () {\n        finishCount--;\n        if (finishCount <= 0) {\n            doneHappened\n                ? (cfgDone && cfgDone())\n                : (cfgAborted && cfgAborted());\n        }\n    };\n    if (!finishCount) {\n        cfgDone && cfgDone();\n    }\n    if (animators.length > 0 && cfg.during) {\n        animators[0].during(function (target, percent) {\n            cfg.during(percent);\n        });\n    }\n    for (var i = 0; i < animators.length; i++) {\n        var animator = animators[i];\n        if (doneCb) {\n            animator.done(doneCb);\n        }\n        if (abortedCb) {\n            animator.aborted(abortedCb);\n        }\n        if (cfg.force) {\n            animator.duration(cfg.duration);\n        }\n        animator.start(cfg.easing);\n    }\n    return animators;\n}\nfunction copyArrShallow(source, target, len) {\n    for (var i = 0; i < len; i++) {\n        source[i] = target[i];\n    }\n}\nfunction is2DArray(value) {\n    return isArrayLike(value[0]);\n}\nfunction copyValue(target, source, key) {\n    if (isArrayLike(source[key])) {\n        if (!isArrayLike(target[key])) {\n            target[key] = [];\n        }\n        if (isTypedArray(source[key])) {\n            var len = source[key].length;\n            if (target[key].length !== len) {\n                target[key] = new (source[key].constructor)(len);\n                copyArrShallow(target[key], source[key], len);\n            }\n        }\n        else {\n            var sourceArr = source[key];\n            var targetArr = target[key];\n            var len0 = sourceArr.length;\n            if (is2DArray(sourceArr)) {\n                var len1 = sourceArr[0].length;\n                for (var i = 0; i < len0; i++) {\n                    if (!targetArr[i]) {\n                        targetArr[i] = Array.prototype.slice.call(sourceArr[i]);\n                    }\n                    else {\n                        copyArrShallow(targetArr[i], sourceArr[i], len1);\n                    }\n                }\n            }\n            else {\n                copyArrShallow(targetArr, sourceArr, len0);\n            }\n            targetArr.length = sourceArr.length;\n        }\n    }\n    else {\n        target[key] = source[key];\n    }\n}\nfunction isValueSame(val1, val2) {\n    return val1 === val2\n        || isArrayLike(val1) && isArrayLike(val2) && is1DArraySame(val1, val2);\n}\nfunction is1DArraySame(arr0, arr1) {\n    var len = arr0.length;\n    if (len !== arr1.length) {\n        return false;\n    }\n    for (var i = 0; i < len; i++) {\n        if (arr0[i] !== arr1[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction animateToShallow(animatable, topKey, animateObj, target, cfg, animationProps, animators, reverse) {\n    var targetKeys = keys(target);\n    var duration = cfg.duration;\n    var delay = cfg.delay;\n    var additive = cfg.additive;\n    var setToFinal = cfg.setToFinal;\n    var animateAll = !isObject(animationProps);\n    var existsAnimators = animatable.animators;\n    var animationKeys = [];\n    for (var k = 0; k < targetKeys.length; k++) {\n        var innerKey = targetKeys[k];\n        var targetVal = target[innerKey];\n        if (targetVal != null && animateObj[innerKey] != null\n            && (animateAll || animationProps[innerKey])) {\n            if (isObject(targetVal)\n                && !isArrayLike(targetVal)\n                && !isGradientObject(targetVal)) {\n                if (topKey) {\n                    if (!reverse) {\n                        animateObj[innerKey] = targetVal;\n                        animatable.updateDuringAnimation(topKey);\n                    }\n                    continue;\n                }\n                animateToShallow(animatable, innerKey, animateObj[innerKey], targetVal, cfg, animationProps && animationProps[innerKey], animators, reverse);\n            }\n            else {\n                animationKeys.push(innerKey);\n            }\n        }\n        else if (!reverse) {\n            animateObj[innerKey] = targetVal;\n            animatable.updateDuringAnimation(topKey);\n            animationKeys.push(innerKey);\n        }\n    }\n    var keyLen = animationKeys.length;\n    if (!additive && keyLen) {\n        for (var i = 0; i < existsAnimators.length; i++) {\n            var animator = existsAnimators[i];\n            if (animator.targetName === topKey) {\n                var allAborted = animator.stopTracks(animationKeys);\n                if (allAborted) {\n                    var idx = indexOf(existsAnimators, animator);\n                    existsAnimators.splice(idx, 1);\n                }\n            }\n        }\n    }\n    if (!cfg.force) {\n        animationKeys = filter(animationKeys, function (key) { return !isValueSame(target[key], animateObj[key]); });\n        keyLen = animationKeys.length;\n    }\n    if (keyLen > 0\n        || (cfg.force && !animators.length)) {\n        var revertedSource = void 0;\n        var reversedTarget = void 0;\n        var sourceClone = void 0;\n        if (reverse) {\n            reversedTarget = {};\n            if (setToFinal) {\n                revertedSource = {};\n            }\n            for (var i = 0; i < keyLen; i++) {\n                var innerKey = animationKeys[i];\n                reversedTarget[innerKey] = animateObj[innerKey];\n                if (setToFinal) {\n                    revertedSource[innerKey] = target[innerKey];\n                }\n                else {\n                    animateObj[innerKey] = target[innerKey];\n                }\n            }\n        }\n        else if (setToFinal) {\n            sourceClone = {};\n            for (var i = 0; i < keyLen; i++) {\n                var innerKey = animationKeys[i];\n                sourceClone[innerKey] = cloneValue(animateObj[innerKey]);\n                copyValue(animateObj, target, innerKey);\n            }\n        }\n        var animator = new Animator(animateObj, false, false, additive ? filter(existsAnimators, function (animator) { return animator.targetName === topKey; }) : null);\n        animator.targetName = topKey;\n        if (cfg.scope) {\n            animator.scope = cfg.scope;\n        }\n        if (setToFinal && revertedSource) {\n            animator.whenWithKeys(0, revertedSource, animationKeys);\n        }\n        if (sourceClone) {\n            animator.whenWithKeys(0, sourceClone, animationKeys);\n        }\n        animator.whenWithKeys(duration == null ? 500 : duration, reverse ? reversedTarget : target, animationKeys).delay(delay || 0);\n        animatable.addAnimator(animator, topKey);\n        animators.push(animator);\n    }\n}\nexport default Element;\n","import { __extends } from \"tslib\";\nimport * as zrUtil from '../core/util.js';\nimport Element from '../Element.js';\nimport BoundingRect from '../core/BoundingRect.js';\nvar Group = (function (_super) {\n    __extends(Group, _super);\n    function Group(opts) {\n        var _this = _super.call(this) || this;\n        _this.isGroup = true;\n        _this._children = [];\n        _this.attr(opts);\n        return _this;\n    }\n    Group.prototype.childrenRef = function () {\n        return this._children;\n    };\n    Group.prototype.children = function () {\n        return this._children.slice();\n    };\n    Group.prototype.childAt = function (idx) {\n        return this._children[idx];\n    };\n    Group.prototype.childOfName = function (name) {\n        var children = this._children;\n        for (var i = 0; i < children.length; i++) {\n            if (children[i].name === name) {\n                return children[i];\n            }\n        }\n    };\n    Group.prototype.childCount = function () {\n        return this._children.length;\n    };\n    Group.prototype.add = function (child) {\n        if (child) {\n            if (child !== this && child.parent !== this) {\n                this._children.push(child);\n                this._doAdd(child);\n            }\n            if (process.env.NODE_ENV !== 'production') {\n                if (child.__hostTarget) {\n                    throw 'This elemenet has been used as an attachment';\n                }\n            }\n        }\n        return this;\n    };\n    Group.prototype.addBefore = function (child, nextSibling) {\n        if (child && child !== this && child.parent !== this\n            && nextSibling && nextSibling.parent === this) {\n            var children = this._children;\n            var idx = children.indexOf(nextSibling);\n            if (idx >= 0) {\n                children.splice(idx, 0, child);\n                this._doAdd(child);\n            }\n        }\n        return this;\n    };\n    Group.prototype.replace = function (oldChild, newChild) {\n        var idx = zrUtil.indexOf(this._children, oldChild);\n        if (idx >= 0) {\n            this.replaceAt(newChild, idx);\n        }\n        return this;\n    };\n    Group.prototype.replaceAt = function (child, index) {\n        var children = this._children;\n        var old = children[index];\n        if (child && child !== this && child.parent !== this && child !== old) {\n            children[index] = child;\n            old.parent = null;\n            var zr = this.__zr;\n            if (zr) {\n                old.removeSelfFromZr(zr);\n            }\n            this._doAdd(child);\n        }\n        return this;\n    };\n    Group.prototype._doAdd = function (child) {\n        if (child.parent) {\n            child.parent.remove(child);\n        }\n        child.parent = this;\n        var zr = this.__zr;\n        if (zr && zr !== child.__zr) {\n            child.addSelfToZr(zr);\n        }\n        zr && zr.refresh();\n    };\n    Group.prototype.remove = function (child) {\n        var zr = this.__zr;\n        var children = this._children;\n        var idx = zrUtil.indexOf(children, child);\n        if (idx < 0) {\n            return this;\n        }\n        children.splice(idx, 1);\n        child.parent = null;\n        if (zr) {\n            child.removeSelfFromZr(zr);\n        }\n        zr && zr.refresh();\n        return this;\n    };\n    Group.prototype.removeAll = function () {\n        var children = this._children;\n        var zr = this.__zr;\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            if (zr) {\n                child.removeSelfFromZr(zr);\n            }\n            child.parent = null;\n        }\n        children.length = 0;\n        return this;\n    };\n    Group.prototype.eachChild = function (cb, context) {\n        var children = this._children;\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            cb.call(context, child, i);\n        }\n        return this;\n    };\n    Group.prototype.traverse = function (cb, context) {\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            var stopped = cb.call(context, child);\n            if (child.isGroup && !stopped) {\n                child.traverse(cb, context);\n            }\n        }\n        return this;\n    };\n    Group.prototype.addSelfToZr = function (zr) {\n        _super.prototype.addSelfToZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            child.addSelfToZr(zr);\n        }\n    };\n    Group.prototype.removeSelfFromZr = function (zr) {\n        _super.prototype.removeSelfFromZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            child.removeSelfFromZr(zr);\n        }\n    };\n    Group.prototype.getBoundingRect = function (includeChildren) {\n        var tmpRect = new BoundingRect(0, 0, 0, 0);\n        var children = includeChildren || this._children;\n        var tmpMat = [];\n        var rect = null;\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            if (child.ignore || child.invisible) {\n                continue;\n            }\n            var childRect = child.getBoundingRect();\n            var transform = child.getLocalTransform(tmpMat);\n            if (transform) {\n                BoundingRect.applyTransform(tmpRect, childRect, transform);\n                rect = rect || tmpRect.clone();\n                rect.union(tmpRect);\n            }\n            else {\n                rect = rect || childRect.clone();\n                rect.union(childRect);\n            }\n        }\n        return rect || tmpRect;\n    };\n    return Group;\n}(Element));\nGroup.prototype.type = 'group';\nexport default Group;\n","/*!\n* ZRender, a high performance 2d drawing library.\n*\n* Copyright (c) 2013, Baidu Inc.\n* All rights reserved.\n*\n* LICENSE\n* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt\n*/\nimport env from './core/env.js';\nimport * as zrUtil from './core/util.js';\nimport Handler from './Handler.js';\nimport Storage from './Storage.js';\nimport Animation, { getTime } from './animation/Animation.js';\nimport HandlerProxy from './dom/HandlerProxy.js';\nimport { lum } from './tool/color.js';\nimport { DARK_MODE_THRESHOLD } from './config.js';\nimport Group from './graphic/Group.js';\nvar painterCtors = {};\nvar instances = {};\nfunction delInstance(id) {\n    delete instances[id];\n}\nfunction isDarkMode(backgroundColor) {\n    if (!backgroundColor) {\n        return false;\n    }\n    if (typeof backgroundColor === 'string') {\n        return lum(backgroundColor, 1) < DARK_MODE_THRESHOLD;\n    }\n    else if (backgroundColor.colorStops) {\n        var colorStops = backgroundColor.colorStops;\n        var totalLum = 0;\n        var len = colorStops.length;\n        for (var i = 0; i < len; i++) {\n            totalLum += lum(colorStops[i].color, 1);\n        }\n        totalLum /= len;\n        return totalLum < DARK_MODE_THRESHOLD;\n    }\n    return false;\n}\nvar ZRender = (function () {\n    function ZRender(id, dom, opts) {\n        var _this = this;\n        this._sleepAfterStill = 10;\n        this._stillFrameAccum = 0;\n        this._needsRefresh = true;\n        this._needsRefreshHover = true;\n        this._darkMode = false;\n        opts = opts || {};\n        this.dom = dom;\n        this.id = id;\n        var storage = new Storage();\n        var rendererType = opts.renderer || 'canvas';\n        if (!painterCtors[rendererType]) {\n            rendererType = zrUtil.keys(painterCtors)[0];\n        }\n        if (process.env.NODE_ENV !== 'production') {\n            if (!painterCtors[rendererType]) {\n                throw new Error(\"Renderer '\" + rendererType + \"' is not imported. Please import it first.\");\n            }\n        }\n        opts.useDirtyRect = opts.useDirtyRect == null\n            ? false\n            : opts.useDirtyRect;\n        var painter = new painterCtors[rendererType](dom, storage, opts, id);\n        var ssrMode = opts.ssr || painter.ssrOnly;\n        this.storage = storage;\n        this.painter = painter;\n        var handlerProxy = (!env.node && !env.worker && !ssrMode)\n            ? new HandlerProxy(painter.getViewportRoot(), painter.root)\n            : null;\n        var useCoarsePointer = opts.useCoarsePointer;\n        var usePointerSize = (useCoarsePointer == null || useCoarsePointer === 'auto')\n            ? env.touchEventsSupported\n            : !!useCoarsePointer;\n        var defaultPointerSize = 44;\n        var pointerSize;\n        if (usePointerSize) {\n            pointerSize = zrUtil.retrieve2(opts.pointerSize, defaultPointerSize);\n        }\n        this.handler = new Handler(storage, painter, handlerProxy, painter.root, pointerSize);\n        this.animation = new Animation({\n            stage: {\n                update: ssrMode ? null : function () { return _this._flush(true); }\n            }\n        });\n        if (!ssrMode) {\n            this.animation.start();\n        }\n    }\n    ZRender.prototype.add = function (el) {\n        if (this._disposed || !el) {\n            return;\n        }\n        this.storage.addRoot(el);\n        el.addSelfToZr(this);\n        this.refresh();\n    };\n    ZRender.prototype.remove = function (el) {\n        if (this._disposed || !el) {\n            return;\n        }\n        this.storage.delRoot(el);\n        el.removeSelfFromZr(this);\n        this.refresh();\n    };\n    ZRender.prototype.configLayer = function (zLevel, config) {\n        if (this._disposed) {\n            return;\n        }\n        if (this.painter.configLayer) {\n            this.painter.configLayer(zLevel, config);\n        }\n        this.refresh();\n    };\n    ZRender.prototype.setBackgroundColor = function (backgroundColor) {\n        if (this._disposed) {\n            return;\n        }\n        if (this.painter.setBackgroundColor) {\n            this.painter.setBackgroundColor(backgroundColor);\n        }\n        this.refresh();\n        this._backgroundColor = backgroundColor;\n        this._darkMode = isDarkMode(backgroundColor);\n    };\n    ZRender.prototype.getBackgroundColor = function () {\n        return this._backgroundColor;\n    };\n    ZRender.prototype.setDarkMode = function (darkMode) {\n        this._darkMode = darkMode;\n    };\n    ZRender.prototype.isDarkMode = function () {\n        return this._darkMode;\n    };\n    ZRender.prototype.refreshImmediately = function (fromInside) {\n        if (this._disposed) {\n            return;\n        }\n        if (!fromInside) {\n            this.animation.update(true);\n        }\n        this._needsRefresh = false;\n        this.painter.refresh();\n        this._needsRefresh = false;\n    };\n    ZRender.prototype.refresh = function () {\n        if (this._disposed) {\n            return;\n        }\n        this._needsRefresh = true;\n        this.animation.start();\n    };\n    ZRender.prototype.flush = function () {\n        if (this._disposed) {\n            return;\n        }\n        this._flush(false);\n    };\n    ZRender.prototype._flush = function (fromInside) {\n        var triggerRendered;\n        var start = getTime();\n        if (this._needsRefresh) {\n            triggerRendered = true;\n            this.refreshImmediately(fromInside);\n        }\n        if (this._needsRefreshHover) {\n            triggerRendered = true;\n            this.refreshHoverImmediately();\n        }\n        var end = getTime();\n        if (triggerRendered) {\n            this._stillFrameAccum = 0;\n            this.trigger('rendered', {\n                elapsedTime: end - start\n            });\n        }\n        else if (this._sleepAfterStill > 0) {\n            this._stillFrameAccum++;\n            if (this._stillFrameAccum > this._sleepAfterStill) {\n                this.animation.stop();\n            }\n        }\n    };\n    ZRender.prototype.setSleepAfterStill = function (stillFramesCount) {\n        this._sleepAfterStill = stillFramesCount;\n    };\n    ZRender.prototype.wakeUp = function () {\n        if (this._disposed) {\n            return;\n        }\n        this.animation.start();\n        this._stillFrameAccum = 0;\n    };\n    ZRender.prototype.refreshHover = function () {\n        this._needsRefreshHover = true;\n    };\n    ZRender.prototype.refreshHoverImmediately = function () {\n        if (this._disposed) {\n            return;\n        }\n        this._needsRefreshHover = false;\n        if (this.painter.refreshHover && this.painter.getType() === 'canvas') {\n            this.painter.refreshHover();\n        }\n    };\n    ZRender.prototype.resize = function (opts) {\n        if (this._disposed) {\n            return;\n        }\n        opts = opts || {};\n        this.painter.resize(opts.width, opts.height);\n        this.handler.resize();\n    };\n    ZRender.prototype.clearAnimation = function () {\n        if (this._disposed) {\n            return;\n        }\n        this.animation.clear();\n    };\n    ZRender.prototype.getWidth = function () {\n        if (this._disposed) {\n            return;\n        }\n        return this.painter.getWidth();\n    };\n    ZRender.prototype.getHeight = function () {\n        if (this._disposed) {\n            return;\n        }\n        return this.painter.getHeight();\n    };\n    ZRender.prototype.setCursorStyle = function (cursorStyle) {\n        if (this._disposed) {\n            return;\n        }\n        this.handler.setCursorStyle(cursorStyle);\n    };\n    ZRender.prototype.findHover = function (x, y) {\n        if (this._disposed) {\n            return;\n        }\n        return this.handler.findHover(x, y);\n    };\n    ZRender.prototype.on = function (eventName, eventHandler, context) {\n        if (!this._disposed) {\n            this.handler.on(eventName, eventHandler, context);\n        }\n        return this;\n    };\n    ZRender.prototype.off = function (eventName, eventHandler) {\n        if (this._disposed) {\n            return;\n        }\n        this.handler.off(eventName, eventHandler);\n    };\n    ZRender.prototype.trigger = function (eventName, event) {\n        if (this._disposed) {\n            return;\n        }\n        this.handler.trigger(eventName, event);\n    };\n    ZRender.prototype.clear = function () {\n        if (this._disposed) {\n            return;\n        }\n        var roots = this.storage.getRoots();\n        for (var i = 0; i < roots.length; i++) {\n            if (roots[i] instanceof Group) {\n                roots[i].removeSelfFromZr(this);\n            }\n        }\n        this.storage.delAllRoots();\n        this.painter.clear();\n    };\n    ZRender.prototype.dispose = function () {\n        if (this._disposed) {\n            return;\n        }\n        this.animation.stop();\n        this.clear();\n        this.storage.dispose();\n        this.painter.dispose();\n        this.handler.dispose();\n        this.animation =\n            this.storage =\n                this.painter =\n                    this.handler = null;\n        this._disposed = true;\n        delInstance(this.id);\n    };\n    return ZRender;\n}());\nexport function init(dom, opts) {\n    var zr = new ZRender(zrUtil.guid(), dom, opts);\n    instances[zr.id] = zr;\n    return zr;\n}\nexport function dispose(zr) {\n    zr.dispose();\n}\nexport function disposeAll() {\n    for (var key in instances) {\n        if (instances.hasOwnProperty(key)) {\n            instances[key].dispose();\n        }\n    }\n    instances = {};\n}\nexport function getInstance(id) {\n    return instances[id];\n}\nexport function registerPainter(name, Ctor) {\n    painterCtors[name] = Ctor;\n}\nvar ssrDataGetter;\nexport function getElementSSRData(el) {\n    if (typeof ssrDataGetter === 'function') {\n        return ssrDataGetter(el);\n    }\n}\nexport function registerSSRDataGetter(getter) {\n    ssrDataGetter = getter;\n}\nexport var version = '6.0.0';\n;\n","import { __extends } from \"tslib\";\nimport Element from '../Element.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport { keys, extend, createObject } from '../core/util.js';\nimport { REDRAW_BIT, STYLE_CHANGED_BIT } from './constants.js';\nvar STYLE_MAGIC_KEY = '__zr_style_' + Math.round((Math.random() * 10));\nexport var DEFAULT_COMMON_STYLE = {\n    shadowBlur: 0,\n    shadowOffsetX: 0,\n    shadowOffsetY: 0,\n    shadowColor: '#000',\n    opacity: 1,\n    blend: 'source-over'\n};\nexport var DEFAULT_COMMON_ANIMATION_PROPS = {\n    style: {\n        shadowBlur: true,\n        shadowOffsetX: true,\n        shadowOffsetY: true,\n        shadowColor: true,\n        opacity: true\n    }\n};\nDEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY] = true;\nvar PRIMARY_STATES_KEYS = ['z', 'z2', 'invisible'];\nvar PRIMARY_STATES_KEYS_IN_HOVER_LAYER = ['invisible'];\nvar Displayable = (function (_super) {\n    __extends(Displayable, _super);\n    function Displayable(props) {\n        return _super.call(this, props) || this;\n    }\n    Displayable.prototype._init = function (props) {\n        var keysArr = keys(props);\n        for (var i = 0; i < keysArr.length; i++) {\n            var key = keysArr[i];\n            if (key === 'style') {\n                this.useStyle(props[key]);\n            }\n            else {\n                _super.prototype.attrKV.call(this, key, props[key]);\n            }\n        }\n        if (!this.style) {\n            this.useStyle({});\n        }\n    };\n    Displayable.prototype.beforeBrush = function () { };\n    Displayable.prototype.afterBrush = function () { };\n    Displayable.prototype.innerBeforeBrush = function () { };\n    Displayable.prototype.innerAfterBrush = function () { };\n    Displayable.prototype.shouldBePainted = function (viewWidth, viewHeight, considerClipPath, considerAncestors) {\n        var m = this.transform;\n        if (this.ignore\n            || this.invisible\n            || this.style.opacity === 0\n            || (this.culling\n                && isDisplayableCulled(this, viewWidth, viewHeight))\n            || (m && !m[0] && !m[3])) {\n            return false;\n        }\n        if (considerClipPath && this.__clipPaths && this.__clipPaths.length) {\n            for (var i = 0; i < this.__clipPaths.length; ++i) {\n                if (this.__clipPaths[i].isZeroArea()) {\n                    return false;\n                }\n            }\n        }\n        if (considerAncestors && this.parent) {\n            var parent_1 = this.parent;\n            while (parent_1) {\n                if (parent_1.ignore) {\n                    return false;\n                }\n                parent_1 = parent_1.parent;\n            }\n        }\n        return true;\n    };\n    Displayable.prototype.contain = function (x, y) {\n        return this.rectContain(x, y);\n    };\n    Displayable.prototype.traverse = function (cb, context) {\n        cb.call(context, this);\n    };\n    Displayable.prototype.rectContain = function (x, y) {\n        var coord = this.transformCoordToLocal(x, y);\n        var rect = this.getBoundingRect();\n        return rect.contain(coord[0], coord[1]);\n    };\n    Displayable.prototype.getPaintRect = function () {\n        var rect = this._paintRect;\n        if (!this._paintRect || this.__dirty) {\n            var transform = this.transform;\n            var elRect = this.getBoundingRect();\n            var style = this.style;\n            var shadowSize = style.shadowBlur || 0;\n            var shadowOffsetX = style.shadowOffsetX || 0;\n            var shadowOffsetY = style.shadowOffsetY || 0;\n            rect = this._paintRect || (this._paintRect = new BoundingRect(0, 0, 0, 0));\n            if (transform) {\n                BoundingRect.applyTransform(rect, elRect, transform);\n            }\n            else {\n                rect.copy(elRect);\n            }\n            if (shadowSize || shadowOffsetX || shadowOffsetY) {\n                rect.width += shadowSize * 2 + Math.abs(shadowOffsetX);\n                rect.height += shadowSize * 2 + Math.abs(shadowOffsetY);\n                rect.x = Math.min(rect.x, rect.x + shadowOffsetX - shadowSize);\n                rect.y = Math.min(rect.y, rect.y + shadowOffsetY - shadowSize);\n            }\n            var tolerance = this.dirtyRectTolerance;\n            if (!rect.isZero()) {\n                rect.x = Math.floor(rect.x - tolerance);\n                rect.y = Math.floor(rect.y - tolerance);\n                rect.width = Math.ceil(rect.width + 1 + tolerance * 2);\n                rect.height = Math.ceil(rect.height + 1 + tolerance * 2);\n            }\n        }\n        return rect;\n    };\n    Displayable.prototype.setPrevPaintRect = function (paintRect) {\n        if (paintRect) {\n            this._prevPaintRect = this._prevPaintRect || new BoundingRect(0, 0, 0, 0);\n            this._prevPaintRect.copy(paintRect);\n        }\n        else {\n            this._prevPaintRect = null;\n        }\n    };\n    Displayable.prototype.getPrevPaintRect = function () {\n        return this._prevPaintRect;\n    };\n    Displayable.prototype.animateStyle = function (loop) {\n        return this.animate('style', loop);\n    };\n    Displayable.prototype.updateDuringAnimation = function (targetKey) {\n        if (targetKey === 'style') {\n            this.dirtyStyle();\n        }\n        else {\n            this.markRedraw();\n        }\n    };\n    Displayable.prototype.attrKV = function (key, value) {\n        if (key !== 'style') {\n            _super.prototype.attrKV.call(this, key, value);\n        }\n        else {\n            if (!this.style) {\n                this.useStyle(value);\n            }\n            else {\n                this.setStyle(value);\n            }\n        }\n    };\n    Displayable.prototype.setStyle = function (keyOrObj, value) {\n        if (typeof keyOrObj === 'string') {\n            this.style[keyOrObj] = value;\n        }\n        else {\n            extend(this.style, keyOrObj);\n        }\n        this.dirtyStyle();\n        return this;\n    };\n    Displayable.prototype.dirtyStyle = function (notRedraw) {\n        if (!notRedraw) {\n            this.markRedraw();\n        }\n        this.__dirty |= STYLE_CHANGED_BIT;\n        if (this._rect) {\n            this._rect = null;\n        }\n    };\n    Displayable.prototype.dirty = function () {\n        this.dirtyStyle();\n    };\n    Displayable.prototype.styleChanged = function () {\n        return !!(this.__dirty & STYLE_CHANGED_BIT);\n    };\n    Displayable.prototype.styleUpdated = function () {\n        this.__dirty &= ~STYLE_CHANGED_BIT;\n    };\n    Displayable.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_COMMON_STYLE, obj);\n    };\n    Displayable.prototype.useStyle = function (obj) {\n        if (!obj[STYLE_MAGIC_KEY]) {\n            obj = this.createStyle(obj);\n        }\n        if (this.__inHover) {\n            this.__hoverStyle = obj;\n        }\n        else {\n            this.style = obj;\n        }\n        this.dirtyStyle();\n    };\n    Displayable.prototype.isStyleObject = function (obj) {\n        return obj[STYLE_MAGIC_KEY];\n    };\n    Displayable.prototype._innerSaveToNormal = function (toState) {\n        _super.prototype._innerSaveToNormal.call(this, toState);\n        var normalState = this._normalState;\n        if (toState.style && !normalState.style) {\n            normalState.style = this._mergeStyle(this.createStyle(), this.style);\n        }\n        this._savePrimaryToNormal(toState, normalState, PRIMARY_STATES_KEYS);\n    };\n    Displayable.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n        _super.prototype._applyStateObj.call(this, stateName, state, normalState, keepCurrentStates, transition, animationCfg);\n        var needsRestoreToNormal = !(state && keepCurrentStates);\n        var targetStyle;\n        if (state && state.style) {\n            if (transition) {\n                if (keepCurrentStates) {\n                    targetStyle = state.style;\n                }\n                else {\n                    targetStyle = this._mergeStyle(this.createStyle(), normalState.style);\n                    this._mergeStyle(targetStyle, state.style);\n                }\n            }\n            else {\n                targetStyle = this._mergeStyle(this.createStyle(), keepCurrentStates ? this.style : normalState.style);\n                this._mergeStyle(targetStyle, state.style);\n            }\n        }\n        else if (needsRestoreToNormal) {\n            targetStyle = normalState.style;\n        }\n        if (targetStyle) {\n            if (transition) {\n                var sourceStyle = this.style;\n                this.style = this.createStyle(needsRestoreToNormal ? {} : sourceStyle);\n                if (needsRestoreToNormal) {\n                    var changedKeys = keys(sourceStyle);\n                    for (var i = 0; i < changedKeys.length; i++) {\n                        var key = changedKeys[i];\n                        if (key in targetStyle) {\n                            targetStyle[key] = targetStyle[key];\n                            this.style[key] = sourceStyle[key];\n                        }\n                    }\n                }\n                var targetKeys = keys(targetStyle);\n                for (var i = 0; i < targetKeys.length; i++) {\n                    var key = targetKeys[i];\n                    this.style[key] = this.style[key];\n                }\n                this._transitionState(stateName, {\n                    style: targetStyle\n                }, animationCfg, this.getAnimationStyleProps());\n            }\n            else {\n                this.useStyle(targetStyle);\n            }\n        }\n        var statesKeys = this.__inHover ? PRIMARY_STATES_KEYS_IN_HOVER_LAYER : PRIMARY_STATES_KEYS;\n        for (var i = 0; i < statesKeys.length; i++) {\n            var key = statesKeys[i];\n            if (state && state[key] != null) {\n                this[key] = state[key];\n            }\n            else if (needsRestoreToNormal) {\n                if (normalState[key] != null) {\n                    this[key] = normalState[key];\n                }\n            }\n        }\n    };\n    Displayable.prototype._mergeStates = function (states) {\n        var mergedState = _super.prototype._mergeStates.call(this, states);\n        var mergedStyle;\n        for (var i = 0; i < states.length; i++) {\n            var state = states[i];\n            if (state.style) {\n                mergedStyle = mergedStyle || {};\n                this._mergeStyle(mergedStyle, state.style);\n            }\n        }\n        if (mergedStyle) {\n            mergedState.style = mergedStyle;\n        }\n        return mergedState;\n    };\n    Displayable.prototype._mergeStyle = function (targetStyle, sourceStyle) {\n        extend(targetStyle, sourceStyle);\n        return targetStyle;\n    };\n    Displayable.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_COMMON_ANIMATION_PROPS;\n    };\n    Displayable.initDefaultProps = (function () {\n        var dispProto = Displayable.prototype;\n        dispProto.type = 'displayable';\n        dispProto.invisible = false;\n        dispProto.z = 0;\n        dispProto.z2 = 0;\n        dispProto.zlevel = 0;\n        dispProto.culling = false;\n        dispProto.cursor = 'pointer';\n        dispProto.rectHover = false;\n        dispProto.incremental = false;\n        dispProto._rect = null;\n        dispProto.dirtyRectTolerance = 0;\n        dispProto.__dirty = REDRAW_BIT | STYLE_CHANGED_BIT;\n    })();\n    return Displayable;\n}(Element));\nvar tmpRect = new BoundingRect(0, 0, 0, 0);\nvar viewRect = new BoundingRect(0, 0, 0, 0);\nfunction isDisplayableCulled(el, width, height) {\n    tmpRect.copy(el.getBoundingRect());\n    if (el.transform) {\n        tmpRect.applyTransform(el.transform);\n    }\n    viewRect.width = width;\n    viewRect.height = height;\n    return !tmpRect.intersect(viewRect);\n}\nexport default Displayable;\n","import * as vec2 from './vector.js';\nimport * as curve from './curve.js';\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI2 = Math.PI * 2;\nvar start = vec2.create();\nvar end = vec2.create();\nvar extremity = vec2.create();\nexport function fromPoints(points, min, max) {\n    if (points.length === 0) {\n        return;\n    }\n    var p = points[0];\n    var left = p[0];\n    var right = p[0];\n    var top = p[1];\n    var bottom = p[1];\n    for (var i = 1; i < points.length; i++) {\n        p = points[i];\n        left = mathMin(left, p[0]);\n        right = mathMax(right, p[0]);\n        top = mathMin(top, p[1]);\n        bottom = mathMax(bottom, p[1]);\n    }\n    min[0] = left;\n    min[1] = top;\n    max[0] = right;\n    max[1] = bottom;\n}\nexport function fromLine(x0, y0, x1, y1, min, max) {\n    min[0] = mathMin(x0, x1);\n    min[1] = mathMin(y0, y1);\n    max[0] = mathMax(x0, x1);\n    max[1] = mathMax(y0, y1);\n}\nvar xDim = [];\nvar yDim = [];\nexport function fromCubic(x0, y0, x1, y1, x2, y2, x3, y3, min, max) {\n    var cubicExtrema = curve.cubicExtrema;\n    var cubicAt = curve.cubicAt;\n    var n = cubicExtrema(x0, x1, x2, x3, xDim);\n    min[0] = Infinity;\n    min[1] = Infinity;\n    max[0] = -Infinity;\n    max[1] = -Infinity;\n    for (var i = 0; i < n; i++) {\n        var x = cubicAt(x0, x1, x2, x3, xDim[i]);\n        min[0] = mathMin(x, min[0]);\n        max[0] = mathMax(x, max[0]);\n    }\n    n = cubicExtrema(y0, y1, y2, y3, yDim);\n    for (var i = 0; i < n; i++) {\n        var y = cubicAt(y0, y1, y2, y3, yDim[i]);\n        min[1] = mathMin(y, min[1]);\n        max[1] = mathMax(y, max[1]);\n    }\n    min[0] = mathMin(x0, min[0]);\n    max[0] = mathMax(x0, max[0]);\n    min[0] = mathMin(x3, min[0]);\n    max[0] = mathMax(x3, max[0]);\n    min[1] = mathMin(y0, min[1]);\n    max[1] = mathMax(y0, max[1]);\n    min[1] = mathMin(y3, min[1]);\n    max[1] = mathMax(y3, max[1]);\n}\nexport function fromQuadratic(x0, y0, x1, y1, x2, y2, min, max) {\n    var quadraticExtremum = curve.quadraticExtremum;\n    var quadraticAt = curve.quadraticAt;\n    var tx = mathMax(mathMin(quadraticExtremum(x0, x1, x2), 1), 0);\n    var ty = mathMax(mathMin(quadraticExtremum(y0, y1, y2), 1), 0);\n    var x = quadraticAt(x0, x1, x2, tx);\n    var y = quadraticAt(y0, y1, y2, ty);\n    min[0] = mathMin(x0, x2, x);\n    min[1] = mathMin(y0, y2, y);\n    max[0] = mathMax(x0, x2, x);\n    max[1] = mathMax(y0, y2, y);\n}\nexport function fromArc(x, y, rx, ry, startAngle, endAngle, anticlockwise, min, max) {\n    var vec2Min = vec2.min;\n    var vec2Max = vec2.max;\n    var diff = Math.abs(startAngle - endAngle);\n    if (diff % PI2 < 1e-4 && diff > 1e-4) {\n        min[0] = x - rx;\n        min[1] = y - ry;\n        max[0] = x + rx;\n        max[1] = y + ry;\n        return;\n    }\n    start[0] = mathCos(startAngle) * rx + x;\n    start[1] = mathSin(startAngle) * ry + y;\n    end[0] = mathCos(endAngle) * rx + x;\n    end[1] = mathSin(endAngle) * ry + y;\n    vec2Min(min, start, end);\n    vec2Max(max, start, end);\n    startAngle = startAngle % (PI2);\n    if (startAngle < 0) {\n        startAngle = startAngle + PI2;\n    }\n    endAngle = endAngle % (PI2);\n    if (endAngle < 0) {\n        endAngle = endAngle + PI2;\n    }\n    if (startAngle > endAngle && !anticlockwise) {\n        endAngle += PI2;\n    }\n    else if (startAngle < endAngle && anticlockwise) {\n        startAngle += PI2;\n    }\n    if (anticlockwise) {\n        var tmp = endAngle;\n        endAngle = startAngle;\n        startAngle = tmp;\n    }\n    for (var angle = 0; angle < endAngle; angle += Math.PI / 2) {\n        if (angle > startAngle) {\n            extremity[0] = mathCos(angle) * rx + x;\n            extremity[1] = mathSin(angle) * ry + y;\n            vec2Min(min, extremity, min);\n            vec2Max(max, extremity, max);\n        }\n    }\n}\n","import * as vec2 from './vector.js';\nimport BoundingRect from './BoundingRect.js';\nimport { devicePixelRatio as dpr } from '../config.js';\nimport { fromLine, fromCubic, fromQuadratic, fromArc } from './bbox.js';\nimport { cubicLength, cubicSubdivide, quadraticLength, quadraticSubdivide } from './curve.js';\nvar CMD = {\n    M: 1,\n    L: 2,\n    C: 3,\n    Q: 4,\n    A: 5,\n    Z: 6,\n    R: 7\n};\nvar tmpOutX = [];\nvar tmpOutY = [];\nvar min = [];\nvar max = [];\nvar min2 = [];\nvar max2 = [];\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathCos = Math.cos;\nvar mathSin = Math.sin;\nvar mathAbs = Math.abs;\nvar PI = Math.PI;\nvar PI2 = PI * 2;\nvar hasTypedArray = typeof Float32Array !== 'undefined';\nvar tmpAngles = [];\nfunction modPI2(radian) {\n    var n = Math.round(radian / PI * 1e8) / 1e8;\n    return (n % 2) * PI;\n}\nexport function normalizeArcAngles(angles, anticlockwise) {\n    var newStartAngle = modPI2(angles[0]);\n    if (newStartAngle < 0) {\n        newStartAngle += PI2;\n    }\n    var delta = newStartAngle - angles[0];\n    var newEndAngle = angles[1];\n    newEndAngle += delta;\n    if (!anticlockwise && newEndAngle - newStartAngle >= PI2) {\n        newEndAngle = newStartAngle + PI2;\n    }\n    else if (anticlockwise && newStartAngle - newEndAngle >= PI2) {\n        newEndAngle = newStartAngle - PI2;\n    }\n    else if (!anticlockwise && newStartAngle > newEndAngle) {\n        newEndAngle = newStartAngle + (PI2 - modPI2(newStartAngle - newEndAngle));\n    }\n    else if (anticlockwise && newStartAngle < newEndAngle) {\n        newEndAngle = newStartAngle - (PI2 - modPI2(newEndAngle - newStartAngle));\n    }\n    angles[0] = newStartAngle;\n    angles[1] = newEndAngle;\n}\nvar PathProxy = (function () {\n    function PathProxy(notSaveData) {\n        this.dpr = 1;\n        this._xi = 0;\n        this._yi = 0;\n        this._x0 = 0;\n        this._y0 = 0;\n        this._len = 0;\n        if (notSaveData) {\n            this._saveData = false;\n        }\n        if (this._saveData) {\n            this.data = [];\n        }\n    }\n    PathProxy.prototype.increaseVersion = function () {\n        this._version++;\n    };\n    PathProxy.prototype.getVersion = function () {\n        return this._version;\n    };\n    PathProxy.prototype.setScale = function (sx, sy, segmentIgnoreThreshold) {\n        segmentIgnoreThreshold = segmentIgnoreThreshold || 0;\n        if (segmentIgnoreThreshold > 0) {\n            this._ux = mathAbs(segmentIgnoreThreshold / dpr / sx) || 0;\n            this._uy = mathAbs(segmentIgnoreThreshold / dpr / sy) || 0;\n        }\n    };\n    PathProxy.prototype.setDPR = function (dpr) {\n        this.dpr = dpr;\n    };\n    PathProxy.prototype.setContext = function (ctx) {\n        this._ctx = ctx;\n    };\n    PathProxy.prototype.getContext = function () {\n        return this._ctx;\n    };\n    PathProxy.prototype.beginPath = function () {\n        this._ctx && this._ctx.beginPath();\n        this.reset();\n        return this;\n    };\n    PathProxy.prototype.reset = function () {\n        if (this._saveData) {\n            this._len = 0;\n        }\n        if (this._pathSegLen) {\n            this._pathSegLen = null;\n            this._pathLen = 0;\n        }\n        this._version++;\n    };\n    PathProxy.prototype.moveTo = function (x, y) {\n        this._drawPendingPt();\n        this.addData(CMD.M, x, y);\n        this._ctx && this._ctx.moveTo(x, y);\n        this._x0 = x;\n        this._y0 = y;\n        this._xi = x;\n        this._yi = y;\n        return this;\n    };\n    PathProxy.prototype.lineTo = function (x, y) {\n        var dx = mathAbs(x - this._xi);\n        var dy = mathAbs(y - this._yi);\n        var exceedUnit = dx > this._ux || dy > this._uy;\n        this.addData(CMD.L, x, y);\n        if (this._ctx && exceedUnit) {\n            this._ctx.lineTo(x, y);\n        }\n        if (exceedUnit) {\n            this._xi = x;\n            this._yi = y;\n            this._pendingPtDist = 0;\n        }\n        else {\n            var d2 = dx * dx + dy * dy;\n            if (d2 > this._pendingPtDist) {\n                this._pendingPtX = x;\n                this._pendingPtY = y;\n                this._pendingPtDist = d2;\n            }\n        }\n        return this;\n    };\n    PathProxy.prototype.bezierCurveTo = function (x1, y1, x2, y2, x3, y3) {\n        this._drawPendingPt();\n        this.addData(CMD.C, x1, y1, x2, y2, x3, y3);\n        if (this._ctx) {\n            this._ctx.bezierCurveTo(x1, y1, x2, y2, x3, y3);\n        }\n        this._xi = x3;\n        this._yi = y3;\n        return this;\n    };\n    PathProxy.prototype.quadraticCurveTo = function (x1, y1, x2, y2) {\n        this._drawPendingPt();\n        this.addData(CMD.Q, x1, y1, x2, y2);\n        if (this._ctx) {\n            this._ctx.quadraticCurveTo(x1, y1, x2, y2);\n        }\n        this._xi = x2;\n        this._yi = y2;\n        return this;\n    };\n    PathProxy.prototype.arc = function (cx, cy, r, startAngle, endAngle, anticlockwise) {\n        this._drawPendingPt();\n        tmpAngles[0] = startAngle;\n        tmpAngles[1] = endAngle;\n        normalizeArcAngles(tmpAngles, anticlockwise);\n        startAngle = tmpAngles[0];\n        endAngle = tmpAngles[1];\n        var delta = endAngle - startAngle;\n        this.addData(CMD.A, cx, cy, r, r, startAngle, delta, 0, anticlockwise ? 0 : 1);\n        this._ctx && this._ctx.arc(cx, cy, r, startAngle, endAngle, anticlockwise);\n        this._xi = mathCos(endAngle) * r + cx;\n        this._yi = mathSin(endAngle) * r + cy;\n        return this;\n    };\n    PathProxy.prototype.arcTo = function (x1, y1, x2, y2, radius) {\n        this._drawPendingPt();\n        if (this._ctx) {\n            this._ctx.arcTo(x1, y1, x2, y2, radius);\n        }\n        return this;\n    };\n    PathProxy.prototype.rect = function (x, y, w, h) {\n        this._drawPendingPt();\n        this._ctx && this._ctx.rect(x, y, w, h);\n        this.addData(CMD.R, x, y, w, h);\n        return this;\n    };\n    PathProxy.prototype.closePath = function () {\n        this._drawPendingPt();\n        this.addData(CMD.Z);\n        var ctx = this._ctx;\n        var x0 = this._x0;\n        var y0 = this._y0;\n        if (ctx) {\n            ctx.closePath();\n        }\n        this._xi = x0;\n        this._yi = y0;\n        return this;\n    };\n    PathProxy.prototype.fill = function (ctx) {\n        ctx && ctx.fill();\n        this.toStatic();\n    };\n    PathProxy.prototype.stroke = function (ctx) {\n        ctx && ctx.stroke();\n        this.toStatic();\n    };\n    PathProxy.prototype.len = function () {\n        return this._len;\n    };\n    PathProxy.prototype.setData = function (data) {\n        if (!this._saveData) {\n            return;\n        }\n        var len = data.length;\n        if (!(this.data && this.data.length === len) && hasTypedArray) {\n            this.data = new Float32Array(len);\n        }\n        for (var i = 0; i < len; i++) {\n            this.data[i] = data[i];\n        }\n        this._len = len;\n    };\n    PathProxy.prototype.appendPath = function (path) {\n        if (!this._saveData) {\n            return;\n        }\n        if (!(path instanceof Array)) {\n            path = [path];\n        }\n        var len = path.length;\n        var appendSize = 0;\n        var offset = this._len;\n        for (var i = 0; i < len; i++) {\n            appendSize += path[i].len();\n        }\n        var oldData = this.data;\n        if (hasTypedArray && (oldData instanceof Float32Array || !oldData)) {\n            this.data = new Float32Array(offset + appendSize);\n            if (offset > 0 && oldData) {\n                for (var k = 0; k < offset; k++) {\n                    this.data[k] = oldData[k];\n                }\n            }\n        }\n        for (var i = 0; i < len; i++) {\n            var appendPathData = path[i].data;\n            for (var k = 0; k < appendPathData.length; k++) {\n                this.data[offset++] = appendPathData[k];\n            }\n        }\n        this._len = offset;\n    };\n    PathProxy.prototype.addData = function (cmd, a, b, c, d, e, f, g, h) {\n        if (!this._saveData) {\n            return;\n        }\n        var data = this.data;\n        if (this._len + arguments.length > data.length) {\n            this._expandData();\n            data = this.data;\n        }\n        for (var i = 0; i < arguments.length; i++) {\n            data[this._len++] = arguments[i];\n        }\n    };\n    PathProxy.prototype._drawPendingPt = function () {\n        if (this._pendingPtDist > 0) {\n            this._ctx && this._ctx.lineTo(this._pendingPtX, this._pendingPtY);\n            this._pendingPtDist = 0;\n        }\n    };\n    PathProxy.prototype._expandData = function () {\n        if (!(this.data instanceof Array)) {\n            var newData = [];\n            for (var i = 0; i < this._len; i++) {\n                newData[i] = this.data[i];\n            }\n            this.data = newData;\n        }\n    };\n    PathProxy.prototype.toStatic = function () {\n        if (!this._saveData) {\n            return;\n        }\n        this._drawPendingPt();\n        var data = this.data;\n        if (data instanceof Array) {\n            data.length = this._len;\n            if (hasTypedArray && this._len > 11) {\n                this.data = new Float32Array(data);\n            }\n        }\n    };\n    PathProxy.prototype.getBoundingRect = function () {\n        min[0] = min[1] = min2[0] = min2[1] = Number.MAX_VALUE;\n        max[0] = max[1] = max2[0] = max2[1] = -Number.MAX_VALUE;\n        var data = this.data;\n        var xi = 0;\n        var yi = 0;\n        var x0 = 0;\n        var y0 = 0;\n        var i;\n        for (i = 0; i < this._len;) {\n            var cmd = data[i++];\n            var isFirst = i === 1;\n            if (isFirst) {\n                xi = data[i];\n                yi = data[i + 1];\n                x0 = xi;\n                y0 = yi;\n            }\n            switch (cmd) {\n                case CMD.M:\n                    xi = x0 = data[i++];\n                    yi = y0 = data[i++];\n                    min2[0] = x0;\n                    min2[1] = y0;\n                    max2[0] = x0;\n                    max2[1] = y0;\n                    break;\n                case CMD.L:\n                    fromLine(xi, yi, data[i], data[i + 1], min2, max2);\n                    xi = data[i++];\n                    yi = data[i++];\n                    break;\n                case CMD.C:\n                    fromCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], min2, max2);\n                    xi = data[i++];\n                    yi = data[i++];\n                    break;\n                case CMD.Q:\n                    fromQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], min2, max2);\n                    xi = data[i++];\n                    yi = data[i++];\n                    break;\n                case CMD.A:\n                    var cx = data[i++];\n                    var cy = data[i++];\n                    var rx = data[i++];\n                    var ry = data[i++];\n                    var startAngle = data[i++];\n                    var endAngle = data[i++] + startAngle;\n                    i += 1;\n                    var anticlockwise = !data[i++];\n                    if (isFirst) {\n                        x0 = mathCos(startAngle) * rx + cx;\n                        y0 = mathSin(startAngle) * ry + cy;\n                    }\n                    fromArc(cx, cy, rx, ry, startAngle, endAngle, anticlockwise, min2, max2);\n                    xi = mathCos(endAngle) * rx + cx;\n                    yi = mathSin(endAngle) * ry + cy;\n                    break;\n                case CMD.R:\n                    x0 = xi = data[i++];\n                    y0 = yi = data[i++];\n                    var width = data[i++];\n                    var height = data[i++];\n                    fromLine(x0, y0, x0 + width, y0 + height, min2, max2);\n                    break;\n                case CMD.Z:\n                    xi = x0;\n                    yi = y0;\n                    break;\n            }\n            vec2.min(min, min, min2);\n            vec2.max(max, max, max2);\n        }\n        if (i === 0) {\n            min[0] = min[1] = max[0] = max[1] = 0;\n        }\n        return new BoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n    };\n    PathProxy.prototype._calculateLength = function () {\n        var data = this.data;\n        var len = this._len;\n        var ux = this._ux;\n        var uy = this._uy;\n        var xi = 0;\n        var yi = 0;\n        var x0 = 0;\n        var y0 = 0;\n        if (!this._pathSegLen) {\n            this._pathSegLen = [];\n        }\n        var pathSegLen = this._pathSegLen;\n        var pathTotalLen = 0;\n        var segCount = 0;\n        for (var i = 0; i < len;) {\n            var cmd = data[i++];\n            var isFirst = i === 1;\n            if (isFirst) {\n                xi = data[i];\n                yi = data[i + 1];\n                x0 = xi;\n                y0 = yi;\n            }\n            var l = -1;\n            switch (cmd) {\n                case CMD.M:\n                    xi = x0 = data[i++];\n                    yi = y0 = data[i++];\n                    break;\n                case CMD.L: {\n                    var x2 = data[i++];\n                    var y2 = data[i++];\n                    var dx = x2 - xi;\n                    var dy = y2 - yi;\n                    if (mathAbs(dx) > ux || mathAbs(dy) > uy || i === len - 1) {\n                        l = Math.sqrt(dx * dx + dy * dy);\n                        xi = x2;\n                        yi = y2;\n                    }\n                    break;\n                }\n                case CMD.C: {\n                    var x1 = data[i++];\n                    var y1 = data[i++];\n                    var x2 = data[i++];\n                    var y2 = data[i++];\n                    var x3 = data[i++];\n                    var y3 = data[i++];\n                    l = cubicLength(xi, yi, x1, y1, x2, y2, x3, y3, 10);\n                    xi = x3;\n                    yi = y3;\n                    break;\n                }\n                case CMD.Q: {\n                    var x1 = data[i++];\n                    var y1 = data[i++];\n                    var x2 = data[i++];\n                    var y2 = data[i++];\n                    l = quadraticLength(xi, yi, x1, y1, x2, y2, 10);\n                    xi = x2;\n                    yi = y2;\n                    break;\n                }\n                case CMD.A:\n                    var cx = data[i++];\n                    var cy = data[i++];\n                    var rx = data[i++];\n                    var ry = data[i++];\n                    var startAngle = data[i++];\n                    var delta = data[i++];\n                    var endAngle = delta + startAngle;\n                    i += 1;\n                    if (isFirst) {\n                        x0 = mathCos(startAngle) * rx + cx;\n                        y0 = mathSin(startAngle) * ry + cy;\n                    }\n                    l = mathMax(rx, ry) * mathMin(PI2, Math.abs(delta));\n                    xi = mathCos(endAngle) * rx + cx;\n                    yi = mathSin(endAngle) * ry + cy;\n                    break;\n                case CMD.R: {\n                    x0 = xi = data[i++];\n                    y0 = yi = data[i++];\n                    var width = data[i++];\n                    var height = data[i++];\n                    l = width * 2 + height * 2;\n                    break;\n                }\n                case CMD.Z: {\n                    var dx = x0 - xi;\n                    var dy = y0 - yi;\n                    l = Math.sqrt(dx * dx + dy * dy);\n                    xi = x0;\n                    yi = y0;\n                    break;\n                }\n            }\n            if (l >= 0) {\n                pathSegLen[segCount++] = l;\n                pathTotalLen += l;\n            }\n        }\n        this._pathLen = pathTotalLen;\n        return pathTotalLen;\n    };\n    PathProxy.prototype.rebuildPath = function (ctx, percent) {\n        var d = this.data;\n        var ux = this._ux;\n        var uy = this._uy;\n        var len = this._len;\n        var x0;\n        var y0;\n        var xi;\n        var yi;\n        var x;\n        var y;\n        var drawPart = percent < 1;\n        var pathSegLen;\n        var pathTotalLen;\n        var accumLength = 0;\n        var segCount = 0;\n        var displayedLength;\n        var pendingPtDist = 0;\n        var pendingPtX;\n        var pendingPtY;\n        if (drawPart) {\n            if (!this._pathSegLen) {\n                this._calculateLength();\n            }\n            pathSegLen = this._pathSegLen;\n            pathTotalLen = this._pathLen;\n            displayedLength = percent * pathTotalLen;\n            if (!displayedLength) {\n                return;\n            }\n        }\n        lo: for (var i = 0; i < len;) {\n            var cmd = d[i++];\n            var isFirst = i === 1;\n            if (isFirst) {\n                xi = d[i];\n                yi = d[i + 1];\n                x0 = xi;\n                y0 = yi;\n            }\n            if (cmd !== CMD.L && pendingPtDist > 0) {\n                ctx.lineTo(pendingPtX, pendingPtY);\n                pendingPtDist = 0;\n            }\n            switch (cmd) {\n                case CMD.M:\n                    x0 = xi = d[i++];\n                    y0 = yi = d[i++];\n                    ctx.moveTo(xi, yi);\n                    break;\n                case CMD.L: {\n                    x = d[i++];\n                    y = d[i++];\n                    var dx = mathAbs(x - xi);\n                    var dy = mathAbs(y - yi);\n                    if (dx > ux || dy > uy) {\n                        if (drawPart) {\n                            var l = pathSegLen[segCount++];\n                            if (accumLength + l > displayedLength) {\n                                var t = (displayedLength - accumLength) / l;\n                                ctx.lineTo(xi * (1 - t) + x * t, yi * (1 - t) + y * t);\n                                break lo;\n                            }\n                            accumLength += l;\n                        }\n                        ctx.lineTo(x, y);\n                        xi = x;\n                        yi = y;\n                        pendingPtDist = 0;\n                    }\n                    else {\n                        var d2 = dx * dx + dy * dy;\n                        if (d2 > pendingPtDist) {\n                            pendingPtX = x;\n                            pendingPtY = y;\n                            pendingPtDist = d2;\n                        }\n                    }\n                    break;\n                }\n                case CMD.C: {\n                    var x1 = d[i++];\n                    var y1 = d[i++];\n                    var x2 = d[i++];\n                    var y2 = d[i++];\n                    var x3 = d[i++];\n                    var y3 = d[i++];\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            var t = (displayedLength - accumLength) / l;\n                            cubicSubdivide(xi, x1, x2, x3, t, tmpOutX);\n                            cubicSubdivide(yi, y1, y2, y3, t, tmpOutY);\n                            ctx.bezierCurveTo(tmpOutX[1], tmpOutY[1], tmpOutX[2], tmpOutY[2], tmpOutX[3], tmpOutY[3]);\n                            break lo;\n                        }\n                        accumLength += l;\n                    }\n                    ctx.bezierCurveTo(x1, y1, x2, y2, x3, y3);\n                    xi = x3;\n                    yi = y3;\n                    break;\n                }\n                case CMD.Q: {\n                    var x1 = d[i++];\n                    var y1 = d[i++];\n                    var x2 = d[i++];\n                    var y2 = d[i++];\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            var t = (displayedLength - accumLength) / l;\n                            quadraticSubdivide(xi, x1, x2, t, tmpOutX);\n                            quadraticSubdivide(yi, y1, y2, t, tmpOutY);\n                            ctx.quadraticCurveTo(tmpOutX[1], tmpOutY[1], tmpOutX[2], tmpOutY[2]);\n                            break lo;\n                        }\n                        accumLength += l;\n                    }\n                    ctx.quadraticCurveTo(x1, y1, x2, y2);\n                    xi = x2;\n                    yi = y2;\n                    break;\n                }\n                case CMD.A:\n                    var cx = d[i++];\n                    var cy = d[i++];\n                    var rx = d[i++];\n                    var ry = d[i++];\n                    var startAngle = d[i++];\n                    var delta = d[i++];\n                    var psi = d[i++];\n                    var anticlockwise = !d[i++];\n                    var r = (rx > ry) ? rx : ry;\n                    var isEllipse = mathAbs(rx - ry) > 1e-3;\n                    var endAngle = startAngle + delta;\n                    var breakBuild = false;\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            endAngle = startAngle + delta * (displayedLength - accumLength) / l;\n                            breakBuild = true;\n                        }\n                        accumLength += l;\n                    }\n                    if (isEllipse && ctx.ellipse) {\n                        ctx.ellipse(cx, cy, rx, ry, psi, startAngle, endAngle, anticlockwise);\n                    }\n                    else {\n                        ctx.arc(cx, cy, r, startAngle, endAngle, anticlockwise);\n                    }\n                    if (breakBuild) {\n                        break lo;\n                    }\n                    if (isFirst) {\n                        x0 = mathCos(startAngle) * rx + cx;\n                        y0 = mathSin(startAngle) * ry + cy;\n                    }\n                    xi = mathCos(endAngle) * rx + cx;\n                    yi = mathSin(endAngle) * ry + cy;\n                    break;\n                case CMD.R:\n                    x0 = xi = d[i];\n                    y0 = yi = d[i + 1];\n                    x = d[i++];\n                    y = d[i++];\n                    var width = d[i++];\n                    var height = d[i++];\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            var d_1 = displayedLength - accumLength;\n                            ctx.moveTo(x, y);\n                            ctx.lineTo(x + mathMin(d_1, width), y);\n                            d_1 -= width;\n                            if (d_1 > 0) {\n                                ctx.lineTo(x + width, y + mathMin(d_1, height));\n                            }\n                            d_1 -= height;\n                            if (d_1 > 0) {\n                                ctx.lineTo(x + mathMax(width - d_1, 0), y + height);\n                            }\n                            d_1 -= width;\n                            if (d_1 > 0) {\n                                ctx.lineTo(x, y + mathMax(height - d_1, 0));\n                            }\n                            break lo;\n                        }\n                        accumLength += l;\n                    }\n                    ctx.rect(x, y, width, height);\n                    break;\n                case CMD.Z:\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            var t = (displayedLength - accumLength) / l;\n                            ctx.lineTo(xi * (1 - t) + x0 * t, yi * (1 - t) + y0 * t);\n                            break lo;\n                        }\n                        accumLength += l;\n                    }\n                    ctx.closePath();\n                    xi = x0;\n                    yi = y0;\n            }\n        }\n    };\n    PathProxy.prototype.clone = function () {\n        var newProxy = new PathProxy();\n        var data = this.data;\n        newProxy.data = data.slice ? data.slice()\n            : Array.prototype.slice.call(data);\n        newProxy._len = this._len;\n        return newProxy;\n    };\n    PathProxy.prototype.canSave = function () {\n        return !!this._saveData;\n    };\n    PathProxy.CMD = CMD;\n    PathProxy.initDefaultProps = (function () {\n        var proto = PathProxy.prototype;\n        proto._saveData = true;\n        proto._ux = 0;\n        proto._uy = 0;\n        proto._pendingPtDist = 0;\n        proto._version = 0;\n    })();\n    return PathProxy;\n}());\nexport default PathProxy;\n","export function containStroke(x0, y0, x1, y1, lineWidth, x, y) {\n    if (lineWidth === 0) {\n        return false;\n    }\n    var _l = lineWidth;\n    var _a = 0;\n    var _b = x0;\n    if ((y > y0 + _l && y > y1 + _l)\n        || (y < y0 - _l && y < y1 - _l)\n        || (x > x0 + _l && x > x1 + _l)\n        || (x < x0 - _l && x < x1 - _l)) {\n        return false;\n    }\n    if (x0 !== x1) {\n        _a = (y0 - y1) / (x0 - x1);\n        _b = (x0 * y1 - x1 * y0) / (x0 - x1);\n    }\n    else {\n        return Math.abs(x - x0) <= _l / 2;\n    }\n    var tmp = _a * x - y + _b;\n    var _s = tmp * tmp / (_a * _a + 1);\n    return _s <= _l / 2 * _l / 2;\n}\n","import * as curve from '../core/curve.js';\nexport function containStroke(x0, y0, x1, y1, x2, y2, x3, y3, lineWidth, x, y) {\n    if (lineWidth === 0) {\n        return false;\n    }\n    var _l = lineWidth;\n    if ((y > y0 + _l && y > y1 + _l && y > y2 + _l && y > y3 + _l)\n        || (y < y0 - _l && y < y1 - _l && y < y2 - _l && y < y3 - _l)\n        || (x > x0 + _l && x > x1 + _l && x > x2 + _l && x > x3 + _l)\n        || (x < x0 - _l && x < x1 - _l && x < x2 - _l && x < x3 - _l)) {\n        return false;\n    }\n    var d = curve.cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, null);\n    return d <= _l / 2;\n}\n","import { quadraticProjectPoint } from '../core/curve.js';\nexport function containStroke(x0, y0, x1, y1, x2, y2, lineWidth, x, y) {\n    if (lineWidth === 0) {\n        return false;\n    }\n    var _l = lineWidth;\n    if ((y > y0 + _l && y > y1 + _l && y > y2 + _l)\n        || (y < y0 - _l && y < y1 - _l && y < y2 - _l)\n        || (x > x0 + _l && x > x1 + _l && x > x2 + _l)\n        || (x < x0 - _l && x < x1 - _l && x < x2 - _l)) {\n        return false;\n    }\n    var d = quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, null);\n    return d <= _l / 2;\n}\n","var PI2 = Math.PI * 2;\nexport function normalizeRadian(angle) {\n    angle %= PI2;\n    if (angle < 0) {\n        angle += PI2;\n    }\n    return angle;\n}\n","import { normalizeRadian } from './util.js';\nvar PI2 = Math.PI * 2;\nexport function containStroke(cx, cy, r, startAngle, endAngle, anticlockwise, lineWidth, x, y) {\n    if (lineWidth === 0) {\n        return false;\n    }\n    var _l = lineWidth;\n    x -= cx;\n    y -= cy;\n    var d = Math.sqrt(x * x + y * y);\n    if ((d - _l > r) || (d + _l < r)) {\n        return false;\n    }\n    if (Math.abs(startAngle - endAngle) % PI2 < 1e-4) {\n        return true;\n    }\n    if (anticlockwise) {\n        var tmp = startAngle;\n        startAngle = normalizeRadian(endAngle);\n        endAngle = normalizeRadian(tmp);\n    }\n    else {\n        startAngle = normalizeRadian(startAngle);\n        endAngle = normalizeRadian(endAngle);\n    }\n    if (startAngle > endAngle) {\n        endAngle += PI2;\n    }\n    var angle = Math.atan2(y, x);\n    if (angle < 0) {\n        angle += PI2;\n    }\n    return (angle >= startAngle && angle <= endAngle)\n        || (angle + PI2 >= startAngle && angle + PI2 <= endAngle);\n}\n","export default function windingLine(x0, y0, x1, y1, x, y) {\n    if ((y > y0 && y > y1) || (y < y0 && y < y1)) {\n        return 0;\n    }\n    if (y1 === y0) {\n        return 0;\n    }\n    var t = (y - y0) / (y1 - y0);\n    var dir = y1 < y0 ? 1 : -1;\n    if (t === 1 || t === 0) {\n        dir = y1 < y0 ? 0.5 : -0.5;\n    }\n    var x_ = t * (x1 - x0) + x0;\n    return x_ === x ? Infinity : x_ > x ? dir : 0;\n}\n","import PathProxy from '../core/PathProxy.js';\nimport * as line from './line.js';\nimport * as cubic from './cubic.js';\nimport * as quadratic from './quadratic.js';\nimport * as arc from './arc.js';\nimport * as curve from '../core/curve.js';\nimport windingLine from './windingLine.js';\nvar CMD = PathProxy.CMD;\nvar PI2 = Math.PI * 2;\nvar EPSILON = 1e-4;\nfunction isAroundEqual(a, b) {\n    return Math.abs(a - b) < EPSILON;\n}\nvar roots = [-1, -1, -1];\nvar extrema = [-1, -1];\nfunction swapExtrema() {\n    var tmp = extrema[0];\n    extrema[0] = extrema[1];\n    extrema[1] = tmp;\n}\nfunction windingCubic(x0, y0, x1, y1, x2, y2, x3, y3, x, y) {\n    if ((y > y0 && y > y1 && y > y2 && y > y3)\n        || (y < y0 && y < y1 && y < y2 && y < y3)) {\n        return 0;\n    }\n    var nRoots = curve.cubicRootAt(y0, y1, y2, y3, y, roots);\n    if (nRoots === 0) {\n        return 0;\n    }\n    else {\n        var w = 0;\n        var nExtrema = -1;\n        var y0_ = void 0;\n        var y1_ = void 0;\n        for (var i = 0; i < nRoots; i++) {\n            var t = roots[i];\n            var unit = (t === 0 || t === 1) ? 0.5 : 1;\n            var x_ = curve.cubicAt(x0, x1, x2, x3, t);\n            if (x_ < x) {\n                continue;\n            }\n            if (nExtrema < 0) {\n                nExtrema = curve.cubicExtrema(y0, y1, y2, y3, extrema);\n                if (extrema[1] < extrema[0] && nExtrema > 1) {\n                    swapExtrema();\n                }\n                y0_ = curve.cubicAt(y0, y1, y2, y3, extrema[0]);\n                if (nExtrema > 1) {\n                    y1_ = curve.cubicAt(y0, y1, y2, y3, extrema[1]);\n                }\n            }\n            if (nExtrema === 2) {\n                if (t < extrema[0]) {\n                    w += y0_ < y0 ? unit : -unit;\n                }\n                else if (t < extrema[1]) {\n                    w += y1_ < y0_ ? unit : -unit;\n                }\n                else {\n                    w += y3 < y1_ ? unit : -unit;\n                }\n            }\n            else {\n                if (t < extrema[0]) {\n                    w += y0_ < y0 ? unit : -unit;\n                }\n                else {\n                    w += y3 < y0_ ? unit : -unit;\n                }\n            }\n        }\n        return w;\n    }\n}\nfunction windingQuadratic(x0, y0, x1, y1, x2, y2, x, y) {\n    if ((y > y0 && y > y1 && y > y2)\n        || (y < y0 && y < y1 && y < y2)) {\n        return 0;\n    }\n    var nRoots = curve.quadraticRootAt(y0, y1, y2, y, roots);\n    if (nRoots === 0) {\n        return 0;\n    }\n    else {\n        var t = curve.quadraticExtremum(y0, y1, y2);\n        if (t >= 0 && t <= 1) {\n            var w = 0;\n            var y_ = curve.quadraticAt(y0, y1, y2, t);\n            for (var i = 0; i < nRoots; i++) {\n                var unit = (roots[i] === 0 || roots[i] === 1) ? 0.5 : 1;\n                var x_ = curve.quadraticAt(x0, x1, x2, roots[i]);\n                if (x_ < x) {\n                    continue;\n                }\n                if (roots[i] < t) {\n                    w += y_ < y0 ? unit : -unit;\n                }\n                else {\n                    w += y2 < y_ ? unit : -unit;\n                }\n            }\n            return w;\n        }\n        else {\n            var unit = (roots[0] === 0 || roots[0] === 1) ? 0.5 : 1;\n            var x_ = curve.quadraticAt(x0, x1, x2, roots[0]);\n            if (x_ < x) {\n                return 0;\n            }\n            return y2 < y0 ? unit : -unit;\n        }\n    }\n}\nfunction windingArc(cx, cy, r, startAngle, endAngle, anticlockwise, x, y) {\n    y -= cy;\n    if (y > r || y < -r) {\n        return 0;\n    }\n    var tmp = Math.sqrt(r * r - y * y);\n    roots[0] = -tmp;\n    roots[1] = tmp;\n    var dTheta = Math.abs(startAngle - endAngle);\n    if (dTheta < 1e-4) {\n        return 0;\n    }\n    if (dTheta >= PI2 - 1e-4) {\n        startAngle = 0;\n        endAngle = PI2;\n        var dir = anticlockwise ? 1 : -1;\n        if (x >= roots[0] + cx && x <= roots[1] + cx) {\n            return dir;\n        }\n        else {\n            return 0;\n        }\n    }\n    if (startAngle > endAngle) {\n        var tmp_1 = startAngle;\n        startAngle = endAngle;\n        endAngle = tmp_1;\n    }\n    if (startAngle < 0) {\n        startAngle += PI2;\n        endAngle += PI2;\n    }\n    var w = 0;\n    for (var i = 0; i < 2; i++) {\n        var x_ = roots[i];\n        if (x_ + cx > x) {\n            var angle = Math.atan2(y, x_);\n            var dir = anticlockwise ? 1 : -1;\n            if (angle < 0) {\n                angle = PI2 + angle;\n            }\n            if ((angle >= startAngle && angle <= endAngle)\n                || (angle + PI2 >= startAngle && angle + PI2 <= endAngle)) {\n                if (angle > Math.PI / 2 && angle < Math.PI * 1.5) {\n                    dir = -dir;\n                }\n                w += dir;\n            }\n        }\n    }\n    return w;\n}\nfunction containPath(path, lineWidth, isStroke, x, y) {\n    var data = path.data;\n    var len = path.len();\n    var w = 0;\n    var xi = 0;\n    var yi = 0;\n    var x0 = 0;\n    var y0 = 0;\n    var x1;\n    var y1;\n    for (var i = 0; i < len;) {\n        var cmd = data[i++];\n        var isFirst = i === 1;\n        if (cmd === CMD.M && i > 1) {\n            if (!isStroke) {\n                w += windingLine(xi, yi, x0, y0, x, y);\n            }\n        }\n        if (isFirst) {\n            xi = data[i];\n            yi = data[i + 1];\n            x0 = xi;\n            y0 = yi;\n        }\n        switch (cmd) {\n            case CMD.M:\n                x0 = data[i++];\n                y0 = data[i++];\n                xi = x0;\n                yi = y0;\n                break;\n            case CMD.L:\n                if (isStroke) {\n                    if (line.containStroke(xi, yi, data[i], data[i + 1], lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingLine(xi, yi, data[i], data[i + 1], x, y) || 0;\n                }\n                xi = data[i++];\n                yi = data[i++];\n                break;\n            case CMD.C:\n                if (isStroke) {\n                    if (cubic.containStroke(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], x, y) || 0;\n                }\n                xi = data[i++];\n                yi = data[i++];\n                break;\n            case CMD.Q:\n                if (isStroke) {\n                    if (quadratic.containStroke(xi, yi, data[i++], data[i++], data[i], data[i + 1], lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], x, y) || 0;\n                }\n                xi = data[i++];\n                yi = data[i++];\n                break;\n            case CMD.A:\n                var cx = data[i++];\n                var cy = data[i++];\n                var rx = data[i++];\n                var ry = data[i++];\n                var theta = data[i++];\n                var dTheta = data[i++];\n                i += 1;\n                var anticlockwise = !!(1 - data[i++]);\n                x1 = Math.cos(theta) * rx + cx;\n                y1 = Math.sin(theta) * ry + cy;\n                if (!isFirst) {\n                    w += windingLine(xi, yi, x1, y1, x, y);\n                }\n                else {\n                    x0 = x1;\n                    y0 = y1;\n                }\n                var _x = (x - cx) * ry / rx + cx;\n                if (isStroke) {\n                    if (arc.containStroke(cx, cy, ry, theta, theta + dTheta, anticlockwise, lineWidth, _x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingArc(cx, cy, ry, theta, theta + dTheta, anticlockwise, _x, y);\n                }\n                xi = Math.cos(theta + dTheta) * rx + cx;\n                yi = Math.sin(theta + dTheta) * ry + cy;\n                break;\n            case CMD.R:\n                x0 = xi = data[i++];\n                y0 = yi = data[i++];\n                var width = data[i++];\n                var height = data[i++];\n                x1 = x0 + width;\n                y1 = y0 + height;\n                if (isStroke) {\n                    if (line.containStroke(x0, y0, x1, y0, lineWidth, x, y)\n                        || line.containStroke(x1, y0, x1, y1, lineWidth, x, y)\n                        || line.containStroke(x1, y1, x0, y1, lineWidth, x, y)\n                        || line.containStroke(x0, y1, x0, y0, lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingLine(x1, y0, x1, y1, x, y);\n                    w += windingLine(x0, y1, x0, y0, x, y);\n                }\n                break;\n            case CMD.Z:\n                if (isStroke) {\n                    if (line.containStroke(xi, yi, x0, y0, lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingLine(xi, yi, x0, y0, x, y);\n                }\n                xi = x0;\n                yi = y0;\n                break;\n        }\n    }\n    if (!isStroke && !isAroundEqual(yi, y0)) {\n        w += windingLine(xi, yi, x0, y0, x, y) || 0;\n    }\n    return w !== 0;\n}\nexport function contain(pathProxy, x, y) {\n    return containPath(pathProxy, 0, false, x, y);\n}\nexport function containStroke(pathProxy, lineWidth, x, y) {\n    return containPath(pathProxy, lineWidth, true, x, y);\n}\n","import { __extends } from \"tslib\";\nimport Displayable, { DEFAULT_COMMON_STYLE, DEFAULT_COMMON_ANIMATION_PROPS } from './Displayable.js';\nimport PathProxy from '../core/PathProxy.js';\nimport * as pathContain from '../contain/path.js';\nimport { defaults, keys, extend, clone, isString, createObject } from '../core/util.js';\nimport { lum } from '../tool/color.js';\nimport { DARK_LABEL_COLOR, LIGHT_LABEL_COLOR, DARK_MODE_THRESHOLD, LIGHTER_LABEL_COLOR } from '../config.js';\nimport { REDRAW_BIT, SHAPE_CHANGED_BIT, STYLE_CHANGED_BIT } from './constants.js';\nimport { TRANSFORMABLE_PROPS } from '../core/Transformable.js';\nexport var DEFAULT_PATH_STYLE = defaults({\n    fill: '#000',\n    stroke: null,\n    strokePercent: 1,\n    fillOpacity: 1,\n    strokeOpacity: 1,\n    lineDashOffset: 0,\n    lineWidth: 1,\n    lineCap: 'butt',\n    miterLimit: 10,\n    strokeNoScale: false,\n    strokeFirst: false\n}, DEFAULT_COMMON_STYLE);\nexport var DEFAULT_PATH_ANIMATION_PROPS = {\n    style: defaults({\n        fill: true,\n        stroke: true,\n        strokePercent: true,\n        fillOpacity: true,\n        strokeOpacity: true,\n        lineDashOffset: true,\n        lineWidth: true,\n        miterLimit: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nvar pathCopyParams = TRANSFORMABLE_PROPS.concat(['invisible',\n    'culling', 'z', 'z2', 'zlevel', 'parent'\n]);\nvar Path = (function (_super) {\n    __extends(Path, _super);\n    function Path(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Path.prototype.update = function () {\n        var _this = this;\n        _super.prototype.update.call(this);\n        var style = this.style;\n        if (style.decal) {\n            var decalEl = this._decalEl = this._decalEl || new Path();\n            if (decalEl.buildPath === Path.prototype.buildPath) {\n                decalEl.buildPath = function (ctx) {\n                    _this.buildPath(ctx, _this.shape);\n                };\n            }\n            decalEl.silent = true;\n            var decalElStyle = decalEl.style;\n            for (var key in style) {\n                if (decalElStyle[key] !== style[key]) {\n                    decalElStyle[key] = style[key];\n                }\n            }\n            decalElStyle.fill = style.fill ? style.decal : null;\n            decalElStyle.decal = null;\n            decalElStyle.shadowColor = null;\n            style.strokeFirst && (decalElStyle.stroke = null);\n            for (var i = 0; i < pathCopyParams.length; ++i) {\n                decalEl[pathCopyParams[i]] = this[pathCopyParams[i]];\n            }\n            decalEl.__dirty |= REDRAW_BIT;\n        }\n        else if (this._decalEl) {\n            this._decalEl = null;\n        }\n    };\n    Path.prototype.getDecalElement = function () {\n        return this._decalEl;\n    };\n    Path.prototype._init = function (props) {\n        var keysArr = keys(props);\n        this.shape = this.getDefaultShape();\n        var defaultStyle = this.getDefaultStyle();\n        if (defaultStyle) {\n            this.useStyle(defaultStyle);\n        }\n        for (var i = 0; i < keysArr.length; i++) {\n            var key = keysArr[i];\n            var value = props[key];\n            if (key === 'style') {\n                if (!this.style) {\n                    this.useStyle(value);\n                }\n                else {\n                    extend(this.style, value);\n                }\n            }\n            else if (key === 'shape') {\n                extend(this.shape, value);\n            }\n            else {\n                _super.prototype.attrKV.call(this, key, value);\n            }\n        }\n        if (!this.style) {\n            this.useStyle({});\n        }\n    };\n    Path.prototype.getDefaultStyle = function () {\n        return null;\n    };\n    Path.prototype.getDefaultShape = function () {\n        return {};\n    };\n    Path.prototype.canBeInsideText = function () {\n        return this.hasFill();\n    };\n    Path.prototype.getInsideTextFill = function () {\n        var pathFill = this.style.fill;\n        if (pathFill !== 'none') {\n            if (isString(pathFill)) {\n                var fillLum = lum(pathFill, 0);\n                if (fillLum > 0.5) {\n                    return DARK_LABEL_COLOR;\n                }\n                else if (fillLum > 0.2) {\n                    return LIGHTER_LABEL_COLOR;\n                }\n                return LIGHT_LABEL_COLOR;\n            }\n            else if (pathFill) {\n                return LIGHT_LABEL_COLOR;\n            }\n        }\n        return DARK_LABEL_COLOR;\n    };\n    Path.prototype.getInsideTextStroke = function (textFill) {\n        var pathFill = this.style.fill;\n        if (isString(pathFill)) {\n            var zr = this.__zr;\n            var isDarkMode = !!(zr && zr.isDarkMode());\n            var isDarkLabel = lum(textFill, 0) < DARK_MODE_THRESHOLD;\n            if (isDarkMode === isDarkLabel) {\n                return pathFill;\n            }\n        }\n    };\n    Path.prototype.buildPath = function (ctx, shapeCfg, inBatch) { };\n    Path.prototype.pathUpdated = function () {\n        this.__dirty &= ~SHAPE_CHANGED_BIT;\n    };\n    Path.prototype.getUpdatedPathProxy = function (inBatch) {\n        !this.path && this.createPathProxy();\n        this.path.beginPath();\n        this.buildPath(this.path, this.shape, inBatch);\n        return this.path;\n    };\n    Path.prototype.createPathProxy = function () {\n        this.path = new PathProxy(false);\n    };\n    Path.prototype.hasStroke = function () {\n        var style = this.style;\n        var stroke = style.stroke;\n        return !(stroke == null || stroke === 'none' || !(style.lineWidth > 0));\n    };\n    Path.prototype.hasFill = function () {\n        var style = this.style;\n        var fill = style.fill;\n        return fill != null && fill !== 'none';\n    };\n    Path.prototype.getBoundingRect = function () {\n        var rect = this._rect;\n        var style = this.style;\n        var needsUpdateRect = !rect;\n        if (needsUpdateRect) {\n            var firstInvoke = false;\n            if (!this.path) {\n                firstInvoke = true;\n                this.createPathProxy();\n            }\n            var path = this.path;\n            if (firstInvoke || (this.__dirty & SHAPE_CHANGED_BIT)) {\n                path.beginPath();\n                this.buildPath(path, this.shape, false);\n                this.pathUpdated();\n            }\n            rect = path.getBoundingRect();\n        }\n        this._rect = rect;\n        if (this.hasStroke() && this.path && this.path.len() > 0) {\n            var rectStroke = this._rectStroke || (this._rectStroke = rect.clone());\n            if (this.__dirty || needsUpdateRect) {\n                rectStroke.copy(rect);\n                var lineScale = style.strokeNoScale ? this.getLineScale() : 1;\n                var w = style.lineWidth;\n                if (!this.hasFill()) {\n                    var strokeContainThreshold = this.strokeContainThreshold;\n                    w = Math.max(w, strokeContainThreshold == null ? 4 : strokeContainThreshold);\n                }\n                if (lineScale > 1e-10) {\n                    rectStroke.width += w / lineScale;\n                    rectStroke.height += w / lineScale;\n                    rectStroke.x -= w / lineScale / 2;\n                    rectStroke.y -= w / lineScale / 2;\n                }\n            }\n            return rectStroke;\n        }\n        return rect;\n    };\n    Path.prototype.contain = function (x, y) {\n        var localPos = this.transformCoordToLocal(x, y);\n        var rect = this.getBoundingRect();\n        var style = this.style;\n        x = localPos[0];\n        y = localPos[1];\n        if (rect.contain(x, y)) {\n            var pathProxy = this.path;\n            if (this.hasStroke()) {\n                var lineWidth = style.lineWidth;\n                var lineScale = style.strokeNoScale ? this.getLineScale() : 1;\n                if (lineScale > 1e-10) {\n                    if (!this.hasFill()) {\n                        lineWidth = Math.max(lineWidth, this.strokeContainThreshold);\n                    }\n                    if (pathContain.containStroke(pathProxy, lineWidth / lineScale, x, y)) {\n                        return true;\n                    }\n                }\n            }\n            if (this.hasFill()) {\n                return pathContain.contain(pathProxy, x, y);\n            }\n        }\n        return false;\n    };\n    Path.prototype.dirtyShape = function () {\n        this.__dirty |= SHAPE_CHANGED_BIT;\n        if (this._rect) {\n            this._rect = null;\n        }\n        if (this._decalEl) {\n            this._decalEl.dirtyShape();\n        }\n        this.markRedraw();\n    };\n    Path.prototype.dirty = function () {\n        this.dirtyStyle();\n        this.dirtyShape();\n    };\n    Path.prototype.animateShape = function (loop) {\n        return this.animate('shape', loop);\n    };\n    Path.prototype.updateDuringAnimation = function (targetKey) {\n        if (targetKey === 'style') {\n            this.dirtyStyle();\n        }\n        else if (targetKey === 'shape') {\n            this.dirtyShape();\n        }\n        else {\n            this.markRedraw();\n        }\n    };\n    Path.prototype.attrKV = function (key, value) {\n        if (key === 'shape') {\n            this.setShape(value);\n        }\n        else {\n            _super.prototype.attrKV.call(this, key, value);\n        }\n    };\n    Path.prototype.setShape = function (keyOrObj, value) {\n        var shape = this.shape;\n        if (!shape) {\n            shape = this.shape = {};\n        }\n        if (typeof keyOrObj === 'string') {\n            shape[keyOrObj] = value;\n        }\n        else {\n            extend(shape, keyOrObj);\n        }\n        this.dirtyShape();\n        return this;\n    };\n    Path.prototype.shapeChanged = function () {\n        return !!(this.__dirty & SHAPE_CHANGED_BIT);\n    };\n    Path.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_PATH_STYLE, obj);\n    };\n    Path.prototype._innerSaveToNormal = function (toState) {\n        _super.prototype._innerSaveToNormal.call(this, toState);\n        var normalState = this._normalState;\n        if (toState.shape && !normalState.shape) {\n            normalState.shape = extend({}, this.shape);\n        }\n    };\n    Path.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n        _super.prototype._applyStateObj.call(this, stateName, state, normalState, keepCurrentStates, transition, animationCfg);\n        var needsRestoreToNormal = !(state && keepCurrentStates);\n        var targetShape;\n        if (state && state.shape) {\n            if (transition) {\n                if (keepCurrentStates) {\n                    targetShape = state.shape;\n                }\n                else {\n                    targetShape = extend({}, normalState.shape);\n                    extend(targetShape, state.shape);\n                }\n            }\n            else {\n                targetShape = extend({}, keepCurrentStates ? this.shape : normalState.shape);\n                extend(targetShape, state.shape);\n            }\n        }\n        else if (needsRestoreToNormal) {\n            targetShape = normalState.shape;\n        }\n        if (targetShape) {\n            if (transition) {\n                this.shape = extend({}, this.shape);\n                var targetShapePrimaryProps = {};\n                var shapeKeys = keys(targetShape);\n                for (var i = 0; i < shapeKeys.length; i++) {\n                    var key = shapeKeys[i];\n                    if (typeof targetShape[key] === 'object') {\n                        this.shape[key] = targetShape[key];\n                    }\n                    else {\n                        targetShapePrimaryProps[key] = targetShape[key];\n                    }\n                }\n                this._transitionState(stateName, {\n                    shape: targetShapePrimaryProps\n                }, animationCfg);\n            }\n            else {\n                this.shape = targetShape;\n                this.dirtyShape();\n            }\n        }\n    };\n    Path.prototype._mergeStates = function (states) {\n        var mergedState = _super.prototype._mergeStates.call(this, states);\n        var mergedShape;\n        for (var i = 0; i < states.length; i++) {\n            var state = states[i];\n            if (state.shape) {\n                mergedShape = mergedShape || {};\n                this._mergeStyle(mergedShape, state.shape);\n            }\n        }\n        if (mergedShape) {\n            mergedState.shape = mergedShape;\n        }\n        return mergedState;\n    };\n    Path.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_PATH_ANIMATION_PROPS;\n    };\n    Path.prototype.isZeroArea = function () {\n        return false;\n    };\n    Path.extend = function (defaultProps) {\n        var Sub = (function (_super) {\n            __extends(Sub, _super);\n            function Sub(opts) {\n                var _this = _super.call(this, opts) || this;\n                defaultProps.init && defaultProps.init.call(_this, opts);\n                return _this;\n            }\n            Sub.prototype.getDefaultStyle = function () {\n                return clone(defaultProps.style);\n            };\n            Sub.prototype.getDefaultShape = function () {\n                return clone(defaultProps.shape);\n            };\n            return Sub;\n        }(Path));\n        for (var key in defaultProps) {\n            if (typeof defaultProps[key] === 'function') {\n                Sub.prototype[key] = defaultProps[key];\n            }\n        }\n        return Sub;\n    };\n    Path.initDefaultProps = (function () {\n        var pathProto = Path.prototype;\n        pathProto.type = 'path';\n        pathProto.strokeContainThreshold = 5;\n        pathProto.segmentIgnoreThreshold = 0;\n        pathProto.subPixelOptimize = false;\n        pathProto.autoBatch = false;\n        pathProto.__dirty = REDRAW_BIT | STYLE_CHANGED_BIT | SHAPE_CHANGED_BIT;\n    })();\n    return Path;\n}(Displayable));\nexport default Path;\n","import PathProxy from '../core/PathProxy.js';\nimport { applyTransform as v2ApplyTransform } from '../core/vector.js';\nvar CMD = PathProxy.CMD;\nvar points = [[], [], []];\nvar mathSqrt = Math.sqrt;\nvar mathAtan2 = Math.atan2;\nexport default function transformPath(path, m) {\n    if (!m) {\n        return;\n    }\n    var data = path.data;\n    var len = path.len();\n    var cmd;\n    var nPoint;\n    var i;\n    var j;\n    var k;\n    var p;\n    var M = CMD.M;\n    var C = CMD.C;\n    var L = CMD.L;\n    var R = CMD.R;\n    var A = CMD.A;\n    var Q = CMD.Q;\n    for (i = 0, j = 0; i < len;) {\n        cmd = data[i++];\n        j = i;\n        nPoint = 0;\n        switch (cmd) {\n            case M:\n                nPoint = 1;\n                break;\n            case L:\n                nPoint = 1;\n                break;\n            case C:\n                nPoint = 3;\n                break;\n            case Q:\n                nPoint = 2;\n                break;\n            case A:\n                var x = m[4];\n                var y = m[5];\n                var sx = mathSqrt(m[0] * m[0] + m[1] * m[1]);\n                var sy = mathSqrt(m[2] * m[2] + m[3] * m[3]);\n                var angle = mathAtan2(-m[1] / sy, m[0] / sx);\n                data[i] *= sx;\n                data[i++] += x;\n                data[i] *= sy;\n                data[i++] += y;\n                data[i++] *= sx;\n                data[i++] *= sy;\n                data[i++] += angle;\n                data[i++] += angle;\n                i += 2;\n                j = i;\n                break;\n            case R:\n                p[0] = data[i++];\n                p[1] = data[i++];\n                v2ApplyTransform(p, p, m);\n                data[j++] = p[0];\n                data[j++] = p[1];\n                p[0] += data[i++];\n                p[1] += data[i++];\n                v2ApplyTransform(p, p, m);\n                data[j++] = p[0];\n                data[j++] = p[1];\n        }\n        for (k = 0; k < nPoint; k++) {\n            var p_1 = points[k];\n            p_1[0] = data[i++];\n            p_1[1] = data[i++];\n            v2ApplyTransform(p_1, p_1, m);\n            data[j++] = p_1[0];\n            data[j++] = p_1[1];\n        }\n    }\n    path.increaseVersion();\n}\n","import { __extends } from \"tslib\";\nimport Path from '../graphic/Path.js';\nimport PathProxy from '../core/PathProxy.js';\nimport transformPath from './transformPath.js';\nimport { extend } from '../core/util.js';\nvar mathSqrt = Math.sqrt;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI = Math.PI;\nfunction vMag(v) {\n    return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n}\n;\nfunction vRatio(u, v) {\n    return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\n}\n;\nfunction vAngle(u, v) {\n    return (u[0] * v[1] < u[1] * v[0] ? -1 : 1)\n        * Math.acos(vRatio(u, v));\n}\n;\nfunction processArc(x1, y1, x2, y2, fa, fs, rx, ry, psiDeg, cmd, path) {\n    var psi = psiDeg * (PI / 180.0);\n    var xp = mathCos(psi) * (x1 - x2) / 2.0\n        + mathSin(psi) * (y1 - y2) / 2.0;\n    var yp = -1 * mathSin(psi) * (x1 - x2) / 2.0\n        + mathCos(psi) * (y1 - y2) / 2.0;\n    var lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);\n    if (lambda > 1) {\n        rx *= mathSqrt(lambda);\n        ry *= mathSqrt(lambda);\n    }\n    var f = (fa === fs ? -1 : 1)\n        * mathSqrt((((rx * rx) * (ry * ry))\n            - ((rx * rx) * (yp * yp))\n            - ((ry * ry) * (xp * xp))) / ((rx * rx) * (yp * yp)\n            + (ry * ry) * (xp * xp))) || 0;\n    var cxp = f * rx * yp / ry;\n    var cyp = f * -ry * xp / rx;\n    var cx = (x1 + x2) / 2.0\n        + mathCos(psi) * cxp\n        - mathSin(psi) * cyp;\n    var cy = (y1 + y2) / 2.0\n        + mathSin(psi) * cxp\n        + mathCos(psi) * cyp;\n    var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\n    var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n    var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n    var dTheta = vAngle(u, v);\n    if (vRatio(u, v) <= -1) {\n        dTheta = PI;\n    }\n    if (vRatio(u, v) >= 1) {\n        dTheta = 0;\n    }\n    if (dTheta < 0) {\n        var n = Math.round(dTheta / PI * 1e6) / 1e6;\n        dTheta = PI * 2 + (n % 2) * PI;\n    }\n    path.addData(cmd, cx, cy, rx, ry, theta, dTheta, psi, fs);\n}\nvar commandReg = /([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig;\nvar numberReg = /-?([0-9]*\\.)?[0-9]+([eE]-?[0-9]+)?/g;\nfunction createPathProxyFromString(data) {\n    var path = new PathProxy();\n    if (!data) {\n        return path;\n    }\n    var cpx = 0;\n    var cpy = 0;\n    var subpathX = cpx;\n    var subpathY = cpy;\n    var prevCmd;\n    var CMD = PathProxy.CMD;\n    var cmdList = data.match(commandReg);\n    if (!cmdList) {\n        return path;\n    }\n    for (var l = 0; l < cmdList.length; l++) {\n        var cmdText = cmdList[l];\n        var cmdStr = cmdText.charAt(0);\n        var cmd = void 0;\n        var p = cmdText.match(numberReg) || [];\n        var pLen = p.length;\n        for (var i = 0; i < pLen; i++) {\n            p[i] = parseFloat(p[i]);\n        }\n        var off = 0;\n        while (off < pLen) {\n            var ctlPtx = void 0;\n            var ctlPty = void 0;\n            var rx = void 0;\n            var ry = void 0;\n            var psi = void 0;\n            var fa = void 0;\n            var fs = void 0;\n            var x1 = cpx;\n            var y1 = cpy;\n            var len = void 0;\n            var pathData = void 0;\n            switch (cmdStr) {\n                case 'l':\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'L':\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'm':\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.M;\n                    path.addData(cmd, cpx, cpy);\n                    subpathX = cpx;\n                    subpathY = cpy;\n                    cmdStr = 'l';\n                    break;\n                case 'M':\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.M;\n                    path.addData(cmd, cpx, cpy);\n                    subpathX = cpx;\n                    subpathY = cpy;\n                    cmdStr = 'L';\n                    break;\n                case 'h':\n                    cpx += p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'H':\n                    cpx = p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'v':\n                    cpy += p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'V':\n                    cpy = p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'C':\n                    cmd = CMD.C;\n                    path.addData(cmd, p[off++], p[off++], p[off++], p[off++], p[off++], p[off++]);\n                    cpx = p[off - 2];\n                    cpy = p[off - 1];\n                    break;\n                case 'c':\n                    cmd = CMD.C;\n                    path.addData(cmd, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy);\n                    cpx += p[off - 2];\n                    cpy += p[off - 1];\n                    break;\n                case 'S':\n                    ctlPtx = cpx;\n                    ctlPty = cpy;\n                    len = path.len();\n                    pathData = path.data;\n                    if (prevCmd === CMD.C) {\n                        ctlPtx += cpx - pathData[len - 4];\n                        ctlPty += cpy - pathData[len - 3];\n                    }\n                    cmd = CMD.C;\n                    x1 = p[off++];\n                    y1 = p[off++];\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\n                    break;\n                case 's':\n                    ctlPtx = cpx;\n                    ctlPty = cpy;\n                    len = path.len();\n                    pathData = path.data;\n                    if (prevCmd === CMD.C) {\n                        ctlPtx += cpx - pathData[len - 4];\n                        ctlPty += cpy - pathData[len - 3];\n                    }\n                    cmd = CMD.C;\n                    x1 = cpx + p[off++];\n                    y1 = cpy + p[off++];\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\n                    break;\n                case 'Q':\n                    x1 = p[off++];\n                    y1 = p[off++];\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.Q;\n                    path.addData(cmd, x1, y1, cpx, cpy);\n                    break;\n                case 'q':\n                    x1 = p[off++] + cpx;\n                    y1 = p[off++] + cpy;\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.Q;\n                    path.addData(cmd, x1, y1, cpx, cpy);\n                    break;\n                case 'T':\n                    ctlPtx = cpx;\n                    ctlPty = cpy;\n                    len = path.len();\n                    pathData = path.data;\n                    if (prevCmd === CMD.Q) {\n                        ctlPtx += cpx - pathData[len - 4];\n                        ctlPty += cpy - pathData[len - 3];\n                    }\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.Q;\n                    path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\n                    break;\n                case 't':\n                    ctlPtx = cpx;\n                    ctlPty = cpy;\n                    len = path.len();\n                    pathData = path.data;\n                    if (prevCmd === CMD.Q) {\n                        ctlPtx += cpx - pathData[len - 4];\n                        ctlPty += cpy - pathData[len - 3];\n                    }\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.Q;\n                    path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\n                    break;\n                case 'A':\n                    rx = p[off++];\n                    ry = p[off++];\n                    psi = p[off++];\n                    fa = p[off++];\n                    fs = p[off++];\n                    x1 = cpx, y1 = cpy;\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.A;\n                    processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\n                    break;\n                case 'a':\n                    rx = p[off++];\n                    ry = p[off++];\n                    psi = p[off++];\n                    fa = p[off++];\n                    fs = p[off++];\n                    x1 = cpx, y1 = cpy;\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.A;\n                    processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\n                    break;\n            }\n        }\n        if (cmdStr === 'z' || cmdStr === 'Z') {\n            cmd = CMD.Z;\n            path.addData(cmd);\n            cpx = subpathX;\n            cpy = subpathY;\n        }\n        prevCmd = cmd;\n    }\n    path.toStatic();\n    return path;\n}\nvar SVGPath = (function (_super) {\n    __extends(SVGPath, _super);\n    function SVGPath() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SVGPath.prototype.applyTransform = function (m) { };\n    return SVGPath;\n}(Path));\nfunction isPathProxy(path) {\n    return path.setData != null;\n}\nfunction createPathOptions(str, opts) {\n    var pathProxy = createPathProxyFromString(str);\n    var innerOpts = extend({}, opts);\n    innerOpts.buildPath = function (path) {\n        var beProxy = isPathProxy(path);\n        if (beProxy && path.canSave()) {\n            path.appendPath(pathProxy);\n            var ctx = path.getContext();\n            if (ctx) {\n                path.rebuildPath(ctx, 1);\n            }\n        }\n        else {\n            var ctx = beProxy ? path.getContext() : path;\n            if (ctx) {\n                pathProxy.rebuildPath(ctx, 1);\n            }\n        }\n    };\n    innerOpts.applyTransform = function (m) {\n        transformPath(pathProxy, m);\n        this.dirtyShape();\n    };\n    return innerOpts;\n}\nexport function createFromString(str, opts) {\n    return new SVGPath(createPathOptions(str, opts));\n}\nexport function extendFromString(str, defaultOpts) {\n    var innerOpts = createPathOptions(str, defaultOpts);\n    var Sub = (function (_super) {\n        __extends(Sub, _super);\n        function Sub(opts) {\n            var _this = _super.call(this, opts) || this;\n            _this.applyTransform = innerOpts.applyTransform;\n            _this.buildPath = innerOpts.buildPath;\n            return _this;\n        }\n        return Sub;\n    }(SVGPath));\n    return Sub;\n}\nexport function mergePath(pathEls, opts) {\n    var pathList = [];\n    var len = pathEls.length;\n    for (var i = 0; i < len; i++) {\n        var pathEl = pathEls[i];\n        pathList.push(pathEl.getUpdatedPathProxy(true));\n    }\n    var pathBundle = new Path(opts);\n    pathBundle.createPathProxy();\n    pathBundle.buildPath = function (path) {\n        if (isPathProxy(path)) {\n            path.appendPath(pathList);\n            var ctx = path.getContext();\n            if (ctx) {\n                path.rebuildPath(ctx, 1);\n            }\n        }\n    };\n    return pathBundle;\n}\nexport function clonePath(sourcePath, opts) {\n    opts = opts || {};\n    var path = new Path();\n    if (sourcePath.shape) {\n        path.setShape(sourcePath.shape);\n    }\n    path.setStyle(sourcePath.style);\n    if (opts.bakeTransform) {\n        transformPath(path.path, sourcePath.getComputedTransform());\n    }\n    else {\n        if (opts.toLocal) {\n            path.setLocalTransform(sourcePath.getComputedTransform());\n        }\n        else {\n            path.copyTransform(sourcePath);\n        }\n    }\n    path.buildPath = sourcePath.buildPath;\n    path.applyTransform = path.applyTransform;\n    path.z = sourcePath.z;\n    path.z2 = sourcePath.z2;\n    path.zlevel = sourcePath.zlevel;\n    return path;\n}\n","import { __extends } from \"tslib\";\nimport Displayable, { DEFAULT_COMMON_STYLE, DEFAULT_COMMON_ANIMATION_PROPS } from './Displayable.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport { defaults, createObject } from '../core/util.js';\nexport var DEFAULT_IMAGE_STYLE = defaults({\n    x: 0,\n    y: 0\n}, DEFAULT_COMMON_STYLE);\nexport var DEFAULT_IMAGE_ANIMATION_PROPS = {\n    style: defaults({\n        x: true,\n        y: true,\n        width: true,\n        height: true,\n        sx: true,\n        sy: true,\n        sWidth: true,\n        sHeight: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nfunction isImageLike(source) {\n    return !!(source\n        && typeof source !== 'string'\n        && source.width && source.height);\n}\nvar ZRImage = (function (_super) {\n    __extends(ZRImage, _super);\n    function ZRImage() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ZRImage.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_IMAGE_STYLE, obj);\n    };\n    ZRImage.prototype._getSize = function (dim) {\n        var style = this.style;\n        var size = style[dim];\n        if (size != null) {\n            return size;\n        }\n        var imageSource = isImageLike(style.image)\n            ? style.image : this.__image;\n        if (!imageSource) {\n            return 0;\n        }\n        var otherDim = dim === 'width' ? 'height' : 'width';\n        var otherDimSize = style[otherDim];\n        if (otherDimSize == null) {\n            return imageSource[dim];\n        }\n        else {\n            return imageSource[dim] / imageSource[otherDim] * otherDimSize;\n        }\n    };\n    ZRImage.prototype.getWidth = function () {\n        return this._getSize('width');\n    };\n    ZRImage.prototype.getHeight = function () {\n        return this._getSize('height');\n    };\n    ZRImage.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_IMAGE_ANIMATION_PROPS;\n    };\n    ZRImage.prototype.getBoundingRect = function () {\n        var style = this.style;\n        if (!this._rect) {\n            this._rect = new BoundingRect(style.x || 0, style.y || 0, this.getWidth(), this.getHeight());\n        }\n        return this._rect;\n    };\n    return ZRImage;\n}(Displayable));\nZRImage.prototype.type = 'image';\nexport default ZRImage;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar CircleShape = (function () {\n    function CircleShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r = 0;\n    }\n    return CircleShape;\n}());\nexport { CircleShape };\nvar Circle = (function (_super) {\n    __extends(Circle, _super);\n    function Circle(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Circle.prototype.getDefaultShape = function () {\n        return new CircleShape();\n    };\n    Circle.prototype.buildPath = function (ctx, shape) {\n        ctx.moveTo(shape.cx + shape.r, shape.cy);\n        ctx.arc(shape.cx, shape.cy, shape.r, 0, Math.PI * 2);\n    };\n    return Circle;\n}(Path));\n;\nCircle.prototype.type = 'circle';\nexport default Circle;\n","export function buildPath(ctx, shape) {\n    var x = shape.x;\n    var y = shape.y;\n    var width = shape.width;\n    var height = shape.height;\n    var r = shape.r;\n    var r1;\n    var r2;\n    var r3;\n    var r4;\n    if (width < 0) {\n        x = x + width;\n        width = -width;\n    }\n    if (height < 0) {\n        y = y + height;\n        height = -height;\n    }\n    if (typeof r === 'number') {\n        r1 = r2 = r3 = r4 = r;\n    }\n    else if (r instanceof Array) {\n        if (r.length === 1) {\n            r1 = r2 = r3 = r4 = r[0];\n        }\n        else if (r.length === 2) {\n            r1 = r3 = r[0];\n            r2 = r4 = r[1];\n        }\n        else if (r.length === 3) {\n            r1 = r[0];\n            r2 = r4 = r[1];\n            r3 = r[2];\n        }\n        else {\n            r1 = r[0];\n            r2 = r[1];\n            r3 = r[2];\n            r4 = r[3];\n        }\n    }\n    else {\n        r1 = r2 = r3 = r4 = 0;\n    }\n    var total;\n    if (r1 + r2 > width) {\n        total = r1 + r2;\n        r1 *= width / total;\n        r2 *= width / total;\n    }\n    if (r3 + r4 > width) {\n        total = r3 + r4;\n        r3 *= width / total;\n        r4 *= width / total;\n    }\n    if (r2 + r3 > height) {\n        total = r2 + r3;\n        r2 *= height / total;\n        r3 *= height / total;\n    }\n    if (r1 + r4 > height) {\n        total = r1 + r4;\n        r1 *= height / total;\n        r4 *= height / total;\n    }\n    ctx.moveTo(x + r1, y);\n    ctx.lineTo(x + width - r2, y);\n    r2 !== 0 && ctx.arc(x + width - r2, y + r2, r2, -Math.PI / 2, 0);\n    ctx.lineTo(x + width, y + height - r3);\n    r3 !== 0 && ctx.arc(x + width - r3, y + height - r3, r3, 0, Math.PI / 2);\n    ctx.lineTo(x + r4, y + height);\n    r4 !== 0 && ctx.arc(x + r4, y + height - r4, r4, Math.PI / 2, Math.PI);\n    ctx.lineTo(x, y + r1);\n    r1 !== 0 && ctx.arc(x + r1, y + r1, r1, Math.PI, Math.PI * 1.5);\n}\n","var round = Math.round;\nexport function subPixelOptimizeLine(outputShape, inputShape, style) {\n    if (!inputShape) {\n        return;\n    }\n    var x1 = inputShape.x1;\n    var x2 = inputShape.x2;\n    var y1 = inputShape.y1;\n    var y2 = inputShape.y2;\n    outputShape.x1 = x1;\n    outputShape.x2 = x2;\n    outputShape.y1 = y1;\n    outputShape.y2 = y2;\n    var lineWidth = style && style.lineWidth;\n    if (!lineWidth) {\n        return outputShape;\n    }\n    if (round(x1 * 2) === round(x2 * 2)) {\n        outputShape.x1 = outputShape.x2 = subPixelOptimize(x1, lineWidth, true);\n    }\n    if (round(y1 * 2) === round(y2 * 2)) {\n        outputShape.y1 = outputShape.y2 = subPixelOptimize(y1, lineWidth, true);\n    }\n    return outputShape;\n}\nexport function subPixelOptimizeRect(outputShape, inputShape, style) {\n    if (!inputShape) {\n        return;\n    }\n    var originX = inputShape.x;\n    var originY = inputShape.y;\n    var originWidth = inputShape.width;\n    var originHeight = inputShape.height;\n    outputShape.x = originX;\n    outputShape.y = originY;\n    outputShape.width = originWidth;\n    outputShape.height = originHeight;\n    var lineWidth = style && style.lineWidth;\n    if (!lineWidth) {\n        return outputShape;\n    }\n    outputShape.x = subPixelOptimize(originX, lineWidth, true);\n    outputShape.y = subPixelOptimize(originY, lineWidth, true);\n    outputShape.width = Math.max(subPixelOptimize(originX + originWidth, lineWidth, false) - outputShape.x, originWidth === 0 ? 0 : 1);\n    outputShape.height = Math.max(subPixelOptimize(originY + originHeight, lineWidth, false) - outputShape.y, originHeight === 0 ? 0 : 1);\n    return outputShape;\n}\nexport function subPixelOptimize(position, lineWidth, positiveOrNegative) {\n    if (!lineWidth) {\n        return position;\n    }\n    var doubledPosition = round(position * 2);\n    return (doubledPosition + round(lineWidth)) % 2 === 0\n        ? doubledPosition / 2\n        : (doubledPosition + (positiveOrNegative ? 1 : -1)) / 2;\n}\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as roundRectHelper from '../helper/roundRect.js';\nimport { subPixelOptimizeRect } from '../helper/subPixelOptimize.js';\nvar RectShape = (function () {\n    function RectShape() {\n        this.x = 0;\n        this.y = 0;\n        this.width = 0;\n        this.height = 0;\n    }\n    return RectShape;\n}());\nexport { RectShape };\nvar subPixelOptimizeOutputShape = {};\nvar Rect = (function (_super) {\n    __extends(Rect, _super);\n    function Rect(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Rect.prototype.getDefaultShape = function () {\n        return new RectShape();\n    };\n    Rect.prototype.buildPath = function (ctx, shape) {\n        var x;\n        var y;\n        var width;\n        var height;\n        if (this.subPixelOptimize) {\n            var optimizedShape = subPixelOptimizeRect(subPixelOptimizeOutputShape, shape, this.style);\n            x = optimizedShape.x;\n            y = optimizedShape.y;\n            width = optimizedShape.width;\n            height = optimizedShape.height;\n            optimizedShape.r = shape.r;\n            shape = optimizedShape;\n        }\n        else {\n            x = shape.x;\n            y = shape.y;\n            width = shape.width;\n            height = shape.height;\n        }\n        if (!shape.r) {\n            ctx.rect(x, y, width, height);\n        }\n        else {\n            roundRectHelper.buildPath(ctx, shape);\n        }\n    };\n    Rect.prototype.isZeroArea = function () {\n        return !this.shape.width || !this.shape.height;\n    };\n    return Rect;\n}(Path));\nRect.prototype.type = 'rect';\nexport default Rect;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar EllipseShape = (function () {\n    function EllipseShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.rx = 0;\n        this.ry = 0;\n    }\n    return EllipseShape;\n}());\nexport { EllipseShape };\nvar Ellipse = (function (_super) {\n    __extends(Ellipse, _super);\n    function Ellipse(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Ellipse.prototype.getDefaultShape = function () {\n        return new EllipseShape();\n    };\n    Ellipse.prototype.buildPath = function (ctx, shape) {\n        var k = 0.5522848;\n        var x = shape.cx;\n        var y = shape.cy;\n        var a = shape.rx;\n        var b = shape.ry;\n        var ox = a * k;\n        var oy = b * k;\n        ctx.moveTo(x - a, y);\n        ctx.bezierCurveTo(x - a, y - oy, x - ox, y - b, x, y - b);\n        ctx.bezierCurveTo(x + ox, y - b, x + a, y - oy, x + a, y);\n        ctx.bezierCurveTo(x + a, y + oy, x + ox, y + b, x, y + b);\n        ctx.bezierCurveTo(x - ox, y + b, x - a, y + oy, x - a, y);\n        ctx.closePath();\n    };\n    return Ellipse;\n}(Path));\nEllipse.prototype.type = 'ellipse';\nexport default Ellipse;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport { subPixelOptimizeLine } from '../helper/subPixelOptimize.js';\nvar subPixelOptimizeOutputShape = {};\nvar LineShape = (function () {\n    function LineShape() {\n        this.x1 = 0;\n        this.y1 = 0;\n        this.x2 = 0;\n        this.y2 = 0;\n        this.percent = 1;\n    }\n    return LineShape;\n}());\nexport { LineShape };\nvar Line = (function (_super) {\n    __extends(Line, _super);\n    function Line(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Line.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    Line.prototype.getDefaultShape = function () {\n        return new LineShape();\n    };\n    Line.prototype.buildPath = function (ctx, shape) {\n        var x1;\n        var y1;\n        var x2;\n        var y2;\n        if (this.subPixelOptimize) {\n            var optimizedShape = subPixelOptimizeLine(subPixelOptimizeOutputShape, shape, this.style);\n            x1 = optimizedShape.x1;\n            y1 = optimizedShape.y1;\n            x2 = optimizedShape.x2;\n            y2 = optimizedShape.y2;\n        }\n        else {\n            x1 = shape.x1;\n            y1 = shape.y1;\n            x2 = shape.x2;\n            y2 = shape.y2;\n        }\n        var percent = shape.percent;\n        if (percent === 0) {\n            return;\n        }\n        ctx.moveTo(x1, y1);\n        if (percent < 1) {\n            x2 = x1 * (1 - percent) + x2 * percent;\n            y2 = y1 * (1 - percent) + y2 * percent;\n        }\n        ctx.lineTo(x2, y2);\n    };\n    Line.prototype.pointAt = function (p) {\n        var shape = this.shape;\n        return [\n            shape.x1 * (1 - p) + shape.x2 * p,\n            shape.y1 * (1 - p) + shape.y2 * p\n        ];\n    };\n    return Line;\n}(Path));\nLine.prototype.type = 'line';\nexport default Line;\n","import { min as v2Min, max as v2Max, scale as v2Scale, distance as v2Distance, add as v2Add, clone as v2Clone, sub as v2Sub } from '../../core/vector.js';\nexport default function smoothBezier(points, smooth, isLoop, constraint) {\n    var cps = [];\n    var v = [];\n    var v1 = [];\n    var v2 = [];\n    var prevPoint;\n    var nextPoint;\n    var min;\n    var max;\n    if (constraint) {\n        min = [Infinity, Infinity];\n        max = [-Infinity, -Infinity];\n        for (var i = 0, len = points.length; i < len; i++) {\n            v2Min(min, min, points[i]);\n            v2Max(max, max, points[i]);\n        }\n        v2Min(min, min, constraint[0]);\n        v2Max(max, max, constraint[1]);\n    }\n    for (var i = 0, len = points.length; i < len; i++) {\n        var point = points[i];\n        if (isLoop) {\n            prevPoint = points[i ? i - 1 : len - 1];\n            nextPoint = points[(i + 1) % len];\n        }\n        else {\n            if (i === 0 || i === len - 1) {\n                cps.push(v2Clone(points[i]));\n                continue;\n            }\n            else {\n                prevPoint = points[i - 1];\n                nextPoint = points[i + 1];\n            }\n        }\n        v2Sub(v, nextPoint, prevPoint);\n        v2Scale(v, v, smooth);\n        var d0 = v2Distance(point, prevPoint);\n        var d1 = v2Distance(point, nextPoint);\n        var sum = d0 + d1;\n        if (sum !== 0) {\n            d0 /= sum;\n            d1 /= sum;\n        }\n        v2Scale(v1, v, -d0);\n        v2Scale(v2, v, d1);\n        var cp0 = v2Add([], point, v1);\n        var cp1 = v2Add([], point, v2);\n        if (constraint) {\n            v2Max(cp0, cp0, min);\n            v2Min(cp0, cp0, max);\n            v2Max(cp1, cp1, min);\n            v2Min(cp1, cp1, max);\n        }\n        cps.push(cp0);\n        cps.push(cp1);\n    }\n    if (isLoop) {\n        cps.push(cps.shift());\n    }\n    return cps;\n}\n","import smoothBezier from './smoothBezier.js';\nexport function buildPath(ctx, shape, closePath) {\n    var smooth = shape.smooth;\n    var points = shape.points;\n    if (points && points.length >= 2) {\n        if (smooth) {\n            var controlPoints = smoothBezier(points, smooth, closePath, shape.smoothConstraint);\n            ctx.moveTo(points[0][0], points[0][1]);\n            var len = points.length;\n            for (var i = 0; i < (closePath ? len : len - 1); i++) {\n                var cp1 = controlPoints[i * 2];\n                var cp2 = controlPoints[i * 2 + 1];\n                var p = points[(i + 1) % len];\n                ctx.bezierCurveTo(cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]);\n            }\n        }\n        else {\n            ctx.moveTo(points[0][0], points[0][1]);\n            for (var i = 1, l = points.length; i < l; i++) {\n                ctx.lineTo(points[i][0], points[i][1]);\n            }\n        }\n        closePath && ctx.closePath();\n    }\n}\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as polyHelper from '../helper/poly.js';\nvar PolygonShape = (function () {\n    function PolygonShape() {\n        this.points = null;\n        this.smooth = 0;\n        this.smoothConstraint = null;\n    }\n    return PolygonShape;\n}());\nexport { PolygonShape };\nvar Polygon = (function (_super) {\n    __extends(Polygon, _super);\n    function Polygon(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Polygon.prototype.getDefaultShape = function () {\n        return new PolygonShape();\n    };\n    Polygon.prototype.buildPath = function (ctx, shape) {\n        polyHelper.buildPath(ctx, shape, true);\n    };\n    return Polygon;\n}(Path));\n;\nPolygon.prototype.type = 'polygon';\nexport default Polygon;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as polyHelper from '../helper/poly.js';\nvar PolylineShape = (function () {\n    function PolylineShape() {\n        this.points = null;\n        this.percent = 1;\n        this.smooth = 0;\n        this.smoothConstraint = null;\n    }\n    return PolylineShape;\n}());\nexport { PolylineShape };\nvar Polyline = (function (_super) {\n    __extends(Polyline, _super);\n    function Polyline(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Polyline.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    Polyline.prototype.getDefaultShape = function () {\n        return new PolylineShape();\n    };\n    Polyline.prototype.buildPath = function (ctx, shape) {\n        polyHelper.buildPath(ctx, shape, false);\n    };\n    return Polyline;\n}(Path));\nPolyline.prototype.type = 'polyline';\nexport default Polyline;\n","var Gradient = (function () {\n    function Gradient(colorStops) {\n        this.colorStops = colorStops || [];\n    }\n    Gradient.prototype.addColorStop = function (offset, color) {\n        this.colorStops.push({\n            offset: offset,\n            color: color\n        });\n    };\n    return Gradient;\n}());\nexport default Gradient;\n","import { __extends } from \"tslib\";\nimport Gradient from './Gradient.js';\nvar LinearGradient = (function (_super) {\n    __extends(LinearGradient, _super);\n    function LinearGradient(x, y, x2, y2, colorStops, globalCoord) {\n        var _this = _super.call(this, colorStops) || this;\n        _this.x = x == null ? 0 : x;\n        _this.y = y == null ? 0 : y;\n        _this.x2 = x2 == null ? 1 : x2;\n        _this.y2 = y2 == null ? 0 : y2;\n        _this.type = 'linear';\n        _this.global = globalCoord || false;\n        return _this;\n    }\n    return LinearGradient;\n}(Gradient));\nexport default LinearGradient;\n;\n","import { __extends } from \"tslib\";\nimport Gradient from './Gradient.js';\nvar RadialGradient = (function (_super) {\n    __extends(RadialGradient, _super);\n    function RadialGradient(x, y, r, colorStops, globalCoord) {\n        var _this = _super.call(this, colorStops) || this;\n        _this.x = x == null ? 0.5 : x;\n        _this.y = y == null ? 0.5 : y;\n        _this.r = r == null ? 0.5 : r;\n        _this.type = 'radial';\n        _this.global = globalCoord || false;\n        return _this;\n    }\n    return RadialGradient;\n}(Gradient));\nexport default RadialGradient;\n","import LRU from '../../core/LRU.js';\nimport { platformApi } from '../../core/platform.js';\nvar globalImageCache = new LRU(50);\nexport function findExistImage(newImageOrSrc) {\n    if (typeof newImageOrSrc === 'string') {\n        var cachedImgObj = globalImageCache.get(newImageOrSrc);\n        return cachedImgObj && cachedImgObj.image;\n    }\n    else {\n        return newImageOrSrc;\n    }\n}\nexport function createOrUpdateImage(newImageOrSrc, image, hostEl, onload, cbPayload) {\n    if (!newImageOrSrc) {\n        return image;\n    }\n    else if (typeof newImageOrSrc === 'string') {\n        if ((image && image.__zrImageSrc === newImageOrSrc) || !hostEl) {\n            return image;\n        }\n        var cachedImgObj = globalImageCache.get(newImageOrSrc);\n        var pendingWrap = { hostEl: hostEl, cb: onload, cbPayload: cbPayload };\n        if (cachedImgObj) {\n            image = cachedImgObj.image;\n            !isImageReady(image) && cachedImgObj.pending.push(pendingWrap);\n        }\n        else {\n            image = platformApi.loadImage(newImageOrSrc, imageOnLoad, imageOnLoad);\n            image.__zrImageSrc = newImageOrSrc;\n            globalImageCache.put(newImageOrSrc, image.__cachedImgObj = {\n                image: image,\n                pending: [pendingWrap]\n            });\n        }\n        return image;\n    }\n    else {\n        return newImageOrSrc;\n    }\n}\nfunction imageOnLoad() {\n    var cachedImgObj = this.__cachedImgObj;\n    this.onload = this.onerror = this.__cachedImgObj = null;\n    for (var i = 0; i < cachedImgObj.pending.length; i++) {\n        var pendingWrap = cachedImgObj.pending[i];\n        var cb = pendingWrap.cb;\n        cb && cb(this, pendingWrap.cbPayload);\n        pendingWrap.hostEl.dirty();\n    }\n    cachedImgObj.pending.length = 0;\n}\nexport function isImageReady(image) {\n    return image && image.width && image.height;\n}\n","import * as imageHelper from '../helper/image.js';\nimport { extend, retrieve2, retrieve3, reduce, } from '../../core/util.js';\nimport { adjustTextX, adjustTextY, ensureFontMeasureInfo, getLineHeight, measureCharWidth, measureWidth, parsePercent, } from '../../contain/text.js';\nimport BoundingRect from '../../core/BoundingRect.js';\nvar STYLE_REG = /\\{([a-zA-Z0-9_]+)\\|([^}]*)\\}/g;\nexport function truncateText(text, containerWidth, font, ellipsis, options) {\n    var out = {};\n    truncateText2(out, text, containerWidth, font, ellipsis, options);\n    return out.text;\n}\nfunction truncateText2(out, text, containerWidth, font, ellipsis, options) {\n    if (!containerWidth) {\n        out.text = '';\n        out.isTruncated = false;\n        return;\n    }\n    var textLines = (text + '').split('\\n');\n    options = prepareTruncateOptions(containerWidth, font, ellipsis, options);\n    var isTruncated = false;\n    var truncateOut = {};\n    for (var i = 0, len = textLines.length; i < len; i++) {\n        truncateSingleLine(truncateOut, textLines[i], options);\n        textLines[i] = truncateOut.textLine;\n        isTruncated = isTruncated || truncateOut.isTruncated;\n    }\n    out.text = textLines.join('\\n');\n    out.isTruncated = isTruncated;\n}\nfunction prepareTruncateOptions(containerWidth, font, ellipsis, options) {\n    options = options || {};\n    var preparedOpts = extend({}, options);\n    ellipsis = retrieve2(ellipsis, '...');\n    preparedOpts.maxIterations = retrieve2(options.maxIterations, 2);\n    var minChar = preparedOpts.minChar = retrieve2(options.minChar, 0);\n    var fontMeasureInfo = preparedOpts.fontMeasureInfo = ensureFontMeasureInfo(font);\n    var ascCharWidth = fontMeasureInfo.asciiCharWidth;\n    preparedOpts.placeholder = retrieve2(options.placeholder, '');\n    var contentWidth = containerWidth = Math.max(0, containerWidth - 1);\n    for (var i = 0; i < minChar && contentWidth >= ascCharWidth; i++) {\n        contentWidth -= ascCharWidth;\n    }\n    var ellipsisWidth = measureWidth(fontMeasureInfo, ellipsis);\n    if (ellipsisWidth > contentWidth) {\n        ellipsis = '';\n        ellipsisWidth = 0;\n    }\n    contentWidth = containerWidth - ellipsisWidth;\n    preparedOpts.ellipsis = ellipsis;\n    preparedOpts.ellipsisWidth = ellipsisWidth;\n    preparedOpts.contentWidth = contentWidth;\n    preparedOpts.containerWidth = containerWidth;\n    return preparedOpts;\n}\nfunction truncateSingleLine(out, textLine, options) {\n    var containerWidth = options.containerWidth;\n    var contentWidth = options.contentWidth;\n    var fontMeasureInfo = options.fontMeasureInfo;\n    if (!containerWidth) {\n        out.textLine = '';\n        out.isTruncated = false;\n        return;\n    }\n    var lineWidth = measureWidth(fontMeasureInfo, textLine);\n    if (lineWidth <= containerWidth) {\n        out.textLine = textLine;\n        out.isTruncated = false;\n        return;\n    }\n    for (var j = 0;; j++) {\n        if (lineWidth <= contentWidth || j >= options.maxIterations) {\n            textLine += options.ellipsis;\n            break;\n        }\n        var subLength = j === 0\n            ? estimateLength(textLine, contentWidth, fontMeasureInfo)\n            : lineWidth > 0\n                ? Math.floor(textLine.length * contentWidth / lineWidth)\n                : 0;\n        textLine = textLine.substr(0, subLength);\n        lineWidth = measureWidth(fontMeasureInfo, textLine);\n    }\n    if (textLine === '') {\n        textLine = options.placeholder;\n    }\n    out.textLine = textLine;\n    out.isTruncated = true;\n}\nfunction estimateLength(text, contentWidth, fontMeasureInfo) {\n    var width = 0;\n    var i = 0;\n    for (var len = text.length; i < len && width < contentWidth; i++) {\n        width += measureCharWidth(fontMeasureInfo, text.charCodeAt(i));\n    }\n    return i;\n}\nexport function parsePlainText(rawText, style, defaultOuterWidth, defaultOuterHeight) {\n    var text = formatText(rawText);\n    var overflow = style.overflow;\n    var padding = style.padding;\n    var paddingH = padding ? padding[1] + padding[3] : 0;\n    var paddingV = padding ? padding[0] + padding[2] : 0;\n    var font = style.font;\n    var truncate = overflow === 'truncate';\n    var calculatedLineHeight = getLineHeight(font);\n    var lineHeight = retrieve2(style.lineHeight, calculatedLineHeight);\n    var truncateLineOverflow = style.lineOverflow === 'truncate';\n    var isTruncated = false;\n    var width = style.width;\n    if (width == null && defaultOuterWidth != null) {\n        width = defaultOuterWidth - paddingH;\n    }\n    var height = style.height;\n    if (height == null && defaultOuterHeight != null) {\n        height = defaultOuterHeight - paddingV;\n    }\n    var lines;\n    if (width != null && (overflow === 'break' || overflow === 'breakAll')) {\n        lines = text ? wrapText(text, style.font, width, overflow === 'breakAll', 0).lines : [];\n    }\n    else {\n        lines = text ? text.split('\\n') : [];\n    }\n    var contentHeight = lines.length * lineHeight;\n    if (height == null) {\n        height = contentHeight;\n    }\n    if (contentHeight > height && truncateLineOverflow) {\n        var lineCount = Math.floor(height / lineHeight);\n        isTruncated = isTruncated || (lines.length > lineCount);\n        lines = lines.slice(0, lineCount);\n        contentHeight = lines.length * lineHeight;\n    }\n    if (text && truncate && width != null) {\n        var options = prepareTruncateOptions(width, font, style.ellipsis, {\n            minChar: style.truncateMinChar,\n            placeholder: style.placeholder\n        });\n        var singleOut = {};\n        for (var i = 0; i < lines.length; i++) {\n            truncateSingleLine(singleOut, lines[i], options);\n            lines[i] = singleOut.textLine;\n            isTruncated = isTruncated || singleOut.isTruncated;\n        }\n    }\n    var outerHeight = height;\n    var contentWidth = 0;\n    var fontMeasureInfo = ensureFontMeasureInfo(font);\n    for (var i = 0; i < lines.length; i++) {\n        contentWidth = Math.max(measureWidth(fontMeasureInfo, lines[i]), contentWidth);\n    }\n    if (width == null) {\n        width = contentWidth;\n    }\n    var outerWidth = width;\n    outerHeight += paddingV;\n    outerWidth += paddingH;\n    return {\n        lines: lines,\n        height: height,\n        outerWidth: outerWidth,\n        outerHeight: outerHeight,\n        lineHeight: lineHeight,\n        calculatedLineHeight: calculatedLineHeight,\n        contentWidth: contentWidth,\n        contentHeight: contentHeight,\n        width: width,\n        isTruncated: isTruncated\n    };\n}\nvar RichTextToken = (function () {\n    function RichTextToken() {\n    }\n    return RichTextToken;\n}());\nvar RichTextLine = (function () {\n    function RichTextLine(tokens) {\n        this.tokens = [];\n        if (tokens) {\n            this.tokens = tokens;\n        }\n    }\n    return RichTextLine;\n}());\nvar RichTextContentBlock = (function () {\n    function RichTextContentBlock() {\n        this.width = 0;\n        this.height = 0;\n        this.contentWidth = 0;\n        this.contentHeight = 0;\n        this.outerWidth = 0;\n        this.outerHeight = 0;\n        this.lines = [];\n        this.isTruncated = false;\n    }\n    return RichTextContentBlock;\n}());\nexport { RichTextContentBlock };\nexport function parseRichText(rawText, style, defaultOuterWidth, defaultOuterHeight, topTextAlign) {\n    var contentBlock = new RichTextContentBlock();\n    var text = formatText(rawText);\n    if (!text) {\n        return contentBlock;\n    }\n    var stlPadding = style.padding;\n    var stlPaddingH = stlPadding ? stlPadding[1] + stlPadding[3] : 0;\n    var stlPaddingV = stlPadding ? stlPadding[0] + stlPadding[2] : 0;\n    var topWidth = style.width;\n    if (topWidth == null && defaultOuterWidth != null) {\n        topWidth = defaultOuterWidth - stlPaddingH;\n    }\n    var topHeight = style.height;\n    if (topHeight == null && defaultOuterHeight != null) {\n        topHeight = defaultOuterHeight - stlPaddingV;\n    }\n    var overflow = style.overflow;\n    var wrapInfo = (overflow === 'break' || overflow === 'breakAll') && topWidth != null\n        ? { width: topWidth, accumWidth: 0, breakAll: overflow === 'breakAll' }\n        : null;\n    var lastIndex = STYLE_REG.lastIndex = 0;\n    var result;\n    while ((result = STYLE_REG.exec(text)) != null) {\n        var matchedIndex = result.index;\n        if (matchedIndex > lastIndex) {\n            pushTokens(contentBlock, text.substring(lastIndex, matchedIndex), style, wrapInfo);\n        }\n        pushTokens(contentBlock, result[2], style, wrapInfo, result[1]);\n        lastIndex = STYLE_REG.lastIndex;\n    }\n    if (lastIndex < text.length) {\n        pushTokens(contentBlock, text.substring(lastIndex, text.length), style, wrapInfo);\n    }\n    var pendingList = [];\n    var calculatedHeight = 0;\n    var calculatedWidth = 0;\n    var truncate = overflow === 'truncate';\n    var truncateLine = style.lineOverflow === 'truncate';\n    var tmpTruncateOut = {};\n    function finishLine(line, lineWidth, lineHeight) {\n        line.width = lineWidth;\n        line.lineHeight = lineHeight;\n        calculatedHeight += lineHeight;\n        calculatedWidth = Math.max(calculatedWidth, lineWidth);\n    }\n    outer: for (var i = 0; i < contentBlock.lines.length; i++) {\n        var line = contentBlock.lines[i];\n        var lineHeight = 0;\n        var lineWidth = 0;\n        for (var j = 0; j < line.tokens.length; j++) {\n            var token = line.tokens[j];\n            var tokenStyle = token.styleName && style.rich[token.styleName] || {};\n            var textPadding = token.textPadding = tokenStyle.padding;\n            var paddingH = textPadding ? textPadding[1] + textPadding[3] : 0;\n            var font = token.font = tokenStyle.font || style.font;\n            token.contentHeight = getLineHeight(font);\n            var tokenHeight = retrieve2(tokenStyle.height, token.contentHeight);\n            token.innerHeight = tokenHeight;\n            textPadding && (tokenHeight += textPadding[0] + textPadding[2]);\n            token.height = tokenHeight;\n            token.lineHeight = retrieve3(tokenStyle.lineHeight, style.lineHeight, tokenHeight);\n            token.align = tokenStyle && tokenStyle.align || topTextAlign;\n            token.verticalAlign = tokenStyle && tokenStyle.verticalAlign || 'middle';\n            if (truncateLine && topHeight != null && calculatedHeight + token.lineHeight > topHeight) {\n                var originalLength = contentBlock.lines.length;\n                if (j > 0) {\n                    line.tokens = line.tokens.slice(0, j);\n                    finishLine(line, lineWidth, lineHeight);\n                    contentBlock.lines = contentBlock.lines.slice(0, i + 1);\n                }\n                else {\n                    contentBlock.lines = contentBlock.lines.slice(0, i);\n                }\n                contentBlock.isTruncated = contentBlock.isTruncated || (contentBlock.lines.length < originalLength);\n                break outer;\n            }\n            var styleTokenWidth = tokenStyle.width;\n            var tokenWidthNotSpecified = styleTokenWidth == null || styleTokenWidth === 'auto';\n            if (typeof styleTokenWidth === 'string' && styleTokenWidth.charAt(styleTokenWidth.length - 1) === '%') {\n                token.percentWidth = styleTokenWidth;\n                pendingList.push(token);\n                token.contentWidth = measureWidth(ensureFontMeasureInfo(font), token.text);\n            }\n            else {\n                if (tokenWidthNotSpecified) {\n                    var textBackgroundColor = tokenStyle.backgroundColor;\n                    var bgImg = textBackgroundColor && textBackgroundColor.image;\n                    if (bgImg) {\n                        bgImg = imageHelper.findExistImage(bgImg);\n                        if (imageHelper.isImageReady(bgImg)) {\n                            token.width = Math.max(token.width, bgImg.width * tokenHeight / bgImg.height);\n                        }\n                    }\n                }\n                var remainTruncWidth = truncate && topWidth != null\n                    ? topWidth - lineWidth : null;\n                if (remainTruncWidth != null && remainTruncWidth < token.width) {\n                    if (!tokenWidthNotSpecified || remainTruncWidth < paddingH) {\n                        token.text = '';\n                        token.width = token.contentWidth = 0;\n                    }\n                    else {\n                        truncateText2(tmpTruncateOut, token.text, remainTruncWidth - paddingH, font, style.ellipsis, { minChar: style.truncateMinChar });\n                        token.text = tmpTruncateOut.text;\n                        contentBlock.isTruncated = contentBlock.isTruncated || tmpTruncateOut.isTruncated;\n                        token.width = token.contentWidth = measureWidth(ensureFontMeasureInfo(font), token.text);\n                    }\n                }\n                else {\n                    token.contentWidth = measureWidth(ensureFontMeasureInfo(font), token.text);\n                }\n            }\n            token.width += paddingH;\n            lineWidth += token.width;\n            tokenStyle && (lineHeight = Math.max(lineHeight, token.lineHeight));\n        }\n        finishLine(line, lineWidth, lineHeight);\n    }\n    contentBlock.outerWidth = contentBlock.width = retrieve2(topWidth, calculatedWidth);\n    contentBlock.outerHeight = contentBlock.height = retrieve2(topHeight, calculatedHeight);\n    contentBlock.contentHeight = calculatedHeight;\n    contentBlock.contentWidth = calculatedWidth;\n    contentBlock.outerWidth += stlPaddingH;\n    contentBlock.outerHeight += stlPaddingV;\n    for (var i = 0; i < pendingList.length; i++) {\n        var token = pendingList[i];\n        var percentWidth = token.percentWidth;\n        token.width = parseInt(percentWidth, 10) / 100 * contentBlock.width;\n    }\n    return contentBlock;\n}\nfunction pushTokens(block, str, style, wrapInfo, styleName) {\n    var isEmptyStr = str === '';\n    var tokenStyle = styleName && style.rich[styleName] || {};\n    var lines = block.lines;\n    var font = tokenStyle.font || style.font;\n    var newLine = false;\n    var strLines;\n    var linesWidths;\n    if (wrapInfo) {\n        var tokenPadding = tokenStyle.padding;\n        var tokenPaddingH = tokenPadding ? tokenPadding[1] + tokenPadding[3] : 0;\n        if (tokenStyle.width != null && tokenStyle.width !== 'auto') {\n            var outerWidth_1 = parsePercent(tokenStyle.width, wrapInfo.width) + tokenPaddingH;\n            if (lines.length > 0) {\n                if (outerWidth_1 + wrapInfo.accumWidth > wrapInfo.width) {\n                    strLines = str.split('\\n');\n                    newLine = true;\n                }\n            }\n            wrapInfo.accumWidth = outerWidth_1;\n        }\n        else {\n            var res = wrapText(str, font, wrapInfo.width, wrapInfo.breakAll, wrapInfo.accumWidth);\n            wrapInfo.accumWidth = res.accumWidth + tokenPaddingH;\n            linesWidths = res.linesWidths;\n            strLines = res.lines;\n        }\n    }\n    if (!strLines) {\n        strLines = str.split('\\n');\n    }\n    var fontMeasureInfo = ensureFontMeasureInfo(font);\n    for (var i = 0; i < strLines.length; i++) {\n        var text = strLines[i];\n        var token = new RichTextToken();\n        token.styleName = styleName;\n        token.text = text;\n        token.isLineHolder = !text && !isEmptyStr;\n        if (typeof tokenStyle.width === 'number') {\n            token.width = tokenStyle.width;\n        }\n        else {\n            token.width = linesWidths\n                ? linesWidths[i]\n                : measureWidth(fontMeasureInfo, text);\n        }\n        if (!i && !newLine) {\n            var tokens = (lines[lines.length - 1] || (lines[0] = new RichTextLine())).tokens;\n            var tokensLen = tokens.length;\n            (tokensLen === 1 && tokens[0].isLineHolder)\n                ? (tokens[0] = token)\n                : ((text || !tokensLen || isEmptyStr) && tokens.push(token));\n        }\n        else {\n            lines.push(new RichTextLine([token]));\n        }\n    }\n}\nfunction isAlphabeticLetter(ch) {\n    var code = ch.charCodeAt(0);\n    return code >= 0x20 && code <= 0x24F\n        || code >= 0x370 && code <= 0x10FF\n        || code >= 0x1200 && code <= 0x13FF\n        || code >= 0x1E00 && code <= 0x206F;\n}\nvar breakCharMap = reduce(',&?/;] '.split(''), function (obj, ch) {\n    obj[ch] = true;\n    return obj;\n}, {});\nfunction isWordBreakChar(ch) {\n    if (isAlphabeticLetter(ch)) {\n        if (breakCharMap[ch]) {\n            return true;\n        }\n        return false;\n    }\n    return true;\n}\nfunction wrapText(text, font, lineWidth, isBreakAll, lastAccumWidth) {\n    var lines = [];\n    var linesWidths = [];\n    var line = '';\n    var currentWord = '';\n    var currentWordWidth = 0;\n    var accumWidth = 0;\n    var fontMeasureInfo = ensureFontMeasureInfo(font);\n    for (var i = 0; i < text.length; i++) {\n        var ch = text.charAt(i);\n        if (ch === '\\n') {\n            if (currentWord) {\n                line += currentWord;\n                accumWidth += currentWordWidth;\n            }\n            lines.push(line);\n            linesWidths.push(accumWidth);\n            line = '';\n            currentWord = '';\n            currentWordWidth = 0;\n            accumWidth = 0;\n            continue;\n        }\n        var chWidth = measureCharWidth(fontMeasureInfo, ch.charCodeAt(0));\n        var inWord = isBreakAll ? false : !isWordBreakChar(ch);\n        if (!lines.length\n            ? lastAccumWidth + accumWidth + chWidth > lineWidth\n            : accumWidth + chWidth > lineWidth) {\n            if (!accumWidth) {\n                if (inWord) {\n                    lines.push(currentWord);\n                    linesWidths.push(currentWordWidth);\n                    currentWord = ch;\n                    currentWordWidth = chWidth;\n                }\n                else {\n                    lines.push(ch);\n                    linesWidths.push(chWidth);\n                }\n            }\n            else if (line || currentWord) {\n                if (inWord) {\n                    if (!line) {\n                        line = currentWord;\n                        currentWord = '';\n                        currentWordWidth = 0;\n                        accumWidth = currentWordWidth;\n                    }\n                    lines.push(line);\n                    linesWidths.push(accumWidth - currentWordWidth);\n                    currentWord += ch;\n                    currentWordWidth += chWidth;\n                    line = '';\n                    accumWidth = currentWordWidth;\n                }\n                else {\n                    if (currentWord) {\n                        line += currentWord;\n                        currentWord = '';\n                        currentWordWidth = 0;\n                    }\n                    lines.push(line);\n                    linesWidths.push(accumWidth);\n                    line = ch;\n                    accumWidth = chWidth;\n                }\n            }\n            continue;\n        }\n        accumWidth += chWidth;\n        if (inWord) {\n            currentWord += ch;\n            currentWordWidth += chWidth;\n        }\n        else {\n            if (currentWord) {\n                line += currentWord;\n                currentWord = '';\n                currentWordWidth = 0;\n            }\n            line += ch;\n        }\n    }\n    if (currentWord) {\n        line += currentWord;\n    }\n    if (line) {\n        lines.push(line);\n        linesWidths.push(accumWidth);\n    }\n    if (lines.length === 1) {\n        accumWidth += lastAccumWidth;\n    }\n    return {\n        accumWidth: accumWidth,\n        lines: lines,\n        linesWidths: linesWidths\n    };\n}\nexport function calcInnerTextOverflowArea(out, overflowRect, baseX, baseY, textAlign, textVerticalAlign) {\n    out.baseX = baseX;\n    out.baseY = baseY;\n    out.outerWidth = out.outerHeight = null;\n    if (!overflowRect) {\n        return;\n    }\n    var textWidth = overflowRect.width * 2;\n    var textHeight = overflowRect.height * 2;\n    BoundingRect.set(tmpCITCTextRect, adjustTextX(baseX, textWidth, textAlign), adjustTextY(baseY, textHeight, textVerticalAlign), textWidth, textHeight);\n    BoundingRect.intersect(overflowRect, tmpCITCTextRect, null, tmpCITCIntersectRectOpt);\n    var outIntersectRect = tmpCITCIntersectRectOpt.outIntersectRect;\n    out.outerWidth = outIntersectRect.width;\n    out.outerHeight = outIntersectRect.height;\n    out.baseX = adjustTextX(outIntersectRect.x, outIntersectRect.width, textAlign, true);\n    out.baseY = adjustTextY(outIntersectRect.y, outIntersectRect.height, textVerticalAlign, true);\n}\nvar tmpCITCTextRect = new BoundingRect(0, 0, 0, 0);\nvar tmpCITCIntersectRectOpt = { outIntersectRect: {}, clamp: true };\nfunction formatText(text) {\n    return text != null ? (text += '') : (text = '');\n}\nexport function tSpanCreateBoundingRect(style) {\n    var text = formatText(style.text);\n    var font = style.font;\n    var contentWidth = measureWidth(ensureFontMeasureInfo(font), text);\n    var contentHeight = getLineHeight(font);\n    return tSpanCreateBoundingRect2(style, contentWidth, contentHeight, null);\n}\nexport function tSpanCreateBoundingRect2(style, contentWidth, contentHeight, forceLineWidth) {\n    var rect = new BoundingRect(adjustTextX(style.x || 0, contentWidth, style.textAlign), adjustTextY(style.y || 0, contentHeight, style.textBaseline), contentWidth, contentHeight);\n    var lineWidth = forceLineWidth != null\n        ? forceLineWidth\n        : (tSpanHasStroke(style) ? style.lineWidth : 0);\n    if (lineWidth > 0) {\n        rect.x -= lineWidth / 2;\n        rect.y -= lineWidth / 2;\n        rect.width += lineWidth;\n        rect.height += lineWidth;\n    }\n    return rect;\n}\nexport function tSpanHasStroke(style) {\n    var stroke = style.stroke;\n    return stroke != null && stroke !== 'none' && style.lineWidth > 0;\n}\n","import { __extends } from \"tslib\";\nimport Displayable from './Displayable.js';\nimport { DEFAULT_PATH_STYLE } from './Path.js';\nimport { createObject, defaults } from '../core/util.js';\nimport { DEFAULT_FONT } from '../core/platform.js';\nimport { tSpanCreateBoundingRect, tSpanHasStroke } from './helper/parseText.js';\nexport var DEFAULT_TSPAN_STYLE = defaults({\n    strokeFirst: true,\n    font: DEFAULT_FONT,\n    x: 0,\n    y: 0,\n    textAlign: 'left',\n    textBaseline: 'top',\n    miterLimit: 2\n}, DEFAULT_PATH_STYLE);\nvar TSpan = (function (_super) {\n    __extends(TSpan, _super);\n    function TSpan() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TSpan.prototype.hasStroke = function () {\n        return tSpanHasStroke(this.style);\n    };\n    TSpan.prototype.hasFill = function () {\n        var style = this.style;\n        var fill = style.fill;\n        return fill != null && fill !== 'none';\n    };\n    TSpan.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_TSPAN_STYLE, obj);\n    };\n    TSpan.prototype.setBoundingRect = function (rect) {\n        this._rect = rect;\n    };\n    TSpan.prototype.getBoundingRect = function () {\n        if (!this._rect) {\n            this._rect = tSpanCreateBoundingRect(this.style);\n        }\n        return this._rect;\n    };\n    TSpan.initDefaultProps = (function () {\n        var tspanProto = TSpan.prototype;\n        tspanProto.dirtyRectTolerance = 10;\n    })();\n    return TSpan;\n}(Displayable));\nTSpan.prototype.type = 'tspan';\nexport default TSpan;\n","import { isArray } from '../../core/util.js';\nvar PI = Math.PI;\nvar PI2 = PI * 2;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar mathACos = Math.acos;\nvar mathATan2 = Math.atan2;\nvar mathAbs = Math.abs;\nvar mathSqrt = Math.sqrt;\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar e = 1e-4;\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n    var dx10 = x1 - x0;\n    var dy10 = y1 - y0;\n    var dx32 = x3 - x2;\n    var dy32 = y3 - y2;\n    var t = dy32 * dx10 - dx32 * dy10;\n    if (t * t < e) {\n        return;\n    }\n    t = (dx32 * (y0 - y2) - dy32 * (x0 - x2)) / t;\n    return [x0 + t * dx10, y0 + t * dy10];\n}\nfunction computeCornerTangents(x0, y0, x1, y1, radius, cr, clockwise) {\n    var x01 = x0 - x1;\n    var y01 = y0 - y1;\n    var lo = (clockwise ? cr : -cr) / mathSqrt(x01 * x01 + y01 * y01);\n    var ox = lo * y01;\n    var oy = -lo * x01;\n    var x11 = x0 + ox;\n    var y11 = y0 + oy;\n    var x10 = x1 + ox;\n    var y10 = y1 + oy;\n    var x00 = (x11 + x10) / 2;\n    var y00 = (y11 + y10) / 2;\n    var dx = x10 - x11;\n    var dy = y10 - y11;\n    var d2 = dx * dx + dy * dy;\n    var r = radius - cr;\n    var s = x11 * y10 - x10 * y11;\n    var d = (dy < 0 ? -1 : 1) * mathSqrt(mathMax(0, r * r * d2 - s * s));\n    var cx0 = (s * dy - dx * d) / d2;\n    var cy0 = (-s * dx - dy * d) / d2;\n    var cx1 = (s * dy + dx * d) / d2;\n    var cy1 = (-s * dx + dy * d) / d2;\n    var dx0 = cx0 - x00;\n    var dy0 = cy0 - y00;\n    var dx1 = cx1 - x00;\n    var dy1 = cy1 - y00;\n    if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) {\n        cx0 = cx1;\n        cy0 = cy1;\n    }\n    return {\n        cx: cx0,\n        cy: cy0,\n        x0: -ox,\n        y0: -oy,\n        x1: cx0 * (radius / r - 1),\n        y1: cy0 * (radius / r - 1)\n    };\n}\nfunction normalizeCornerRadius(cr) {\n    var arr;\n    if (isArray(cr)) {\n        var len = cr.length;\n        if (!len) {\n            return cr;\n        }\n        if (len === 1) {\n            arr = [cr[0], cr[0], 0, 0];\n        }\n        else if (len === 2) {\n            arr = [cr[0], cr[0], cr[1], cr[1]];\n        }\n        else if (len === 3) {\n            arr = cr.concat(cr[2]);\n        }\n        else {\n            arr = cr;\n        }\n    }\n    else {\n        arr = [cr, cr, cr, cr];\n    }\n    return arr;\n}\nexport function buildPath(ctx, shape) {\n    var _a;\n    var radius = mathMax(shape.r, 0);\n    var innerRadius = mathMax(shape.r0 || 0, 0);\n    var hasRadius = radius > 0;\n    var hasInnerRadius = innerRadius > 0;\n    if (!hasRadius && !hasInnerRadius) {\n        return;\n    }\n    if (!hasRadius) {\n        radius = innerRadius;\n        innerRadius = 0;\n    }\n    if (innerRadius > radius) {\n        var tmp = radius;\n        radius = innerRadius;\n        innerRadius = tmp;\n    }\n    var startAngle = shape.startAngle, endAngle = shape.endAngle;\n    if (isNaN(startAngle) || isNaN(endAngle)) {\n        return;\n    }\n    var cx = shape.cx, cy = shape.cy;\n    var clockwise = !!shape.clockwise;\n    var arc = mathAbs(endAngle - startAngle);\n    var mod = arc > PI2 && arc % PI2;\n    mod > e && (arc = mod);\n    if (!(radius > e)) {\n        ctx.moveTo(cx, cy);\n    }\n    else if (arc > PI2 - e) {\n        ctx.moveTo(cx + radius * mathCos(startAngle), cy + radius * mathSin(startAngle));\n        ctx.arc(cx, cy, radius, startAngle, endAngle, !clockwise);\n        if (innerRadius > e) {\n            ctx.moveTo(cx + innerRadius * mathCos(endAngle), cy + innerRadius * mathSin(endAngle));\n            ctx.arc(cx, cy, innerRadius, endAngle, startAngle, clockwise);\n        }\n    }\n    else {\n        var icrStart = void 0;\n        var icrEnd = void 0;\n        var ocrStart = void 0;\n        var ocrEnd = void 0;\n        var ocrs = void 0;\n        var ocre = void 0;\n        var icrs = void 0;\n        var icre = void 0;\n        var ocrMax = void 0;\n        var icrMax = void 0;\n        var limitedOcrMax = void 0;\n        var limitedIcrMax = void 0;\n        var xre = void 0;\n        var yre = void 0;\n        var xirs = void 0;\n        var yirs = void 0;\n        var xrs = radius * mathCos(startAngle);\n        var yrs = radius * mathSin(startAngle);\n        var xire = innerRadius * mathCos(endAngle);\n        var yire = innerRadius * mathSin(endAngle);\n        var hasArc = arc > e;\n        if (hasArc) {\n            var cornerRadius = shape.cornerRadius;\n            if (cornerRadius) {\n                _a = normalizeCornerRadius(cornerRadius), icrStart = _a[0], icrEnd = _a[1], ocrStart = _a[2], ocrEnd = _a[3];\n            }\n            var halfRd = mathAbs(radius - innerRadius) / 2;\n            ocrs = mathMin(halfRd, ocrStart);\n            ocre = mathMin(halfRd, ocrEnd);\n            icrs = mathMin(halfRd, icrStart);\n            icre = mathMin(halfRd, icrEnd);\n            limitedOcrMax = ocrMax = mathMax(ocrs, ocre);\n            limitedIcrMax = icrMax = mathMax(icrs, icre);\n            if (ocrMax > e || icrMax > e) {\n                xre = radius * mathCos(endAngle);\n                yre = radius * mathSin(endAngle);\n                xirs = innerRadius * mathCos(startAngle);\n                yirs = innerRadius * mathSin(startAngle);\n                if (arc < PI) {\n                    var it_1 = intersect(xrs, yrs, xirs, yirs, xre, yre, xire, yire);\n                    if (it_1) {\n                        var x0 = xrs - it_1[0];\n                        var y0 = yrs - it_1[1];\n                        var x1 = xre - it_1[0];\n                        var y1 = yre - it_1[1];\n                        var a = 1 / mathSin(mathACos((x0 * x1 + y0 * y1) / (mathSqrt(x0 * x0 + y0 * y0) * mathSqrt(x1 * x1 + y1 * y1))) / 2);\n                        var b = mathSqrt(it_1[0] * it_1[0] + it_1[1] * it_1[1]);\n                        limitedOcrMax = mathMin(ocrMax, (radius - b) / (a + 1));\n                        limitedIcrMax = mathMin(icrMax, (innerRadius - b) / (a - 1));\n                    }\n                }\n            }\n        }\n        if (!hasArc) {\n            ctx.moveTo(cx + xrs, cy + yrs);\n        }\n        else if (limitedOcrMax > e) {\n            var crStart = mathMin(ocrStart, limitedOcrMax);\n            var crEnd = mathMin(ocrEnd, limitedOcrMax);\n            var ct0 = computeCornerTangents(xirs, yirs, xrs, yrs, radius, crStart, clockwise);\n            var ct1 = computeCornerTangents(xre, yre, xire, yire, radius, crEnd, clockwise);\n            ctx.moveTo(cx + ct0.cx + ct0.x0, cy + ct0.cy + ct0.y0);\n            if (limitedOcrMax < ocrMax && crStart === crEnd) {\n                ctx.arc(cx + ct0.cx, cy + ct0.cy, limitedOcrMax, mathATan2(ct0.y0, ct0.x0), mathATan2(ct1.y0, ct1.x0), !clockwise);\n            }\n            else {\n                crStart > 0 && ctx.arc(cx + ct0.cx, cy + ct0.cy, crStart, mathATan2(ct0.y0, ct0.x0), mathATan2(ct0.y1, ct0.x1), !clockwise);\n                ctx.arc(cx, cy, radius, mathATan2(ct0.cy + ct0.y1, ct0.cx + ct0.x1), mathATan2(ct1.cy + ct1.y1, ct1.cx + ct1.x1), !clockwise);\n                crEnd > 0 && ctx.arc(cx + ct1.cx, cy + ct1.cy, crEnd, mathATan2(ct1.y1, ct1.x1), mathATan2(ct1.y0, ct1.x0), !clockwise);\n            }\n        }\n        else {\n            ctx.moveTo(cx + xrs, cy + yrs);\n            ctx.arc(cx, cy, radius, startAngle, endAngle, !clockwise);\n        }\n        if (!(innerRadius > e) || !hasArc) {\n            ctx.lineTo(cx + xire, cy + yire);\n        }\n        else if (limitedIcrMax > e) {\n            var crStart = mathMin(icrStart, limitedIcrMax);\n            var crEnd = mathMin(icrEnd, limitedIcrMax);\n            var ct0 = computeCornerTangents(xire, yire, xre, yre, innerRadius, -crEnd, clockwise);\n            var ct1 = computeCornerTangents(xrs, yrs, xirs, yirs, innerRadius, -crStart, clockwise);\n            ctx.lineTo(cx + ct0.cx + ct0.x0, cy + ct0.cy + ct0.y0);\n            if (limitedIcrMax < icrMax && crStart === crEnd) {\n                ctx.arc(cx + ct0.cx, cy + ct0.cy, limitedIcrMax, mathATan2(ct0.y0, ct0.x0), mathATan2(ct1.y0, ct1.x0), !clockwise);\n            }\n            else {\n                crEnd > 0 && ctx.arc(cx + ct0.cx, cy + ct0.cy, crEnd, mathATan2(ct0.y0, ct0.x0), mathATan2(ct0.y1, ct0.x1), !clockwise);\n                ctx.arc(cx, cy, innerRadius, mathATan2(ct0.cy + ct0.y1, ct0.cx + ct0.x1), mathATan2(ct1.cy + ct1.y1, ct1.cx + ct1.x1), clockwise);\n                crStart > 0 && ctx.arc(cx + ct1.cx, cy + ct1.cy, crStart, mathATan2(ct1.y1, ct1.x1), mathATan2(ct1.y0, ct1.x0), !clockwise);\n            }\n        }\n        else {\n            ctx.lineTo(cx + xire, cy + yire);\n            ctx.arc(cx, cy, innerRadius, endAngle, startAngle, clockwise);\n        }\n    }\n    ctx.closePath();\n}\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as roundSectorHelper from '../helper/roundSector.js';\nvar SectorShape = (function () {\n    function SectorShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r0 = 0;\n        this.r = 0;\n        this.startAngle = 0;\n        this.endAngle = Math.PI * 2;\n        this.clockwise = true;\n        this.cornerRadius = 0;\n    }\n    return SectorShape;\n}());\nexport { SectorShape };\nvar Sector = (function (_super) {\n    __extends(Sector, _super);\n    function Sector(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Sector.prototype.getDefaultShape = function () {\n        return new SectorShape();\n    };\n    Sector.prototype.buildPath = function (ctx, shape) {\n        roundSectorHelper.buildPath(ctx, shape);\n    };\n    Sector.prototype.isZeroArea = function () {\n        return this.shape.startAngle === this.shape.endAngle\n            || this.shape.r === this.shape.r0;\n    };\n    return Sector;\n}(Path));\nSector.prototype.type = 'sector';\nexport default Sector;\n","import { __extends } from \"tslib\";\nimport Path from './Path.js';\nvar CompoundPath = (function (_super) {\n    __extends(CompoundPath, _super);\n    function CompoundPath() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'compound';\n        return _this;\n    }\n    CompoundPath.prototype._updatePathDirty = function () {\n        var paths = this.shape.paths;\n        var dirtyPath = this.shapeChanged();\n        for (var i = 0; i < paths.length; i++) {\n            dirtyPath = dirtyPath || paths[i].shapeChanged();\n        }\n        if (dirtyPath) {\n            this.dirtyShape();\n        }\n    };\n    CompoundPath.prototype.beforeBrush = function () {\n        this._updatePathDirty();\n        var paths = this.shape.paths || [];\n        var scale = this.getGlobalScale();\n        for (var i = 0; i < paths.length; i++) {\n            if (!paths[i].path) {\n                paths[i].createPathProxy();\n            }\n            paths[i].path.setScale(scale[0], scale[1], paths[i].segmentIgnoreThreshold);\n        }\n    };\n    CompoundPath.prototype.buildPath = function (ctx, shape) {\n        var paths = shape.paths || [];\n        for (var i = 0; i < paths.length; i++) {\n            paths[i].buildPath(ctx, paths[i].shape, true);\n        }\n    };\n    CompoundPath.prototype.afterBrush = function () {\n        var paths = this.shape.paths || [];\n        for (var i = 0; i < paths.length; i++) {\n            paths[i].pathUpdated();\n        }\n    };\n    CompoundPath.prototype.getBoundingRect = function () {\n        this._updatePathDirty.call(this);\n        return Path.prototype.getBoundingRect.call(this);\n    };\n    return CompoundPath;\n}(Path));\nexport default CompoundPath;\n","import { __extends } from \"tslib\";\nimport Displayble from './Displayable.js';\nimport BoundingRect from '../core/BoundingRect.js';\nvar m = [];\nvar IncrementalDisplayable = (function (_super) {\n    __extends(IncrementalDisplayable, _super);\n    function IncrementalDisplayable() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.notClear = true;\n        _this.incremental = true;\n        _this._displayables = [];\n        _this._temporaryDisplayables = [];\n        _this._cursor = 0;\n        return _this;\n    }\n    IncrementalDisplayable.prototype.traverse = function (cb, context) {\n        cb.call(context, this);\n    };\n    IncrementalDisplayable.prototype.useStyle = function () {\n        this.style = {};\n    };\n    IncrementalDisplayable.prototype.getCursor = function () {\n        return this._cursor;\n    };\n    IncrementalDisplayable.prototype.innerAfterBrush = function () {\n        this._cursor = this._displayables.length;\n    };\n    IncrementalDisplayable.prototype.clearDisplaybles = function () {\n        this._displayables = [];\n        this._temporaryDisplayables = [];\n        this._cursor = 0;\n        this.markRedraw();\n        this.notClear = false;\n    };\n    IncrementalDisplayable.prototype.clearTemporalDisplayables = function () {\n        this._temporaryDisplayables = [];\n    };\n    IncrementalDisplayable.prototype.addDisplayable = function (displayable, notPersistent) {\n        if (notPersistent) {\n            this._temporaryDisplayables.push(displayable);\n        }\n        else {\n            this._displayables.push(displayable);\n        }\n        this.markRedraw();\n    };\n    IncrementalDisplayable.prototype.addDisplayables = function (displayables, notPersistent) {\n        notPersistent = notPersistent || false;\n        for (var i = 0; i < displayables.length; i++) {\n            this.addDisplayable(displayables[i], notPersistent);\n        }\n    };\n    IncrementalDisplayable.prototype.getDisplayables = function () {\n        return this._displayables;\n    };\n    IncrementalDisplayable.prototype.getTemporalDisplayables = function () {\n        return this._temporaryDisplayables;\n    };\n    IncrementalDisplayable.prototype.eachPendingDisplayable = function (cb) {\n        for (var i = this._cursor; i < this._displayables.length; i++) {\n            cb && cb(this._displayables[i]);\n        }\n        for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n            cb && cb(this._temporaryDisplayables[i]);\n        }\n    };\n    IncrementalDisplayable.prototype.update = function () {\n        this.updateTransform();\n        for (var i = this._cursor; i < this._displayables.length; i++) {\n            var displayable = this._displayables[i];\n            displayable.parent = this;\n            displayable.update();\n            displayable.parent = null;\n        }\n        for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n            var displayable = this._temporaryDisplayables[i];\n            displayable.parent = this;\n            displayable.update();\n            displayable.parent = null;\n        }\n    };\n    IncrementalDisplayable.prototype.getBoundingRect = function () {\n        if (!this._rect) {\n            var rect = new BoundingRect(Infinity, Infinity, -Infinity, -Infinity);\n            for (var i = 0; i < this._displayables.length; i++) {\n                var displayable = this._displayables[i];\n                var childRect = displayable.getBoundingRect().clone();\n                if (displayable.needLocalTransform()) {\n                    childRect.applyTransform(displayable.getLocalTransform(m));\n                }\n                rect.union(childRect);\n            }\n            this._rect = rect;\n        }\n        return this._rect;\n    };\n    IncrementalDisplayable.prototype.contain = function (x, y) {\n        var localPos = this.transformCoordToLocal(x, y);\n        var rect = this.getBoundingRect();\n        if (rect.contain(localPos[0], localPos[1])) {\n            for (var i = 0; i < this._displayables.length; i++) {\n                var displayable = this._displayables[i];\n                if (displayable.contain(x, y)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    return IncrementalDisplayable;\n}(Displayble));\nexport default IncrementalDisplayable;\n","import { __extends } from \"tslib\";\nimport { parseRichText, parsePlainText, calcInnerTextOverflowArea, tSpanCreateBoundingRect2, } from './helper/parseText.js';\nimport TSpan from './TSpan.js';\nimport { retrieve2, each, normalizeCssArray, trim, retrieve3, extend, keys, defaults } from '../core/util.js';\nimport { adjustTextX, adjustTextY } from '../contain/text.js';\nimport ZRImage from './Image.js';\nimport Rect from './shape/Rect.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport Displayable, { DEFAULT_COMMON_ANIMATION_PROPS } from './Displayable.js';\nimport { DEFAULT_FONT, DEFAULT_FONT_SIZE } from '../core/platform.js';\nvar DEFAULT_RICH_TEXT_COLOR = {\n    fill: '#000'\n};\nvar DEFAULT_STROKE_LINE_WIDTH = 2;\nvar tmpCITOverflowAreaOut = {};\nexport var DEFAULT_TEXT_ANIMATION_PROPS = {\n    style: defaults({\n        fill: true,\n        stroke: true,\n        fillOpacity: true,\n        strokeOpacity: true,\n        lineWidth: true,\n        fontSize: true,\n        lineHeight: true,\n        width: true,\n        height: true,\n        textShadowColor: true,\n        textShadowBlur: true,\n        textShadowOffsetX: true,\n        textShadowOffsetY: true,\n        backgroundColor: true,\n        padding: true,\n        borderColor: true,\n        borderWidth: true,\n        borderRadius: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nvar ZRText = (function (_super) {\n    __extends(ZRText, _super);\n    function ZRText(opts) {\n        var _this = _super.call(this) || this;\n        _this.type = 'text';\n        _this._children = [];\n        _this._defaultStyle = DEFAULT_RICH_TEXT_COLOR;\n        _this.attr(opts);\n        return _this;\n    }\n    ZRText.prototype.childrenRef = function () {\n        return this._children;\n    };\n    ZRText.prototype.update = function () {\n        _super.prototype.update.call(this);\n        if (this.styleChanged()) {\n            this._updateSubTexts();\n        }\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            child.zlevel = this.zlevel;\n            child.z = this.z;\n            child.z2 = this.z2;\n            child.culling = this.culling;\n            child.cursor = this.cursor;\n            child.invisible = this.invisible;\n        }\n    };\n    ZRText.prototype.updateTransform = function () {\n        var innerTransformable = this.innerTransformable;\n        if (innerTransformable) {\n            innerTransformable.updateTransform();\n            if (innerTransformable.transform) {\n                this.transform = innerTransformable.transform;\n            }\n        }\n        else {\n            _super.prototype.updateTransform.call(this);\n        }\n    };\n    ZRText.prototype.getLocalTransform = function (m) {\n        var innerTransformable = this.innerTransformable;\n        return innerTransformable\n            ? innerTransformable.getLocalTransform(m)\n            : _super.prototype.getLocalTransform.call(this, m);\n    };\n    ZRText.prototype.getComputedTransform = function () {\n        if (this.__hostTarget) {\n            this.__hostTarget.getComputedTransform();\n            this.__hostTarget.updateInnerText(true);\n        }\n        return _super.prototype.getComputedTransform.call(this);\n    };\n    ZRText.prototype._updateSubTexts = function () {\n        this._childCursor = 0;\n        normalizeTextStyle(this.style);\n        this.style.rich\n            ? this._updateRichTexts()\n            : this._updatePlainTexts();\n        this._children.length = this._childCursor;\n        this.styleUpdated();\n    };\n    ZRText.prototype.addSelfToZr = function (zr) {\n        _super.prototype.addSelfToZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            this._children[i].__zr = zr;\n        }\n    };\n    ZRText.prototype.removeSelfFromZr = function (zr) {\n        _super.prototype.removeSelfFromZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            this._children[i].__zr = null;\n        }\n    };\n    ZRText.prototype.getBoundingRect = function () {\n        if (this.styleChanged()) {\n            this._updateSubTexts();\n        }\n        if (!this._rect) {\n            var tmpRect = new BoundingRect(0, 0, 0, 0);\n            var children = this._children;\n            var tmpMat = [];\n            var rect = null;\n            for (var i = 0; i < children.length; i++) {\n                var child = children[i];\n                var childRect = child.getBoundingRect();\n                var transform = child.getLocalTransform(tmpMat);\n                if (transform) {\n                    tmpRect.copy(childRect);\n                    tmpRect.applyTransform(transform);\n                    rect = rect || tmpRect.clone();\n                    rect.union(tmpRect);\n                }\n                else {\n                    rect = rect || childRect.clone();\n                    rect.union(childRect);\n                }\n            }\n            this._rect = rect || tmpRect;\n        }\n        return this._rect;\n    };\n    ZRText.prototype.setDefaultTextStyle = function (defaultTextStyle) {\n        this._defaultStyle = defaultTextStyle || DEFAULT_RICH_TEXT_COLOR;\n    };\n    ZRText.prototype.setTextContent = function (textContent) {\n        if (process.env.NODE_ENV !== 'production') {\n            throw new Error('Can\\'t attach text on another text');\n        }\n    };\n    ZRText.prototype._mergeStyle = function (targetStyle, sourceStyle) {\n        if (!sourceStyle) {\n            return targetStyle;\n        }\n        var sourceRich = sourceStyle.rich;\n        var targetRich = targetStyle.rich || (sourceRich && {});\n        extend(targetStyle, sourceStyle);\n        if (sourceRich && targetRich) {\n            this._mergeRich(targetRich, sourceRich);\n            targetStyle.rich = targetRich;\n        }\n        else if (targetRich) {\n            targetStyle.rich = targetRich;\n        }\n        return targetStyle;\n    };\n    ZRText.prototype._mergeRich = function (targetRich, sourceRich) {\n        var richNames = keys(sourceRich);\n        for (var i = 0; i < richNames.length; i++) {\n            var richName = richNames[i];\n            targetRich[richName] = targetRich[richName] || {};\n            extend(targetRich[richName], sourceRich[richName]);\n        }\n    };\n    ZRText.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_TEXT_ANIMATION_PROPS;\n    };\n    ZRText.prototype._getOrCreateChild = function (Ctor) {\n        var child = this._children[this._childCursor];\n        if (!child || !(child instanceof Ctor)) {\n            child = new Ctor();\n        }\n        this._children[this._childCursor++] = child;\n        child.__zr = this.__zr;\n        child.parent = this;\n        return child;\n    };\n    ZRText.prototype._updatePlainTexts = function () {\n        var style = this.style;\n        var textFont = style.font || DEFAULT_FONT;\n        var textPadding = style.padding;\n        var defaultStyle = this._defaultStyle;\n        var baseX = style.x || 0;\n        var baseY = style.y || 0;\n        var textAlign = style.align || defaultStyle.align || 'left';\n        var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign || 'top';\n        calcInnerTextOverflowArea(tmpCITOverflowAreaOut, defaultStyle.overflowRect, baseX, baseY, textAlign, verticalAlign);\n        baseX = tmpCITOverflowAreaOut.baseX;\n        baseY = tmpCITOverflowAreaOut.baseY;\n        var text = getStyleText(style);\n        var contentBlock = parsePlainText(text, style, tmpCITOverflowAreaOut.outerWidth, tmpCITOverflowAreaOut.outerHeight);\n        var needDrawBg = needDrawBackground(style);\n        var bgColorDrawn = !!(style.backgroundColor);\n        var outerHeight = contentBlock.outerHeight;\n        var outerWidth = contentBlock.outerWidth;\n        var textLines = contentBlock.lines;\n        var lineHeight = contentBlock.lineHeight;\n        this.isTruncated = !!contentBlock.isTruncated;\n        var textX = baseX;\n        var textY = adjustTextY(baseY, contentBlock.contentHeight, verticalAlign);\n        if (needDrawBg || textPadding) {\n            var boxX = adjustTextX(baseX, outerWidth, textAlign);\n            var boxY = adjustTextY(baseY, outerHeight, verticalAlign);\n            needDrawBg && this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n        }\n        textY += lineHeight / 2;\n        if (textPadding) {\n            textX = getTextXForPadding(baseX, textAlign, textPadding);\n            if (verticalAlign === 'top') {\n                textY += textPadding[0];\n            }\n            else if (verticalAlign === 'bottom') {\n                textY -= textPadding[2];\n            }\n        }\n        var defaultLineWidth = 0;\n        var usingDefaultStroke = false;\n        var useDefaultFill = false;\n        var textFill = getFill('fill' in style\n            ? style.fill\n            : (useDefaultFill = true, defaultStyle.fill));\n        var textStroke = getStroke('stroke' in style\n            ? style.stroke\n            : (!bgColorDrawn\n                && (!defaultStyle.autoStroke || useDefaultFill))\n                ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, usingDefaultStroke = true, defaultStyle.stroke)\n                : null);\n        var hasShadow = style.textShadowBlur > 0;\n        for (var i = 0; i < textLines.length; i++) {\n            var el = this._getOrCreateChild(TSpan);\n            var subElStyle = el.createStyle();\n            el.useStyle(subElStyle);\n            subElStyle.text = textLines[i];\n            subElStyle.x = textX;\n            subElStyle.y = textY;\n            if (textAlign) {\n                subElStyle.textAlign = textAlign;\n            }\n            subElStyle.textBaseline = 'middle';\n            subElStyle.opacity = style.opacity;\n            subElStyle.strokeFirst = true;\n            if (hasShadow) {\n                subElStyle.shadowBlur = style.textShadowBlur || 0;\n                subElStyle.shadowColor = style.textShadowColor || 'transparent';\n                subElStyle.shadowOffsetX = style.textShadowOffsetX || 0;\n                subElStyle.shadowOffsetY = style.textShadowOffsetY || 0;\n            }\n            subElStyle.stroke = textStroke;\n            subElStyle.fill = textFill;\n            if (textStroke) {\n                subElStyle.lineWidth = style.lineWidth || defaultLineWidth;\n                subElStyle.lineDash = style.lineDash;\n                subElStyle.lineDashOffset = style.lineDashOffset || 0;\n            }\n            subElStyle.font = textFont;\n            setSeparateFont(subElStyle, style);\n            textY += lineHeight;\n            el.setBoundingRect(tSpanCreateBoundingRect2(subElStyle, contentBlock.contentWidth, contentBlock.calculatedLineHeight, usingDefaultStroke ? 0 : null));\n        }\n    };\n    ZRText.prototype._updateRichTexts = function () {\n        var style = this.style;\n        var defaultStyle = this._defaultStyle;\n        var textAlign = style.align || defaultStyle.align;\n        var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign;\n        var baseX = style.x || 0;\n        var baseY = style.y || 0;\n        calcInnerTextOverflowArea(tmpCITOverflowAreaOut, defaultStyle.overflowRect, baseX, baseY, textAlign, verticalAlign);\n        baseX = tmpCITOverflowAreaOut.baseX;\n        baseY = tmpCITOverflowAreaOut.baseY;\n        var text = getStyleText(style);\n        var contentBlock = parseRichText(text, style, tmpCITOverflowAreaOut.outerWidth, tmpCITOverflowAreaOut.outerHeight, textAlign);\n        var contentWidth = contentBlock.width;\n        var outerWidth = contentBlock.outerWidth;\n        var outerHeight = contentBlock.outerHeight;\n        var textPadding = style.padding;\n        this.isTruncated = !!contentBlock.isTruncated;\n        var boxX = adjustTextX(baseX, outerWidth, textAlign);\n        var boxY = adjustTextY(baseY, outerHeight, verticalAlign);\n        var xLeft = boxX;\n        var lineTop = boxY;\n        if (textPadding) {\n            xLeft += textPadding[3];\n            lineTop += textPadding[0];\n        }\n        var xRight = xLeft + contentWidth;\n        if (needDrawBackground(style)) {\n            this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n        }\n        var bgColorDrawn = !!(style.backgroundColor);\n        for (var i = 0; i < contentBlock.lines.length; i++) {\n            var line = contentBlock.lines[i];\n            var tokens = line.tokens;\n            var tokenCount = tokens.length;\n            var lineHeight = line.lineHeight;\n            var remainedWidth = line.width;\n            var leftIndex = 0;\n            var lineXLeft = xLeft;\n            var lineXRight = xRight;\n            var rightIndex = tokenCount - 1;\n            var token = void 0;\n            while (leftIndex < tokenCount\n                && (token = tokens[leftIndex], !token.align || token.align === 'left')) {\n                this._placeToken(token, style, lineHeight, lineTop, lineXLeft, 'left', bgColorDrawn);\n                remainedWidth -= token.width;\n                lineXLeft += token.width;\n                leftIndex++;\n            }\n            while (rightIndex >= 0\n                && (token = tokens[rightIndex], token.align === 'right')) {\n                this._placeToken(token, style, lineHeight, lineTop, lineXRight, 'right', bgColorDrawn);\n                remainedWidth -= token.width;\n                lineXRight -= token.width;\n                rightIndex--;\n            }\n            lineXLeft += (contentWidth - (lineXLeft - xLeft) - (xRight - lineXRight) - remainedWidth) / 2;\n            while (leftIndex <= rightIndex) {\n                token = tokens[leftIndex];\n                this._placeToken(token, style, lineHeight, lineTop, lineXLeft + token.width / 2, 'center', bgColorDrawn);\n                lineXLeft += token.width;\n                leftIndex++;\n            }\n            lineTop += lineHeight;\n        }\n    };\n    ZRText.prototype._placeToken = function (token, style, lineHeight, lineTop, x, textAlign, parentBgColorDrawn) {\n        var tokenStyle = style.rich[token.styleName] || {};\n        tokenStyle.text = token.text;\n        var verticalAlign = token.verticalAlign;\n        var y = lineTop + lineHeight / 2;\n        if (verticalAlign === 'top') {\n            y = lineTop + token.height / 2;\n        }\n        else if (verticalAlign === 'bottom') {\n            y = lineTop + lineHeight - token.height / 2;\n        }\n        var needDrawBg = !token.isLineHolder && needDrawBackground(tokenStyle);\n        needDrawBg && this._renderBackground(tokenStyle, style, textAlign === 'right'\n            ? x - token.width\n            : textAlign === 'center'\n                ? x - token.width / 2\n                : x, y - token.height / 2, token.width, token.height);\n        var bgColorDrawn = !!tokenStyle.backgroundColor;\n        var textPadding = token.textPadding;\n        if (textPadding) {\n            x = getTextXForPadding(x, textAlign, textPadding);\n            y -= token.height / 2 - textPadding[0] - token.innerHeight / 2;\n        }\n        var el = this._getOrCreateChild(TSpan);\n        var subElStyle = el.createStyle();\n        el.useStyle(subElStyle);\n        var defaultStyle = this._defaultStyle;\n        var useDefaultFill = false;\n        var defaultLineWidth = 0;\n        var usingDefaultStroke = false;\n        var textFill = getFill('fill' in tokenStyle ? tokenStyle.fill\n            : 'fill' in style ? style.fill\n                : (useDefaultFill = true, defaultStyle.fill));\n        var textStroke = getStroke('stroke' in tokenStyle ? tokenStyle.stroke\n            : 'stroke' in style ? style.stroke\n                : (!bgColorDrawn\n                    && !parentBgColorDrawn\n                    && (!defaultStyle.autoStroke || useDefaultFill)) ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, usingDefaultStroke = true, defaultStyle.stroke)\n                    : null);\n        var hasShadow = tokenStyle.textShadowBlur > 0\n            || style.textShadowBlur > 0;\n        subElStyle.text = token.text;\n        subElStyle.x = x;\n        subElStyle.y = y;\n        if (hasShadow) {\n            subElStyle.shadowBlur = tokenStyle.textShadowBlur || style.textShadowBlur || 0;\n            subElStyle.shadowColor = tokenStyle.textShadowColor || style.textShadowColor || 'transparent';\n            subElStyle.shadowOffsetX = tokenStyle.textShadowOffsetX || style.textShadowOffsetX || 0;\n            subElStyle.shadowOffsetY = tokenStyle.textShadowOffsetY || style.textShadowOffsetY || 0;\n        }\n        subElStyle.textAlign = textAlign;\n        subElStyle.textBaseline = 'middle';\n        subElStyle.font = token.font || DEFAULT_FONT;\n        subElStyle.opacity = retrieve3(tokenStyle.opacity, style.opacity, 1);\n        setSeparateFont(subElStyle, tokenStyle);\n        if (textStroke) {\n            subElStyle.lineWidth = retrieve3(tokenStyle.lineWidth, style.lineWidth, defaultLineWidth);\n            subElStyle.lineDash = retrieve2(tokenStyle.lineDash, style.lineDash);\n            subElStyle.lineDashOffset = style.lineDashOffset || 0;\n            subElStyle.stroke = textStroke;\n        }\n        if (textFill) {\n            subElStyle.fill = textFill;\n        }\n        el.setBoundingRect(tSpanCreateBoundingRect2(subElStyle, token.contentWidth, token.contentHeight, usingDefaultStroke ? 0 : null));\n    };\n    ZRText.prototype._renderBackground = function (style, topStyle, x, y, width, height) {\n        var textBackgroundColor = style.backgroundColor;\n        var textBorderWidth = style.borderWidth;\n        var textBorderColor = style.borderColor;\n        var isImageBg = textBackgroundColor && textBackgroundColor.image;\n        var isPlainOrGradientBg = textBackgroundColor && !isImageBg;\n        var textBorderRadius = style.borderRadius;\n        var self = this;\n        var rectEl;\n        var imgEl;\n        if (isPlainOrGradientBg || style.lineHeight || (textBorderWidth && textBorderColor)) {\n            rectEl = this._getOrCreateChild(Rect);\n            rectEl.useStyle(rectEl.createStyle());\n            rectEl.style.fill = null;\n            var rectShape = rectEl.shape;\n            rectShape.x = x;\n            rectShape.y = y;\n            rectShape.width = width;\n            rectShape.height = height;\n            rectShape.r = textBorderRadius;\n            rectEl.dirtyShape();\n        }\n        if (isPlainOrGradientBg) {\n            var rectStyle = rectEl.style;\n            rectStyle.fill = textBackgroundColor || null;\n            rectStyle.fillOpacity = retrieve2(style.fillOpacity, 1);\n        }\n        else if (isImageBg) {\n            imgEl = this._getOrCreateChild(ZRImage);\n            imgEl.onload = function () {\n                self.dirtyStyle();\n            };\n            var imgStyle = imgEl.style;\n            imgStyle.image = textBackgroundColor.image;\n            imgStyle.x = x;\n            imgStyle.y = y;\n            imgStyle.width = width;\n            imgStyle.height = height;\n        }\n        if (textBorderWidth && textBorderColor) {\n            var rectStyle = rectEl.style;\n            rectStyle.lineWidth = textBorderWidth;\n            rectStyle.stroke = textBorderColor;\n            rectStyle.strokeOpacity = retrieve2(style.strokeOpacity, 1);\n            rectStyle.lineDash = style.borderDash;\n            rectStyle.lineDashOffset = style.borderDashOffset || 0;\n            rectEl.strokeContainThreshold = 0;\n            if (rectEl.hasFill() && rectEl.hasStroke()) {\n                rectStyle.strokeFirst = true;\n                rectStyle.lineWidth *= 2;\n            }\n        }\n        var commonStyle = (rectEl || imgEl).style;\n        commonStyle.shadowBlur = style.shadowBlur || 0;\n        commonStyle.shadowColor = style.shadowColor || 'transparent';\n        commonStyle.shadowOffsetX = style.shadowOffsetX || 0;\n        commonStyle.shadowOffsetY = style.shadowOffsetY || 0;\n        commonStyle.opacity = retrieve3(style.opacity, topStyle.opacity, 1);\n    };\n    ZRText.makeFont = function (style) {\n        var font = '';\n        if (hasSeparateFont(style)) {\n            font = [\n                style.fontStyle,\n                style.fontWeight,\n                parseFontSize(style.fontSize),\n                style.fontFamily || 'sans-serif'\n            ].join(' ');\n        }\n        return font && trim(font) || style.textFont || style.font;\n    };\n    return ZRText;\n}(Displayable));\nvar VALID_TEXT_ALIGN = { left: true, right: 1, center: 1 };\nvar VALID_TEXT_VERTICAL_ALIGN = { top: 1, bottom: 1, middle: 1 };\nvar FONT_PARTS = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily'];\nexport function parseFontSize(fontSize) {\n    if (typeof fontSize === 'string'\n        && (fontSize.indexOf('px') !== -1\n            || fontSize.indexOf('rem') !== -1\n            || fontSize.indexOf('em') !== -1)) {\n        return fontSize;\n    }\n    else if (!isNaN(+fontSize)) {\n        return fontSize + 'px';\n    }\n    else {\n        return DEFAULT_FONT_SIZE + 'px';\n    }\n}\nfunction setSeparateFont(targetStyle, sourceStyle) {\n    for (var i = 0; i < FONT_PARTS.length; i++) {\n        var fontProp = FONT_PARTS[i];\n        var val = sourceStyle[fontProp];\n        if (val != null) {\n            targetStyle[fontProp] = val;\n        }\n    }\n}\nexport function hasSeparateFont(style) {\n    return style.fontSize != null || style.fontFamily || style.fontWeight;\n}\nexport function normalizeTextStyle(style) {\n    normalizeStyle(style);\n    each(style.rich, normalizeStyle);\n    return style;\n}\nfunction normalizeStyle(style) {\n    if (style) {\n        style.font = ZRText.makeFont(style);\n        var textAlign = style.align;\n        textAlign === 'middle' && (textAlign = 'center');\n        style.align = (textAlign == null || VALID_TEXT_ALIGN[textAlign]) ? textAlign : 'left';\n        var verticalAlign = style.verticalAlign;\n        verticalAlign === 'center' && (verticalAlign = 'middle');\n        style.verticalAlign = (verticalAlign == null || VALID_TEXT_VERTICAL_ALIGN[verticalAlign]) ? verticalAlign : 'top';\n        var textPadding = style.padding;\n        if (textPadding) {\n            style.padding = normalizeCssArray(style.padding);\n        }\n    }\n}\nfunction getStroke(stroke, lineWidth) {\n    return (stroke == null || lineWidth <= 0 || stroke === 'transparent' || stroke === 'none')\n        ? null\n        : (stroke.image || stroke.colorStops)\n            ? '#000'\n            : stroke;\n}\nfunction getFill(fill) {\n    return (fill == null || fill === 'none')\n        ? null\n        : (fill.image || fill.colorStops)\n            ? '#000'\n            : fill;\n}\nfunction getTextXForPadding(x, textAlign, textPadding) {\n    return textAlign === 'right'\n        ? (x - textPadding[1])\n        : textAlign === 'center'\n            ? (x + textPadding[3] / 2 - textPadding[1] / 2)\n            : (x + textPadding[3]);\n}\nfunction getStyleText(style) {\n    var text = style.text;\n    text != null && (text += '');\n    return text;\n}\nfunction needDrawBackground(style) {\n    return !!(style.backgroundColor\n        || style.lineHeight\n        || (style.borderWidth && style.borderColor));\n}\nexport default ZRText;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar ArcShape = (function () {\n    function ArcShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r = 0;\n        this.startAngle = 0;\n        this.endAngle = Math.PI * 2;\n        this.clockwise = true;\n    }\n    return ArcShape;\n}());\nexport { ArcShape };\nvar Arc = (function (_super) {\n    __extends(Arc, _super);\n    function Arc(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Arc.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    Arc.prototype.getDefaultShape = function () {\n        return new ArcShape();\n    };\n    Arc.prototype.buildPath = function (ctx, shape) {\n        var x = shape.cx;\n        var y = shape.cy;\n        var r = Math.max(shape.r, 0);\n        var startAngle = shape.startAngle;\n        var endAngle = shape.endAngle;\n        var clockwise = shape.clockwise;\n        var unitX = Math.cos(startAngle);\n        var unitY = Math.sin(startAngle);\n        ctx.moveTo(unitX * r + x, unitY * r + y);\n        ctx.arc(x, y, r, startAngle, endAngle, !clockwise);\n    };\n    return Arc;\n}(Path));\nArc.prototype.type = 'arc';\nexport default Arc;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as vec2 from '../../core/vector.js';\nimport { quadraticSubdivide, cubicSubdivide, quadraticAt, cubicAt, quadraticDerivativeAt, cubicDerivativeAt } from '../../core/curve.js';\nvar out = [];\nvar BezierCurveShape = (function () {\n    function BezierCurveShape() {\n        this.x1 = 0;\n        this.y1 = 0;\n        this.x2 = 0;\n        this.y2 = 0;\n        this.cpx1 = 0;\n        this.cpy1 = 0;\n        this.percent = 1;\n    }\n    return BezierCurveShape;\n}());\nexport { BezierCurveShape };\nfunction someVectorAt(shape, t, isTangent) {\n    var cpx2 = shape.cpx2;\n    var cpy2 = shape.cpy2;\n    if (cpx2 != null || cpy2 != null) {\n        return [\n            (isTangent ? cubicDerivativeAt : cubicAt)(shape.x1, shape.cpx1, shape.cpx2, shape.x2, t),\n            (isTangent ? cubicDerivativeAt : cubicAt)(shape.y1, shape.cpy1, shape.cpy2, shape.y2, t)\n        ];\n    }\n    else {\n        return [\n            (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.x1, shape.cpx1, shape.x2, t),\n            (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.y1, shape.cpy1, shape.y2, t)\n        ];\n    }\n}\nvar BezierCurve = (function (_super) {\n    __extends(BezierCurve, _super);\n    function BezierCurve(opts) {\n        return _super.call(this, opts) || this;\n    }\n    BezierCurve.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    BezierCurve.prototype.getDefaultShape = function () {\n        return new BezierCurveShape();\n    };\n    BezierCurve.prototype.buildPath = function (ctx, shape) {\n        var x1 = shape.x1;\n        var y1 = shape.y1;\n        var x2 = shape.x2;\n        var y2 = shape.y2;\n        var cpx1 = shape.cpx1;\n        var cpy1 = shape.cpy1;\n        var cpx2 = shape.cpx2;\n        var cpy2 = shape.cpy2;\n        var percent = shape.percent;\n        if (percent === 0) {\n            return;\n        }\n        ctx.moveTo(x1, y1);\n        if (cpx2 == null || cpy2 == null) {\n            if (percent < 1) {\n                quadraticSubdivide(x1, cpx1, x2, percent, out);\n                cpx1 = out[1];\n                x2 = out[2];\n                quadraticSubdivide(y1, cpy1, y2, percent, out);\n                cpy1 = out[1];\n                y2 = out[2];\n            }\n            ctx.quadraticCurveTo(cpx1, cpy1, x2, y2);\n        }\n        else {\n            if (percent < 1) {\n                cubicSubdivide(x1, cpx1, cpx2, x2, percent, out);\n                cpx1 = out[1];\n                cpx2 = out[2];\n                x2 = out[3];\n                cubicSubdivide(y1, cpy1, cpy2, y2, percent, out);\n                cpy1 = out[1];\n                cpy2 = out[2];\n                y2 = out[3];\n            }\n            ctx.bezierCurveTo(cpx1, cpy1, cpx2, cpy2, x2, y2);\n        }\n    };\n    BezierCurve.prototype.pointAt = function (t) {\n        return someVectorAt(this.shape, t, false);\n    };\n    BezierCurve.prototype.tangentAt = function (t) {\n        var p = someVectorAt(this.shape, t, true);\n        return vec2.normalize(p, p);\n    };\n    return BezierCurve;\n}(Path));\n;\nBezierCurve.prototype.type = 'bezier-curve';\nexport default BezierCurve;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar RingShape = (function () {\n    function RingShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r = 0;\n        this.r0 = 0;\n    }\n    return RingShape;\n}());\nexport { RingShape };\nvar Ring = (function (_super) {\n    __extends(Ring, _super);\n    function Ring(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Ring.prototype.getDefaultShape = function () {\n        return new RingShape();\n    };\n    Ring.prototype.buildPath = function (ctx, shape) {\n        var x = shape.cx;\n        var y = shape.cy;\n        var PI2 = Math.PI * 2;\n        ctx.moveTo(x + shape.r, y);\n        ctx.arc(x, y, shape.r, 0, PI2, false);\n        ctx.moveTo(x + shape.r0, y);\n        ctx.arc(x, y, shape.r0, 0, PI2, true);\n    };\n    return Ring;\n}(Path));\nRing.prototype.type = 'ring';\nexport default Ring;\n","import Point from './Point.js';\nimport { createIntersectContext } from './BoundingRect.js';\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathAbs = Math.abs;\nvar _extent = [0, 0];\nvar _extent2 = [0, 0];\nvar _intersectCtx = createIntersectContext();\nvar _minTv = _intersectCtx.minTv;\nvar _maxTv = _intersectCtx.maxTv;\nvar OrientedBoundingRect = (function () {\n    function OrientedBoundingRect(rect, transform) {\n        this._corners = [];\n        this._axes = [];\n        this._origin = [0, 0];\n        for (var i = 0; i < 4; i++) {\n            this._corners[i] = new Point();\n        }\n        for (var i = 0; i < 2; i++) {\n            this._axes[i] = new Point();\n        }\n        if (rect) {\n            this.fromBoundingRect(rect, transform);\n        }\n    }\n    OrientedBoundingRect.prototype.fromBoundingRect = function (rect, transform) {\n        var corners = this._corners;\n        var axes = this._axes;\n        var x = rect.x;\n        var y = rect.y;\n        var x2 = x + rect.width;\n        var y2 = y + rect.height;\n        corners[0].set(x, y);\n        corners[1].set(x2, y);\n        corners[2].set(x2, y2);\n        corners[3].set(x, y2);\n        if (transform) {\n            for (var i = 0; i < 4; i++) {\n                corners[i].transform(transform);\n            }\n        }\n        Point.sub(axes[0], corners[1], corners[0]);\n        Point.sub(axes[1], corners[3], corners[0]);\n        axes[0].normalize();\n        axes[1].normalize();\n        for (var i = 0; i < 2; i++) {\n            this._origin[i] = axes[i].dot(corners[0]);\n        }\n    };\n    OrientedBoundingRect.prototype.intersect = function (other, mtv, opt) {\n        var overlapped = true;\n        var noMtv = !mtv;\n        if (mtv) {\n            Point.set(mtv, 0, 0);\n        }\n        _intersectCtx.reset(opt, !noMtv);\n        if (!this._intersectCheckOneSide(this, other, noMtv, 1)) {\n            overlapped = false;\n            if (noMtv) {\n                return overlapped;\n            }\n        }\n        if (!this._intersectCheckOneSide(other, this, noMtv, -1)) {\n            overlapped = false;\n            if (noMtv) {\n                return overlapped;\n            }\n        }\n        if (!noMtv && !_intersectCtx.negativeSize) {\n            Point.copy(mtv, overlapped\n                ? (_intersectCtx.useDir ? _intersectCtx.dirMinTv : _minTv)\n                : _maxTv);\n        }\n        return overlapped;\n    };\n    OrientedBoundingRect.prototype._intersectCheckOneSide = function (self, other, noMtv, inverse) {\n        var overlapped = true;\n        for (var i = 0; i < 2; i++) {\n            var axis = self._axes[i];\n            self._getProjMinMaxOnAxis(i, self._corners, _extent);\n            self._getProjMinMaxOnAxis(i, other._corners, _extent2);\n            if (_intersectCtx.negativeSize || _extent[1] < _extent2[0] || _extent[0] > _extent2[1]) {\n                overlapped = false;\n                if (_intersectCtx.negativeSize || noMtv) {\n                    return overlapped;\n                }\n                var dist0 = mathAbs(_extent2[0] - _extent[1]);\n                var dist1 = mathAbs(_extent[0] - _extent2[1]);\n                if (mathMin(dist0, dist1) > _maxTv.len()) {\n                    if (dist0 < dist1) {\n                        Point.scale(_maxTv, axis, -dist0 * inverse);\n                    }\n                    else {\n                        Point.scale(_maxTv, axis, dist1 * inverse);\n                    }\n                }\n            }\n            else if (!noMtv) {\n                var dist0 = mathAbs(_extent2[0] - _extent[1]);\n                var dist1 = mathAbs(_extent[0] - _extent2[1]);\n                if (_intersectCtx.useDir || mathMin(dist0, dist1) < _minTv.len()) {\n                    if (dist0 < dist1 || !_intersectCtx.bidirectional) {\n                        Point.scale(_minTv, axis, dist0 * inverse);\n                        if (_intersectCtx.useDir) {\n                            _intersectCtx.calcDirMTV();\n                        }\n                    }\n                    if (dist0 >= dist1 || !_intersectCtx.bidirectional) {\n                        Point.scale(_minTv, axis, -dist1 * inverse);\n                        if (_intersectCtx.useDir) {\n                            _intersectCtx.calcDirMTV();\n                        }\n                    }\n                }\n            }\n        }\n        return overlapped;\n    };\n    OrientedBoundingRect.prototype._getProjMinMaxOnAxis = function (dim, corners, out) {\n        var axis = this._axes[dim];\n        var origin = this._origin;\n        var proj = corners[0].dot(axis) + origin[dim];\n        var min = proj;\n        var max = proj;\n        for (var i = 1; i < corners.length; i++) {\n            var proj_1 = corners[i].dot(axis) + origin[dim];\n            min = mathMin(proj_1, min);\n            max = mathMax(proj_1, max);\n        }\n        out[0] = min + _intersectCtx.touchThreshold;\n        out[1] = max - _intersectCtx.touchThreshold;\n        _intersectCtx.negativeSize = out[1] < out[0];\n    };\n    return OrientedBoundingRect;\n}());\nexport default OrientedBoundingRect;\n","function isSafeNum(num) {\n    return isFinite(num);\n}\nexport function createLinearGradient(ctx, obj, rect) {\n    var x = obj.x == null ? 0 : obj.x;\n    var x2 = obj.x2 == null ? 1 : obj.x2;\n    var y = obj.y == null ? 0 : obj.y;\n    var y2 = obj.y2 == null ? 0 : obj.y2;\n    if (!obj.global) {\n        x = x * rect.width + rect.x;\n        x2 = x2 * rect.width + rect.x;\n        y = y * rect.height + rect.y;\n        y2 = y2 * rect.height + rect.y;\n    }\n    x = isSafeNum(x) ? x : 0;\n    x2 = isSafeNum(x2) ? x2 : 1;\n    y = isSafeNum(y) ? y : 0;\n    y2 = isSafeNum(y2) ? y2 : 0;\n    var canvasGradient = ctx.createLinearGradient(x, y, x2, y2);\n    return canvasGradient;\n}\nexport function createRadialGradient(ctx, obj, rect) {\n    var width = rect.width;\n    var height = rect.height;\n    var min = Math.min(width, height);\n    var x = obj.x == null ? 0.5 : obj.x;\n    var y = obj.y == null ? 0.5 : obj.y;\n    var r = obj.r == null ? 0.5 : obj.r;\n    if (!obj.global) {\n        x = x * width + rect.x;\n        y = y * height + rect.y;\n        r = r * min;\n    }\n    x = isSafeNum(x) ? x : 0.5;\n    y = isSafeNum(y) ? y : 0.5;\n    r = r >= 0 && isSafeNum(r) ? r : 0.5;\n    var canvasGradient = ctx.createRadialGradient(x, y, 0, x, y, r);\n    return canvasGradient;\n}\nexport function getCanvasGradient(ctx, obj, rect) {\n    var canvasGradient = obj.type === 'radial'\n        ? createRadialGradient(ctx, obj, rect)\n        : createLinearGradient(ctx, obj, rect);\n    var colorStops = obj.colorStops;\n    for (var i = 0; i < colorStops.length; i++) {\n        canvasGradient.addColorStop(colorStops[i].offset, colorStops[i].color);\n    }\n    return canvasGradient;\n}\nexport function isClipPathChanged(clipPaths, prevClipPaths) {\n    if (clipPaths === prevClipPaths || (!clipPaths && !prevClipPaths)) {\n        return false;\n    }\n    if (!clipPaths || !prevClipPaths || (clipPaths.length !== prevClipPaths.length)) {\n        return true;\n    }\n    for (var i = 0; i < clipPaths.length; i++) {\n        if (clipPaths[i] !== prevClipPaths[i]) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction parseInt10(val) {\n    return parseInt(val, 10);\n}\nexport function getSize(root, whIdx, opts) {\n    var wh = ['width', 'height'][whIdx];\n    var cwh = ['clientWidth', 'clientHeight'][whIdx];\n    var plt = ['paddingLeft', 'paddingTop'][whIdx];\n    var prb = ['paddingRight', 'paddingBottom'][whIdx];\n    if (opts[wh] != null && opts[wh] !== 'auto') {\n        return parseFloat(opts[wh]);\n    }\n    var stl = document.defaultView.getComputedStyle(root);\n    return ((root[cwh] || parseInt10(stl[wh]) || parseInt10(root.style[wh]))\n        - (parseInt10(stl[plt]) || 0)\n        - (parseInt10(stl[prb]) || 0)) | 0;\n}\n","import { isArray, isNumber, map } from '../core/util.js';\nexport function normalizeLineDash(lineType, lineWidth) {\n    if (!lineType || lineType === 'solid' || !(lineWidth > 0)) {\n        return null;\n    }\n    return lineType === 'dashed'\n        ? [4 * lineWidth, 2 * lineWidth]\n        : lineType === 'dotted'\n            ? [lineWidth]\n            : isNumber(lineType)\n                ? [lineType] : isArray(lineType) ? lineType : null;\n}\nexport function getLineDash(el) {\n    var style = el.style;\n    var lineDash = style.lineDash && style.lineWidth > 0 && normalizeLineDash(style.lineDash, style.lineWidth);\n    var lineDashOffset = style.lineDashOffset;\n    if (lineDash) {\n        var lineScale_1 = (style.strokeNoScale && el.getLineScale) ? el.getLineScale() : 1;\n        if (lineScale_1 && lineScale_1 !== 1) {\n            lineDash = map(lineDash, function (rawVal) {\n                return rawVal / lineScale_1;\n            });\n            lineDashOffset /= lineScale_1;\n        }\n    }\n    return [lineDash, lineDashOffset];\n}\n","import { DEFAULT_COMMON_STYLE } from '../graphic/Displayable.js';\nimport PathProxy from '../core/PathProxy.js';\nimport { createOrUpdateImage, isImageReady } from '../graphic/helper/image.js';\nimport { getCanvasGradient, isClipPathChanged } from './helper.js';\nimport Path from '../graphic/Path.js';\nimport ZRImage from '../graphic/Image.js';\nimport TSpan from '../graphic/TSpan.js';\nimport { RADIAN_TO_DEGREE } from '../core/util.js';\nimport { getLineDash } from './dashStyle.js';\nimport { REDRAW_BIT, SHAPE_CHANGED_BIT } from '../graphic/constants.js';\nimport { DEFAULT_FONT } from '../core/platform.js';\nvar pathProxyForDraw = new PathProxy(true);\nfunction styleHasStroke(style) {\n    var stroke = style.stroke;\n    return !(stroke == null || stroke === 'none' || !(style.lineWidth > 0));\n}\nfunction isValidStrokeFillStyle(strokeOrFill) {\n    return typeof strokeOrFill === 'string' && strokeOrFill !== 'none';\n}\nfunction styleHasFill(style) {\n    var fill = style.fill;\n    return fill != null && fill !== 'none';\n}\nfunction doFillPath(ctx, style) {\n    if (style.fillOpacity != null && style.fillOpacity !== 1) {\n        var originalGlobalAlpha = ctx.globalAlpha;\n        ctx.globalAlpha = style.fillOpacity * style.opacity;\n        ctx.fill();\n        ctx.globalAlpha = originalGlobalAlpha;\n    }\n    else {\n        ctx.fill();\n    }\n}\nfunction doStrokePath(ctx, style) {\n    if (style.strokeOpacity != null && style.strokeOpacity !== 1) {\n        var originalGlobalAlpha = ctx.globalAlpha;\n        ctx.globalAlpha = style.strokeOpacity * style.opacity;\n        ctx.stroke();\n        ctx.globalAlpha = originalGlobalAlpha;\n    }\n    else {\n        ctx.stroke();\n    }\n}\nexport function createCanvasPattern(ctx, pattern, el) {\n    var image = createOrUpdateImage(pattern.image, pattern.__image, el);\n    if (isImageReady(image)) {\n        var canvasPattern = ctx.createPattern(image, pattern.repeat || 'repeat');\n        if (typeof DOMMatrix === 'function'\n            && canvasPattern\n            && canvasPattern.setTransform) {\n            var matrix = new DOMMatrix();\n            matrix.translateSelf((pattern.x || 0), (pattern.y || 0));\n            matrix.rotateSelf(0, 0, (pattern.rotation || 0) * RADIAN_TO_DEGREE);\n            matrix.scaleSelf((pattern.scaleX || 1), (pattern.scaleY || 1));\n            canvasPattern.setTransform(matrix);\n        }\n        return canvasPattern;\n    }\n}\nfunction brushPath(ctx, el, style, inBatch) {\n    var _a;\n    var hasStroke = styleHasStroke(style);\n    var hasFill = styleHasFill(style);\n    var strokePercent = style.strokePercent;\n    var strokePart = strokePercent < 1;\n    var firstDraw = !el.path;\n    if ((!el.silent || strokePart) && firstDraw) {\n        el.createPathProxy();\n    }\n    var path = el.path || pathProxyForDraw;\n    var dirtyFlag = el.__dirty;\n    if (!inBatch) {\n        var fill = style.fill;\n        var stroke = style.stroke;\n        var hasFillGradient = hasFill && !!fill.colorStops;\n        var hasStrokeGradient = hasStroke && !!stroke.colorStops;\n        var hasFillPattern = hasFill && !!fill.image;\n        var hasStrokePattern = hasStroke && !!stroke.image;\n        var fillGradient = void 0;\n        var strokeGradient = void 0;\n        var fillPattern = void 0;\n        var strokePattern = void 0;\n        var rect = void 0;\n        if (hasFillGradient || hasStrokeGradient) {\n            rect = el.getBoundingRect();\n        }\n        if (hasFillGradient) {\n            fillGradient = dirtyFlag\n                ? getCanvasGradient(ctx, fill, rect)\n                : el.__canvasFillGradient;\n            el.__canvasFillGradient = fillGradient;\n        }\n        if (hasStrokeGradient) {\n            strokeGradient = dirtyFlag\n                ? getCanvasGradient(ctx, stroke, rect)\n                : el.__canvasStrokeGradient;\n            el.__canvasStrokeGradient = strokeGradient;\n        }\n        if (hasFillPattern) {\n            fillPattern = (dirtyFlag || !el.__canvasFillPattern)\n                ? createCanvasPattern(ctx, fill, el)\n                : el.__canvasFillPattern;\n            el.__canvasFillPattern = fillPattern;\n        }\n        if (hasStrokePattern) {\n            strokePattern = (dirtyFlag || !el.__canvasStrokePattern)\n                ? createCanvasPattern(ctx, stroke, el)\n                : el.__canvasStrokePattern;\n            el.__canvasStrokePattern = strokePattern;\n        }\n        if (hasFillGradient) {\n            ctx.fillStyle = fillGradient;\n        }\n        else if (hasFillPattern) {\n            if (fillPattern) {\n                ctx.fillStyle = fillPattern;\n            }\n            else {\n                hasFill = false;\n            }\n        }\n        if (hasStrokeGradient) {\n            ctx.strokeStyle = strokeGradient;\n        }\n        else if (hasStrokePattern) {\n            if (strokePattern) {\n                ctx.strokeStyle = strokePattern;\n            }\n            else {\n                hasStroke = false;\n            }\n        }\n    }\n    var scale = el.getGlobalScale();\n    path.setScale(scale[0], scale[1], el.segmentIgnoreThreshold);\n    var lineDash;\n    var lineDashOffset;\n    if (ctx.setLineDash && style.lineDash) {\n        _a = getLineDash(el), lineDash = _a[0], lineDashOffset = _a[1];\n    }\n    var needsRebuild = true;\n    if (firstDraw || (dirtyFlag & SHAPE_CHANGED_BIT)) {\n        path.setDPR(ctx.dpr);\n        if (strokePart) {\n            path.setContext(null);\n        }\n        else {\n            path.setContext(ctx);\n            needsRebuild = false;\n        }\n        path.reset();\n        el.buildPath(path, el.shape, inBatch);\n        path.toStatic();\n        el.pathUpdated();\n    }\n    if (needsRebuild) {\n        path.rebuildPath(ctx, strokePart ? strokePercent : 1);\n    }\n    if (lineDash) {\n        ctx.setLineDash(lineDash);\n        ctx.lineDashOffset = lineDashOffset;\n    }\n    if (!inBatch) {\n        if (style.strokeFirst) {\n            if (hasStroke) {\n                doStrokePath(ctx, style);\n            }\n            if (hasFill) {\n                doFillPath(ctx, style);\n            }\n        }\n        else {\n            if (hasFill) {\n                doFillPath(ctx, style);\n            }\n            if (hasStroke) {\n                doStrokePath(ctx, style);\n            }\n        }\n    }\n    if (lineDash) {\n        ctx.setLineDash([]);\n    }\n}\nfunction brushImage(ctx, el, style) {\n    var image = el.__image = createOrUpdateImage(style.image, el.__image, el, el.onload);\n    if (!image || !isImageReady(image)) {\n        return;\n    }\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var width = el.getWidth();\n    var height = el.getHeight();\n    var aspect = image.width / image.height;\n    if (width == null && height != null) {\n        width = height * aspect;\n    }\n    else if (height == null && width != null) {\n        height = width / aspect;\n    }\n    else if (width == null && height == null) {\n        width = image.width;\n        height = image.height;\n    }\n    if (style.sWidth && style.sHeight) {\n        var sx = style.sx || 0;\n        var sy = style.sy || 0;\n        ctx.drawImage(image, sx, sy, style.sWidth, style.sHeight, x, y, width, height);\n    }\n    else if (style.sx && style.sy) {\n        var sx = style.sx;\n        var sy = style.sy;\n        var sWidth = width - sx;\n        var sHeight = height - sy;\n        ctx.drawImage(image, sx, sy, sWidth, sHeight, x, y, width, height);\n    }\n    else {\n        ctx.drawImage(image, x, y, width, height);\n    }\n}\nfunction brushText(ctx, el, style) {\n    var _a;\n    var text = style.text;\n    text != null && (text += '');\n    if (text) {\n        ctx.font = style.font || DEFAULT_FONT;\n        ctx.textAlign = style.textAlign;\n        ctx.textBaseline = style.textBaseline;\n        var lineDash = void 0;\n        var lineDashOffset = void 0;\n        if (ctx.setLineDash && style.lineDash) {\n            _a = getLineDash(el), lineDash = _a[0], lineDashOffset = _a[1];\n        }\n        if (lineDash) {\n            ctx.setLineDash(lineDash);\n            ctx.lineDashOffset = lineDashOffset;\n        }\n        if (style.strokeFirst) {\n            if (styleHasStroke(style)) {\n                ctx.strokeText(text, style.x, style.y);\n            }\n            if (styleHasFill(style)) {\n                ctx.fillText(text, style.x, style.y);\n            }\n        }\n        else {\n            if (styleHasFill(style)) {\n                ctx.fillText(text, style.x, style.y);\n            }\n            if (styleHasStroke(style)) {\n                ctx.strokeText(text, style.x, style.y);\n            }\n        }\n        if (lineDash) {\n            ctx.setLineDash([]);\n        }\n    }\n}\nvar SHADOW_NUMBER_PROPS = ['shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\nvar STROKE_PROPS = [\n    ['lineCap', 'butt'], ['lineJoin', 'miter'], ['miterLimit', 10]\n];\nfunction bindCommonProps(ctx, style, prevStyle, forceSetAll, scope) {\n    var styleChanged = false;\n    if (!forceSetAll) {\n        prevStyle = prevStyle || {};\n        if (style === prevStyle) {\n            return false;\n        }\n    }\n    if (forceSetAll || style.opacity !== prevStyle.opacity) {\n        flushPathDrawn(ctx, scope);\n        styleChanged = true;\n        var opacity = Math.max(Math.min(style.opacity, 1), 0);\n        ctx.globalAlpha = isNaN(opacity) ? DEFAULT_COMMON_STYLE.opacity : opacity;\n    }\n    if (forceSetAll || style.blend !== prevStyle.blend) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.globalCompositeOperation = style.blend || DEFAULT_COMMON_STYLE.blend;\n    }\n    for (var i = 0; i < SHADOW_NUMBER_PROPS.length; i++) {\n        var propName = SHADOW_NUMBER_PROPS[i];\n        if (forceSetAll || style[propName] !== prevStyle[propName]) {\n            if (!styleChanged) {\n                flushPathDrawn(ctx, scope);\n                styleChanged = true;\n            }\n            ctx[propName] = ctx.dpr * (style[propName] || 0);\n        }\n    }\n    if (forceSetAll || style.shadowColor !== prevStyle.shadowColor) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.shadowColor = style.shadowColor || DEFAULT_COMMON_STYLE.shadowColor;\n    }\n    return styleChanged;\n}\nfunction bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetAll, scope) {\n    var style = getStyle(el, scope.inHover);\n    var prevStyle = forceSetAll\n        ? null\n        : (prevEl && getStyle(prevEl, scope.inHover) || {});\n    if (style === prevStyle) {\n        return false;\n    }\n    var styleChanged = bindCommonProps(ctx, style, prevStyle, forceSetAll, scope);\n    if (forceSetAll || style.fill !== prevStyle.fill) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        isValidStrokeFillStyle(style.fill) && (ctx.fillStyle = style.fill);\n    }\n    if (forceSetAll || style.stroke !== prevStyle.stroke) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        isValidStrokeFillStyle(style.stroke) && (ctx.strokeStyle = style.stroke);\n    }\n    if (forceSetAll || style.opacity !== prevStyle.opacity) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.globalAlpha = style.opacity == null ? 1 : style.opacity;\n    }\n    if (el.hasStroke()) {\n        var lineWidth = style.lineWidth;\n        var newLineWidth = lineWidth / ((style.strokeNoScale && el.getLineScale) ? el.getLineScale() : 1);\n        if (ctx.lineWidth !== newLineWidth) {\n            if (!styleChanged) {\n                flushPathDrawn(ctx, scope);\n                styleChanged = true;\n            }\n            ctx.lineWidth = newLineWidth;\n        }\n    }\n    for (var i = 0; i < STROKE_PROPS.length; i++) {\n        var prop = STROKE_PROPS[i];\n        var propName = prop[0];\n        if (forceSetAll || style[propName] !== prevStyle[propName]) {\n            if (!styleChanged) {\n                flushPathDrawn(ctx, scope);\n                styleChanged = true;\n            }\n            ctx[propName] = style[propName] || prop[1];\n        }\n    }\n    return styleChanged;\n}\nfunction bindImageStyle(ctx, el, prevEl, forceSetAll, scope) {\n    return bindCommonProps(ctx, getStyle(el, scope.inHover), prevEl && getStyle(prevEl, scope.inHover), forceSetAll, scope);\n}\nfunction setContextTransform(ctx, el) {\n    var m = el.transform;\n    var dpr = ctx.dpr || 1;\n    if (m) {\n        ctx.setTransform(dpr * m[0], dpr * m[1], dpr * m[2], dpr * m[3], dpr * m[4], dpr * m[5]);\n    }\n    else {\n        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\n    }\n}\nfunction updateClipStatus(clipPaths, ctx, scope) {\n    var allClipped = false;\n    for (var i = 0; i < clipPaths.length; i++) {\n        var clipPath = clipPaths[i];\n        allClipped = allClipped || clipPath.isZeroArea();\n        setContextTransform(ctx, clipPath);\n        ctx.beginPath();\n        clipPath.buildPath(ctx, clipPath.shape);\n        ctx.clip();\n    }\n    scope.allClipped = allClipped;\n}\nfunction isTransformChanged(m0, m1) {\n    if (m0 && m1) {\n        return m0[0] !== m1[0]\n            || m0[1] !== m1[1]\n            || m0[2] !== m1[2]\n            || m0[3] !== m1[3]\n            || m0[4] !== m1[4]\n            || m0[5] !== m1[5];\n    }\n    else if (!m0 && !m1) {\n        return false;\n    }\n    return true;\n}\nvar DRAW_TYPE_PATH = 1;\nvar DRAW_TYPE_IMAGE = 2;\nvar DRAW_TYPE_TEXT = 3;\nvar DRAW_TYPE_INCREMENTAL = 4;\nfunction canPathBatch(style) {\n    var hasFill = styleHasFill(style);\n    var hasStroke = styleHasStroke(style);\n    return !(style.lineDash\n        || !(+hasFill ^ +hasStroke)\n        || (hasFill && typeof style.fill !== 'string')\n        || (hasStroke && typeof style.stroke !== 'string')\n        || style.strokePercent < 1\n        || style.strokeOpacity < 1\n        || style.fillOpacity < 1);\n}\nfunction flushPathDrawn(ctx, scope) {\n    scope.batchFill && ctx.fill();\n    scope.batchStroke && ctx.stroke();\n    scope.batchFill = '';\n    scope.batchStroke = '';\n}\nfunction getStyle(el, inHover) {\n    return inHover ? (el.__hoverStyle || el.style) : el.style;\n}\nexport function brushSingle(ctx, el) {\n    brush(ctx, el, { inHover: false, viewWidth: 0, viewHeight: 0 }, true);\n}\nexport function brush(ctx, el, scope, isLast) {\n    var m = el.transform;\n    if (!el.shouldBePainted(scope.viewWidth, scope.viewHeight, false, false)) {\n        el.__dirty &= ~REDRAW_BIT;\n        el.__isRendered = false;\n        return;\n    }\n    var clipPaths = el.__clipPaths;\n    var prevElClipPaths = scope.prevElClipPaths;\n    var forceSetTransform = false;\n    var forceSetStyle = false;\n    if (!prevElClipPaths || isClipPathChanged(clipPaths, prevElClipPaths)) {\n        if (prevElClipPaths && prevElClipPaths.length) {\n            flushPathDrawn(ctx, scope);\n            ctx.restore();\n            forceSetStyle = forceSetTransform = true;\n            scope.prevElClipPaths = null;\n            scope.allClipped = false;\n            scope.prevEl = null;\n        }\n        if (clipPaths && clipPaths.length) {\n            flushPathDrawn(ctx, scope);\n            ctx.save();\n            updateClipStatus(clipPaths, ctx, scope);\n            forceSetTransform = true;\n        }\n        scope.prevElClipPaths = clipPaths;\n    }\n    if (scope.allClipped) {\n        el.__isRendered = false;\n        return;\n    }\n    el.beforeBrush && el.beforeBrush();\n    el.innerBeforeBrush();\n    var prevEl = scope.prevEl;\n    if (!prevEl) {\n        forceSetStyle = forceSetTransform = true;\n    }\n    var canBatchPath = el instanceof Path\n        && el.autoBatch\n        && canPathBatch(el.style);\n    if (forceSetTransform || isTransformChanged(m, prevEl.transform)) {\n        flushPathDrawn(ctx, scope);\n        setContextTransform(ctx, el);\n    }\n    else if (!canBatchPath) {\n        flushPathDrawn(ctx, scope);\n    }\n    var style = getStyle(el, scope.inHover);\n    if (el instanceof Path) {\n        if (scope.lastDrawType !== DRAW_TYPE_PATH) {\n            forceSetStyle = true;\n            scope.lastDrawType = DRAW_TYPE_PATH;\n        }\n        bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetStyle, scope);\n        if (!canBatchPath || (!scope.batchFill && !scope.batchStroke)) {\n            ctx.beginPath();\n        }\n        brushPath(ctx, el, style, canBatchPath);\n        if (canBatchPath) {\n            scope.batchFill = style.fill || '';\n            scope.batchStroke = style.stroke || '';\n        }\n    }\n    else {\n        if (el instanceof TSpan) {\n            if (scope.lastDrawType !== DRAW_TYPE_TEXT) {\n                forceSetStyle = true;\n                scope.lastDrawType = DRAW_TYPE_TEXT;\n            }\n            bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetStyle, scope);\n            brushText(ctx, el, style);\n        }\n        else if (el instanceof ZRImage) {\n            if (scope.lastDrawType !== DRAW_TYPE_IMAGE) {\n                forceSetStyle = true;\n                scope.lastDrawType = DRAW_TYPE_IMAGE;\n            }\n            bindImageStyle(ctx, el, prevEl, forceSetStyle, scope);\n            brushImage(ctx, el, style);\n        }\n        else if (el.getTemporalDisplayables) {\n            if (scope.lastDrawType !== DRAW_TYPE_INCREMENTAL) {\n                forceSetStyle = true;\n                scope.lastDrawType = DRAW_TYPE_INCREMENTAL;\n            }\n            brushIncremental(ctx, el, scope);\n        }\n    }\n    if (canBatchPath && isLast) {\n        flushPathDrawn(ctx, scope);\n    }\n    el.innerAfterBrush();\n    el.afterBrush && el.afterBrush();\n    scope.prevEl = el;\n    el.__dirty = 0;\n    el.__isRendered = true;\n}\nfunction brushIncremental(ctx, el, scope) {\n    var displayables = el.getDisplayables();\n    var temporalDisplayables = el.getTemporalDisplayables();\n    ctx.save();\n    var innerScope = {\n        prevElClipPaths: null,\n        prevEl: null,\n        allClipped: false,\n        viewWidth: scope.viewWidth,\n        viewHeight: scope.viewHeight,\n        inHover: scope.inHover\n    };\n    var i;\n    var len;\n    for (i = el.getCursor(), len = displayables.length; i < len; i++) {\n        var displayable = displayables[i];\n        displayable.beforeBrush && displayable.beforeBrush();\n        displayable.innerBeforeBrush();\n        brush(ctx, displayable, innerScope, i === len - 1);\n        displayable.innerAfterBrush();\n        displayable.afterBrush && displayable.afterBrush();\n        innerScope.prevEl = displayable;\n    }\n    for (var i_1 = 0, len_1 = temporalDisplayables.length; i_1 < len_1; i_1++) {\n        var displayable = temporalDisplayables[i_1];\n        displayable.beforeBrush && displayable.beforeBrush();\n        displayable.innerBeforeBrush();\n        brush(ctx, displayable, innerScope, i_1 === len_1 - 1);\n        displayable.innerAfterBrush();\n        displayable.afterBrush && displayable.afterBrush();\n        innerScope.prevEl = displayable;\n    }\n    el.clearTemporalDisplayables();\n    el.notClear = true;\n    ctx.restore();\n}\n","import { __extends } from \"tslib\";\nimport * as util from '../core/util.js';\nimport { devicePixelRatio } from '../config.js';\nimport Eventful from '../core/Eventful.js';\nimport { getCanvasGradient } from './helper.js';\nimport { createCanvasPattern } from './graphic.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport { REDRAW_BIT } from '../graphic/constants.js';\nimport { platformApi } from '../core/platform.js';\nfunction createDom(id, painter, dpr) {\n    var newDom = platformApi.createCanvas();\n    var width = painter.getWidth();\n    var height = painter.getHeight();\n    var newDomStyle = newDom.style;\n    if (newDomStyle) {\n        newDomStyle.position = 'absolute';\n        newDomStyle.left = '0';\n        newDomStyle.top = '0';\n        newDomStyle.width = width + 'px';\n        newDomStyle.height = height + 'px';\n        newDom.setAttribute('data-zr-dom-id', id);\n    }\n    newDom.width = width * dpr;\n    newDom.height = height * dpr;\n    return newDom;\n}\n;\nvar Layer = (function (_super) {\n    __extends(Layer, _super);\n    function Layer(id, painter, dpr) {\n        var _this = _super.call(this) || this;\n        _this.motionBlur = false;\n        _this.lastFrameAlpha = 0.7;\n        _this.dpr = 1;\n        _this.virtual = false;\n        _this.config = {};\n        _this.incremental = false;\n        _this.zlevel = 0;\n        _this.maxRepaintRectCount = 5;\n        _this.__dirty = true;\n        _this.__firstTimePaint = true;\n        _this.__used = false;\n        _this.__drawIndex = 0;\n        _this.__startIndex = 0;\n        _this.__endIndex = 0;\n        _this.__prevStartIndex = null;\n        _this.__prevEndIndex = null;\n        var dom;\n        dpr = dpr || devicePixelRatio;\n        if (typeof id === 'string') {\n            dom = createDom(id, painter, dpr);\n        }\n        else if (util.isObject(id)) {\n            dom = id;\n            id = dom.id;\n        }\n        _this.id = id;\n        _this.dom = dom;\n        var domStyle = dom.style;\n        if (domStyle) {\n            util.disableUserSelect(dom);\n            dom.onselectstart = function () { return false; };\n            domStyle.padding = '0';\n            domStyle.margin = '0';\n            domStyle.borderWidth = '0';\n        }\n        _this.painter = painter;\n        _this.dpr = dpr;\n        return _this;\n    }\n    Layer.prototype.getElementCount = function () {\n        return this.__endIndex - this.__startIndex;\n    };\n    Layer.prototype.afterBrush = function () {\n        this.__prevStartIndex = this.__startIndex;\n        this.__prevEndIndex = this.__endIndex;\n    };\n    Layer.prototype.initContext = function () {\n        this.ctx = this.dom.getContext('2d');\n        this.ctx.dpr = this.dpr;\n    };\n    Layer.prototype.setUnpainted = function () {\n        this.__firstTimePaint = true;\n    };\n    Layer.prototype.createBackBuffer = function () {\n        var dpr = this.dpr;\n        this.domBack = createDom('back-' + this.id, this.painter, dpr);\n        this.ctxBack = this.domBack.getContext('2d');\n        if (dpr !== 1) {\n            this.ctxBack.scale(dpr, dpr);\n        }\n    };\n    Layer.prototype.createRepaintRects = function (displayList, prevList, viewWidth, viewHeight) {\n        if (this.__firstTimePaint) {\n            this.__firstTimePaint = false;\n            return null;\n        }\n        var mergedRepaintRects = [];\n        var maxRepaintRectCount = this.maxRepaintRectCount;\n        var full = false;\n        var pendingRect = new BoundingRect(0, 0, 0, 0);\n        function addRectToMergePool(rect) {\n            if (!rect.isFinite() || rect.isZero()) {\n                return;\n            }\n            if (mergedRepaintRects.length === 0) {\n                var boundingRect = new BoundingRect(0, 0, 0, 0);\n                boundingRect.copy(rect);\n                mergedRepaintRects.push(boundingRect);\n            }\n            else {\n                var isMerged = false;\n                var minDeltaArea = Infinity;\n                var bestRectToMergeIdx = 0;\n                for (var i = 0; i < mergedRepaintRects.length; ++i) {\n                    var mergedRect = mergedRepaintRects[i];\n                    if (mergedRect.intersect(rect)) {\n                        var pendingRect_1 = new BoundingRect(0, 0, 0, 0);\n                        pendingRect_1.copy(mergedRect);\n                        pendingRect_1.union(rect);\n                        mergedRepaintRects[i] = pendingRect_1;\n                        isMerged = true;\n                        break;\n                    }\n                    else if (full) {\n                        pendingRect.copy(rect);\n                        pendingRect.union(mergedRect);\n                        var aArea = rect.width * rect.height;\n                        var bArea = mergedRect.width * mergedRect.height;\n                        var pendingArea = pendingRect.width * pendingRect.height;\n                        var deltaArea = pendingArea - aArea - bArea;\n                        if (deltaArea < minDeltaArea) {\n                            minDeltaArea = deltaArea;\n                            bestRectToMergeIdx = i;\n                        }\n                    }\n                }\n                if (full) {\n                    mergedRepaintRects[bestRectToMergeIdx].union(rect);\n                    isMerged = true;\n                }\n                if (!isMerged) {\n                    var boundingRect = new BoundingRect(0, 0, 0, 0);\n                    boundingRect.copy(rect);\n                    mergedRepaintRects.push(boundingRect);\n                }\n                if (!full) {\n                    full = mergedRepaintRects.length >= maxRepaintRectCount;\n                }\n            }\n        }\n        for (var i = this.__startIndex; i < this.__endIndex; ++i) {\n            var el = displayList[i];\n            if (el) {\n                var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);\n                var prevRect = el.__isRendered && ((el.__dirty & REDRAW_BIT) || !shouldPaint)\n                    ? el.getPrevPaintRect()\n                    : null;\n                if (prevRect) {\n                    addRectToMergePool(prevRect);\n                }\n                var curRect = shouldPaint && ((el.__dirty & REDRAW_BIT) || !el.__isRendered)\n                    ? el.getPaintRect()\n                    : null;\n                if (curRect) {\n                    addRectToMergePool(curRect);\n                }\n            }\n        }\n        for (var i = this.__prevStartIndex; i < this.__prevEndIndex; ++i) {\n            var el = prevList[i];\n            var shouldPaint = el && el.shouldBePainted(viewWidth, viewHeight, true, true);\n            if (el && (!shouldPaint || !el.__zr) && el.__isRendered) {\n                var prevRect = el.getPrevPaintRect();\n                if (prevRect) {\n                    addRectToMergePool(prevRect);\n                }\n            }\n        }\n        var hasIntersections;\n        do {\n            hasIntersections = false;\n            for (var i = 0; i < mergedRepaintRects.length;) {\n                if (mergedRepaintRects[i].isZero()) {\n                    mergedRepaintRects.splice(i, 1);\n                    continue;\n                }\n                for (var j = i + 1; j < mergedRepaintRects.length;) {\n                    if (mergedRepaintRects[i].intersect(mergedRepaintRects[j])) {\n                        hasIntersections = true;\n                        mergedRepaintRects[i].union(mergedRepaintRects[j]);\n                        mergedRepaintRects.splice(j, 1);\n                    }\n                    else {\n                        j++;\n                    }\n                }\n                i++;\n            }\n        } while (hasIntersections);\n        this._paintRects = mergedRepaintRects;\n        return mergedRepaintRects;\n    };\n    Layer.prototype.debugGetPaintRects = function () {\n        return (this._paintRects || []).slice();\n    };\n    Layer.prototype.resize = function (width, height) {\n        var dpr = this.dpr;\n        var dom = this.dom;\n        var domStyle = dom.style;\n        var domBack = this.domBack;\n        if (domStyle) {\n            domStyle.width = width + 'px';\n            domStyle.height = height + 'px';\n        }\n        dom.width = width * dpr;\n        dom.height = height * dpr;\n        if (domBack) {\n            domBack.width = width * dpr;\n            domBack.height = height * dpr;\n            if (dpr !== 1) {\n                this.ctxBack.scale(dpr, dpr);\n            }\n        }\n    };\n    Layer.prototype.clear = function (clearAll, clearColor, repaintRects) {\n        var dom = this.dom;\n        var ctx = this.ctx;\n        var width = dom.width;\n        var height = dom.height;\n        clearColor = clearColor || this.clearColor;\n        var haveMotionBLur = this.motionBlur && !clearAll;\n        var lastFrameAlpha = this.lastFrameAlpha;\n        var dpr = this.dpr;\n        var self = this;\n        if (haveMotionBLur) {\n            if (!this.domBack) {\n                this.createBackBuffer();\n            }\n            this.ctxBack.globalCompositeOperation = 'copy';\n            this.ctxBack.drawImage(dom, 0, 0, width / dpr, height / dpr);\n        }\n        var domBack = this.domBack;\n        function doClear(x, y, width, height) {\n            ctx.clearRect(x, y, width, height);\n            if (clearColor && clearColor !== 'transparent') {\n                var clearColorGradientOrPattern = void 0;\n                if (util.isGradientObject(clearColor)) {\n                    var shouldCache = clearColor.global || (clearColor.__width === width\n                        && clearColor.__height === height);\n                    clearColorGradientOrPattern = shouldCache\n                        && clearColor.__canvasGradient\n                        || getCanvasGradient(ctx, clearColor, {\n                            x: 0,\n                            y: 0,\n                            width: width,\n                            height: height\n                        });\n                    clearColor.__canvasGradient = clearColorGradientOrPattern;\n                    clearColor.__width = width;\n                    clearColor.__height = height;\n                }\n                else if (util.isImagePatternObject(clearColor)) {\n                    clearColor.scaleX = clearColor.scaleX || dpr;\n                    clearColor.scaleY = clearColor.scaleY || dpr;\n                    clearColorGradientOrPattern = createCanvasPattern(ctx, clearColor, {\n                        dirty: function () {\n                            self.setUnpainted();\n                            self.painter.refresh();\n                        }\n                    });\n                }\n                ctx.save();\n                ctx.fillStyle = clearColorGradientOrPattern || clearColor;\n                ctx.fillRect(x, y, width, height);\n                ctx.restore();\n            }\n            if (haveMotionBLur) {\n                ctx.save();\n                ctx.globalAlpha = lastFrameAlpha;\n                ctx.drawImage(domBack, x, y, width, height);\n                ctx.restore();\n            }\n        }\n        ;\n        if (!repaintRects || haveMotionBLur) {\n            doClear(0, 0, width, height);\n        }\n        else if (repaintRects.length) {\n            util.each(repaintRects, function (rect) {\n                doClear(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n            });\n        }\n    };\n    return Layer;\n}(Eventful));\nexport default Layer;\n","import { devicePixelRatio } from '../config.js';\nimport * as util from '../core/util.js';\nimport Layer from './Layer.js';\nimport requestAnimationFrame from '../animation/requestAnimationFrame.js';\nimport env from '../core/env.js';\nimport { brush, brushSingle } from './graphic.js';\nimport { REDRAW_BIT } from '../graphic/constants.js';\nimport { getSize } from './helper.js';\nvar HOVER_LAYER_ZLEVEL = 1e5;\nvar CANVAS_ZLEVEL = 314159;\nvar EL_AFTER_INCREMENTAL_INC = 0.01;\nvar INCREMENTAL_INC = 0.001;\nfunction isLayerValid(layer) {\n    if (!layer) {\n        return false;\n    }\n    if (layer.__builtin__) {\n        return true;\n    }\n    if (typeof (layer.resize) !== 'function'\n        || typeof (layer.refresh) !== 'function') {\n        return false;\n    }\n    return true;\n}\nfunction createRoot(width, height) {\n    var domRoot = document.createElement('div');\n    domRoot.style.cssText = [\n        'position:relative',\n        'width:' + width + 'px',\n        'height:' + height + 'px',\n        'padding:0',\n        'margin:0',\n        'border-width:0'\n    ].join(';') + ';';\n    return domRoot;\n}\nvar CanvasPainter = (function () {\n    function CanvasPainter(root, storage, opts, id) {\n        this.type = 'canvas';\n        this._zlevelList = [];\n        this._prevDisplayList = [];\n        this._layers = {};\n        this._layerConfig = {};\n        this._needsManuallyCompositing = false;\n        this.type = 'canvas';\n        var singleCanvas = !root.nodeName\n            || root.nodeName.toUpperCase() === 'CANVAS';\n        this._opts = opts = util.extend({}, opts || {});\n        this.dpr = opts.devicePixelRatio || devicePixelRatio;\n        this._singleCanvas = singleCanvas;\n        this.root = root;\n        var rootStyle = root.style;\n        if (rootStyle) {\n            util.disableUserSelect(root);\n            root.innerHTML = '';\n        }\n        this.storage = storage;\n        var zlevelList = this._zlevelList;\n        this._prevDisplayList = [];\n        var layers = this._layers;\n        if (!singleCanvas) {\n            this._width = getSize(root, 0, opts);\n            this._height = getSize(root, 1, opts);\n            var domRoot = this._domRoot = createRoot(this._width, this._height);\n            root.appendChild(domRoot);\n        }\n        else {\n            var rootCanvas = root;\n            var width = rootCanvas.width;\n            var height = rootCanvas.height;\n            if (opts.width != null) {\n                width = opts.width;\n            }\n            if (opts.height != null) {\n                height = opts.height;\n            }\n            this.dpr = opts.devicePixelRatio || 1;\n            rootCanvas.width = width * this.dpr;\n            rootCanvas.height = height * this.dpr;\n            this._width = width;\n            this._height = height;\n            var mainLayer = new Layer(rootCanvas, this, this.dpr);\n            mainLayer.__builtin__ = true;\n            mainLayer.initContext();\n            layers[CANVAS_ZLEVEL] = mainLayer;\n            mainLayer.zlevel = CANVAS_ZLEVEL;\n            zlevelList.push(CANVAS_ZLEVEL);\n            this._domRoot = root;\n        }\n    }\n    CanvasPainter.prototype.getType = function () {\n        return 'canvas';\n    };\n    CanvasPainter.prototype.isSingleCanvas = function () {\n        return this._singleCanvas;\n    };\n    CanvasPainter.prototype.getViewportRoot = function () {\n        return this._domRoot;\n    };\n    CanvasPainter.prototype.getViewportRootOffset = function () {\n        var viewportRoot = this.getViewportRoot();\n        if (viewportRoot) {\n            return {\n                offsetLeft: viewportRoot.offsetLeft || 0,\n                offsetTop: viewportRoot.offsetTop || 0\n            };\n        }\n    };\n    CanvasPainter.prototype.refresh = function (paintAll) {\n        var list = this.storage.getDisplayList(true);\n        var prevList = this._prevDisplayList;\n        var zlevelList = this._zlevelList;\n        this._redrawId = Math.random();\n        this._paintList(list, prevList, paintAll, this._redrawId);\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (!layer.__builtin__ && layer.refresh) {\n                var clearColor = i === 0 ? this._backgroundColor : null;\n                layer.refresh(clearColor);\n            }\n        }\n        if (this._opts.useDirtyRect) {\n            this._prevDisplayList = list.slice();\n        }\n        return this;\n    };\n    CanvasPainter.prototype.refreshHover = function () {\n        this._paintHoverList(this.storage.getDisplayList(false));\n    };\n    CanvasPainter.prototype._paintHoverList = function (list) {\n        var len = list.length;\n        var hoverLayer = this._hoverlayer;\n        hoverLayer && hoverLayer.clear();\n        if (!len) {\n            return;\n        }\n        var scope = {\n            inHover: true,\n            viewWidth: this._width,\n            viewHeight: this._height\n        };\n        var ctx;\n        for (var i = 0; i < len; i++) {\n            var el = list[i];\n            if (el.__inHover) {\n                if (!hoverLayer) {\n                    hoverLayer = this._hoverlayer = this.getLayer(HOVER_LAYER_ZLEVEL);\n                }\n                if (!ctx) {\n                    ctx = hoverLayer.ctx;\n                    ctx.save();\n                }\n                brush(ctx, el, scope, i === len - 1);\n            }\n        }\n        if (ctx) {\n            ctx.restore();\n        }\n    };\n    CanvasPainter.prototype.getHoverLayer = function () {\n        return this.getLayer(HOVER_LAYER_ZLEVEL);\n    };\n    CanvasPainter.prototype.paintOne = function (ctx, el) {\n        brushSingle(ctx, el);\n    };\n    CanvasPainter.prototype._paintList = function (list, prevList, paintAll, redrawId) {\n        if (this._redrawId !== redrawId) {\n            return;\n        }\n        paintAll = paintAll || false;\n        this._updateLayerStatus(list);\n        var _a = this._doPaintList(list, prevList, paintAll), finished = _a.finished, needsRefreshHover = _a.needsRefreshHover;\n        if (this._needsManuallyCompositing) {\n            this._compositeManually();\n        }\n        if (needsRefreshHover) {\n            this._paintHoverList(list);\n        }\n        if (!finished) {\n            var self_1 = this;\n            requestAnimationFrame(function () {\n                self_1._paintList(list, prevList, paintAll, redrawId);\n            });\n        }\n        else {\n            this.eachLayer(function (layer) {\n                layer.afterBrush && layer.afterBrush();\n            });\n        }\n    };\n    CanvasPainter.prototype._compositeManually = function () {\n        var ctx = this.getLayer(CANVAS_ZLEVEL).ctx;\n        var width = this._domRoot.width;\n        var height = this._domRoot.height;\n        ctx.clearRect(0, 0, width, height);\n        this.eachBuiltinLayer(function (layer) {\n            if (layer.virtual) {\n                ctx.drawImage(layer.dom, 0, 0, width, height);\n            }\n        });\n    };\n    CanvasPainter.prototype._doPaintList = function (list, prevList, paintAll) {\n        var _this = this;\n        var layerList = [];\n        var useDirtyRect = this._opts.useDirtyRect;\n        for (var zi = 0; zi < this._zlevelList.length; zi++) {\n            var zlevel = this._zlevelList[zi];\n            var layer = this._layers[zlevel];\n            if (layer.__builtin__\n                && layer !== this._hoverlayer\n                && (layer.__dirty || paintAll)) {\n                layerList.push(layer);\n            }\n        }\n        var finished = true;\n        var needsRefreshHover = false;\n        var _loop_1 = function (k) {\n            var layer = layerList[k];\n            var ctx = layer.ctx;\n            var repaintRects = useDirtyRect\n                && layer.createRepaintRects(list, prevList, this_1._width, this_1._height);\n            var start = paintAll ? layer.__startIndex : layer.__drawIndex;\n            var useTimer = !paintAll && layer.incremental && Date.now;\n            var startTime = useTimer && Date.now();\n            var clearColor = layer.zlevel === this_1._zlevelList[0]\n                ? this_1._backgroundColor : null;\n            if (layer.__startIndex === layer.__endIndex) {\n                layer.clear(false, clearColor, repaintRects);\n            }\n            else if (start === layer.__startIndex) {\n                var firstEl = list[start];\n                if (!firstEl.incremental || !firstEl.notClear || paintAll) {\n                    layer.clear(false, clearColor, repaintRects);\n                }\n            }\n            if (start === -1) {\n                console.error('For some unknown reason. drawIndex is -1');\n                start = layer.__startIndex;\n            }\n            var i;\n            var repaint = function (repaintRect) {\n                var scope = {\n                    inHover: false,\n                    allClipped: false,\n                    prevEl: null,\n                    viewWidth: _this._width,\n                    viewHeight: _this._height\n                };\n                for (i = start; i < layer.__endIndex; i++) {\n                    var el = list[i];\n                    if (el.__inHover) {\n                        needsRefreshHover = true;\n                    }\n                    _this._doPaintEl(el, layer, useDirtyRect, repaintRect, scope, i === layer.__endIndex - 1);\n                    if (useTimer) {\n                        var dTime = Date.now() - startTime;\n                        if (dTime > 15) {\n                            break;\n                        }\n                    }\n                }\n                if (scope.prevElClipPaths) {\n                    ctx.restore();\n                }\n            };\n            if (repaintRects) {\n                if (repaintRects.length === 0) {\n                    i = layer.__endIndex;\n                }\n                else {\n                    var dpr = this_1.dpr;\n                    for (var r = 0; r < repaintRects.length; ++r) {\n                        var rect = repaintRects[r];\n                        ctx.save();\n                        ctx.beginPath();\n                        ctx.rect(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n                        ctx.clip();\n                        repaint(rect);\n                        ctx.restore();\n                    }\n                }\n            }\n            else {\n                ctx.save();\n                repaint();\n                ctx.restore();\n            }\n            layer.__drawIndex = i;\n            if (layer.__drawIndex < layer.__endIndex) {\n                finished = false;\n            }\n        };\n        var this_1 = this;\n        for (var k = 0; k < layerList.length; k++) {\n            _loop_1(k);\n        }\n        if (env.wxa) {\n            util.each(this._layers, function (layer) {\n                if (layer && layer.ctx && layer.ctx.draw) {\n                    layer.ctx.draw();\n                }\n            });\n        }\n        return {\n            finished: finished,\n            needsRefreshHover: needsRefreshHover\n        };\n    };\n    CanvasPainter.prototype._doPaintEl = function (el, currentLayer, useDirtyRect, repaintRect, scope, isLast) {\n        var ctx = currentLayer.ctx;\n        if (useDirtyRect) {\n            var paintRect = el.getPaintRect();\n            if (!repaintRect || paintRect && paintRect.intersect(repaintRect)) {\n                brush(ctx, el, scope, isLast);\n                el.setPrevPaintRect(paintRect);\n            }\n        }\n        else {\n            brush(ctx, el, scope, isLast);\n        }\n    };\n    CanvasPainter.prototype.getLayer = function (zlevel, virtual) {\n        if (this._singleCanvas && !this._needsManuallyCompositing) {\n            zlevel = CANVAS_ZLEVEL;\n        }\n        var layer = this._layers[zlevel];\n        if (!layer) {\n            layer = new Layer('zr_' + zlevel, this, this.dpr);\n            layer.zlevel = zlevel;\n            layer.__builtin__ = true;\n            if (this._layerConfig[zlevel]) {\n                util.merge(layer, this._layerConfig[zlevel], true);\n            }\n            else if (this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC]) {\n                util.merge(layer, this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC], true);\n            }\n            if (virtual) {\n                layer.virtual = virtual;\n            }\n            this.insertLayer(zlevel, layer);\n            layer.initContext();\n        }\n        return layer;\n    };\n    CanvasPainter.prototype.insertLayer = function (zlevel, layer) {\n        var layersMap = this._layers;\n        var zlevelList = this._zlevelList;\n        var len = zlevelList.length;\n        var domRoot = this._domRoot;\n        var prevLayer = null;\n        var i = -1;\n        if (layersMap[zlevel]) {\n            if (process.env.NODE_ENV !== 'production') {\n                util.logError('ZLevel ' + zlevel + ' has been used already');\n            }\n            return;\n        }\n        if (!isLayerValid(layer)) {\n            if (process.env.NODE_ENV !== 'production') {\n                util.logError('Layer of zlevel ' + zlevel + ' is not valid');\n            }\n            return;\n        }\n        if (len > 0 && zlevel > zlevelList[0]) {\n            for (i = 0; i < len - 1; i++) {\n                if (zlevelList[i] < zlevel\n                    && zlevelList[i + 1] > zlevel) {\n                    break;\n                }\n            }\n            prevLayer = layersMap[zlevelList[i]];\n        }\n        zlevelList.splice(i + 1, 0, zlevel);\n        layersMap[zlevel] = layer;\n        if (!layer.virtual) {\n            if (prevLayer) {\n                var prevDom = prevLayer.dom;\n                if (prevDom.nextSibling) {\n                    domRoot.insertBefore(layer.dom, prevDom.nextSibling);\n                }\n                else {\n                    domRoot.appendChild(layer.dom);\n                }\n            }\n            else {\n                if (domRoot.firstChild) {\n                    domRoot.insertBefore(layer.dom, domRoot.firstChild);\n                }\n                else {\n                    domRoot.appendChild(layer.dom);\n                }\n            }\n        }\n        layer.painter || (layer.painter = this);\n    };\n    CanvasPainter.prototype.eachLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            cb.call(context, this._layers[z], z);\n        }\n    };\n    CanvasPainter.prototype.eachBuiltinLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (layer.__builtin__) {\n                cb.call(context, layer, z);\n            }\n        }\n    };\n    CanvasPainter.prototype.eachOtherLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (!layer.__builtin__) {\n                cb.call(context, layer, z);\n            }\n        }\n    };\n    CanvasPainter.prototype.getLayers = function () {\n        return this._layers;\n    };\n    CanvasPainter.prototype._updateLayerStatus = function (list) {\n        this.eachBuiltinLayer(function (layer, z) {\n            layer.__dirty = layer.__used = false;\n        });\n        function updatePrevLayer(idx) {\n            if (prevLayer) {\n                if (prevLayer.__endIndex !== idx) {\n                    prevLayer.__dirty = true;\n                }\n                prevLayer.__endIndex = idx;\n            }\n        }\n        if (this._singleCanvas) {\n            for (var i_1 = 1; i_1 < list.length; i_1++) {\n                var el = list[i_1];\n                if (el.zlevel !== list[i_1 - 1].zlevel || el.incremental) {\n                    this._needsManuallyCompositing = true;\n                    break;\n                }\n            }\n        }\n        var prevLayer = null;\n        var incrementalLayerCount = 0;\n        var prevZlevel;\n        var i;\n        for (i = 0; i < list.length; i++) {\n            var el = list[i];\n            var zlevel = el.zlevel;\n            var layer = void 0;\n            if (prevZlevel !== zlevel) {\n                prevZlevel = zlevel;\n                incrementalLayerCount = 0;\n            }\n            if (el.incremental) {\n                layer = this.getLayer(zlevel + INCREMENTAL_INC, this._needsManuallyCompositing);\n                layer.incremental = true;\n                incrementalLayerCount = 1;\n            }\n            else {\n                layer = this.getLayer(zlevel + (incrementalLayerCount > 0 ? EL_AFTER_INCREMENTAL_INC : 0), this._needsManuallyCompositing);\n            }\n            if (!layer.__builtin__) {\n                util.logError('ZLevel ' + zlevel + ' has been used by unkown layer ' + layer.id);\n            }\n            if (layer !== prevLayer) {\n                layer.__used = true;\n                if (layer.__startIndex !== i) {\n                    layer.__dirty = true;\n                }\n                layer.__startIndex = i;\n                if (!layer.incremental) {\n                    layer.__drawIndex = i;\n                }\n                else {\n                    layer.__drawIndex = -1;\n                }\n                updatePrevLayer(i);\n                prevLayer = layer;\n            }\n            if ((el.__dirty & REDRAW_BIT) && !el.__inHover) {\n                layer.__dirty = true;\n                if (layer.incremental && layer.__drawIndex < 0) {\n                    layer.__drawIndex = i;\n                }\n            }\n        }\n        updatePrevLayer(i);\n        this.eachBuiltinLayer(function (layer, z) {\n            if (!layer.__used && layer.getElementCount() > 0) {\n                layer.__dirty = true;\n                layer.__startIndex = layer.__endIndex = layer.__drawIndex = 0;\n            }\n            if (layer.__dirty && layer.__drawIndex < 0) {\n                layer.__drawIndex = layer.__startIndex;\n            }\n        });\n    };\n    CanvasPainter.prototype.clear = function () {\n        this.eachBuiltinLayer(this._clearLayer);\n        return this;\n    };\n    CanvasPainter.prototype._clearLayer = function (layer) {\n        layer.clear();\n    };\n    CanvasPainter.prototype.setBackgroundColor = function (backgroundColor) {\n        this._backgroundColor = backgroundColor;\n        util.each(this._layers, function (layer) {\n            layer.setUnpainted();\n        });\n    };\n    CanvasPainter.prototype.configLayer = function (zlevel, config) {\n        if (config) {\n            var layerConfig = this._layerConfig;\n            if (!layerConfig[zlevel]) {\n                layerConfig[zlevel] = config;\n            }\n            else {\n                util.merge(layerConfig[zlevel], config, true);\n            }\n            for (var i = 0; i < this._zlevelList.length; i++) {\n                var _zlevel = this._zlevelList[i];\n                if (_zlevel === zlevel || _zlevel === zlevel + EL_AFTER_INCREMENTAL_INC) {\n                    var layer = this._layers[_zlevel];\n                    util.merge(layer, layerConfig[zlevel], true);\n                }\n            }\n        }\n    };\n    CanvasPainter.prototype.delLayer = function (zlevel) {\n        var layers = this._layers;\n        var zlevelList = this._zlevelList;\n        var layer = layers[zlevel];\n        if (!layer) {\n            return;\n        }\n        layer.dom.parentNode.removeChild(layer.dom);\n        delete layers[zlevel];\n        zlevelList.splice(util.indexOf(zlevelList, zlevel), 1);\n    };\n    CanvasPainter.prototype.resize = function (width, height) {\n        if (!this._domRoot.style) {\n            if (width == null || height == null) {\n                return;\n            }\n            this._width = width;\n            this._height = height;\n            this.getLayer(CANVAS_ZLEVEL).resize(width, height);\n        }\n        else {\n            var domRoot = this._domRoot;\n            domRoot.style.display = 'none';\n            var opts = this._opts;\n            var root = this.root;\n            width != null && (opts.width = width);\n            height != null && (opts.height = height);\n            width = getSize(root, 0, opts);\n            height = getSize(root, 1, opts);\n            domRoot.style.display = '';\n            if (this._width !== width || height !== this._height) {\n                domRoot.style.width = width + 'px';\n                domRoot.style.height = height + 'px';\n                for (var id in this._layers) {\n                    if (this._layers.hasOwnProperty(id)) {\n                        this._layers[id].resize(width, height);\n                    }\n                }\n                this.refresh(true);\n            }\n            this._width = width;\n            this._height = height;\n        }\n        return this;\n    };\n    CanvasPainter.prototype.clearLayer = function (zlevel) {\n        var layer = this._layers[zlevel];\n        if (layer) {\n            layer.clear();\n        }\n    };\n    CanvasPainter.prototype.dispose = function () {\n        this.root.innerHTML = '';\n        this.root =\n            this.storage =\n                this._domRoot =\n                    this._layers = null;\n    };\n    CanvasPainter.prototype.getRenderedCanvas = function (opts) {\n        opts = opts || {};\n        if (this._singleCanvas && !this._compositeManually) {\n            return this._layers[CANVAS_ZLEVEL].dom;\n        }\n        var imageLayer = new Layer('image', this, opts.pixelRatio || this.dpr);\n        imageLayer.initContext();\n        imageLayer.clear(false, opts.backgroundColor || this._backgroundColor);\n        var ctx = imageLayer.ctx;\n        if (opts.pixelRatio <= this.dpr) {\n            this.refresh();\n            var width_1 = imageLayer.dom.width;\n            var height_1 = imageLayer.dom.height;\n            this.eachLayer(function (layer) {\n                if (layer.__builtin__) {\n                    ctx.drawImage(layer.dom, 0, 0, width_1, height_1);\n                }\n                else if (layer.renderToCanvas) {\n                    ctx.save();\n                    layer.renderToCanvas(ctx);\n                    ctx.restore();\n                }\n            });\n        }\n        else {\n            var scope = {\n                inHover: false,\n                viewWidth: this._width,\n                viewHeight: this._height\n            };\n            var displayList = this.storage.getDisplayList(true);\n            for (var i = 0, len = displayList.length; i < len; i++) {\n                var el = displayList[i];\n                brush(ctx, el, scope, i === len - 1);\n            }\n        }\n        return imageLayer.dom;\n    };\n    CanvasPainter.prototype.getWidth = function () {\n        return this._width;\n    };\n    CanvasPainter.prototype.getHeight = function () {\n        return this._height;\n    };\n    return CanvasPainter;\n}());\nexport default CanvasPainter;\n;\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar TYPE_DELIMITER = '.';\nvar IS_CONTAINER = '___EC__COMPONENT__CONTAINER___';\nvar IS_EXTENDED_CLASS = '___EC__EXTENDED_CLASS___';\n/**\n * Notice, parseClassType('') should returns {main: '', sub: ''}\n * @public\n */\nexport function parseClassType(componentType) {\n  var ret = {\n    main: '',\n    sub: ''\n  };\n  if (componentType) {\n    var typeArr = componentType.split(TYPE_DELIMITER);\n    ret.main = typeArr[0] || '';\n    ret.sub = typeArr[1] || '';\n  }\n  return ret;\n}\n/**\n * @public\n */\nfunction checkClassType(componentType) {\n  zrUtil.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(componentType), 'componentType \"' + componentType + '\" illegal');\n}\nexport function isExtendedClass(clz) {\n  return !!(clz && clz[IS_EXTENDED_CLASS]);\n}\n/**\n * Implements `ExtendableConstructor` for `rootClz`.\n *\n * @usage\n * ```ts\n * class Xxx {}\n * type XxxConstructor = typeof Xxx & ExtendableConstructor\n * enableClassExtend(Xxx as XxxConstructor);\n * ```\n */\nexport function enableClassExtend(rootClz, mandatoryMethods) {\n  rootClz.$constructor = rootClz; // FIXME: not necessary?\n  rootClz.extend = function (proto) {\n    if (process.env.NODE_ENV !== 'production') {\n      zrUtil.each(mandatoryMethods, function (method) {\n        if (!proto[method]) {\n          console.warn('Method `' + method + '` should be implemented' + (proto.type ? ' in ' + proto.type : '') + '.');\n        }\n      });\n    }\n    var superClass = this;\n    var ExtendedClass;\n    if (isESClass(superClass)) {\n      ExtendedClass = /** @class */function (_super) {\n        __extends(class_1, _super);\n        function class_1() {\n          return _super.apply(this, arguments) || this;\n        }\n        return class_1;\n      }(superClass);\n    } else {\n      // For backward compat, we both support ts class inheritance and this\n      // \"extend\" approach.\n      // The constructor should keep the same behavior as ts class inheritance:\n      // If this constructor/$constructor is not declared, auto invoke the super\n      // constructor.\n      // If this constructor/$constructor is declared, it is responsible for\n      // calling the super constructor.\n      ExtendedClass = function () {\n        (proto.$constructor || superClass).apply(this, arguments);\n      };\n      zrUtil.inherits(ExtendedClass, this);\n    }\n    zrUtil.extend(ExtendedClass.prototype, proto);\n    ExtendedClass[IS_EXTENDED_CLASS] = true;\n    ExtendedClass.extend = this.extend;\n    ExtendedClass.superCall = superCall;\n    ExtendedClass.superApply = superApply;\n    ExtendedClass.superClass = superClass;\n    return ExtendedClass;\n  };\n}\nfunction isESClass(fn) {\n  return zrUtil.isFunction(fn) && /^class\\s/.test(Function.prototype.toString.call(fn));\n}\n/**\n * A work around to both support ts extend and this extend mechanism.\n * on sub-class.\n * @usage\n * ```ts\n * class Component { ... }\n * classUtil.enableClassExtend(Component);\n * classUtil.enableClassManagement(Component, {registerWhenExtend: true});\n *\n * class Series extends Component { ... }\n * // Without calling `markExtend`, `registerWhenExtend` will not work.\n * Component.markExtend(Series);\n * ```\n */\nexport function mountExtend(SubClz, SupperClz) {\n  SubClz.extend = SupperClz.extend;\n}\n// A random offset.\nvar classBase = Math.round(Math.random() * 10);\n/**\n * Implements `CheckableConstructor` for `target`.\n * Can not use instanceof, consider different scope by\n * cross domain or es module import in ec extensions.\n * Mount a method \"isInstance()\" to Clz.\n *\n * @usage\n * ```ts\n * class Xxx {}\n * type XxxConstructor = typeof Xxx & CheckableConstructor;\n * enableClassCheck(Xxx as XxxConstructor)\n * ```\n */\nexport function enableClassCheck(target) {\n  var classAttr = ['__\\0is_clz', classBase++].join('_');\n  target.prototype[classAttr] = true;\n  if (process.env.NODE_ENV !== 'production') {\n    zrUtil.assert(!target.isInstance, 'The method \"is\" can not be defined.');\n  }\n  target.isInstance = function (obj) {\n    return !!(obj && obj[classAttr]);\n  };\n}\n// superCall should have class info, which can not be fetched from 'this'.\n// Consider this case:\n// class A has method f,\n// class B inherits class A, overrides method f, f call superApply('f'),\n// class C inherits class B, does not override method f,\n// then when method of class C is called, dead loop occurred.\nfunction superCall(context, methodName) {\n  var args = [];\n  for (var _i = 2; _i < arguments.length; _i++) {\n    args[_i - 2] = arguments[_i];\n  }\n  return this.superClass.prototype[methodName].apply(context, args);\n}\nfunction superApply(context, methodName, args) {\n  return this.superClass.prototype[methodName].apply(context, args);\n}\n/**\n * Implements `ClassManager` for `target`\n *\n * @usage\n * ```ts\n * class Xxx {}\n * type XxxConstructor = typeof Xxx & ClassManager\n * enableClassManagement(Xxx as XxxConstructor);\n * ```\n */\nexport function enableClassManagement(target) {\n  /**\n   * Component model classes\n   * key: componentType,\n   * value:\n   *     componentClass, when componentType is 'a'\n   *     or Object.<subKey, componentClass>, when componentType is 'a.b'\n   */\n  var storage = {};\n  target.registerClass = function (clz) {\n    // `type` should not be a \"instance member\".\n    // If using TS class, should better declared as `static type = 'series.pie'`.\n    // otherwise users have to mount `type` on prototype manually.\n    // For backward compat and enable instance visit type via `this.type`,\n    // we still support fetch `type` from prototype.\n    var componentFullType = clz.type || clz.prototype.type;\n    if (componentFullType) {\n      checkClassType(componentFullType);\n      // If only static type declared, we assign it to prototype mandatorily.\n      clz.prototype.type = componentFullType;\n      var componentTypeInfo = parseClassType(componentFullType);\n      if (!componentTypeInfo.sub) {\n        if (process.env.NODE_ENV !== 'production') {\n          if (storage[componentTypeInfo.main]) {\n            console.warn(componentTypeInfo.main + ' exists.');\n          }\n        }\n        storage[componentTypeInfo.main] = clz;\n      } else if (componentTypeInfo.sub !== IS_CONTAINER) {\n        var container = makeContainer(componentTypeInfo);\n        container[componentTypeInfo.sub] = clz;\n      }\n    }\n    return clz;\n  };\n  target.getClass = function (mainType, subType, throwWhenNotFound) {\n    var clz = storage[mainType];\n    if (clz && clz[IS_CONTAINER]) {\n      clz = subType ? clz[subType] : null;\n    }\n    if (throwWhenNotFound && !clz) {\n      throw new Error(!subType ? mainType + '.' + 'type should be specified.' : 'Component ' + mainType + '.' + (subType || '') + ' is used but not imported.');\n    }\n    return clz;\n  };\n  target.getClassesByMainType = function (componentType) {\n    var componentTypeInfo = parseClassType(componentType);\n    var result = [];\n    var obj = storage[componentTypeInfo.main];\n    if (obj && obj[IS_CONTAINER]) {\n      zrUtil.each(obj, function (o, type) {\n        type !== IS_CONTAINER && result.push(o);\n      });\n    } else {\n      result.push(obj);\n    }\n    return result;\n  };\n  target.hasClass = function (componentType) {\n    // Just consider componentType.main.\n    var componentTypeInfo = parseClassType(componentType);\n    return !!storage[componentTypeInfo.main];\n  };\n  /**\n   * @return Like ['aa', 'bb'], but can not be ['aa.xx']\n   */\n  target.getAllClassMainTypes = function () {\n    var types = [];\n    zrUtil.each(storage, function (obj, type) {\n      types.push(type);\n    });\n    return types;\n  };\n  /**\n   * If a main type is container and has sub types\n   */\n  target.hasSubTypes = function (componentType) {\n    var componentTypeInfo = parseClassType(componentType);\n    var obj = storage[componentTypeInfo.main];\n    return obj && obj[IS_CONTAINER];\n  };\n  function makeContainer(componentTypeInfo) {\n    var container = storage[componentTypeInfo.main];\n    if (!container || !container[IS_CONTAINER]) {\n      container = storage[componentTypeInfo.main] = {};\n      container[IS_CONTAINER] = true;\n    }\n    return container;\n  }\n}\n// /**\n//  * @param {string|Array.<string>} properties\n//  */\n// export function setReadOnly(obj, properties) {\n// FIXME It seems broken in IE8 simulation of IE11\n// if (!zrUtil.isArray(properties)) {\n//     properties = properties != null ? [properties] : [];\n// }\n// zrUtil.each(properties, function (prop) {\n//     let value = obj[prop];\n//     Object.defineProperty\n//         && Object.defineProperty(obj, prop, {\n//             value: value, writable: false\n//         });\n//     zrUtil.isArray(obj[prop])\n//         && Object.freeze\n//         && Object.freeze(obj[prop]);\n// });\n// }","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// TODO Parse shadow style\n// TODO Only shallow path support\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function makeStyleMapper(properties, ignoreParent) {\n  // Normalize\n  for (var i = 0; i < properties.length; i++) {\n    if (!properties[i][1]) {\n      properties[i][1] = properties[i][0];\n    }\n  }\n  ignoreParent = ignoreParent || false;\n  return function (model, excludes, includes) {\n    var style = {};\n    for (var i = 0; i < properties.length; i++) {\n      var propName = properties[i][1];\n      if (excludes && zrUtil.indexOf(excludes, propName) >= 0 || includes && zrUtil.indexOf(includes, propName) < 0) {\n        continue;\n      }\n      var val = model.getShallow(propName, ignoreParent);\n      if (val != null) {\n        style[properties[i][0]] = val;\n      }\n    }\n    // TODO Text or image?\n    return style;\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport makeStyleMapper from './makeStyleMapper.js';\nexport var AREA_STYLE_KEY_MAP = [['fill', 'color'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['opacity'], ['shadowColor']\n// Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n// So do not transfer decal directly.\n];\nvar getAreaStyle = makeStyleMapper(AREA_STYLE_KEY_MAP);\nvar AreaStyleMixin = /** @class */function () {\n  function AreaStyleMixin() {}\n  AreaStyleMixin.prototype.getAreaStyle = function (excludes, includes) {\n    return getAreaStyle(this, excludes, includes);\n  };\n  return AreaStyleMixin;\n}();\n;\nexport { AreaStyleMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/*\n* A third-party license is embedded for some of the code in this file:\n* The method \"quantile\" was copied from \"d3.js\".\n* (See more details in the comment of the method below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar RADIAN_EPSILON = 1e-4;\n// Although chrome already enlarge this number to 100 for `toFixed`, but\n// we sill follow the spec for compatibility.\nvar ROUND_SUPPORTED_PRECISION_MAX = 20;\nfunction _trim(str) {\n  return str.replace(/^\\s+|\\s+$/g, '');\n}\nexport var mathMin = Math.min;\nexport var mathMax = Math.max;\nexport var mathAbs = Math.abs;\n/**\n * Linear mapping a value from domain to range\n * @param  val\n * @param  domain Domain extent domain[0] can be bigger than domain[1]\n * @param  range  Range extent range[0] can be bigger than range[1]\n * @param  clamp Default to be false\n */\nexport function linearMap(val, domain, range, clamp) {\n  var d0 = domain[0];\n  var d1 = domain[1];\n  var r0 = range[0];\n  var r1 = range[1];\n  var subDomain = d1 - d0;\n  var subRange = r1 - r0;\n  if (subDomain === 0) {\n    return subRange === 0 ? r0 : (r0 + r1) / 2;\n  }\n  // Avoid accuracy problem in edge, such as\n  // 146.39 - 62.83 === 83.55999999999999.\n  // See echarts/test/ut/spec/util/number.js#linearMap#accuracyError\n  // It is a little verbose for efficiency considering this method\n  // is a hotspot.\n  if (clamp) {\n    if (subDomain > 0) {\n      if (val <= d0) {\n        return r0;\n      } else if (val >= d1) {\n        return r1;\n      }\n    } else {\n      if (val >= d0) {\n        return r0;\n      } else if (val <= d1) {\n        return r1;\n      }\n    }\n  } else {\n    if (val === d0) {\n      return r0;\n    }\n    if (val === d1) {\n      return r1;\n    }\n  }\n  return (val - d0) / subDomain * subRange + r0;\n}\n/**\n * Preserve the name `parsePercent` for backward compatibility,\n * and it's effectively published as `echarts.number.parsePercent`.\n */\nexport var parsePercent = parsePositionOption;\n/**\n * @see {parsePositionSizeOption} and also accept a string preset.\n * @see {PositionSizeOption}\n */\nexport function parsePositionOption(option, percentBase, percentOffset) {\n  switch (option) {\n    case 'center':\n    case 'middle':\n      option = '50%';\n      break;\n    case 'left':\n    case 'top':\n      option = '0%';\n      break;\n    case 'right':\n    case 'bottom':\n      option = '100%';\n      break;\n  }\n  return parsePositionSizeOption(option, percentBase, percentOffset);\n}\n/**\n * Accept number, or numeric stirng (`'123'`), or percentage ('100%'), as x/y/width/height pixel number.\n * If null/undefined or invalid, return NaN.\n * (But allow JS type coercion (`+option`) due to backward compatibility)\n * @see {PositionSizeOption}\n */\nexport function parsePositionSizeOption(option, percentBase, percentOffset) {\n  if (zrUtil.isString(option)) {\n    if (_trim(option).match(/%$/)) {\n      return parseFloat(option) / 100 * percentBase + (percentOffset || 0);\n    }\n    return parseFloat(option);\n  }\n  // Allow flexible input due to backward compatibility.\n  return option == null ? NaN : +option;\n}\nexport function round(x, precision, returnStr) {\n  if (precision == null) {\n    // FIXME: the default precision should not be provided, since there is no universally adaptable\n    //  precision. The caller need to input a precision according to the scenarios.\n    precision = 10;\n  }\n  // Avoid range error\n  precision = Math.min(Math.max(0, precision), ROUND_SUPPORTED_PRECISION_MAX);\n  // PENDING: 1.005.toFixed(2) is '1.00' rather than '1.01'\n  x = (+x).toFixed(precision);\n  return returnStr ? x : +x;\n}\n/**\n * Inplacd asc sort arr.\n * The input arr will be modified.\n */\nexport function asc(arr) {\n  arr.sort(function (a, b) {\n    return a - b;\n  });\n  return arr;\n}\n/**\n * Get precision.\n */\nexport function getPrecision(val) {\n  val = +val;\n  if (isNaN(val)) {\n    return 0;\n  }\n  // It is much faster than methods converting number to string as follows\n  //      let tmp = val.toString();\n  //      return tmp.length - 1 - tmp.indexOf('.');\n  // especially when precision is low\n  // Notice:\n  // (1) If the loop count is over about 20, it is slower than `getPrecisionSafe`.\n  //     (see https://jsbench.me/2vkpcekkvw/1)\n  // (2) If the val is less than for example 1e-15, the result may be incorrect.\n  //     (see test/ut/spec/util/number.test.ts `getPrecision_equal_random`)\n  if (val > 1e-14) {\n    var e = 1;\n    for (var i = 0; i < 15; i++, e *= 10) {\n      if (Math.round(val * e) / e === val) {\n        return i;\n      }\n    }\n  }\n  return getPrecisionSafe(val);\n}\n/**\n * Get precision with slow but safe method\n */\nexport function getPrecisionSafe(val) {\n  // toLowerCase for: '3.4E-12'\n  var str = val.toString().toLowerCase();\n  // Consider scientific notation: '3.4e-12' '3.4e+12'\n  var eIndex = str.indexOf('e');\n  var exp = eIndex > 0 ? +str.slice(eIndex + 1) : 0;\n  var significandPartLen = eIndex > 0 ? eIndex : str.length;\n  var dotIndex = str.indexOf('.');\n  var decimalPartLen = dotIndex < 0 ? 0 : significandPartLen - 1 - dotIndex;\n  return Math.max(0, decimalPartLen - exp);\n}\n/**\n * Minimal dicernible data precisioin according to a single pixel.\n */\nexport function getPixelPrecision(dataExtent, pixelExtent) {\n  var log = Math.log;\n  var LN10 = Math.LN10;\n  var dataQuantity = Math.floor(log(dataExtent[1] - dataExtent[0]) / LN10);\n  var sizeQuantity = Math.round(log(mathAbs(pixelExtent[1] - pixelExtent[0])) / LN10);\n  // toFixed() digits argument must be between 0 and 20.\n  var precision = Math.min(Math.max(-dataQuantity + sizeQuantity, 0), 20);\n  return !isFinite(precision) ? 20 : precision;\n}\n/**\n * Get a data of given precision, assuring the sum of percentages\n * in valueList is 1.\n * The largest remainder method is used.\n * https://en.wikipedia.org/wiki/Largest_remainder_method\n *\n * @param valueList a list of all data\n * @param idx index of the data to be processed in valueList\n * @param precision integer number showing digits of precision\n * @return percent ranging from 0 to 100\n */\nexport function getPercentWithPrecision(valueList, idx, precision) {\n  if (!valueList[idx]) {\n    return 0;\n  }\n  var seats = getPercentSeats(valueList, precision);\n  return seats[idx] || 0;\n}\n/**\n * Get a data of given precision, assuring the sum of percentages\n * in valueList is 1.\n * The largest remainder method is used.\n * https://en.wikipedia.org/wiki/Largest_remainder_method\n *\n * @param valueList a list of all data\n * @param precision integer number showing digits of precision\n * @return {Array<number>}\n */\nexport function getPercentSeats(valueList, precision) {\n  var sum = zrUtil.reduce(valueList, function (acc, val) {\n    return acc + (isNaN(val) ? 0 : val);\n  }, 0);\n  if (sum === 0) {\n    return [];\n  }\n  var digits = Math.pow(10, precision);\n  var votesPerQuota = zrUtil.map(valueList, function (val) {\n    return (isNaN(val) ? 0 : val) / sum * digits * 100;\n  });\n  var targetSeats = digits * 100;\n  var seats = zrUtil.map(votesPerQuota, function (votes) {\n    // Assign automatic seats.\n    return Math.floor(votes);\n  });\n  var currentSum = zrUtil.reduce(seats, function (acc, val) {\n    return acc + val;\n  }, 0);\n  var remainder = zrUtil.map(votesPerQuota, function (votes, idx) {\n    return votes - seats[idx];\n  });\n  // Has remainding votes.\n  while (currentSum < targetSeats) {\n    // Find next largest remainder.\n    var max = Number.NEGATIVE_INFINITY;\n    var maxId = null;\n    for (var i = 0, len = remainder.length; i < len; ++i) {\n      if (remainder[i] > max) {\n        max = remainder[i];\n        maxId = i;\n      }\n    }\n    // Add a vote to max remainder.\n    ++seats[maxId];\n    remainder[maxId] = 0;\n    ++currentSum;\n  }\n  return zrUtil.map(seats, function (seat) {\n    return seat / digits;\n  });\n}\n/**\n * Solve the floating point adding problem like 0.1 + 0.2 === 0.30000000000000004\n * See <http://0.30000000000000004.com/>\n */\nexport function addSafe(val0, val1) {\n  var maxPrecision = Math.max(getPrecision(val0), getPrecision(val1));\n  // const multiplier = Math.pow(10, maxPrecision);\n  // return (Math.round(val0 * multiplier) + Math.round(val1 * multiplier)) / multiplier;\n  var sum = val0 + val1;\n  // // PENDING: support more?\n  return maxPrecision > ROUND_SUPPORTED_PRECISION_MAX ? sum : round(sum, maxPrecision);\n}\n// Number.MAX_SAFE_INTEGER, ie do not support.\nexport var MAX_SAFE_INTEGER = 9007199254740991;\n/**\n * To 0 - 2 * PI, considering negative radian.\n */\nexport function remRadian(radian) {\n  var pi2 = Math.PI * 2;\n  return (radian % pi2 + pi2) % pi2;\n}\n/**\n * @param {type} radian\n * @return {boolean}\n */\nexport function isRadianAroundZero(val) {\n  return val > -RADIAN_EPSILON && val < RADIAN_EPSILON;\n}\n// eslint-disable-next-line\nvar TIME_REG = /^(?:(\\d{4})(?:[-\\/](\\d{1,2})(?:[-\\/](\\d{1,2})(?:[T ](\\d{1,2})(?::(\\d{1,2})(?::(\\d{1,2})(?:[.,](\\d+))?)?)?(Z|[\\+\\-]\\d\\d:?\\d\\d)?)?)?)?)?$/; // jshint ignore:line\n/**\n * @param value valid type: number | string | Date, otherwise return `new Date(NaN)`\n *   These values can be accepted:\n *   + An instance of Date, represent a time in its own time zone.\n *   + Or string in a subset of ISO 8601, only including:\n *     + only year, month, date: '2012-03', '2012-03-01', '2012-03-01 05', '2012-03-01 05:06',\n *     + separated with T or space: '2012-03-01T12:22:33.123', '2012-03-01 12:22:33.123',\n *     + time zone: '2012-03-01T12:22:33Z', '2012-03-01T12:22:33+8000', '2012-03-01T12:22:33-05:00',\n *     all of which will be treated as local time if time zone is not specified\n *     (see <https://momentjs.com/>).\n *   + Or other string format, including (all of which will be treated as local time):\n *     '2012', '2012-3-1', '2012/3/1', '2012/03/01',\n *     '2009/6/12 2:00', '2009/6/12 2:05:08', '2009/6/12 2:05:08.123'\n *   + a timestamp, which represent a time in UTC.\n * @return date Never be null/undefined. If invalid, return `new Date(NaN)`.\n */\nexport function parseDate(value) {\n  if (value instanceof Date) {\n    return value;\n  } else if (zrUtil.isString(value)) {\n    // Different browsers parse date in different way, so we parse it manually.\n    // Some other issues:\n    // new Date('1970-01-01') is UTC,\n    // new Date('1970/01/01') and new Date('1970-1-01') is local.\n    // See issue #3623\n    var match = TIME_REG.exec(value);\n    if (!match) {\n      // return Invalid Date.\n      return new Date(NaN);\n    }\n    // Use local time when no timezone offset is specified.\n    if (!match[8]) {\n      // match[n] can only be string or undefined.\n      // But take care of '12' + 1 => '121'.\n      return new Date(+match[1], +(match[2] || 1) - 1, +match[3] || 1, +match[4] || 0, +(match[5] || 0), +match[6] || 0, match[7] ? +match[7].substring(0, 3) : 0);\n    }\n    // Timezoneoffset of Javascript Date has considered DST (Daylight Saving Time,\n    // https://tc39.github.io/ecma262/#sec-daylight-saving-time-adjustment).\n    // For example, system timezone is set as \"Time Zone: America/Toronto\",\n    // then these code will get different result:\n    // `new Date(1478411999999).getTimezoneOffset();  // get 240`\n    // `new Date(1478412000000).getTimezoneOffset();  // get 300`\n    // So we should not use `new Date`, but use `Date.UTC`.\n    else {\n      var hour = +match[4] || 0;\n      if (match[8].toUpperCase() !== 'Z') {\n        hour -= +match[8].slice(0, 3);\n      }\n      return new Date(Date.UTC(+match[1], +(match[2] || 1) - 1, +match[3] || 1, hour, +(match[5] || 0), +match[6] || 0, match[7] ? +match[7].substring(0, 3) : 0));\n    }\n  } else if (value == null) {\n    return new Date(NaN);\n  }\n  return new Date(Math.round(value));\n}\n/**\n * Quantity of a number. e.g. 0.1, 1, 10, 100\n *\n * @param val\n * @return\n */\nexport function quantity(val) {\n  return Math.pow(10, quantityExponent(val));\n}\n/**\n * Exponent of the quantity of a number\n * e.g., 1234 equals to 1.234*10^3, so quantityExponent(1234) is 3\n *\n * @param val non-negative value\n * @return\n */\nexport function quantityExponent(val) {\n  if (val === 0) {\n    return 0;\n  }\n  var exp = Math.floor(Math.log(val) / Math.LN10);\n  /**\n   * exp is expected to be the rounded-down result of the base-10 log of val.\n   * But due to the precision loss with Math.log(val), we need to restore it\n   * using 10^exp to make sure we can get val back from exp. #11249\n   */\n  if (val / Math.pow(10, exp) >= 10) {\n    exp++;\n  }\n  return exp;\n}\n/**\n * find a nice number approximately equal to x. Round the number if round = true,\n * take ceiling if round = false. The primary observation is that the nicest\n * numbers in decimal are 1, 2, and 5, and all power-of-ten multiples of these numbers.\n *\n * See \"Nice Numbers for Graph Labels\" of Graphic Gems.\n *\n * @param  val Non-negative value.\n * @param  round\n * @return Niced number\n */\nexport function nice(val, round) {\n  var exponent = quantityExponent(val);\n  var exp10 = Math.pow(10, exponent);\n  var f = val / exp10; // 1 <= f < 10\n  var nf;\n  if (round) {\n    if (f < 1.5) {\n      nf = 1;\n    } else if (f < 2.5) {\n      nf = 2;\n    } else if (f < 4) {\n      nf = 3;\n    } else if (f < 7) {\n      nf = 5;\n    } else {\n      nf = 10;\n    }\n  } else {\n    if (f < 1) {\n      nf = 1;\n    } else if (f < 2) {\n      nf = 2;\n    } else if (f < 3) {\n      nf = 3;\n    } else if (f < 5) {\n      nf = 5;\n    } else {\n      nf = 10;\n    }\n  }\n  val = nf * exp10;\n  // Fix 3 * 0.1 === 0.30000000000000004 issue (see IEEE 754).\n  // 20 is the uppper bound of toFixed.\n  return exponent >= -20 ? +val.toFixed(exponent < 0 ? -exponent : 0) : val;\n}\n/**\n * This code was copied from \"d3.js\"\n * <https://github.com/d3/d3/blob/9cc9a875e636a1dcf36cc1e07bdf77e1ad6e2c74/src/arrays/quantile.js>.\n * See the license statement at the head of this file.\n * @param ascArr\n */\nexport function quantile(ascArr, p) {\n  var H = (ascArr.length - 1) * p + 1;\n  var h = Math.floor(H);\n  var v = +ascArr[h - 1];\n  var e = H - h;\n  return e ? v + e * (ascArr[h] - v) : v;\n}\n/**\n * Order intervals asc, and split them when overlap.\n * expect(numberUtil.reformIntervals([\n *     {interval: [18, 62], close: [1, 1]},\n *     {interval: [-Infinity, -70], close: [0, 0]},\n *     {interval: [-70, -26], close: [1, 1]},\n *     {interval: [-26, 18], close: [1, 1]},\n *     {interval: [62, 150], close: [1, 1]},\n *     {interval: [106, 150], close: [1, 1]},\n *     {interval: [150, Infinity], close: [0, 0]}\n * ])).toEqual([\n *     {interval: [-Infinity, -70], close: [0, 0]},\n *     {interval: [-70, -26], close: [1, 1]},\n *     {interval: [-26, 18], close: [0, 1]},\n *     {interval: [18, 62], close: [0, 1]},\n *     {interval: [62, 150], close: [0, 1]},\n *     {interval: [150, Infinity], close: [0, 0]}\n * ]);\n * @param list, where `close` mean open or close\n *        of the interval, and Infinity can be used.\n * @return The origin list, which has been reformed.\n */\nexport function reformIntervals(list) {\n  list.sort(function (a, b) {\n    return littleThan(a, b, 0) ? -1 : 1;\n  });\n  var curr = -Infinity;\n  var currClose = 1;\n  for (var i = 0; i < list.length;) {\n    var interval = list[i].interval;\n    var close_1 = list[i].close;\n    for (var lg = 0; lg < 2; lg++) {\n      if (interval[lg] <= curr) {\n        interval[lg] = curr;\n        close_1[lg] = !lg ? 1 - currClose : 1;\n      }\n      curr = interval[lg];\n      currClose = close_1[lg];\n    }\n    if (interval[0] === interval[1] && close_1[0] * close_1[1] !== 1) {\n      list.splice(i, 1);\n    } else {\n      i++;\n    }\n  }\n  return list;\n  function littleThan(a, b, lg) {\n    return a.interval[lg] < b.interval[lg] || a.interval[lg] === b.interval[lg] && (a.close[lg] - b.close[lg] === (!lg ? 1 : -1) || !lg && littleThan(a, b, 1));\n  }\n}\n/**\n * [Numeric is defined as]:\n *     `parseFloat(val) == val`\n * For example:\n * numeric:\n *     typeof number except NaN, '-123', '123', '2e3', '-2e3', '011', 'Infinity', Infinity,\n *     and they rounded by white-spaces or line-terminal like ' -123 \\n ' (see es spec)\n * not-numeric:\n *     null, undefined, [], {}, true, false, 'NaN', NaN, '123ab',\n *     empty string, string with only white-spaces or line-terminal (see es spec),\n *     0x12, '0x12', '-0x12', 012, '012', '-012',\n *     non-string, ...\n *\n * @test See full test cases in `test/ut/spec/util/number.js`.\n * @return Must be a typeof number. If not numeric, return NaN.\n */\nexport function numericToNumber(val) {\n  var valFloat = parseFloat(val);\n  return valFloat == val // eslint-disable-line eqeqeq\n  && (valFloat !== 0 || !zrUtil.isString(val) || val.indexOf('x') <= 0) // For case ' 0x0 '.\n  ? valFloat : NaN;\n}\n/**\n * Definition of \"numeric\": see `numericToNumber`.\n */\nexport function isNumeric(val) {\n  return !isNaN(numericToNumber(val));\n}\n/**\n * Use random base to prevent users hard code depending on\n * this auto generated marker id.\n * @return An positive integer.\n */\nexport function getRandomIdBase() {\n  return Math.round(Math.random() * 9);\n}\n/**\n * Get the greatest common divisor.\n *\n * @param {number} a one number\n * @param {number} b the other number\n */\nexport function getGreatestCommonDividor(a, b) {\n  if (b === 0) {\n    return a;\n  }\n  return getGreatestCommonDividor(b, a % b);\n}\n/**\n * Get the least common multiple.\n *\n * @param {number} a one number\n * @param {number} b the other number\n */\nexport function getLeastCommonMultiple(a, b) {\n  if (a == null) {\n    return b;\n  }\n  if (b == null) {\n    return a;\n  }\n  return a * b / getGreatestCommonDividor(a, b);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { map, isString, isFunction, eqNaN, isRegExp } from 'zrender/lib/core/util.js';\nvar ECHARTS_PREFIX = '[ECharts] ';\nvar storedLogs = {};\nvar hasConsole = typeof console !== 'undefined'\n// eslint-disable-next-line\n&& console.warn && console.log;\nfunction outputLog(type, str, onlyOnce) {\n  if (hasConsole) {\n    if (onlyOnce) {\n      if (storedLogs[str]) {\n        return;\n      }\n      storedLogs[str] = true;\n    }\n    // eslint-disable-next-line\n    console[type](ECHARTS_PREFIX + str);\n  }\n}\nexport function log(str, onlyOnce) {\n  outputLog('log', str, onlyOnce);\n}\nexport function warn(str, onlyOnce) {\n  outputLog('warn', str, onlyOnce);\n}\nexport function error(str, onlyOnce) {\n  outputLog('error', str, onlyOnce);\n}\nexport function deprecateLog(str) {\n  if (process.env.NODE_ENV !== 'production') {\n    // Not display duplicate message.\n    outputLog('warn', 'DEPRECATED: ' + str, true);\n  }\n}\nexport function deprecateReplaceLog(oldOpt, newOpt, scope) {\n  if (process.env.NODE_ENV !== 'production') {\n    deprecateLog((scope ? \"[\" + scope + \"]\" : '') + (oldOpt + \" is deprecated; use \" + newOpt + \" instead.\"));\n  }\n}\n/**\n * If in __DEV__ environment, get console printable message for users hint.\n * Parameters are separated by ' '.\n * @usage\n * makePrintable('This is an error on', someVar, someObj);\n *\n * @param hintInfo anything about the current execution context to hint users.\n * @throws Error\n */\nexport function makePrintable() {\n  var hintInfo = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    hintInfo[_i] = arguments[_i];\n  }\n  var msg = '';\n  if (process.env.NODE_ENV !== 'production') {\n    // Fuzzy stringify for print.\n    // This code only exist in dev environment.\n    var makePrintableStringIfPossible_1 = function (val) {\n      return val === void 0 ? 'undefined' : val === Infinity ? 'Infinity' : val === -Infinity ? '-Infinity' : eqNaN(val) ? 'NaN' : val instanceof Date ? 'Date(' + val.toISOString() + ')' : isFunction(val) ? 'function () { ... }' : isRegExp(val) ? val + '' : null;\n    };\n    msg = map(hintInfo, function (arg) {\n      if (isString(arg)) {\n        // Print without quotation mark for some statement.\n        return arg;\n      } else {\n        var printableStr = makePrintableStringIfPossible_1(arg);\n        if (printableStr != null) {\n          return printableStr;\n        } else if (typeof JSON !== 'undefined' && JSON.stringify) {\n          try {\n            return JSON.stringify(arg, function (n, val) {\n              var printableStr = makePrintableStringIfPossible_1(val);\n              return printableStr == null ? val : printableStr;\n            });\n            // In most cases the info object is small, so do not line break.\n          } catch (err) {\n            return '?';\n          }\n        } else {\n          return '?';\n        }\n      }\n    }).join(' ');\n  }\n  return msg;\n}\n/**\n * @throws Error\n */\nexport function throwError(msg) {\n  throw new Error(msg);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, isObject, isArray, createHashMap, map, assert, isString, indexOf, isStringSafe, isNumber } from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport { isNumeric, getRandomIdBase, getPrecision, round } from './number.js';\nimport { error, warn } from './log.js';\nfunction interpolateNumber(p0, p1, percent) {\n  return (p1 - p0) * percent + p0;\n}\n/**\n * Make the name displayable. But we should\n * make sure it is not duplicated with user\n * specified name, so use '\\0';\n */\nvar DUMMY_COMPONENT_NAME_PREFIX = 'series\\0';\nvar INTERNAL_COMPONENT_ID_PREFIX = '\\0_ec_\\0';\n/**\n * If value is not array, then translate it to array.\n * @param  {*} value\n * @return {Array} [value] or value\n */\nexport function normalizeToArray(value) {\n  return value instanceof Array ? value : value == null ? [] : [value];\n}\n/**\n * Sync default option between normal and emphasis like `position` and `show`\n * In case some one will write code like\n *     label: {\n *          show: false,\n *          position: 'outside',\n *          fontSize: 18\n *     },\n *     emphasis: {\n *          label: { show: true }\n *     }\n */\nexport function defaultEmphasis(opt, key, subOpts) {\n  // Caution: performance sensitive.\n  if (opt) {\n    opt[key] = opt[key] || {};\n    opt.emphasis = opt.emphasis || {};\n    opt.emphasis[key] = opt.emphasis[key] || {};\n    // Default emphasis option from normal\n    for (var i = 0, len = subOpts.length; i < len; i++) {\n      var subOptName = subOpts[i];\n      if (!opt.emphasis[key].hasOwnProperty(subOptName) && opt[key].hasOwnProperty(subOptName)) {\n        opt.emphasis[key][subOptName] = opt[key][subOptName];\n      }\n    }\n  }\n}\nexport var TEXT_STYLE_OPTIONS = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'rich', 'tag', 'color', 'textBorderColor', 'textBorderWidth', 'width', 'height', 'lineHeight', 'align', 'verticalAlign', 'baseline', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY', 'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY', 'backgroundColor', 'borderColor', 'borderWidth', 'borderRadius', 'padding'];\n// modelUtil.LABEL_OPTIONS = modelUtil.TEXT_STYLE_OPTIONS.concat([\n//     'position', 'offset', 'rotate', 'origin', 'show', 'distance', 'formatter',\n//     'fontStyle', 'fontWeight', 'fontSize', 'fontFamily',\n//     // FIXME: deprecated, check and remove it.\n//     'textStyle'\n// ]);\n/**\n * The method does not ensure performance.\n * data could be [12, 2323, {value: 223}, [1221, 23], {value: [2, 23]}]\n * This helper method retrieves value from data.\n */\nexport function getDataItemValue(dataItem) {\n  return isObject(dataItem) && !isArray(dataItem) && !(dataItem instanceof Date) ? dataItem.value : dataItem;\n}\n/**\n * data could be [12, 2323, {value: 223}, [1221, 23], {value: [2, 23]}]\n * This helper method determine if dataItem has extra option besides value\n */\nexport function isDataItemOption(dataItem) {\n  return isObject(dataItem) && !(dataItem instanceof Array);\n  // // markLine data can be array\n  // && !(dataItem[0] && isObject(dataItem[0]) && !(dataItem[0] instanceof Array));\n}\n;\n/**\n * Mapping to existings for merge.\n *\n * Mode \"normalMege\":\n *     The mapping result (merge result) will keep the order of the existing\n *     component, rather than the order of new option. Because we should ensure\n *     some specified index reference (like xAxisIndex) keep work.\n *     And in most cases, \"merge option\" is used to update partial option but not\n *     be expected to change the order.\n *\n * Mode \"replaceMege\":\n *     (1) Only the id mapped components will be merged.\n *     (2) Other existing components (except internal components) will be removed.\n *     (3) Other new options will be used to create new component.\n *     (4) The index of the existing components will not be modified.\n *     That means their might be \"hole\" after the removal.\n *     The new components are created first at those available index.\n *\n * Mode \"replaceAll\":\n *     This mode try to support that reproduce an echarts instance from another\n *     echarts instance (via `getOption`) in some simple cases.\n *     In this scenario, the `result` index are exactly the consistent with the `newCmptOptions`,\n *     which ensures the component index referring (like `xAxisIndex: ?`) corrent. That is,\n *     the \"hole\" in `newCmptOptions` will also be kept.\n *     On the contrary, other modes try best to eliminate holes.\n *     PENDING: This is an experimental mode yet.\n *\n * @return See the comment of <MappingResult>.\n */\nexport function mappingToExists(existings, newCmptOptions, mode) {\n  var isNormalMergeMode = mode === 'normalMerge';\n  var isReplaceMergeMode = mode === 'replaceMerge';\n  var isReplaceAllMode = mode === 'replaceAll';\n  existings = existings || [];\n  newCmptOptions = (newCmptOptions || []).slice();\n  var existingIdIdxMap = createHashMap();\n  // Validate id and name on user input option.\n  each(newCmptOptions, function (cmptOption, index) {\n    if (!isObject(cmptOption)) {\n      newCmptOptions[index] = null;\n      return;\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      // There is some legacy case that name is set as `false`.\n      // But should work normally rather than throw error.\n      if (cmptOption.id != null && !isValidIdOrName(cmptOption.id)) {\n        warnInvalidateIdOrName(cmptOption.id);\n      }\n      if (cmptOption.name != null && !isValidIdOrName(cmptOption.name)) {\n        warnInvalidateIdOrName(cmptOption.name);\n      }\n    }\n  });\n  var result = prepareResult(existings, existingIdIdxMap, mode);\n  if (isNormalMergeMode || isReplaceMergeMode) {\n    mappingById(result, existings, existingIdIdxMap, newCmptOptions);\n  }\n  if (isNormalMergeMode) {\n    mappingByName(result, newCmptOptions);\n  }\n  if (isNormalMergeMode || isReplaceMergeMode) {\n    mappingByIndex(result, newCmptOptions, isReplaceMergeMode);\n  } else if (isReplaceAllMode) {\n    mappingInReplaceAllMode(result, newCmptOptions);\n  }\n  makeIdAndName(result);\n  // The array `result` MUST NOT contain elided items, otherwise the\n  // forEach will omit those items and result in incorrect result.\n  return result;\n}\nfunction prepareResult(existings, existingIdIdxMap, mode) {\n  var result = [];\n  if (mode === 'replaceAll') {\n    return result;\n  }\n  // Do not use native `map` to in case that the array `existings`\n  // contains elided items, which will be omitted.\n  for (var index = 0; index < existings.length; index++) {\n    var existing = existings[index];\n    // Because of replaceMerge, `existing` may be null/undefined.\n    if (existing && existing.id != null) {\n      existingIdIdxMap.set(existing.id, index);\n    }\n    // For non-internal-componnets:\n    //     Mode \"normalMerge\": all existings kept.\n    //     Mode \"replaceMerge\": all existing removed unless mapped by id.\n    // For internal-components:\n    //     go with \"replaceMerge\" approach in both mode.\n    result.push({\n      existing: mode === 'replaceMerge' || isComponentIdInternal(existing) ? null : existing,\n      newOption: null,\n      keyInfo: null,\n      brandNew: null\n    });\n  }\n  return result;\n}\nfunction mappingById(result, existings, existingIdIdxMap, newCmptOptions) {\n  // Mapping by id if specified.\n  each(newCmptOptions, function (cmptOption, index) {\n    if (!cmptOption || cmptOption.id == null) {\n      return;\n    }\n    var optionId = makeComparableKey(cmptOption.id);\n    var existingIdx = existingIdIdxMap.get(optionId);\n    if (existingIdx != null) {\n      var resultItem = result[existingIdx];\n      assert(!resultItem.newOption, 'Duplicated option on id \"' + optionId + '\".');\n      resultItem.newOption = cmptOption;\n      // In both mode, if id matched, new option will be merged to\n      // the existings rather than creating new component model.\n      resultItem.existing = existings[existingIdx];\n      newCmptOptions[index] = null;\n    }\n  });\n}\nfunction mappingByName(result, newCmptOptions) {\n  // Mapping by name if specified.\n  each(newCmptOptions, function (cmptOption, index) {\n    if (!cmptOption || cmptOption.name == null) {\n      return;\n    }\n    for (var i = 0; i < result.length; i++) {\n      var existing = result[i].existing;\n      if (!result[i].newOption // Consider name: two map to one.\n      // Can not match when both ids existing but different.\n      && existing && (existing.id == null || cmptOption.id == null) && !isComponentIdInternal(cmptOption) && !isComponentIdInternal(existing) && keyExistAndEqual('name', existing, cmptOption)) {\n        result[i].newOption = cmptOption;\n        newCmptOptions[index] = null;\n        return;\n      }\n    }\n  });\n}\nfunction mappingByIndex(result, newCmptOptions, brandNew) {\n  each(newCmptOptions, function (cmptOption) {\n    if (!cmptOption) {\n      return;\n    }\n    // Find the first place that not mapped by id and not internal component (consider the \"hole\").\n    var resultItem;\n    var nextIdx = 0;\n    while (\n    // Be `!resultItem` only when `nextIdx >= result.length`.\n    (resultItem = result[nextIdx]\n    // (1) Existing models that already have id should be able to mapped to. Because\n    // after mapping performed, model will always be assigned with an id if user not given.\n    // After that all models have id.\n    // (2) If new option has id, it can only set to a hole or append to the last. It should\n    // not be merged to the existings with different id. Because id should not be overwritten.\n    // (3) Name can be overwritten, because axis use name as 'show label text'.\n    ) && (resultItem.newOption || isComponentIdInternal(resultItem.existing) ||\n    // In mode \"replaceMerge\", here no not-mapped-non-internal-existing.\n    resultItem.existing && cmptOption.id != null && !keyExistAndEqual('id', cmptOption, resultItem.existing))) {\n      nextIdx++;\n    }\n    if (resultItem) {\n      resultItem.newOption = cmptOption;\n      resultItem.brandNew = brandNew;\n    } else {\n      result.push({\n        newOption: cmptOption,\n        brandNew: brandNew,\n        existing: null,\n        keyInfo: null\n      });\n    }\n    nextIdx++;\n  });\n}\nfunction mappingInReplaceAllMode(result, newCmptOptions) {\n  each(newCmptOptions, function (cmptOption) {\n    // The feature \"reproduce\" requires \"hole\" will also reproduced\n    // in case that component index referring are broken.\n    result.push({\n      newOption: cmptOption,\n      brandNew: true,\n      existing: null,\n      keyInfo: null\n    });\n  });\n}\n/**\n * Make id and name for mapping result (result of mappingToExists)\n * into `keyInfo` field.\n */\nfunction makeIdAndName(mapResult) {\n  // We use this id to hash component models and view instances\n  // in echarts. id can be specified by user, or auto generated.\n  // The id generation rule ensures new view instance are able\n  // to mapped to old instance when setOption are called in\n  // no-merge mode. So we generate model id by name and plus\n  // type in view id.\n  // name can be duplicated among components, which is convenient\n  // to specify multi components (like series) by one name.\n  // Ensure that each id is distinct.\n  var idMap = createHashMap();\n  each(mapResult, function (item) {\n    var existing = item.existing;\n    existing && idMap.set(existing.id, item);\n  });\n  each(mapResult, function (item) {\n    var opt = item.newOption;\n    // Force ensure id not duplicated.\n    assert(!opt || opt.id == null || !idMap.get(opt.id) || idMap.get(opt.id) === item, 'id duplicates: ' + (opt && opt.id));\n    opt && opt.id != null && idMap.set(opt.id, item);\n    !item.keyInfo && (item.keyInfo = {});\n  });\n  // Make name and id.\n  each(mapResult, function (item, index) {\n    var existing = item.existing;\n    var opt = item.newOption;\n    var keyInfo = item.keyInfo;\n    if (!isObject(opt)) {\n      return;\n    }\n    // Name can be overwritten. Consider case: axis.name = '20km'.\n    // But id generated by name will not be changed, which affect\n    // only in that case: setOption with 'not merge mode' and view\n    // instance will be recreated, which can be accepted.\n    keyInfo.name = opt.name != null ? makeComparableKey(opt.name) : existing ? existing.name\n    // Avoid that different series has the same name,\n    // because name may be used like in color pallet.\n    : DUMMY_COMPONENT_NAME_PREFIX + index;\n    if (existing) {\n      keyInfo.id = makeComparableKey(existing.id);\n    } else if (opt.id != null) {\n      keyInfo.id = makeComparableKey(opt.id);\n    } else {\n      // Consider this situatoin:\n      //  optionA: [{name: 'a'}, {name: 'a'}, {..}]\n      //  optionB [{..}, {name: 'a'}, {name: 'a'}]\n      // Series with the same name between optionA and optionB\n      // should be mapped.\n      var idNum = 0;\n      do {\n        keyInfo.id = '\\0' + keyInfo.name + '\\0' + idNum++;\n      } while (idMap.get(keyInfo.id));\n    }\n    idMap.set(keyInfo.id, item);\n  });\n}\nfunction keyExistAndEqual(attr, obj1, obj2) {\n  var key1 = convertOptionIdName(obj1[attr], null);\n  var key2 = convertOptionIdName(obj2[attr], null);\n  // See `MappingExistingItem`. `id` and `name` trade string equals to number.\n  return key1 != null && key2 != null && key1 === key2;\n}\n/**\n * @return return null if not exist.\n */\nfunction makeComparableKey(val) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (val == null) {\n      throw new Error();\n    }\n  }\n  return convertOptionIdName(val, '');\n}\nexport function convertOptionIdName(idOrName, defaultValue) {\n  if (idOrName == null) {\n    return defaultValue;\n  }\n  return isString(idOrName) ? idOrName : isNumber(idOrName) || isStringSafe(idOrName) ? idOrName + '' : defaultValue;\n}\nfunction warnInvalidateIdOrName(idOrName) {\n  if (process.env.NODE_ENV !== 'production') {\n    warn('`' + idOrName + '` is invalid id or name. Must be a string or number.');\n  }\n}\nfunction isValidIdOrName(idOrName) {\n  return isStringSafe(idOrName) || isNumeric(idOrName);\n}\nexport function isNameSpecified(componentModel) {\n  var name = componentModel.name;\n  // Is specified when `indexOf` get -1 or > 0.\n  return !!(name && name.indexOf(DUMMY_COMPONENT_NAME_PREFIX));\n}\n/**\n * @public\n * @param {Object} cmptOption\n * @return {boolean}\n */\nexport function isComponentIdInternal(cmptOption) {\n  return cmptOption && cmptOption.id != null && makeComparableKey(cmptOption.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX) === 0;\n}\nexport function makeInternalComponentId(idSuffix) {\n  return INTERNAL_COMPONENT_ID_PREFIX + idSuffix;\n}\nexport function setComponentTypeToKeyInfo(mappingResult, mainType, componentModelCtor) {\n  // Set mainType and complete subType.\n  each(mappingResult, function (item) {\n    var newOption = item.newOption;\n    if (isObject(newOption)) {\n      item.keyInfo.mainType = mainType;\n      item.keyInfo.subType = determineSubType(mainType, newOption, item.existing, componentModelCtor);\n    }\n  });\n}\nfunction determineSubType(mainType, newCmptOption, existComponent, componentModelCtor) {\n  var subType = newCmptOption.type ? newCmptOption.type : existComponent ? existComponent.subType\n  // Use determineSubType only when there is no existComponent.\n  : componentModelCtor.determineSubType(mainType, newCmptOption);\n  // tooltip, markline, markpoint may always has no subType\n  return subType;\n}\n/**\n * A helper for removing duplicate items between batchA and batchB,\n * and in themselves, and categorize by series.\n *\n * @param batchA Like: [{seriesId: 2, dataIndex: [32, 4, 5]}, ...]\n * @param batchB Like: [{seriesId: 2, dataIndex: [32, 4, 5]}, ...]\n * @return result: [resultBatchA, resultBatchB]\n */\nexport function compressBatches(batchA, batchB) {\n  var mapA = {};\n  var mapB = {};\n  makeMap(batchA || [], mapA);\n  makeMap(batchB || [], mapB, mapA);\n  return [mapToArray(mapA), mapToArray(mapB)];\n  function makeMap(sourceBatch, map, otherMap) {\n    for (var i = 0, len = sourceBatch.length; i < len; i++) {\n      var seriesId = convertOptionIdName(sourceBatch[i].seriesId, null);\n      if (seriesId == null) {\n        return;\n      }\n      var dataIndices = normalizeToArray(sourceBatch[i].dataIndex);\n      var otherDataIndices = otherMap && otherMap[seriesId];\n      for (var j = 0, lenj = dataIndices.length; j < lenj; j++) {\n        var dataIndex = dataIndices[j];\n        if (otherDataIndices && otherDataIndices[dataIndex]) {\n          otherDataIndices[dataIndex] = null;\n        } else {\n          (map[seriesId] || (map[seriesId] = {}))[dataIndex] = 1;\n        }\n      }\n    }\n  }\n  function mapToArray(map, isData) {\n    var result = [];\n    for (var i in map) {\n      if (map.hasOwnProperty(i) && map[i] != null) {\n        if (isData) {\n          result.push(+i);\n        } else {\n          var dataIndices = mapToArray(map[i], true);\n          dataIndices.length && result.push({\n            seriesId: i,\n            dataIndex: dataIndices\n          });\n        }\n      }\n    }\n    return result;\n  }\n}\n/**\n * @param payload Contains dataIndex (means rawIndex) / dataIndexInside / name\n *                         each of which can be Array or primary type.\n * @return dataIndex If not found, return undefined/null.\n */\nexport function queryDataIndex(data, payload) {\n  if (payload.dataIndexInside != null) {\n    return payload.dataIndexInside;\n  } else if (payload.dataIndex != null) {\n    return isArray(payload.dataIndex) ? map(payload.dataIndex, function (value) {\n      return data.indexOfRawIndex(value);\n    }) : data.indexOfRawIndex(payload.dataIndex);\n  } else if (payload.name != null) {\n    return isArray(payload.name) ? map(payload.name, function (value) {\n      return data.indexOfName(value);\n    }) : data.indexOfName(payload.name);\n  }\n}\n/**\n * Enable property storage to any host object.\n * Notice: Serialization is not supported.\n *\n * For example:\n * let inner = zrUitl.makeInner();\n *\n * function some1(hostObj) {\n *      inner(hostObj).someProperty = 1212;\n *      ...\n * }\n * function some2() {\n *      let fields = inner(this);\n *      fields.someProperty1 = 1212;\n *      fields.someProperty2 = 'xx';\n *      ...\n * }\n *\n * @return {Function}\n */\nexport function makeInner() {\n  var key = '__ec_inner_' + innerUniqueIndex++;\n  return function (hostObj) {\n    return hostObj[key] || (hostObj[key] = {});\n  };\n}\nvar innerUniqueIndex = getRandomIdBase();\n/**\n * The same behavior as `component.getReferringComponents`.\n */\nexport function parseFinder(ecModel, finderInput, opt) {\n  var _a = preParseFinder(finderInput, opt),\n    mainTypeSpecified = _a.mainTypeSpecified,\n    queryOptionMap = _a.queryOptionMap,\n    others = _a.others;\n  var result = others;\n  var defaultMainType = opt ? opt.defaultMainType : null;\n  if (!mainTypeSpecified && defaultMainType) {\n    queryOptionMap.set(defaultMainType, {});\n  }\n  queryOptionMap.each(function (queryOption, mainType) {\n    var queryResult = queryReferringComponents(ecModel, mainType, queryOption, {\n      useDefault: defaultMainType === mainType,\n      enableAll: opt && opt.enableAll != null ? opt.enableAll : true,\n      enableNone: opt && opt.enableNone != null ? opt.enableNone : true\n    });\n    result[mainType + 'Models'] = queryResult.models;\n    result[mainType + 'Model'] = queryResult.models[0];\n  });\n  return result;\n}\nexport function preParseFinder(finderInput, opt) {\n  var finder;\n  if (isString(finderInput)) {\n    var obj = {};\n    obj[finderInput + 'Index'] = 0;\n    finder = obj;\n  } else {\n    finder = finderInput;\n  }\n  var queryOptionMap = createHashMap();\n  var others = {};\n  var mainTypeSpecified = false;\n  each(finder, function (value, key) {\n    // Exclude 'dataIndex' and other illegal keys.\n    if (key === 'dataIndex' || key === 'dataIndexInside') {\n      others[key] = value;\n      return;\n    }\n    var parsedKey = key.match(/^(\\w+)(Index|Id|Name)$/) || [];\n    var mainType = parsedKey[1];\n    var queryType = (parsedKey[2] || '').toLowerCase();\n    if (!mainType || !queryType || opt && opt.includeMainTypes && indexOf(opt.includeMainTypes, mainType) < 0) {\n      return;\n    }\n    mainTypeSpecified = mainTypeSpecified || !!mainType;\n    var queryOption = queryOptionMap.get(mainType) || queryOptionMap.set(mainType, {});\n    queryOption[queryType] = value;\n  });\n  return {\n    mainTypeSpecified: mainTypeSpecified,\n    queryOptionMap: queryOptionMap,\n    others: others\n  };\n}\nexport var SINGLE_REFERRING = {\n  useDefault: true,\n  enableAll: false,\n  enableNone: false\n};\nexport var MULTIPLE_REFERRING = {\n  useDefault: false,\n  enableAll: true,\n  enableNone: true\n};\nexport function queryReferringComponents(ecModel, mainType, userOption, opt) {\n  opt = opt || SINGLE_REFERRING;\n  var indexOption = userOption.index;\n  var idOption = userOption.id;\n  var nameOption = userOption.name;\n  var result = {\n    models: null,\n    specified: indexOption != null || idOption != null || nameOption != null\n  };\n  if (!result.specified) {\n    // Use the first as default if `useDefault`.\n    var firstCmpt = void 0;\n    result.models = opt.useDefault && (firstCmpt = ecModel.getComponent(mainType)) ? [firstCmpt] : [];\n    return result;\n  }\n  if (indexOption === 'none' || indexOption === false) {\n    if (opt.enableNone) {\n      result.models = [];\n      return result;\n    } else {\n      // Do not throw; consider if some component previously does not use this method,\n      // and start to use it, need to be fault-tolerant for backward compatibility.\n      if (process.env.NODE_ENV !== 'production') {\n        error('`\"none\"` or `false` is not a valid value on index option.');\n      }\n      indexOption = -1; // Can not query by index but may still query by id/name if specified.\n    }\n  }\n  // `queryComponents` will return all components if\n  // both all of index/id/name are null/undefined.\n  if (indexOption === 'all') {\n    if (opt.enableAll) {\n      indexOption = idOption = nameOption = null;\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        error('`\"all\"` is not a valid value on index option.');\n      }\n      indexOption = -1;\n    }\n  }\n  result.models = ecModel.queryComponents({\n    mainType: mainType,\n    index: indexOption,\n    id: idOption,\n    name: nameOption\n  });\n  return result;\n}\nexport function setAttribute(dom, key, value) {\n  dom.setAttribute ? dom.setAttribute(key, value) : dom[key] = value;\n}\nexport function getAttribute(dom, key) {\n  return dom.getAttribute ? dom.getAttribute(key) : dom[key];\n}\nexport function getTooltipRenderMode(renderModeOption) {\n  if (renderModeOption === 'auto') {\n    // Using html when `document` exists, use richText otherwise\n    return env.domSupported ? 'html' : 'richText';\n  } else {\n    return renderModeOption || 'html';\n  }\n}\n/**\n * Group a list by key.\n */\nexport function groupData(array, getKey // return key\n) {\n  var buckets = createHashMap();\n  var keys = [];\n  each(array, function (item) {\n    var key = getKey(item);\n    (buckets.get(key) || (keys.push(key), buckets.set(key, []))).push(item);\n  });\n  return {\n    keys: keys,\n    buckets: buckets\n  };\n}\n/**\n * Interpolate raw values of a series with percent\n *\n * @param data         data\n * @param labelModel   label model of the text element\n * @param sourceValue  start value. May be null/undefined when init.\n * @param targetValue  end value\n * @param percent      0~1 percentage; 0 uses start value while 1 uses end value\n * @return             interpolated values\n *                     If `sourceValue` and `targetValue` are `number`, return `number`.\n *                     If `sourceValue` and `targetValue` are `string`, return `string`.\n *                     If `sourceValue` and `targetValue` are `(string | number)[]`, return `(string | number)[]`.\n *                     Other cases do not supported.\n */\nexport function interpolateRawValues(data, precision, sourceValue, targetValue, percent) {\n  var isAutoPrecision = precision == null || precision === 'auto';\n  if (targetValue == null) {\n    return targetValue;\n  }\n  if (isNumber(targetValue)) {\n    var value = interpolateNumber(sourceValue || 0, targetValue, percent);\n    return round(value, isAutoPrecision ? Math.max(getPrecision(sourceValue || 0), getPrecision(targetValue)) : precision);\n  } else if (isString(targetValue)) {\n    return percent < 1 ? sourceValue : targetValue;\n  } else {\n    var interpolated = [];\n    var leftArr = sourceValue;\n    var rightArr = targetValue;\n    var length_1 = Math.max(leftArr ? leftArr.length : 0, rightArr.length);\n    for (var i = 0; i < length_1; ++i) {\n      var info = data.getDimensionInfo(i);\n      // Don't interpolate ordinal dims\n      if (info && info.type === 'ordinal') {\n        // In init, there is no `sourceValue`, but should better not to get undefined result.\n        interpolated[i] = (percent < 1 && leftArr ? leftArr : rightArr)[i];\n      } else {\n        var leftVal = leftArr && leftArr[i] ? leftArr[i] : 0;\n        var rightVal = rightArr[i];\n        var value = interpolateNumber(leftVal, rightVal, percent);\n        interpolated[i] = round(value, isAutoPrecision ? Math.max(getPrecision(leftVal), getPrecision(rightVal)) : precision);\n      }\n    }\n    return interpolated;\n  }\n}\n/**\n * Use an iterator to avoid exposing the internal list or duplicating it\n * for the outside traveller, and no extra heap allocation.\n * @usage\n *  for (const it = resetIterator(); it.next();) {\n *      const item = it.item;\n *      const key = it.key;\n *      const itIdx = it.itIdx;\n *      // ...\n *  }\n * @usage\n *  const it = resetIterator();\n *  while (it.next()) { ... }\n * @usage\n *  for (resetIterator(it); it.next();) { ... }\n */\nvar ListIterator = /** @class */function () {\n  function ListIterator() {}\n  /**\n   * The loop condition is `idx < end` if `step > 0`;\n   * The loop condition is `idx >= end` if `step < 0`.\n   *\n   * @param end By default `list.length` if `step > 0`; `0` if `step < 0`.\n   * @param step By default `1`.\n   */\n  ListIterator.prototype.reset = function (list, start, end, step) {\n    this._list = list;\n    this._step = step = step || 1;\n    this._idx = start;\n    this._end = end != null ? end : step > 0 ? list.length : 0;\n    this.item = null;\n    this.key = NaN;\n    return this;\n  };\n  ListIterator.prototype.next = function () {\n    if (this._step > 0 ? this._idx < this._end : this._idx >= this._end) {\n      this.item = this._list[this._idx];\n      this.key = this._idx = this._idx + this._step;\n      return true;\n    }\n    return false;\n  };\n  return ListIterator;\n}();\nexport { ListIterator };\nexport function clearTmpModel(model) {\n  // Clear to avoid memory leak.\n  model.option = model.parentModel = model.ecModel = null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner } from './model.js';\nexport var getECData = makeInner();\nexport var setCommonECData = function (seriesIndex, dataType, dataIdx, el) {\n  if (el) {\n    var ecData = getECData(el);\n    // Add data index and series index for indexing the data by element\n    // Useful in tooltip\n    ecData.dataIndex = dataIdx;\n    ecData.dataType = dataType;\n    ecData.seriesIndex = seriesIndex;\n    ecData.ssrType = 'chart';\n    // TODO: not store dataIndex on children.\n    if (el.type === 'group') {\n      el.traverse(function (child) {\n        var childECData = getECData(child);\n        childECData.seriesIndex = seriesIndex;\n        childECData.dataIndex = dataIdx;\n        childECData.dataType = dataType;\n        childECData.ssrType = 'chart';\n      });\n    }\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend, indexOf, isArrayLike, isObject, keys, isArray, each } from 'zrender/lib/core/util.js';\nimport { getECData } from './innerStore.js';\nimport { liftColor } from 'zrender/lib/tool/color.js';\nimport { queryDataIndex, makeInner } from './model.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport { error } from './log.js';\n// Reserve 0 as default.\nvar _highlightNextDigit = 1;\nvar _highlightKeyMap = {};\nvar getSavedStates = makeInner();\nvar getComponentStates = makeInner();\nexport var HOVER_STATE_NORMAL = 0;\nexport var HOVER_STATE_BLUR = 1;\nexport var HOVER_STATE_EMPHASIS = 2;\nexport var SPECIAL_STATES = ['emphasis', 'blur', 'select'];\nexport var DISPLAY_STATES = ['normal', 'emphasis', 'blur', 'select'];\nexport var Z2_EMPHASIS_LIFT = 10;\nexport var Z2_SELECT_LIFT = 9;\nexport var HIGHLIGHT_ACTION_TYPE = 'highlight';\nexport var DOWNPLAY_ACTION_TYPE = 'downplay';\nexport var SELECT_ACTION_TYPE = 'select';\nexport var UNSELECT_ACTION_TYPE = 'unselect';\nexport var TOGGLE_SELECT_ACTION_TYPE = 'toggleSelect';\nexport var SELECT_CHANGED_EVENT_TYPE = 'selectchanged';\nfunction hasFillOrStroke(fillOrStroke) {\n  return fillOrStroke != null && fillOrStroke !== 'none';\n}\nfunction doChangeHoverState(el, stateName, hoverStateEnum) {\n  if (el.onHoverStateChange && (el.hoverState || 0) !== hoverStateEnum) {\n    el.onHoverStateChange(stateName);\n  }\n  el.hoverState = hoverStateEnum;\n}\nfunction singleEnterEmphasis(el) {\n  // Only mark the flag.\n  // States will be applied in the echarts.ts in next frame.\n  doChangeHoverState(el, 'emphasis', HOVER_STATE_EMPHASIS);\n}\nfunction singleLeaveEmphasis(el) {\n  // Only mark the flag.\n  // States will be applied in the echarts.ts in next frame.\n  if (el.hoverState === HOVER_STATE_EMPHASIS) {\n    doChangeHoverState(el, 'normal', HOVER_STATE_NORMAL);\n  }\n}\nfunction singleEnterBlur(el) {\n  doChangeHoverState(el, 'blur', HOVER_STATE_BLUR);\n}\nfunction singleLeaveBlur(el) {\n  if (el.hoverState === HOVER_STATE_BLUR) {\n    doChangeHoverState(el, 'normal', HOVER_STATE_NORMAL);\n  }\n}\nfunction singleEnterSelect(el) {\n  el.selected = true;\n}\nfunction singleLeaveSelect(el) {\n  el.selected = false;\n}\nfunction updateElementState(el, updater, commonParam) {\n  updater(el, commonParam);\n}\nfunction traverseUpdateState(el, updater, commonParam) {\n  updateElementState(el, updater, commonParam);\n  el.isGroup && el.traverse(function (child) {\n    updateElementState(child, updater, commonParam);\n  });\n}\nexport function setStatesFlag(el, stateName) {\n  switch (stateName) {\n    case 'emphasis':\n      el.hoverState = HOVER_STATE_EMPHASIS;\n      break;\n    case 'normal':\n      el.hoverState = HOVER_STATE_NORMAL;\n      break;\n    case 'blur':\n      el.hoverState = HOVER_STATE_BLUR;\n      break;\n    case 'select':\n      el.selected = true;\n  }\n}\n/**\n * If we reuse elements when rerender.\n * DON'T forget to clearStates before we update the style and shape.\n * Or we may update on the wrong state instead of normal state.\n */\nexport function clearStates(el) {\n  if (el.isGroup) {\n    el.traverse(function (child) {\n      child.clearStates();\n    });\n  } else {\n    el.clearStates();\n  }\n}\nfunction getFromStateStyle(el, props, toStateName, defaultValue) {\n  var style = el.style;\n  var fromState = {};\n  for (var i = 0; i < props.length; i++) {\n    var propName = props[i];\n    var val = style[propName];\n    fromState[propName] = val == null ? defaultValue && defaultValue[propName] : val;\n  }\n  for (var i = 0; i < el.animators.length; i++) {\n    var animator = el.animators[i];\n    if (animator.__fromStateTransition\n    // Don't consider the animation to emphasis state.\n    && animator.__fromStateTransition.indexOf(toStateName) < 0 && animator.targetName === 'style') {\n      animator.saveTo(fromState, props);\n    }\n  }\n  return fromState;\n}\nfunction createEmphasisDefaultState(el, stateName, targetStates, state) {\n  var hasSelect = targetStates && indexOf(targetStates, 'select') >= 0;\n  var cloned = false;\n  if (el instanceof Path) {\n    var store = getSavedStates(el);\n    var fromFill = hasSelect ? store.selectFill || store.normalFill : store.normalFill;\n    var fromStroke = hasSelect ? store.selectStroke || store.normalStroke : store.normalStroke;\n    if (hasFillOrStroke(fromFill) || hasFillOrStroke(fromStroke)) {\n      state = state || {};\n      var emphasisStyle = state.style || {};\n      // inherit case\n      if (emphasisStyle.fill === 'inherit') {\n        cloned = true;\n        state = extend({}, state);\n        emphasisStyle = extend({}, emphasisStyle);\n        emphasisStyle.fill = fromFill;\n      }\n      // Apply default color lift\n      else if (!hasFillOrStroke(emphasisStyle.fill) && hasFillOrStroke(fromFill)) {\n        cloned = true;\n        // Not modify the original value.\n        state = extend({}, state);\n        emphasisStyle = extend({}, emphasisStyle);\n        // Already being applied 'emphasis'. DON'T lift color multiple times.\n        emphasisStyle.fill = liftColor(fromFill);\n      }\n      // Not highlight stroke if fill has been highlighted.\n      else if (!hasFillOrStroke(emphasisStyle.stroke) && hasFillOrStroke(fromStroke)) {\n        if (!cloned) {\n          state = extend({}, state);\n          emphasisStyle = extend({}, emphasisStyle);\n        }\n        emphasisStyle.stroke = liftColor(fromStroke);\n      }\n      state.style = emphasisStyle;\n    }\n  }\n  if (state) {\n    // TODO Share with textContent?\n    if (state.z2 == null) {\n      if (!cloned) {\n        state = extend({}, state);\n      }\n      var z2EmphasisLift = el.z2EmphasisLift;\n      state.z2 = el.z2 + (z2EmphasisLift != null ? z2EmphasisLift : Z2_EMPHASIS_LIFT);\n    }\n  }\n  return state;\n}\nfunction createSelectDefaultState(el, stateName, state) {\n  // const hasSelect = indexOf(el.currentStates, stateName) >= 0;\n  if (state) {\n    // TODO Share with textContent?\n    if (state.z2 == null) {\n      state = extend({}, state);\n      var z2SelectLift = el.z2SelectLift;\n      state.z2 = el.z2 + (z2SelectLift != null ? z2SelectLift : Z2_SELECT_LIFT);\n    }\n  }\n  return state;\n}\nfunction createBlurDefaultState(el, stateName, state) {\n  var hasBlur = indexOf(el.currentStates, stateName) >= 0;\n  var currentOpacity = el.style.opacity;\n  var fromState = !hasBlur ? getFromStateStyle(el, ['opacity'], stateName, {\n    opacity: 1\n  }) : null;\n  state = state || {};\n  var blurStyle = state.style || {};\n  if (blurStyle.opacity == null) {\n    // clone state\n    state = extend({}, state);\n    blurStyle = extend({\n      // Already being applied 'emphasis'. DON'T mul opacity multiple times.\n      opacity: hasBlur ? currentOpacity : fromState.opacity * 0.1\n    }, blurStyle);\n    state.style = blurStyle;\n  }\n  return state;\n}\nfunction elementStateProxy(stateName, targetStates) {\n  var state = this.states[stateName];\n  if (this.style) {\n    if (stateName === 'emphasis') {\n      return createEmphasisDefaultState(this, stateName, targetStates, state);\n    } else if (stateName === 'blur') {\n      return createBlurDefaultState(this, stateName, state);\n    } else if (stateName === 'select') {\n      return createSelectDefaultState(this, stateName, state);\n    }\n  }\n  return state;\n}\n/**\n * Set hover style (namely \"emphasis style\") of element.\n * @param el Should not be `zrender/graphic/Group`.\n * @param focus 'self' | 'selfInSeries' | 'series'\n */\nexport function setDefaultStateProxy(el) {\n  el.stateProxy = elementStateProxy;\n  var textContent = el.getTextContent();\n  var textGuide = el.getTextGuideLine();\n  if (textContent) {\n    textContent.stateProxy = elementStateProxy;\n  }\n  if (textGuide) {\n    textGuide.stateProxy = elementStateProxy;\n  }\n}\nexport function enterEmphasisWhenMouseOver(el, e) {\n  !shouldSilent(el, e)\n  // \"emphasis\" event highlight has higher priority than mouse highlight.\n  && !el.__highByOuter && traverseUpdateState(el, singleEnterEmphasis);\n}\nexport function leaveEmphasisWhenMouseOut(el, e) {\n  !shouldSilent(el, e)\n  // \"emphasis\" event highlight has higher priority than mouse highlight.\n  && !el.__highByOuter && traverseUpdateState(el, singleLeaveEmphasis);\n}\nexport function enterEmphasis(el, highlightDigit) {\n  el.__highByOuter |= 1 << (highlightDigit || 0);\n  traverseUpdateState(el, singleEnterEmphasis);\n}\nexport function leaveEmphasis(el, highlightDigit) {\n  !(el.__highByOuter &= ~(1 << (highlightDigit || 0))) && traverseUpdateState(el, singleLeaveEmphasis);\n}\nexport function enterBlur(el) {\n  traverseUpdateState(el, singleEnterBlur);\n}\nexport function leaveBlur(el) {\n  traverseUpdateState(el, singleLeaveBlur);\n}\nexport function enterSelect(el) {\n  traverseUpdateState(el, singleEnterSelect);\n}\nexport function leaveSelect(el) {\n  traverseUpdateState(el, singleLeaveSelect);\n}\nfunction shouldSilent(el, e) {\n  return el.__highDownSilentOnTouch && e.zrByTouch;\n}\nexport function allLeaveBlur(api) {\n  var model = api.getModel();\n  var leaveBlurredSeries = [];\n  var allComponentViews = [];\n  model.eachComponent(function (componentType, componentModel) {\n    var componentStates = getComponentStates(componentModel);\n    var isSeries = componentType === 'series';\n    var view = isSeries ? api.getViewOfSeriesModel(componentModel) : api.getViewOfComponentModel(componentModel);\n    !isSeries && allComponentViews.push(view);\n    if (componentStates.isBlured) {\n      // Leave blur anyway\n      view.group.traverse(function (child) {\n        singleLeaveBlur(child);\n      });\n      isSeries && leaveBlurredSeries.push(componentModel);\n    }\n    componentStates.isBlured = false;\n  });\n  each(allComponentViews, function (view) {\n    if (view && view.toggleBlurSeries) {\n      view.toggleBlurSeries(leaveBlurredSeries, false, model);\n    }\n  });\n}\nexport function blurSeries(targetSeriesIndex, focus, blurScope, api) {\n  var ecModel = api.getModel();\n  blurScope = blurScope || 'coordinateSystem';\n  function leaveBlurOfIndices(data, dataIndices) {\n    for (var i = 0; i < dataIndices.length; i++) {\n      var itemEl = data.getItemGraphicEl(dataIndices[i]);\n      itemEl && leaveBlur(itemEl);\n    }\n  }\n  if (targetSeriesIndex == null) {\n    return;\n  }\n  if (!focus || focus === 'none') {\n    return;\n  }\n  var targetSeriesModel = ecModel.getSeriesByIndex(targetSeriesIndex);\n  var targetCoordSys = targetSeriesModel.coordinateSystem;\n  if (targetCoordSys && targetCoordSys.master) {\n    targetCoordSys = targetCoordSys.master;\n  }\n  var blurredSeries = [];\n  ecModel.eachSeries(function (seriesModel) {\n    var sameSeries = targetSeriesModel === seriesModel;\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys && coordSys.master) {\n      coordSys = coordSys.master;\n    }\n    var sameCoordSys = coordSys && targetCoordSys ? coordSys === targetCoordSys : sameSeries; // If there is no coordinate system. use sameSeries instead.\n    if (!(\n    // Not blur other series if blurScope series\n    blurScope === 'series' && !sameSeries\n    // Not blur other coordinate system if blurScope is coordinateSystem\n    || blurScope === 'coordinateSystem' && !sameCoordSys\n    // Not blur self series if focus is series.\n    || focus === 'series' && sameSeries\n    // TODO blurScope: coordinate system\n    )) {\n      var view = api.getViewOfSeriesModel(seriesModel);\n      view.group.traverse(function (child) {\n        // For the elements that have been triggered by other components,\n        // and are still required to be highlighted,\n        // because the current is directly forced to blur the element,\n        // it will cause the focus self to be unable to highlight, so skip the blur of this element.\n        if (child.__highByOuter && sameSeries && focus === 'self') {\n          return;\n        }\n        singleEnterBlur(child);\n      });\n      if (isArrayLike(focus)) {\n        leaveBlurOfIndices(seriesModel.getData(), focus);\n      } else if (isObject(focus)) {\n        var dataTypes = keys(focus);\n        for (var d = 0; d < dataTypes.length; d++) {\n          leaveBlurOfIndices(seriesModel.getData(dataTypes[d]), focus[dataTypes[d]]);\n        }\n      }\n      blurredSeries.push(seriesModel);\n      getComponentStates(seriesModel).isBlured = true;\n    }\n  });\n  ecModel.eachComponent(function (componentType, componentModel) {\n    if (componentType === 'series') {\n      return;\n    }\n    var view = api.getViewOfComponentModel(componentModel);\n    if (view && view.toggleBlurSeries) {\n      view.toggleBlurSeries(blurredSeries, true, ecModel);\n    }\n  });\n}\nexport function blurComponent(componentMainType, componentIndex, api) {\n  if (componentMainType == null || componentIndex == null) {\n    return;\n  }\n  var componentModel = api.getModel().getComponent(componentMainType, componentIndex);\n  if (!componentModel) {\n    return;\n  }\n  getComponentStates(componentModel).isBlured = true;\n  var view = api.getViewOfComponentModel(componentModel);\n  if (!view || !view.focusBlurEnabled) {\n    return;\n  }\n  view.group.traverse(function (child) {\n    singleEnterBlur(child);\n  });\n}\nexport function blurSeriesFromHighlightPayload(seriesModel, payload, api) {\n  var seriesIndex = seriesModel.seriesIndex;\n  var data = seriesModel.getData(payload.dataType);\n  if (!data) {\n    if (process.env.NODE_ENV !== 'production') {\n      error(\"Unknown dataType \" + payload.dataType);\n    }\n    return;\n  }\n  var dataIndex = queryDataIndex(data, payload);\n  // Pick the first one if there is multiple/none exists.\n  dataIndex = (isArray(dataIndex) ? dataIndex[0] : dataIndex) || 0;\n  var el = data.getItemGraphicEl(dataIndex);\n  if (!el) {\n    var count = data.count();\n    var current = 0;\n    // If data on dataIndex is NaN.\n    while (!el && current < count) {\n      el = data.getItemGraphicEl(current++);\n    }\n  }\n  if (el) {\n    var ecData = getECData(el);\n    blurSeries(seriesIndex, ecData.focus, ecData.blurScope, api);\n  } else {\n    // If there is no element put on the data. Try getting it from raw option\n    // TODO Should put it on seriesModel?\n    var focus_1 = seriesModel.get(['emphasis', 'focus']);\n    var blurScope = seriesModel.get(['emphasis', 'blurScope']);\n    if (focus_1 != null) {\n      blurSeries(seriesIndex, focus_1, blurScope, api);\n    }\n  }\n}\nexport function findComponentHighDownDispatchers(componentMainType, componentIndex, name, api) {\n  var ret = {\n    focusSelf: false,\n    dispatchers: null\n  };\n  if (componentMainType == null || componentMainType === 'series' || componentIndex == null || name == null) {\n    return ret;\n  }\n  var componentModel = api.getModel().getComponent(componentMainType, componentIndex);\n  if (!componentModel) {\n    return ret;\n  }\n  var view = api.getViewOfComponentModel(componentModel);\n  if (!view || !view.findHighDownDispatchers) {\n    return ret;\n  }\n  var dispatchers = view.findHighDownDispatchers(name);\n  // At presnet, the component (like Geo) only blur inside itself.\n  // So we do not use `blurScope` in component.\n  var focusSelf;\n  for (var i = 0; i < dispatchers.length; i++) {\n    if (process.env.NODE_ENV !== 'production' && !isHighDownDispatcher(dispatchers[i])) {\n      error('param should be highDownDispatcher');\n    }\n    if (getECData(dispatchers[i]).focus === 'self') {\n      focusSelf = true;\n      break;\n    }\n  }\n  return {\n    focusSelf: focusSelf,\n    dispatchers: dispatchers\n  };\n}\nexport function handleGlobalMouseOverForHighDown(dispatcher, e, api) {\n  if (process.env.NODE_ENV !== 'production' && !isHighDownDispatcher(dispatcher)) {\n    error('param should be highDownDispatcher');\n  }\n  var ecData = getECData(dispatcher);\n  var _a = findComponentHighDownDispatchers(ecData.componentMainType, ecData.componentIndex, ecData.componentHighDownName, api),\n    dispatchers = _a.dispatchers,\n    focusSelf = _a.focusSelf;\n  // If `findHighDownDispatchers` is supported on the component,\n  // highlight/downplay elements with the same name.\n  if (dispatchers) {\n    if (focusSelf) {\n      blurComponent(ecData.componentMainType, ecData.componentIndex, api);\n    }\n    each(dispatchers, function (dispatcher) {\n      return enterEmphasisWhenMouseOver(dispatcher, e);\n    });\n  } else {\n    // Try blur all in the related series. Then emphasis the hoverred.\n    // TODO. progressive mode.\n    blurSeries(ecData.seriesIndex, ecData.focus, ecData.blurScope, api);\n    if (ecData.focus === 'self') {\n      blurComponent(ecData.componentMainType, ecData.componentIndex, api);\n    }\n    // Other than series, component that not support `findHighDownDispatcher` will\n    // also use it. But in this case, highlight/downplay are only supported in\n    // mouse hover but not in dispatchAction.\n    enterEmphasisWhenMouseOver(dispatcher, e);\n  }\n}\nexport function handleGlobalMouseOutForHighDown(dispatcher, e, api) {\n  if (process.env.NODE_ENV !== 'production' && !isHighDownDispatcher(dispatcher)) {\n    error('param should be highDownDispatcher');\n  }\n  allLeaveBlur(api);\n  var ecData = getECData(dispatcher);\n  var dispatchers = findComponentHighDownDispatchers(ecData.componentMainType, ecData.componentIndex, ecData.componentHighDownName, api).dispatchers;\n  if (dispatchers) {\n    each(dispatchers, function (dispatcher) {\n      return leaveEmphasisWhenMouseOut(dispatcher, e);\n    });\n  } else {\n    leaveEmphasisWhenMouseOut(dispatcher, e);\n  }\n}\nexport function toggleSelectionFromPayload(seriesModel, payload, api) {\n  if (!isSelectChangePayload(payload)) {\n    return;\n  }\n  var dataType = payload.dataType;\n  var data = seriesModel.getData(dataType);\n  var dataIndex = queryDataIndex(data, payload);\n  if (!isArray(dataIndex)) {\n    dataIndex = [dataIndex];\n  }\n  seriesModel[payload.type === TOGGLE_SELECT_ACTION_TYPE ? 'toggleSelect' : payload.type === SELECT_ACTION_TYPE ? 'select' : 'unselect'](dataIndex, dataType);\n}\nexport function updateSeriesElementSelection(seriesModel) {\n  var allData = seriesModel.getAllData();\n  each(allData, function (_a) {\n    var data = _a.data,\n      type = _a.type;\n    data.eachItemGraphicEl(function (el, idx) {\n      seriesModel.isSelected(idx, type) ? enterSelect(el) : leaveSelect(el);\n    });\n  });\n}\nexport function getAllSelectedIndices(ecModel) {\n  var ret = [];\n  ecModel.eachSeries(function (seriesModel) {\n    var allData = seriesModel.getAllData();\n    each(allData, function (_a) {\n      var data = _a.data,\n        type = _a.type;\n      var dataIndices = seriesModel.getSelectedDataIndices();\n      if (dataIndices.length > 0) {\n        var item = {\n          dataIndex: dataIndices,\n          seriesIndex: seriesModel.seriesIndex\n        };\n        if (type != null) {\n          item.dataType = type;\n        }\n        ret.push(item);\n      }\n    });\n  });\n  return ret;\n}\n/**\n * Enable the function that mouseover will trigger the emphasis state.\n *\n * NOTE:\n * This function should be used on the element with dataIndex, seriesIndex.\n *\n */\nexport function enableHoverEmphasis(el, focus, blurScope) {\n  setAsHighDownDispatcher(el, true);\n  traverseUpdateState(el, setDefaultStateProxy);\n  enableHoverFocus(el, focus, blurScope);\n}\nexport function disableHoverEmphasis(el) {\n  setAsHighDownDispatcher(el, false);\n}\nexport function toggleHoverEmphasis(el, focus, blurScope, isDisabled) {\n  isDisabled ? disableHoverEmphasis(el) : enableHoverEmphasis(el, focus, blurScope);\n}\nexport function enableHoverFocus(el, focus, blurScope) {\n  var ecData = getECData(el);\n  if (focus != null) {\n    // TODO dataIndex may be set after this function. This check is not useful.\n    // if (ecData.dataIndex == null) {\n    //     if (__DEV__) {\n    //         console.warn('focus can only been set on element with dataIndex');\n    //     }\n    // }\n    // else {\n    ecData.focus = focus;\n    ecData.blurScope = blurScope;\n    // }\n  } else if (ecData.focus) {\n    ecData.focus = null;\n  }\n}\nvar OTHER_STATES = ['emphasis', 'blur', 'select'];\nvar defaultStyleGetterMap = {\n  itemStyle: 'getItemStyle',\n  lineStyle: 'getLineStyle',\n  areaStyle: 'getAreaStyle'\n};\n/**\n * Set emphasis/blur/selected states of element.\n */\nexport function setStatesStylesFromModel(el, itemModel, styleType,\n// default itemStyle\ngetter) {\n  styleType = styleType || 'itemStyle';\n  for (var i = 0; i < OTHER_STATES.length; i++) {\n    var stateName = OTHER_STATES[i];\n    var model = itemModel.getModel([stateName, styleType]);\n    var state = el.ensureState(stateName);\n    // Let it throw error if getterType is not found.\n    state.style = getter ? getter(model) : model[defaultStyleGetterMap[styleType]]();\n  }\n}\n/**\n *\n * Set element as highlight / downplay dispatcher.\n * It will be checked when element received mouseover event or from highlight action.\n * It's in change of all highlight/downplay behavior of it's children.\n *\n * @param el\n * @param el.highDownSilentOnTouch\n *        In touch device, mouseover event will be trigger on touchstart event\n *        (see module:zrender/dom/HandlerProxy). By this mechanism, we can\n *        conveniently use hoverStyle when tap on touch screen without additional\n *        code for compatibility.\n *        But if the chart/component has select feature, which usually also use\n *        hoverStyle, there might be conflict between 'select-highlight' and\n *        'hover-highlight' especially when roam is enabled (see geo for example).\n *        In this case, `highDownSilentOnTouch` should be used to disable\n *        hover-highlight on touch device.\n * @param asDispatcher If `false`, do not set as \"highDownDispatcher\".\n */\nexport function setAsHighDownDispatcher(el, asDispatcher) {\n  var disable = asDispatcher === false;\n  var extendedEl = el;\n  // Make `highDownSilentOnTouch` and `onStateChange` only work after\n  // `setAsHighDownDispatcher` called. Avoid it is modified by user unexpectedly.\n  if (el.highDownSilentOnTouch) {\n    extendedEl.__highDownSilentOnTouch = el.highDownSilentOnTouch;\n  }\n  // Simple optimize, since this method might be\n  // called for each elements of a group in some cases.\n  if (!disable || extendedEl.__highDownDispatcher) {\n    // Emphasis, normal can be triggered manually by API or other components like hover link.\n    // el[method]('emphasis', onElementEmphasisEvent)[method]('normal', onElementNormalEvent);\n    // Also keep previous record.\n    extendedEl.__highByOuter = extendedEl.__highByOuter || 0;\n    extendedEl.__highDownDispatcher = !disable;\n  }\n}\nexport function isHighDownDispatcher(el) {\n  return !!(el && el.__highDownDispatcher);\n}\n/**\n * Enable component highlight/downplay features:\n * + hover link (within the same name)\n * + focus blur in component\n */\nexport function enableComponentHighDownFeatures(el, componentModel, componentHighDownName) {\n  var ecData = getECData(el);\n  ecData.componentMainType = componentModel.mainType;\n  ecData.componentIndex = componentModel.componentIndex;\n  ecData.componentHighDownName = componentHighDownName;\n}\n/**\n * Support highlight/downplay record on each elements.\n * For the case: hover highlight/downplay (legend, visualMap, ...) and\n * user triggered highlight/downplay should not conflict.\n * Only all of the highlightDigit cleared, return to normal.\n * @param {string} highlightKey\n * @return {number} highlightDigit\n */\nexport function getHighlightDigit(highlightKey) {\n  var highlightDigit = _highlightKeyMap[highlightKey];\n  if (highlightDigit == null && _highlightNextDigit <= 32) {\n    highlightDigit = _highlightKeyMap[highlightKey] = _highlightNextDigit++;\n  }\n  return highlightDigit;\n}\nexport function isSelectChangePayload(payload) {\n  var payloadType = payload.type;\n  return payloadType === SELECT_ACTION_TYPE || payloadType === UNSELECT_ACTION_TYPE || payloadType === TOGGLE_SELECT_ACTION_TYPE;\n}\nexport function isHighDownPayload(payload) {\n  var payloadType = payload.type;\n  return payloadType === HIGHLIGHT_ACTION_TYPE || payloadType === DOWNPLAY_ACTION_TYPE;\n}\nexport function savePathStates(el) {\n  var store = getSavedStates(el);\n  store.normalFill = el.style.fill;\n  store.normalStroke = el.style.stroke;\n  var selectState = el.states.select || {};\n  store.selectFill = selectState.style && selectState.style.fill || null;\n  store.selectStroke = selectState.style && selectState.style.stroke || null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isFunction, isObject, retrieve2 } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../util/model.js';\n// Stored properties for further transition.\nexport var transitionStore = makeInner();\n/**\n * Return null if animation is disabled.\n */\nexport function getAnimationConfig(animationType, animatableModel, dataIndex,\n// Extra opts can override the option in animatable model.\nextraOpts,\n// TODO It's only for pictorial bar now.\nextraDelayParams) {\n  var animationPayload;\n  // Check if there is global animation configuration from dataZoom/resize can override the config in option.\n  // If animation is enabled. Will use this animation config in payload.\n  // If animation is disabled. Just ignore it.\n  if (animatableModel && animatableModel.ecModel) {\n    var updatePayload = animatableModel.ecModel.getUpdatePayload();\n    animationPayload = updatePayload && updatePayload.animation;\n  }\n  var animationEnabled = animatableModel && animatableModel.isAnimationEnabled();\n  var isUpdate = animationType === 'update';\n  if (animationEnabled) {\n    var duration = void 0;\n    var easing = void 0;\n    var delay = void 0;\n    if (extraOpts) {\n      duration = retrieve2(extraOpts.duration, 200);\n      easing = retrieve2(extraOpts.easing, 'cubicOut');\n      delay = 0;\n    } else {\n      duration = animatableModel.getShallow(isUpdate ? 'animationDurationUpdate' : 'animationDuration');\n      easing = animatableModel.getShallow(isUpdate ? 'animationEasingUpdate' : 'animationEasing');\n      delay = animatableModel.getShallow(isUpdate ? 'animationDelayUpdate' : 'animationDelay');\n    }\n    // animation from payload has highest priority.\n    if (animationPayload) {\n      animationPayload.duration != null && (duration = animationPayload.duration);\n      animationPayload.easing != null && (easing = animationPayload.easing);\n      animationPayload.delay != null && (delay = animationPayload.delay);\n    }\n    if (isFunction(delay)) {\n      delay = delay(dataIndex, extraDelayParams);\n    }\n    if (isFunction(duration)) {\n      duration = duration(dataIndex);\n    }\n    var config = {\n      duration: duration || 0,\n      delay: delay,\n      easing: easing\n    };\n    return config;\n  } else {\n    return null;\n  }\n}\nfunction animateOrSetProps(animationType, el, props, animatableModel, dataIndex, cb, during) {\n  var isFrom = false;\n  var removeOpt;\n  if (isFunction(dataIndex)) {\n    during = cb;\n    cb = dataIndex;\n    dataIndex = null;\n  } else if (isObject(dataIndex)) {\n    cb = dataIndex.cb;\n    during = dataIndex.during;\n    isFrom = dataIndex.isFrom;\n    removeOpt = dataIndex.removeOpt;\n    dataIndex = dataIndex.dataIndex;\n  }\n  var isRemove = animationType === 'leave';\n  if (!isRemove) {\n    // Must stop the remove animation.\n    el.stopAnimation('leave');\n  }\n  var animationConfig = getAnimationConfig(animationType, animatableModel, dataIndex, isRemove ? removeOpt || {} : null, animatableModel && animatableModel.getAnimationDelayParams ? animatableModel.getAnimationDelayParams(el, dataIndex) : null);\n  if (animationConfig && animationConfig.duration > 0) {\n    var duration = animationConfig.duration;\n    var animationDelay = animationConfig.delay;\n    var animationEasing = animationConfig.easing;\n    var animateConfig = {\n      duration: duration,\n      delay: animationDelay || 0,\n      easing: animationEasing,\n      done: cb,\n      force: !!cb || !!during,\n      // Set to final state in update/init animation.\n      // So the post processing based on the path shape can be done correctly.\n      setToFinal: !isRemove,\n      scope: animationType,\n      during: during\n    };\n    isFrom ? el.animateFrom(props, animateConfig) : el.animateTo(props, animateConfig);\n  } else {\n    el.stopAnimation();\n    // If `isFrom`, the props is the \"from\" props.\n    !isFrom && el.attr(props);\n    // Call during at least once.\n    during && during(1);\n    cb && cb();\n  }\n}\n/**\n * Update graphic element properties with or without animation according to the\n * configuration in series.\n *\n * Caution: this method will stop previous animation.\n * So do not use this method to one element twice before\n * animation starts, unless you know what you are doing.\n * @example\n *     graphic.updateProps(el, {\n *         position: [100, 100]\n *     }, seriesModel, dataIndex, function () { console.log('Animation done!'); });\n *     // Or\n *     graphic.updateProps(el, {\n *         position: [100, 100]\n *     }, seriesModel, function () { console.log('Animation done!'); });\n */\nfunction updateProps(el, props,\n// TODO: TYPE AnimatableModel\nanimatableModel, dataIndex, cb, during) {\n  animateOrSetProps('update', el, props, animatableModel, dataIndex, cb, during);\n}\nexport { updateProps };\n/**\n * Init graphic element properties with or without animation according to the\n * configuration in series.\n *\n * Caution: this method will stop previous animation.\n * So do not use this method to one element twice before\n * animation starts, unless you know what you are doing.\n */\nexport function initProps(el, props, animatableModel, dataIndex, cb, during) {\n  animateOrSetProps('enter', el, props, animatableModel, dataIndex, cb, during);\n}\n/**\n * If element is removed.\n * It can determine if element is having remove animation.\n */\nexport function isElementRemoved(el) {\n  if (!el.__zr) {\n    return true;\n  }\n  for (var i = 0; i < el.animators.length; i++) {\n    var animator = el.animators[i];\n    if (animator.scope === 'leave') {\n      return true;\n    }\n  }\n  return false;\n}\n/**\n * Remove graphic element\n */\nexport function removeElement(el, props, animatableModel, dataIndex, cb, during) {\n  // Don't do remove animation twice.\n  if (isElementRemoved(el)) {\n    return;\n  }\n  animateOrSetProps('leave', el, props, animatableModel, dataIndex, cb, during);\n}\nfunction fadeOutDisplayable(el, animatableModel, dataIndex, done) {\n  el.removeTextContent();\n  el.removeTextGuideLine();\n  removeElement(el, {\n    style: {\n      opacity: 0\n    }\n  }, animatableModel, dataIndex, done);\n}\nexport function removeElementWithFadeOut(el, animatableModel, dataIndex) {\n  function doRemove() {\n    el.parent && el.parent.remove(el);\n  }\n  // Hide label and labelLine first\n  // TODO Also use fade out animation?\n  if (!el.isGroup) {\n    fadeOutDisplayable(el, animatableModel, dataIndex, doRemove);\n  } else {\n    el.traverse(function (disp) {\n      if (!disp.isGroup) {\n        // Can invoke doRemove multiple times.\n        fadeOutDisplayable(disp, animatableModel, dataIndex, doRemove);\n      }\n    });\n  }\n}\n/**\n * Save old style for style transition in universalTransition module.\n * It's used when element will be reused in each render.\n * For chart like map, heatmap, which will always create new element.\n * We don't need to save this because universalTransition can get old style from the old element\n */\nexport function saveOldStyle(el) {\n  transitionStore(el).oldStyle = el.style;\n}\nexport function getOldStyle(el) {\n  return transitionStore(el).oldStyle;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as pathTool from 'zrender/lib/tool/path.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport * as vector from 'zrender/lib/core/vector.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport Transformable from 'zrender/lib/core/Transformable.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport Group from 'zrender/lib/graphic/Group.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport Circle from 'zrender/lib/graphic/shape/Circle.js';\nimport Ellipse from 'zrender/lib/graphic/shape/Ellipse.js';\nimport Sector from 'zrender/lib/graphic/shape/Sector.js';\nimport Ring from 'zrender/lib/graphic/shape/Ring.js';\nimport Polygon from 'zrender/lib/graphic/shape/Polygon.js';\nimport Polyline from 'zrender/lib/graphic/shape/Polyline.js';\nimport Rect from 'zrender/lib/graphic/shape/Rect.js';\nimport Line from 'zrender/lib/graphic/shape/Line.js';\nimport BezierCurve from 'zrender/lib/graphic/shape/BezierCurve.js';\nimport Arc from 'zrender/lib/graphic/shape/Arc.js';\nimport CompoundPath from 'zrender/lib/graphic/CompoundPath.js';\nimport LinearGradient from 'zrender/lib/graphic/LinearGradient.js';\nimport RadialGradient from 'zrender/lib/graphic/RadialGradient.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport OrientedBoundingRect from 'zrender/lib/core/OrientedBoundingRect.js';\nimport Point from 'zrender/lib/core/Point.js';\nimport IncrementalDisplayable from 'zrender/lib/graphic/IncrementalDisplayable.js';\nimport * as subPixelOptimizeUtil from 'zrender/lib/graphic/helper/subPixelOptimize.js';\nimport { extend, isArrayLike, map, defaults, isString, keys, each, hasOwn, isArray, isNumber, clone, assert } from 'zrender/lib/core/util.js';\nimport { getECData } from './innerStore.js';\nimport { updateProps, initProps, removeElement, removeElementWithFadeOut, isElementRemoved } from '../animation/basicTransition.js';\nimport { mathMin, mathMax, mathAbs } from './number.js';\n/**\n * @deprecated export for compatitable reason\n */\nexport { updateProps, initProps, removeElement, removeElementWithFadeOut, isElementRemoved };\nvar _customShapeMap = {};\nexport var XY = ['x', 'y'];\nexport var WH = ['width', 'height'];\n/**\n * Extend shape with parameters\n */\nexport function extendShape(opts) {\n  return Path.extend(opts);\n}\nvar extendPathFromString = pathTool.extendFromString;\n/**\n * Extend path\n */\nexport function extendPath(pathData, opts) {\n  return extendPathFromString(pathData, opts);\n}\n/**\n * Register a user defined shape.\n * The shape class can be fetched by `getShapeClass`\n * This method will overwrite the registered shapes, including\n * the registered built-in shapes, if using the same `name`.\n * The shape can be used in `custom series` and\n * `graphic component` by declaring `{type: name}`.\n *\n * @param name\n * @param ShapeClass Can be generated by `extendShape`.\n */\nexport function registerShape(name, ShapeClass) {\n  _customShapeMap[name] = ShapeClass;\n}\n/**\n * Find shape class registered by `registerShape`. Usually used in\n * fetching user defined shape.\n *\n * [Caution]:\n * (1) This method **MUST NOT be used inside echarts !!!**, unless it is prepared\n * to use user registered shapes.\n * Because the built-in shape (see `getBuiltInShape`) will be registered by\n * `registerShape` by default. That enables users to get both built-in\n * shapes as well as the shapes belonging to themsleves. But users can overwrite\n * the built-in shapes by using names like 'circle', 'rect' via calling\n * `registerShape`. So the echarts inner featrues should not fetch shapes from here\n * in case that it is overwritten by users, except that some features, like\n * `custom series`, `graphic component`, do it deliberately.\n *\n * (2) In the features like `custom series`, `graphic component`, the user input\n * `{tpye: 'xxx'}` does not only specify shapes but also specify other graphic\n * elements like `'group'`, `'text'`, `'image'` or event `'path'`. Those names\n * are reserved names, that is, if some user registers a shape named `'image'`,\n * the shape will not be used. If we intending to add some more reserved names\n * in feature, that might bring break changes (disable some existing user shape\n * names). But that case probably rarely happens. So we don't make more mechanism\n * to resolve this issue here.\n *\n * @param name\n * @return The shape class. If not found, return nothing.\n */\nexport function getShapeClass(name) {\n  if (_customShapeMap.hasOwnProperty(name)) {\n    return _customShapeMap[name];\n  }\n}\n/**\n * Create a path element from path data string\n * @param pathData\n * @param opts\n * @param rect\n * @param layout 'center' or 'cover' default to be cover\n */\nexport function makePath(pathData, opts, rect, layout) {\n  var path = pathTool.createFromString(pathData, opts);\n  if (rect) {\n    if (layout === 'center') {\n      rect = centerGraphic(rect, path.getBoundingRect());\n    }\n    resizePath(path, rect);\n  }\n  return path;\n}\n/**\n * Create a image element from image url\n * @param imageUrl image url\n * @param opts options\n * @param rect constrain rect\n * @param layout 'center' or 'cover'. Default to be 'cover'\n */\nexport function makeImage(imageUrl, rect, layout) {\n  var zrImg = new ZRImage({\n    style: {\n      image: imageUrl,\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    onload: function (img) {\n      if (layout === 'center') {\n        var boundingRect = {\n          width: img.width,\n          height: img.height\n        };\n        zrImg.setStyle(centerGraphic(rect, boundingRect));\n      }\n    }\n  });\n  return zrImg;\n}\n/**\n * Get position of centered element in bounding box.\n *\n * @param  rect         element local bounding box\n * @param  boundingRect constraint bounding box\n * @return element position containing x, y, width, and height\n */\nfunction centerGraphic(rect, boundingRect) {\n  // Set rect to center, keep width / height ratio.\n  var aspect = boundingRect.width / boundingRect.height;\n  var width = rect.height * aspect;\n  var height;\n  if (width <= rect.width) {\n    height = rect.height;\n  } else {\n    width = rect.width;\n    height = width / aspect;\n  }\n  var cx = rect.x + rect.width / 2;\n  var cy = rect.y + rect.height / 2;\n  return {\n    x: cx - width / 2,\n    y: cy - height / 2,\n    width: width,\n    height: height\n  };\n}\nexport var mergePath = pathTool.mergePath;\n/**\n * Resize a path to fit the rect\n * @param path\n * @param rect\n */\nexport function resizePath(path, rect) {\n  if (!path.applyTransform) {\n    return;\n  }\n  var pathRect = path.getBoundingRect();\n  var m = pathRect.calculateTransform(rect);\n  path.applyTransform(m);\n}\n/**\n * Sub pixel optimize line for canvas\n */\nexport function subPixelOptimizeLine(shape, lineWidth) {\n  subPixelOptimizeUtil.subPixelOptimizeLine(shape, shape, {\n    lineWidth: lineWidth\n  });\n  return shape;\n}\n/**\n * Sub pixel optimize rect for canvas\n */\nexport function subPixelOptimizeRect(shape, style) {\n  subPixelOptimizeUtil.subPixelOptimizeRect(shape, shape, style);\n  return shape;\n}\n/**\n * Sub pixel optimize for canvas\n *\n * @param position Coordinate, such as x, y\n * @param lineWidth Should be nonnegative integer.\n * @param positiveOrNegative Default false (negative).\n * @return Optimized position.\n */\nexport var subPixelOptimize = subPixelOptimizeUtil.subPixelOptimize;\n/**\n * Get transform matrix of target (param target),\n * in coordinate of its ancestor (param ancestor)\n *\n * @param target\n * @param [ancestor]\n */\nexport function getTransform(target, ancestor) {\n  var mat = matrix.identity([]);\n  while (target && target !== ancestor) {\n    matrix.mul(mat, target.getLocalTransform(), mat);\n    target = target.parent;\n  }\n  return mat;\n}\n/**\n * Apply transform to an vertex.\n * @param target [x, y]\n * @param transform Can be:\n *      + Transform matrix: like [1, 0, 0, 1, 0, 0]\n *      + {position, rotation, scale}, the same as `zrender/Transformable`.\n * @param invert Whether use invert matrix.\n * @return [x, y]\n */\nexport function applyTransform(target, transform, invert) {\n  if (transform && !isArrayLike(transform)) {\n    transform = Transformable.getLocalTransform(transform);\n  }\n  if (invert) {\n    transform = matrix.invert([], transform);\n  }\n  return vector.applyTransform([], target, transform);\n}\n/**\n * @param direction 'left' 'right' 'top' 'bottom'\n * @param transform Transform matrix: like [1, 0, 0, 1, 0, 0]\n * @param invert Whether use invert matrix.\n * @return Transformed direction. 'left' 'right' 'top' 'bottom'\n */\nexport function transformDirection(direction, transform, invert) {\n  // Pick a base, ensure that transform result will not be (0, 0).\n  var hBase = transform[4] === 0 || transform[5] === 0 || transform[0] === 0 ? 1 : mathAbs(2 * transform[4] / transform[0]);\n  var vBase = transform[4] === 0 || transform[5] === 0 || transform[2] === 0 ? 1 : mathAbs(2 * transform[4] / transform[2]);\n  var vertex = [direction === 'left' ? -hBase : direction === 'right' ? hBase : 0, direction === 'top' ? -vBase : direction === 'bottom' ? vBase : 0];\n  vertex = applyTransform(vertex, transform, invert);\n  return mathAbs(vertex[0]) > mathAbs(vertex[1]) ? vertex[0] > 0 ? 'right' : 'left' : vertex[1] > 0 ? 'bottom' : 'top';\n}\nfunction isNotGroup(el) {\n  return !el.isGroup;\n}\nfunction isPath(el) {\n  return el.shape != null;\n}\n/**\n * Apply group transition animation from g1 to g2.\n * If no animatableModel, no animation.\n */\nexport function groupTransition(g1, g2, animatableModel) {\n  if (!g1 || !g2) {\n    return;\n  }\n  function getElMap(g) {\n    var elMap = {};\n    g.traverse(function (el) {\n      if (isNotGroup(el) && el.anid) {\n        elMap[el.anid] = el;\n      }\n    });\n    return elMap;\n  }\n  function getAnimatableProps(el) {\n    var obj = {\n      x: el.x,\n      y: el.y,\n      rotation: el.rotation\n    };\n    if (isPath(el)) {\n      obj.shape = clone(el.shape);\n    }\n    return obj;\n  }\n  var elMap1 = getElMap(g1);\n  g2.traverse(function (el) {\n    if (isNotGroup(el) && el.anid) {\n      var oldEl = elMap1[el.anid];\n      if (oldEl) {\n        var newProp = getAnimatableProps(el);\n        el.attr(getAnimatableProps(oldEl));\n        updateProps(el, newProp, animatableModel, getECData(el).dataIndex);\n      }\n    }\n  });\n}\nexport function clipPointsByRect(points, rect) {\n  // FIXME: This way might be incorrect when graphic clipped by a corner\n  // and when element has a border.\n  return map(points, function (point) {\n    var x = point[0];\n    x = mathMax(x, rect.x);\n    x = mathMin(x, rect.x + rect.width);\n    var y = point[1];\n    y = mathMax(y, rect.y);\n    y = mathMin(y, rect.y + rect.height);\n    return [x, y];\n  });\n}\n/**\n * Return a new clipped rect. If rect size are negative, return undefined.\n */\nexport function clipRectByRect(targetRect, rect) {\n  var x = mathMax(targetRect.x, rect.x);\n  var x2 = mathMin(targetRect.x + targetRect.width, rect.x + rect.width);\n  var y = mathMax(targetRect.y, rect.y);\n  var y2 = mathMin(targetRect.y + targetRect.height, rect.y + rect.height);\n  // If the total rect is cliped, nothing, including the border,\n  // should be painted. So return undefined.\n  if (x2 >= x && y2 >= y) {\n    return {\n      x: x,\n      y: y,\n      width: x2 - x,\n      height: y2 - y\n    };\n  }\n}\nexport function createIcon(iconStr,\n// Support 'image://' or 'path://' or direct svg path.\nopt, rect) {\n  var innerOpts = extend({\n    rectHover: true\n  }, opt);\n  var style = innerOpts.style = {\n    strokeNoScale: true\n  };\n  rect = rect || {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  };\n  if (iconStr) {\n    return iconStr.indexOf('image://') === 0 ? (style.image = iconStr.slice(8), defaults(style, rect), new ZRImage(innerOpts)) : makePath(iconStr.replace('path://', ''), innerOpts, rect, 'center');\n  }\n}\n/**\n * Return `true` if the given line (line `a`) and the given polygon\n * are intersect.\n * Note that we do not count colinear as intersect here because no\n * requirement for that. We could do that if required in future.\n */\nexport function linePolygonIntersect(a1x, a1y, a2x, a2y, points) {\n  for (var i = 0, p2 = points[points.length - 1]; i < points.length; i++) {\n    var p = points[i];\n    if (lineLineIntersect(a1x, a1y, a2x, a2y, p[0], p[1], p2[0], p2[1])) {\n      return true;\n    }\n    p2 = p;\n  }\n}\n/**\n * Return `true` if the given two lines (line `a` and line `b`)\n * are intersect.\n * Note that we do not count colinear as intersect here because no\n * requirement for that. We could do that if required in future.\n */\nexport function lineLineIntersect(a1x, a1y, a2x, a2y, b1x, b1y, b2x, b2y) {\n  // let `vec_m` to be `vec_a2 - vec_a1` and `vec_n` to be `vec_b2 - vec_b1`.\n  var mx = a2x - a1x;\n  var my = a2y - a1y;\n  var nx = b2x - b1x;\n  var ny = b2y - b1y;\n  // `vec_m` and `vec_n` are parallel iff\n  //     existing `k` such that `vec_m = k  vec_n`, equivalent to `vec_m X vec_n = 0`.\n  var nmCrossProduct = crossProduct2d(nx, ny, mx, my);\n  if (nearZero(nmCrossProduct)) {\n    return false;\n  }\n  // `vec_m` and `vec_n` are intersect iff\n  //     existing `p` and `q` in [0, 1] such that `vec_a1 + p * vec_m = vec_b1 + q * vec_n`,\n  //     such that `q = ((vec_a1 - vec_b1) X vec_m) / (vec_n X vec_m)`\n  //           and `p = ((vec_a1 - vec_b1) X vec_n) / (vec_n X vec_m)`.\n  var b1a1x = a1x - b1x;\n  var b1a1y = a1y - b1y;\n  var q = crossProduct2d(b1a1x, b1a1y, mx, my) / nmCrossProduct;\n  if (q < 0 || q > 1) {\n    return false;\n  }\n  var p = crossProduct2d(b1a1x, b1a1y, nx, ny) / nmCrossProduct;\n  if (p < 0 || p > 1) {\n    return false;\n  }\n  return true;\n}\n/**\n * Cross product of 2-dimension vector.\n */\nfunction crossProduct2d(x1, y1, x2, y2) {\n  return x1 * y2 - x2 * y1;\n}\nfunction nearZero(val) {\n  return val <= 1e-6 && val >= -1e-6;\n}\n/**\n * NOTE:\n *  A negative-width/height rect (due to negative margins) is not supported;\n *  it will be clampped to zero width/height.\n *  Although negative-width/height rects can be defined reasonably following the\n *  similar sense in CSS, but they are rarely used, hard to understand and complicated.\n *\n * @param rect Assume its width/height >= 0 if existing.\n *  x/y/width/height is allowed to be NaN,\n *  for the case that only x/width or y/height is intended to be computed.\n * @param delta\n *  If be `number[]`, should be `[top, right, bottom, left]`,\n *      which can be used in padding or margin case.\n *      @see `normalizeCssArray` in `util/format.ts`\n *  If be `number`, it means [delta, delta, delta, delta],\n *      which can be used in lineWidth (borderWith) case,\n *      [NOTICE]: commonly pass lineWidth / 2, following the convention that border is\n *      half inside half outside of the rect.\n * @param shrinkOrExpand\n *  `true` - shrink if `delta[i]` is positive, commmonly used in `padding` case.\n *  `false` - expand if `delta[i]` is positive, commmonly used in `margin` case. (default)\n * @param noNegative\n *  `true` - negative `delta[i]` will be clampped to 0.\n *  `false` - No clamp to `delta`. (default).\n * @return The input `rect`.\n */\nexport function expandOrShrinkRect(rect, delta, shrinkOrExpand, noNegative, minSize // by default [0, 0].\n) {\n  if (delta == null) {\n    return rect;\n  } else if (isNumber(delta)) {\n    _tmpExpandRectDelta[0] = _tmpExpandRectDelta[1] = _tmpExpandRectDelta[2] = _tmpExpandRectDelta[3] = delta;\n  } else {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(delta.length === 4);\n    }\n    _tmpExpandRectDelta[0] = delta[0];\n    _tmpExpandRectDelta[1] = delta[1];\n    _tmpExpandRectDelta[2] = delta[2];\n    _tmpExpandRectDelta[3] = delta[3];\n  }\n  if (noNegative) {\n    _tmpExpandRectDelta[0] = mathMax(0, _tmpExpandRectDelta[0]);\n    _tmpExpandRectDelta[1] = mathMax(0, _tmpExpandRectDelta[1]);\n    _tmpExpandRectDelta[2] = mathMax(0, _tmpExpandRectDelta[2]);\n    _tmpExpandRectDelta[3] = mathMax(0, _tmpExpandRectDelta[3]);\n  }\n  if (shrinkOrExpand) {\n    _tmpExpandRectDelta[0] = -_tmpExpandRectDelta[0];\n    _tmpExpandRectDelta[1] = -_tmpExpandRectDelta[1];\n    _tmpExpandRectDelta[2] = -_tmpExpandRectDelta[2];\n    _tmpExpandRectDelta[3] = -_tmpExpandRectDelta[3];\n  }\n  expandRectOnOneDimension(rect, _tmpExpandRectDelta, 'x', 'width', 3, 1, minSize && minSize[0] || 0);\n  expandRectOnOneDimension(rect, _tmpExpandRectDelta, 'y', 'height', 0, 2, minSize && minSize[1] || 0);\n  return rect;\n}\nvar _tmpExpandRectDelta = [0, 0, 0, 0];\nfunction expandRectOnOneDimension(rect, delta, xy, wh, ltIdx, rbIdx, minSize) {\n  var deltaSum = delta[rbIdx] + delta[ltIdx];\n  var oldSize = rect[wh];\n  rect[wh] += deltaSum;\n  minSize = mathMax(0, mathMin(minSize, oldSize));\n  if (rect[wh] < minSize) {\n    rect[wh] = minSize;\n    // Try to make the position of the zero rect reasonable in most visual cases.\n    rect[xy] += delta[ltIdx] >= 0 ? -delta[ltIdx] : delta[rbIdx] >= 0 ? oldSize + delta[rbIdx] : mathAbs(deltaSum) > 1e-8 ? (oldSize - minSize) * delta[ltIdx] / deltaSum : 0;\n  } else {\n    rect[xy] -= delta[ltIdx];\n  }\n}\nexport function setTooltipConfig(opt) {\n  var itemTooltipOption = opt.itemTooltipOption;\n  var componentModel = opt.componentModel;\n  var itemName = opt.itemName;\n  var itemTooltipOptionObj = isString(itemTooltipOption) ? {\n    formatter: itemTooltipOption\n  } : itemTooltipOption;\n  var mainType = componentModel.mainType;\n  var componentIndex = componentModel.componentIndex;\n  var formatterParams = {\n    componentType: mainType,\n    name: itemName,\n    $vars: ['name']\n  };\n  formatterParams[mainType + 'Index'] = componentIndex;\n  var formatterParamsExtra = opt.formatterParamsExtra;\n  if (formatterParamsExtra) {\n    each(keys(formatterParamsExtra), function (key) {\n      if (!hasOwn(formatterParams, key)) {\n        formatterParams[key] = formatterParamsExtra[key];\n        formatterParams.$vars.push(key);\n      }\n    });\n  }\n  var ecData = getECData(opt.el);\n  ecData.componentMainType = mainType;\n  ecData.componentIndex = componentIndex;\n  ecData.tooltipConfig = {\n    name: itemName,\n    option: defaults({\n      content: itemName,\n      encodeHTMLContent: true,\n      formatterParams: formatterParams\n    }, itemTooltipOptionObj)\n  };\n}\nfunction traverseElement(el, cb) {\n  var stopped;\n  // TODO\n  // Polyfill for fixing zrender group traverse don't visit it's root issue.\n  if (el.isGroup) {\n    stopped = cb(el);\n  }\n  if (!stopped) {\n    el.traverse(cb);\n  }\n}\nexport function traverseElements(els, cb) {\n  if (els) {\n    if (isArray(els)) {\n      for (var i = 0; i < els.length; i++) {\n        traverseElement(els[i], cb);\n      }\n    } else {\n      traverseElement(els, cb);\n    }\n  }\n}\n/**\n * After a boundingRect applying a `transform`, whether to be still parallel screen X and Y.\n */\nexport function isBoundingRectAxisAligned(transform) {\n  return !transform || mathAbs(transform[1]) < AXIS_ALIGN_EPSILON && mathAbs(transform[2]) < AXIS_ALIGN_EPSILON || mathAbs(transform[0]) < AXIS_ALIGN_EPSILON && mathAbs(transform[3]) < AXIS_ALIGN_EPSILON;\n}\nvar AXIS_ALIGN_EPSILON = 1e-5;\n/**\n * Create or copy to the existing bounding rect to avoid modifying `source`.\n *\n * @usage\n *  out.rect = ensureCopyRect(out.rect, sourceRect);\n */\nexport function ensureCopyRect(target, source) {\n  return target ? BoundingRect.copy(target, source) : source.clone();\n}\n/**\n * Create or copy to the existing transform to avoid modifying `source`.\n *\n * [CAUTION]: transform is `NullUndefined` if no transform, following convention of zrender,\n *  and enable to bypass some unnecessary calculation, since in most cases there is no transform.\n *\n * @usage\n *  out.transform = ensureCopyTransform(out.transform, sourceTransform);\n */\nexport function ensureCopyTransform(target, source) {\n  return source ? matrix.copy(target || matrix.create(), source) : undefined;\n}\nexport function retrieveZInfo(model) {\n  return {\n    z: model.get('z') || 0,\n    zlevel: model.get('zlevel') || 0\n  };\n}\n/**\n * Assume all of the elements has the same `z` and `zlevel`.\n */\nexport function calcZ2Range(el) {\n  var max = -Infinity;\n  var min = Infinity;\n  traverseElement(el, function (el) {\n    visitEl(el);\n    visitEl(el.getTextContent());\n    visitEl(el.getTextGuideLine());\n  });\n  function visitEl(el) {\n    if (!el || el.isGroup) {\n      return;\n    }\n    var currentStates = el.currentStates;\n    if (currentStates.length) {\n      for (var idx = 0; idx < currentStates.length; idx++) {\n        calcZ2(el.states[currentStates[idx]]);\n      }\n    }\n    calcZ2(el);\n  }\n  function calcZ2(entity) {\n    if (entity) {\n      var z2 = entity.z2;\n      // Consider z2 may be NullUndefined\n      if (z2 > max) {\n        max = z2;\n      }\n      if (z2 < min) {\n        min = z2;\n      }\n    }\n  }\n  if (min > max) {\n    min = max = 0;\n  }\n  return {\n    min: min,\n    max: max\n  };\n}\nexport function traverseUpdateZ(el, z, zlevel) {\n  doUpdateZ(el, z, zlevel, -Infinity);\n}\nfunction doUpdateZ(el, z, zlevel,\n// FIXME: Ideally all the labels should be above all the glyphs by default,\n//  e.g. in graph, edge labels should be above node elements.\n//  Currently impl does not guarantee that.\nmaxZ2) {\n  // `ignoreModelZ` is used to intentionally lift elements to cover other elements,\n  // where maxZ2 (for label.z2) should also not be counted for its parents.\n  if (el.ignoreModelZ) {\n    return maxZ2;\n  }\n  // Group may also have textContent\n  var label = el.getTextContent();\n  var labelLine = el.getTextGuideLine();\n  var isGroup = el.isGroup;\n  if (isGroup) {\n    // set z & zlevel of children elements of Group\n    var children = el.childrenRef();\n    for (var i = 0; i < children.length; i++) {\n      maxZ2 = mathMax(doUpdateZ(children[i], z, zlevel, maxZ2), maxZ2);\n    }\n  } else {\n    // not Group\n    el.z = z;\n    el.zlevel = zlevel;\n    maxZ2 = mathMax(el.z2 || 0, maxZ2);\n  }\n  // always set z and zlevel if label/labelLine exists\n  if (label) {\n    label.z = z;\n    label.zlevel = zlevel;\n    // lift z2 of text content\n    // TODO if el.emphasis.z2 is spcefied, what about textContent.\n    isFinite(maxZ2) && (label.z2 = maxZ2 + 2);\n  }\n  if (labelLine) {\n    var textGuideLineConfig = el.textGuideLineConfig;\n    labelLine.z = z;\n    labelLine.zlevel = zlevel;\n    isFinite(maxZ2) && (labelLine.z2 = maxZ2 + (textGuideLineConfig && textGuideLineConfig.showAbove ? 1 : -1));\n  }\n  return maxZ2;\n}\n// Register built-in shapes. These shapes might be overwritten\n// by users, although we do not recommend that.\nregisterShape('circle', Circle);\nregisterShape('ellipse', Ellipse);\nregisterShape('sector', Sector);\nregisterShape('ring', Ring);\nregisterShape('polygon', Polygon);\nregisterShape('polyline', Polyline);\nregisterShape('rect', Rect);\nregisterShape('line', Line);\nregisterShape('bezierCurve', BezierCurve);\nregisterShape('arc', Arc);\nexport { Group, ZRImage as Image, ZRText as Text, Circle, Ellipse, Sector, Ring, Polygon, Polyline, Rect, Line, BezierCurve, Arc, IncrementalDisplayable, CompoundPath, LinearGradient, RadialGradient, BoundingRect, OrientedBoundingRect, Point, Path };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport { isFunction, retrieve2, extend, keys, trim, retrieve3, isNumber, normalizeCssArray } from 'zrender/lib/core/util.js';\nimport { SPECIAL_STATES, DISPLAY_STATES } from '../util/states.js';\nimport { deprecateReplaceLog } from '../util/log.js';\nimport { makeInner, interpolateRawValues } from '../util/model.js';\nimport { initProps, updateProps } from '../util/graphic.js';\nvar EMPTY_OBJ = {};\nexport function setLabelText(label, labelTexts) {\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    var text = labelTexts[stateName];\n    var state = label.ensureState(stateName);\n    state.style = state.style || {};\n    state.style.text = text;\n  }\n  var oldStates = label.currentStates.slice();\n  label.clearStates(true);\n  label.setStyle({\n    text: labelTexts.normal\n  });\n  label.useStates(oldStates, true);\n}\nfunction getLabelText(opt, stateModels, interpolatedValue) {\n  var labelFetcher = opt.labelFetcher;\n  var labelDataIndex = opt.labelDataIndex;\n  var labelDimIndex = opt.labelDimIndex;\n  var normalModel = stateModels.normal;\n  var baseText;\n  if (labelFetcher) {\n    baseText = labelFetcher.getFormattedLabel(labelDataIndex, 'normal', null, labelDimIndex, normalModel && normalModel.get('formatter'), interpolatedValue != null ? {\n      interpolatedValue: interpolatedValue\n    } : null);\n  }\n  if (baseText == null) {\n    baseText = isFunction(opt.defaultText) ? opt.defaultText(labelDataIndex, opt, interpolatedValue) : opt.defaultText;\n  }\n  var statesText = {\n    normal: baseText\n  };\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    var stateModel = stateModels[stateName];\n    statesText[stateName] = retrieve2(labelFetcher ? labelFetcher.getFormattedLabel(labelDataIndex, stateName, null, labelDimIndex, stateModel && stateModel.get('formatter')) : null, baseText);\n  }\n  return statesText;\n}\nfunction setLabelStyle(targetEl, labelStatesModels, opt, stateSpecified\n// TODO specified position?\n) {\n  opt = opt || EMPTY_OBJ;\n  var isSetOnText = targetEl instanceof ZRText;\n  var needsCreateText = false;\n  for (var i = 0; i < DISPLAY_STATES.length; i++) {\n    var stateModel = labelStatesModels[DISPLAY_STATES[i]];\n    if (stateModel && stateModel.getShallow('show')) {\n      needsCreateText = true;\n      break;\n    }\n  }\n  var textContent = isSetOnText ? targetEl : targetEl.getTextContent();\n  if (needsCreateText) {\n    if (!isSetOnText) {\n      // Reuse the previous\n      if (!textContent) {\n        textContent = new ZRText();\n        targetEl.setTextContent(textContent);\n      }\n      // Use same state proxy\n      if (targetEl.stateProxy) {\n        textContent.stateProxy = targetEl.stateProxy;\n      }\n    }\n    var labelStatesTexts = getLabelText(opt, labelStatesModels);\n    var normalModel = labelStatesModels.normal;\n    var showNormal = !!normalModel.getShallow('show');\n    var normalStyle = createTextStyle(normalModel, stateSpecified && stateSpecified.normal, opt, false, !isSetOnText);\n    normalStyle.text = labelStatesTexts.normal;\n    if (!isSetOnText) {\n      // Always create new\n      targetEl.setTextConfig(createTextConfig(normalModel, opt, false));\n    }\n    for (var i = 0; i < SPECIAL_STATES.length; i++) {\n      var stateName = SPECIAL_STATES[i];\n      var stateModel = labelStatesModels[stateName];\n      if (stateModel) {\n        var stateObj = textContent.ensureState(stateName);\n        var stateShow = !!retrieve2(stateModel.getShallow('show'), showNormal);\n        if (stateShow !== showNormal) {\n          stateObj.ignore = !stateShow;\n        }\n        stateObj.style = createTextStyle(stateModel, stateSpecified && stateSpecified[stateName], opt, true, !isSetOnText);\n        stateObj.style.text = labelStatesTexts[stateName];\n        if (!isSetOnText) {\n          var targetElEmphasisState = targetEl.ensureState(stateName);\n          targetElEmphasisState.textConfig = createTextConfig(stateModel, opt, true);\n        }\n      }\n    }\n    // PENDING: if there is many requirements that emphasis position\n    // need to be different from normal position, we might consider\n    // auto silent is those cases.\n    textContent.silent = !!normalModel.getShallow('silent');\n    // Keep x and y\n    if (textContent.style.x != null) {\n      normalStyle.x = textContent.style.x;\n    }\n    if (textContent.style.y != null) {\n      normalStyle.y = textContent.style.y;\n    }\n    textContent.ignore = !showNormal;\n    // Always create new style.\n    textContent.useStyle(normalStyle);\n    textContent.dirty();\n    if (opt.enableTextSetter) {\n      labelInner(textContent).setLabelText = function (interpolatedValue) {\n        var labelStatesTexts = getLabelText(opt, labelStatesModels, interpolatedValue);\n        setLabelText(textContent, labelStatesTexts);\n      };\n    }\n  } else if (textContent) {\n    // Not display rich text.\n    textContent.ignore = true;\n  }\n  targetEl.dirty();\n}\nexport { setLabelStyle };\nexport function getLabelStatesModels(itemModel, labelName) {\n  labelName = labelName || 'label';\n  var statesModels = {\n    normal: itemModel.getModel(labelName)\n  };\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    statesModels[stateName] = itemModel.getModel([stateName, labelName]);\n  }\n  return statesModels;\n}\n/**\n * Set basic textStyle properties.\n */\nexport function createTextStyle(textStyleModel, specifiedTextStyle,\n// Fixed style in the code. Can't be set by model.\nopt, isNotNormal, isAttached // If text is attached on an element. If so, auto color will handling in zrender.\n) {\n  var textStyle = {};\n  setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached);\n  specifiedTextStyle && extend(textStyle, specifiedTextStyle);\n  // textStyle.host && textStyle.host.dirty && textStyle.host.dirty(false);\n  return textStyle;\n}\nexport function createTextConfig(textStyleModel, opt, isNotNormal) {\n  opt = opt || {};\n  var textConfig = {};\n  var labelPosition;\n  var labelRotate = textStyleModel.getShallow('rotate');\n  var labelDistance = retrieve2(textStyleModel.getShallow('distance'), isNotNormal ? null : 5);\n  var labelOffset = textStyleModel.getShallow('offset');\n  labelPosition = textStyleModel.getShallow('position') || (isNotNormal ? null : 'inside');\n  // 'outside' is not a valid zr textPostion value, but used\n  // in bar series, and magic type should be considered.\n  labelPosition === 'outside' && (labelPosition = opt.defaultOutsidePosition || 'top');\n  if (labelPosition != null) {\n    textConfig.position = labelPosition;\n  }\n  if (labelOffset != null) {\n    textConfig.offset = labelOffset;\n  }\n  if (labelRotate != null) {\n    labelRotate *= Math.PI / 180;\n    textConfig.rotation = labelRotate;\n  }\n  if (labelDistance != null) {\n    textConfig.distance = labelDistance;\n  }\n  // fill and auto is determined by the color of path fill if it's not specified by developers.\n  textConfig.outsideFill = textStyleModel.get('color') === 'inherit' ? opt.inheritColor || null : 'auto';\n  if (opt.autoOverflowArea != null) {\n    textConfig.autoOverflowArea = opt.autoOverflowArea;\n  }\n  if (opt.layoutRect != null) {\n    textConfig.layoutRect = opt.layoutRect;\n  }\n  return textConfig;\n}\n/**\n * The uniform entry of set text style, that is, retrieve style definitions\n * from `model` and set to `textStyle` object.\n *\n * Never in merge mode, but in overwrite mode, that is, all of the text style\n * properties will be set. (Consider the states of normal and emphasis and\n * default value can be adopted, merge would make the logic too complicated\n * to manage.)\n */\nfunction setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached) {\n  // Consider there will be abnormal when merge hover style to normal style if given default value.\n  opt = opt || EMPTY_OBJ;\n  var ecModel = textStyleModel.ecModel;\n  var globalTextStyle = ecModel && ecModel.option.textStyle;\n  // Consider case:\n  // {\n  //     data: [{\n  //         value: 12,\n  //         label: {\n  //             rich: {\n  //                 // no 'a' here but using parent 'a'.\n  //             }\n  //         }\n  //     }],\n  //     rich: {\n  //         a: { ... }\n  //     }\n  // }\n  var richItemNames = getRichItemNames(textStyleModel);\n  var richResult;\n  if (richItemNames) {\n    richResult = {};\n    var richInheritPlainLabelOptionName = 'richInheritPlainLabel';\n    var richInheritPlainLabel = retrieve2(textStyleModel.get(richInheritPlainLabelOptionName), ecModel ? ecModel.get(richInheritPlainLabelOptionName) : undefined);\n    for (var name_1 in richItemNames) {\n      if (richItemNames.hasOwnProperty(name_1)) {\n        // Cascade is supported in rich.\n        var richTextStyle = textStyleModel.getModel(['rich', name_1]);\n        // In rich, never `disableBox`.\n        // consider `label: {formatter: '{a|xx}', color: 'blue', rich: {a: {}}}`,\n        // the default color `'blue'` will not be adopted if no color declared in `rich`.\n        // That might confuses users. So probably we should put `textStyleModel` as the\n        // root ancestor of the `richTextStyle`. But that would be a break change.\n        // Since v6, the rich style inherits plain label by default\n        // but this behavior can be disabled by setting `richInheritPlainLabel` to `false`.\n        setTokenTextStyle(richResult[name_1] = {}, richTextStyle, globalTextStyle, textStyleModel, richInheritPlainLabel, opt, isNotNormal, isAttached, false, true);\n      }\n    }\n  }\n  if (richResult) {\n    textStyle.rich = richResult;\n  }\n  var overflow = textStyleModel.get('overflow');\n  if (overflow) {\n    textStyle.overflow = overflow;\n  }\n  var lineOverflow = textStyleModel.get('lineOverflow');\n  if (lineOverflow) {\n    textStyle.lineOverflow = lineOverflow;\n  }\n  var labelTextStyle = textStyle;\n  // `minMargin` has a higher precedence than `textMargin`, because `textMargin` is allowed\n  // to be set in `defaultOption`.\n  var minMargin = textStyleModel.get('minMargin');\n  if (minMargin != null) {\n    // `minMargin` only support number value.\n    minMargin = !isNumber(minMargin) ? 0 : minMargin / 2;\n    labelTextStyle.margin = [minMargin, minMargin, minMargin, minMargin];\n    labelTextStyle.__marginType = LabelMarginType.minMargin;\n  } else {\n    var textMargin = textStyleModel.get('textMargin');\n    if (textMargin != null) {\n      labelTextStyle.margin = normalizeCssArray(textMargin);\n      labelTextStyle.__marginType = LabelMarginType.textMargin;\n    }\n  }\n  setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, null, null, opt, isNotNormal, isAttached, true, false);\n}\n// Consider case:\n// {\n//     data: [{\n//         value: 12,\n//         label: {\n//             rich: {\n//                 // no 'a' here but using parent 'a'.\n//             }\n//         }\n//     }],\n//     rich: {\n//         a: { ... }\n//     }\n// }\n// TODO TextStyleModel\nfunction getRichItemNames(textStyleModel) {\n  // Use object to remove duplicated names.\n  var richItemNameMap;\n  while (textStyleModel && textStyleModel !== textStyleModel.ecModel) {\n    var rich = (textStyleModel.option || EMPTY_OBJ).rich;\n    if (rich) {\n      richItemNameMap = richItemNameMap || {};\n      var richKeys = keys(rich);\n      for (var i = 0; i < richKeys.length; i++) {\n        var richKey = richKeys[i];\n        richItemNameMap[richKey] = 1;\n      }\n    }\n    textStyleModel = textStyleModel.parentModel;\n  }\n  return richItemNameMap;\n}\nvar TEXT_PROPS_WITH_GLOBAL = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'];\nvar TEXT_PROPS_SELF = ['align', 'lineHeight', 'width', 'height', 'tag', 'verticalAlign', 'ellipsis'];\nvar TEXT_PROPS_BOX = ['padding', 'borderWidth', 'borderRadius', 'borderDashOffset', 'backgroundColor', 'borderColor', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\nfunction setTokenTextStyle(textStyle,\n// FIXME: check/refactor for ellipsis handling of rich text.\ntextStyleModel, globalTextStyle, plainTextModel, richInheritPlainLabel, opt, isNotNormal, isAttached, isBlock, inRich) {\n  // In merge mode, default value should not be given.\n  globalTextStyle = !isNotNormal && globalTextStyle || EMPTY_OBJ;\n  var inheritColor = opt && opt.inheritColor;\n  var fillColor = textStyleModel.getShallow('color');\n  var strokeColor = textStyleModel.getShallow('textBorderColor');\n  var opacity = retrieve2(textStyleModel.getShallow('opacity'), globalTextStyle.opacity);\n  if (fillColor === 'inherit' || fillColor === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      if (fillColor === 'auto') {\n        deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\n      }\n    }\n    if (inheritColor) {\n      fillColor = inheritColor;\n    } else {\n      fillColor = null;\n    }\n  }\n  if (strokeColor === 'inherit' || strokeColor === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      if (strokeColor === 'auto') {\n        deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\n      }\n    }\n    if (inheritColor) {\n      strokeColor = inheritColor;\n    } else {\n      strokeColor = null;\n    }\n  }\n  if (!isAttached) {\n    // Only use default global textStyle.color if text is individual.\n    // Otherwise it will use the strategy of attached text color because text may be on a path.\n    fillColor = fillColor || globalTextStyle.color;\n    strokeColor = strokeColor || globalTextStyle.textBorderColor;\n  }\n  if (fillColor != null) {\n    // Might not be a string, e.g, it's a function in axisLabel case; but assume that it will\n    // be erased by a correct value outside.\n    textStyle.fill = fillColor;\n  }\n  if (strokeColor != null) {\n    textStyle.stroke = strokeColor;\n  }\n  var textBorderWidth = retrieve2(textStyleModel.getShallow('textBorderWidth'), globalTextStyle.textBorderWidth);\n  if (textBorderWidth != null) {\n    textStyle.lineWidth = textBorderWidth;\n  }\n  var textBorderType = retrieve2(textStyleModel.getShallow('textBorderType'), globalTextStyle.textBorderType);\n  if (textBorderType != null) {\n    textStyle.lineDash = textBorderType;\n  }\n  var textBorderDashOffset = retrieve2(textStyleModel.getShallow('textBorderDashOffset'), globalTextStyle.textBorderDashOffset);\n  if (textBorderDashOffset != null) {\n    textStyle.lineDashOffset = textBorderDashOffset;\n  }\n  if (!isNotNormal && opacity == null && !inRich) {\n    opacity = opt && opt.defaultOpacity;\n  }\n  if (opacity != null) {\n    textStyle.opacity = opacity;\n  }\n  // TODO\n  if (!isNotNormal && !isAttached) {\n    // Set default finally.\n    if (textStyle.fill == null && opt.inheritColor) {\n      textStyle.fill = opt.inheritColor;\n    }\n  }\n  // Do not use `getFont` here, because merge should be supported, where\n  // part of these properties may be changed in emphasis style, and the\n  // others should remain their original value got from normal style.\n  for (var i = 0; i < TEXT_PROPS_WITH_GLOBAL.length; i++) {\n    var key = TEXT_PROPS_WITH_GLOBAL[i];\n    // props width, height, padding, margin, tag, backgroundColor, borderColor,\n    // borderWidth, borderRadius, shadowColor, shadowBlur, shadowOffsetX, shadowOffsetY\n    // may inappropriate to inherit from plainTextStyle.\n    // And if some props is specified in default options, users may have to reset them one by one.\n    // Therefore, we only allow these props to inherit from plainTextStyle.\n    // `richInheritPlainLabel` is switch for backward compatibility\n    var val = richInheritPlainLabel !== false && plainTextModel ? retrieve3(textStyleModel.getShallow(key), plainTextModel.getShallow(key), globalTextStyle[key]) : retrieve2(textStyleModel.getShallow(key), globalTextStyle[key]);\n    if (val != null) {\n      textStyle[key] = val;\n    }\n  }\n  for (var i = 0; i < TEXT_PROPS_SELF.length; i++) {\n    var key = TEXT_PROPS_SELF[i];\n    var val = textStyleModel.getShallow(key);\n    if (val != null) {\n      textStyle[key] = val;\n    }\n  }\n  if (textStyle.verticalAlign == null) {\n    var baseline = textStyleModel.getShallow('baseline');\n    if (baseline != null) {\n      textStyle.verticalAlign = baseline;\n    }\n  }\n  if (!isBlock || !opt.disableBox) {\n    for (var i = 0; i < TEXT_PROPS_BOX.length; i++) {\n      var key = TEXT_PROPS_BOX[i];\n      var val = textStyleModel.getShallow(key);\n      if (val != null) {\n        textStyle[key] = val;\n      }\n    }\n    var borderType = textStyleModel.getShallow('borderType');\n    if (borderType != null) {\n      textStyle.borderDash = borderType;\n    }\n    if ((textStyle.backgroundColor === 'auto' || textStyle.backgroundColor === 'inherit') && inheritColor) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (textStyle.backgroundColor === 'auto') {\n          deprecateReplaceLog('backgroundColor: \\'auto\\'', 'backgroundColor: \\'inherit\\'');\n        }\n      }\n      textStyle.backgroundColor = inheritColor;\n    }\n    if ((textStyle.borderColor === 'auto' || textStyle.borderColor === 'inherit') && inheritColor) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (textStyle.borderColor === 'auto') {\n          deprecateReplaceLog('borderColor: \\'auto\\'', 'borderColor: \\'inherit\\'');\n        }\n      }\n      textStyle.borderColor = inheritColor;\n    }\n  }\n}\nexport function getFont(opt, ecModel) {\n  var gTextStyleModel = ecModel && ecModel.getModel('textStyle');\n  return trim([\n  // FIXME in node-canvas fontWeight is before fontStyle\n  opt.fontStyle || gTextStyleModel && gTextStyleModel.getShallow('fontStyle') || '', opt.fontWeight || gTextStyleModel && gTextStyleModel.getShallow('fontWeight') || '', (opt.fontSize || gTextStyleModel && gTextStyleModel.getShallow('fontSize') || 12) + 'px', opt.fontFamily || gTextStyleModel && gTextStyleModel.getShallow('fontFamily') || 'sans-serif'].join(' '));\n}\nexport var labelInner = makeInner();\nexport function setLabelValueAnimation(label, labelStatesModels, value, getDefaultText) {\n  if (!label) {\n    return;\n  }\n  var obj = labelInner(label);\n  obj.prevValue = obj.value;\n  obj.value = value;\n  var normalLabelModel = labelStatesModels.normal;\n  obj.valueAnimation = normalLabelModel.get('valueAnimation');\n  if (obj.valueAnimation) {\n    obj.precision = normalLabelModel.get('precision');\n    obj.defaultInterpolatedText = getDefaultText;\n    obj.statesModels = labelStatesModels;\n  }\n}\nexport function animateLabelValue(textEl, dataIndex, data, animatableModel, labelFetcher) {\n  var labelInnerStore = labelInner(textEl);\n  if (!labelInnerStore.valueAnimation || labelInnerStore.prevValue === labelInnerStore.value) {\n    // Value not changed, no new label animation\n    return;\n  }\n  var defaultInterpolatedText = labelInnerStore.defaultInterpolatedText;\n  // Consider the case that being animating, do not use the `obj.value`,\n  // Otherwise it will jump to the `obj.value` when this new animation started.\n  var currValue = retrieve2(labelInnerStore.interpolatedValue, labelInnerStore.prevValue);\n  var targetValue = labelInnerStore.value;\n  function during(percent) {\n    var interpolated = interpolateRawValues(data, labelInnerStore.precision, currValue, targetValue, percent);\n    labelInnerStore.interpolatedValue = percent === 1 ? null : interpolated;\n    var labelText = getLabelText({\n      labelDataIndex: dataIndex,\n      labelFetcher: labelFetcher,\n      defaultText: defaultInterpolatedText ? defaultInterpolatedText(interpolated) : interpolated + ''\n    }, labelInnerStore.statesModels, interpolated);\n    setLabelText(textEl, labelText);\n  }\n  textEl.percent = 0;\n  (labelInnerStore.prevValue == null ? initProps : updateProps)(textEl, {\n    // percent is used to prevent animation from being aborted #15916\n    percent: 1\n  }, animatableModel, dataIndex, null, during);\n}\n/**\n * PENDING: Temporary impl. unify them?\n * @see {LabelCommonOption['textMargin']}\n * @see {LabelCommonOption['minMargin']}\n */\nexport var LabelMarginType = {\n  minMargin: 1,\n  textMargin: 2\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { getFont } from '../../label/labelStyle.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\nvar PATH_COLOR = ['textStyle', 'color'];\nvar textStyleParams = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'padding', 'lineHeight', 'rich', 'width', 'height', 'overflow'];\n// TODO Performance improvement?\nvar tmpText = new ZRText();\nvar TextStyleMixin = /** @class */function () {\n  function TextStyleMixin() {}\n  /**\n   * Get color property or get color from option.textStyle.color\n   */\n  // TODO Callback\n  TextStyleMixin.prototype.getTextColor = function (isEmphasis) {\n    var ecModel = this.ecModel;\n    return this.getShallow('color') || (!isEmphasis && ecModel ? ecModel.get(PATH_COLOR) : null);\n  };\n  /**\n   * Create font string from fontStyle, fontWeight, fontSize, fontFamily\n   * @return {string}\n   */\n  TextStyleMixin.prototype.getFont = function () {\n    return getFont({\n      fontStyle: this.getShallow('fontStyle'),\n      fontWeight: this.getShallow('fontWeight'),\n      fontSize: this.getShallow('fontSize'),\n      fontFamily: this.getShallow('fontFamily')\n    }, this.ecModel);\n  };\n  TextStyleMixin.prototype.getTextRect = function (text) {\n    var style = {\n      text: text,\n      verticalAlign: this.getShallow('verticalAlign') || this.getShallow('baseline')\n    };\n    for (var i = 0; i < textStyleParams.length; i++) {\n      style[textStyleParams[i]] = this.getShallow(textStyleParams[i]);\n    }\n    tmpText.useStyle(style);\n    tmpText.update();\n    return tmpText.getBoundingRect();\n  };\n  return TextStyleMixin;\n}();\n;\nexport default TextStyleMixin;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport makeStyleMapper from './makeStyleMapper.js';\nexport var LINE_STYLE_KEY_MAP = [['lineWidth', 'width'], ['stroke', 'color'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor'], ['lineDash', 'type'], ['lineDashOffset', 'dashOffset'], ['lineCap', 'cap'], ['lineJoin', 'join'], ['miterLimit']\n// Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n// So do not transfer decal directly.\n];\nvar getLineStyle = makeStyleMapper(LINE_STYLE_KEY_MAP);\nvar LineStyleMixin = /** @class */function () {\n  function LineStyleMixin() {}\n  LineStyleMixin.prototype.getLineStyle = function (excludes) {\n    return getLineStyle(this, excludes);\n  };\n  return LineStyleMixin;\n}();\n;\nexport { LineStyleMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport makeStyleMapper from './makeStyleMapper.js';\nexport var ITEM_STYLE_KEY_MAP = [['fill', 'color'], ['stroke', 'borderColor'], ['lineWidth', 'borderWidth'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor'], ['lineDash', 'borderType'], ['lineDashOffset', 'borderDashOffset'], ['lineCap', 'borderCap'], ['lineJoin', 'borderJoin'], ['miterLimit', 'borderMiterLimit']\n// Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n// So do not transfer decal directly.\n];\nvar getItemStyle = makeStyleMapper(ITEM_STYLE_KEY_MAP);\nvar ItemStyleMixin = /** @class */function () {\n  function ItemStyleMixin() {}\n  ItemStyleMixin.prototype.getItemStyle = function (excludes, includes) {\n    return getItemStyle(this, excludes, includes);\n  };\n  return ItemStyleMixin;\n}();\nexport { ItemStyleMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport env from 'zrender/lib/core/env.js';\nimport { enableClassExtend, enableClassCheck } from '../util/clazz.js';\nimport { AreaStyleMixin } from './mixin/areaStyle.js';\nimport TextStyleMixin from './mixin/textStyle.js';\nimport { LineStyleMixin } from './mixin/lineStyle.js';\nimport { ItemStyleMixin } from './mixin/itemStyle.js';\nimport { mixin, clone, merge } from 'zrender/lib/core/util.js';\nvar Model = /** @class */function () {\n  function Model(option, parentModel, ecModel) {\n    this.parentModel = parentModel;\n    this.ecModel = ecModel;\n    this.option = option;\n    // Simple optimization\n    // if (this.init) {\n    //     if (arguments.length <= 4) {\n    //         this.init(option, parentModel, ecModel, extraOpt);\n    //     }\n    //     else {\n    //         this.init.apply(this, arguments);\n    //     }\n    // }\n  }\n  Model.prototype.init = function (option, parentModel, ecModel) {\n    var rest = [];\n    for (var _i = 3; _i < arguments.length; _i++) {\n      rest[_i - 3] = arguments[_i];\n    }\n  };\n  /**\n   * Merge the input option to me.\n   */\n  Model.prototype.mergeOption = function (option, ecModel) {\n    merge(this.option, option, true);\n  };\n  // `path` can be 'a.b.c', so the return value type have to be `ModelOption`\n  // TODO: TYPE strict key check?\n  // get(path: string | string[], ignoreParent?: boolean): ModelOption;\n  Model.prototype.get = function (path, ignoreParent) {\n    if (path == null) {\n      return this.option;\n    }\n    return this._doGet(this.parsePath(path), !ignoreParent && this.parentModel);\n  };\n  Model.prototype.getShallow = function (key, ignoreParent) {\n    var option = this.option;\n    var val = option == null ? option : option[key];\n    if (val == null && !ignoreParent) {\n      var parentModel = this.parentModel;\n      if (parentModel) {\n        // FIXME:TS do not know how to make it works\n        val = parentModel.getShallow(key);\n      }\n    }\n    return val;\n  };\n  // `path` can be 'a.b.c', so the return value type have to be `Model<ModelOption>`\n  // getModel(path: string | string[], parentModel?: Model): Model;\n  // TODO 'a.b.c' is deprecated\n  Model.prototype.getModel = function (path, parentModel) {\n    var hasPath = path != null;\n    var pathFinal = hasPath ? this.parsePath(path) : null;\n    var obj = hasPath ? this._doGet(pathFinal) : this.option;\n    parentModel = parentModel || this.parentModel && this.parentModel.getModel(this.resolveParentPath(pathFinal));\n    return new Model(obj, parentModel, this.ecModel);\n  };\n  /**\n   * If model has option\n   */\n  Model.prototype.isEmpty = function () {\n    return this.option == null;\n  };\n  Model.prototype.restoreData = function () {};\n  // Pending\n  Model.prototype.clone = function () {\n    var Ctor = this.constructor;\n    return new Ctor(clone(this.option));\n  };\n  // setReadOnly(properties): void {\n  // clazzUtil.setReadOnly(this, properties);\n  // }\n  // If path is null/undefined, return null/undefined.\n  Model.prototype.parsePath = function (path) {\n    if (typeof path === 'string') {\n      return path.split('.');\n    }\n    return path;\n  };\n  // Resolve path for parent. Perhaps useful when parent use a different property.\n  // Default to be a identity resolver.\n  // Can be modified to a different resolver.\n  Model.prototype.resolveParentPath = function (path) {\n    return path;\n  };\n  // FIXME:TS check whether put this method here\n  Model.prototype.isAnimationEnabled = function () {\n    if (!env.node && this.option) {\n      if (this.option.animation != null) {\n        return !!this.option.animation;\n      } else if (this.parentModel) {\n        return this.parentModel.isAnimationEnabled();\n      }\n    }\n  };\n  Model.prototype._doGet = function (pathArr, parentModel) {\n    var obj = this.option;\n    if (!pathArr) {\n      return obj;\n    }\n    for (var i = 0; i < pathArr.length; i++) {\n      // Ignore empty\n      if (!pathArr[i]) {\n        continue;\n      }\n      // obj could be number/string/... (like 0)\n      obj = obj && typeof obj === 'object' ? obj[pathArr[i]] : null;\n      if (obj == null) {\n        break;\n      }\n    }\n    if (obj == null && parentModel) {\n      obj = parentModel._doGet(this.resolveParentPath(pathArr), parentModel.parentModel);\n    }\n    return obj;\n  };\n  return Model;\n}();\n;\n// Enable Model.extend.\nenableClassExtend(Model);\nenableClassCheck(Model);\nmixin(Model, LineStyleMixin);\nmixin(Model, ItemStyleMixin);\nmixin(Model, AreaStyleMixin);\nmixin(Model, TextStyleMixin);\nexport default Model;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction dataIndexMapValueLength(valNumOrArrLengthMoreThan2) {\n  return valNumOrArrLengthMoreThan2 == null ? 0 : valNumOrArrLengthMoreThan2.length || 1;\n}\nfunction defaultKeyGetter(item) {\n  return item;\n}\nvar DataDiffer = /** @class */function () {\n  /**\n   * @param context Can be visited by this.context in callback.\n   */\n  function DataDiffer(oldArr, newArr, oldKeyGetter, newKeyGetter, context,\n  // By default: 'oneToOne'.\n  diffMode) {\n    this._old = oldArr;\n    this._new = newArr;\n    this._oldKeyGetter = oldKeyGetter || defaultKeyGetter;\n    this._newKeyGetter = newKeyGetter || defaultKeyGetter;\n    // Visible in callback via `this.context`;\n    this.context = context;\n    this._diffModeMultiple = diffMode === 'multiple';\n  }\n  /**\n   * Callback function when add a data\n   */\n  DataDiffer.prototype.add = function (func) {\n    this._add = func;\n    return this;\n  };\n  /**\n   * Callback function when update a data\n   */\n  DataDiffer.prototype.update = function (func) {\n    this._update = func;\n    return this;\n  };\n  /**\n   * Callback function when update a data and only work in `cbMode: 'byKey'`.\n   */\n  DataDiffer.prototype.updateManyToOne = function (func) {\n    this._updateManyToOne = func;\n    return this;\n  };\n  /**\n   * Callback function when update a data and only work in `cbMode: 'byKey'`.\n   */\n  DataDiffer.prototype.updateOneToMany = function (func) {\n    this._updateOneToMany = func;\n    return this;\n  };\n  /**\n   * Callback function when update a data and only work in `cbMode: 'byKey'`.\n   */\n  DataDiffer.prototype.updateManyToMany = function (func) {\n    this._updateManyToMany = func;\n    return this;\n  };\n  /**\n   * Callback function when remove a data\n   */\n  DataDiffer.prototype.remove = function (func) {\n    this._remove = func;\n    return this;\n  };\n  DataDiffer.prototype.execute = function () {\n    this[this._diffModeMultiple ? '_executeMultiple' : '_executeOneToOne']();\n  };\n  DataDiffer.prototype._executeOneToOne = function () {\n    var oldArr = this._old;\n    var newArr = this._new;\n    var newDataIndexMap = {};\n    var oldDataKeyArr = new Array(oldArr.length);\n    var newDataKeyArr = new Array(newArr.length);\n    this._initIndexMap(oldArr, null, oldDataKeyArr, '_oldKeyGetter');\n    this._initIndexMap(newArr, newDataIndexMap, newDataKeyArr, '_newKeyGetter');\n    for (var i = 0; i < oldArr.length; i++) {\n      var oldKey = oldDataKeyArr[i];\n      var newIdxMapVal = newDataIndexMap[oldKey];\n      var newIdxMapValLen = dataIndexMapValueLength(newIdxMapVal);\n      // idx can never be empty array here. see 'set null' logic below.\n      if (newIdxMapValLen > 1) {\n        // Consider there is duplicate key (for example, use dataItem.name as key).\n        // We should make sure every item in newArr and oldArr can be visited.\n        var newIdx = newIdxMapVal.shift();\n        if (newIdxMapVal.length === 1) {\n          newDataIndexMap[oldKey] = newIdxMapVal[0];\n        }\n        this._update && this._update(newIdx, i);\n      } else if (newIdxMapValLen === 1) {\n        newDataIndexMap[oldKey] = null;\n        this._update && this._update(newIdxMapVal, i);\n      } else {\n        this._remove && this._remove(i);\n      }\n    }\n    this._performRestAdd(newDataKeyArr, newDataIndexMap);\n  };\n  /**\n   * For example, consider the case:\n   * oldData: [o0, o1, o2, o3, o4, o5, o6, o7],\n   * newData: [n0, n1, n2, n3, n4, n5, n6, n7, n8],\n   * Where:\n   *     o0, o1, n0 has key 'a' (many to one)\n   *     o5, n4, n5, n6 has key 'b' (one to many)\n   *     o2, n1 has key 'c' (one to one)\n   *     n2, n3 has key 'd' (add)\n   *     o3, o4 has key 'e' (remove)\n   *     o6, o7, n7, n8 has key 'f' (many to many, treated as add and remove)\n   * Then:\n   *     (The order of the following directives are not ensured.)\n   *     this._updateManyToOne(n0, [o0, o1]);\n   *     this._updateOneToMany([n4, n5, n6], o5);\n   *     this._update(n1, o2);\n   *     this._remove(o3);\n   *     this._remove(o4);\n   *     this._remove(o6);\n   *     this._remove(o7);\n   *     this._add(n2);\n   *     this._add(n3);\n   *     this._add(n7);\n   *     this._add(n8);\n   */\n  DataDiffer.prototype._executeMultiple = function () {\n    var oldArr = this._old;\n    var newArr = this._new;\n    var oldDataIndexMap = {};\n    var newDataIndexMap = {};\n    var oldDataKeyArr = [];\n    var newDataKeyArr = [];\n    this._initIndexMap(oldArr, oldDataIndexMap, oldDataKeyArr, '_oldKeyGetter');\n    this._initIndexMap(newArr, newDataIndexMap, newDataKeyArr, '_newKeyGetter');\n    for (var i = 0; i < oldDataKeyArr.length; i++) {\n      var oldKey = oldDataKeyArr[i];\n      var oldIdxMapVal = oldDataIndexMap[oldKey];\n      var newIdxMapVal = newDataIndexMap[oldKey];\n      var oldIdxMapValLen = dataIndexMapValueLength(oldIdxMapVal);\n      var newIdxMapValLen = dataIndexMapValueLength(newIdxMapVal);\n      if (oldIdxMapValLen > 1 && newIdxMapValLen === 1) {\n        this._updateManyToOne && this._updateManyToOne(newIdxMapVal, oldIdxMapVal);\n        newDataIndexMap[oldKey] = null;\n      } else if (oldIdxMapValLen === 1 && newIdxMapValLen > 1) {\n        this._updateOneToMany && this._updateOneToMany(newIdxMapVal, oldIdxMapVal);\n        newDataIndexMap[oldKey] = null;\n      } else if (oldIdxMapValLen === 1 && newIdxMapValLen === 1) {\n        this._update && this._update(newIdxMapVal, oldIdxMapVal);\n        newDataIndexMap[oldKey] = null;\n      } else if (oldIdxMapValLen > 1 && newIdxMapValLen > 1) {\n        this._updateManyToMany && this._updateManyToMany(newIdxMapVal, oldIdxMapVal);\n        newDataIndexMap[oldKey] = null;\n      } else if (oldIdxMapValLen > 1) {\n        for (var i_1 = 0; i_1 < oldIdxMapValLen; i_1++) {\n          this._remove && this._remove(oldIdxMapVal[i_1]);\n        }\n      } else {\n        this._remove && this._remove(oldIdxMapVal);\n      }\n    }\n    this._performRestAdd(newDataKeyArr, newDataIndexMap);\n  };\n  DataDiffer.prototype._performRestAdd = function (newDataKeyArr, newDataIndexMap) {\n    for (var i = 0; i < newDataKeyArr.length; i++) {\n      var newKey = newDataKeyArr[i];\n      var newIdxMapVal = newDataIndexMap[newKey];\n      var idxMapValLen = dataIndexMapValueLength(newIdxMapVal);\n      if (idxMapValLen > 1) {\n        for (var j = 0; j < idxMapValLen; j++) {\n          this._add && this._add(newIdxMapVal[j]);\n        }\n      } else if (idxMapValLen === 1) {\n        this._add && this._add(newIdxMapVal);\n      }\n      // Support both `newDataKeyArr` are duplication removed or not removed.\n      newDataIndexMap[newKey] = null;\n    }\n  };\n  DataDiffer.prototype._initIndexMap = function (arr,\n  // Can be null.\n  map,\n  // In 'byKey', the output `keyArr` is duplication removed.\n  // In 'byIndex', the output `keyArr` is not duplication removed and\n  //     its indices are accurately corresponding to `arr`.\n  keyArr, keyGetterName) {\n    var cbModeMultiple = this._diffModeMultiple;\n    for (var i = 0; i < arr.length; i++) {\n      // Add prefix to avoid conflict with Object.prototype.\n      var key = '_ec_' + this[keyGetterName](arr[i], i);\n      if (!cbModeMultiple) {\n        keyArr[i] = key;\n      }\n      if (!map) {\n        continue;\n      }\n      var idxMapVal = map[key];\n      var idxMapValLen = dataIndexMapValueLength(idxMapVal);\n      if (idxMapValLen === 0) {\n        // Simple optimize: in most cases, one index has one key,\n        // do not need array.\n        map[key] = i;\n        if (cbModeMultiple) {\n          keyArr.push(key);\n        }\n      } else if (idxMapValLen === 1) {\n        map[key] = [idxMapVal, i];\n      } else {\n        idxMapVal.push(i);\n      }\n    }\n  };\n  return DataDiffer;\n}();\nexport default DataDiffer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createHashMap } from 'zrender/lib/core/util.js';\n;\n;\n;\nexport var VISUAL_DIMENSIONS = createHashMap(['tooltip', 'label', 'itemName', 'itemId', 'itemGroupId', 'itemChildGroupId', 'seriesName']);\nexport var SOURCE_FORMAT_ORIGINAL = 'original';\nexport var SOURCE_FORMAT_ARRAY_ROWS = 'arrayRows';\nexport var SOURCE_FORMAT_OBJECT_ROWS = 'objectRows';\nexport var SOURCE_FORMAT_KEYED_COLUMNS = 'keyedColumns';\nexport var SOURCE_FORMAT_TYPED_ARRAY = 'typedArray';\nexport var SOURCE_FORMAT_UNKNOWN = 'unknown';\nexport var SERIES_LAYOUT_BY_COLUMN = 'column';\nexport var SERIES_LAYOUT_BY_ROW = 'row';\n;\n;\n;\n;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner, getDataItemValue, queryReferringComponents, SINGLE_REFERRING } from '../../util/model.js';\nimport { createHashMap, each, isArray, isString, isObject, isTypedArray } from 'zrender/lib/core/util.js';\nimport { SOURCE_FORMAT_ORIGINAL, SOURCE_FORMAT_ARRAY_ROWS, SOURCE_FORMAT_OBJECT_ROWS, SERIES_LAYOUT_BY_ROW, SOURCE_FORMAT_KEYED_COLUMNS } from '../../util/types.js';\n// The result of `guessOrdinal`.\nexport var BE_ORDINAL = {\n  Must: 1,\n  Might: 2,\n  Not: 3 // Other cases\n};\nvar innerGlobalModel = makeInner();\n/**\n * MUST be called before mergeOption of all series.\n */\nexport function resetSourceDefaulter(ecModel) {\n  // `datasetMap` is used to make default encode.\n  innerGlobalModel(ecModel).datasetMap = createHashMap();\n}\n/**\n * [The strategy of the arrengment of data dimensions for dataset]:\n * \"value way\": all axes are non-category axes. So series one by one take\n *     several (the number is coordSysDims.length) dimensions from dataset.\n *     The result of data arrengment of data dimensions like:\n *     | ser0_x | ser0_y | ser1_x | ser1_y | ser2_x | ser2_y |\n * \"category way\": at least one axis is category axis. So the the first data\n *     dimension is always mapped to the first category axis and shared by\n *     all of the series. The other data dimensions are taken by series like\n *     \"value way\" does.\n *     The result of data arrengment of data dimensions like:\n *     | ser_shared_x | ser0_y | ser1_y | ser2_y |\n *\n * @return encode Never be `null/undefined`.\n */\nexport function makeSeriesEncodeForAxisCoordSys(coordDimensions, seriesModel, source) {\n  var encode = {};\n  var datasetModel = querySeriesUpstreamDatasetModel(seriesModel);\n  // Currently only make default when using dataset, util more reqirements occur.\n  if (!datasetModel || !coordDimensions) {\n    return encode;\n  }\n  var encodeItemName = [];\n  var encodeSeriesName = [];\n  var ecModel = seriesModel.ecModel;\n  var datasetMap = innerGlobalModel(ecModel).datasetMap;\n  var key = datasetModel.uid + '_' + source.seriesLayoutBy;\n  var baseCategoryDimIndex;\n  var categoryWayValueDimStart;\n  coordDimensions = coordDimensions.slice();\n  each(coordDimensions, function (coordDimInfoLoose, coordDimIdx) {\n    var coordDimInfo = isObject(coordDimInfoLoose) ? coordDimInfoLoose : coordDimensions[coordDimIdx] = {\n      name: coordDimInfoLoose\n    };\n    if (coordDimInfo.type === 'ordinal' && baseCategoryDimIndex == null) {\n      baseCategoryDimIndex = coordDimIdx;\n      categoryWayValueDimStart = getDataDimCountOnCoordDim(coordDimInfo);\n    }\n    encode[coordDimInfo.name] = [];\n  });\n  var datasetRecord = datasetMap.get(key) || datasetMap.set(key, {\n    categoryWayDim: categoryWayValueDimStart,\n    valueWayDim: 0\n  });\n  // TODO\n  // Auto detect first time axis and do arrangement.\n  each(coordDimensions, function (coordDimInfo, coordDimIdx) {\n    var coordDimName = coordDimInfo.name;\n    var count = getDataDimCountOnCoordDim(coordDimInfo);\n    // In value way.\n    if (baseCategoryDimIndex == null) {\n      var start = datasetRecord.valueWayDim;\n      pushDim(encode[coordDimName], start, count);\n      pushDim(encodeSeriesName, start, count);\n      datasetRecord.valueWayDim += count;\n      // ??? TODO give a better default series name rule?\n      // especially when encode x y specified.\n      // consider: when multiple series share one dimension\n      // category axis, series name should better use\n      // the other dimension name. On the other hand, use\n      // both dimensions name.\n    }\n    // In category way, the first category axis.\n    else if (baseCategoryDimIndex === coordDimIdx) {\n      pushDim(encode[coordDimName], 0, count);\n      pushDim(encodeItemName, 0, count);\n    }\n    // In category way, the other axis.\n    else {\n      var start = datasetRecord.categoryWayDim;\n      pushDim(encode[coordDimName], start, count);\n      pushDim(encodeSeriesName, start, count);\n      datasetRecord.categoryWayDim += count;\n    }\n  });\n  function pushDim(dimIdxArr, idxFrom, idxCount) {\n    for (var i = 0; i < idxCount; i++) {\n      dimIdxArr.push(idxFrom + i);\n    }\n  }\n  function getDataDimCountOnCoordDim(coordDimInfo) {\n    var dimsDef = coordDimInfo.dimsDef;\n    return dimsDef ? dimsDef.length : 1;\n  }\n  encodeItemName.length && (encode.itemName = encodeItemName);\n  encodeSeriesName.length && (encode.seriesName = encodeSeriesName);\n  return encode;\n}\n/**\n * Work for data like [{name: ..., value: ...}, ...].\n *\n * @return encode Never be `null/undefined`.\n */\nexport function makeSeriesEncodeForNameBased(seriesModel, source, dimCount) {\n  var encode = {};\n  var datasetModel = querySeriesUpstreamDatasetModel(seriesModel);\n  // Currently only make default when using dataset, util more reqirements occur.\n  if (!datasetModel) {\n    return encode;\n  }\n  var sourceFormat = source.sourceFormat;\n  var dimensionsDefine = source.dimensionsDefine;\n  var potentialNameDimIndex;\n  if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS || sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n    each(dimensionsDefine, function (dim, idx) {\n      if ((isObject(dim) ? dim.name : dim) === 'name') {\n        potentialNameDimIndex = idx;\n      }\n    });\n  }\n  var idxResult = function () {\n    var idxRes0 = {};\n    var idxRes1 = {};\n    var guessRecords = [];\n    // 5 is an experience value.\n    for (var i = 0, len = Math.min(5, dimCount); i < len; i++) {\n      var guessResult = doGuessOrdinal(source.data, sourceFormat, source.seriesLayoutBy, dimensionsDefine, source.startIndex, i);\n      guessRecords.push(guessResult);\n      var isPureNumber = guessResult === BE_ORDINAL.Not;\n      // [Strategy of idxRes0]: find the first BE_ORDINAL.Not as the value dim,\n      // and then find a name dim with the priority:\n      // \"BE_ORDINAL.Might|BE_ORDINAL.Must\" > \"other dim\" > \"the value dim itself\".\n      if (isPureNumber && idxRes0.v == null && i !== potentialNameDimIndex) {\n        idxRes0.v = i;\n      }\n      if (idxRes0.n == null || idxRes0.n === idxRes0.v || !isPureNumber && guessRecords[idxRes0.n] === BE_ORDINAL.Not) {\n        idxRes0.n = i;\n      }\n      if (fulfilled(idxRes0) && guessRecords[idxRes0.n] !== BE_ORDINAL.Not) {\n        return idxRes0;\n      }\n      // [Strategy of idxRes1]: if idxRes0 not satisfied (that is, no BE_ORDINAL.Not),\n      // find the first BE_ORDINAL.Might as the value dim,\n      // and then find a name dim with the priority:\n      // \"other dim\" > \"the value dim itself\".\n      // That is for backward compat: number-like (e.g., `'3'`, `'55'`) can be\n      // treated as number.\n      if (!isPureNumber) {\n        if (guessResult === BE_ORDINAL.Might && idxRes1.v == null && i !== potentialNameDimIndex) {\n          idxRes1.v = i;\n        }\n        if (idxRes1.n == null || idxRes1.n === idxRes1.v) {\n          idxRes1.n = i;\n        }\n      }\n    }\n    function fulfilled(idxResult) {\n      return idxResult.v != null && idxResult.n != null;\n    }\n    return fulfilled(idxRes0) ? idxRes0 : fulfilled(idxRes1) ? idxRes1 : null;\n  }();\n  if (idxResult) {\n    encode.value = [idxResult.v];\n    // `potentialNameDimIndex` has highest priority.\n    var nameDimIndex = potentialNameDimIndex != null ? potentialNameDimIndex : idxResult.n;\n    // By default, label uses itemName in charts.\n    // So we don't set encodeLabel here.\n    encode.itemName = [nameDimIndex];\n    encode.seriesName = [nameDimIndex];\n  }\n  return encode;\n}\n/**\n * @return If return null/undefined, indicate that should not use datasetModel.\n */\nexport function querySeriesUpstreamDatasetModel(seriesModel) {\n  // Caution: consider the scenario:\n  // A dataset is declared and a series is not expected to use the dataset,\n  // and at the beginning `setOption({series: { noData })` (just prepare other\n  // option but no data), then `setOption({series: {data: [...]}); In this case,\n  // the user should set an empty array to avoid that dataset is used by default.\n  var thisData = seriesModel.get('data', true);\n  if (!thisData) {\n    return queryReferringComponents(seriesModel.ecModel, 'dataset', {\n      index: seriesModel.get('datasetIndex', true),\n      id: seriesModel.get('datasetId', true)\n    }, SINGLE_REFERRING).models[0];\n  }\n}\n/**\n * @return Always return an array event empty.\n */\nexport function queryDatasetUpstreamDatasetModels(datasetModel) {\n  // Only these attributes declared, we by default reference to `datasetIndex: 0`.\n  // Otherwise, no reference.\n  if (!datasetModel.get('transform', true) && !datasetModel.get('fromTransformResult', true)) {\n    return [];\n  }\n  return queryReferringComponents(datasetModel.ecModel, 'dataset', {\n    index: datasetModel.get('fromDatasetIndex', true),\n    id: datasetModel.get('fromDatasetId', true)\n  }, SINGLE_REFERRING).models;\n}\n/**\n * The rule should not be complex, otherwise user might not\n * be able to known where the data is wrong.\n * The code is ugly, but how to make it neat?\n */\nexport function guessOrdinal(source, dimIndex) {\n  return doGuessOrdinal(source.data, source.sourceFormat, source.seriesLayoutBy, source.dimensionsDefine, source.startIndex, dimIndex);\n}\n// dimIndex may be overflow source data.\n// return {BE_ORDINAL}\nfunction doGuessOrdinal(data, sourceFormat, seriesLayoutBy, dimensionsDefine, startIndex, dimIndex) {\n  var result;\n  // Experience value.\n  var maxLoop = 5;\n  if (isTypedArray(data)) {\n    return BE_ORDINAL.Not;\n  }\n  // When sourceType is 'objectRows' or 'keyedColumns', dimensionsDefine\n  // always exists in source.\n  var dimName;\n  var dimType;\n  if (dimensionsDefine) {\n    var dimDefItem = dimensionsDefine[dimIndex];\n    if (isObject(dimDefItem)) {\n      dimName = dimDefItem.name;\n      dimType = dimDefItem.type;\n    } else if (isString(dimDefItem)) {\n      dimName = dimDefItem;\n    }\n  }\n  if (dimType != null) {\n    return dimType === 'ordinal' ? BE_ORDINAL.Must : BE_ORDINAL.Not;\n  }\n  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n    var dataArrayRows = data;\n    if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {\n      var sample = dataArrayRows[dimIndex];\n      for (var i = 0; i < (sample || []).length && i < maxLoop; i++) {\n        if ((result = detectValue(sample[startIndex + i])) != null) {\n          return result;\n        }\n      }\n    } else {\n      for (var i = 0; i < dataArrayRows.length && i < maxLoop; i++) {\n        var row = dataArrayRows[startIndex + i];\n        if (row && (result = detectValue(row[dimIndex])) != null) {\n          return result;\n        }\n      }\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n    var dataObjectRows = data;\n    if (!dimName) {\n      return BE_ORDINAL.Not;\n    }\n    for (var i = 0; i < dataObjectRows.length && i < maxLoop; i++) {\n      var item = dataObjectRows[i];\n      if (item && (result = detectValue(item[dimName])) != null) {\n        return result;\n      }\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n    var dataKeyedColumns = data;\n    if (!dimName) {\n      return BE_ORDINAL.Not;\n    }\n    var sample = dataKeyedColumns[dimName];\n    if (!sample || isTypedArray(sample)) {\n      return BE_ORDINAL.Not;\n    }\n    for (var i = 0; i < sample.length && i < maxLoop; i++) {\n      if ((result = detectValue(sample[i])) != null) {\n        return result;\n      }\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n    var dataOriginal = data;\n    for (var i = 0; i < dataOriginal.length && i < maxLoop; i++) {\n      var item = dataOriginal[i];\n      var val = getDataItemValue(item);\n      if (!isArray(val)) {\n        return BE_ORDINAL.Not;\n      }\n      if ((result = detectValue(val[dimIndex])) != null) {\n        return result;\n      }\n    }\n  }\n  function detectValue(val) {\n    var beStr = isString(val);\n    // Consider usage convenience, '1', '2' will be treated as \"number\".\n    // `Number('')` (or any whitespace) is `0`.\n    if (val != null && Number.isFinite(Number(val)) && val !== '') {\n      return beStr ? BE_ORDINAL.Might : BE_ORDINAL.Not;\n    } else if (beStr && val !== '-') {\n      return BE_ORDINAL.Must;\n    }\n  }\n  return BE_ORDINAL.Not;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isTypedArray, clone, createHashMap, isArray, isObject, isArrayLike, hasOwn, assert, each, map, isNumber, isString, keys } from 'zrender/lib/core/util.js';\nimport { SOURCE_FORMAT_ORIGINAL, SERIES_LAYOUT_BY_COLUMN, SOURCE_FORMAT_UNKNOWN, SOURCE_FORMAT_KEYED_COLUMNS, SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ARRAY_ROWS, SOURCE_FORMAT_OBJECT_ROWS, SERIES_LAYOUT_BY_ROW } from '../util/types.js';\nimport { getDataItemValue } from '../util/model.js';\nimport { BE_ORDINAL, guessOrdinal } from './helper/sourceHelper.js';\n;\n// @inner\nvar SourceImpl = /** @class */function () {\n  function SourceImpl(fields) {\n    this.data = fields.data || (fields.sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS ? {} : []);\n    this.sourceFormat = fields.sourceFormat || SOURCE_FORMAT_UNKNOWN;\n    // Visit config\n    this.seriesLayoutBy = fields.seriesLayoutBy || SERIES_LAYOUT_BY_COLUMN;\n    this.startIndex = fields.startIndex || 0;\n    this.dimensionsDetectedCount = fields.dimensionsDetectedCount;\n    this.metaRawOption = fields.metaRawOption;\n    var dimensionsDefine = this.dimensionsDefine = fields.dimensionsDefine;\n    if (dimensionsDefine) {\n      for (var i = 0; i < dimensionsDefine.length; i++) {\n        var dim = dimensionsDefine[i];\n        if (dim.type == null) {\n          if (guessOrdinal(this, i) === BE_ORDINAL.Must) {\n            dim.type = 'ordinal';\n          }\n        }\n      }\n    }\n  }\n  return SourceImpl;\n}();\nexport function isSourceInstance(val) {\n  return val instanceof SourceImpl;\n}\n/**\n * Create a source from option.\n * NOTE: Created source is immutable. Don't change any properties in it.\n */\nexport function createSource(sourceData, thisMetaRawOption,\n// can be null. If not provided, auto detect it from `sourceData`.\nsourceFormat) {\n  sourceFormat = sourceFormat || detectSourceFormat(sourceData);\n  var seriesLayoutBy = thisMetaRawOption.seriesLayoutBy;\n  var determined = determineSourceDimensions(sourceData, sourceFormat, seriesLayoutBy, thisMetaRawOption.sourceHeader, thisMetaRawOption.dimensions);\n  var source = new SourceImpl({\n    data: sourceData,\n    sourceFormat: sourceFormat,\n    seriesLayoutBy: seriesLayoutBy,\n    dimensionsDefine: determined.dimensionsDefine,\n    startIndex: determined.startIndex,\n    dimensionsDetectedCount: determined.dimensionsDetectedCount,\n    metaRawOption: clone(thisMetaRawOption)\n  });\n  return source;\n}\n/**\n * Wrap original series data for some compatibility cases.\n */\nexport function createSourceFromSeriesDataOption(data) {\n  return new SourceImpl({\n    data: data,\n    sourceFormat: isTypedArray(data) ? SOURCE_FORMAT_TYPED_ARRAY : SOURCE_FORMAT_ORIGINAL\n  });\n}\n/**\n * Clone source but excludes source data.\n */\nexport function cloneSourceShallow(source) {\n  return new SourceImpl({\n    data: source.data,\n    sourceFormat: source.sourceFormat,\n    seriesLayoutBy: source.seriesLayoutBy,\n    dimensionsDefine: clone(source.dimensionsDefine),\n    startIndex: source.startIndex,\n    dimensionsDetectedCount: source.dimensionsDetectedCount\n  });\n}\n/**\n * Note: An empty array will be detected as `SOURCE_FORMAT_ARRAY_ROWS`.\n */\nexport function detectSourceFormat(data) {\n  var sourceFormat = SOURCE_FORMAT_UNKNOWN;\n  if (isTypedArray(data)) {\n    sourceFormat = SOURCE_FORMAT_TYPED_ARRAY;\n  } else if (isArray(data)) {\n    // FIXME Whether tolerate null in top level array?\n    if (data.length === 0) {\n      sourceFormat = SOURCE_FORMAT_ARRAY_ROWS;\n    }\n    for (var i = 0, len = data.length; i < len; i++) {\n      var item = data[i];\n      if (item == null) {\n        continue;\n      } else if (isArray(item) || isTypedArray(item)) {\n        sourceFormat = SOURCE_FORMAT_ARRAY_ROWS;\n        break;\n      } else if (isObject(item)) {\n        sourceFormat = SOURCE_FORMAT_OBJECT_ROWS;\n        break;\n      }\n    }\n  } else if (isObject(data)) {\n    for (var key in data) {\n      if (hasOwn(data, key) && isArrayLike(data[key])) {\n        sourceFormat = SOURCE_FORMAT_KEYED_COLUMNS;\n        break;\n      }\n    }\n  }\n  return sourceFormat;\n}\n/**\n * Determine the source definitions from data standalone dimensions definitions\n * are not specified.\n */\nfunction determineSourceDimensions(data, sourceFormat, seriesLayoutBy, sourceHeader,\n// standalone raw dimensions definition, like:\n// {\n//     dimensions: ['aa', 'bb', { name: 'cc', type: 'time' }]\n// }\n// in `dataset` or `series`\ndimensionsDefine) {\n  var dimensionsDetectedCount;\n  var startIndex;\n  // PENDING: Could data be null/undefined here?\n  // currently, if `dataset.source` not specified, error thrown.\n  // if `series.data` not specified, nothing rendered without error thrown.\n  // Should test these cases.\n  if (!data) {\n    return {\n      dimensionsDefine: normalizeDimensionsOption(dimensionsDefine),\n      startIndex: startIndex,\n      dimensionsDetectedCount: dimensionsDetectedCount\n    };\n  }\n  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n    var dataArrayRows = data;\n    // Rule: Most of the first line are string: it is header.\n    // Caution: consider a line with 5 string and 1 number,\n    // it still can not be sure it is a head, because the\n    // 5 string may be 5 values of category columns.\n    if (sourceHeader === 'auto' || sourceHeader == null) {\n      arrayRowsTravelFirst(function (val) {\n        // '-' is regarded as null/undefined.\n        if (val != null && val !== '-') {\n          if (isString(val)) {\n            startIndex == null && (startIndex = 1);\n          } else {\n            startIndex = 0;\n          }\n        }\n        // 10 is an experience number, avoid long loop.\n      }, seriesLayoutBy, dataArrayRows, 10);\n    } else {\n      startIndex = isNumber(sourceHeader) ? sourceHeader : sourceHeader ? 1 : 0;\n    }\n    if (!dimensionsDefine && startIndex === 1) {\n      dimensionsDefine = [];\n      arrayRowsTravelFirst(function (val, index) {\n        dimensionsDefine[index] = val != null ? val + '' : '';\n      }, seriesLayoutBy, dataArrayRows, Infinity);\n    }\n    dimensionsDetectedCount = dimensionsDefine ? dimensionsDefine.length : seriesLayoutBy === SERIES_LAYOUT_BY_ROW ? dataArrayRows.length : dataArrayRows[0] ? dataArrayRows[0].length : null;\n  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n    if (!dimensionsDefine) {\n      dimensionsDefine = objectRowsCollectDimensions(data);\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n    if (!dimensionsDefine) {\n      dimensionsDefine = [];\n      each(data, function (colArr, key) {\n        dimensionsDefine.push(key);\n      });\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n    var value0 = getDataItemValue(data[0]);\n    dimensionsDetectedCount = isArray(value0) && value0.length || 1;\n  } else if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(!!dimensionsDefine, 'dimensions must be given if data is TypedArray.');\n    }\n  }\n  return {\n    startIndex: startIndex,\n    dimensionsDefine: normalizeDimensionsOption(dimensionsDefine),\n    dimensionsDetectedCount: dimensionsDetectedCount\n  };\n}\nfunction objectRowsCollectDimensions(data) {\n  var firstIndex = 0;\n  var obj;\n  while (firstIndex < data.length && !(obj = data[firstIndex++])) {} // jshint ignore: line\n  if (obj) {\n    return keys(obj);\n  }\n}\n// Consider dimensions defined like ['A', 'price', 'B', 'price', 'C', 'price'],\n// which is reasonable. But dimension name is duplicated.\n// Returns undefined or an array contains only object without null/undefined or string.\nfunction normalizeDimensionsOption(dimensionsDefine) {\n  if (!dimensionsDefine) {\n    // The meaning of null/undefined is different from empty array.\n    return;\n  }\n  var nameMap = createHashMap();\n  return map(dimensionsDefine, function (rawItem, index) {\n    rawItem = isObject(rawItem) ? rawItem : {\n      name: rawItem\n    };\n    // Other fields will be discarded.\n    var item = {\n      name: rawItem.name,\n      displayName: rawItem.displayName,\n      type: rawItem.type\n    };\n    // User can set null in dimensions.\n    // We don't auto specify name, otherwise a given name may\n    // cause it to be referred unexpectedly.\n    if (item.name == null) {\n      return item;\n    }\n    // Also consider number form like 2012.\n    item.name += '';\n    // User may also specify displayName.\n    // displayName will always exists except user not\n    // specified or dim name is not specified or detected.\n    // (A auto generated dim name will not be used as\n    // displayName).\n    if (item.displayName == null) {\n      item.displayName = item.name;\n    }\n    var exist = nameMap.get(item.name);\n    if (!exist) {\n      nameMap.set(item.name, {\n        count: 1\n      });\n    } else {\n      item.name += '-' + exist.count++;\n    }\n    return item;\n  });\n}\nfunction arrayRowsTravelFirst(cb, seriesLayoutBy, data, maxLoop) {\n  if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {\n    for (var i = 0; i < data.length && i < maxLoop; i++) {\n      cb(data[i] ? data[i][0] : null, i);\n    }\n  } else {\n    var value0 = data[0] || [];\n    for (var i = 0; i < value0.length && i < maxLoop; i++) {\n      cb(value0[i], i);\n    }\n  }\n}\nexport function shouldRetrieveDataByName(source) {\n  var sourceFormat = source.sourceFormat;\n  return sourceFormat === SOURCE_FORMAT_OBJECT_ROWS || sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _a, _b, _c, _d;\n// TODO\n// ??? refactor? check the outer usage of data provider.\n// merge with defaultDimValueGetter?\nimport { isTypedArray, extend, assert, each, isObject, bind, isArray } from 'zrender/lib/core/util.js';\nimport { getDataItemValue } from '../../util/model.js';\nimport { createSourceFromSeriesDataOption, isSourceInstance } from '../Source.js';\nimport { SOURCE_FORMAT_ORIGINAL, SOURCE_FORMAT_OBJECT_ROWS, SOURCE_FORMAT_KEYED_COLUMNS, SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ARRAY_ROWS, SERIES_LAYOUT_BY_COLUMN, SERIES_LAYOUT_BY_ROW } from '../../util/types.js';\nimport { error } from '../../util/log.js';\nvar providerMethods;\nvar mountMethods;\n/**\n * If normal array used, mutable chunk size is supported.\n * If typed array used, chunk size must be fixed.\n */\nvar DefaultDataProvider = /** @class */function () {\n  function DefaultDataProvider(sourceParam, dimSize) {\n    // let source: Source;\n    var source = !isSourceInstance(sourceParam) ? createSourceFromSeriesDataOption(sourceParam) : sourceParam;\n    // declare source is Source;\n    this._source = source;\n    var data = this._data = source.data;\n    var sourceFormat = source.sourceFormat;\n    var seriesLayoutBy = source.seriesLayoutBy;\n    // Typed array. TODO IE10+?\n    if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (dimSize == null) {\n          throw new Error('Typed array data must specify dimension size');\n        }\n      }\n      this._offset = 0;\n      this._dimSize = dimSize;\n      this._data = data;\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      var validator = rawSourceDataValidatorMap[getMethodMapKey(sourceFormat, seriesLayoutBy)];\n      validator && validator(data, source.dimensionsDefine);\n    }\n    mountMethods(this, data, source);\n  }\n  DefaultDataProvider.prototype.getSource = function () {\n    return this._source;\n  };\n  DefaultDataProvider.prototype.count = function () {\n    return 0;\n  };\n  DefaultDataProvider.prototype.getItem = function (idx, out) {\n    return;\n  };\n  DefaultDataProvider.prototype.appendData = function (newData) {};\n  DefaultDataProvider.prototype.clean = function () {};\n  DefaultDataProvider.protoInitialize = function () {\n    // PENDING: To avoid potential incompat (e.g., prototype\n    // is visited somewhere), still init them on prototype.\n    var proto = DefaultDataProvider.prototype;\n    proto.pure = false;\n    proto.persistent = true;\n  }();\n  DefaultDataProvider.internalField = function () {\n    var _a;\n    mountMethods = function (provider, data, source) {\n      var sourceFormat = source.sourceFormat;\n      var seriesLayoutBy = source.seriesLayoutBy;\n      var startIndex = source.startIndex;\n      var dimsDef = source.dimensionsDefine;\n      var methods = providerMethods[getMethodMapKey(sourceFormat, seriesLayoutBy)];\n      if (process.env.NODE_ENV !== 'production') {\n        assert(methods, 'Invalide sourceFormat: ' + sourceFormat);\n      }\n      extend(provider, methods);\n      if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\n        provider.getItem = getItemForTypedArray;\n        provider.count = countForTypedArray;\n        provider.fillStorage = fillStorageForTypedArray;\n      } else {\n        var rawItemGetter = getRawSourceItemGetter(sourceFormat, seriesLayoutBy);\n        provider.getItem = bind(rawItemGetter, null, data, startIndex, dimsDef);\n        var rawCounter = getRawSourceDataCounter(sourceFormat, seriesLayoutBy);\n        provider.count = bind(rawCounter, null, data, startIndex, dimsDef);\n      }\n    };\n    var getItemForTypedArray = function (idx, out) {\n      idx = idx - this._offset;\n      out = out || [];\n      var data = this._data;\n      var dimSize = this._dimSize;\n      var offset = dimSize * idx;\n      for (var i = 0; i < dimSize; i++) {\n        out[i] = data[offset + i];\n      }\n      return out;\n    };\n    var fillStorageForTypedArray = function (start, end, storage, extent) {\n      var data = this._data;\n      var dimSize = this._dimSize;\n      for (var dim = 0; dim < dimSize; dim++) {\n        var dimExtent = extent[dim];\n        var min = dimExtent[0] == null ? Infinity : dimExtent[0];\n        var max = dimExtent[1] == null ? -Infinity : dimExtent[1];\n        var count = end - start;\n        var arr = storage[dim];\n        for (var i = 0; i < count; i++) {\n          // appendData with TypedArray will always do replace in provider.\n          var val = data[i * dimSize + dim];\n          arr[start + i] = val;\n          val < min && (min = val);\n          val > max && (max = val);\n        }\n        dimExtent[0] = min;\n        dimExtent[1] = max;\n      }\n    };\n    var countForTypedArray = function () {\n      return this._data ? this._data.length / this._dimSize : 0;\n    };\n    providerMethods = (_a = {}, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = {\n      pure: true,\n      appendData: appendDataSimply\n    }, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = {\n      pure: true,\n      appendData: function () {\n        throw new Error('Do not support appendData when set seriesLayoutBy: \"row\".');\n      }\n    }, _a[SOURCE_FORMAT_OBJECT_ROWS] = {\n      pure: true,\n      appendData: appendDataSimply\n    }, _a[SOURCE_FORMAT_KEYED_COLUMNS] = {\n      pure: true,\n      appendData: function (newData) {\n        var data = this._data;\n        each(newData, function (newCol, key) {\n          var oldCol = data[key] || (data[key] = []);\n          for (var i = 0; i < (newCol || []).length; i++) {\n            oldCol.push(newCol[i]);\n          }\n        });\n      }\n    }, _a[SOURCE_FORMAT_ORIGINAL] = {\n      appendData: appendDataSimply\n    }, _a[SOURCE_FORMAT_TYPED_ARRAY] = {\n      persistent: false,\n      pure: true,\n      appendData: function (newData) {\n        if (process.env.NODE_ENV !== 'production') {\n          assert(isTypedArray(newData), 'Added data must be TypedArray if data in initialization is TypedArray');\n        }\n        this._data = newData;\n      },\n      // Clean self if data is already used.\n      clean: function () {\n        // PENDING\n        this._offset += this.count();\n        this._data = null;\n      }\n    }, _a);\n    function appendDataSimply(newData) {\n      for (var i = 0; i < newData.length; i++) {\n        this._data.push(newData[i]);\n      }\n    }\n  }();\n  return DefaultDataProvider;\n}();\nexport { DefaultDataProvider };\nvar validateSimply = function (rawData) {\n  if (!isArray(rawData)) {\n    error('series.data or dataset.source must be an array.');\n  }\n};\n/**\n * Only run in dev mode - hint users for debug.\n */\nvar rawSourceDataValidatorMap = (_a = {}, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = validateSimply, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = validateSimply, _a[SOURCE_FORMAT_OBJECT_ROWS] = validateSimply, _a[SOURCE_FORMAT_KEYED_COLUMNS] = function (rawData, dimsDef) {\n  for (var i = 0; i < dimsDef.length; i++) {\n    var dimName = dimsDef[i].name;\n    if (dimName == null) {\n      error('dimension name must not be null/undefined.');\n    }\n  }\n}, _a[SOURCE_FORMAT_ORIGINAL] = validateSimply, _a);\nvar getItemSimply = function (rawData, startIndex, dimsDef, idx) {\n  return rawData[idx];\n};\nvar rawSourceItemGetterMap = (_b = {}, _b[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = function (rawData, startIndex, dimsDef, idx) {\n  return rawData[idx + startIndex];\n}, _b[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = function (rawData, startIndex, dimsDef, idx, out) {\n  idx += startIndex;\n  var item = out || [];\n  var data = rawData;\n  for (var i = 0; i < data.length; i++) {\n    var row = data[i];\n    item[i] = row ? row[idx] : null;\n  }\n  return item;\n}, _b[SOURCE_FORMAT_OBJECT_ROWS] = getItemSimply, _b[SOURCE_FORMAT_KEYED_COLUMNS] = function (rawData, startIndex, dimsDef, idx, out) {\n  var item = out || [];\n  for (var i = 0; i < dimsDef.length; i++) {\n    var dimName = dimsDef[i].name;\n    var col = dimName != null ? rawData[dimName] : null;\n    item[i] = col ? col[idx] : null;\n  }\n  return item;\n}, _b[SOURCE_FORMAT_ORIGINAL] = getItemSimply, _b);\nexport function getRawSourceItemGetter(sourceFormat, seriesLayoutBy) {\n  var method = rawSourceItemGetterMap[getMethodMapKey(sourceFormat, seriesLayoutBy)];\n  if (process.env.NODE_ENV !== 'production') {\n    assert(method, 'Do not support get item on \"' + sourceFormat + '\", \"' + seriesLayoutBy + '\".');\n  }\n  return method;\n}\nvar countSimply = function (rawData, startIndex, dimsDef) {\n  return rawData.length;\n};\nvar rawSourceDataCounterMap = (_c = {}, _c[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = function (rawData, startIndex, dimsDef) {\n  return Math.max(0, rawData.length - startIndex);\n}, _c[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = function (rawData, startIndex, dimsDef) {\n  var row = rawData[0];\n  return row ? Math.max(0, row.length - startIndex) : 0;\n}, _c[SOURCE_FORMAT_OBJECT_ROWS] = countSimply, _c[SOURCE_FORMAT_KEYED_COLUMNS] = function (rawData, startIndex, dimsDef) {\n  var dimName = dimsDef[0].name;\n  var col = dimName != null ? rawData[dimName] : null;\n  return col ? col.length : 0;\n}, _c[SOURCE_FORMAT_ORIGINAL] = countSimply, _c);\nexport function getRawSourceDataCounter(sourceFormat, seriesLayoutBy) {\n  var method = rawSourceDataCounterMap[getMethodMapKey(sourceFormat, seriesLayoutBy)];\n  if (process.env.NODE_ENV !== 'production') {\n    assert(method, 'Do not support count on \"' + sourceFormat + '\", \"' + seriesLayoutBy + '\".');\n  }\n  return method;\n}\nvar getRawValueSimply = function (dataItem, dimIndex, property) {\n  return dataItem[dimIndex];\n};\nvar rawSourceValueGetterMap = (_d = {}, _d[SOURCE_FORMAT_ARRAY_ROWS] = getRawValueSimply, _d[SOURCE_FORMAT_OBJECT_ROWS] = function (dataItem, dimIndex, property) {\n  return dataItem[property];\n}, _d[SOURCE_FORMAT_KEYED_COLUMNS] = getRawValueSimply, _d[SOURCE_FORMAT_ORIGINAL] = function (dataItem, dimIndex, property) {\n  // FIXME: In some case (markpoint in geo (geo-map.html)),\n  // dataItem is {coord: [...]}\n  var value = getDataItemValue(dataItem);\n  return !(value instanceof Array) ? value : value[dimIndex];\n}, _d[SOURCE_FORMAT_TYPED_ARRAY] = getRawValueSimply, _d);\nexport function getRawSourceValueGetter(sourceFormat) {\n  var method = rawSourceValueGetterMap[sourceFormat];\n  if (process.env.NODE_ENV !== 'production') {\n    assert(method, 'Do not support get value on \"' + sourceFormat + '\".');\n  }\n  return method;\n}\nfunction getMethodMapKey(sourceFormat, seriesLayoutBy) {\n  return sourceFormat === SOURCE_FORMAT_ARRAY_ROWS ? sourceFormat + '_' + seriesLayoutBy : sourceFormat;\n}\n// ??? FIXME can these logic be more neat: getRawValue, getRawDataItem,\n// Consider persistent.\n// Caution: why use raw value to display on label or tooltip?\n// A reason is to avoid format. For example time value we do not know\n// how to format is expected. More over, if stack is used, calculated\n// value may be 0.91000000001, which have brings trouble to display.\n// TODO: consider how to treat null/undefined/NaN when display?\nexport function retrieveRawValue(data, dataIndex,\n// If dimIndex is null/undefined, return OptionDataItem.\n// Otherwise, return OptionDataValue.\ndim) {\n  if (!data) {\n    return;\n  }\n  // Consider data may be not persistent.\n  var dataItem = data.getRawDataItem(dataIndex);\n  if (dataItem == null) {\n    return;\n  }\n  var store = data.getStore();\n  var sourceFormat = store.getSource().sourceFormat;\n  if (dim != null) {\n    var dimIndex = data.getDimensionIndex(dim);\n    var property = store.getDimensionProperty(dimIndex);\n    return getRawSourceValueGetter(sourceFormat)(dataItem, dimIndex, property);\n  } else {\n    var result = dataItem;\n    if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n      result = getDataItemValue(dataItem);\n    }\n    return result;\n  }\n}\n/**\n * Compatible with some cases (in pie, map) like:\n * data: [{name: 'xx', value: 5, selected: true}, ...]\n * where only sourceFormat is 'original' and 'objectRows' supported.\n *\n * // TODO\n * Supported detail options in data item when using 'arrayRows'.\n *\n * @param data\n * @param dataIndex\n * @param attr like 'selected'\n */\nexport function retrieveRawAttr(data, dataIndex, attr) {\n  if (!data) {\n    return;\n  }\n  var sourceFormat = data.getStore().getSource().sourceFormat;\n  if (sourceFormat !== SOURCE_FORMAT_ORIGINAL && sourceFormat !== SOURCE_FORMAT_OBJECT_ROWS) {\n    return;\n  }\n  var dataItem = data.getRawDataItem(dataIndex);\n  if (sourceFormat === SOURCE_FORMAT_ORIGINAL && !isObject(dataItem)) {\n    dataItem = null;\n  }\n  if (dataItem) {\n    return dataItem[attr];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, createHashMap, assert, map } from 'zrender/lib/core/util.js';\nimport { VISUAL_DIMENSIONS } from '../../util/types.js';\nvar DimensionUserOuput = /** @class */function () {\n  function DimensionUserOuput(encode, dimRequest) {\n    this._encode = encode;\n    this._schema = dimRequest;\n  }\n  DimensionUserOuput.prototype.get = function () {\n    return {\n      // Do not generate full dimension name until fist used.\n      fullDimensions: this._getFullDimensionNames(),\n      encode: this._encode\n    };\n  };\n  /**\n   * Get all data store dimension names.\n   * Theoretically a series data store is defined both by series and used dataset (if any).\n   * If some dimensions are omitted for performance reason in `this.dimensions`,\n   * the dimension name may not be auto-generated if user does not specify a dimension name.\n   * In this case, the dimension name is `null`/`undefined`.\n   */\n  DimensionUserOuput.prototype._getFullDimensionNames = function () {\n    if (!this._cachedDimNames) {\n      this._cachedDimNames = this._schema ? this._schema.makeOutputDimensionNames() : [];\n    }\n    return this._cachedDimNames;\n  };\n  return DimensionUserOuput;\n}();\n;\nexport function summarizeDimensions(data, schema) {\n  var summary = {};\n  var encode = summary.encode = {};\n  var notExtraCoordDimMap = createHashMap();\n  var defaultedLabel = [];\n  var defaultedTooltip = [];\n  var userOutputEncode = {};\n  each(data.dimensions, function (dimName) {\n    var dimItem = data.getDimensionInfo(dimName);\n    var coordDim = dimItem.coordDim;\n    if (coordDim) {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(VISUAL_DIMENSIONS.get(coordDim) == null);\n      }\n      var coordDimIndex = dimItem.coordDimIndex;\n      getOrCreateEncodeArr(encode, coordDim)[coordDimIndex] = dimName;\n      if (!dimItem.isExtraCoord) {\n        notExtraCoordDimMap.set(coordDim, 1);\n        // Use the last coord dim (and label friendly) as default label,\n        // because when dataset is used, it is hard to guess which dimension\n        // can be value dimension. If both show x, y on label is not look good,\n        // and conventionally y axis is focused more.\n        if (mayLabelDimType(dimItem.type)) {\n          defaultedLabel[0] = dimName;\n        }\n        // User output encode do not contain generated coords.\n        // And it only has index. User can use index to retrieve value from the raw item array.\n        getOrCreateEncodeArr(userOutputEncode, coordDim)[coordDimIndex] = data.getDimensionIndex(dimItem.name);\n      }\n      if (dimItem.defaultTooltip) {\n        defaultedTooltip.push(dimName);\n      }\n    }\n    VISUAL_DIMENSIONS.each(function (v, otherDim) {\n      var encodeArr = getOrCreateEncodeArr(encode, otherDim);\n      var dimIndex = dimItem.otherDims[otherDim];\n      if (dimIndex != null && dimIndex !== false) {\n        encodeArr[dimIndex] = dimItem.name;\n      }\n    });\n  });\n  var dataDimsOnCoord = [];\n  var encodeFirstDimNotExtra = {};\n  notExtraCoordDimMap.each(function (v, coordDim) {\n    var dimArr = encode[coordDim];\n    encodeFirstDimNotExtra[coordDim] = dimArr[0];\n    // Not necessary to remove duplicate, because a data\n    // dim canot on more than one coordDim.\n    dataDimsOnCoord = dataDimsOnCoord.concat(dimArr);\n  });\n  summary.dataDimsOnCoord = dataDimsOnCoord;\n  summary.dataDimIndicesOnCoord = map(dataDimsOnCoord, function (dimName) {\n    return data.getDimensionInfo(dimName).storeDimIndex;\n  });\n  summary.encodeFirstDimNotExtra = encodeFirstDimNotExtra;\n  var encodeLabel = encode.label;\n  // FIXME `encode.label` is not recommended, because formatter cannot be set\n  // in this way. Use label.formatter instead. Maybe remove this approach someday.\n  if (encodeLabel && encodeLabel.length) {\n    defaultedLabel = encodeLabel.slice();\n  }\n  var encodeTooltip = encode.tooltip;\n  if (encodeTooltip && encodeTooltip.length) {\n    defaultedTooltip = encodeTooltip.slice();\n  } else if (!defaultedTooltip.length) {\n    defaultedTooltip = defaultedLabel.slice();\n  }\n  encode.defaultedLabel = defaultedLabel;\n  encode.defaultedTooltip = defaultedTooltip;\n  summary.userOutput = new DimensionUserOuput(userOutputEncode, schema);\n  return summary;\n}\nfunction getOrCreateEncodeArr(encode, dim) {\n  if (!encode.hasOwnProperty(dim)) {\n    encode[dim] = [];\n  }\n  return encode[dim];\n}\n// FIXME:TS should be type `AxisType`\nexport function getDimensionTypeByAxis(axisType) {\n  return axisType === 'category' ? 'ordinal' : axisType === 'time' ? 'time' : 'float';\n}\nfunction mayLabelDimType(dimType) {\n  // In most cases, ordinal and time do not suitable for label.\n  // Ordinal info can be displayed on axis. Time is too long.\n  return !(dimType === 'ordinal' || dimType === 'time');\n}\n// function findTheLastDimMayLabel(data) {\n//     // Get last value dim\n//     let dimensions = data.dimensions.slice();\n//     let valueType;\n//     let valueDim;\n//     while (dimensions.length && (\n//         valueDim = dimensions.pop(),\n//         valueType = data.getDimensionInfo(valueDim).type,\n//         valueType === 'ordinal' || valueType === 'time'\n//     )) {} // jshint ignore:line\n//     return valueDim;\n// }","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar SeriesDimensionDefine = /** @class */function () {\n  /**\n   * @param opt All of the fields will be shallow copied.\n   */\n  function SeriesDimensionDefine(opt) {\n    /**\n     * The format of `otherDims` is:\n     * ```js\n     * {\n     *     tooltip?: number\n     *     label?: number\n     *     itemName?: number\n     *     seriesName?: number\n     * }\n     * ```\n     *\n     * A `series.encode` can specified these fields:\n     * ```js\n     * encode: {\n     *     // \"3, 1, 5\" is the index of data dimension.\n     *     tooltip: [3, 1, 5],\n     *     label: [0, 3],\n     *     ...\n     * }\n     * ```\n     * `otherDims` is the parse result of the `series.encode` above, like:\n     * ```js\n     * // Suppose the index of this data dimension is `3`.\n     * this.otherDims = {\n     *     // `3` is at the index `0` of the `encode.tooltip`\n     *     tooltip: 0,\n     *     // `3` is at the index `1` of the `encode.label`\n     *     label: 1\n     * };\n     * ```\n     *\n     * This prop should never be `null`/`undefined` after initialized.\n     */\n    this.otherDims = {};\n    if (opt != null) {\n      zrUtil.extend(this, opt);\n    }\n  }\n  return SeriesDimensionDefine;\n}();\n;\nexport default SeriesDimensionDefine;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { parseDate, numericToNumber } from '../../util/number.js';\nimport { createHashMap, trim, hasOwn, isString, isNumber } from 'zrender/lib/core/util.js';\nimport { throwError } from '../../util/log.js';\n/**\n * Convert raw the value in to inner value in List.\n *\n * [Performance sensitive]\n *\n * [Caution]: this is the key logic of user value parser.\n * For backward compatibility, do not modify it until you have to!\n */\nexport function parseDataValue(value,\n// For high performance, do not omit the second param.\nopt) {\n  // Performance sensitive.\n  var dimType = opt && opt.type;\n  if (dimType === 'ordinal') {\n    // If given value is a category string\n    return value;\n  }\n  if (dimType === 'time'\n  // spead up when using timestamp\n  && !isNumber(value) && value != null && value !== '-') {\n    value = +parseDate(value);\n  }\n  // dimType defaults 'number'.\n  // If dimType is not ordinal and value is null or undefined or NaN or '-',\n  // parse to NaN.\n  // number-like string (like ' 123 ') can be converted to a number.\n  // where null/undefined or other string will be converted to NaN.\n  return value == null || value === '' ? NaN\n  // If string (like '-'), using '+' parse to NaN\n  // If object, also parse to NaN\n  : Number(value);\n}\n;\nvar valueParserMap = createHashMap({\n  'number': function (val) {\n    // Do not use `numericToNumber` here. We have `numericToNumber` by default.\n    // Here the number parser can have loose rule:\n    // enable to cut suffix: \"120px\" => 120, \"14%\" => 14.\n    return parseFloat(val);\n  },\n  'time': function (val) {\n    // return timestamp.\n    return +parseDate(val);\n  },\n  'trim': function (val) {\n    return isString(val) ? trim(val) : val;\n  }\n});\nexport function getRawValueParser(type) {\n  return valueParserMap.get(type);\n}\nvar ORDER_COMPARISON_OP_MAP = {\n  lt: function (lval, rval) {\n    return lval < rval;\n  },\n  lte: function (lval, rval) {\n    return lval <= rval;\n  },\n  gt: function (lval, rval) {\n    return lval > rval;\n  },\n  gte: function (lval, rval) {\n    return lval >= rval;\n  }\n};\nvar FilterOrderComparator = /** @class */function () {\n  function FilterOrderComparator(op, rval) {\n    if (!isNumber(rval)) {\n      var errMsg = '';\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'rvalue of \"<\", \">\", \"<=\", \">=\" can only be number in filter.';\n      }\n      throwError(errMsg);\n    }\n    this._opFn = ORDER_COMPARISON_OP_MAP[op];\n    this._rvalFloat = numericToNumber(rval);\n  }\n  // Performance sensitive.\n  FilterOrderComparator.prototype.evaluate = function (lval) {\n    // Most cases is 'number', and typeof maybe 10 times faseter than parseFloat.\n    return isNumber(lval) ? this._opFn(lval, this._rvalFloat) : this._opFn(numericToNumber(lval), this._rvalFloat);\n  };\n  return FilterOrderComparator;\n}();\nvar SortOrderComparator = /** @class */function () {\n  /**\n   * @param order by default: 'asc'\n   * @param incomparable by default: Always on the tail.\n   *        That is, if 'asc' => 'max', if 'desc' => 'min'\n   *        See the definition of \"incomparable\" in [SORT_COMPARISON_RULE].\n   */\n  function SortOrderComparator(order, incomparable) {\n    var isDesc = order === 'desc';\n    this._resultLT = isDesc ? 1 : -1;\n    if (incomparable == null) {\n      incomparable = isDesc ? 'min' : 'max';\n    }\n    this._incomparable = incomparable === 'min' ? -Infinity : Infinity;\n  }\n  // See [SORT_COMPARISON_RULE].\n  // Performance sensitive.\n  SortOrderComparator.prototype.evaluate = function (lval, rval) {\n    // Most cases is 'number', and typeof maybe 10 times faseter than parseFloat.\n    var lvalFloat = isNumber(lval) ? lval : numericToNumber(lval);\n    var rvalFloat = isNumber(rval) ? rval : numericToNumber(rval);\n    var lvalNotNumeric = isNaN(lvalFloat);\n    var rvalNotNumeric = isNaN(rvalFloat);\n    if (lvalNotNumeric) {\n      lvalFloat = this._incomparable;\n    }\n    if (rvalNotNumeric) {\n      rvalFloat = this._incomparable;\n    }\n    if (lvalNotNumeric && rvalNotNumeric) {\n      var lvalIsStr = isString(lval);\n      var rvalIsStr = isString(rval);\n      if (lvalIsStr) {\n        lvalFloat = rvalIsStr ? lval : 0;\n      }\n      if (rvalIsStr) {\n        rvalFloat = lvalIsStr ? rval : 0;\n      }\n    }\n    return lvalFloat < rvalFloat ? this._resultLT : lvalFloat > rvalFloat ? -this._resultLT : 0;\n  };\n  return SortOrderComparator;\n}();\nexport { SortOrderComparator };\nvar FilterEqualityComparator = /** @class */function () {\n  function FilterEqualityComparator(isEq, rval) {\n    this._rval = rval;\n    this._isEQ = isEq;\n    this._rvalTypeof = typeof rval;\n    this._rvalFloat = numericToNumber(rval);\n  }\n  // Performance sensitive.\n  FilterEqualityComparator.prototype.evaluate = function (lval) {\n    var eqResult = lval === this._rval;\n    if (!eqResult) {\n      var lvalTypeof = typeof lval;\n      if (lvalTypeof !== this._rvalTypeof && (lvalTypeof === 'number' || this._rvalTypeof === 'number')) {\n        eqResult = numericToNumber(lval) === this._rvalFloat;\n      }\n    }\n    return this._isEQ ? eqResult : !eqResult;\n  };\n  return FilterEqualityComparator;\n}();\n/**\n * [FILTER_COMPARISON_RULE]\n * `lt`|`lte`|`gt`|`gte`:\n * + rval must be a number. And lval will be converted to number (`numericToNumber`) to compare.\n * `eq`:\n * + If same type, compare with `===`.\n * + If there is one number, convert to number (`numericToNumber`) to compare.\n * + Else return `false`.\n * `ne`:\n * + Not `eq`.\n *\n *\n * [SORT_COMPARISON_RULE]\n * All the values are grouped into three categories:\n * + \"numeric\" (number and numeric string)\n * + \"non-numeric-string\" (string that excluding numeric string)\n * + \"others\"\n * \"numeric\" vs \"numeric\": values are ordered by number order.\n * \"non-numeric-string\" vs \"non-numeric-string\": values are ordered by ES spec (#sec-abstract-relational-comparison).\n * \"others\" vs \"others\": do not change order (always return 0).\n * \"numeric\" vs \"non-numeric-string\": \"non-numeric-string\" is treated as \"incomparable\".\n * \"number\" vs \"others\": \"others\" is treated as \"incomparable\".\n * \"non-numeric-string\" vs \"others\": \"others\" is treated as \"incomparable\".\n * \"incomparable\" will be seen as -Infinity or Infinity (depends on the settings).\n * MEMO:\n *   Non-numeric string sort makes sense when we need to put the items with the same tag together.\n *   But if we support string sort, we still need to avoid the misleading like `'2' > '12'`,\n *   So we treat \"numeric-string\" sorted by number order rather than string comparison.\n *\n *\n * [CHECK_LIST_OF_THE_RULE_DESIGN]\n * + Do not support string comparison until required. And also need to\n *   avoid the misleading of \"2\" > \"12\".\n * + Should avoid the misleading case:\n *   `\" 22 \" gte \"22\"` is `true` but `\" 22 \" eq \"22\"` is `false`.\n * + JS bad case should be avoided: null <= 0, [] <= 0, ' ' <= 0, ...\n * + Only \"numeric\" can be converted to comparable number, otherwise converted to NaN.\n *   See `util/number.ts#numericToNumber`.\n *\n * @return If `op` is not `RelationalOperator`, return null;\n */\nexport function createFilterComparator(op, rval) {\n  return op === 'eq' || op === 'ne' ? new FilterEqualityComparator(op === 'eq', rval) : hasOwn(ORDER_COMPARISON_OP_MAP, op) ? new FilterOrderComparator(op, rval) : null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { assert, clone, createHashMap, isFunction, keys, map, reduce } from 'zrender/lib/core/util.js';\nimport { parseDataValue } from './helper/dataValueHelper.js';\nimport { shouldRetrieveDataByName } from './Source.js';\nvar UNDEFINED = 'undefined';\n/* global Float64Array, Int32Array, Uint32Array, Uint16Array */\n// Caution: MUST not use `new CtorUint32Array(arr, 0, len)`, because the Ctor of array is\n// different from the Ctor of typed array.\nexport var CtorUint32Array = typeof Uint32Array === UNDEFINED ? Array : Uint32Array;\nexport var CtorUint16Array = typeof Uint16Array === UNDEFINED ? Array : Uint16Array;\nexport var CtorInt32Array = typeof Int32Array === UNDEFINED ? Array : Int32Array;\nexport var CtorFloat64Array = typeof Float64Array === UNDEFINED ? Array : Float64Array;\n/**\n * Multi dimensional data store\n */\nvar dataCtors = {\n  'float': CtorFloat64Array,\n  'int': CtorInt32Array,\n  // Ordinal data type can be string or int\n  'ordinal': Array,\n  'number': Array,\n  'time': CtorFloat64Array\n};\nvar defaultDimValueGetters;\nfunction getIndicesCtor(rawCount) {\n  // The possible max value in this._indicies is always this._rawCount despite of filtering.\n  return rawCount > 65535 ? CtorUint32Array : CtorUint16Array;\n}\n;\nfunction getInitialExtent() {\n  return [Infinity, -Infinity];\n}\n;\nfunction cloneChunk(originalChunk) {\n  var Ctor = originalChunk.constructor;\n  // Only shallow clone is enough when Array.\n  return Ctor === Array ? originalChunk.slice() : new Ctor(originalChunk);\n}\nfunction prepareStore(store, dimIdx, dimType, end, append) {\n  var DataCtor = dataCtors[dimType || 'float'];\n  if (append) {\n    var oldStore = store[dimIdx];\n    var oldLen = oldStore && oldStore.length;\n    if (!(oldLen === end)) {\n      var newStore = new DataCtor(end);\n      // The cost of the copy is probably inconsiderable\n      // within the initial chunkSize.\n      for (var j = 0; j < oldLen; j++) {\n        newStore[j] = oldStore[j];\n      }\n      store[dimIdx] = newStore;\n    }\n  } else {\n    store[dimIdx] = new DataCtor(end);\n  }\n}\n;\n/**\n * Basically, DataStore API keep immutable.\n */\nvar DataStore = /** @class */function () {\n  function DataStore() {\n    this._chunks = [];\n    // It will not be calculated until needed.\n    this._rawExtent = [];\n    this._extent = [];\n    this._count = 0;\n    this._rawCount = 0;\n    this._calcDimNameToIdx = createHashMap();\n  }\n  /**\n   * Initialize from data\n   */\n  DataStore.prototype.initData = function (provider, inputDimensions, dimValueGetter) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(isFunction(provider.getItem) && isFunction(provider.count), 'Invalid data provider.');\n    }\n    this._provider = provider;\n    // Clear\n    this._chunks = [];\n    this._indices = null;\n    this.getRawIndex = this._getRawIdxIdentity;\n    var source = provider.getSource();\n    var defaultGetter = this.defaultDimValueGetter = defaultDimValueGetters[source.sourceFormat];\n    // Default dim value getter\n    this._dimValueGetter = dimValueGetter || defaultGetter;\n    // Reset raw extent.\n    this._rawExtent = [];\n    var willRetrieveDataByName = shouldRetrieveDataByName(source);\n    this._dimensions = map(inputDimensions, function (dim) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (willRetrieveDataByName) {\n          assert(dim.property != null);\n        }\n      }\n      return {\n        // Only pick these two props. Not leak other properties like orderMeta.\n        type: dim.type,\n        property: dim.property\n      };\n    });\n    this._initDataFromProvider(0, provider.count());\n  };\n  DataStore.prototype.getProvider = function () {\n    return this._provider;\n  };\n  /**\n   * Caution: even when a `source` instance owned by a series, the created data store\n   * may still be shared by different sereis (the source hash does not use all `source`\n   * props, see `sourceManager`). In this case, the `source` props that are not used in\n   * hash (like `source.dimensionDefine`) probably only belongs to a certain series and\n   * thus should not be fetch here.\n   */\n  DataStore.prototype.getSource = function () {\n    return this._provider.getSource();\n  };\n  /**\n   * @caution Only used in dataStack.\n   */\n  DataStore.prototype.ensureCalculationDimension = function (dimName, type) {\n    var calcDimNameToIdx = this._calcDimNameToIdx;\n    var dimensions = this._dimensions;\n    var calcDimIdx = calcDimNameToIdx.get(dimName);\n    if (calcDimIdx != null) {\n      if (dimensions[calcDimIdx].type === type) {\n        return calcDimIdx;\n      }\n    } else {\n      calcDimIdx = dimensions.length;\n    }\n    dimensions[calcDimIdx] = {\n      type: type\n    };\n    calcDimNameToIdx.set(dimName, calcDimIdx);\n    this._chunks[calcDimIdx] = new dataCtors[type || 'float'](this._rawCount);\n    this._rawExtent[calcDimIdx] = getInitialExtent();\n    return calcDimIdx;\n  };\n  DataStore.prototype.collectOrdinalMeta = function (dimIdx, ordinalMeta) {\n    var chunk = this._chunks[dimIdx];\n    var dim = this._dimensions[dimIdx];\n    var rawExtents = this._rawExtent;\n    var offset = dim.ordinalOffset || 0;\n    var len = chunk.length;\n    if (offset === 0) {\n      // We need to reset the rawExtent if collect is from start.\n      // Because this dimension may be guessed as number and calcuating a wrong extent.\n      rawExtents[dimIdx] = getInitialExtent();\n    }\n    var dimRawExtent = rawExtents[dimIdx];\n    // Parse from previous data offset. len may be changed after appendData\n    for (var i = offset; i < len; i++) {\n      var val = chunk[i] = ordinalMeta.parseAndCollect(chunk[i]);\n      if (!isNaN(val)) {\n        dimRawExtent[0] = Math.min(val, dimRawExtent[0]);\n        dimRawExtent[1] = Math.max(val, dimRawExtent[1]);\n      }\n    }\n    dim.ordinalMeta = ordinalMeta;\n    dim.ordinalOffset = len;\n    dim.type = 'ordinal'; // Force to be ordinal\n  };\n  DataStore.prototype.getOrdinalMeta = function (dimIdx) {\n    var dimInfo = this._dimensions[dimIdx];\n    var ordinalMeta = dimInfo.ordinalMeta;\n    return ordinalMeta;\n  };\n  DataStore.prototype.getDimensionProperty = function (dimIndex) {\n    var item = this._dimensions[dimIndex];\n    return item && item.property;\n  };\n  /**\n   * Caution: Can be only called on raw data (before `this._indices` created).\n   */\n  DataStore.prototype.appendData = function (data) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(!this._indices, 'appendData can only be called on raw data.');\n    }\n    var provider = this._provider;\n    var start = this.count();\n    provider.appendData(data);\n    var end = provider.count();\n    if (!provider.persistent) {\n      end += start;\n    }\n    if (start < end) {\n      this._initDataFromProvider(start, end, true);\n    }\n    return [start, end];\n  };\n  DataStore.prototype.appendValues = function (values, minFillLen) {\n    var chunks = this._chunks;\n    var dimensions = this._dimensions;\n    var dimLen = dimensions.length;\n    var rawExtent = this._rawExtent;\n    var start = this.count();\n    var end = start + Math.max(values.length, minFillLen || 0);\n    for (var i = 0; i < dimLen; i++) {\n      var dim = dimensions[i];\n      prepareStore(chunks, i, dim.type, end, true);\n    }\n    var emptyDataItem = [];\n    for (var idx = start; idx < end; idx++) {\n      var sourceIdx = idx - start;\n      // Store the data by dimensions\n      for (var dimIdx = 0; dimIdx < dimLen; dimIdx++) {\n        var dim = dimensions[dimIdx];\n        var val = defaultDimValueGetters.arrayRows.call(this, values[sourceIdx] || emptyDataItem, dim.property, sourceIdx, dimIdx);\n        chunks[dimIdx][idx] = val;\n        var dimRawExtent = rawExtent[dimIdx];\n        val < dimRawExtent[0] && (dimRawExtent[0] = val);\n        val > dimRawExtent[1] && (dimRawExtent[1] = val);\n      }\n    }\n    this._rawCount = this._count = end;\n    return {\n      start: start,\n      end: end\n    };\n  };\n  DataStore.prototype._initDataFromProvider = function (start, end, append) {\n    var provider = this._provider;\n    var chunks = this._chunks;\n    var dimensions = this._dimensions;\n    var dimLen = dimensions.length;\n    var rawExtent = this._rawExtent;\n    var dimNames = map(dimensions, function (dim) {\n      return dim.property;\n    });\n    for (var i = 0; i < dimLen; i++) {\n      var dim = dimensions[i];\n      if (!rawExtent[i]) {\n        rawExtent[i] = getInitialExtent();\n      }\n      prepareStore(chunks, i, dim.type, end, append);\n    }\n    if (provider.fillStorage) {\n      provider.fillStorage(start, end, chunks, rawExtent);\n    } else {\n      var dataItem = [];\n      for (var idx = start; idx < end; idx++) {\n        // NOTICE: Try not to write things into dataItem\n        dataItem = provider.getItem(idx, dataItem);\n        // Each data item is value\n        // [1, 2]\n        // 2\n        // Bar chart, line chart which uses category axis\n        // only gives the 'y' value. 'x' value is the indices of category\n        // Use a tempValue to normalize the value to be a (x, y) value\n        // Store the data by dimensions\n        for (var dimIdx = 0; dimIdx < dimLen; dimIdx++) {\n          var dimStorage = chunks[dimIdx];\n          // PENDING NULL is empty or zero\n          var val = this._dimValueGetter(dataItem, dimNames[dimIdx], idx, dimIdx);\n          dimStorage[idx] = val;\n          var dimRawExtent = rawExtent[dimIdx];\n          val < dimRawExtent[0] && (dimRawExtent[0] = val);\n          val > dimRawExtent[1] && (dimRawExtent[1] = val);\n        }\n      }\n    }\n    if (!provider.persistent && provider.clean) {\n      // Clean unused data if data source is typed array.\n      provider.clean();\n    }\n    this._rawCount = this._count = end;\n    // Reset data extent\n    this._extent = [];\n  };\n  DataStore.prototype.count = function () {\n    return this._count;\n  };\n  /**\n   * Get value. Return NaN if idx is out of range.\n   */\n  DataStore.prototype.get = function (dim, idx) {\n    if (!(idx >= 0 && idx < this._count)) {\n      return NaN;\n    }\n    var dimStore = this._chunks[dim];\n    return dimStore ? dimStore[this.getRawIndex(idx)] : NaN;\n  };\n  DataStore.prototype.getValues = function (dimensions, idx) {\n    var values = [];\n    var dimArr = [];\n    if (idx == null) {\n      idx = dimensions;\n      // TODO get all from store?\n      dimensions = [];\n      // All dimensions\n      for (var i = 0; i < this._dimensions.length; i++) {\n        dimArr.push(i);\n      }\n    } else {\n      dimArr = dimensions;\n    }\n    for (var i = 0, len = dimArr.length; i < len; i++) {\n      values.push(this.get(dimArr[i], idx));\n    }\n    return values;\n  };\n  /**\n   * @param dim concrete dim\n   */\n  DataStore.prototype.getByRawIndex = function (dim, rawIdx) {\n    if (!(rawIdx >= 0 && rawIdx < this._rawCount)) {\n      return NaN;\n    }\n    var dimStore = this._chunks[dim];\n    return dimStore ? dimStore[rawIdx] : NaN;\n  };\n  /**\n   * Get sum of data in one dimension\n   */\n  DataStore.prototype.getSum = function (dim) {\n    var dimData = this._chunks[dim];\n    var sum = 0;\n    if (dimData) {\n      for (var i = 0, len = this.count(); i < len; i++) {\n        var value = this.get(dim, i);\n        if (!isNaN(value)) {\n          sum += value;\n        }\n      }\n    }\n    return sum;\n  };\n  /**\n   * Get median of data in one dimension\n   */\n  DataStore.prototype.getMedian = function (dim) {\n    var dimDataArray = [];\n    // map all data of one dimension\n    this.each([dim], function (val) {\n      if (!isNaN(val)) {\n        dimDataArray.push(val);\n      }\n    });\n    // TODO\n    // Use quick select?\n    var sortedDimDataArray = dimDataArray.sort(function (a, b) {\n      return a - b;\n    });\n    var len = this.count();\n    // calculate median\n    return len === 0 ? 0 : len % 2 === 1 ? sortedDimDataArray[(len - 1) / 2] : (sortedDimDataArray[len / 2] + sortedDimDataArray[len / 2 - 1]) / 2;\n  };\n  /**\n   * Retrieve the index with given raw data index.\n   */\n  DataStore.prototype.indexOfRawIndex = function (rawIndex) {\n    if (rawIndex >= this._rawCount || rawIndex < 0) {\n      return -1;\n    }\n    if (!this._indices) {\n      return rawIndex;\n    }\n    // Indices are ascending\n    var indices = this._indices;\n    // If rawIndex === dataIndex\n    var rawDataIndex = indices[rawIndex];\n    if (rawDataIndex != null && rawDataIndex < this._count && rawDataIndex === rawIndex) {\n      return rawIndex;\n    }\n    var left = 0;\n    var right = this._count - 1;\n    while (left <= right) {\n      var mid = (left + right) / 2 | 0;\n      if (indices[mid] < rawIndex) {\n        left = mid + 1;\n      } else if (indices[mid] > rawIndex) {\n        right = mid - 1;\n      } else {\n        return mid;\n      }\n    }\n    return -1;\n  };\n  DataStore.prototype.getIndices = function () {\n    var newIndices;\n    var indices = this._indices;\n    if (indices) {\n      var Ctor = indices.constructor;\n      var thisCount = this._count;\n      // `new Array(a, b, c)` is different from `new Uint32Array(a, b, c)`.\n      if (Ctor === Array) {\n        newIndices = new Ctor(thisCount);\n        for (var i = 0; i < thisCount; i++) {\n          newIndices[i] = indices[i];\n        }\n      } else {\n        newIndices = new Ctor(indices.buffer, 0, thisCount);\n      }\n    } else {\n      var Ctor = getIndicesCtor(this._rawCount);\n      newIndices = new Ctor(this.count());\n      for (var i = 0; i < newIndices.length; i++) {\n        newIndices[i] = i;\n      }\n    }\n    return newIndices;\n  };\n  /**\n   * Data filter.\n   */\n  DataStore.prototype.filter = function (dims, cb) {\n    if (!this._count) {\n      return this;\n    }\n    var newStore = this.clone();\n    var count = newStore.count();\n    var Ctor = getIndicesCtor(newStore._rawCount);\n    var newIndices = new Ctor(count);\n    var value = [];\n    var dimSize = dims.length;\n    var offset = 0;\n    var dim0 = dims[0];\n    var chunks = newStore._chunks;\n    for (var i = 0; i < count; i++) {\n      var keep = void 0;\n      var rawIdx = newStore.getRawIndex(i);\n      // Simple optimization\n      if (dimSize === 0) {\n        keep = cb(i);\n      } else if (dimSize === 1) {\n        var val = chunks[dim0][rawIdx];\n        keep = cb(val, i);\n      } else {\n        var k = 0;\n        for (; k < dimSize; k++) {\n          value[k] = chunks[dims[k]][rawIdx];\n        }\n        value[k] = i;\n        keep = cb.apply(null, value);\n      }\n      if (keep) {\n        newIndices[offset++] = rawIdx;\n      }\n    }\n    // Set indices after filtered.\n    if (offset < count) {\n      newStore._indices = newIndices;\n    }\n    newStore._count = offset;\n    // Reset data extent\n    newStore._extent = [];\n    newStore._updateGetRawIdx();\n    return newStore;\n  };\n  /**\n   * Select data in range. (For optimization of filter)\n   * (Manually inline code, support 5 million data filtering in data zoom.)\n   */\n  DataStore.prototype.selectRange = function (range) {\n    var newStore = this.clone();\n    var len = newStore._count;\n    if (!len) {\n      return this;\n    }\n    var dims = keys(range);\n    var dimSize = dims.length;\n    if (!dimSize) {\n      return this;\n    }\n    var originalCount = newStore.count();\n    var Ctor = getIndicesCtor(newStore._rawCount);\n    var newIndices = new Ctor(originalCount);\n    var offset = 0;\n    var dim0 = dims[0];\n    var min = range[dim0][0];\n    var max = range[dim0][1];\n    var storeArr = newStore._chunks;\n    var quickFinished = false;\n    if (!newStore._indices) {\n      // Extreme optimization for common case. About 2x faster in chrome.\n      var idx = 0;\n      if (dimSize === 1) {\n        var dimStorage = storeArr[dims[0]];\n        for (var i = 0; i < len; i++) {\n          var val = dimStorage[i];\n          // NaN will not be filtered. Consider the case, in line chart, empty\n          // value indicates the line should be broken. But for the case like\n          // scatter plot, a data item with empty value will not be rendered,\n          // but the axis extent may be effected if some other dim of the data\n          // item has value. Fortunately it is not a significant negative effect.\n          if (val >= min && val <= max || isNaN(val)) {\n            newIndices[offset++] = idx;\n          }\n          idx++;\n        }\n        quickFinished = true;\n      } else if (dimSize === 2) {\n        var dimStorage = storeArr[dims[0]];\n        var dimStorage2 = storeArr[dims[1]];\n        var min2 = range[dims[1]][0];\n        var max2 = range[dims[1]][1];\n        for (var i = 0; i < len; i++) {\n          var val = dimStorage[i];\n          var val2 = dimStorage2[i];\n          // Do not filter NaN, see comment above.\n          if ((val >= min && val <= max || isNaN(val)) && (val2 >= min2 && val2 <= max2 || isNaN(val2))) {\n            newIndices[offset++] = idx;\n          }\n          idx++;\n        }\n        quickFinished = true;\n      }\n    }\n    if (!quickFinished) {\n      if (dimSize === 1) {\n        for (var i = 0; i < originalCount; i++) {\n          var rawIndex = newStore.getRawIndex(i);\n          var val = storeArr[dims[0]][rawIndex];\n          // Do not filter NaN, see comment above.\n          if (val >= min && val <= max || isNaN(val)) {\n            newIndices[offset++] = rawIndex;\n          }\n        }\n      } else {\n        for (var i = 0; i < originalCount; i++) {\n          var keep = true;\n          var rawIndex = newStore.getRawIndex(i);\n          for (var k = 0; k < dimSize; k++) {\n            var dimk = dims[k];\n            var val = storeArr[dimk][rawIndex];\n            // Do not filter NaN, see comment above.\n            if (val < range[dimk][0] || val > range[dimk][1]) {\n              keep = false;\n            }\n          }\n          if (keep) {\n            newIndices[offset++] = newStore.getRawIndex(i);\n          }\n        }\n      }\n    }\n    // Set indices after filtered.\n    if (offset < originalCount) {\n      newStore._indices = newIndices;\n    }\n    newStore._count = offset;\n    // Reset data extent\n    newStore._extent = [];\n    newStore._updateGetRawIdx();\n    return newStore;\n  };\n  // /**\n  //  * Data mapping to a plain array\n  //  */\n  // mapArray(dims: DimensionIndex[], cb: MapArrayCb): any[] {\n  //     const result: any[] = [];\n  //     this.each(dims, function () {\n  //         result.push(cb && (cb as MapArrayCb).apply(null, arguments));\n  //     });\n  //     return result;\n  // }\n  /**\n   * Data mapping to a new List with given dimensions\n   */\n  DataStore.prototype.map = function (dims, cb) {\n    // TODO only clone picked chunks.\n    var target = this.clone(dims);\n    this._updateDims(target, dims, cb);\n    return target;\n  };\n  /**\n   * @caution Danger!! Only used in dataStack.\n   */\n  DataStore.prototype.modify = function (dims, cb) {\n    this._updateDims(this, dims, cb);\n  };\n  DataStore.prototype._updateDims = function (target, dims, cb) {\n    var targetChunks = target._chunks;\n    var tmpRetValue = [];\n    var dimSize = dims.length;\n    var dataCount = target.count();\n    var values = [];\n    var rawExtent = target._rawExtent;\n    for (var i = 0; i < dims.length; i++) {\n      rawExtent[dims[i]] = getInitialExtent();\n    }\n    for (var dataIndex = 0; dataIndex < dataCount; dataIndex++) {\n      var rawIndex = target.getRawIndex(dataIndex);\n      for (var k = 0; k < dimSize; k++) {\n        values[k] = targetChunks[dims[k]][rawIndex];\n      }\n      values[dimSize] = dataIndex;\n      var retValue = cb && cb.apply(null, values);\n      if (retValue != null) {\n        // a number or string (in oridinal dimension)?\n        if (typeof retValue !== 'object') {\n          tmpRetValue[0] = retValue;\n          retValue = tmpRetValue;\n        }\n        for (var i = 0; i < retValue.length; i++) {\n          var dim = dims[i];\n          var val = retValue[i];\n          var rawExtentOnDim = rawExtent[dim];\n          var dimStore = targetChunks[dim];\n          if (dimStore) {\n            dimStore[rawIndex] = val;\n          }\n          if (val < rawExtentOnDim[0]) {\n            rawExtentOnDim[0] = val;\n          }\n          if (val > rawExtentOnDim[1]) {\n            rawExtentOnDim[1] = val;\n          }\n        }\n      }\n    }\n  };\n  /**\n   * Large data down sampling using largest-triangle-three-buckets\n   * @param {string} valueDimension\n   * @param {number} targetCount\n   */\n  DataStore.prototype.lttbDownSample = function (valueDimension, rate) {\n    var target = this.clone([valueDimension], true);\n    var targetStorage = target._chunks;\n    var dimStore = targetStorage[valueDimension];\n    var len = this.count();\n    var sampledIndex = 0;\n    var frameSize = Math.floor(1 / rate);\n    var currentRawIndex = this.getRawIndex(0);\n    var maxArea;\n    var area;\n    var nextRawIndex;\n    var newIndices = new (getIndicesCtor(this._rawCount))(Math.min((Math.ceil(len / frameSize) + 2) * 2, len));\n    // First frame use the first data.\n    newIndices[sampledIndex++] = currentRawIndex;\n    for (var i = 1; i < len - 1; i += frameSize) {\n      var nextFrameStart = Math.min(i + frameSize, len - 1);\n      var nextFrameEnd = Math.min(i + frameSize * 2, len);\n      var avgX = (nextFrameEnd + nextFrameStart) / 2;\n      var avgY = 0;\n      for (var idx = nextFrameStart; idx < nextFrameEnd; idx++) {\n        var rawIndex = this.getRawIndex(idx);\n        var y = dimStore[rawIndex];\n        if (isNaN(y)) {\n          continue;\n        }\n        avgY += y;\n      }\n      avgY /= nextFrameEnd - nextFrameStart;\n      var frameStart = i;\n      var frameEnd = Math.min(i + frameSize, len);\n      var pointAX = i - 1;\n      var pointAY = dimStore[currentRawIndex];\n      maxArea = -1;\n      nextRawIndex = frameStart;\n      var firstNaNIndex = -1;\n      var countNaN = 0;\n      // Find a point from current frame that construct a triangle with largest area with previous selected point\n      // And the average of next frame.\n      for (var idx = frameStart; idx < frameEnd; idx++) {\n        var rawIndex = this.getRawIndex(idx);\n        var y = dimStore[rawIndex];\n        if (isNaN(y)) {\n          countNaN++;\n          if (firstNaNIndex < 0) {\n            firstNaNIndex = rawIndex;\n          }\n          continue;\n        }\n        // Calculate triangle area over three buckets\n        area = Math.abs((pointAX - avgX) * (y - pointAY) - (pointAX - idx) * (avgY - pointAY));\n        if (area > maxArea) {\n          maxArea = area;\n          nextRawIndex = rawIndex; // Next a is this b\n        }\n      }\n      if (countNaN > 0 && countNaN < frameEnd - frameStart) {\n        // Append first NaN point in every bucket.\n        // It is necessary to ensure the correct order of indices.\n        newIndices[sampledIndex++] = Math.min(firstNaNIndex, nextRawIndex);\n        nextRawIndex = Math.max(firstNaNIndex, nextRawIndex);\n      }\n      newIndices[sampledIndex++] = nextRawIndex;\n      currentRawIndex = nextRawIndex; // This a is the next a (chosen b)\n    }\n    // First frame use the last data.\n    newIndices[sampledIndex++] = this.getRawIndex(len - 1);\n    target._count = sampledIndex;\n    target._indices = newIndices;\n    target.getRawIndex = this._getRawIdx;\n    return target;\n  };\n  /**\n   * Large data down sampling using min-max\n   * @param {string} valueDimension\n   * @param {number} rate\n   */\n  DataStore.prototype.minmaxDownSample = function (valueDimension, rate) {\n    var target = this.clone([valueDimension], true);\n    var targetStorage = target._chunks;\n    var frameSize = Math.floor(1 / rate);\n    var dimStore = targetStorage[valueDimension];\n    var len = this.count();\n    // Each frame results in 2 data points, one for min and one for max\n    var newIndices = new (getIndicesCtor(this._rawCount))(Math.ceil(len / frameSize) * 2);\n    var offset = 0;\n    for (var i = 0; i < len; i += frameSize) {\n      var minIndex = i;\n      var minValue = dimStore[this.getRawIndex(minIndex)];\n      var maxIndex = i;\n      var maxValue = dimStore[this.getRawIndex(maxIndex)];\n      var thisFrameSize = frameSize;\n      // Handle final smaller frame\n      if (i + frameSize > len) {\n        thisFrameSize = len - i;\n      }\n      // Determine min and max within the current frame\n      for (var k = 0; k < thisFrameSize; k++) {\n        var rawIndex = this.getRawIndex(i + k);\n        var value = dimStore[rawIndex];\n        if (value < minValue) {\n          minValue = value;\n          minIndex = i + k;\n        }\n        if (value > maxValue) {\n          maxValue = value;\n          maxIndex = i + k;\n        }\n      }\n      var rawMinIndex = this.getRawIndex(minIndex);\n      var rawMaxIndex = this.getRawIndex(maxIndex);\n      // Set the order of the min and max values, based on their ordering in the frame\n      if (minIndex < maxIndex) {\n        newIndices[offset++] = rawMinIndex;\n        newIndices[offset++] = rawMaxIndex;\n      } else {\n        newIndices[offset++] = rawMaxIndex;\n        newIndices[offset++] = rawMinIndex;\n      }\n    }\n    target._count = offset;\n    target._indices = newIndices;\n    target._updateGetRawIdx();\n    return target;\n  };\n  /**\n   * Large data down sampling on given dimension\n   * @param sampleIndex Sample index for name and id\n   */\n  DataStore.prototype.downSample = function (dimension, rate, sampleValue, sampleIndex) {\n    var target = this.clone([dimension], true);\n    var targetStorage = target._chunks;\n    var frameValues = [];\n    var frameSize = Math.floor(1 / rate);\n    var dimStore = targetStorage[dimension];\n    var len = this.count();\n    var rawExtentOnDim = target._rawExtent[dimension] = getInitialExtent();\n    var newIndices = new (getIndicesCtor(this._rawCount))(Math.ceil(len / frameSize));\n    var offset = 0;\n    for (var i = 0; i < len; i += frameSize) {\n      // Last frame\n      if (frameSize > len - i) {\n        frameSize = len - i;\n        frameValues.length = frameSize;\n      }\n      for (var k = 0; k < frameSize; k++) {\n        var dataIdx = this.getRawIndex(i + k);\n        frameValues[k] = dimStore[dataIdx];\n      }\n      var value = sampleValue(frameValues);\n      var sampleFrameIdx = this.getRawIndex(Math.min(i + sampleIndex(frameValues, value) || 0, len - 1));\n      // Only write value on the filtered data\n      dimStore[sampleFrameIdx] = value;\n      if (value < rawExtentOnDim[0]) {\n        rawExtentOnDim[0] = value;\n      }\n      if (value > rawExtentOnDim[1]) {\n        rawExtentOnDim[1] = value;\n      }\n      newIndices[offset++] = sampleFrameIdx;\n    }\n    target._count = offset;\n    target._indices = newIndices;\n    target._updateGetRawIdx();\n    return target;\n  };\n  /**\n   * Data iteration\n   * @param ctx default this\n   * @example\n   *  list.each('x', function (x, idx) {});\n   *  list.each(['x', 'y'], function (x, y, idx) {});\n   *  list.each(function (idx) {})\n   */\n  DataStore.prototype.each = function (dims, cb) {\n    if (!this._count) {\n      return;\n    }\n    var dimSize = dims.length;\n    var chunks = this._chunks;\n    for (var i = 0, len = this.count(); i < len; i++) {\n      var rawIdx = this.getRawIndex(i);\n      // Simple optimization\n      switch (dimSize) {\n        case 0:\n          cb(i);\n          break;\n        case 1:\n          cb(chunks[dims[0]][rawIdx], i);\n          break;\n        case 2:\n          cb(chunks[dims[0]][rawIdx], chunks[dims[1]][rawIdx], i);\n          break;\n        default:\n          var k = 0;\n          var value = [];\n          for (; k < dimSize; k++) {\n            value[k] = chunks[dims[k]][rawIdx];\n          }\n          // Index\n          value[k] = i;\n          cb.apply(null, value);\n      }\n    }\n  };\n  /**\n   * Get extent of data in one dimension\n   */\n  DataStore.prototype.getDataExtent = function (dim) {\n    // Make sure use concrete dim as cache name.\n    var dimData = this._chunks[dim];\n    var initialExtent = getInitialExtent();\n    if (!dimData) {\n      return initialExtent;\n    }\n    // Make more strict checkings to ensure hitting cache.\n    var currEnd = this.count();\n    // Consider the most cases when using data zoom, `getDataExtent`\n    // happened before filtering. We cache raw extent, which is not\n    // necessary to be cleared and recalculated when restore data.\n    var useRaw = !this._indices;\n    var dimExtent;\n    if (useRaw) {\n      return this._rawExtent[dim].slice();\n    }\n    dimExtent = this._extent[dim];\n    if (dimExtent) {\n      return dimExtent.slice();\n    }\n    dimExtent = initialExtent;\n    var min = dimExtent[0];\n    var max = dimExtent[1];\n    for (var i = 0; i < currEnd; i++) {\n      var rawIdx = this.getRawIndex(i);\n      var value = dimData[rawIdx];\n      value < min && (min = value);\n      value > max && (max = value);\n    }\n    dimExtent = [min, max];\n    this._extent[dim] = dimExtent;\n    return dimExtent;\n  };\n  /**\n   * Get raw data item\n   */\n  DataStore.prototype.getRawDataItem = function (idx) {\n    var rawIdx = this.getRawIndex(idx);\n    if (!this._provider.persistent) {\n      var val = [];\n      var chunks = this._chunks;\n      for (var i = 0; i < chunks.length; i++) {\n        val.push(chunks[i][rawIdx]);\n      }\n      return val;\n    } else {\n      return this._provider.getItem(rawIdx);\n    }\n  };\n  /**\n   * Clone shallow.\n   *\n   * @param clonedDims Determine which dims to clone. Will share the data if not specified.\n   */\n  DataStore.prototype.clone = function (clonedDims, ignoreIndices) {\n    var target = new DataStore();\n    var chunks = this._chunks;\n    var clonedDimsMap = clonedDims && reduce(clonedDims, function (obj, dimIdx) {\n      obj[dimIdx] = true;\n      return obj;\n    }, {});\n    if (clonedDimsMap) {\n      for (var i = 0; i < chunks.length; i++) {\n        // Not clone if dim is not picked.\n        target._chunks[i] = !clonedDimsMap[i] ? chunks[i] : cloneChunk(chunks[i]);\n      }\n    } else {\n      target._chunks = chunks;\n    }\n    this._copyCommonProps(target);\n    if (!ignoreIndices) {\n      target._indices = this._cloneIndices();\n    }\n    target._updateGetRawIdx();\n    return target;\n  };\n  DataStore.prototype._copyCommonProps = function (target) {\n    target._count = this._count;\n    target._rawCount = this._rawCount;\n    target._provider = this._provider;\n    target._dimensions = this._dimensions;\n    target._extent = clone(this._extent);\n    target._rawExtent = clone(this._rawExtent);\n  };\n  DataStore.prototype._cloneIndices = function () {\n    if (this._indices) {\n      var Ctor = this._indices.constructor;\n      var indices = void 0;\n      if (Ctor === Array) {\n        var thisCount = this._indices.length;\n        indices = new Ctor(thisCount);\n        for (var i = 0; i < thisCount; i++) {\n          indices[i] = this._indices[i];\n        }\n      } else {\n        indices = new Ctor(this._indices);\n      }\n      return indices;\n    }\n    return null;\n  };\n  DataStore.prototype._getRawIdxIdentity = function (idx) {\n    return idx;\n  };\n  DataStore.prototype._getRawIdx = function (idx) {\n    if (idx < this._count && idx >= 0) {\n      return this._indices[idx];\n    }\n    return -1;\n  };\n  DataStore.prototype._updateGetRawIdx = function () {\n    this.getRawIndex = this._indices ? this._getRawIdx : this._getRawIdxIdentity;\n  };\n  DataStore.internalField = function () {\n    function getDimValueSimply(dataItem, property, dataIndex, dimIndex) {\n      return parseDataValue(dataItem[dimIndex], this._dimensions[dimIndex]);\n    }\n    defaultDimValueGetters = {\n      arrayRows: getDimValueSimply,\n      objectRows: function (dataItem, property, dataIndex, dimIndex) {\n        return parseDataValue(dataItem[property], this._dimensions[dimIndex]);\n      },\n      keyedColumns: getDimValueSimply,\n      original: function (dataItem, property, dataIndex, dimIndex) {\n        // Performance sensitive, do not use modelUtil.getDataItemValue.\n        // If dataItem is an plain object with no value field, the let `value`\n        // will be assigned with the object, but it will be tread correctly\n        // in the `convertValue`.\n        var value = dataItem && (dataItem.value == null ? dataItem : dataItem.value);\n        return parseDataValue(value instanceof Array ? value[dimIndex]\n        // If value is a single number or something else not array.\n        : value, this._dimensions[dimIndex]);\n      },\n      typedArray: function (dataItem, property, dataIndex, dimIndex) {\n        return dataItem[dimIndex];\n      }\n    };\n  }();\n  return DataStore;\n}();\nexport default DataStore;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createHashMap, isObject, retrieve2 } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nimport { shouldRetrieveDataByName } from '../Source.js';\nvar inner = makeInner();\nvar dimTypeShort = {\n  float: 'f',\n  int: 'i',\n  ordinal: 'o',\n  number: 'n',\n  time: 't'\n};\n/**\n * Represents the dimension requirement of a series.\n *\n * NOTICE:\n * When there are too many dimensions in dataset and many series, only the used dimensions\n * (i.e., used by coord sys and declared in `series.encode`) are add to `dimensionDefineList`.\n * But users may query data by other unused dimension names.\n * In this case, users can only query data if and only if they have defined dimension names\n * via ec option, so we provide `getDimensionIndexFromSource`, which only query them from\n * `source` dimensions.\n */\nvar SeriesDataSchema = /** @class */function () {\n  function SeriesDataSchema(opt) {\n    this.dimensions = opt.dimensions;\n    this._dimOmitted = opt.dimensionOmitted;\n    this.source = opt.source;\n    this._fullDimCount = opt.fullDimensionCount;\n    this._updateDimOmitted(opt.dimensionOmitted);\n  }\n  SeriesDataSchema.prototype.isDimensionOmitted = function () {\n    return this._dimOmitted;\n  };\n  SeriesDataSchema.prototype._updateDimOmitted = function (dimensionOmitted) {\n    this._dimOmitted = dimensionOmitted;\n    if (!dimensionOmitted) {\n      return;\n    }\n    if (!this._dimNameMap) {\n      this._dimNameMap = ensureSourceDimNameMap(this.source);\n    }\n  };\n  /**\n   * @caution Can only be used when `dimensionOmitted: true`.\n   *\n   * Get index by user defined dimension name (i.e., not internal generate name).\n   * That is, get index from `dimensionsDefine`.\n   * If no `dimensionsDefine`, or no name get, return -1.\n   */\n  SeriesDataSchema.prototype.getSourceDimensionIndex = function (dimName) {\n    return retrieve2(this._dimNameMap.get(dimName), -1);\n  };\n  /**\n   * @caution Can only be used when `dimensionOmitted: true`.\n   *\n   * Notice: may return `null`/`undefined` if user not specify dimension names.\n   */\n  SeriesDataSchema.prototype.getSourceDimension = function (dimIndex) {\n    var dimensionsDefine = this.source.dimensionsDefine;\n    if (dimensionsDefine) {\n      return dimensionsDefine[dimIndex];\n    }\n  };\n  SeriesDataSchema.prototype.makeStoreSchema = function () {\n    var dimCount = this._fullDimCount;\n    var willRetrieveDataByName = shouldRetrieveDataByName(this.source);\n    var makeHashStrict = !shouldOmitUnusedDimensions(dimCount);\n    // If source don't have dimensions or series don't omit unsed dimensions.\n    // Generate from seriesDimList directly\n    var dimHash = '';\n    var dims = [];\n    for (var fullDimIdx = 0, seriesDimIdx = 0; fullDimIdx < dimCount; fullDimIdx++) {\n      var property = void 0;\n      var type = void 0;\n      var ordinalMeta = void 0;\n      var seriesDimDef = this.dimensions[seriesDimIdx];\n      // The list has been sorted by `storeDimIndex` asc.\n      if (seriesDimDef && seriesDimDef.storeDimIndex === fullDimIdx) {\n        property = willRetrieveDataByName ? seriesDimDef.name : null;\n        type = seriesDimDef.type;\n        ordinalMeta = seriesDimDef.ordinalMeta;\n        seriesDimIdx++;\n      } else {\n        var sourceDimDef = this.getSourceDimension(fullDimIdx);\n        if (sourceDimDef) {\n          property = willRetrieveDataByName ? sourceDimDef.name : null;\n          type = sourceDimDef.type;\n        }\n      }\n      dims.push({\n        property: property,\n        type: type,\n        ordinalMeta: ordinalMeta\n      });\n      // If retrieving data by index,\n      //   use <index, type, ordinalMeta> to determine whether data can be shared.\n      //   (Because in this case there might be no dimension name defined in dataset, but indices always exists).\n      //   (Indices are always 0, 1, 2, ..., so we can ignore them to shorten the hash).\n      // Otherwise if retrieving data by property name (like `data: [{aa: 123, bb: 765}, ...]`),\n      //   use <property, type, ordinalMeta> in hash.\n      if (willRetrieveDataByName && property != null\n      // For data stack, we have make sure each series has its own dim on this store.\n      // So we do not add property to hash to make sure they can share this store.\n      && (!seriesDimDef || !seriesDimDef.isCalculationCoord)) {\n        dimHash += makeHashStrict\n        // Use escape character '`' in case that property name contains '$'.\n        ? property.replace(/\\`/g, '`1').replace(/\\$/g, '`2')\n        // For better performance, when there are large dimensions, tolerant this defects that hardly meet.\n        : property;\n      }\n      dimHash += '$';\n      dimHash += dimTypeShort[type] || 'f';\n      if (ordinalMeta) {\n        dimHash += ordinalMeta.uid;\n      }\n      dimHash += '$';\n    }\n    // Source from endpoint(usually series) will be read differently\n    // when seriesLayoutBy or startIndex(which is affected by sourceHeader) are different.\n    // So we use this three props as key.\n    var source = this.source;\n    var hash = [source.seriesLayoutBy, source.startIndex, dimHash].join('$$');\n    return {\n      dimensions: dims,\n      hash: hash\n    };\n  };\n  SeriesDataSchema.prototype.makeOutputDimensionNames = function () {\n    var result = [];\n    for (var fullDimIdx = 0, seriesDimIdx = 0; fullDimIdx < this._fullDimCount; fullDimIdx++) {\n      var name_1 = void 0;\n      var seriesDimDef = this.dimensions[seriesDimIdx];\n      // The list has been sorted by `storeDimIndex` asc.\n      if (seriesDimDef && seriesDimDef.storeDimIndex === fullDimIdx) {\n        if (!seriesDimDef.isCalculationCoord) {\n          name_1 = seriesDimDef.name;\n        }\n        seriesDimIdx++;\n      } else {\n        var sourceDimDef = this.getSourceDimension(fullDimIdx);\n        if (sourceDimDef) {\n          name_1 = sourceDimDef.name;\n        }\n      }\n      result.push(name_1);\n    }\n    return result;\n  };\n  SeriesDataSchema.prototype.appendCalculationDimension = function (dimDef) {\n    this.dimensions.push(dimDef);\n    dimDef.isCalculationCoord = true;\n    this._fullDimCount++;\n    // If append dimension on a data store, consider the store\n    // might be shared by different series, series dimensions not\n    // really map to store dimensions.\n    this._updateDimOmitted(true);\n  };\n  return SeriesDataSchema;\n}();\nexport { SeriesDataSchema };\nexport function isSeriesDataSchema(schema) {\n  return schema instanceof SeriesDataSchema;\n}\nexport function createDimNameMap(dimsDef) {\n  var dataDimNameMap = createHashMap();\n  for (var i = 0; i < (dimsDef || []).length; i++) {\n    var dimDefItemRaw = dimsDef[i];\n    var userDimName = isObject(dimDefItemRaw) ? dimDefItemRaw.name : dimDefItemRaw;\n    if (userDimName != null && dataDimNameMap.get(userDimName) == null) {\n      dataDimNameMap.set(userDimName, i);\n    }\n  }\n  return dataDimNameMap;\n}\nexport function ensureSourceDimNameMap(source) {\n  var innerSource = inner(source);\n  return innerSource.dimNameMap || (innerSource.dimNameMap = createDimNameMap(source.dimensionsDefine));\n}\nexport function shouldOmitUnusedDimensions(dimCount) {\n  return dimCount > 30;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/* global Int32Array */\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Model from '../model/Model.js';\nimport DataDiffer from './DataDiffer.js';\nimport { DefaultDataProvider } from './helper/dataProvider.js';\nimport { summarizeDimensions } from './helper/dimensionHelper.js';\nimport SeriesDimensionDefine from './SeriesDimensionDefine.js';\nimport { SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ORIGINAL } from '../util/types.js';\nimport { convertOptionIdName, isDataItemOption } from '../util/model.js';\nimport { setCommonECData } from '../util/innerStore.js';\nimport { isSourceInstance } from './Source.js';\nimport DataStore from './DataStore.js';\nimport { isSeriesDataSchema } from './helper/SeriesDataSchema.js';\nvar isObject = zrUtil.isObject;\nvar map = zrUtil.map;\nvar CtorInt32Array = typeof Int32Array === 'undefined' ? Array : Int32Array;\n// Use prefix to avoid index to be the same as otherIdList[idx],\n// which will cause weird update animation.\nvar ID_PREFIX = 'e\\0\\0';\nvar INDEX_NOT_FOUND = -1;\n// type SeriesDimensionIndex = DimensionIndex;\nvar TRANSFERABLE_PROPERTIES = ['hasItemOption', '_nameList', '_idList', '_invertedIndicesMap', '_dimSummary', 'userOutput', '_rawData', '_dimValueGetter', '_nameDimIdx', '_idDimIdx', '_nameRepeatCount'];\nvar CLONE_PROPERTIES = ['_approximateExtent'];\n// -----------------------------\n// Internal method declarations:\n// -----------------------------\nvar prepareInvertedIndex;\nvar getId;\nvar getIdNameFromStore;\nvar normalizeDimensions;\nvar transferProperties;\nvar cloneListForMapAndSample;\nvar makeIdFromName;\nvar SeriesData = /** @class */function () {\n  /**\n   * @param dimensionsInput.dimensions\n   *        For example, ['someDimName', {name: 'someDimName', type: 'someDimType'}, ...].\n   *        Dimensions should be concrete names like x, y, z, lng, lat, angle, radius\n   */\n  function SeriesData(dimensionsInput, hostModel) {\n    this.type = 'list';\n    this._dimOmitted = false;\n    this._nameList = [];\n    this._idList = [];\n    // Models of data option is stored sparse for optimizing memory cost\n    // Never used yet (not used yet).\n    // private _optionModels: Model[] = [];\n    // Global visual properties after visual coding\n    this._visual = {};\n    // Global layout properties.\n    this._layout = {};\n    // Item visual properties after visual coding\n    this._itemVisuals = [];\n    // Item layout properties after layout\n    this._itemLayouts = [];\n    // Graphic elements\n    this._graphicEls = [];\n    // key: dim, value: extent\n    this._approximateExtent = {};\n    this._calculationInfo = {};\n    // Having detected that there is data item is non primitive type\n    // (in type `OptionDataItemObject`).\n    // Like `data: [ { value: xx, itemStyle: {...} }, ...]`\n    // At present it only happen in `SOURCE_FORMAT_ORIGINAL`.\n    this.hasItemOption = false;\n    // Methods that create a new list based on this list should be listed here.\n    // Notice that those method should `RETURN` the new list.\n    this.TRANSFERABLE_METHODS = ['cloneShallow', 'downSample', 'minmaxDownSample', 'lttbDownSample', 'map'];\n    // Methods that change indices of this list should be listed here.\n    this.CHANGABLE_METHODS = ['filterSelf', 'selectRange'];\n    this.DOWNSAMPLE_METHODS = ['downSample', 'minmaxDownSample', 'lttbDownSample'];\n    var dimensions;\n    var assignStoreDimIdx = false;\n    if (isSeriesDataSchema(dimensionsInput)) {\n      dimensions = dimensionsInput.dimensions;\n      this._dimOmitted = dimensionsInput.isDimensionOmitted();\n      this._schema = dimensionsInput;\n    } else {\n      assignStoreDimIdx = true;\n      dimensions = dimensionsInput;\n    }\n    dimensions = dimensions || ['x', 'y'];\n    var dimensionInfos = {};\n    var dimensionNames = [];\n    var invertedIndicesMap = {};\n    var needsHasOwn = false;\n    var emptyObj = {};\n    for (var i = 0; i < dimensions.length; i++) {\n      // Use the original dimensions[i], where other flag props may exists.\n      var dimInfoInput = dimensions[i];\n      var dimensionInfo = zrUtil.isString(dimInfoInput) ? new SeriesDimensionDefine({\n        name: dimInfoInput\n      }) : !(dimInfoInput instanceof SeriesDimensionDefine) ? new SeriesDimensionDefine(dimInfoInput) : dimInfoInput;\n      var dimensionName = dimensionInfo.name;\n      dimensionInfo.type = dimensionInfo.type || 'float';\n      if (!dimensionInfo.coordDim) {\n        dimensionInfo.coordDim = dimensionName;\n        dimensionInfo.coordDimIndex = 0;\n      }\n      var otherDims = dimensionInfo.otherDims = dimensionInfo.otherDims || {};\n      dimensionNames.push(dimensionName);\n      dimensionInfos[dimensionName] = dimensionInfo;\n      if (emptyObj[dimensionName] != null) {\n        needsHasOwn = true;\n      }\n      if (dimensionInfo.createInvertedIndices) {\n        invertedIndicesMap[dimensionName] = [];\n      }\n      var dimIdx = i;\n      if (zrUtil.isNumber(dimensionInfo.storeDimIndex)) {\n        dimIdx = dimensionInfo.storeDimIndex;\n      }\n      if (otherDims.itemName === 0) {\n        this._nameDimIdx = dimIdx;\n      }\n      if (otherDims.itemId === 0) {\n        this._idDimIdx = dimIdx;\n      }\n      if (process.env.NODE_ENV !== 'production') {\n        zrUtil.assert(assignStoreDimIdx || dimensionInfo.storeDimIndex >= 0);\n      }\n      if (assignStoreDimIdx) {\n        dimensionInfo.storeDimIndex = i;\n      }\n    }\n    this.dimensions = dimensionNames;\n    this._dimInfos = dimensionInfos;\n    this._initGetDimensionInfo(needsHasOwn);\n    this.hostModel = hostModel;\n    this._invertedIndicesMap = invertedIndicesMap;\n    if (this._dimOmitted) {\n      var dimIdxToName_1 = this._dimIdxToName = zrUtil.createHashMap();\n      zrUtil.each(dimensionNames, function (dimName) {\n        dimIdxToName_1.set(dimensionInfos[dimName].storeDimIndex, dimName);\n      });\n    }\n  }\n  /**\n   *\n   * Get concrete dimension name by dimension name or dimension index.\n   * If input a dimension name, do not validate whether the dimension name exits.\n   *\n   * @caution\n   * @param dim Must make sure the dimension is `SeriesDimensionLoose`.\n   * Because only those dimensions will have auto-generated dimension names if not\n   * have a user-specified name, and other dimensions will get a return of null/undefined.\n   *\n   * @notice Because of this reason, should better use `getDimensionIndex` instead, for examples:\n   * ```js\n   * const val = data.getStore().get(data.getDimensionIndex(dim), dataIdx);\n   * ```\n   *\n   * @return Concrete dim name.\n   */\n  SeriesData.prototype.getDimension = function (dim) {\n    var dimIdx = this._recognizeDimIndex(dim);\n    if (dimIdx == null) {\n      return dim;\n    }\n    dimIdx = dim;\n    if (!this._dimOmitted) {\n      return this.dimensions[dimIdx];\n    }\n    // Retrieve from series dimension definition because it probably contains\n    // generated dimension name (like 'x', 'y').\n    var dimName = this._dimIdxToName.get(dimIdx);\n    if (dimName != null) {\n      return dimName;\n    }\n    var sourceDimDef = this._schema.getSourceDimension(dimIdx);\n    if (sourceDimDef) {\n      return sourceDimDef.name;\n    }\n  };\n  /**\n   * Get dimension index in data store. Return -1 if not found.\n   * Can be used to index value from getRawValue.\n   */\n  SeriesData.prototype.getDimensionIndex = function (dim) {\n    var dimIdx = this._recognizeDimIndex(dim);\n    if (dimIdx != null) {\n      return dimIdx;\n    }\n    if (dim == null) {\n      return -1;\n    }\n    var dimInfo = this._getDimInfo(dim);\n    return dimInfo ? dimInfo.storeDimIndex : this._dimOmitted ? this._schema.getSourceDimensionIndex(dim) : -1;\n  };\n  /**\n   * The meanings of the input parameter `dim`:\n   *\n   * + If dim is a number (e.g., `1`), it means the index of the dimension.\n   *   For example, `getDimension(0)` will return 'x' or 'lng' or 'radius'.\n   * + If dim is a number-like string (e.g., `\"1\"`):\n   *     + If there is the same concrete dim name defined in `series.dimensions` or `dataset.dimensions`,\n   *        it means that concrete name.\n   *     + If not, it will be converted to a number, which means the index of the dimension.\n   *        (why? because of the backward compatibility. We have been tolerating number-like string in\n   *        dimension setting, although now it seems that it is not a good idea.)\n   *     For example, `visualMap[i].dimension: \"1\"` is the same meaning as `visualMap[i].dimension: 1`,\n   *     if no dimension name is defined as `\"1\"`.\n   * + If dim is a not-number-like string, it means the concrete dim name.\n   *   For example, it can be be default name `\"x\"`, `\"y\"`, `\"z\"`, `\"lng\"`, `\"lat\"`, `\"angle\"`, `\"radius\"`,\n   *   or customized in `dimensions` property of option like `\"age\"`.\n   *\n   * @return recognized `DimensionIndex`. Otherwise return null/undefined (means that dim is `DimensionName`).\n   */\n  SeriesData.prototype._recognizeDimIndex = function (dim) {\n    if (zrUtil.isNumber(dim)\n    // If being a number-like string but not being defined as a dimension name.\n    || dim != null && !isNaN(dim) && !this._getDimInfo(dim) && (!this._dimOmitted || this._schema.getSourceDimensionIndex(dim) < 0)) {\n      return +dim;\n    }\n  };\n  SeriesData.prototype._getStoreDimIndex = function (dim) {\n    var dimIdx = this.getDimensionIndex(dim);\n    if (process.env.NODE_ENV !== 'production') {\n      if (dimIdx == null) {\n        throw new Error('Unknown dimension ' + dim);\n      }\n    }\n    return dimIdx;\n  };\n  /**\n   * Get type and calculation info of particular dimension\n   * @param dim\n   *        Dimension can be concrete names like x, y, z, lng, lat, angle, radius\n   *        Or a ordinal number. For example getDimensionInfo(0) will return 'x' or 'lng' or 'radius'\n   */\n  SeriesData.prototype.getDimensionInfo = function (dim) {\n    // Do not clone, because there may be categories in dimInfo.\n    return this._getDimInfo(this.getDimension(dim));\n  };\n  SeriesData.prototype._initGetDimensionInfo = function (needsHasOwn) {\n    var dimensionInfos = this._dimInfos;\n    this._getDimInfo = needsHasOwn ? function (dimName) {\n      return dimensionInfos.hasOwnProperty(dimName) ? dimensionInfos[dimName] : undefined;\n    } : function (dimName) {\n      return dimensionInfos[dimName];\n    };\n  };\n  /**\n   * concrete dimension name list on coord.\n   */\n  SeriesData.prototype.getDimensionsOnCoord = function () {\n    return this._dimSummary.dataDimsOnCoord.slice();\n  };\n  SeriesData.prototype.mapDimension = function (coordDim, idx) {\n    var dimensionsSummary = this._dimSummary;\n    if (idx == null) {\n      return dimensionsSummary.encodeFirstDimNotExtra[coordDim];\n    }\n    var dims = dimensionsSummary.encode[coordDim];\n    return dims ? dims[idx] : null;\n  };\n  SeriesData.prototype.mapDimensionsAll = function (coordDim) {\n    var dimensionsSummary = this._dimSummary;\n    var dims = dimensionsSummary.encode[coordDim];\n    return (dims || []).slice();\n  };\n  SeriesData.prototype.getStore = function () {\n    return this._store;\n  };\n  /**\n   * Initialize from data\n   * @param data source or data or data store.\n   * @param nameList The name of a datum is used on data diff and\n   *        default label/tooltip.\n   *        A name can be specified in encode.itemName,\n   *        or dataItem.name (only for series option data),\n   *        or provided in nameList from outside.\n   */\n  SeriesData.prototype.initData = function (data, nameList, dimValueGetter) {\n    var _this = this;\n    var store;\n    if (data instanceof DataStore) {\n      store = data;\n    }\n    if (!store) {\n      var dimensions = this.dimensions;\n      var provider = isSourceInstance(data) || zrUtil.isArrayLike(data) ? new DefaultDataProvider(data, dimensions.length) : data;\n      store = new DataStore();\n      var dimensionInfos = map(dimensions, function (dimName) {\n        return {\n          type: _this._dimInfos[dimName].type,\n          property: dimName\n        };\n      });\n      store.initData(provider, dimensionInfos, dimValueGetter);\n    }\n    this._store = store;\n    // Reset\n    this._nameList = (nameList || []).slice();\n    this._idList = [];\n    this._nameRepeatCount = {};\n    this._doInit(0, store.count());\n    // Cache summary info for fast visit. See \"dimensionHelper\".\n    // Needs to be initialized after store is prepared.\n    this._dimSummary = summarizeDimensions(this, this._schema);\n    this.userOutput = this._dimSummary.userOutput;\n  };\n  /**\n   * Caution: Can be only called on raw data (before `this._indices` created).\n   */\n  SeriesData.prototype.appendData = function (data) {\n    var range = this._store.appendData(data);\n    this._doInit(range[0], range[1]);\n  };\n  /**\n   * Caution: Can be only called on raw data (before `this._indices` created).\n   * This method does not modify `rawData` (`dataProvider`), but only\n   * add values to store.\n   *\n   * The final count will be increased by `Math.max(values.length, names.length)`.\n   *\n   * @param values That is the SourceType: 'arrayRows', like\n   *        [\n   *            [12, 33, 44],\n   *            [NaN, 43, 1],\n   *            ['-', 'asdf', 0]\n   *        ]\n   *        Each item is exactly corresponding to a dimension.\n   */\n  SeriesData.prototype.appendValues = function (values, names) {\n    var _a = this._store.appendValues(values, names && names.length),\n      start = _a.start,\n      end = _a.end;\n    var shouldMakeIdFromName = this._shouldMakeIdFromName();\n    this._updateOrdinalMeta();\n    if (names) {\n      for (var idx = start; idx < end; idx++) {\n        var sourceIdx = idx - start;\n        this._nameList[idx] = names[sourceIdx];\n        if (shouldMakeIdFromName) {\n          makeIdFromName(this, idx);\n        }\n      }\n    }\n  };\n  SeriesData.prototype._updateOrdinalMeta = function () {\n    var store = this._store;\n    var dimensions = this.dimensions;\n    for (var i = 0; i < dimensions.length; i++) {\n      var dimInfo = this._dimInfos[dimensions[i]];\n      if (dimInfo.ordinalMeta) {\n        store.collectOrdinalMeta(dimInfo.storeDimIndex, dimInfo.ordinalMeta);\n      }\n    }\n  };\n  SeriesData.prototype._shouldMakeIdFromName = function () {\n    var provider = this._store.getProvider();\n    return this._idDimIdx == null && provider.getSource().sourceFormat !== SOURCE_FORMAT_TYPED_ARRAY && !provider.fillStorage;\n  };\n  SeriesData.prototype._doInit = function (start, end) {\n    if (start >= end) {\n      return;\n    }\n    var store = this._store;\n    var provider = store.getProvider();\n    this._updateOrdinalMeta();\n    var nameList = this._nameList;\n    var idList = this._idList;\n    var sourceFormat = provider.getSource().sourceFormat;\n    var isFormatOriginal = sourceFormat === SOURCE_FORMAT_ORIGINAL;\n    // Each data item is value\n    // [1, 2]\n    // 2\n    // Bar chart, line chart which uses category axis\n    // only gives the 'y' value. 'x' value is the indices of category\n    // Use a tempValue to normalize the value to be a (x, y) value\n    // If dataItem is {name: ...} or {id: ...}, it has highest priority.\n    // This kind of ids and names are always stored `_nameList` and `_idList`.\n    if (isFormatOriginal && !provider.pure) {\n      var sharedDataItem = [];\n      for (var idx = start; idx < end; idx++) {\n        // NOTICE: Try not to write things into dataItem\n        var dataItem = provider.getItem(idx, sharedDataItem);\n        if (!this.hasItemOption && isDataItemOption(dataItem)) {\n          this.hasItemOption = true;\n        }\n        if (dataItem) {\n          var itemName = dataItem.name;\n          if (nameList[idx] == null && itemName != null) {\n            nameList[idx] = convertOptionIdName(itemName, null);\n          }\n          var itemId = dataItem.id;\n          if (idList[idx] == null && itemId != null) {\n            idList[idx] = convertOptionIdName(itemId, null);\n          }\n        }\n      }\n    }\n    if (this._shouldMakeIdFromName()) {\n      for (var idx = start; idx < end; idx++) {\n        makeIdFromName(this, idx);\n      }\n    }\n    prepareInvertedIndex(this);\n  };\n  /**\n   * PENDING: In fact currently this function is only used to short-circuit\n   * the calling of `scale.unionExtentFromData` when data have been filtered by modules\n   * like \"dataZoom\". `scale.unionExtentFromData` is used to calculate data extent for series on\n   * an axis, but if a \"axis related data filter module\" is used, the extent of the axis have\n   * been fixed and no need to calling `scale.unionExtentFromData` actually.\n   * But if we add \"custom data filter\" in future, which is not \"axis related\", this method may\n   * be still needed.\n   *\n   * Optimize for the scenario that data is filtered by a given extent.\n   * Consider that if data amount is more than hundreds of thousand,\n   * extent calculation will cost more than 10ms and the cache will\n   * be erased because of the filtering.\n   */\n  SeriesData.prototype.getApproximateExtent = function (dim) {\n    return this._approximateExtent[dim] || this._store.getDataExtent(this._getStoreDimIndex(dim));\n  };\n  /**\n   * Calculate extent on a filtered data might be time consuming.\n   * Approximate extent is only used for: calculate extent of filtered data outside.\n   */\n  SeriesData.prototype.setApproximateExtent = function (extent, dim) {\n    dim = this.getDimension(dim);\n    this._approximateExtent[dim] = extent.slice();\n  };\n  SeriesData.prototype.getCalculationInfo = function (key) {\n    return this._calculationInfo[key];\n  };\n  SeriesData.prototype.setCalculationInfo = function (key, value) {\n    isObject(key) ? zrUtil.extend(this._calculationInfo, key) : this._calculationInfo[key] = value;\n  };\n  /**\n   * @return Never be null/undefined. `number` will be converted to string. Because:\n   * In most cases, name is used in display, where returning a string is more convenient.\n   * In other cases, name is used in query (see `indexOfName`), where we can keep the\n   * rule that name `2` equals to name `'2'`.\n   */\n  SeriesData.prototype.getName = function (idx) {\n    var rawIndex = this.getRawIndex(idx);\n    var name = this._nameList[rawIndex];\n    if (name == null && this._nameDimIdx != null) {\n      name = getIdNameFromStore(this, this._nameDimIdx, rawIndex);\n    }\n    if (name == null) {\n      name = '';\n    }\n    return name;\n  };\n  SeriesData.prototype._getCategory = function (dimIdx, idx) {\n    var ordinal = this._store.get(dimIdx, idx);\n    var ordinalMeta = this._store.getOrdinalMeta(dimIdx);\n    if (ordinalMeta) {\n      return ordinalMeta.categories[ordinal];\n    }\n    return ordinal;\n  };\n  /**\n   * @return Never null/undefined. `number` will be converted to string. Because:\n   * In all cases having encountered at present, id is used in making diff comparison, which\n   * are usually based on hash map. We can keep the rule that the internal id are always string\n   * (treat `2` is the same as `'2'`) to make the related logic simple.\n   */\n  SeriesData.prototype.getId = function (idx) {\n    return getId(this, this.getRawIndex(idx));\n  };\n  SeriesData.prototype.count = function () {\n    return this._store.count();\n  };\n  /**\n   * Get value. Return NaN if idx is out of range.\n   *\n   * @notice Should better to use `data.getStore().get(dimIndex, dataIdx)` instead.\n   */\n  SeriesData.prototype.get = function (dim, idx) {\n    var store = this._store;\n    var dimInfo = this._dimInfos[dim];\n    if (dimInfo) {\n      return store.get(dimInfo.storeDimIndex, idx);\n    }\n  };\n  /**\n   * @notice Should better to use `data.getStore().getByRawIndex(dimIndex, dataIdx)` instead.\n   */\n  SeriesData.prototype.getByRawIndex = function (dim, rawIdx) {\n    var store = this._store;\n    var dimInfo = this._dimInfos[dim];\n    if (dimInfo) {\n      return store.getByRawIndex(dimInfo.storeDimIndex, rawIdx);\n    }\n  };\n  SeriesData.prototype.getIndices = function () {\n    return this._store.getIndices();\n  };\n  SeriesData.prototype.getDataExtent = function (dim) {\n    return this._store.getDataExtent(this._getStoreDimIndex(dim));\n  };\n  SeriesData.prototype.getSum = function (dim) {\n    return this._store.getSum(this._getStoreDimIndex(dim));\n  };\n  SeriesData.prototype.getMedian = function (dim) {\n    return this._store.getMedian(this._getStoreDimIndex(dim));\n  };\n  SeriesData.prototype.getValues = function (dimensions, idx) {\n    var _this = this;\n    var store = this._store;\n    return zrUtil.isArray(dimensions) ? store.getValues(map(dimensions, function (dim) {\n      return _this._getStoreDimIndex(dim);\n    }), idx) : store.getValues(dimensions);\n  };\n  /**\n   * If value is NaN. Including '-'\n   * Only check the coord dimensions.\n   */\n  SeriesData.prototype.hasValue = function (idx) {\n    var dataDimIndicesOnCoord = this._dimSummary.dataDimIndicesOnCoord;\n    for (var i = 0, len = dataDimIndicesOnCoord.length; i < len; i++) {\n      // Ordinal type originally can be string or number.\n      // But when an ordinal type is used on coord, it can\n      // not be string but only number. So we can also use isNaN.\n      if (isNaN(this._store.get(dataDimIndicesOnCoord[i], idx))) {\n        return false;\n      }\n    }\n    return true;\n  };\n  /**\n   * Retrieve the index with given name\n   */\n  SeriesData.prototype.indexOfName = function (name) {\n    for (var i = 0, len = this._store.count(); i < len; i++) {\n      if (this.getName(i) === name) {\n        return i;\n      }\n    }\n    return -1;\n  };\n  SeriesData.prototype.getRawIndex = function (idx) {\n    return this._store.getRawIndex(idx);\n  };\n  SeriesData.prototype.indexOfRawIndex = function (rawIndex) {\n    return this._store.indexOfRawIndex(rawIndex);\n  };\n  /**\n   * Only support the dimension which inverted index created.\n   * Do not support other cases until required.\n   * @param dim concrete dim\n   * @param value ordinal index\n   * @return rawIndex\n   */\n  SeriesData.prototype.rawIndexOf = function (dim, value) {\n    var invertedIndices = dim && this._invertedIndicesMap[dim];\n    if (process.env.NODE_ENV !== 'production') {\n      if (!invertedIndices) {\n        throw new Error('Do not supported yet');\n      }\n    }\n    var rawIndex = invertedIndices && invertedIndices[value];\n    if (rawIndex == null || isNaN(rawIndex)) {\n      return INDEX_NOT_FOUND;\n    }\n    return rawIndex;\n  };\n  SeriesData.prototype.each = function (dims, cb, ctx) {\n    'use strict';\n\n    if (zrUtil.isFunction(dims)) {\n      ctx = cb;\n      cb = dims;\n      dims = [];\n    }\n    // ctxCompat just for compat echarts3\n    var fCtx = ctx || this;\n    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);\n    this._store.each(dimIndices, fCtx ? zrUtil.bind(cb, fCtx) : cb);\n  };\n  SeriesData.prototype.filterSelf = function (dims, cb, ctx) {\n    'use strict';\n\n    if (zrUtil.isFunction(dims)) {\n      ctx = cb;\n      cb = dims;\n      dims = [];\n    }\n    // ctxCompat just for compat echarts3\n    var fCtx = ctx || this;\n    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);\n    this._store = this._store.filter(dimIndices, fCtx ? zrUtil.bind(cb, fCtx) : cb);\n    return this;\n  };\n  /**\n   * Select data in range. (For optimization of filter)\n   * (Manually inline code, support 5 million data filtering in data zoom.)\n   */\n  SeriesData.prototype.selectRange = function (range) {\n    'use strict';\n\n    var _this = this;\n    var innerRange = {};\n    var dims = zrUtil.keys(range);\n    var dimIndices = [];\n    zrUtil.each(dims, function (dim) {\n      var dimIdx = _this._getStoreDimIndex(dim);\n      innerRange[dimIdx] = range[dim];\n      dimIndices.push(dimIdx);\n    });\n    this._store = this._store.selectRange(innerRange);\n    return this;\n  };\n  /* eslint-enable max-len */\n  SeriesData.prototype.mapArray = function (dims, cb, ctx) {\n    'use strict';\n\n    if (zrUtil.isFunction(dims)) {\n      ctx = cb;\n      cb = dims;\n      dims = [];\n    }\n    // ctxCompat just for compat echarts3\n    ctx = ctx || this;\n    var result = [];\n    this.each(dims, function () {\n      result.push(cb && cb.apply(this, arguments));\n    }, ctx);\n    return result;\n  };\n  SeriesData.prototype.map = function (dims, cb, ctx, ctxCompat) {\n    'use strict';\n\n    // ctxCompat just for compat echarts3\n    var fCtx = ctx || ctxCompat || this;\n    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);\n    var list = cloneListForMapAndSample(this);\n    list._store = this._store.map(dimIndices, fCtx ? zrUtil.bind(cb, fCtx) : cb);\n    return list;\n  };\n  SeriesData.prototype.modify = function (dims, cb, ctx, ctxCompat) {\n    var _this = this;\n    // ctxCompat just for compat echarts3\n    var fCtx = ctx || ctxCompat || this;\n    if (process.env.NODE_ENV !== 'production') {\n      zrUtil.each(normalizeDimensions(dims), function (dim) {\n        var dimInfo = _this.getDimensionInfo(dim);\n        if (!dimInfo.isCalculationCoord) {\n          console.error('Danger: only stack dimension can be modified');\n        }\n      });\n    }\n    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);\n    // If do shallow clone here, if there are too many stacked series,\n    // it still cost lots of memory, because `_store.dimensions` are not shared.\n    // We should consider there probably be shallow clone happen in each series\n    // in consequent filter/map.\n    this._store.modify(dimIndices, fCtx ? zrUtil.bind(cb, fCtx) : cb);\n  };\n  /**\n   * Large data down sampling on given dimension\n   * @param sampleIndex Sample index for name and id\n   */\n  SeriesData.prototype.downSample = function (dimension, rate, sampleValue, sampleIndex) {\n    var list = cloneListForMapAndSample(this);\n    list._store = this._store.downSample(this._getStoreDimIndex(dimension), rate, sampleValue, sampleIndex);\n    return list;\n  };\n  /**\n   * Large data down sampling using min-max\n   * @param {string} valueDimension\n   * @param {number} rate\n   */\n  SeriesData.prototype.minmaxDownSample = function (valueDimension, rate) {\n    var list = cloneListForMapAndSample(this);\n    list._store = this._store.minmaxDownSample(this._getStoreDimIndex(valueDimension), rate);\n    return list;\n  };\n  /**\n   * Large data down sampling using largest-triangle-three-buckets\n   * @param {string} valueDimension\n   * @param {number} targetCount\n   */\n  SeriesData.prototype.lttbDownSample = function (valueDimension, rate) {\n    var list = cloneListForMapAndSample(this);\n    list._store = this._store.lttbDownSample(this._getStoreDimIndex(valueDimension), rate);\n    return list;\n  };\n  SeriesData.prototype.getRawDataItem = function (idx) {\n    return this._store.getRawDataItem(idx);\n  };\n  /**\n   * Get model of one data item.\n   */\n  // TODO: Type of data item\n  SeriesData.prototype.getItemModel = function (idx) {\n    var hostModel = this.hostModel;\n    var dataItem = this.getRawDataItem(idx);\n    return new Model(dataItem, hostModel, hostModel && hostModel.ecModel);\n  };\n  /**\n   * Create a data differ\n   */\n  SeriesData.prototype.diff = function (otherList) {\n    var thisList = this;\n    return new DataDiffer(otherList ? otherList.getStore().getIndices() : [], this.getStore().getIndices(), function (idx) {\n      return getId(otherList, idx);\n    }, function (idx) {\n      return getId(thisList, idx);\n    });\n  };\n  /**\n   * Get visual property.\n   */\n  SeriesData.prototype.getVisual = function (key) {\n    var visual = this._visual;\n    return visual && visual[key];\n  };\n  SeriesData.prototype.setVisual = function (kvObj, val) {\n    this._visual = this._visual || {};\n    if (isObject(kvObj)) {\n      zrUtil.extend(this._visual, kvObj);\n    } else {\n      this._visual[kvObj] = val;\n    }\n  };\n  /**\n   * Get visual property of single data item\n   */\n  // eslint-disable-next-line\n  SeriesData.prototype.getItemVisual = function (idx, key) {\n    var itemVisual = this._itemVisuals[idx];\n    var val = itemVisual && itemVisual[key];\n    if (val == null) {\n      // Use global visual property\n      return this.getVisual(key);\n    }\n    return val;\n  };\n  /**\n   * If exists visual property of single data item\n   */\n  SeriesData.prototype.hasItemVisual = function () {\n    return this._itemVisuals.length > 0;\n  };\n  /**\n   * Make sure itemVisual property is unique\n   */\n  // TODO: use key to save visual to reduce memory.\n  SeriesData.prototype.ensureUniqueItemVisual = function (idx, key) {\n    var itemVisuals = this._itemVisuals;\n    var itemVisual = itemVisuals[idx];\n    if (!itemVisual) {\n      itemVisual = itemVisuals[idx] = {};\n    }\n    var val = itemVisual[key];\n    if (val == null) {\n      val = this.getVisual(key);\n      // TODO Performance?\n      if (zrUtil.isArray(val)) {\n        val = val.slice();\n      } else if (isObject(val)) {\n        val = zrUtil.extend({}, val);\n      }\n      itemVisual[key] = val;\n    }\n    return val;\n  };\n  // eslint-disable-next-line\n  SeriesData.prototype.setItemVisual = function (idx, key, value) {\n    var itemVisual = this._itemVisuals[idx] || {};\n    this._itemVisuals[idx] = itemVisual;\n    if (isObject(key)) {\n      zrUtil.extend(itemVisual, key);\n    } else {\n      itemVisual[key] = value;\n    }\n  };\n  /**\n   * Clear itemVisuals and list visual.\n   */\n  SeriesData.prototype.clearAllVisual = function () {\n    this._visual = {};\n    this._itemVisuals = [];\n  };\n  SeriesData.prototype.setLayout = function (key, val) {\n    isObject(key) ? zrUtil.extend(this._layout, key) : this._layout[key] = val;\n  };\n  /**\n   * Get layout property.\n   */\n  SeriesData.prototype.getLayout = function (key) {\n    return this._layout[key];\n  };\n  /**\n   * Get layout of single data item\n   */\n  SeriesData.prototype.getItemLayout = function (idx) {\n    return this._itemLayouts[idx];\n  };\n  /**\n   * Set layout of single data item\n   */\n  SeriesData.prototype.setItemLayout = function (idx, layout, merge) {\n    this._itemLayouts[idx] = merge ? zrUtil.extend(this._itemLayouts[idx] || {}, layout) : layout;\n  };\n  /**\n   * Clear all layout of single data item\n   */\n  SeriesData.prototype.clearItemLayouts = function () {\n    this._itemLayouts.length = 0;\n  };\n  /**\n   * Set graphic element relative to data. It can be set as null\n   */\n  SeriesData.prototype.setItemGraphicEl = function (idx, el) {\n    var seriesIndex = this.hostModel && this.hostModel.seriesIndex;\n    setCommonECData(seriesIndex, this.dataType, idx, el);\n    this._graphicEls[idx] = el;\n  };\n  SeriesData.prototype.getItemGraphicEl = function (idx) {\n    return this._graphicEls[idx];\n  };\n  SeriesData.prototype.eachItemGraphicEl = function (cb, context) {\n    zrUtil.each(this._graphicEls, function (el, idx) {\n      if (el) {\n        cb && cb.call(context, el, idx);\n      }\n    });\n  };\n  /**\n   * Shallow clone a new list except visual and layout properties, and graph elements.\n   * New list only change the indices.\n   */\n  SeriesData.prototype.cloneShallow = function (list) {\n    if (!list) {\n      list = new SeriesData(this._schema ? this._schema : map(this.dimensions, this._getDimInfo, this), this.hostModel);\n    }\n    transferProperties(list, this);\n    list._store = this._store;\n    return list;\n  };\n  /**\n   * Wrap some method to add more feature\n   */\n  SeriesData.prototype.wrapMethod = function (methodName, injectFunction) {\n    var originalMethod = this[methodName];\n    if (!zrUtil.isFunction(originalMethod)) {\n      return;\n    }\n    this.__wrappedMethods = this.__wrappedMethods || [];\n    this.__wrappedMethods.push(methodName);\n    this[methodName] = function () {\n      var res = originalMethod.apply(this, arguments);\n      return injectFunction.apply(this, [res].concat(zrUtil.slice(arguments)));\n    };\n  };\n  // ----------------------------------------------------------\n  // A work around for internal method visiting private member.\n  // ----------------------------------------------------------\n  SeriesData.internalField = function () {\n    prepareInvertedIndex = function (data) {\n      var invertedIndicesMap = data._invertedIndicesMap;\n      zrUtil.each(invertedIndicesMap, function (invertedIndices, dim) {\n        var dimInfo = data._dimInfos[dim];\n        // Currently, only dimensions that has ordinalMeta can create inverted indices.\n        var ordinalMeta = dimInfo.ordinalMeta;\n        var store = data._store;\n        if (ordinalMeta) {\n          invertedIndices = invertedIndicesMap[dim] = new CtorInt32Array(ordinalMeta.categories.length);\n          // The default value of TypedArray is 0. To avoid miss\n          // mapping to 0, we should set it as INDEX_NOT_FOUND.\n          for (var i = 0; i < invertedIndices.length; i++) {\n            invertedIndices[i] = INDEX_NOT_FOUND;\n          }\n          for (var i = 0; i < store.count(); i++) {\n            // Only support the case that all values are distinct.\n            invertedIndices[store.get(dimInfo.storeDimIndex, i)] = i;\n          }\n        }\n      });\n    };\n    getIdNameFromStore = function (data, dimIdx, idx) {\n      return convertOptionIdName(data._getCategory(dimIdx, idx), null);\n    };\n    /**\n     * @see the comment of `List['getId']`.\n     */\n    getId = function (data, rawIndex) {\n      var id = data._idList[rawIndex];\n      if (id == null && data._idDimIdx != null) {\n        id = getIdNameFromStore(data, data._idDimIdx, rawIndex);\n      }\n      if (id == null) {\n        id = ID_PREFIX + rawIndex;\n      }\n      return id;\n    };\n    normalizeDimensions = function (dimensions) {\n      if (!zrUtil.isArray(dimensions)) {\n        dimensions = dimensions != null ? [dimensions] : [];\n      }\n      return dimensions;\n    };\n    /**\n     * Data in excludeDimensions is copied, otherwise transferred.\n     */\n    cloneListForMapAndSample = function (original) {\n      var list = new SeriesData(original._schema ? original._schema : map(original.dimensions, original._getDimInfo, original), original.hostModel);\n      // FIXME If needs stackedOn, value may already been stacked\n      transferProperties(list, original);\n      return list;\n    };\n    transferProperties = function (target, source) {\n      zrUtil.each(TRANSFERABLE_PROPERTIES.concat(source.__wrappedMethods || []), function (propName) {\n        if (source.hasOwnProperty(propName)) {\n          target[propName] = source[propName];\n        }\n      });\n      target.__wrappedMethods = source.__wrappedMethods;\n      zrUtil.each(CLONE_PROPERTIES, function (propName) {\n        target[propName] = zrUtil.clone(source[propName]);\n      });\n      target._calculationInfo = zrUtil.extend({}, source._calculationInfo);\n    };\n    makeIdFromName = function (data, idx) {\n      var nameList = data._nameList;\n      var idList = data._idList;\n      var nameDimIdx = data._nameDimIdx;\n      var idDimIdx = data._idDimIdx;\n      var name = nameList[idx];\n      var id = idList[idx];\n      if (name == null && nameDimIdx != null) {\n        nameList[idx] = name = getIdNameFromStore(data, nameDimIdx, idx);\n      }\n      if (id == null && idDimIdx != null) {\n        idList[idx] = id = getIdNameFromStore(data, idDimIdx, idx);\n      }\n      if (id == null && name != null) {\n        var nameRepeatCount = data._nameRepeatCount;\n        var nmCnt = nameRepeatCount[name] = (nameRepeatCount[name] || 0) + 1;\n        id = name;\n        if (nmCnt > 1) {\n          id += '__ec__' + nmCnt;\n        }\n        idList[idx] = id;\n      }\n    };\n  }();\n  return SeriesData;\n}();\nexport default SeriesData;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { VISUAL_DIMENSIONS } from '../../util/types.js';\nimport SeriesDimensionDefine from '../SeriesDimensionDefine.js';\nimport { createHashMap, defaults, each, extend, isObject, isString } from 'zrender/lib/core/util.js';\nimport { createSourceFromSeriesDataOption, isSourceInstance } from '../Source.js';\nimport { CtorInt32Array } from '../DataStore.js';\nimport { normalizeToArray } from '../../util/model.js';\nimport { BE_ORDINAL, guessOrdinal } from './sourceHelper.js';\nimport { createDimNameMap, ensureSourceDimNameMap, SeriesDataSchema, shouldOmitUnusedDimensions } from './SeriesDataSchema.js';\n/**\n * For outside usage compat (like echarts-gl are using it).\n */\nexport function createDimensions(source, opt) {\n  return prepareSeriesDataSchema(source, opt).dimensions;\n}\n/**\n * This method builds the relationship between:\n * + \"what the coord sys or series requires (see `coordDimensions`)\",\n * + \"what the user defines (in `encode` and `dimensions`, see `opt.dimensionsDefine` and `opt.encodeDefine`)\"\n * + \"what the data source provids (see `source`)\".\n *\n * Some guess strategy will be adapted if user does not define something.\n * If no 'value' dimension specified, the first no-named dimension will be\n * named as 'value'.\n *\n * @return The results are always sorted by `storeDimIndex` asc.\n */\nexport default function prepareSeriesDataSchema(\n// TODO: TYPE completeDimensions type\nsource, opt) {\n  if (!isSourceInstance(source)) {\n    source = createSourceFromSeriesDataOption(source);\n  }\n  opt = opt || {};\n  var sysDims = opt.coordDimensions || [];\n  var dimsDef = opt.dimensionsDefine || source.dimensionsDefine || [];\n  var coordDimNameMap = createHashMap();\n  var resultList = [];\n  var dimCount = getDimCount(source, sysDims, dimsDef, opt.dimensionsCount);\n  // Try to ignore unused dimensions if sharing a high dimension datastore\n  // 30 is an experience value.\n  var omitUnusedDimensions = opt.canOmitUnusedDimensions && shouldOmitUnusedDimensions(dimCount);\n  var isUsingSourceDimensionsDef = dimsDef === source.dimensionsDefine;\n  var dataDimNameMap = isUsingSourceDimensionsDef ? ensureSourceDimNameMap(source) : createDimNameMap(dimsDef);\n  var encodeDef = opt.encodeDefine;\n  if (!encodeDef && opt.encodeDefaulter) {\n    encodeDef = opt.encodeDefaulter(source, dimCount);\n  }\n  var encodeDefMap = createHashMap(encodeDef);\n  var indicesMap = new CtorInt32Array(dimCount);\n  for (var i = 0; i < indicesMap.length; i++) {\n    indicesMap[i] = -1;\n  }\n  function getResultItem(dimIdx) {\n    var idx = indicesMap[dimIdx];\n    if (idx < 0) {\n      var dimDefItemRaw = dimsDef[dimIdx];\n      var dimDefItem = isObject(dimDefItemRaw) ? dimDefItemRaw : {\n        name: dimDefItemRaw\n      };\n      var resultItem = new SeriesDimensionDefine();\n      var userDimName = dimDefItem.name;\n      if (userDimName != null && dataDimNameMap.get(userDimName) != null) {\n        // Only if `series.dimensions` is defined in option\n        // displayName, will be set, and dimension will be displayed vertically in\n        // tooltip by default.\n        resultItem.name = resultItem.displayName = userDimName;\n      }\n      dimDefItem.type != null && (resultItem.type = dimDefItem.type);\n      dimDefItem.displayName != null && (resultItem.displayName = dimDefItem.displayName);\n      var newIdx = resultList.length;\n      indicesMap[dimIdx] = newIdx;\n      resultItem.storeDimIndex = dimIdx;\n      resultList.push(resultItem);\n      return resultItem;\n    }\n    return resultList[idx];\n  }\n  if (!omitUnusedDimensions) {\n    for (var i = 0; i < dimCount; i++) {\n      getResultItem(i);\n    }\n  }\n  // Set `coordDim` and `coordDimIndex` by `encodeDefMap` and normalize `encodeDefMap`.\n  encodeDefMap.each(function (dataDimsRaw, coordDim) {\n    var dataDims = normalizeToArray(dataDimsRaw).slice();\n    // Note: It is allowed that `dataDims.length` is `0`, e.g., options is\n    // `{encode: {x: -1, y: 1}}`. Should not filter anything in\n    // this case.\n    if (dataDims.length === 1 && !isString(dataDims[0]) && dataDims[0] < 0) {\n      encodeDefMap.set(coordDim, false);\n      return;\n    }\n    var validDataDims = encodeDefMap.set(coordDim, []);\n    each(dataDims, function (resultDimIdxOrName, idx) {\n      // The input resultDimIdx can be dim name or index.\n      var resultDimIdx = isString(resultDimIdxOrName) ? dataDimNameMap.get(resultDimIdxOrName) : resultDimIdxOrName;\n      if (resultDimIdx != null && resultDimIdx < dimCount) {\n        validDataDims[idx] = resultDimIdx;\n        applyDim(getResultItem(resultDimIdx), coordDim, idx);\n      }\n    });\n  });\n  // Apply templates and default order from `sysDims`.\n  var availDimIdx = 0;\n  each(sysDims, function (sysDimItemRaw) {\n    var coordDim;\n    var sysDimItemDimsDef;\n    var sysDimItemOtherDims;\n    var sysDimItem;\n    if (isString(sysDimItemRaw)) {\n      coordDim = sysDimItemRaw;\n      sysDimItem = {};\n    } else {\n      sysDimItem = sysDimItemRaw;\n      coordDim = sysDimItem.name;\n      var ordinalMeta = sysDimItem.ordinalMeta;\n      sysDimItem.ordinalMeta = null;\n      sysDimItem = extend({}, sysDimItem);\n      sysDimItem.ordinalMeta = ordinalMeta;\n      // `coordDimIndex` should not be set directly.\n      sysDimItemDimsDef = sysDimItem.dimsDef;\n      sysDimItemOtherDims = sysDimItem.otherDims;\n      sysDimItem.name = sysDimItem.coordDim = sysDimItem.coordDimIndex = sysDimItem.dimsDef = sysDimItem.otherDims = null;\n    }\n    var dataDims = encodeDefMap.get(coordDim);\n    // negative resultDimIdx means no need to mapping.\n    if (dataDims === false) {\n      return;\n    }\n    dataDims = normalizeToArray(dataDims);\n    // dimensions provides default dim sequences.\n    if (!dataDims.length) {\n      for (var i = 0; i < (sysDimItemDimsDef && sysDimItemDimsDef.length || 1); i++) {\n        while (availDimIdx < dimCount && getResultItem(availDimIdx).coordDim != null) {\n          availDimIdx++;\n        }\n        availDimIdx < dimCount && dataDims.push(availDimIdx++);\n      }\n    }\n    // Apply templates.\n    each(dataDims, function (resultDimIdx, coordDimIndex) {\n      var resultItem = getResultItem(resultDimIdx);\n      // Coordinate system has a higher priority on dim type than source.\n      if (isUsingSourceDimensionsDef && sysDimItem.type != null) {\n        resultItem.type = sysDimItem.type;\n      }\n      applyDim(defaults(resultItem, sysDimItem), coordDim, coordDimIndex);\n      if (resultItem.name == null && sysDimItemDimsDef) {\n        var sysDimItemDimsDefItem = sysDimItemDimsDef[coordDimIndex];\n        !isObject(sysDimItemDimsDefItem) && (sysDimItemDimsDefItem = {\n          name: sysDimItemDimsDefItem\n        });\n        resultItem.name = resultItem.displayName = sysDimItemDimsDefItem.name;\n        resultItem.defaultTooltip = sysDimItemDimsDefItem.defaultTooltip;\n      }\n      // FIXME refactor, currently only used in case: {otherDims: {tooltip: false}}\n      sysDimItemOtherDims && defaults(resultItem.otherDims, sysDimItemOtherDims);\n    });\n  });\n  function applyDim(resultItem, coordDim, coordDimIndex) {\n    if (VISUAL_DIMENSIONS.get(coordDim) != null) {\n      resultItem.otherDims[coordDim] = coordDimIndex;\n    } else {\n      resultItem.coordDim = coordDim;\n      resultItem.coordDimIndex = coordDimIndex;\n      coordDimNameMap.set(coordDim, true);\n    }\n  }\n  // Make sure the first extra dim is 'value'.\n  var generateCoord = opt.generateCoord;\n  var generateCoordCount = opt.generateCoordCount;\n  var fromZero = generateCoordCount != null;\n  generateCoordCount = generateCoord ? generateCoordCount || 1 : 0;\n  var extra = generateCoord || 'value';\n  function ifNoNameFillWithCoordName(resultItem) {\n    if (resultItem.name == null) {\n      // Duplication will be removed in the next step.\n      resultItem.name = resultItem.coordDim;\n    }\n  }\n  // Set dim `name` and other `coordDim` and other props.\n  if (!omitUnusedDimensions) {\n    for (var resultDimIdx = 0; resultDimIdx < dimCount; resultDimIdx++) {\n      var resultItem = getResultItem(resultDimIdx);\n      var coordDim = resultItem.coordDim;\n      if (coordDim == null) {\n        // TODO no need to generate coordDim for isExtraCoord?\n        resultItem.coordDim = genCoordDimName(extra, coordDimNameMap, fromZero);\n        resultItem.coordDimIndex = 0;\n        // Series specified generateCoord is using out.\n        if (!generateCoord || generateCoordCount <= 0) {\n          resultItem.isExtraCoord = true;\n        }\n        generateCoordCount--;\n      }\n      ifNoNameFillWithCoordName(resultItem);\n      if (resultItem.type == null && (guessOrdinal(source, resultDimIdx) === BE_ORDINAL.Must\n      // Consider the case:\n      // {\n      //    dataset: {source: [\n      //        ['2001', 123],\n      //        ['2002', 456],\n      //        ...\n      //        ['The others', 987],\n      //    ]},\n      //    series: {type: 'pie'}\n      // }\n      // The first column should better be treated as a \"ordinal\" although it\n      // might not be detected as an \"ordinal\" by `guessOrdinal`.\n      || resultItem.isExtraCoord && (resultItem.otherDims.itemName != null || resultItem.otherDims.seriesName != null))) {\n        resultItem.type = 'ordinal';\n      }\n    }\n  } else {\n    each(resultList, function (resultItem) {\n      // PENDING: guessOrdinal or let user specify type: 'ordinal' manually?\n      ifNoNameFillWithCoordName(resultItem);\n    });\n    // Sort dimensions: there are some rule that use the last dim as label,\n    // and for some latter travel process easier.\n    resultList.sort(function (item0, item1) {\n      return item0.storeDimIndex - item1.storeDimIndex;\n    });\n  }\n  removeDuplication(resultList);\n  return new SeriesDataSchema({\n    source: source,\n    dimensions: resultList,\n    fullDimensionCount: dimCount,\n    dimensionOmitted: omitUnusedDimensions\n  });\n}\nfunction removeDuplication(result) {\n  var duplicationMap = createHashMap();\n  for (var i = 0; i < result.length; i++) {\n    var dim = result[i];\n    var dimOriginalName = dim.name;\n    var count = duplicationMap.get(dimOriginalName) || 0;\n    if (count > 0) {\n      // Starts from 0.\n      dim.name = dimOriginalName + (count - 1);\n    }\n    count++;\n    duplicationMap.set(dimOriginalName, count);\n  }\n}\n// ??? TODO\n// Originally detect dimCount by data[0]. Should we\n// optimize it to only by sysDims and dimensions and encode.\n// So only necessary dims will be initialized.\n// But\n// (1) custom series should be considered. where other dims\n// may be visited.\n// (2) sometimes user need to calculate bubble size or use visualMap\n// on other dimensions besides coordSys needed.\n// So, dims that is not used by system, should be shared in data store?\nfunction getDimCount(source, sysDims, dimsDef, optDimCount) {\n  // Note that the result dimCount should not small than columns count\n  // of data, otherwise `dataDimNameMap` checking will be incorrect.\n  var dimCount = Math.max(source.dimensionsDetectedCount || 1, sysDims.length, dimsDef.length, optDimCount || 0);\n  each(sysDims, function (sysDimItem) {\n    var sysDimItemDimsDef;\n    if (isObject(sysDimItem) && (sysDimItemDimsDef = sysDimItem.dimsDef)) {\n      dimCount = Math.max(dimCount, sysDimItemDimsDef.length);\n    }\n  });\n  return dimCount;\n}\nfunction genCoordDimName(name, map, fromZero) {\n  if (fromZero || map.hasKey(name)) {\n    var i = 0;\n    while (map.hasKey(name + i)) {\n      i++;\n    }\n    name += i;\n  }\n  map.set(name, true);\n  return name;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { SINGLE_REFERRING } from '../util/model.js';\nimport { error } from '../util/log.js';\n/**\n * FIXME:\n * `nonSeriesBoxCoordSysCreators` and `_nonSeriesBoxMasterList` are hardcoded implementations.\n * Regarding \"coord sys layout based on another coord sys\", currently we only exprimentally support one level\n * dpendency, such as, \"grid(cartesian)s can be laid out based on matrix/calendar coord sys.\"\n * But a comprehensive implementation may need to support:\n *  - Recursive dependencies. e.g., a matrix coord sys lays out based on another matrix coord sys.\n *    That requires in the implementation `create` and `update` of coord sys are called by a dependency graph.\n *    (@see enableTopologicalTravel in `util/component.ts`)\n */\nvar nonSeriesBoxCoordSysCreators = {};\nvar normalCoordSysCreators = {};\nvar CoordinateSystemManager = /** @class */function () {\n  function CoordinateSystemManager() {\n    this._normalMasterList = [];\n    this._nonSeriesBoxMasterList = [];\n  }\n  /**\n   * Typically,\n   *  - in `create`, a coord sys lays out based on a given rect;\n   *  - in `update`, update the pixel and data extent of there axes (if any) based on processed `series.data`.\n   * After that, a coord sys can serve (typically by `dataToPoint`/`dataToLayout`/`pointToData`).\n   * If the coordinate system do not lay out based on `series.data`, `update` is not needed.\n   */\n  CoordinateSystemManager.prototype.create = function (ecModel, api) {\n    this._nonSeriesBoxMasterList = dealCreate(nonSeriesBoxCoordSysCreators, true);\n    this._normalMasterList = dealCreate(normalCoordSysCreators, false);\n    function dealCreate(creatorMap, canBeNonSeriesBox) {\n      var coordinateSystems = [];\n      zrUtil.each(creatorMap, function (creator, type) {\n        var list = creator.create(ecModel, api);\n        coordinateSystems = coordinateSystems.concat(list || []);\n        if (process.env.NODE_ENV !== 'production') {\n          if (canBeNonSeriesBox) {\n            // Disallow `update` is a brutal way to ensure `_nonSeriesBoxMasterList`s are ready to\n            // serve after `create`. But if `update` has to be involved in `_nonSeriesBoxMasterList`\n            // for some future case, more complicated mechanisms need to be introduced.\n            zrUtil.each(list, function (master) {\n              return zrUtil.assert(!master.update);\n            });\n          }\n        }\n      });\n      return coordinateSystems;\n    }\n  };\n  /**\n   * @see CoordinateSystem['create']\n   */\n  CoordinateSystemManager.prototype.update = function (ecModel, api) {\n    zrUtil.each(this._normalMasterList, function (coordSys) {\n      coordSys.update && coordSys.update(ecModel, api);\n    });\n  };\n  CoordinateSystemManager.prototype.getCoordinateSystems = function () {\n    return this._normalMasterList.concat(this._nonSeriesBoxMasterList);\n  };\n  CoordinateSystemManager.register = function (type, creator) {\n    if (type === 'matrix' || type === 'calendar') {\n      // FIXME: hardcode, @see nonSeriesBoxCoordSysCreators\n      nonSeriesBoxCoordSysCreators[type] = creator;\n      return;\n    }\n    normalCoordSysCreators[type] = creator;\n  };\n  CoordinateSystemManager.get = function (type) {\n    return normalCoordSysCreators[type] || nonSeriesBoxCoordSysCreators[type];\n  };\n  return CoordinateSystemManager;\n}();\nfunction canBeNonSeriesBoxCoordSys(coordSysType) {\n  return !!nonSeriesBoxCoordSysCreators[coordSysType];\n}\nexport var BoxCoordinateSystemCoordFrom = {\n  // By default fetch coord from `model.get('coord')`.\n  coord: 1,\n  // Some model/series, such as pie, is allowed to also get coord from `model.get('center')`,\n  // if cannot get from `model.get('coord')`. But historically pie use `center` option, but\n  // geo use `layoutCenter` option to specify layout center; they are not able to be unified.\n  // Therefor it is not recommended.\n  coord2: 2\n};\n/**\n * @see_also `createBoxLayoutReference`\n * @see_also `injectCoordSysByOption`\n */\nexport function registerLayOutOnCoordSysUsage(opt) {\n  if (process.env.NODE_ENV !== 'production') {\n    zrUtil.assert(!coordSysUseMap.get(opt.fullType));\n  }\n  coordSysUseMap.set(opt.fullType, {\n    getCoord2: undefined\n  }).getCoord2 = opt.getCoord2;\n}\nvar coordSysUseMap = zrUtil.createHashMap();\n/**\n * @return Be an object, but never be NullUndefined.\n */\nexport function getCoordForBoxCoordSys(model) {\n  var coord = model.getShallow('coord', true);\n  var from = BoxCoordinateSystemCoordFrom.coord;\n  if (coord == null) {\n    var store = coordSysUseMap.get(model.type);\n    if (store && store.getCoord2) {\n      from = BoxCoordinateSystemCoordFrom.coord2;\n      coord = store.getCoord2(model);\n    }\n  }\n  return {\n    coord: coord,\n    from: from\n  };\n}\n/**\n * - \"dataCoordSys\": each data item is laid out based on a coord sys.\n * - \"boxCoordSys\": the overall bounding rect or anchor point is calculated based on a coord sys.\n *   e.g.,\n *      grid rect (cartesian rect) is calculate based on matrix/calendar coord sys;\n *      pie center is calculated based on calendar/cartesian;\n *\n * The default value (if not declared in option `coordinateSystemUsage`):\n *  For series, use `dataCoordSys`, since this is the most case and backward compatible.\n *  For non-series components, use `boxCoordSys`, since `dataCoordSys` is not applicable.\n */\nexport var CoordinateSystemUsageKind = {\n  none: 0,\n  dataCoordSys: 1,\n  boxCoordSys: 2\n};\nexport function decideCoordSysUsageKind(\n// Component or series\nmodel, printError) {\n  // For backward compat, still not use `true` in model.get.\n  var coordSysType = model.getShallow('coordinateSystem');\n  var coordSysUsageOption = model.getShallow('coordinateSystemUsage', true);\n  var isDeclaredExplicitly = coordSysUsageOption != null;\n  var kind = CoordinateSystemUsageKind.none;\n  if (coordSysType) {\n    var isSeries = model.mainType === 'series';\n    if (coordSysUsageOption == null) {\n      coordSysUsageOption = isSeries ? 'data' : 'box';\n    }\n    if (coordSysUsageOption === 'data') {\n      kind = CoordinateSystemUsageKind.dataCoordSys;\n      if (!isSeries) {\n        if (process.env.NODE_ENV !== 'production') {\n          if (isDeclaredExplicitly && printError) {\n            error('coordinateSystemUsage \"data\" is not supported in non-series components.');\n          }\n        }\n        kind = CoordinateSystemUsageKind.none;\n      }\n    } else if (coordSysUsageOption === 'box') {\n      kind = CoordinateSystemUsageKind.boxCoordSys;\n      if (!isSeries && !canBeNonSeriesBoxCoordSys(coordSysType)) {\n        if (process.env.NODE_ENV !== 'production') {\n          if (isDeclaredExplicitly && printError) {\n            error(\"coordinateSystem \\\"\" + coordSysType + \"\\\" cannot be used\" + (\" as coordinateSystemUsage \\\"box\\\" for \\\"\" + model.type + \"\\\" yet.\"));\n          }\n        }\n        kind = CoordinateSystemUsageKind.none;\n      }\n    }\n  }\n  return {\n    coordSysType: coordSysType,\n    kind: kind\n  };\n}\n/**\n * These cases are considered:\n *  (A) Most series can use only \"dataCoordSys\", but \"boxCoordSys\" is not applicable:\n *    - e.g., series.heatmap, series.line, series.bar, series.scatter, ...\n *  (B) Some series and most components can use only \"boxCoordSys\", but \"dataCoordSys\" is not applicable:\n *    - e.g., series.pie, series.funnel, ...\n *    - e.g., grid, polar, geo, title, ...\n *  (C) Several series can use both \"boxCoordSys\" and \"dataCoordSys\", even at the same time:\n *    - e.g., series.graph, series.map\n *      - If graph or map series use a \"boxCoordSys\", it creates a internal \"dataCoordSys\" to lay out its data.\n *      - Graph series can use matrix coord sys as either the \"dataCoordSys\" (each item layout on one cell)\n *        or \"boxCoordSys\" (the entire series are layout within one cell).\n *    - To achieve this effect,\n *      `series.coordinateSystemUsage: 'box'` needs to be specified explicitly.\n *\n * Check these echarts option settings:\n *  - If `series: {type: 'bar'}`:\n *      dataCoordSys: \"cartesian2d\", boxCoordSys: \"none\".\n *      (since `coordinateSystem: 'cartesian2d'` is the default option in bar.)\n *  - If `grid: {coordinateSystem: 'matrix'}`\n *      dataCoordSys: \"none\", boxCoordSys: \"matrix\".\n *  - If `series: {type: 'pie', coordinateSystem: 'matrix'}`:\n *      dataCoordSys: \"none\", boxCoordSys: \"matrix\".\n *      (since `coordinateSystemUsage: 'box'` is the default option in pie.)\n *  - If `series: {type: 'graph', coordinateSystem: 'matrix'}`:\n *      dataCoordSys: \"matrix\", boxCoordSys: \"none\"\n *  - If `series: {type: 'graph', coordinateSystem: 'matrix', coordinateSystemUsage: 'box'}`:\n *      dataCoordSys: \"an internal view\", boxCoordSys: \"the internal view is laid out on a matrix\"\n *  - If `series: {type: 'map'}`:\n *      dataCoordSys: \"a internal geo\", boxCoordSys: \"none\"\n *  - If `series: {type: 'map', coordinateSystem: 'geo', geoIndex: 0}`:\n *      dataCoordSys: \"a geo\", boxCoordSys: \"none\"\n *  - If `series: {type: 'map', coordinateSystem: 'matrix'}`:\n *      not_applicable\n *  - If `series: {type: 'map', coordinateSystem: 'matrix', coordinateSystemUsage: 'box'}`:\n *      dataCoordSys: \"an internal geo\", boxCoordSys: \"the internal geo is laid out on a matrix\"\n *\n * @usage\n * For case (A) & (B),\n *  call `injectCoordSysByOption({coordSysType: 'aaa', ...})` once for each series/components.\n * For case (C),\n *  call `injectCoordSysByOption({coordSysType: 'aaa', ...})` once for each series/components,\n *  and then call `injectCoordSysByOption({coordSysType: 'bbb', ..., isDefaultDataCoordSys: true})`\n *  once for each series/components.\n *\n * @return Whether injected.\n */\nexport function injectCoordSysByOption(opt) {\n  var targetModel = opt.targetModel,\n    coordSysType = opt.coordSysType,\n    coordSysProvider = opt.coordSysProvider,\n    isDefaultDataCoordSys = opt.isDefaultDataCoordSys,\n    allowNotFound = opt.allowNotFound;\n  if (process.env.NODE_ENV !== 'production') {\n    zrUtil.assert(!!coordSysType);\n  }\n  var _a = decideCoordSysUsageKind(targetModel, true),\n    kind = _a.kind,\n    declaredType = _a.coordSysType;\n  if (isDefaultDataCoordSys && kind !== CoordinateSystemUsageKind.dataCoordSys) {\n    // If both dataCoordSys and boxCoordSys declared in one model.\n    // There is the only case in series-graph, and no other cases yet.\n    kind = CoordinateSystemUsageKind.dataCoordSys;\n    declaredType = coordSysType;\n  }\n  if (kind === CoordinateSystemUsageKind.none || declaredType !== coordSysType) {\n    return false;\n  }\n  var coordSys = coordSysProvider(coordSysType, targetModel);\n  if (!coordSys) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!allowNotFound) {\n        error(coordSysType + \" cannot be found for\" + (\" \" + targetModel.type + \" (index: \" + targetModel.componentIndex + \").\"));\n      }\n    }\n    return false;\n  }\n  if (kind === CoordinateSystemUsageKind.dataCoordSys) {\n    if (process.env.NODE_ENV !== 'production') {\n      zrUtil.assert(targetModel.mainType === 'series');\n    }\n    targetModel.coordinateSystem = coordSys;\n  } else {\n    // kind === 'boxCoordSys'\n    targetModel.boxCoordinateSystem = coordSys;\n  }\n  return true;\n}\nexport var simpleCoordSysInjectionProvider = function (coordSysType, injectTargetModel) {\n  var coordSysModel = injectTargetModel.getReferringComponents(coordSysType, SINGLE_REFERRING).models[0];\n  return coordSysModel && coordSysModel.coordinateSystem;\n};\nexport default CoordinateSystemManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/**\n * Helper for model references.\n * There are many manners to refer axis/coordSys.\n */\n// TODO\n// merge relevant logic to this file?\n// check: \"modelHelper\" of tooltip and \"BrushTargetManager\".\nimport { createHashMap, retrieve, each } from 'zrender/lib/core/util.js';\nimport { SINGLE_REFERRING } from '../util/model.js';\n/**\n * @class\n * For example:\n * {\n *     coordSysName: 'cartesian2d',\n *     coordSysDims: ['x', 'y', ...],\n *     axisMap: HashMap({\n *         x: xAxisModel,\n *         y: yAxisModel\n *     }),\n *     categoryAxisMap: HashMap({\n *         x: xAxisModel,\n *         y: undefined\n *     }),\n *     // The index of the first category axis in `coordSysDims`.\n *     // `null/undefined` means no category axis exists.\n *     firstCategoryDimIndex: 1,\n *     // To replace user specified encode.\n * }\n */\nvar CoordSysInfo = /** @class */function () {\n  function CoordSysInfo(coordSysName) {\n    this.coordSysDims = [];\n    this.axisMap = createHashMap();\n    this.categoryAxisMap = createHashMap();\n    this.coordSysName = coordSysName;\n  }\n  return CoordSysInfo;\n}();\nexport function getCoordSysInfoBySeries(seriesModel) {\n  var coordSysName = seriesModel.get('coordinateSystem');\n  var result = new CoordSysInfo(coordSysName);\n  var fetch = fetchers[coordSysName];\n  if (fetch) {\n    fetch(seriesModel, result, result.axisMap, result.categoryAxisMap);\n    return result;\n  }\n}\n// TODO: refactor them to static member of each coord sys, rather than hard code here.\nvar fetchers = {\n  cartesian2d: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var xAxisModel = seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\n    var yAxisModel = seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\n    if (process.env.NODE_ENV !== 'production') {\n      if (!xAxisModel) {\n        throw new Error('xAxis \"' + retrieve(seriesModel.get('xAxisIndex'), seriesModel.get('xAxisId'), 0) + '\" not found');\n      }\n      if (!yAxisModel) {\n        throw new Error('yAxis \"' + retrieve(seriesModel.get('xAxisIndex'), seriesModel.get('yAxisId'), 0) + '\" not found');\n      }\n    }\n    result.coordSysDims = ['x', 'y'];\n    axisMap.set('x', xAxisModel);\n    axisMap.set('y', yAxisModel);\n    if (isCategory(xAxisModel)) {\n      categoryAxisMap.set('x', xAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n    if (isCategory(yAxisModel)) {\n      categoryAxisMap.set('y', yAxisModel);\n      result.firstCategoryDimIndex == null && (result.firstCategoryDimIndex = 1);\n    }\n  },\n  singleAxis: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var singleAxisModel = seriesModel.getReferringComponents('singleAxis', SINGLE_REFERRING).models[0];\n    if (process.env.NODE_ENV !== 'production') {\n      if (!singleAxisModel) {\n        throw new Error('singleAxis should be specified.');\n      }\n    }\n    result.coordSysDims = ['single'];\n    axisMap.set('single', singleAxisModel);\n    if (isCategory(singleAxisModel)) {\n      categoryAxisMap.set('single', singleAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n  },\n  polar: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var polarModel = seriesModel.getReferringComponents('polar', SINGLE_REFERRING).models[0];\n    var radiusAxisModel = polarModel.findAxisModel('radiusAxis');\n    var angleAxisModel = polarModel.findAxisModel('angleAxis');\n    if (process.env.NODE_ENV !== 'production') {\n      if (!angleAxisModel) {\n        throw new Error('angleAxis option not found');\n      }\n      if (!radiusAxisModel) {\n        throw new Error('radiusAxis option not found');\n      }\n    }\n    result.coordSysDims = ['radius', 'angle'];\n    axisMap.set('radius', radiusAxisModel);\n    axisMap.set('angle', angleAxisModel);\n    if (isCategory(radiusAxisModel)) {\n      categoryAxisMap.set('radius', radiusAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n    if (isCategory(angleAxisModel)) {\n      categoryAxisMap.set('angle', angleAxisModel);\n      result.firstCategoryDimIndex == null && (result.firstCategoryDimIndex = 1);\n    }\n  },\n  geo: function (seriesModel, result, axisMap, categoryAxisMap) {\n    result.coordSysDims = ['lng', 'lat'];\n  },\n  parallel: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var ecModel = seriesModel.ecModel;\n    var parallelModel = ecModel.getComponent('parallel', seriesModel.get('parallelIndex'));\n    var coordSysDims = result.coordSysDims = parallelModel.dimensions.slice();\n    each(parallelModel.parallelAxisIndex, function (axisIndex, index) {\n      var axisModel = ecModel.getComponent('parallelAxis', axisIndex);\n      var axisDim = coordSysDims[index];\n      axisMap.set(axisDim, axisModel);\n      if (isCategory(axisModel)) {\n        categoryAxisMap.set(axisDim, axisModel);\n        if (result.firstCategoryDimIndex == null) {\n          result.firstCategoryDimIndex = index;\n        }\n      }\n    });\n  },\n  matrix: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var matrixModel = seriesModel.getReferringComponents('matrix', SINGLE_REFERRING).models[0];\n    if (process.env.NODE_ENV !== 'production') {\n      if (!matrixModel) {\n        throw new Error('matrix coordinate system should be specified.');\n      }\n    }\n    result.coordSysDims = ['x', 'y'];\n    var xModel = matrixModel.getDimensionModel('x');\n    var yModel = matrixModel.getDimensionModel('y');\n    axisMap.set('x', xModel);\n    axisMap.set('y', yModel);\n    categoryAxisMap.set('x', xModel);\n    categoryAxisMap.set('y', yModel);\n  }\n};\nfunction isCategory(axisModel) {\n  return axisModel.get('type') === 'category';\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, isString } from 'zrender/lib/core/util.js';\nimport { isSeriesDataSchema } from './SeriesDataSchema.js';\n/**\n * Note that it is too complicated to support 3d stack by value\n * (have to create two-dimension inverted index), so in 3d case\n * we just support that stacked by index.\n *\n * @param seriesModel\n * @param dimensionsInput The same as the input of <module:echarts/data/SeriesData>.\n *        The input will be modified.\n * @param opt\n * @param opt.stackedCoordDimension Specify a coord dimension if needed.\n * @param opt.byIndex=false\n * @return calculationInfo\n * {\n *     stackedDimension: string\n *     stackedByDimension: string\n *     isStackedByIndex: boolean\n *     stackedOverDimension: string\n *     stackResultDimension: string\n * }\n */\nexport function enableDataStack(seriesModel, dimensionsInput, opt) {\n  opt = opt || {};\n  var byIndex = opt.byIndex;\n  var stackedCoordDimension = opt.stackedCoordDimension;\n  var dimensionDefineList;\n  var schema;\n  var store;\n  if (isLegacyDimensionsInput(dimensionsInput)) {\n    dimensionDefineList = dimensionsInput;\n  } else {\n    schema = dimensionsInput.schema;\n    dimensionDefineList = schema.dimensions;\n    store = dimensionsInput.store;\n  }\n  // Compatibal: when `stack` is set as '', do not stack.\n  var mayStack = !!(seriesModel && seriesModel.get('stack'));\n  var stackedByDimInfo;\n  var stackedDimInfo;\n  var stackResultDimension;\n  var stackedOverDimension;\n  each(dimensionDefineList, function (dimensionInfo, index) {\n    if (isString(dimensionInfo)) {\n      dimensionDefineList[index] = dimensionInfo = {\n        name: dimensionInfo\n      };\n    }\n    if (mayStack && !dimensionInfo.isExtraCoord) {\n      // Find the first ordinal dimension as the stackedByDimInfo.\n      if (!byIndex && !stackedByDimInfo && dimensionInfo.ordinalMeta) {\n        stackedByDimInfo = dimensionInfo;\n      }\n      // Find the first stackable dimension as the stackedDimInfo.\n      if (!stackedDimInfo && dimensionInfo.type !== 'ordinal' && dimensionInfo.type !== 'time' && (!stackedCoordDimension || stackedCoordDimension === dimensionInfo.coordDim)) {\n        stackedDimInfo = dimensionInfo;\n      }\n    }\n  });\n  if (stackedDimInfo && !byIndex && !stackedByDimInfo) {\n    // Compatible with previous design, value axis (time axis) only stack by index.\n    // It may make sense if the user provides elaborately constructed data.\n    byIndex = true;\n  }\n  // Add stack dimension, they can be both calculated by coordinate system in `unionExtent`.\n  // That put stack logic in List is for using conveniently in echarts extensions, but it\n  // might not be a good way.\n  if (stackedDimInfo) {\n    // Use a weird name that not duplicated with other names.\n    // Also need to use seriesModel.id as postfix because different\n    // series may share same data store. The stack dimension needs to be distinguished.\n    stackResultDimension = '__\\0ecstackresult_' + seriesModel.id;\n    stackedOverDimension = '__\\0ecstackedover_' + seriesModel.id;\n    // Create inverted index to fast query index by value.\n    if (stackedByDimInfo) {\n      stackedByDimInfo.createInvertedIndices = true;\n    }\n    var stackedDimCoordDim_1 = stackedDimInfo.coordDim;\n    var stackedDimType = stackedDimInfo.type;\n    var stackedDimCoordIndex_1 = 0;\n    each(dimensionDefineList, function (dimensionInfo) {\n      if (dimensionInfo.coordDim === stackedDimCoordDim_1) {\n        stackedDimCoordIndex_1++;\n      }\n    });\n    var stackedOverDimensionDefine = {\n      name: stackResultDimension,\n      coordDim: stackedDimCoordDim_1,\n      coordDimIndex: stackedDimCoordIndex_1,\n      type: stackedDimType,\n      isExtraCoord: true,\n      isCalculationCoord: true,\n      storeDimIndex: dimensionDefineList.length\n    };\n    var stackResultDimensionDefine = {\n      name: stackedOverDimension,\n      // This dimension contains stack base (generally, 0), so do not set it as\n      // `stackedDimCoordDim` to avoid extent calculation, consider log scale.\n      coordDim: stackedOverDimension,\n      coordDimIndex: stackedDimCoordIndex_1 + 1,\n      type: stackedDimType,\n      isExtraCoord: true,\n      isCalculationCoord: true,\n      storeDimIndex: dimensionDefineList.length + 1\n    };\n    if (schema) {\n      if (store) {\n        stackedOverDimensionDefine.storeDimIndex = store.ensureCalculationDimension(stackedOverDimension, stackedDimType);\n        stackResultDimensionDefine.storeDimIndex = store.ensureCalculationDimension(stackResultDimension, stackedDimType);\n      }\n      schema.appendCalculationDimension(stackedOverDimensionDefine);\n      schema.appendCalculationDimension(stackResultDimensionDefine);\n    } else {\n      dimensionDefineList.push(stackedOverDimensionDefine);\n      dimensionDefineList.push(stackResultDimensionDefine);\n    }\n  }\n  return {\n    stackedDimension: stackedDimInfo && stackedDimInfo.name,\n    stackedByDimension: stackedByDimInfo && stackedByDimInfo.name,\n    isStackedByIndex: byIndex,\n    stackedOverDimension: stackedOverDimension,\n    stackResultDimension: stackResultDimension\n  };\n}\nfunction isLegacyDimensionsInput(dimensionsInput) {\n  return !isSeriesDataSchema(dimensionsInput.schema);\n}\nexport function isDimensionStacked(data, stackedDim) {\n  // Each single series only maps to one pair of axis. So we do not need to\n  // check stackByDim, whatever stacked by a dimension or stacked by index.\n  return !!stackedDim && stackedDim === data.getCalculationInfo('stackedDimension');\n}\nexport function getStackedDimension(data, targetDim) {\n  return isDimensionStacked(data, targetDim) ? data.getCalculationInfo('stackResultDimension') : targetDim;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper.js';\nimport { getDataItemValue } from '../../util/model.js';\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\nimport { getCoordSysInfoBySeries } from '../../model/referHelper.js';\nimport { createSourceFromSeriesDataOption } from '../../data/Source.js';\nimport { enableDataStack } from '../../data/helper/dataStackHelper.js';\nimport { makeSeriesEncodeForAxisCoordSys } from '../../data/helper/sourceHelper.js';\nimport { SOURCE_FORMAT_ORIGINAL } from '../../util/types.js';\nfunction getCoordSysDimDefs(seriesModel, coordSysInfo) {\n  var coordSysName = seriesModel.get('coordinateSystem');\n  var registeredCoordSys = CoordinateSystem.get(coordSysName);\n  var coordSysDimDefs;\n  if (coordSysInfo && coordSysInfo.coordSysDims) {\n    coordSysDimDefs = zrUtil.map(coordSysInfo.coordSysDims, function (dim) {\n      var dimInfo = {\n        name: dim\n      };\n      var axisModel = coordSysInfo.axisMap.get(dim);\n      if (axisModel) {\n        var axisType = axisModel.get('type');\n        dimInfo.type = getDimensionTypeByAxis(axisType);\n      }\n      return dimInfo;\n    });\n  }\n  if (!coordSysDimDefs) {\n    // Get dimensions from registered coordinate system\n    coordSysDimDefs = registeredCoordSys && (registeredCoordSys.getDimensionsInfo ? registeredCoordSys.getDimensionsInfo() : registeredCoordSys.dimensions.slice()) || ['x', 'y'];\n  }\n  return coordSysDimDefs;\n}\nfunction injectOrdinalMeta(dimInfoList, createInvertedIndices, coordSysInfo) {\n  var firstCategoryDimIndex;\n  var hasNameEncode;\n  coordSysInfo && zrUtil.each(dimInfoList, function (dimInfo, dimIndex) {\n    var coordDim = dimInfo.coordDim;\n    var categoryAxisModel = coordSysInfo.categoryAxisMap.get(coordDim);\n    if (categoryAxisModel) {\n      if (firstCategoryDimIndex == null) {\n        firstCategoryDimIndex = dimIndex;\n      }\n      dimInfo.ordinalMeta = categoryAxisModel.getOrdinalMeta();\n      if (createInvertedIndices) {\n        dimInfo.createInvertedIndices = true;\n      }\n    }\n    if (dimInfo.otherDims.itemName != null) {\n      hasNameEncode = true;\n    }\n  });\n  if (!hasNameEncode && firstCategoryDimIndex != null) {\n    dimInfoList[firstCategoryDimIndex].otherDims.itemName = 0;\n  }\n  return firstCategoryDimIndex;\n}\n/**\n * Caution: there are side effects to `sourceManager` in this method.\n * Should better only be called in `Series['getInitialData']`.\n */\nfunction createSeriesData(sourceRaw, seriesModel, opt) {\n  opt = opt || {};\n  var sourceManager = seriesModel.getSourceManager();\n  var source;\n  var isOriginalSource = false;\n  if (sourceRaw) {\n    isOriginalSource = true;\n    source = createSourceFromSeriesDataOption(sourceRaw);\n  } else {\n    source = sourceManager.getSource();\n    // Is series.data. not dataset.\n    isOriginalSource = source.sourceFormat === SOURCE_FORMAT_ORIGINAL;\n  }\n  var coordSysInfo = getCoordSysInfoBySeries(seriesModel);\n  var coordSysDimDefs = getCoordSysDimDefs(seriesModel, coordSysInfo);\n  var useEncodeDefaulter = opt.useEncodeDefaulter;\n  var encodeDefaulter = zrUtil.isFunction(useEncodeDefaulter) ? useEncodeDefaulter : useEncodeDefaulter ? zrUtil.curry(makeSeriesEncodeForAxisCoordSys, coordSysDimDefs, seriesModel) : null;\n  var createDimensionOptions = {\n    coordDimensions: coordSysDimDefs,\n    generateCoord: opt.generateCoord,\n    encodeDefine: seriesModel.getEncode(),\n    encodeDefaulter: encodeDefaulter,\n    canOmitUnusedDimensions: !isOriginalSource\n  };\n  var schema = prepareSeriesDataSchema(source, createDimensionOptions);\n  var firstCategoryDimIndex = injectOrdinalMeta(schema.dimensions, opt.createInvertedIndices, coordSysInfo);\n  var store = !isOriginalSource ? sourceManager.getSharedDataStore(schema) : null;\n  var stackCalculationInfo = enableDataStack(seriesModel, {\n    schema: schema,\n    store: store\n  });\n  var data = new SeriesData(schema, seriesModel);\n  data.setCalculationInfo(stackCalculationInfo);\n  var dimValueGetter = firstCategoryDimIndex != null && isNeedCompleteOrdinalData(source)\n  /**\n   * This serves this case:\n   *  var echarts_option = {\n   *      xAxis: { data: ['a', 'b', 'c'] },\n   *      yAxis: {}\n   *      series: { data: [555, 666, 777] }\n   *  };\n   * The `series.data` is completed to:\n   *  [[0, 555], [1, 666], [2, 777]]\n   */ ? function (itemOpt, dimName, dataIndex, dimIndex) {\n    // Use dataIndex as ordinal value in categoryAxis\n    return dimIndex === firstCategoryDimIndex ? dataIndex : this.defaultDimValueGetter(itemOpt, dimName, dataIndex, dimIndex);\n  } : null;\n  data.hasItemOption = false;\n  data.initData(\n  // Try to reuse the data store in sourceManager if using dataset.\n  isOriginalSource ? source : store, null, dimValueGetter);\n  return data;\n}\nfunction isNeedCompleteOrdinalData(source) {\n  if (source.sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n    var sampleItem = firstDataNotNull(source.data || []);\n    return !zrUtil.isArray(getDataItemValue(sampleItem));\n  }\n}\nfunction firstDataNotNull(arr) {\n  var i = 0;\n  while (i < arr.length && arr[i] == null) {\n    i++;\n  }\n  return arr[i];\n}\nexport default createSeriesData;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parseClassType } from './clazz.js';\nimport { makePrintable } from './log.js';\n// A random offset\nvar base = Math.round(Math.random() * 10);\n/**\n * @public\n * @param {string} type\n * @return {string}\n */\nexport function getUID(type) {\n  // Considering the case of crossing js context,\n  // use Math.random to make id as unique as possible.\n  return [type || '', base++].join('_');\n}\n/**\n * Implements `SubTypeDefaulterManager` for `target`.\n */\nexport function enableSubTypeDefaulter(target) {\n  var subTypeDefaulters = {};\n  target.registerSubTypeDefaulter = function (componentType, defaulter) {\n    var componentTypeInfo = parseClassType(componentType);\n    subTypeDefaulters[componentTypeInfo.main] = defaulter;\n  };\n  target.determineSubType = function (componentType, option) {\n    var type = option.type;\n    if (!type) {\n      var componentTypeMain = parseClassType(componentType).main;\n      if (target.hasSubTypes(componentType) && subTypeDefaulters[componentTypeMain]) {\n        type = subTypeDefaulters[componentTypeMain](option);\n      }\n    }\n    return type;\n  };\n}\n/**\n * Implements `TopologicalTravelable<any>` for `entity`.\n *\n * Topological travel on Activity Network (Activity On Vertices).\n * Dependencies is defined in Model.prototype.dependencies, like ['xAxis', 'yAxis'].\n * If 'xAxis' or 'yAxis' is absent in componentTypeList, just ignore it in topology.\n * If there is circular dependencey, Error will be thrown.\n */\nexport function enableTopologicalTravel(entity, dependencyGetter) {\n  /**\n   * @param targetNameList Target Component type list.\n   *                       Can be ['aa', 'bb', 'aa.xx']\n   * @param fullNameList By which we can build dependency graph.\n   * @param callback Params: componentType, dependencies.\n   * @param context Scope of callback.\n   */\n  entity.topologicalTravel = function (targetNameList, fullNameList, callback, context) {\n    if (!targetNameList.length) {\n      return;\n    }\n    var result = makeDepndencyGraph(fullNameList);\n    var graph = result.graph;\n    var noEntryList = result.noEntryList;\n    var targetNameSet = {};\n    zrUtil.each(targetNameList, function (name) {\n      targetNameSet[name] = true;\n    });\n    while (noEntryList.length) {\n      var currComponentType = noEntryList.pop();\n      var currVertex = graph[currComponentType];\n      var isInTargetNameSet = !!targetNameSet[currComponentType];\n      if (isInTargetNameSet) {\n        callback.call(context, currComponentType, currVertex.originalDeps.slice());\n        delete targetNameSet[currComponentType];\n      }\n      zrUtil.each(currVertex.successor, isInTargetNameSet ? removeEdgeAndAdd : removeEdge);\n    }\n    zrUtil.each(targetNameSet, function () {\n      var errMsg = '';\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = makePrintable('Circular dependency may exists: ', targetNameSet, targetNameList, fullNameList);\n      }\n      throw new Error(errMsg);\n    });\n    function removeEdge(succComponentType) {\n      graph[succComponentType].entryCount--;\n      if (graph[succComponentType].entryCount === 0) {\n        noEntryList.push(succComponentType);\n      }\n    }\n    // Consider this case: legend depends on series, and we call\n    // chart.setOption({series: [...]}), where only series is in option.\n    // If we do not have 'removeEdgeAndAdd', legendModel.mergeOption will\n    // not be called, but only sereis.mergeOption is called. Thus legend\n    // have no chance to update its local record about series (like which\n    // name of series is available in legend).\n    function removeEdgeAndAdd(succComponentType) {\n      targetNameSet[succComponentType] = true;\n      removeEdge(succComponentType);\n    }\n  };\n  function makeDepndencyGraph(fullNameList) {\n    var graph = {};\n    var noEntryList = [];\n    zrUtil.each(fullNameList, function (name) {\n      var thisItem = createDependencyGraphItem(graph, name);\n      var originalDeps = thisItem.originalDeps = dependencyGetter(name);\n      var availableDeps = getAvailableDependencies(originalDeps, fullNameList);\n      thisItem.entryCount = availableDeps.length;\n      if (thisItem.entryCount === 0) {\n        noEntryList.push(name);\n      }\n      zrUtil.each(availableDeps, function (dependentName) {\n        if (zrUtil.indexOf(thisItem.predecessor, dependentName) < 0) {\n          thisItem.predecessor.push(dependentName);\n        }\n        var thatItem = createDependencyGraphItem(graph, dependentName);\n        if (zrUtil.indexOf(thatItem.successor, dependentName) < 0) {\n          thatItem.successor.push(name);\n        }\n      });\n    });\n    return {\n      graph: graph,\n      noEntryList: noEntryList\n    };\n  }\n  function createDependencyGraphItem(graph, name) {\n    if (!graph[name]) {\n      graph[name] = {\n        predecessor: [],\n        successor: []\n      };\n    }\n    return graph[name];\n  }\n  function getAvailableDependencies(originalDeps, fullNameList) {\n    var availableDeps = [];\n    zrUtil.each(originalDeps, function (dep) {\n      zrUtil.indexOf(fullNameList, dep) >= 0 && availableDeps.push(dep);\n    });\n    return availableDeps;\n  }\n}\nexport function inheritDefaultOption(superOption, subOption) {\n  // See also `model/Component.ts#getDefaultOption`\n  return zrUtil.merge(zrUtil.merge({}, superOption, true), subOption, true);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/**\n * Language: English.\n */\nexport default {\n  time: {\n    month: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n    monthAbbr: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n    dayOfWeek: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n    dayOfWeekAbbr: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\n  },\n  legend: {\n    selector: {\n      all: 'All',\n      inverse: 'Inv'\n    }\n  },\n  toolbox: {\n    brush: {\n      title: {\n        rect: 'Box Select',\n        polygon: 'Lasso Select',\n        lineX: 'Horizontally Select',\n        lineY: 'Vertically Select',\n        keep: 'Keep Selections',\n        clear: 'Clear Selections'\n      }\n    },\n    dataView: {\n      title: 'Data View',\n      lang: ['Data View', 'Close', 'Refresh']\n    },\n    dataZoom: {\n      title: {\n        zoom: 'Zoom',\n        back: 'Zoom Reset'\n      }\n    },\n    magicType: {\n      title: {\n        line: 'Switch to Line Chart',\n        bar: 'Switch to Bar Chart',\n        stack: 'Stack',\n        tiled: 'Tile'\n      }\n    },\n    restore: {\n      title: 'Restore'\n    },\n    saveAsImage: {\n      title: 'Save as Image',\n      lang: ['Right Click to Save Image']\n    }\n  },\n  series: {\n    typeNames: {\n      pie: 'Pie chart',\n      bar: 'Bar chart',\n      line: 'Line chart',\n      scatter: 'Scatter plot',\n      effectScatter: 'Ripple scatter plot',\n      radar: 'Radar chart',\n      tree: 'Tree',\n      treemap: 'Treemap',\n      boxplot: 'Boxplot',\n      candlestick: 'Candlestick',\n      k: 'K line chart',\n      heatmap: 'Heat map',\n      map: 'Map',\n      parallel: 'Parallel coordinate map',\n      lines: 'Line graph',\n      graph: 'Relationship graph',\n      sankey: 'Sankey diagram',\n      funnel: 'Funnel chart',\n      gauge: 'Gauge',\n      pictorialBar: 'Pictorial bar',\n      themeRiver: 'Theme River Map',\n      sunburst: 'Sunburst',\n      custom: 'Custom chart',\n      chart: 'Chart'\n    }\n  },\n  aria: {\n    general: {\n      withTitle: 'This is a chart about \"{title}\"',\n      withoutTitle: 'This is a chart'\n    },\n    series: {\n      single: {\n        prefix: '',\n        withName: ' with type {seriesType} named {seriesName}.',\n        withoutName: ' with type {seriesType}.'\n      },\n      multiple: {\n        prefix: '. It consists of {seriesCount} series count.',\n        withName: ' The {seriesId} series is a {seriesType} representing {seriesName}.',\n        withoutName: ' The {seriesId} series is a {seriesType}.',\n        separator: {\n          middle: '',\n          end: ''\n        }\n      }\n    },\n    data: {\n      allData: 'The data is as follows: ',\n      partialData: 'The first {displayCnt} items are: ',\n      withName: 'the data for {name} is {value}',\n      withoutName: '{value}',\n      separator: {\n        middle: ', ',\n        end: '. '\n      }\n    }\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nexport default {\n  time: {\n    month: ['', '', '', '', '', '', '', '', '', '', '', ''],\n    monthAbbr: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'],\n    dayOfWeek: ['', '', '', '', '', '', ''],\n    dayOfWeekAbbr: ['', '', '', '', '', '', '']\n  },\n  legend: {\n    selector: {\n      all: '',\n      inverse: ''\n    }\n  },\n  toolbox: {\n    brush: {\n      title: {\n        rect: '',\n        polygon: '',\n        lineX: '',\n        lineY: '',\n        keep: '',\n        clear: ''\n      }\n    },\n    dataView: {\n      title: '',\n      lang: ['', '', '']\n    },\n    dataZoom: {\n      title: {\n        zoom: '',\n        back: ''\n      }\n    },\n    magicType: {\n      title: {\n        line: '',\n        bar: '',\n        stack: '',\n        tiled: ''\n      }\n    },\n    restore: {\n      title: ''\n    },\n    saveAsImage: {\n      title: '',\n      lang: ['']\n    }\n  },\n  series: {\n    typeNames: {\n      pie: '',\n      bar: '',\n      line: '',\n      scatter: '',\n      effectScatter: '',\n      radar: '',\n      tree: '',\n      treemap: '',\n      boxplot: '',\n      candlestick: 'K',\n      k: 'K',\n      heatmap: '',\n      map: '',\n      parallel: '',\n      lines: '',\n      graph: '',\n      sankey: '',\n      funnel: '',\n      gauge: '',\n      pictorialBar: '',\n      themeRiver: '',\n      sunburst: '',\n      custom: '',\n      chart: ''\n    }\n  },\n  aria: {\n    general: {\n      withTitle: '{title}',\n      withoutTitle: ''\n    },\n    series: {\n      single: {\n        prefix: '',\n        withName: '{seriesType}{seriesName}',\n        withoutName: '{seriesType}'\n      },\n      multiple: {\n        prefix: '{seriesCount}',\n        withName: '{seriesId}{seriesName}{seriesType}',\n        withoutName: '{seriesId}{seriesType}',\n        separator: {\n          middle: '',\n          end: ''\n        }\n      }\n    },\n    data: {\n      allData: '',\n      partialData: '{displayCnt}',\n      withName: '{name}{value}',\n      withoutName: '{value}',\n      separator: {\n        middle: '',\n        end: ''\n      }\n    }\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport Model from '../model/Model.js';\nimport env from 'zrender/lib/core/env.js';\n// default import ZH and EN lang\nimport langEN from '../i18n/langEN.js';\nimport langZH from '../i18n/langZH.js';\nimport { isString, clone, merge } from 'zrender/lib/core/util.js';\nvar LOCALE_ZH = 'ZH';\nvar LOCALE_EN = 'EN';\nvar DEFAULT_LOCALE = LOCALE_EN;\nvar localeStorage = {};\nvar localeModels = {};\nexport var SYSTEM_LANG = !env.domSupported ? DEFAULT_LOCALE : function () {\n  var langStr = (/* eslint-disable-next-line */\n  document.documentElement.lang || navigator.language || navigator.browserLanguage || DEFAULT_LOCALE).toUpperCase();\n  return langStr.indexOf(LOCALE_ZH) > -1 ? LOCALE_ZH : DEFAULT_LOCALE;\n}();\nexport function registerLocale(locale, localeObj) {\n  locale = locale.toUpperCase();\n  localeModels[locale] = new Model(localeObj);\n  localeStorage[locale] = localeObj;\n}\n// export function getLocale(locale: string) {\n//     return localeStorage[locale];\n// }\nexport function createLocaleObject(locale) {\n  if (isString(locale)) {\n    var localeObj = localeStorage[locale.toUpperCase()] || {};\n    if (locale === LOCALE_ZH || locale === LOCALE_EN) {\n      return clone(localeObj);\n    } else {\n      return merge(clone(localeObj), clone(localeStorage[DEFAULT_LOCALE]), false);\n    }\n  } else {\n    return merge(clone(locale), clone(localeStorage[DEFAULT_LOCALE]), false);\n  }\n}\nexport function getLocaleModel(lang) {\n  return localeModels[lang];\n}\nexport function getDefaultLocaleModel() {\n  return localeModels[DEFAULT_LOCALE];\n}\n// Default locale\nregisterLocale(LOCALE_EN, langEN);\nregisterLocale(LOCALE_ZH, langZH);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n;\nvar _impl = null;\nexport function registerScaleBreakHelperImpl(impl) {\n  if (!_impl) {\n    _impl = impl;\n  }\n}\nexport function getScaleBreakHelper() {\n  return _impl;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as numberUtil from './number.js';\nimport { getDefaultLocaleModel, getLocaleModel, SYSTEM_LANG } from '../core/locale.js';\nimport Model from '../model/Model.js';\nimport { getScaleBreakHelper } from '../scale/break.js';\nexport var ONE_SECOND = 1000;\nexport var ONE_MINUTE = ONE_SECOND * 60;\nexport var ONE_HOUR = ONE_MINUTE * 60;\nexport var ONE_DAY = ONE_HOUR * 24;\nexport var ONE_YEAR = ONE_DAY * 365;\nvar primaryTimeUnitFormatterMatchers = {\n  year: /({yyyy}|{yy})/,\n  month: /({MMMM}|{MMM}|{MM}|{M})/,\n  day: /({dd}|{d})/,\n  hour: /({HH}|{H}|{hh}|{h})/,\n  minute: /({mm}|{m})/,\n  second: /({ss}|{s})/,\n  millisecond: /({SSS}|{S})/\n};\nvar defaultFormatterSeed = {\n  year: '{yyyy}',\n  month: '{MMM}',\n  day: '{d}',\n  hour: '{HH}:{mm}',\n  minute: '{HH}:{mm}',\n  second: '{HH}:{mm}:{ss}',\n  millisecond: '{HH}:{mm}:{ss} {SSS}'\n};\nvar defaultFullFormatter = '{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}';\nvar fullDayFormatter = '{yyyy}-{MM}-{dd}';\nexport var fullLeveledFormatter = {\n  year: '{yyyy}',\n  month: '{yyyy}-{MM}',\n  day: fullDayFormatter,\n  hour: fullDayFormatter + ' ' + defaultFormatterSeed.hour,\n  minute: fullDayFormatter + ' ' + defaultFormatterSeed.minute,\n  second: fullDayFormatter + ' ' + defaultFormatterSeed.second,\n  millisecond: defaultFullFormatter\n};\n// Order must be ensured from big to small.\nexport var primaryTimeUnits = ['year', 'month', 'day', 'hour', 'minute', 'second', 'millisecond'];\nexport var timeUnits = ['year', 'half-year', 'quarter', 'month', 'week', 'half-week', 'day', 'half-day', 'quarter-day', 'hour', 'minute', 'second', 'millisecond'];\nexport function parseTimeAxisLabelFormatter(formatter) {\n  // Keep the logic the same with function `leveledFormat`.\n  return !zrUtil.isString(formatter) && !zrUtil.isFunction(formatter) ? parseTimeAxisLabelFormatterDictionary(formatter) : formatter;\n}\n/**\n * The final generated dictionary is like:\n *  generated_dict = {\n *      year: {\n *          year: ['{yyyy}', ...<higher_levels_if_any>]\n *      },\n *      month: {\n *          year: ['{yyyy} {MMM}', ...<higher_levels_if_any>],\n *          month: ['{MMM}', ...<higher_levels_if_any>]\n *      },\n *      day: {\n *          year: ['{yyyy} {MMM} {d}', ...<higher_levels_if_any>],\n *          month: ['{MMM} {d}', ...<higher_levels_if_any>],\n *          day: ['{d}', ...<higher_levels_if_any>]\n *      },\n *      ...\n *  }\n *\n * In echarts option, users can specify the entire dictionary or typically just:\n *  {formatter: {\n *      year: '{yyyy}', // Or an array of leveled templates: `['{yyyy}', '{bold1|{yyyy}}', ...]`,\n *                      // corresponding to `[level0, level1, level2, ...]`.\n *      month: '{MMM}',\n *      day: '{d}',\n *      hour: '{HH}:{mm}',\n *      second: '{HH}:{mm}',\n *      ...\n *  }}\n *  If any time unit is not specified in echarts option, the default template is used,\n *  such as `['{yyyy}', {primary|{yyyy}']`.\n *\n * The `tick.level` is only used to read string from each array, meaning the style type.\n *\n * Let `lowerUnit = getUnitFromValue(tick.value)`.\n * The non-break axis ticks only use `generated_dict[lowerUnit][lowerUnit][level]`.\n * The break axis ticks may use `generated_dict[lowerUnit][upperUnit][level]`, because:\n *  Consider the case: the non-break ticks are `16th, 23th, Feb, 7th, ...`, where `Feb` is in the break\n *  range and pruned by breaks, and the break ends might be in lower time unit than day. e.g., break start\n *  is `Jan 25th 18:00`(in unit `hour`) and break end is `Feb 6th 18:30` (in unit `minute`). Thus the break\n *  label prefers `Jan 25th 18:00` and `Feb 6th 18:30` rather than only `18:00` and `18:30`, otherwise it\n *  causes misleading.\n *  In this case, the tick of the break start and end will both be:\n *      `{level: 1, lowerTimeUnit: 'minute', upperTimeUnit: 'month'}`\n *  And get the final template by `generated_dict[lowerTimeUnit][upperTimeUnit][level]`.\n *  Note that the time unit can not be calculated directly by a single tick value, since the two breaks have\n *  to be at the same time unit to avoid awkward appearance. i.e., `Jan 25th 18:00` is in the time unit \"hour\"\n *  but we need it to be \"minute\", following `Feb 6th 18:30`.\n */\nfunction parseTimeAxisLabelFormatterDictionary(dictOption) {\n  dictOption = dictOption || {};\n  var dict = {};\n  // Currently if any template is specified by user, it may contain rich text tag,\n  // such as `'{my_bold|{YYYY}}'`, thus we do add highlight style to it.\n  // (Note that nested tag (`'{some|{some2|xxx}}'`) in rich text is not supported yet.)\n  var canAddHighlight = true;\n  zrUtil.each(primaryTimeUnits, function (lowestUnit) {\n    canAddHighlight && (canAddHighlight = dictOption[lowestUnit] == null);\n  });\n  zrUtil.each(primaryTimeUnits, function (lowestUnit, lowestUnitIdx) {\n    var upperDictOption = dictOption[lowestUnit];\n    dict[lowestUnit] = {};\n    var lowerTpl = null;\n    for (var upperUnitIdx = lowestUnitIdx; upperUnitIdx >= 0; upperUnitIdx--) {\n      var upperUnit = primaryTimeUnits[upperUnitIdx];\n      var upperDictItemOption = zrUtil.isObject(upperDictOption) && !zrUtil.isArray(upperDictOption) ? upperDictOption[upperUnit] : upperDictOption;\n      var tplArr = void 0;\n      if (zrUtil.isArray(upperDictItemOption)) {\n        tplArr = upperDictItemOption.slice();\n        lowerTpl = tplArr[0] || '';\n      } else if (zrUtil.isString(upperDictItemOption)) {\n        lowerTpl = upperDictItemOption;\n        tplArr = [lowerTpl];\n      } else {\n        if (lowerTpl == null) {\n          lowerTpl = defaultFormatterSeed[lowestUnit];\n        }\n        // Generate the dict by the rule as follows:\n        // If the user specify (or by default):\n        //  {formatter: {\n        //      year: '{yyyy}',\n        //      month: '{MMM}',\n        //      day: '{d}',\n        //      ...\n        //  }}\n        // Concat them to make the final dictionary:\n        //  {formatter: {\n        //      year: {year: ['{yyyy}']},\n        //      month: {year: ['{yyyy} {MMM}'], month: ['{MMM}']},\n        //      day: {year: ['{yyyy} {MMM} {d}'], month: ['{MMM} {d}'], day: ['{d}']}\n        //      ...\n        //  }}\n        // And then add `{primary|...}` to each array if from default template.\n        // This strategy is convinient for user configurating and works for most cases.\n        // If bad cases encountered, users can specify the entire dictionary themselves\n        // instead of going through this logic.\n        else if (!primaryTimeUnitFormatterMatchers[upperUnit].test(lowerTpl)) {\n          lowerTpl = dict[upperUnit][upperUnit][0] + \" \" + lowerTpl;\n        }\n        tplArr = [lowerTpl];\n        if (canAddHighlight) {\n          tplArr[1] = \"{primary|\" + lowerTpl + \"}\";\n        }\n      }\n      dict[lowestUnit][upperUnit] = tplArr;\n    }\n  });\n  return dict;\n}\nexport function pad(str, len) {\n  str += '';\n  return '0000'.substr(0, len - str.length) + str;\n}\nexport function getPrimaryTimeUnit(timeUnit) {\n  switch (timeUnit) {\n    case 'half-year':\n    case 'quarter':\n      return 'month';\n    case 'week':\n    case 'half-week':\n      return 'day';\n    case 'half-day':\n    case 'quarter-day':\n      return 'hour';\n    default:\n      // year, minutes, second, milliseconds\n      return timeUnit;\n  }\n}\nexport function isPrimaryTimeUnit(timeUnit) {\n  return timeUnit === getPrimaryTimeUnit(timeUnit);\n}\nexport function getDefaultFormatPrecisionOfInterval(timeUnit) {\n  switch (timeUnit) {\n    case 'year':\n    case 'month':\n      return 'day';\n    case 'millisecond':\n      return 'millisecond';\n    default:\n      // Also for day, hour, minute, second\n      return 'second';\n  }\n}\nexport function format(\n// Note: The result based on `isUTC` are totally different, which can not be just simply\n// substituted by the result without `isUTC`. So we make the param `isUTC` mandatory.\ntime, template, isUTC, lang) {\n  var date = numberUtil.parseDate(time);\n  var y = date[fullYearGetterName(isUTC)]();\n  var M = date[monthGetterName(isUTC)]() + 1;\n  var q = Math.floor((M - 1) / 3) + 1;\n  var d = date[dateGetterName(isUTC)]();\n  var e = date['get' + (isUTC ? 'UTC' : '') + 'Day']();\n  var H = date[hoursGetterName(isUTC)]();\n  var h = (H - 1) % 12 + 1;\n  var m = date[minutesGetterName(isUTC)]();\n  var s = date[secondsGetterName(isUTC)]();\n  var S = date[millisecondsGetterName(isUTC)]();\n  var a = H >= 12 ? 'pm' : 'am';\n  var A = a.toUpperCase();\n  var localeModel = lang instanceof Model ? lang : getLocaleModel(lang || SYSTEM_LANG) || getDefaultLocaleModel();\n  var timeModel = localeModel.getModel('time');\n  var month = timeModel.get('month');\n  var monthAbbr = timeModel.get('monthAbbr');\n  var dayOfWeek = timeModel.get('dayOfWeek');\n  var dayOfWeekAbbr = timeModel.get('dayOfWeekAbbr');\n  return (template || '').replace(/{a}/g, a + '').replace(/{A}/g, A + '').replace(/{yyyy}/g, y + '').replace(/{yy}/g, pad(y % 100 + '', 2)).replace(/{Q}/g, q + '').replace(/{MMMM}/g, month[M - 1]).replace(/{MMM}/g, monthAbbr[M - 1]).replace(/{MM}/g, pad(M, 2)).replace(/{M}/g, M + '').replace(/{dd}/g, pad(d, 2)).replace(/{d}/g, d + '').replace(/{eeee}/g, dayOfWeek[e]).replace(/{ee}/g, dayOfWeekAbbr[e]).replace(/{e}/g, e + '').replace(/{HH}/g, pad(H, 2)).replace(/{H}/g, H + '').replace(/{hh}/g, pad(h + '', 2)).replace(/{h}/g, h + '').replace(/{mm}/g, pad(m, 2)).replace(/{m}/g, m + '').replace(/{ss}/g, pad(s, 2)).replace(/{s}/g, s + '').replace(/{SSS}/g, pad(S, 3)).replace(/{S}/g, S + '');\n}\nexport function leveledFormat(tick, idx, formatter, lang, isUTC) {\n  var template = null;\n  if (zrUtil.isString(formatter)) {\n    // Single formatter for all units at all levels\n    template = formatter;\n  } else if (zrUtil.isFunction(formatter)) {\n    var extra = {\n      time: tick.time,\n      level: tick.time.level\n    };\n    var scaleBreakHelper = getScaleBreakHelper();\n    if (scaleBreakHelper) {\n      scaleBreakHelper.makeAxisLabelFormatterParamBreak(extra, tick[\"break\"]);\n    }\n    template = formatter(tick.value, idx, extra);\n  } else {\n    var tickTime = tick.time;\n    if (tickTime) {\n      var leveledTplArr = formatter[tickTime.lowerTimeUnit][tickTime.upperTimeUnit];\n      template = leveledTplArr[Math.min(tickTime.level, leveledTplArr.length - 1)] || '';\n    } else {\n      // tick may be from customTicks or timeline therefore no tick.time.\n      var unit = getUnitFromValue(tick.value, isUTC);\n      template = formatter[unit][unit][0];\n    }\n  }\n  return format(new Date(tick.value), template, isUTC, lang);\n}\nexport function getUnitFromValue(value, isUTC) {\n  var date = numberUtil.parseDate(value);\n  var M = date[monthGetterName(isUTC)]() + 1;\n  var d = date[dateGetterName(isUTC)]();\n  var h = date[hoursGetterName(isUTC)]();\n  var m = date[minutesGetterName(isUTC)]();\n  var s = date[secondsGetterName(isUTC)]();\n  var S = date[millisecondsGetterName(isUTC)]();\n  var isSecond = S === 0;\n  var isMinute = isSecond && s === 0;\n  var isHour = isMinute && m === 0;\n  var isDay = isHour && h === 0;\n  var isMonth = isDay && d === 1;\n  var isYear = isMonth && M === 1;\n  if (isYear) {\n    return 'year';\n  } else if (isMonth) {\n    return 'month';\n  } else if (isDay) {\n    return 'day';\n  } else if (isHour) {\n    return 'hour';\n  } else if (isMinute) {\n    return 'minute';\n  } else if (isSecond) {\n    return 'second';\n  } else {\n    return 'millisecond';\n  }\n}\n// export function getUnitValue(\n//     value: number | Date,\n//     unit: TimeUnit,\n//     isUTC: boolean\n// ) : number {\n//     const date = zrUtil.isNumber(value)\n//         ? numberUtil.parseDate(value)\n//         : value;\n//     unit = unit || getUnitFromValue(value, isUTC);\n//     switch (unit) {\n//         case 'year':\n//             return date[fullYearGetterName(isUTC)]();\n//         case 'half-year':\n//             return date[monthGetterName(isUTC)]() >= 6 ? 1 : 0;\n//         case 'quarter':\n//             return Math.floor((date[monthGetterName(isUTC)]() + 1) / 4);\n//         case 'month':\n//             return date[monthGetterName(isUTC)]();\n//         case 'day':\n//             return date[dateGetterName(isUTC)]();\n//         case 'half-day':\n//             return date[hoursGetterName(isUTC)]() / 24;\n//         case 'hour':\n//             return date[hoursGetterName(isUTC)]();\n//         case 'minute':\n//             return date[minutesGetterName(isUTC)]();\n//         case 'second':\n//             return date[secondsGetterName(isUTC)]();\n//         case 'millisecond':\n//             return date[millisecondsGetterName(isUTC)]();\n//     }\n// }\n/**\n * e.g.,\n * If timeUnit is 'year', return the Jan 1st 00:00:00 000 of that year.\n * If timeUnit is 'day', return the 00:00:00 000 of that day.\n *\n * @return The input date.\n */\nexport function roundTime(date, timeUnit, isUTC) {\n  switch (timeUnit) {\n    case 'year':\n      date[monthSetterName(isUTC)](0);\n    case 'month':\n      date[dateSetterName(isUTC)](1);\n    case 'day':\n      date[hoursSetterName(isUTC)](0);\n    case 'hour':\n      date[minutesSetterName(isUTC)](0);\n    case 'minute':\n      date[secondsSetterName(isUTC)](0);\n    case 'second':\n      date[millisecondsSetterName(isUTC)](0);\n  }\n  return date;\n}\nexport function fullYearGetterName(isUTC) {\n  return isUTC ? 'getUTCFullYear' : 'getFullYear';\n}\nexport function monthGetterName(isUTC) {\n  return isUTC ? 'getUTCMonth' : 'getMonth';\n}\nexport function dateGetterName(isUTC) {\n  return isUTC ? 'getUTCDate' : 'getDate';\n}\nexport function hoursGetterName(isUTC) {\n  return isUTC ? 'getUTCHours' : 'getHours';\n}\nexport function minutesGetterName(isUTC) {\n  return isUTC ? 'getUTCMinutes' : 'getMinutes';\n}\nexport function secondsGetterName(isUTC) {\n  return isUTC ? 'getUTCSeconds' : 'getSeconds';\n}\nexport function millisecondsGetterName(isUTC) {\n  return isUTC ? 'getUTCMilliseconds' : 'getMilliseconds';\n}\nexport function fullYearSetterName(isUTC) {\n  return isUTC ? 'setUTCFullYear' : 'setFullYear';\n}\nexport function monthSetterName(isUTC) {\n  return isUTC ? 'setUTCMonth' : 'setMonth';\n}\nexport function dateSetterName(isUTC) {\n  return isUTC ? 'setUTCDate' : 'setDate';\n}\nexport function hoursSetterName(isUTC) {\n  return isUTC ? 'setUTCHours' : 'setHours';\n}\nexport function minutesSetterName(isUTC) {\n  return isUTC ? 'setUTCMinutes' : 'setMinutes';\n}\nexport function secondsSetterName(isUTC) {\n  return isUTC ? 'setUTCSeconds' : 'setSeconds';\n}\nexport function millisecondsSetterName(isUTC) {\n  return isUTC ? 'setUTCMilliseconds' : 'setMilliseconds';\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { encodeHTML } from 'zrender/lib/core/dom.js';\nimport { parseDate, isNumeric, numericToNumber } from './number.js';\nimport { format as timeFormat, pad } from './time.js';\nimport { deprecateReplaceLog } from './log.js';\n/**\n * Add a comma each three digit.\n */\nexport function addCommas(x) {\n  if (!isNumeric(x)) {\n    return zrUtil.isString(x) ? x : '-';\n  }\n  var parts = (x + '').split('.');\n  return parts[0].replace(/(\\d{1,3})(?=(?:\\d{3})+(?!\\d))/g, '$1,') + (parts.length > 1 ? '.' + parts[1] : '');\n}\nexport function toCamelCase(str, upperCaseFirst) {\n  str = (str || '').toLowerCase().replace(/-(.)/g, function (match, group1) {\n    return group1.toUpperCase();\n  });\n  if (upperCaseFirst && str) {\n    str = str.charAt(0).toUpperCase() + str.slice(1);\n  }\n  return str;\n}\nexport var normalizeCssArray = zrUtil.normalizeCssArray;\nexport { encodeHTML };\n/**\n * Make value user readable for tooltip and label.\n * \"User readable\":\n *     Try to not print programmer-specific text like NaN, Infinity, null, undefined.\n *     Avoid to display an empty string, which users can not recognize there is\n *     a value and it might look like a bug.\n */\nexport function makeValueReadable(value, valueType, useUTC) {\n  var USER_READABLE_DEFUALT_TIME_PATTERN = '{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}';\n  function stringToUserReadable(str) {\n    return str && zrUtil.trim(str) ? str : '-';\n  }\n  function isNumberUserReadable(num) {\n    return !!(num != null && !isNaN(num) && isFinite(num));\n  }\n  var isTypeTime = valueType === 'time';\n  var isValueDate = value instanceof Date;\n  if (isTypeTime || isValueDate) {\n    var date = isTypeTime ? parseDate(value) : value;\n    if (!isNaN(+date)) {\n      return timeFormat(date, USER_READABLE_DEFUALT_TIME_PATTERN, useUTC);\n    } else if (isValueDate) {\n      return '-';\n    }\n    // In other cases, continue to try to display the value in the following code.\n  }\n  if (valueType === 'ordinal') {\n    return zrUtil.isStringSafe(value) ? stringToUserReadable(value) : zrUtil.isNumber(value) ? isNumberUserReadable(value) ? value + '' : '-' : '-';\n  }\n  // By default.\n  var numericResult = numericToNumber(value);\n  return isNumberUserReadable(numericResult) ? addCommas(numericResult) : zrUtil.isStringSafe(value) ? stringToUserReadable(value) : typeof value === 'boolean' ? value + '' : '-';\n}\nvar TPL_VAR_ALIAS = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];\nvar wrapVar = function (varName, seriesIdx) {\n  return '{' + varName + (seriesIdx == null ? '' : seriesIdx) + '}';\n};\n/**\n * Template formatter\n * @param {Array.<Object>|Object} paramsList\n */\nexport function formatTpl(tpl, paramsList, encode) {\n  if (!zrUtil.isArray(paramsList)) {\n    paramsList = [paramsList];\n  }\n  var seriesLen = paramsList.length;\n  if (!seriesLen) {\n    return '';\n  }\n  var $vars = paramsList[0].$vars || [];\n  for (var i = 0; i < $vars.length; i++) {\n    var alias = TPL_VAR_ALIAS[i];\n    tpl = tpl.replace(wrapVar(alias), wrapVar(alias, 0));\n  }\n  for (var seriesIdx = 0; seriesIdx < seriesLen; seriesIdx++) {\n    for (var k = 0; k < $vars.length; k++) {\n      var val = paramsList[seriesIdx][$vars[k]];\n      tpl = tpl.replace(wrapVar(TPL_VAR_ALIAS[k], seriesIdx), encode ? encodeHTML(val) : val);\n    }\n  }\n  return tpl;\n}\n/**\n * simple Template formatter\n */\nexport function formatTplSimple(tpl, param, encode) {\n  zrUtil.each(param, function (value, key) {\n    tpl = tpl.replace('{' + key + '}', encode ? encodeHTML(value) : value);\n  });\n  return tpl;\n}\nexport function getTooltipMarker(inOpt, extraCssText) {\n  var opt = zrUtil.isString(inOpt) ? {\n    color: inOpt,\n    extraCssText: extraCssText\n  } : inOpt || {};\n  var color = opt.color;\n  var type = opt.type;\n  extraCssText = opt.extraCssText;\n  var renderMode = opt.renderMode || 'html';\n  if (!color) {\n    return '';\n  }\n  if (renderMode === 'html') {\n    return type === 'subItem' ? '<span style=\"display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;' + 'border-radius:4px;width:4px;height:4px;background-color:'\n    // Only support string\n    + encodeHTML(color) + ';' + (extraCssText || '') + '\"></span>' : '<span style=\"display:inline-block;margin-right:4px;' + 'border-radius:10px;width:10px;height:10px;background-color:' + encodeHTML(color) + ';' + (extraCssText || '') + '\"></span>';\n  } else {\n    // Should better not to auto generate style name by auto-increment number here.\n    // Because this util is usually called in tooltip formatter, which is probably\n    // called repeatedly when mouse move and the auto-increment number increases fast.\n    // Users can make their own style name by theirselves, make it unique and readable.\n    var markerId = opt.markerId || 'markerX';\n    return {\n      renderMode: renderMode,\n      content: '{' + markerId + '|}  ',\n      style: type === 'subItem' ? {\n        width: 4,\n        height: 4,\n        borderRadius: 2,\n        backgroundColor: color\n      } : {\n        width: 10,\n        height: 10,\n        borderRadius: 5,\n        backgroundColor: color\n      }\n    };\n  }\n}\n/**\n * @deprecated Use `time/format` instead.\n * ISO Date format\n * @param {string} tpl\n * @param {number} value\n * @param {boolean} [isUTC=false] Default in local time.\n *           see `module:echarts/scale/Time`\n *           and `module:echarts/util/number#parseDate`.\n * @inner\n */\nexport function formatTime(tpl, value, isUTC) {\n  if (process.env.NODE_ENV !== 'production') {\n    deprecateReplaceLog('echarts.format.formatTime', 'echarts.time.format');\n  }\n  if (tpl === 'week' || tpl === 'month' || tpl === 'quarter' || tpl === 'half-year' || tpl === 'year') {\n    tpl = 'MM-dd\\nyyyy';\n  }\n  var date = parseDate(value);\n  var getUTC = isUTC ? 'getUTC' : 'get';\n  var y = date[getUTC + 'FullYear']();\n  var M = date[getUTC + 'Month']() + 1;\n  var d = date[getUTC + 'Date']();\n  var h = date[getUTC + 'Hours']();\n  var m = date[getUTC + 'Minutes']();\n  var s = date[getUTC + 'Seconds']();\n  var S = date[getUTC + 'Milliseconds']();\n  tpl = tpl.replace('MM', pad(M, 2)).replace('M', M).replace('yyyy', y).replace('yy', pad(y % 100 + '', 2)).replace('dd', pad(d, 2)).replace('d', d).replace('hh', pad(h, 2)).replace('h', h).replace('mm', pad(m, 2)).replace('m', m).replace('ss', pad(s, 2)).replace('s', s).replace('SSS', pad(S, 3));\n  return tpl;\n}\n/**\n * Capital first\n * @param {string} str\n * @return {string}\n */\nexport function capitalFirst(str) {\n  return str ? str.charAt(0).toUpperCase() + str.substr(1) : str;\n}\n/**\n * @return Never be null/undefined.\n */\nexport function convertToColorString(color, defaultColor) {\n  defaultColor = defaultColor || 'transparent';\n  return zrUtil.isString(color) ? color : zrUtil.isObject(color) ? color.colorStops && (color.colorStops[0] || {}).color || defaultColor : defaultColor;\n}\nexport { truncateText } from 'zrender/lib/graphic/helper/parseText.js';\n/**\n * open new tab\n * @param link url\n * @param target blank or self\n */\nexport function windowOpen(link, target) {\n  /* global window */\n  if (target === '_blank' || target === 'blank') {\n    var blank = window.open();\n    blank.opener = null;\n    blank.location.href = link;\n  } else {\n    window.open(link, target);\n  }\n}\nexport { getTextRect } from '../legacy/getTextRect.js';","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Layout helpers for each component positioning\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { parsePercent } from './number.js';\nimport * as formatUtil from './format.js';\nimport { error } from './log.js';\nimport { BoxCoordinateSystemCoordFrom, getCoordForBoxCoordSys } from '../core/CoordinateSystem.js';\nvar each = zrUtil.each;\n/**\n * @public\n */\nexport var LOCATION_PARAMS = ['left', 'right', 'top', 'bottom', 'width', 'height'];\n/**\n * @public\n */\nexport var HV_NAMES = [['width', 'left', 'right'], ['height', 'top', 'bottom']];\nfunction boxLayout(orient, group, gap, maxWidth, maxHeight) {\n  var x = 0;\n  var y = 0;\n  if (maxWidth == null) {\n    maxWidth = Infinity;\n  }\n  if (maxHeight == null) {\n    maxHeight = Infinity;\n  }\n  var currentLineMaxSize = 0;\n  group.eachChild(function (child, idx) {\n    var rect = child.getBoundingRect();\n    var nextChild = group.childAt(idx + 1);\n    var nextChildRect = nextChild && nextChild.getBoundingRect();\n    var nextX;\n    var nextY;\n    if (orient === 'horizontal') {\n      var moveX = rect.width + (nextChildRect ? -nextChildRect.x + rect.x : 0);\n      nextX = x + moveX;\n      // Wrap when width exceeds maxWidth or meet a `newline` group\n      // FIXME compare before adding gap?\n      if (nextX > maxWidth || child.newline) {\n        x = 0;\n        nextX = moveX;\n        y += currentLineMaxSize + gap;\n        currentLineMaxSize = rect.height;\n      } else {\n        // FIXME: consider rect.y is not `0`?\n        currentLineMaxSize = Math.max(currentLineMaxSize, rect.height);\n      }\n    } else {\n      var moveY = rect.height + (nextChildRect ? -nextChildRect.y + rect.y : 0);\n      nextY = y + moveY;\n      // Wrap when width exceeds maxHeight or meet a `newline` group\n      if (nextY > maxHeight || child.newline) {\n        x += currentLineMaxSize + gap;\n        y = 0;\n        nextY = moveY;\n        currentLineMaxSize = rect.width;\n      } else {\n        currentLineMaxSize = Math.max(currentLineMaxSize, rect.width);\n      }\n    }\n    if (child.newline) {\n      return;\n    }\n    child.x = x;\n    child.y = y;\n    child.markRedraw();\n    orient === 'horizontal' ? x = nextX + gap : y = nextY + gap;\n  });\n}\n/**\n * VBox or HBox layouting\n * @param {string} orient\n * @param {module:zrender/graphic/Group} group\n * @param {number} gap\n * @param {number} [width=Infinity]\n * @param {number} [height=Infinity]\n */\nexport var box = boxLayout;\n/**\n * VBox layouting\n * @param {module:zrender/graphic/Group} group\n * @param {number} gap\n * @param {number} [width=Infinity]\n * @param {number} [height=Infinity]\n */\nexport var vbox = zrUtil.curry(boxLayout, 'vertical');\n/**\n * HBox layouting\n * @param {module:zrender/graphic/Group} group\n * @param {number} gap\n * @param {number} [width=Infinity]\n * @param {number} [height=Infinity]\n */\nexport var hbox = zrUtil.curry(boxLayout, 'horizontal');\nexport function getBoxLayoutParams(boxLayoutModel, ignoreParent) {\n  return {\n    left: boxLayoutModel.getShallow('left', ignoreParent),\n    top: boxLayoutModel.getShallow('top', ignoreParent),\n    right: boxLayoutModel.getShallow('right', ignoreParent),\n    bottom: boxLayoutModel.getShallow('bottom', ignoreParent),\n    width: boxLayoutModel.getShallow('width', ignoreParent),\n    height: boxLayoutModel.getShallow('height', ignoreParent)\n  };\n}\nfunction getViewRectAndCenterForCircleLayout(seriesModel, api) {\n  var layoutRef = createBoxLayoutReference(seriesModel, api, {\n    enableLayoutOnlyByCenter: true\n  });\n  var boxLayoutParams = seriesModel.getBoxLayoutParams();\n  var viewRect;\n  var center;\n  if (layoutRef.type === BoxLayoutReferenceType.point) {\n    center = layoutRef.refPoint;\n    // `viewRect` is required in `pie/labelLayout.ts`.\n    viewRect = getLayoutRect(boxLayoutParams, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n  } else {\n    // layoutRef.type === layout.BoxLayoutReferenceType.rect\n    var centerOption = seriesModel.get('center');\n    var centerOptionArr = zrUtil.isArray(centerOption) ? centerOption : [centerOption, centerOption];\n    viewRect = getLayoutRect(boxLayoutParams, layoutRef.refContainer);\n    center = layoutRef.boxCoordFrom === BoxCoordinateSystemCoordFrom.coord2 ? layoutRef.refPoint // option `series.center` has been used as coord.\n    : [parsePercent(centerOptionArr[0], viewRect.width) + viewRect.x, parsePercent(centerOptionArr[1], viewRect.height) + viewRect.y];\n  }\n  return {\n    viewRect: viewRect,\n    center: center\n  };\n}\nexport function getCircleLayout(seriesModel, api) {\n  // center can be string or number when coordinateSystem is specified\n  var _a = getViewRectAndCenterForCircleLayout(seriesModel, api),\n    viewRect = _a.viewRect,\n    center = _a.center;\n  var radius = seriesModel.get('radius');\n  if (!zrUtil.isArray(radius)) {\n    radius = [0, radius];\n  }\n  var width = parsePercent(viewRect.width, api.getWidth());\n  var height = parsePercent(viewRect.height, api.getHeight());\n  var size = Math.min(width, height);\n  var r0 = parsePercent(radius[0], size / 2);\n  var r = parsePercent(radius[1], size / 2);\n  return {\n    cx: center[0],\n    cy: center[1],\n    r0: r0,\n    r: r,\n    viewRect: viewRect\n  };\n}\n/**\n * Parse position info.\n */\nexport function getLayoutRect(positionInfo, containerRect,\n// This is the space from the `containerRect` to the returned bounding rect.\n// Commonly used in option `legend.padding`, `timeline.padding`, `title.padding`,\n//  `visualMap.padding`, ...\n// [NOTICE]:\n//  It's named `margin`, because it's the space that outside the bounding rect. But from\n//  the perspective of the the caller, it's commonly used as the `padding` of a component,\n//  because conventionally background color covers this space.\n// [BEHAVIOR]:\n//  - If width/height is specified, `margin` does not effect them.\n//  - Otherwise, they are calculated based on the rect that `containerRect` shrinked by `margin`.\n//  - left/right/top/bottom are based on the rect that `containerRect` shrinked by `margin`.\nmargin) {\n  margin = formatUtil.normalizeCssArray(margin || 0);\n  var containerWidth = containerRect.width;\n  var containerHeight = containerRect.height;\n  var left = parsePercent(positionInfo.left, containerWidth);\n  var top = parsePercent(positionInfo.top, containerHeight);\n  var right = parsePercent(positionInfo.right, containerWidth);\n  var bottom = parsePercent(positionInfo.bottom, containerHeight);\n  var width = parsePercent(positionInfo.width, containerWidth);\n  var height = parsePercent(positionInfo.height, containerHeight);\n  var verticalMargin = margin[2] + margin[0];\n  var horizontalMargin = margin[1] + margin[3];\n  var aspect = positionInfo.aspect;\n  // If width is not specified, calculate width from left and right\n  if (isNaN(width)) {\n    width = containerWidth - right - horizontalMargin - left;\n  }\n  if (isNaN(height)) {\n    height = containerHeight - bottom - verticalMargin - top;\n  }\n  if (aspect != null) {\n    // If width and height are not given\n    // 1. Graph should not exceeds the container\n    // 2. Aspect must be keeped\n    // 3. Graph should take the space as more as possible\n    // FIXME\n    // Margin is not considered, because there is no case that both\n    // using margin and aspect so far.\n    if (isNaN(width) && isNaN(height)) {\n      // PENDING: if only `left` or `right` is defined, perhaps it's more preferable to\n      // calculate size based on `containerWidth - left` or `containerWidth - left` here,\n      // but for backward compatibility we do not change it.\n      if (aspect > containerWidth / containerHeight) {\n        width = containerWidth * 0.8;\n      } else {\n        height = containerHeight * 0.8;\n      }\n    }\n    // Calculate width or height with given aspect\n    if (isNaN(width)) {\n      width = aspect * height;\n    }\n    if (isNaN(height)) {\n      height = width / aspect;\n    }\n  }\n  // If left is not specified, calculate left from right and width\n  if (isNaN(left)) {\n    left = containerWidth - right - width - horizontalMargin;\n  }\n  if (isNaN(top)) {\n    top = containerHeight - bottom - height - verticalMargin;\n  }\n  // Align left and top\n  switch (positionInfo.left || positionInfo.right) {\n    case 'center':\n      left = containerWidth / 2 - width / 2 - margin[3];\n      break;\n    case 'right':\n      left = containerWidth - width - horizontalMargin;\n      break;\n  }\n  switch (positionInfo.top || positionInfo.bottom) {\n    case 'middle':\n    case 'center':\n      top = containerHeight / 2 - height / 2 - margin[0];\n      break;\n    case 'bottom':\n      top = containerHeight - height - verticalMargin;\n      break;\n  }\n  // If something is wrong and left, top, width, height are calculated as NaN\n  left = left || 0;\n  top = top || 0;\n  if (isNaN(width)) {\n    // Width may be NaN if only one value is given except width\n    width = containerWidth - horizontalMargin - left - (right || 0);\n  }\n  if (isNaN(height)) {\n    // Height may be NaN if only one value is given except height\n    height = containerHeight - verticalMargin - top - (bottom || 0);\n  }\n  var rect = new BoundingRect((containerRect.x || 0) + left + margin[3], (containerRect.y || 0) + top + margin[0], width, height);\n  rect.margin = margin;\n  return rect;\n}\n/**\n * PENDING:\n *  when preserveAspect: 'cover' and aspect is near Infinity\n *  or when preserveAspect: 'contain' and aspect is near 0,\n *  the result width or height is near Inifity. It's logically correct,\n *  Therefore currently we do not handle it, until bad cases arise.\n */\nexport function applyPreserveAspect(component, layoutRect,\n// That is, `width / height`.\n// Assume `aspect` is positive.\naspect) {\n  var preserveAspect = component.getShallow('preserveAspect', true);\n  if (!preserveAspect) {\n    return layoutRect;\n  }\n  var actualAspect = layoutRect.width / layoutRect.height;\n  if (Math.abs(Math.atan(aspect) - Math.atan(actualAspect)) < 1e-9) {\n    return layoutRect;\n  }\n  var preserveAspectAlign = component.getShallow('preserveAspectAlign', true);\n  var preserveAspectVerticalAlign = component.getShallow('preserveAspectVerticalAlign', true);\n  var layoutOptInner = {\n    width: layoutRect.width,\n    height: layoutRect.height\n  };\n  var isCover = preserveAspect === 'cover';\n  if (actualAspect > aspect && !isCover || actualAspect < aspect && isCover) {\n    layoutOptInner.width = layoutRect.height * aspect;\n    preserveAspectAlign === 'left' ? layoutOptInner.left = 0 : preserveAspectAlign === 'right' ? layoutOptInner.right = 0 : layoutOptInner.left = 'center';\n  } else {\n    layoutOptInner.height = layoutRect.width / aspect;\n    preserveAspectVerticalAlign === 'top' ? layoutOptInner.top = 0 : preserveAspectVerticalAlign === 'bottom' ? layoutOptInner.bottom = 0 : layoutOptInner.top = 'middle';\n  }\n  return getLayoutRect(layoutOptInner, layoutRect);\n}\nexport var BoxLayoutReferenceType = {\n  rect: 1,\n  point: 2\n};\n/**\n * Uniformly calculate layout reference (rect or center) based on either:\n *  - viewport:\n *      - Get `refContainer` as `{x: 0, y: 0, width: api.getWidth(), height: api.getHeight()}`\n *  - coordinate system, which can serve in several ways:\n *      - Use `dataToPoint` to get the `refPoint`, such as, in cartesian2d coord sys.\n *      - Use `dataToLayout` to get the `refContainer`, such as, in matrix coord sys.\n */\nexport function createBoxLayoutReference(model, api, opt) {\n  var refContainer;\n  var refPoint;\n  var layoutRefType;\n  var boxCoordSys = model.boxCoordinateSystem;\n  var boxCoordFrom;\n  if (boxCoordSys) {\n    var _a = getCoordForBoxCoordSys(model),\n      coord = _a.coord,\n      from = _a.from;\n    // Do not use `clamp` in `dataToLayout` and `dataToPoint`, because:\n    //  1. Should support overflow (such as, by dataZoom), where NaN should be in the result.\n    //  2. Be consistent with the way used in `series.data`\n    if (boxCoordSys.dataToLayout) {\n      layoutRefType = BoxLayoutReferenceType.rect;\n      boxCoordFrom = from;\n      var result = boxCoordSys.dataToLayout(coord);\n      refContainer = result.contentRect || result.rect;\n    } else if (opt && opt.enableLayoutOnlyByCenter && boxCoordSys.dataToPoint) {\n      layoutRefType = BoxLayoutReferenceType.point;\n      boxCoordFrom = from;\n      refPoint = boxCoordSys.dataToPoint(coord);\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        error(model.type + \"[\" + model.componentIndex + \"]\" + (\" layout based on \" + boxCoordSys.type + \" is not supported.\"));\n      }\n    }\n  }\n  if (layoutRefType == null) {\n    layoutRefType = BoxLayoutReferenceType.rect;\n  }\n  if (layoutRefType === BoxLayoutReferenceType.rect) {\n    if (!refContainer) {\n      refContainer = {\n        x: 0,\n        y: 0,\n        width: api.getWidth(),\n        height: api.getHeight()\n      };\n    }\n    refPoint = [refContainer.x + refContainer.width / 2, refContainer.y + refContainer.height / 2];\n  }\n  return {\n    type: layoutRefType,\n    refContainer: refContainer,\n    refPoint: refPoint,\n    boxCoordFrom: boxCoordFrom\n  };\n}\n/**\n * Position a zr element in viewport\n *  Group position is specified by either\n *  {left, top}, {right, bottom}\n *  If all properties exists, right and bottom will be igonred.\n *\n * Logic:\n *     1. Scale (against origin point in parent coord)\n *     2. Rotate (against origin point in parent coord)\n *     3. Translate (with el.position by this method)\n * So this method only fixes the last step 'Translate', which does not affect\n * scaling and rotating.\n *\n * If be called repeatedly with the same input el, the same result will be gotten.\n *\n * Return true if the layout happened.\n *\n * @param el Should have `getBoundingRect` method.\n * @param positionInfo\n * @param positionInfo.left\n * @param positionInfo.top\n * @param positionInfo.right\n * @param positionInfo.bottom\n * @param positionInfo.width Only for opt.boundingModel: 'raw'\n * @param positionInfo.height Only for opt.boundingModel: 'raw'\n * @param containerRect\n * @param margin\n * @param opt\n * @param opt.hv Only horizontal or only vertical. Default to be [1, 1]\n * @param opt.boundingMode\n *        Specify how to calculate boundingRect when locating.\n *        'all': Position the boundingRect that is transformed and uioned\n *               both itself and its descendants.\n *               This mode simplies confine the elements in the bounding\n *               of their container (e.g., using 'right: 0').\n *        'raw': Position the boundingRect that is not transformed and only itself.\n *               This mode is useful when you want a element can overflow its\n *               container. (Consider a rotated circle needs to be located in a corner.)\n *               In this mode positionInfo.width/height can only be number.\n */\nexport function positionElement(el, positionInfo, containerRect, margin, opt, out) {\n  var h = !opt || !opt.hv || opt.hv[0];\n  var v = !opt || !opt.hv || opt.hv[1];\n  var boundingMode = opt && opt.boundingMode || 'all';\n  out = out || el;\n  out.x = el.x;\n  out.y = el.y;\n  if (!h && !v) {\n    return false;\n  }\n  var rect;\n  if (boundingMode === 'raw') {\n    rect = el.type === 'group' ? new BoundingRect(0, 0, +positionInfo.width || 0, +positionInfo.height || 0) : el.getBoundingRect();\n  } else {\n    rect = el.getBoundingRect();\n    if (el.needLocalTransform()) {\n      var transform = el.getLocalTransform();\n      // Notice: raw rect may be inner object of el,\n      // which should not be modified.\n      rect = rect.clone();\n      rect.applyTransform(transform);\n    }\n  }\n  // The real width and height can not be specified but calculated by the given el.\n  var layoutRect = getLayoutRect(zrUtil.defaults({\n    width: rect.width,\n    height: rect.height\n  }, positionInfo), containerRect, margin);\n  // Because 'tranlate' is the last step in transform\n  // (see zrender/core/Transformable#getLocalTransform),\n  // we can just only modify el.position to get final result.\n  var dx = h ? layoutRect.x - rect.x : 0;\n  var dy = v ? layoutRect.y - rect.y : 0;\n  if (boundingMode === 'raw') {\n    out.x = dx;\n    out.y = dy;\n  } else {\n    out.x += dx;\n    out.y += dy;\n  }\n  if (out === el) {\n    el.markRedraw();\n  }\n  return true;\n}\n/**\n * @param option Contains some of the properties in HV_NAMES.\n * @param hvIdx 0: horizontal; 1: vertical.\n */\nexport function sizeCalculable(option, hvIdx) {\n  return option[HV_NAMES[hvIdx][0]] != null || option[HV_NAMES[hvIdx][1]] != null && option[HV_NAMES[hvIdx][2]] != null;\n}\nexport function fetchLayoutMode(ins) {\n  var layoutMode = ins.layoutMode || ins.constructor.layoutMode;\n  return zrUtil.isObject(layoutMode) ? layoutMode : layoutMode ? {\n    type: layoutMode\n  } : null;\n}\n/**\n * Consider Case:\n * When default option has {left: 0, width: 100}, and we set {right: 0}\n * through setOption or media query, using normal zrUtil.merge will cause\n * {right: 0} does not take effect.\n *\n * @example\n * ComponentModel.extend({\n *     init: function () {\n *         ...\n *         let inputPositionParams = layout.getLayoutParams(option);\n *         this.mergeOption(inputPositionParams);\n *     },\n *     mergeOption: function (newOption) {\n *         newOption && zrUtil.merge(thisOption, newOption, true);\n *         layout.mergeLayoutParam(thisOption, newOption);\n *     }\n * });\n *\n * @param targetOption\n * @param newOption\n * @param opt\n */\nexport function mergeLayoutParam(targetOption, newOption, opt) {\n  var ignoreSize = opt && opt.ignoreSize;\n  !zrUtil.isArray(ignoreSize) && (ignoreSize = [ignoreSize, ignoreSize]);\n  var hResult = merge(HV_NAMES[0], 0);\n  var vResult = merge(HV_NAMES[1], 1);\n  copy(HV_NAMES[0], targetOption, hResult);\n  copy(HV_NAMES[1], targetOption, vResult);\n  function merge(names, hvIdx) {\n    var newParams = {};\n    var newValueCount = 0;\n    var merged = {};\n    var mergedValueCount = 0;\n    var enoughParamNumber = 2;\n    each(names, function (name) {\n      merged[name] = targetOption[name];\n    });\n    each(names, function (name) {\n      // Consider case: newOption.width is null, which is\n      // set by user for removing width setting.\n      zrUtil.hasOwn(newOption, name) && (newParams[name] = merged[name] = newOption[name]);\n      hasValue(newParams, name) && newValueCount++;\n      hasValue(merged, name) && mergedValueCount++;\n    });\n    if (ignoreSize[hvIdx]) {\n      // Only one of left/right is premitted to exist.\n      if (hasValue(newOption, names[1])) {\n        merged[names[2]] = null;\n      } else if (hasValue(newOption, names[2])) {\n        merged[names[1]] = null;\n      }\n      return merged;\n    }\n    // Case: newOption: {width: ..., right: ...},\n    // or targetOption: {right: ...} and newOption: {width: ...},\n    // There is no conflict when merged only has params count\n    // little than enoughParamNumber.\n    if (mergedValueCount === enoughParamNumber || !newValueCount) {\n      return merged;\n    }\n    // Case: newOption: {width: ..., right: ...},\n    // Than we can make sure user only want those two, and ignore\n    // all origin params in targetOption.\n    else if (newValueCount >= enoughParamNumber) {\n      return newParams;\n    } else {\n      // Chose another param from targetOption by priority.\n      for (var i = 0; i < names.length; i++) {\n        var name_1 = names[i];\n        if (!zrUtil.hasOwn(newParams, name_1) && zrUtil.hasOwn(targetOption, name_1)) {\n          newParams[name_1] = targetOption[name_1];\n          break;\n        }\n      }\n      return newParams;\n    }\n  }\n  function hasValue(obj, name) {\n    return obj[name] != null && obj[name] !== 'auto';\n  }\n  function copy(names, target, source) {\n    each(names, function (name) {\n      target[name] = source[name];\n    });\n  }\n}\n/**\n * Retrieve 'left', 'right', 'top', 'bottom', 'width', 'height' from object.\n */\nexport function getLayoutParams(source) {\n  return copyLayoutParams({}, source);\n}\n/**\n * Retrieve 'left', 'right', 'top', 'bottom', 'width', 'height' from object.\n * @param {Object} source\n * @return {Object} Result contains those props.\n */\nexport function copyLayoutParams(target, source) {\n  source && target && each(LOCATION_PARAMS, function (name) {\n    zrUtil.hasOwn(source, name) && (target[name] = source[name]);\n  });\n  return target;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Model from './Model.js';\nimport * as componentUtil from '../util/component.js';\nimport { enableClassManagement, parseClassType, isExtendedClass, mountExtend } from '../util/clazz.js';\nimport { makeInner, queryReferringComponents } from '../util/model.js';\nimport * as layout from '../util/layout.js';\nvar inner = makeInner();\nvar ComponentModel = /** @class */function (_super) {\n  __extends(ComponentModel, _super);\n  function ComponentModel(option, parentModel, ecModel) {\n    var _this = _super.call(this, option, parentModel, ecModel) || this;\n    _this.uid = componentUtil.getUID('ec_cpt_model');\n    return _this;\n  }\n  ComponentModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n  };\n  ComponentModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n    var layoutMode = layout.fetchLayoutMode(this);\n    var inputPositionParams = layoutMode ? layout.getLayoutParams(option) : {};\n    var themeModel = ecModel.getTheme();\n    zrUtil.merge(option, themeModel.get(this.mainType));\n    zrUtil.merge(option, this.getDefaultOption());\n    if (layoutMode) {\n      layout.mergeLayoutParam(option, inputPositionParams, layoutMode);\n    }\n  };\n  ComponentModel.prototype.mergeOption = function (option, ecModel) {\n    zrUtil.merge(this.option, option, true);\n    var layoutMode = layout.fetchLayoutMode(this);\n    if (layoutMode) {\n      layout.mergeLayoutParam(this.option, option, layoutMode);\n    }\n  };\n  /**\n   * Called immediately after `init` or `mergeOption` of this instance called.\n   */\n  ComponentModel.prototype.optionUpdated = function (newCptOption, isInit) {};\n  /**\n   * [How to declare defaultOption]:\n   *\n   * (A) If using class declaration in typescript (since echarts 5):\n   * ```ts\n   * import {ComponentOption} from '../model/option.js';\n   * export interface XxxOption extends ComponentOption {\n   *     aaa: number\n   * }\n   * export class XxxModel extends Component {\n   *     static type = 'xxx';\n   *     static defaultOption: XxxOption = {\n   *         aaa: 123\n   *     }\n   * }\n   * Component.registerClass(XxxModel);\n   * ```\n   * ```ts\n   * import {inheritDefaultOption} from '../util/component.js';\n   * import {XxxModel, XxxOption} from './XxxModel.js';\n   * export interface XxxSubOption extends XxxOption {\n   *     bbb: number\n   * }\n   * class XxxSubModel extends XxxModel {\n   *     static defaultOption: XxxSubOption = inheritDefaultOption(XxxModel.defaultOption, {\n   *         bbb: 456\n   *     })\n   *     fn() {\n   *         let opt = this.getDefaultOption();\n   *         // opt is {aaa: 123, bbb: 456}\n   *     }\n   * }\n   * ```\n   *\n   * (B) If using class extend (previous approach in echarts 3 & 4):\n   * ```js\n   * let XxxComponent = Component.extend({\n   *     defaultOption: {\n   *         xx: 123\n   *     }\n   * })\n   * ```\n   * ```js\n   * let XxxSubComponent = XxxComponent.extend({\n   *     defaultOption: {\n   *         yy: 456\n   *     },\n   *     fn: function () {\n   *         let opt = this.getDefaultOption();\n   *         // opt is {xx: 123, yy: 456}\n   *     }\n   * })\n   * ```\n   */\n  ComponentModel.prototype.getDefaultOption = function () {\n    var ctor = this.constructor;\n    if (!isExtendedClass(ctor)) {\n      // When using ES class declaration, defaultOption must be declared as static.\n      // And manually inherit the defaultOption from its parent class if needed, such as,\n      //  ```ts\n      //  static defaultOption = inheritDefaultOption(ParentModel.defaultOption, {...});\n      //  ```\n      return ctor.defaultOption;\n    }\n    // FIXME: remove this approach?\n    // Legacy: auto merge defaultOption from ancestor classes if using ParentClass.extend(subProto)\n    var fields = inner(this);\n    if (!fields.defaultOption) {\n      var optList = [];\n      var clz = ctor;\n      while (clz) {\n        var opt = clz.prototype.defaultOption;\n        opt && optList.push(opt);\n        clz = clz.superClass;\n      }\n      var defaultOption = {};\n      for (var i = optList.length - 1; i >= 0; i--) {\n        defaultOption = zrUtil.merge(defaultOption, optList[i], true);\n      }\n      fields.defaultOption = defaultOption;\n    }\n    return fields.defaultOption;\n  };\n  /**\n   * Notice: always force to input param `useDefault` in case that forget to consider it.\n   * The same behavior as `modelUtil.parseFinder`.\n   *\n   * @param useDefault In many cases like series refer axis and axis refer grid,\n   *        If axis index / axis id not specified, use the first target as default.\n   *        In other cases like dataZoom refer axis, if not specified, measn no refer.\n   */\n  ComponentModel.prototype.getReferringComponents = function (mainType, opt) {\n    var indexKey = mainType + 'Index';\n    var idKey = mainType + 'Id';\n    return queryReferringComponents(this.ecModel, mainType, {\n      index: this.get(indexKey, true),\n      id: this.get(idKey, true)\n    }, opt);\n  };\n  ComponentModel.prototype.getBoxLayoutParams = function () {\n    // Consider itself having box layout configs.\n    // For backward compatibility, by default do not `ignoreParent`.\n    return layout.getBoxLayoutParams(this, false);\n  };\n  /**\n   * Get key for zlevel.\n   * If developers don't configure zlevel. We will assign zlevel to series based on the key.\n   * For example, lines with trail effect and progressive series will in an individual zlevel.\n   */\n  ComponentModel.prototype.getZLevelKey = function () {\n    return '';\n  };\n  ComponentModel.prototype.setZLevel = function (zlevel) {\n    this.option.zlevel = zlevel;\n  };\n  ComponentModel.protoInitialize = function () {\n    var proto = ComponentModel.prototype;\n    proto.type = 'component';\n    proto.id = '';\n    proto.name = '';\n    proto.mainType = '';\n    proto.subType = '';\n    proto.componentIndex = 0;\n  }();\n  return ComponentModel;\n}(Model);\nmountExtend(ComponentModel, Model);\nenableClassManagement(ComponentModel);\ncomponentUtil.enableSubTypeDefaulter(ComponentModel);\ncomponentUtil.enableTopologicalTravel(ComponentModel, getDependencies);\nfunction getDependencies(componentType) {\n  var deps = [];\n  zrUtil.each(ComponentModel.getClassesByMainType(componentType), function (clz) {\n    deps = deps.concat(clz.dependencies || clz.prototype.dependencies || []);\n  });\n  // Ensure main type.\n  deps = zrUtil.map(deps, function (type) {\n    return parseClassType(type).main;\n  });\n  // Hack dataset for convenience.\n  if (componentType !== 'dataset' && zrUtil.indexOf(deps, 'dataset') <= 0) {\n    deps.unshift('dataset');\n  }\n  return deps;\n}\nexport default ComponentModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner, normalizeToArray } from '../../util/model.js';\nvar innerColor = makeInner();\nvar innerDecal = makeInner();\nvar PaletteMixin = /** @class */function () {\n  function PaletteMixin() {}\n  PaletteMixin.prototype.getColorFromPalette = function (name, scope, requestNum) {\n    var defaultPalette = normalizeToArray(this.get('color', true));\n    var layeredPalette = this.get('colorLayer', true);\n    return getFromPalette(this, innerColor, defaultPalette, layeredPalette, name, scope, requestNum);\n  };\n  PaletteMixin.prototype.clearColorPalette = function () {\n    clearPalette(this, innerColor);\n  };\n  return PaletteMixin;\n}();\nexport function getDecalFromPalette(ecModel, name, scope, requestNum) {\n  var defaultDecals = normalizeToArray(ecModel.get(['aria', 'decal', 'decals']));\n  return getFromPalette(ecModel, innerDecal, defaultDecals, null, name, scope, requestNum);\n}\nfunction getNearestPalette(palettes, requestColorNum) {\n  var paletteNum = palettes.length;\n  // TODO palettes must be in order\n  for (var i = 0; i < paletteNum; i++) {\n    if (palettes[i].length > requestColorNum) {\n      return palettes[i];\n    }\n  }\n  return palettes[paletteNum - 1];\n}\n/**\n * @param name MUST NOT be null/undefined. Otherwise call this function\n *             twise with the same parameters will get different result.\n * @param scope default this.\n * @return Can be null/undefined\n */\nfunction getFromPalette(that, inner, defaultPalette, layeredPalette, name, scope, requestNum) {\n  scope = scope || that;\n  var scopeFields = inner(scope);\n  var paletteIdx = scopeFields.paletteIdx || 0;\n  var paletteNameMap = scopeFields.paletteNameMap = scopeFields.paletteNameMap || {};\n  // Use `hasOwnProperty` to avoid conflict with Object.prototype.\n  if (paletteNameMap.hasOwnProperty(name)) {\n    return paletteNameMap[name];\n  }\n  var palette = requestNum == null || !layeredPalette ? defaultPalette : getNearestPalette(layeredPalette, requestNum);\n  // In case can't find in layered color palette.\n  palette = palette || defaultPalette;\n  if (!palette || !palette.length) {\n    return;\n  }\n  var pickedPaletteItem = palette[paletteIdx];\n  if (name) {\n    paletteNameMap[name] = pickedPaletteItem;\n  }\n  scopeFields.paletteIdx = (paletteIdx + 1) % palette.length;\n  return pickedPaletteItem;\n}\nfunction clearPalette(that, inner) {\n  inner(that).paletteIdx = 0;\n  inner(that).paletteNameMap = {};\n}\nexport { PaletteMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { retrieveRawValue } from '../../data/helper/dataProvider.js';\nimport { formatTpl } from '../../util/format.js';\nimport { error, makePrintable } from '../../util/log.js';\nvar DIMENSION_LABEL_REG = /\\{@(.+?)\\}/g;\nvar DataFormatMixin = /** @class */function () {\n  function DataFormatMixin() {}\n  /**\n   * Get params for formatter\n   */\n  DataFormatMixin.prototype.getDataParams = function (dataIndex, dataType) {\n    var data = this.getData(dataType);\n    var rawValue = this.getRawValue(dataIndex, dataType);\n    var rawDataIndex = data.getRawIndex(dataIndex);\n    var name = data.getName(dataIndex);\n    var itemOpt = data.getRawDataItem(dataIndex);\n    var style = data.getItemVisual(dataIndex, 'style');\n    var color = style && style[data.getItemVisual(dataIndex, 'drawType') || 'fill'];\n    var borderColor = style && style.stroke;\n    var mainType = this.mainType;\n    var isSeries = mainType === 'series';\n    var userOutput = data.userOutput && data.userOutput.get();\n    return {\n      componentType: mainType,\n      componentSubType: this.subType,\n      componentIndex: this.componentIndex,\n      seriesType: isSeries ? this.subType : null,\n      seriesIndex: this.seriesIndex,\n      seriesId: isSeries ? this.id : null,\n      seriesName: isSeries ? this.name : null,\n      name: name,\n      dataIndex: rawDataIndex,\n      data: itemOpt,\n      dataType: dataType,\n      value: rawValue,\n      color: color,\n      borderColor: borderColor,\n      dimensionNames: userOutput ? userOutput.fullDimensions : null,\n      encode: userOutput ? userOutput.encode : null,\n      // Param name list for mapping `a`, `b`, `c`, `d`, `e`\n      $vars: ['seriesName', 'name', 'value']\n    };\n  };\n  /**\n   * Format label\n   * @param dataIndex\n   * @param status 'normal' by default\n   * @param dataType\n   * @param labelDimIndex Only used in some chart that\n   *        use formatter in different dimensions, like radar.\n   * @param formatter Formatter given outside.\n   * @return return null/undefined if no formatter\n   */\n  DataFormatMixin.prototype.getFormattedLabel = function (dataIndex, status, dataType, labelDimIndex, formatter, extendParams) {\n    status = status || 'normal';\n    var data = this.getData(dataType);\n    var params = this.getDataParams(dataIndex, dataType);\n    if (extendParams) {\n      params.value = extendParams.interpolatedValue;\n    }\n    if (labelDimIndex != null && zrUtil.isArray(params.value)) {\n      params.value = params.value[labelDimIndex];\n    }\n    if (!formatter) {\n      var itemModel = data.getItemModel(dataIndex);\n      // @ts-ignore\n      formatter = itemModel.get(status === 'normal' ? ['label', 'formatter'] : [status, 'label', 'formatter']);\n    }\n    if (zrUtil.isFunction(formatter)) {\n      params.status = status;\n      params.dimensionIndex = labelDimIndex;\n      return formatter(params);\n    } else if (zrUtil.isString(formatter)) {\n      var str = formatTpl(formatter, params);\n      // Support 'aaa{@[3]}bbb{@product}ccc'.\n      // Do not support '}' in dim name util have to.\n      return str.replace(DIMENSION_LABEL_REG, function (origin, dimStr) {\n        var len = dimStr.length;\n        var dimLoose = dimStr;\n        if (dimLoose.charAt(0) === '[' && dimLoose.charAt(len - 1) === ']') {\n          dimLoose = +dimLoose.slice(1, len - 1); // Also support: '[]' => 0\n          if (process.env.NODE_ENV !== 'production') {\n            if (isNaN(dimLoose)) {\n              error(\"Invalide label formatter: @\" + dimStr + \", only support @[0], @[1], @[2], ...\");\n            }\n          }\n        }\n        var val = retrieveRawValue(data, dataIndex, dimLoose);\n        if (extendParams && zrUtil.isArray(extendParams.interpolatedValue)) {\n          var dimIndex = data.getDimensionIndex(dimLoose);\n          if (dimIndex >= 0) {\n            val = extendParams.interpolatedValue[dimIndex];\n          }\n        }\n        return val != null ? val + '' : '';\n      });\n    }\n  };\n  /**\n   * Get raw value in option\n   */\n  DataFormatMixin.prototype.getRawValue = function (idx, dataType) {\n    return retrieveRawValue(this.getData(dataType), idx);\n  };\n  /**\n   * Should be implemented.\n   * @param {number} dataIndex\n   * @param {boolean} [multipleSeries=false]\n   * @param {string} [dataType]\n   */\n  DataFormatMixin.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    // Empty function\n    return;\n  };\n  return DataFormatMixin;\n}();\nexport { DataFormatMixin };\n;\n// PENDING: previously we accept this type when calling `formatTooltip`,\n// but guess little chance has been used outside. Do we need to backward\n// compat it?\n// type TooltipFormatResultLegacyObject = {\n//     // `html` means the markup language text, either in 'html' or 'richText'.\n//     // The name `html` is not appropriate because in 'richText' it is not a HTML\n//     // string. But still support it for backward compatibility.\n//     html: string;\n//     markers: Dictionary<ColorString>;\n// };\n/**\n * For backward compat, normalize the return from `formatTooltip`.\n */\nexport function normalizeTooltipFormatResult(result) {\n  var markupText;\n  // let markers: Dictionary<ColorString>;\n  var markupFragment;\n  if (zrUtil.isObject(result)) {\n    if (result.type) {\n      markupFragment = result;\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn('The return type of `formatTooltip` is not supported: ' + makePrintable(result));\n      }\n    }\n    // else {\n    //     markupText = (result as TooltipFormatResultLegacyObject).html;\n    //     markers = (result as TooltipFormatResultLegacyObject).markers;\n    //     if (markersExisting) {\n    //         markers = zrUtil.merge(markersExisting, markers);\n    //     }\n    // }\n  } else {\n    markupText = result;\n  }\n  return {\n    text: markupText,\n    // markers: markers || markersExisting,\n    frag: markupFragment\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { assert, isArray } from 'zrender/lib/core/util.js';\n;\n/**\n * @param {Object} define\n * @return See the return of `createTask`.\n */\nexport function createTask(define) {\n  return new Task(define);\n}\nvar Task = /** @class */function () {\n  function Task(define) {\n    define = define || {};\n    this._reset = define.reset;\n    this._plan = define.plan;\n    this._count = define.count;\n    this._onDirty = define.onDirty;\n    this._dirty = true;\n  }\n  /**\n   * @param step Specified step.\n   * @param skip Skip customer perform call.\n   * @param modBy Sampling window size.\n   * @param modDataCount Sampling count.\n   * @return whether unfinished.\n   */\n  Task.prototype.perform = function (performArgs) {\n    var upTask = this._upstream;\n    var skip = performArgs && performArgs.skip;\n    // TODO some refactor.\n    // Pull data. Must pull data each time, because context.data\n    // may be updated by Series.setData.\n    if (this._dirty && upTask) {\n      var context = this.context;\n      context.data = context.outputData = upTask.context.outputData;\n    }\n    if (this.__pipeline) {\n      this.__pipeline.currentTask = this;\n    }\n    var planResult;\n    if (this._plan && !skip) {\n      planResult = this._plan(this.context);\n    }\n    // Support sharding by mod, which changes the render sequence and makes the rendered graphic\n    // elements uniformed distributed when progress, especially when moving or zooming.\n    var lastModBy = normalizeModBy(this._modBy);\n    var lastModDataCount = this._modDataCount || 0;\n    var modBy = normalizeModBy(performArgs && performArgs.modBy);\n    var modDataCount = performArgs && performArgs.modDataCount || 0;\n    if (lastModBy !== modBy || lastModDataCount !== modDataCount) {\n      planResult = 'reset';\n    }\n    function normalizeModBy(val) {\n      !(val >= 1) && (val = 1); // jshint ignore:line\n      return val;\n    }\n    var forceFirstProgress;\n    if (this._dirty || planResult === 'reset') {\n      this._dirty = false;\n      forceFirstProgress = this._doReset(skip);\n    }\n    this._modBy = modBy;\n    this._modDataCount = modDataCount;\n    var step = performArgs && performArgs.step;\n    if (upTask) {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(upTask._outputDueEnd != null);\n      }\n      this._dueEnd = upTask._outputDueEnd;\n    }\n    // DataTask or overallTask\n    else {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(!this._progress || this._count);\n      }\n      this._dueEnd = this._count ? this._count(this.context) : Infinity;\n    }\n    // Note: Stubs, that its host overall task let it has progress, has progress.\n    // If no progress, pass index from upstream to downstream each time plan called.\n    if (this._progress) {\n      var start = this._dueIndex;\n      var end = Math.min(step != null ? this._dueIndex + step : Infinity, this._dueEnd);\n      if (!skip && (forceFirstProgress || start < end)) {\n        var progress = this._progress;\n        if (isArray(progress)) {\n          for (var i = 0; i < progress.length; i++) {\n            this._doProgress(progress[i], start, end, modBy, modDataCount);\n          }\n        } else {\n          this._doProgress(progress, start, end, modBy, modDataCount);\n        }\n      }\n      this._dueIndex = end;\n      // If no `outputDueEnd`, assume that output data and\n      // input data is the same, so use `dueIndex` as `outputDueEnd`.\n      var outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : end;\n      if (process.env.NODE_ENV !== 'production') {\n        // ??? Can not rollback.\n        assert(outputDueEnd >= this._outputDueEnd);\n      }\n      this._outputDueEnd = outputDueEnd;\n    } else {\n      // (1) Some overall task has no progress.\n      // (2) Stubs, that its host overall task do not let it has progress, has no progress.\n      // This should always be performed so it can be passed to downstream.\n      this._dueIndex = this._outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : this._dueEnd;\n    }\n    return this.unfinished();\n  };\n  Task.prototype.dirty = function () {\n    this._dirty = true;\n    this._onDirty && this._onDirty(this.context);\n  };\n  Task.prototype._doProgress = function (progress, start, end, modBy, modDataCount) {\n    iterator.reset(start, end, modBy, modDataCount);\n    this._callingProgress = progress;\n    this._callingProgress({\n      start: start,\n      end: end,\n      count: end - start,\n      next: iterator.next\n    }, this.context);\n  };\n  Task.prototype._doReset = function (skip) {\n    this._dueIndex = this._outputDueEnd = this._dueEnd = 0;\n    this._settedOutputEnd = null;\n    var progress;\n    var forceFirstProgress;\n    if (!skip && this._reset) {\n      progress = this._reset(this.context);\n      if (progress && progress.progress) {\n        forceFirstProgress = progress.forceFirstProgress;\n        progress = progress.progress;\n      }\n      // To simplify no progress checking, array must has item.\n      if (isArray(progress) && !progress.length) {\n        progress = null;\n      }\n    }\n    this._progress = progress;\n    this._modBy = this._modDataCount = null;\n    var downstream = this._downstream;\n    downstream && downstream.dirty();\n    return forceFirstProgress;\n  };\n  Task.prototype.unfinished = function () {\n    return this._progress && this._dueIndex < this._dueEnd;\n  };\n  /**\n   * @param downTask The downstream task.\n   * @return The downstream task.\n   */\n  Task.prototype.pipe = function (downTask) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(downTask && !downTask._disposed && downTask !== this);\n    }\n    // If already downstream, do not dirty downTask.\n    if (this._downstream !== downTask || this._dirty) {\n      this._downstream = downTask;\n      downTask._upstream = this;\n      downTask.dirty();\n    }\n  };\n  Task.prototype.dispose = function () {\n    if (this._disposed) {\n      return;\n    }\n    this._upstream && (this._upstream._downstream = null);\n    this._downstream && (this._downstream._upstream = null);\n    this._dirty = false;\n    this._disposed = true;\n  };\n  Task.prototype.getUpstream = function () {\n    return this._upstream;\n  };\n  Task.prototype.getDownstream = function () {\n    return this._downstream;\n  };\n  Task.prototype.setOutputEnd = function (end) {\n    // This only happens in dataTask, dataZoom, map, currently.\n    // where dataZoom do not set end each time, but only set\n    // when reset. So we should record the set end, in case\n    // that the stub of dataZoom perform again and earse the\n    // set end by upstream.\n    this._outputDueEnd = this._settedOutputEnd = end;\n  };\n  return Task;\n}();\nexport { Task };\nvar iterator = function () {\n  var end;\n  var current;\n  var modBy;\n  var modDataCount;\n  var winCount;\n  var it = {\n    reset: function (s, e, sStep, sCount) {\n      current = s;\n      end = e;\n      modBy = sStep;\n      modDataCount = sCount;\n      winCount = Math.ceil(modDataCount / modBy);\n      it.next = modBy > 1 && modDataCount > 0 ? modNext : sequentialNext;\n    }\n  };\n  return it;\n  function sequentialNext() {\n    return current < end ? current++ : null;\n  }\n  function modNext() {\n    var dataIndex = current % winCount * modBy + Math.ceil(current / winCount);\n    var result = current >= end ? null : dataIndex < modDataCount ? dataIndex\n    // If modDataCount is smaller than data.count() (consider `appendData` case),\n    // Use normal linear rendering mode.\n    : current;\n    current++;\n    return result;\n  }\n}();\n// -----------------------------------------------------------------------------\n// For stream debug (Should be commented out after used!)\n// @usage: printTask(this, 'begin');\n// @usage: printTask(this, null, {someExtraProp});\n// @usage: Use `__idxInPipeline` as conditional breakpiont.\n//\n// window.printTask = function (task: any, prefix: string, extra: { [key: string]: unknown }): void {\n//     window.ecTaskUID == null && (window.ecTaskUID = 0);\n//     task.uidDebug == null && (task.uidDebug = `task_${window.ecTaskUID++}`);\n//     task.agent && task.agent.uidDebug == null && (task.agent.uidDebug = `task_${window.ecTaskUID++}`);\n//     let props = [];\n//     if (task.__pipeline) {\n//         let val = `${task.__idxInPipeline}/${task.__pipeline.tail.__idxInPipeline} ${task.agent ? '(stub)' : ''}`;\n//         props.push({text: '__idxInPipeline/total', value: val});\n//     } else {\n//         let stubCount = 0;\n//         task.agentStubMap.each(() => stubCount++);\n//         props.push({text: 'idx', value: `overall (stubs: ${stubCount})`});\n//     }\n//     props.push({text: 'uid', value: task.uidDebug});\n//     if (task.__pipeline) {\n//         props.push({text: 'pipelineId', value: task.__pipeline.id});\n//         task.agent && props.push(\n//             {text: 'stubFor', value: task.agent.uidDebug}\n//         );\n//     }\n//     props.push(\n//         {text: 'dirty', value: task._dirty},\n//         {text: 'dueIndex', value: task._dueIndex},\n//         {text: 'dueEnd', value: task._dueEnd},\n//         {text: 'outputDueEnd', value: task._outputDueEnd}\n//     );\n//     if (extra) {\n//         Object.keys(extra).forEach(key => {\n//             props.push({text: key, value: extra[key]});\n//         });\n//     }\n//     let args = ['color: blue'];\n//     let msg = `%c[${prefix || 'T'}] %c` + props.map(item => (\n//         args.push('color: green', 'color: red'),\n//         `${item.text}: %c${item.value}`\n//     )).join('%c, ');\n//     console.log.apply(console, [msg].concat(args));\n//     // console.log(this);\n// };\n// window.printPipeline = function (task: any, prefix: string) {\n//     const pipeline = task.__pipeline;\n//     let currTask = pipeline.head;\n//     while (currTask) {\n//         window.printTask(currTask, prefix);\n//         currTask = currTask._downstream;\n//     }\n// };\n// window.showChain = function (chainHeadTask) {\n//     var chain = [];\n//     var task = chainHeadTask;\n//     while (task) {\n//         chain.push({\n//             task: task,\n//             up: task._upstream,\n//             down: task._downstream,\n//             idxInPipeline: task.__idxInPipeline\n//         });\n//         task = task._downstream;\n//     }\n//     return chain;\n// };\n// window.findTaskInChain = function (task, chainHeadTask) {\n//     let chain = window.showChain(chainHeadTask);\n//     let result = [];\n//     for (let i = 0; i < chain.length; i++) {\n//         let chainItem = chain[i];\n//         if (chainItem.task === task) {\n//             result.push(i);\n//         }\n//     }\n//     return result;\n// };\n// window.printChainAEachInChainB = function (chainHeadTaskA, chainHeadTaskB) {\n//     let chainA = window.showChain(chainHeadTaskA);\n//     for (let i = 0; i < chainA.length; i++) {\n//         console.log('chainAIdx:', i, 'inChainB:', window.findTaskInChain(chainA[i].task, chainHeadTaskB));\n//     }\n// };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { SERIES_LAYOUT_BY_COLUMN, SOURCE_FORMAT_OBJECT_ROWS, SOURCE_FORMAT_ARRAY_ROWS } from '../../util/types.js';\nimport { normalizeToArray } from '../../util/model.js';\nimport { createHashMap, bind, each, hasOwn, map, clone, isObject, extend, isNumber } from 'zrender/lib/core/util.js';\nimport { getRawSourceItemGetter, getRawSourceDataCounter, getRawSourceValueGetter } from './dataProvider.js';\nimport { parseDataValue } from './dataValueHelper.js';\nimport { log, makePrintable, throwError } from '../../util/log.js';\nimport { createSource, detectSourceFormat } from '../Source.js';\n/**\n * TODO: disable writable.\n * This structure will be exposed to users.\n */\nvar ExternalSource = /** @class */function () {\n  function ExternalSource() {}\n  ExternalSource.prototype.getRawData = function () {\n    // Only built-in transform available.\n    throw new Error('not supported');\n  };\n  ExternalSource.prototype.getRawDataItem = function (dataIndex) {\n    // Only built-in transform available.\n    throw new Error('not supported');\n  };\n  ExternalSource.prototype.cloneRawData = function () {\n    return;\n  };\n  /**\n   * @return If dimension not found, return null/undefined.\n   */\n  ExternalSource.prototype.getDimensionInfo = function (dim) {\n    return;\n  };\n  /**\n   * dimensions defined if and only if either:\n   * (a) dataset.dimensions are declared.\n   * (b) dataset data include dimensions definitions in data (detected or via specified `sourceHeader`).\n   * If dimensions are defined, `dimensionInfoAll` is corresponding to\n   * the defined dimensions.\n   * Otherwise, `dimensionInfoAll` is determined by data columns.\n   * @return Always return an array (even empty array).\n   */\n  ExternalSource.prototype.cloneAllDimensionInfo = function () {\n    return;\n  };\n  ExternalSource.prototype.count = function () {\n    return;\n  };\n  /**\n   * Only support by dimension index.\n   * No need to support by dimension name in transform function,\n   * because transform function is not case-specific, no need to use name literally.\n   */\n  ExternalSource.prototype.retrieveValue = function (dataIndex, dimIndex) {\n    return;\n  };\n  ExternalSource.prototype.retrieveValueFromItem = function (dataItem, dimIndex) {\n    return;\n  };\n  ExternalSource.prototype.convertValue = function (rawVal, dimInfo) {\n    return parseDataValue(rawVal, dimInfo);\n  };\n  return ExternalSource;\n}();\nexport { ExternalSource };\nfunction createExternalSource(internalSource, externalTransform) {\n  var extSource = new ExternalSource();\n  var data = internalSource.data;\n  var sourceFormat = extSource.sourceFormat = internalSource.sourceFormat;\n  var sourceHeaderCount = internalSource.startIndex;\n  var errMsg = '';\n  if (internalSource.seriesLayoutBy !== SERIES_LAYOUT_BY_COLUMN) {\n    // For the logic simplicity in transformer, only 'culumn' is\n    // supported in data transform. Otherwise, the `dimensionsDefine`\n    // might be detected by 'row', which probably confuses users.\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = '`seriesLayoutBy` of upstream dataset can only be \"column\" in data transform.';\n    }\n    throwError(errMsg);\n  }\n  // [MEMO]\n  // Create a new dimensions structure for exposing.\n  // Do not expose all dimension info to users directly.\n  // Because the dimension is probably auto detected from data and not might reliable.\n  // Should not lead the transformers to think that is reliable and return it.\n  // See [DIMENSION_INHERIT_RULE] in `sourceManager.ts`.\n  var dimensions = [];\n  var dimsByName = {};\n  var dimsDef = internalSource.dimensionsDefine;\n  if (dimsDef) {\n    each(dimsDef, function (dimDef, idx) {\n      var name = dimDef.name;\n      var dimDefExt = {\n        index: idx,\n        name: name,\n        displayName: dimDef.displayName\n      };\n      dimensions.push(dimDefExt);\n      // Users probably do not specify dimension name. For simplicity, data transform\n      // does not generate dimension name.\n      if (name != null) {\n        // Dimension name should not be duplicated.\n        // For simplicity, data transform forbids name duplication, do not generate\n        // new name like module `completeDimensions.ts` did, but just tell users.\n        var errMsg_1 = '';\n        if (hasOwn(dimsByName, name)) {\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg_1 = 'dimension name \"' + name + '\" duplicated.';\n          }\n          throwError(errMsg_1);\n        }\n        dimsByName[name] = dimDefExt;\n      }\n    });\n  }\n  // If dimension definitions are not defined and can not be detected.\n  // e.g., pure data `[[11, 22], ...]`.\n  else {\n    for (var i = 0; i < internalSource.dimensionsDetectedCount || 0; i++) {\n      // Do not generete name or anything others. The consequence process in\n      // `transform` or `series` probably have there own name generation strategry.\n      dimensions.push({\n        index: i\n      });\n    }\n  }\n  // Implement public methods:\n  var rawItemGetter = getRawSourceItemGetter(sourceFormat, SERIES_LAYOUT_BY_COLUMN);\n  if (externalTransform.__isBuiltIn) {\n    extSource.getRawDataItem = function (dataIndex) {\n      return rawItemGetter(data, sourceHeaderCount, dimensions, dataIndex);\n    };\n    extSource.getRawData = bind(getRawData, null, internalSource);\n  }\n  extSource.cloneRawData = bind(cloneRawData, null, internalSource);\n  var rawCounter = getRawSourceDataCounter(sourceFormat, SERIES_LAYOUT_BY_COLUMN);\n  extSource.count = bind(rawCounter, null, data, sourceHeaderCount, dimensions);\n  var rawValueGetter = getRawSourceValueGetter(sourceFormat);\n  extSource.retrieveValue = function (dataIndex, dimIndex) {\n    var rawItem = rawItemGetter(data, sourceHeaderCount, dimensions, dataIndex);\n    return retrieveValueFromItem(rawItem, dimIndex);\n  };\n  var retrieveValueFromItem = extSource.retrieveValueFromItem = function (dataItem, dimIndex) {\n    if (dataItem == null) {\n      return;\n    }\n    var dimDef = dimensions[dimIndex];\n    // When `dimIndex` is `null`, `rawValueGetter` return the whole item.\n    if (dimDef) {\n      return rawValueGetter(dataItem, dimIndex, dimDef.name);\n    }\n  };\n  extSource.getDimensionInfo = bind(getDimensionInfo, null, dimensions, dimsByName);\n  extSource.cloneAllDimensionInfo = bind(cloneAllDimensionInfo, null, dimensions);\n  return extSource;\n}\nfunction getRawData(upstream) {\n  var sourceFormat = upstream.sourceFormat;\n  if (!isSupportedSourceFormat(sourceFormat)) {\n    var errMsg = '';\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = '`getRawData` is not supported in source format ' + sourceFormat;\n    }\n    throwError(errMsg);\n  }\n  return upstream.data;\n}\nfunction cloneRawData(upstream) {\n  var sourceFormat = upstream.sourceFormat;\n  var data = upstream.data;\n  if (!isSupportedSourceFormat(sourceFormat)) {\n    var errMsg = '';\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = '`cloneRawData` is not supported in source format ' + sourceFormat;\n    }\n    throwError(errMsg);\n  }\n  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n    var result = [];\n    for (var i = 0, len = data.length; i < len; i++) {\n      // Not strictly clone for performance\n      result.push(data[i].slice());\n    }\n    return result;\n  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n    var result = [];\n    for (var i = 0, len = data.length; i < len; i++) {\n      // Not strictly clone for performance\n      result.push(extend({}, data[i]));\n    }\n    return result;\n  }\n}\nfunction getDimensionInfo(dimensions, dimsByName, dim) {\n  if (dim == null) {\n    return;\n  }\n  // Keep the same logic as `List::getDimension` did.\n  if (isNumber(dim)\n  // If being a number-like string but not being defined a dimension name.\n  || !isNaN(dim) && !hasOwn(dimsByName, dim)) {\n    return dimensions[dim];\n  } else if (hasOwn(dimsByName, dim)) {\n    return dimsByName[dim];\n  }\n}\nfunction cloneAllDimensionInfo(dimensions) {\n  return clone(dimensions);\n}\nvar externalTransformMap = createHashMap();\nexport function registerExternalTransform(externalTransform) {\n  externalTransform = clone(externalTransform);\n  var type = externalTransform.type;\n  var errMsg = '';\n  if (!type) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'Must have a `type` when `registerTransform`.';\n    }\n    throwError(errMsg);\n  }\n  var typeParsed = type.split(':');\n  if (typeParsed.length !== 2) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'Name must include namespace like \"ns:regression\".';\n    }\n    throwError(errMsg);\n  }\n  // Namespace 'echarts:xxx' is official namespace, where the transforms should\n  // be called directly via 'xxx' rather than 'echarts:xxx'.\n  var isBuiltIn = false;\n  if (typeParsed[0] === 'echarts') {\n    type = typeParsed[1];\n    isBuiltIn = true;\n  }\n  externalTransform.__isBuiltIn = isBuiltIn;\n  externalTransformMap.set(type, externalTransform);\n}\nexport function applyDataTransform(rawTransOption, sourceList, infoForPrint) {\n  var pipedTransOption = normalizeToArray(rawTransOption);\n  var pipeLen = pipedTransOption.length;\n  var errMsg = '';\n  if (!pipeLen) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'If `transform` declared, it should at least contain one transform.';\n    }\n    throwError(errMsg);\n  }\n  for (var i = 0, len = pipeLen; i < len; i++) {\n    var transOption = pipedTransOption[i];\n    sourceList = applySingleDataTransform(transOption, sourceList, infoForPrint, pipeLen === 1 ? null : i);\n    // piped transform only support single input, except the fist one.\n    // piped transform only support single output, except the last one.\n    if (i !== len - 1) {\n      sourceList.length = Math.max(sourceList.length, 1);\n    }\n  }\n  return sourceList;\n}\nfunction applySingleDataTransform(transOption, upSourceList, infoForPrint,\n// If `pipeIndex` is null/undefined, no piped transform.\npipeIndex) {\n  var errMsg = '';\n  if (!upSourceList.length) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'Must have at least one upstream dataset.';\n    }\n    throwError(errMsg);\n  }\n  if (!isObject(transOption)) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'transform declaration must be an object rather than ' + typeof transOption + '.';\n    }\n    throwError(errMsg);\n  }\n  var transType = transOption.type;\n  var externalTransform = externalTransformMap.get(transType);\n  if (!externalTransform) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'Can not find transform on type \"' + transType + '\".';\n    }\n    throwError(errMsg);\n  }\n  // Prepare source\n  var extUpSourceList = map(upSourceList, function (upSource) {\n    return createExternalSource(upSource, externalTransform);\n  });\n  var resultList = normalizeToArray(externalTransform.transform({\n    upstream: extUpSourceList[0],\n    upstreamList: extUpSourceList,\n    config: clone(transOption.config)\n  }));\n  if (process.env.NODE_ENV !== 'production') {\n    if (transOption.print) {\n      var printStrArr = map(resultList, function (extSource) {\n        var pipeIndexStr = pipeIndex != null ? ' === pipe index: ' + pipeIndex : '';\n        return ['=== dataset index: ' + infoForPrint.datasetIndex + pipeIndexStr + ' ===', '- transform result data:', makePrintable(extSource.data), '- transform result dimensions:', makePrintable(extSource.dimensions)].join('\\n');\n      }).join('\\n');\n      log(printStrArr);\n    }\n  }\n  return map(resultList, function (result, resultIndex) {\n    var errMsg = '';\n    if (!isObject(result)) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'A transform should not return some empty results.';\n      }\n      throwError(errMsg);\n    }\n    if (!result.data) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'Transform result data should be not be null or undefined';\n      }\n      throwError(errMsg);\n    }\n    var sourceFormat = detectSourceFormat(result.data);\n    if (!isSupportedSourceFormat(sourceFormat)) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'Transform result data should be array rows or object rows.';\n      }\n      throwError(errMsg);\n    }\n    var resultMetaRawOption;\n    var firstUpSource = upSourceList[0];\n    /**\n     * Intuitively, the end users known the content of the original `dataset.source`,\n     * calucating the transform result in mind.\n     * Suppose the original `dataset.source` is:\n     * ```js\n     * [\n     *     ['product', '2012', '2013', '2014', '2015'],\n     *     ['AAA', 41.1, 30.4, 65.1, 53.3],\n     *     ['BBB', 86.5, 92.1, 85.7, 83.1],\n     *     ['CCC', 24.1, 67.2, 79.5, 86.4]\n     * ]\n     * ```\n     * The dimension info have to be detected from the source data.\n     * Some of the transformers (like filter, sort) will follow the dimension info\n     * of upstream, while others use new dimensions (like aggregate).\n     * Transformer can output a field `dimensions` to define the its own output dimensions.\n     * We also allow transformers to ignore the output `dimensions` field, and\n     * inherit the upstream dimensions definition. It can reduce the burden of handling\n     * dimensions in transformers.\n     *\n     * See also [DIMENSION_INHERIT_RULE] in `sourceManager.ts`.\n     */\n    if (firstUpSource && resultIndex === 0\n    // If transformer returns `dimensions`, it means that the transformer has different\n    // dimensions definitions. We do not inherit anything from upstream.\n    && !result.dimensions) {\n      var startIndex = firstUpSource.startIndex;\n      // We copy the header of upstream to the result, because:\n      // (1) The returned data always does not contain header line and can not be used\n      // as dimension-detection. In this case we can not use \"detected dimensions\" of\n      // upstream directly, because it might be detected based on different `seriesLayoutBy`.\n      // (2) We should support that the series read the upstream source in `seriesLayoutBy: 'row'`.\n      // So the original detected header should be add to the result, otherwise they can not be read.\n      if (startIndex) {\n        result.data = firstUpSource.data.slice(0, startIndex).concat(result.data);\n      }\n      resultMetaRawOption = {\n        seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN,\n        sourceHeader: startIndex,\n        dimensions: firstUpSource.metaRawOption.dimensions\n      };\n    } else {\n      resultMetaRawOption = {\n        seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN,\n        sourceHeader: 0,\n        dimensions: result.dimensions\n      };\n    }\n    return createSource(result.data, resultMetaRawOption, null);\n  });\n}\nfunction isSupportedSourceFormat(sourceFormat) {\n  return sourceFormat === SOURCE_FORMAT_ARRAY_ROWS || sourceFormat === SOURCE_FORMAT_OBJECT_ROWS;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { setAsPrimitive, map, isTypedArray, assert, each, retrieve2 } from 'zrender/lib/core/util.js';\nimport { createSource, cloneSourceShallow } from '../Source.js';\nimport { SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ORIGINAL } from '../../util/types.js';\nimport { querySeriesUpstreamDatasetModel, queryDatasetUpstreamDatasetModels } from './sourceHelper.js';\nimport { applyDataTransform } from './transform.js';\nimport DataStore from '../DataStore.js';\nimport { DefaultDataProvider } from './dataProvider.js';\n/**\n * [REQUIREMENT_MEMO]:\n * (0) `metaRawOption` means `dimensions`/`sourceHeader`/`seriesLayoutBy` in raw option.\n * (1) Keep support the feature: `metaRawOption` can be specified both on `series` and\n * `root-dataset`. Them on `series` has higher priority.\n * (2) Do not support to set `metaRawOption` on a `non-root-dataset`, because it might\n * confuse users: whether those props indicate how to visit the upstream source or visit\n * the transform result source, and some transforms has nothing to do with these props,\n * and some transforms might have multiple upstream.\n * (3) Transforms should specify `metaRawOption` in each output, just like they can be\n * declared in `root-dataset`.\n * (4) At present only support visit source in `SERIES_LAYOUT_BY_COLUMN` in transforms.\n * That is for reducing complexity in transforms.\n * PENDING: Whether to provide transposition transform?\n *\n * [IMPLEMENTAION_MEMO]:\n * \"sourceVisitConfig\" are calculated from `metaRawOption` and `data`.\n * They will not be calculated until `source` is about to be visited (to prevent from\n * duplicate calcuation). `source` is visited only in series and input to transforms.\n *\n * [DIMENSION_INHERIT_RULE]:\n * By default the dimensions are inherited from ancestors, unless a transform return\n * a new dimensions definition.\n * Consider the case:\n * ```js\n * dataset: [{\n *     source: [ ['Product', 'Sales', 'Prise'], ['Cookies', 321, 44.21], ...]\n * }, {\n *     transform: { type: 'filter', ... }\n * }]\n * dataset: [{\n *     dimension: ['Product', 'Sales', 'Prise'],\n *     source: [ ['Cookies', 321, 44.21], ...]\n * }, {\n *     transform: { type: 'filter', ... }\n * }]\n * ```\n * The two types of option should have the same behavior after transform.\n *\n *\n * [SCENARIO]:\n * (1) Provide source data directly:\n * ```js\n * series: {\n *     encode: {...},\n *     dimensions: [...]\n *     seriesLayoutBy: 'row',\n *     data: [[...]]\n * }\n * ```\n * (2) Series refer to dataset.\n * ```js\n * series: [{\n *     encode: {...}\n *     // Ignore datasetIndex means `datasetIndex: 0`\n *     // and the dimensions defination in dataset is used\n * }, {\n *     encode: {...},\n *     seriesLayoutBy: 'column',\n *     datasetIndex: 1\n * }]\n * ```\n * (3) dataset transform\n * ```js\n * dataset: [{\n *     source: [...]\n * }, {\n *     source: [...]\n * }, {\n *     // By default from 0.\n *     transform: { type: 'filter', config: {...} }\n * }, {\n *     // Piped.\n *     transform: [\n *         { type: 'filter', config: {...} },\n *         { type: 'sort', config: {...} }\n *     ]\n * }, {\n *     id: 'regressionData',\n *     fromDatasetIndex: 1,\n *     // Third-party transform\n *     transform: { type: 'ecStat:regression', config: {...} }\n * }, {\n *     // retrieve the extra result.\n *     id: 'regressionFormula',\n *     fromDatasetId: 'regressionData',\n *     fromTransformResult: 1\n * }]\n * ```\n */\nvar SourceManager = /** @class */function () {\n  function SourceManager(sourceHost) {\n    // Cached source. Do not repeat calculating if not dirty.\n    this._sourceList = [];\n    this._storeList = [];\n    // version sign of each upstream source manager.\n    this._upstreamSignList = [];\n    this._versionSignBase = 0;\n    this._dirty = true;\n    this._sourceHost = sourceHost;\n  }\n  /**\n   * Mark dirty.\n   */\n  SourceManager.prototype.dirty = function () {\n    this._setLocalSource([], []);\n    this._storeList = [];\n    this._dirty = true;\n  };\n  SourceManager.prototype._setLocalSource = function (sourceList, upstreamSignList) {\n    this._sourceList = sourceList;\n    this._upstreamSignList = upstreamSignList;\n    this._versionSignBase++;\n    if (this._versionSignBase > 9e10) {\n      this._versionSignBase = 0;\n    }\n  };\n  /**\n   * For detecting whether the upstream source is dirty, so that\n   * the local cached source (in `_sourceList`) should be discarded.\n   */\n  SourceManager.prototype._getVersionSign = function () {\n    return this._sourceHost.uid + '_' + this._versionSignBase;\n  };\n  /**\n   * Always return a source instance. Otherwise throw error.\n   */\n  SourceManager.prototype.prepareSource = function () {\n    // For the case that call `setOption` multiple time but no data changed,\n    // cache the result source to prevent from repeating transform.\n    if (this._isDirty()) {\n      this._createSource();\n      this._dirty = false;\n    }\n  };\n  SourceManager.prototype._createSource = function () {\n    this._setLocalSource([], []);\n    var sourceHost = this._sourceHost;\n    var upSourceMgrList = this._getUpstreamSourceManagers();\n    var hasUpstream = !!upSourceMgrList.length;\n    var resultSourceList;\n    var upstreamSignList;\n    if (isSeries(sourceHost)) {\n      var seriesModel = sourceHost;\n      var data = void 0;\n      var sourceFormat = void 0;\n      var upSource = void 0;\n      // Has upstream dataset\n      if (hasUpstream) {\n        var upSourceMgr = upSourceMgrList[0];\n        upSourceMgr.prepareSource();\n        upSource = upSourceMgr.getSource();\n        data = upSource.data;\n        sourceFormat = upSource.sourceFormat;\n        upstreamSignList = [upSourceMgr._getVersionSign()];\n      }\n      // Series data is from own.\n      else {\n        data = seriesModel.get('data', true);\n        sourceFormat = isTypedArray(data) ? SOURCE_FORMAT_TYPED_ARRAY : SOURCE_FORMAT_ORIGINAL;\n        upstreamSignList = [];\n      }\n      // See [REQUIREMENT_MEMO], merge settings on series and parent dataset if it is root.\n      var newMetaRawOption = this._getSourceMetaRawOption() || {};\n      var upMetaRawOption = upSource && upSource.metaRawOption || {};\n      var seriesLayoutBy = retrieve2(newMetaRawOption.seriesLayoutBy, upMetaRawOption.seriesLayoutBy) || null;\n      var sourceHeader = retrieve2(newMetaRawOption.sourceHeader, upMetaRawOption.sourceHeader);\n      // Note here we should not use `upSource.dimensionsDefine`. Consider the case:\n      // `upSource.dimensionsDefine` is detected by `seriesLayoutBy: 'column'`,\n      // but series need `seriesLayoutBy: 'row'`.\n      var dimensions = retrieve2(newMetaRawOption.dimensions, upMetaRawOption.dimensions);\n      // We share source with dataset as much as possible\n      // to avoid extra memory cost of high dimensional data.\n      var needsCreateSource = seriesLayoutBy !== upMetaRawOption.seriesLayoutBy || !!sourceHeader !== !!upMetaRawOption.sourceHeader || dimensions;\n      resultSourceList = needsCreateSource ? [createSource(data, {\n        seriesLayoutBy: seriesLayoutBy,\n        sourceHeader: sourceHeader,\n        dimensions: dimensions\n      }, sourceFormat)] : [];\n    } else {\n      var datasetModel = sourceHost;\n      // Has upstream dataset.\n      if (hasUpstream) {\n        var result = this._applyTransform(upSourceMgrList);\n        resultSourceList = result.sourceList;\n        upstreamSignList = result.upstreamSignList;\n      }\n      // Is root dataset.\n      else {\n        var sourceData = datasetModel.get('source', true);\n        resultSourceList = [createSource(sourceData, this._getSourceMetaRawOption(), null)];\n        upstreamSignList = [];\n      }\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      assert(resultSourceList && upstreamSignList);\n    }\n    this._setLocalSource(resultSourceList, upstreamSignList);\n  };\n  SourceManager.prototype._applyTransform = function (upMgrList) {\n    var datasetModel = this._sourceHost;\n    var transformOption = datasetModel.get('transform', true);\n    var fromTransformResult = datasetModel.get('fromTransformResult', true);\n    if (process.env.NODE_ENV !== 'production') {\n      assert(fromTransformResult != null || transformOption != null);\n    }\n    if (fromTransformResult != null) {\n      var errMsg = '';\n      if (upMgrList.length !== 1) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'When using `fromTransformResult`, there should be only one upstream dataset';\n        }\n        doThrow(errMsg);\n      }\n    }\n    var sourceList;\n    var upSourceList = [];\n    var upstreamSignList = [];\n    each(upMgrList, function (upMgr) {\n      upMgr.prepareSource();\n      var upSource = upMgr.getSource(fromTransformResult || 0);\n      var errMsg = '';\n      if (fromTransformResult != null && !upSource) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'Can not retrieve result by `fromTransformResult`: ' + fromTransformResult;\n        }\n        doThrow(errMsg);\n      }\n      upSourceList.push(upSource);\n      upstreamSignList.push(upMgr._getVersionSign());\n    });\n    if (transformOption) {\n      sourceList = applyDataTransform(transformOption, upSourceList, {\n        datasetIndex: datasetModel.componentIndex\n      });\n    } else if (fromTransformResult != null) {\n      sourceList = [cloneSourceShallow(upSourceList[0])];\n    }\n    return {\n      sourceList: sourceList,\n      upstreamSignList: upstreamSignList\n    };\n  };\n  SourceManager.prototype._isDirty = function () {\n    if (this._dirty) {\n      return true;\n    }\n    // All sourceList is from the some upstream.\n    var upSourceMgrList = this._getUpstreamSourceManagers();\n    for (var i = 0; i < upSourceMgrList.length; i++) {\n      var upSrcMgr = upSourceMgrList[i];\n      if (\n      // Consider the case that there is ancestor diry, call it recursively.\n      // The performance is probably not an issue because usually the chain is not long.\n      upSrcMgr._isDirty() || this._upstreamSignList[i] !== upSrcMgr._getVersionSign()) {\n        return true;\n      }\n    }\n  };\n  /**\n   * @param sourceIndex By default 0, means \"main source\".\n   *                    In most cases there is only one source.\n   */\n  SourceManager.prototype.getSource = function (sourceIndex) {\n    sourceIndex = sourceIndex || 0;\n    var source = this._sourceList[sourceIndex];\n    if (!source) {\n      // Series may share source instance with dataset.\n      var upSourceMgrList = this._getUpstreamSourceManagers();\n      return upSourceMgrList[0] && upSourceMgrList[0].getSource(sourceIndex);\n    }\n    return source;\n  };\n  /**\n   *\n   * Get a data store which can be shared across series.\n   * Only available for series.\n   *\n   * @param seriesDimRequest Dimensions that are generated in series.\n   *        Should have been sorted by `storeDimIndex` asc.\n   */\n  SourceManager.prototype.getSharedDataStore = function (seriesDimRequest) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(isSeries(this._sourceHost), 'Can only call getDataStore on series source manager.');\n    }\n    var schema = seriesDimRequest.makeStoreSchema();\n    return this._innerGetDataStore(schema.dimensions, seriesDimRequest.source, schema.hash);\n  };\n  SourceManager.prototype._innerGetDataStore = function (storeDims, seriesSource, sourceReadKey) {\n    // TODO Can use other sourceIndex?\n    var sourceIndex = 0;\n    var storeList = this._storeList;\n    var cachedStoreMap = storeList[sourceIndex];\n    if (!cachedStoreMap) {\n      cachedStoreMap = storeList[sourceIndex] = {};\n    }\n    var cachedStore = cachedStoreMap[sourceReadKey];\n    if (!cachedStore) {\n      var upSourceMgr = this._getUpstreamSourceManagers()[0];\n      if (isSeries(this._sourceHost) && upSourceMgr) {\n        cachedStore = upSourceMgr._innerGetDataStore(storeDims, seriesSource, sourceReadKey);\n      } else {\n        cachedStore = new DataStore();\n        // Always create store from source of series.\n        cachedStore.initData(new DefaultDataProvider(seriesSource, storeDims.length), storeDims);\n      }\n      cachedStoreMap[sourceReadKey] = cachedStore;\n    }\n    return cachedStore;\n  };\n  /**\n   * PENDING: Is it fast enough?\n   * If no upstream, return empty array.\n   */\n  SourceManager.prototype._getUpstreamSourceManagers = function () {\n    // Always get the relationship from the raw option.\n    // Do not cache the link of the dependency graph, so that\n    // there is no need to update them when change happens.\n    var sourceHost = this._sourceHost;\n    if (isSeries(sourceHost)) {\n      var datasetModel = querySeriesUpstreamDatasetModel(sourceHost);\n      return !datasetModel ? [] : [datasetModel.getSourceManager()];\n    } else {\n      return map(queryDatasetUpstreamDatasetModels(sourceHost), function (datasetModel) {\n        return datasetModel.getSourceManager();\n      });\n    }\n  };\n  SourceManager.prototype._getSourceMetaRawOption = function () {\n    var sourceHost = this._sourceHost;\n    var seriesLayoutBy;\n    var sourceHeader;\n    var dimensions;\n    if (isSeries(sourceHost)) {\n      seriesLayoutBy = sourceHost.get('seriesLayoutBy', true);\n      sourceHeader = sourceHost.get('sourceHeader', true);\n      dimensions = sourceHost.get('dimensions', true);\n    }\n    // See [REQUIREMENT_MEMO], `non-root-dataset` do not support them.\n    else if (!this._getUpstreamSourceManagers().length) {\n      var model = sourceHost;\n      seriesLayoutBy = model.get('seriesLayoutBy', true);\n      sourceHeader = model.get('sourceHeader', true);\n      dimensions = model.get('dimensions', true);\n    }\n    return {\n      seriesLayoutBy: seriesLayoutBy,\n      sourceHeader: sourceHeader,\n      dimensions: dimensions\n    };\n  };\n  return SourceManager;\n}();\nexport { SourceManager };\n// Call this method after `super.init` and `super.mergeOption` to\n// disable the transform merge, but do not disable transform clone from rawOption.\nexport function disableTransformOptionMerge(datasetModel) {\n  var transformOption = datasetModel.option.transform;\n  transformOption && setAsPrimitive(datasetModel.option.transform);\n}\nfunction isSeries(sourceHost) {\n  // Avoid circular dependency with Series.ts\n  return sourceHost.mainType === 'series';\n}\nfunction doThrow(errMsg) {\n  throw new Error(errMsg);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend } from 'zrender/lib/core/util.js';\nimport { modifyHSL } from 'zrender/lib/tool/color.js';\nvar tokens = {\n  color: {},\n  darkColor: {},\n  size: {}\n};\nvar color = tokens.color = {\n  theme: ['#5070dd', '#b6d634', '#505372', '#ff994d', '#0ca8df', '#ffd10a', '#fb628b', '#785db0', '#3fbe95'],\n  neutral00: '#fff',\n  neutral05: '#f4f7fd',\n  neutral10: '#e8ebf0',\n  neutral15: '#dbdee4',\n  neutral20: '#cfd2d7',\n  neutral25: '#c3c5cb',\n  neutral30: '#b7b9be',\n  neutral35: '#aaacb2',\n  neutral40: '#9ea0a5',\n  neutral45: '#929399',\n  neutral50: '#86878c',\n  neutral55: '#797b7f',\n  neutral60: '#6d6e73',\n  neutral65: '#616266',\n  neutral70: '#54555a',\n  neutral75: '#48494d',\n  neutral80: '#3c3c41',\n  neutral85: '#303034',\n  neutral90: '#232328',\n  neutral95: '#17171b',\n  neutral99: '#000',\n  accent05: '#eff1f9',\n  accent10: '#e0e4f2',\n  accent15: '#d0d6ec',\n  accent20: '#c0c9e6',\n  accent25: '#b1bbdf',\n  accent30: '#a1aed9',\n  accent35: '#91a0d3',\n  accent40: '#8292cc',\n  accent45: '#7285c6',\n  accent50: '#6578ba',\n  accent55: '#5c6da9',\n  accent60: '#536298',\n  accent65: '#4a5787',\n  accent70: '#404c76',\n  accent75: '#374165',\n  accent80: '#2e3654',\n  accent85: '#252b43',\n  accent90: '#1b2032',\n  accent95: '#121521',\n  transparent: 'rgba(0,0,0,0)',\n  highlight: 'rgba(255,231,130,0.8)'\n};\nextend(color, {\n  primary: color.neutral80,\n  secondary: color.neutral70,\n  tertiary: color.neutral60,\n  quaternary: color.neutral50,\n  disabled: color.neutral20,\n  border: color.neutral30,\n  borderTint: color.neutral20,\n  borderShade: color.neutral40,\n  background: color.neutral05,\n  backgroundTint: 'rgba(234,237,245,0.5)',\n  backgroundTransparent: 'rgba(255,255,255,0)',\n  backgroundShade: color.neutral10,\n  shadow: 'rgba(0,0,0,0.2)',\n  shadowTint: 'rgba(129,130,136,0.2)',\n  axisLine: color.neutral70,\n  axisLineTint: color.neutral40,\n  axisTick: color.neutral70,\n  axisTickMinor: color.neutral60,\n  axisLabel: color.neutral70,\n  axisSplitLine: color.neutral15,\n  axisMinorSplitLine: color.neutral05\n});\nfor (var key in color) {\n  if (color.hasOwnProperty(key)) {\n    var hex = color[key];\n    if (key === 'theme') {\n      // Don't modify theme colors.\n      tokens.darkColor.theme = color.theme.slice();\n    } else if (key === 'highlight') {\n      tokens.darkColor.highlight = 'rgba(255,231,130,0.4)';\n    } else if (key.indexOf('accent') === 0) {\n      // Desaturate and lighten accent colors.\n      tokens.darkColor[key] = modifyHSL(hex, null, function (s) {\n        return s * 0.5;\n      }, function (l) {\n        return Math.min(1, 1.3 - l);\n      });\n    } else {\n      tokens.darkColor[key] = modifyHSL(hex, null, function (s) {\n        return s * 0.9;\n      }, function (l) {\n        return 1 - Math.pow(l, 1.5);\n      });\n    }\n  }\n}\ntokens.size = {\n  xxs: 2,\n  xs: 5,\n  s: 10,\n  m: 15,\n  l: 20,\n  xl: 30,\n  xxl: 40,\n  xxxl: 50\n};\nexport default tokens;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { getTooltipMarker, encodeHTML, makeValueReadable, convertToColorString } from '../../util/format.js';\nimport { isString, each, hasOwn, isArray, map, assert, extend } from 'zrender/lib/core/util.js';\nimport { SortOrderComparator } from '../../data/helper/dataValueHelper.js';\nimport { getRandomIdBase } from '../../util/number.js';\nimport tokens from '../../visual/tokens.js';\nvar TOOLTIP_LINE_HEIGHT_CSS = 'line-height:1';\nfunction getTooltipLineHeight(textStyle) {\n  var lineHeight = textStyle.lineHeight;\n  if (lineHeight == null) {\n    return TOOLTIP_LINE_HEIGHT_CSS;\n  } else {\n    return \"line-height:\" + encodeHTML(lineHeight + '') + \"px\";\n  }\n}\n// TODO: more textStyle option\nfunction getTooltipTextStyle(textStyle, renderMode) {\n  var nameFontColor = textStyle.color || tokens.color.tertiary;\n  var nameFontSize = textStyle.fontSize || 12;\n  var nameFontWeight = textStyle.fontWeight || '400';\n  var valueFontColor = textStyle.color || tokens.color.secondary;\n  var valueFontSize = textStyle.fontSize || 14;\n  var valueFontWeight = textStyle.fontWeight || '900';\n  if (renderMode === 'html') {\n    // `textStyle` is probably from user input, should be encoded to reduce security risk.\n    return {\n      // eslint-disable-next-line max-len\n      nameStyle: \"font-size:\" + encodeHTML(nameFontSize + '') + \"px;color:\" + encodeHTML(nameFontColor) + \";font-weight:\" + encodeHTML(nameFontWeight + ''),\n      // eslint-disable-next-line max-len\n      valueStyle: \"font-size:\" + encodeHTML(valueFontSize + '') + \"px;color:\" + encodeHTML(valueFontColor) + \";font-weight:\" + encodeHTML(valueFontWeight + '')\n    };\n  } else {\n    return {\n      nameStyle: {\n        fontSize: nameFontSize,\n        fill: nameFontColor,\n        fontWeight: nameFontWeight\n      },\n      valueStyle: {\n        fontSize: valueFontSize,\n        fill: valueFontColor,\n        fontWeight: valueFontWeight\n      }\n    };\n  }\n}\n// See `TooltipMarkupLayoutIntent['innerGapLevel']`.\n// (value from UI design)\nvar HTML_GAPS = [0, 10, 20, 30];\nvar RICH_TEXT_GAPS = ['', '\\n', '\\n\\n', '\\n\\n\\n'];\n// eslint-disable-next-line max-len\nexport function createTooltipMarkup(type, option) {\n  option.type = type;\n  return option;\n}\nfunction isSectionFragment(frag) {\n  return frag.type === 'section';\n}\nfunction getBuilder(frag) {\n  return isSectionFragment(frag) ? buildSection : buildNameValue;\n}\nfunction getBlockGapLevel(frag) {\n  if (isSectionFragment(frag)) {\n    var gapLevel_1 = 0;\n    var subBlockLen = frag.blocks.length;\n    var hasInnerGap_1 = subBlockLen > 1 || subBlockLen > 0 && !frag.noHeader;\n    each(frag.blocks, function (subBlock) {\n      var subGapLevel = getBlockGapLevel(subBlock);\n      // If the some of the sub-blocks have some gaps (like 10px) inside, this block\n      // should use a larger gap (like 20px) to distinguish those sub-blocks.\n      if (subGapLevel >= gapLevel_1) {\n        gapLevel_1 = subGapLevel + +(hasInnerGap_1 && (\n        // 0 always can not be readable gap level.\n        !subGapLevel\n        // If no header, always keep the sub gap level. Otherwise\n        // look weird in case `multipleSeries`.\n        || isSectionFragment(subBlock) && !subBlock.noHeader));\n      }\n    });\n    return gapLevel_1;\n  }\n  return 0;\n}\nfunction buildSection(ctx, fragment, topMarginForOuterGap, toolTipTextStyle) {\n  var noHeader = fragment.noHeader;\n  var gaps = getGap(getBlockGapLevel(fragment));\n  var subMarkupTextList = [];\n  var subBlocks = fragment.blocks || [];\n  assert(!subBlocks || isArray(subBlocks));\n  subBlocks = subBlocks || [];\n  var orderMode = ctx.orderMode;\n  if (fragment.sortBlocks && orderMode) {\n    subBlocks = subBlocks.slice();\n    var orderMap = {\n      valueAsc: 'asc',\n      valueDesc: 'desc'\n    };\n    if (hasOwn(orderMap, orderMode)) {\n      var comparator_1 = new SortOrderComparator(orderMap[orderMode], null);\n      subBlocks.sort(function (a, b) {\n        return comparator_1.evaluate(a.sortParam, b.sortParam);\n      });\n    }\n    // FIXME 'seriesDesc' necessary?\n    else if (orderMode === 'seriesDesc') {\n      subBlocks.reverse();\n    }\n  }\n  each(subBlocks, function (subBlock, idx) {\n    var valueFormatter = fragment.valueFormatter;\n    var subMarkupText = getBuilder(subBlock)(\n    // Inherit valueFormatter\n    valueFormatter ? extend(extend({}, ctx), {\n      valueFormatter: valueFormatter\n    }) : ctx, subBlock, idx > 0 ? gaps.html : 0, toolTipTextStyle);\n    subMarkupText != null && subMarkupTextList.push(subMarkupText);\n  });\n  var subMarkupText = ctx.renderMode === 'richText' ? subMarkupTextList.join(gaps.richText) : wrapBlockHTML(toolTipTextStyle, subMarkupTextList.join(''), noHeader ? topMarginForOuterGap : gaps.html);\n  if (noHeader) {\n    return subMarkupText;\n  }\n  var displayableHeader = makeValueReadable(fragment.header, 'ordinal', ctx.useUTC);\n  var nameStyle = getTooltipTextStyle(toolTipTextStyle, ctx.renderMode).nameStyle;\n  var tooltipLineHeight = getTooltipLineHeight(toolTipTextStyle);\n  if (ctx.renderMode === 'richText') {\n    return wrapInlineNameRichText(ctx, displayableHeader, nameStyle) + gaps.richText + subMarkupText;\n  } else {\n    return wrapBlockHTML(toolTipTextStyle, \"<div style=\\\"\" + nameStyle + \";\" + tooltipLineHeight + \";\\\">\" + encodeHTML(displayableHeader) + '</div>' + subMarkupText, topMarginForOuterGap);\n  }\n}\nfunction buildNameValue(ctx, fragment, topMarginForOuterGap, toolTipTextStyle) {\n  var renderMode = ctx.renderMode;\n  var noName = fragment.noName;\n  var noValue = fragment.noValue;\n  var noMarker = !fragment.markerType;\n  var name = fragment.name;\n  var useUTC = ctx.useUTC;\n  var valueFormatter = fragment.valueFormatter || ctx.valueFormatter || function (value) {\n    value = isArray(value) ? value : [value];\n    return map(value, function (val, idx) {\n      return makeValueReadable(val, isArray(valueTypeOption) ? valueTypeOption[idx] : valueTypeOption, useUTC);\n    });\n  };\n  if (noName && noValue) {\n    return;\n  }\n  var markerStr = noMarker ? '' : ctx.markupStyleCreator.makeTooltipMarker(fragment.markerType, fragment.markerColor || tokens.color.secondary, renderMode);\n  var readableName = noName ? '' : makeValueReadable(name, 'ordinal', useUTC);\n  var valueTypeOption = fragment.valueType;\n  var readableValueList = noValue ? [] : valueFormatter(fragment.value, fragment.dataIndex);\n  var valueAlignRight = !noMarker || !noName;\n  // It little weird if only value next to marker but far from marker.\n  var valueCloseToMarker = !noMarker && noName;\n  var _a = getTooltipTextStyle(toolTipTextStyle, renderMode),\n    nameStyle = _a.nameStyle,\n    valueStyle = _a.valueStyle;\n  return renderMode === 'richText' ? (noMarker ? '' : markerStr) + (noName ? '' : wrapInlineNameRichText(ctx, readableName, nameStyle))\n  // Value has commas inside, so use ' ' as delimiter for multiple values.\n  + (noValue ? '' : wrapInlineValueRichText(ctx, readableValueList, valueAlignRight, valueCloseToMarker, valueStyle)) : wrapBlockHTML(toolTipTextStyle, (noMarker ? '' : markerStr) + (noName ? '' : wrapInlineNameHTML(readableName, !noMarker, nameStyle)) + (noValue ? '' : wrapInlineValueHTML(readableValueList, valueAlignRight, valueCloseToMarker, valueStyle)), topMarginForOuterGap);\n}\n/**\n * @return markupText. null/undefined means no content.\n */\nexport function buildTooltipMarkup(fragment, markupStyleCreator, renderMode, orderMode, useUTC, toolTipTextStyle) {\n  if (!fragment) {\n    return;\n  }\n  var builder = getBuilder(fragment);\n  var ctx = {\n    useUTC: useUTC,\n    renderMode: renderMode,\n    orderMode: orderMode,\n    markupStyleCreator: markupStyleCreator,\n    valueFormatter: fragment.valueFormatter\n  };\n  return builder(ctx, fragment, 0, toolTipTextStyle);\n}\nfunction getGap(gapLevel) {\n  return {\n    html: HTML_GAPS[gapLevel],\n    richText: RICH_TEXT_GAPS[gapLevel]\n  };\n}\nfunction wrapBlockHTML(textStyle, encodedContent, topGap) {\n  var clearfix = '<div style=\"clear:both\"></div>';\n  var marginCSS = \"margin: \" + topGap + \"px 0 0\";\n  var tooltipLineHeight = getTooltipLineHeight(textStyle);\n  return \"<div style=\\\"\" + marginCSS + \";\" + tooltipLineHeight + \";\\\">\" + encodedContent + clearfix + '</div>';\n}\nfunction wrapInlineNameHTML(name, leftHasMarker, style) {\n  var marginCss = leftHasMarker ? 'margin-left:2px' : '';\n  return \"<span style=\\\"\" + style + \";\" + marginCss + \"\\\">\" + encodeHTML(name) + '</span>';\n}\nfunction wrapInlineValueHTML(valueList, alignRight, valueCloseToMarker, style) {\n  // Do not too close to marker, considering there are multiple values separated by spaces.\n  var paddingStr = valueCloseToMarker ? '10px' : '20px';\n  var alignCSS = alignRight ? \"float:right;margin-left:\" + paddingStr : '';\n  valueList = isArray(valueList) ? valueList : [valueList];\n  return \"<span style=\\\"\" + alignCSS + \";\" + style + \"\\\">\"\n  // Value has commas inside, so use '  ' as delimiter for multiple values.\n  + map(valueList, function (value) {\n    return encodeHTML(value);\n  }).join('&nbsp;&nbsp;') + '</span>';\n}\nfunction wrapInlineNameRichText(ctx, name, style) {\n  return ctx.markupStyleCreator.wrapRichTextStyle(name, style);\n}\nfunction wrapInlineValueRichText(ctx, values, alignRight, valueCloseToMarker, style) {\n  var styles = [style];\n  var paddingLeft = valueCloseToMarker ? 10 : 20;\n  alignRight && styles.push({\n    padding: [0, 0, 0, paddingLeft],\n    align: 'right'\n  });\n  // Value has commas inside, so use '  ' as delimiter for multiple values.\n  return ctx.markupStyleCreator.wrapRichTextStyle(isArray(values) ? values.join('  ') : values, styles);\n}\nexport function retrieveVisualColorForTooltipMarker(series, dataIndex) {\n  var style = series.getData().getItemVisual(dataIndex, 'style');\n  var color = style[series.visualDrawType];\n  return convertToColorString(color);\n}\nexport function getPaddingFromTooltipModel(model, renderMode) {\n  var padding = model.get('padding');\n  return padding != null ? padding\n  // We give slightly different to look pretty.\n  : renderMode === 'richText' ? [8, 10] : 10;\n}\n/**\n * The major feature is generate styles for `renderMode: 'richText'`.\n * But it also serves `renderMode: 'html'` to provide\n * \"renderMode-independent\" API.\n */\nvar TooltipMarkupStyleCreator = /** @class */function () {\n  function TooltipMarkupStyleCreator() {\n    this.richTextStyles = {};\n    // Notice that \"generate a style name\" usually happens repeatedly when mouse is moving and\n    // a tooltip is displayed. So we put the `_nextStyleNameId` as a member of each creator\n    // rather than static shared by all creators (which will cause it increase to fast).\n    this._nextStyleNameId = getRandomIdBase();\n  }\n  TooltipMarkupStyleCreator.prototype._generateStyleName = function () {\n    return '__EC_aUTo_' + this._nextStyleNameId++;\n  };\n  TooltipMarkupStyleCreator.prototype.makeTooltipMarker = function (markerType, colorStr, renderMode) {\n    var markerId = renderMode === 'richText' ? this._generateStyleName() : null;\n    var marker = getTooltipMarker({\n      color: colorStr,\n      type: markerType,\n      renderMode: renderMode,\n      markerId: markerId\n    });\n    if (isString(marker)) {\n      return marker;\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(markerId);\n      }\n      this.richTextStyles[markerId] = marker.style;\n      return marker.content;\n    }\n  };\n  /**\n   * @usage\n   * ```ts\n   * const styledText = markupStyleCreator.wrapRichTextStyle([\n   *     // The styles will be auto merged.\n   *     {\n   *         fontSize: 12,\n   *         color: 'blue'\n   *     },\n   *     {\n   *         padding: 20\n   *     }\n   * ]);\n   * ```\n   */\n  TooltipMarkupStyleCreator.prototype.wrapRichTextStyle = function (text, styles) {\n    var finalStl = {};\n    if (isArray(styles)) {\n      each(styles, function (stl) {\n        return extend(finalStl, stl);\n      });\n    } else {\n      extend(finalStl, styles);\n    }\n    var styleName = this._generateStyleName();\n    this.richTextStyles[styleName] = finalStl;\n    return \"{\" + styleName + \"|\" + text + \"}\";\n  };\n  return TooltipMarkupStyleCreator;\n}();\nexport { TooltipMarkupStyleCreator };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { trim, isArray, each, reduce } from 'zrender/lib/core/util.js';\nimport { retrieveVisualColorForTooltipMarker, createTooltipMarkup } from './tooltipMarkup.js';\nimport { retrieveRawValue } from '../../data/helper/dataProvider.js';\nimport { isNameSpecified } from '../../util/model.js';\nexport function defaultSeriesFormatTooltip(opt) {\n  var series = opt.series;\n  var dataIndex = opt.dataIndex;\n  var multipleSeries = opt.multipleSeries;\n  var data = series.getData();\n  var tooltipDims = data.mapDimensionsAll('defaultedTooltip');\n  var tooltipDimLen = tooltipDims.length;\n  var value = series.getRawValue(dataIndex);\n  var isValueArr = isArray(value);\n  var markerColor = retrieveVisualColorForTooltipMarker(series, dataIndex);\n  // Complicated rule for pretty tooltip.\n  var inlineValue;\n  var inlineValueType;\n  var subBlocks;\n  var sortParam;\n  if (tooltipDimLen > 1 || isValueArr && !tooltipDimLen) {\n    var formatArrResult = formatTooltipArrayValue(value, series, dataIndex, tooltipDims, markerColor);\n    inlineValue = formatArrResult.inlineValues;\n    inlineValueType = formatArrResult.inlineValueTypes;\n    subBlocks = formatArrResult.blocks;\n    // Only support tooltip sort by the first inline value. It's enough in most cases.\n    sortParam = formatArrResult.inlineValues[0];\n  } else if (tooltipDimLen) {\n    var dimInfo = data.getDimensionInfo(tooltipDims[0]);\n    sortParam = inlineValue = retrieveRawValue(data, dataIndex, tooltipDims[0]);\n    inlineValueType = dimInfo.type;\n  } else {\n    sortParam = inlineValue = isValueArr ? value[0] : value;\n  }\n  // Do not show generated series name. It might not be readable.\n  var seriesNameSpecified = isNameSpecified(series);\n  var seriesName = seriesNameSpecified && series.name || '';\n  var itemName = data.getName(dataIndex);\n  var inlineName = multipleSeries ? seriesName : itemName;\n  return createTooltipMarkup('section', {\n    header: seriesName,\n    // When series name is not specified, do not show a header line with only '-'.\n    // This case always happens in tooltip.trigger: 'item'.\n    noHeader: multipleSeries || !seriesNameSpecified,\n    sortParam: sortParam,\n    blocks: [createTooltipMarkup('nameValue', {\n      markerType: 'item',\n      markerColor: markerColor,\n      // Do not mix display seriesName and itemName in one tooltip,\n      // which might confuses users.\n      name: inlineName,\n      // name dimension might be auto assigned, where the name might\n      // be not readable. So we check trim here.\n      noName: !trim(inlineName),\n      value: inlineValue,\n      valueType: inlineValueType,\n      dataIndex: dataIndex\n    })].concat(subBlocks || [])\n  });\n}\nfunction formatTooltipArrayValue(value, series, dataIndex, tooltipDims, colorStr) {\n  // check: category-no-encode-has-axis-data in dataset.html\n  var data = series.getData();\n  var isValueMultipleLine = reduce(value, function (isValueMultipleLine, val, idx) {\n    var dimItem = data.getDimensionInfo(idx);\n    return isValueMultipleLine = isValueMultipleLine || dimItem && dimItem.tooltip !== false && dimItem.displayName != null;\n  }, false);\n  var inlineValues = [];\n  var inlineValueTypes = [];\n  var blocks = [];\n  tooltipDims.length ? each(tooltipDims, function (dim) {\n    setEachItem(retrieveRawValue(data, dataIndex, dim), dim);\n  })\n  // By default, all dims is used on tooltip.\n  : each(value, setEachItem);\n  function setEachItem(val, dim) {\n    var dimInfo = data.getDimensionInfo(dim);\n    // If `dimInfo.tooltip` is not set, show tooltip.\n    if (!dimInfo || dimInfo.otherDims.tooltip === false) {\n      return;\n    }\n    if (isValueMultipleLine) {\n      blocks.push(createTooltipMarkup('nameValue', {\n        markerType: 'subItem',\n        markerColor: colorStr,\n        name: dimInfo.displayName,\n        value: val,\n        valueType: dimInfo.type\n      }));\n    } else {\n      inlineValues.push(val);\n      inlineValueTypes.push(dimInfo.type);\n    }\n  }\n  return {\n    inlineValues: inlineValues,\n    inlineValueTypes: inlineValueTypes,\n    blocks: blocks\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport * as modelUtil from '../util/model.js';\nimport ComponentModel from './Component.js';\nimport { PaletteMixin } from './mixin/palette.js';\nimport { DataFormatMixin } from '../model/mixin/dataFormat.js';\nimport { getLayoutParams, mergeLayoutParam, fetchLayoutMode } from '../util/layout.js';\nimport { createTask } from '../core/task.js';\nimport { mountExtend } from '../util/clazz.js';\nimport { SourceManager } from '../data/helper/sourceManager.js';\nimport { defaultSeriesFormatTooltip } from '../component/tooltip/seriesFormatTooltip.js';\nvar inner = modelUtil.makeInner();\nfunction getSelectionKey(data, dataIndex) {\n  return data.getName(dataIndex) || data.getId(dataIndex);\n}\nexport var SERIES_UNIVERSAL_TRANSITION_PROP = '__universalTransitionEnabled';\nvar SeriesModel = /** @class */function (_super) {\n  __extends(SeriesModel, _super);\n  function SeriesModel() {\n    // [Caution]: Because this class or desecendants can be used as `XXX.extend(subProto)`,\n    // the class members must not be initialized in constructor or declaration place.\n    // Otherwise there is bad case:\n    //   class A {xxx = 1;}\n    //   enableClassExtend(A);\n    //   class B extends A {}\n    //   var C = B.extend({xxx: 5});\n    //   var c = new C();\n    //   console.log(c.xxx); // expect 5 but always 1.\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    // ---------------------------------------\n    // Props about data selection\n    // ---------------------------------------\n    _this._selectedDataIndicesMap = {};\n    return _this;\n  }\n  SeriesModel.prototype.init = function (option, parentModel, ecModel) {\n    this.seriesIndex = this.componentIndex;\n    this.dataTask = createTask({\n      count: dataTaskCount,\n      reset: dataTaskReset\n    });\n    this.dataTask.context = {\n      model: this\n    };\n    this.mergeDefaultAndTheme(option, ecModel);\n    var sourceManager = inner(this).sourceManager = new SourceManager(this);\n    sourceManager.prepareSource();\n    var data = this.getInitialData(option, ecModel);\n    wrapData(data, this);\n    this.dataTask.context.data = data;\n    if (process.env.NODE_ENV !== 'production') {\n      zrUtil.assert(data, 'getInitialData returned invalid data.');\n    }\n    inner(this).dataBeforeProcessed = data;\n    // If we reverse the order (make data firstly, and then make\n    // dataBeforeProcessed by cloneShallow), cloneShallow will\n    // cause data.graph.data !== data when using\n    // module:echarts/data/Graph or module:echarts/data/Tree.\n    // See module:echarts/data/helper/linkSeriesData\n    // Theoretically, it is unreasonable to call `seriesModel.getData()` in the model\n    // init or merge stage, because the data can be restored. So we do not `restoreData`\n    // and `setData` here, which forbids calling `seriesModel.getData()` in this stage.\n    // Call `seriesModel.getRawData()` instead.\n    // this.restoreData();\n    autoSeriesName(this);\n    this._initSelectedMapFromData(data);\n  };\n  /**\n   * Util for merge default and theme to option\n   */\n  SeriesModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n    var layoutMode = fetchLayoutMode(this);\n    var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n    // Backward compat: using subType on theme.\n    // But if name duplicate between series subType\n    // (for example: parallel) add component mainType,\n    // add suffix 'Series'.\n    var themeSubType = this.subType;\n    if (ComponentModel.hasClass(themeSubType)) {\n      themeSubType += 'Series';\n    }\n    zrUtil.merge(option, ecModel.getTheme().get(this.subType));\n    zrUtil.merge(option, this.getDefaultOption());\n    // Default label emphasis `show`\n    modelUtil.defaultEmphasis(option, 'label', ['show']);\n    this.fillDataTextStyle(option.data);\n    if (layoutMode) {\n      mergeLayoutParam(option, inputPositionParams, layoutMode);\n    }\n  };\n  SeriesModel.prototype.mergeOption = function (newSeriesOption, ecModel) {\n    // this.settingTask.dirty();\n    newSeriesOption = zrUtil.merge(this.option, newSeriesOption, true);\n    this.fillDataTextStyle(newSeriesOption.data);\n    var layoutMode = fetchLayoutMode(this);\n    if (layoutMode) {\n      mergeLayoutParam(this.option, newSeriesOption, layoutMode);\n    }\n    var sourceManager = inner(this).sourceManager;\n    sourceManager.dirty();\n    sourceManager.prepareSource();\n    var data = this.getInitialData(newSeriesOption, ecModel);\n    wrapData(data, this);\n    this.dataTask.dirty();\n    this.dataTask.context.data = data;\n    inner(this).dataBeforeProcessed = data;\n    autoSeriesName(this);\n    this._initSelectedMapFromData(data);\n  };\n  SeriesModel.prototype.fillDataTextStyle = function (data) {\n    // Default data label emphasis `show`\n    // FIXME Tree structure data ?\n    // FIXME Performance ?\n    if (data && !zrUtil.isTypedArray(data)) {\n      var props = ['show'];\n      for (var i = 0; i < data.length; i++) {\n        if (data[i] && data[i].label) {\n          modelUtil.defaultEmphasis(data[i], 'label', props);\n        }\n      }\n    }\n  };\n  /**\n   * Init a data structure from data related option in series\n   * Must be overridden.\n   */\n  SeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return;\n  };\n  /**\n   * Append data to list\n   */\n  SeriesModel.prototype.appendData = function (params) {\n    // FIXME ???\n    // (1) If data from dataset, forbidden append.\n    // (2) support append data of dataset.\n    var data = this.getRawData();\n    data.appendData(params.data);\n  };\n  /**\n   * Consider some method like `filter`, `map` need make new data,\n   * We should make sure that `seriesModel.getData()` get correct\n   * data in the stream procedure. So we fetch data from upstream\n   * each time `task.perform` called.\n   */\n  SeriesModel.prototype.getData = function (dataType) {\n    var task = getCurrentTask(this);\n    if (task) {\n      var data = task.context.data;\n      return dataType == null || !data.getLinkedData ? data : data.getLinkedData(dataType);\n    } else {\n      // When series is not alive (that may happen when click toolbox\n      // restore or setOption with not merge mode), series data may\n      // be still need to judge animation or something when graphic\n      // elements want to know whether fade out.\n      return inner(this).data;\n    }\n  };\n  SeriesModel.prototype.getAllData = function () {\n    var mainData = this.getData();\n    return mainData && mainData.getLinkedDataAll ? mainData.getLinkedDataAll() : [{\n      data: mainData\n    }];\n  };\n  SeriesModel.prototype.setData = function (data) {\n    var task = getCurrentTask(this);\n    if (task) {\n      var context = task.context;\n      // Consider case: filter, data sample.\n      // FIXME:TS never used, so comment it\n      // if (context.data !== data && task.modifyOutputEnd) {\n      //     task.setOutputEnd(data.count());\n      // }\n      context.outputData = data;\n      // Caution: setData should update context.data,\n      // Because getData may be called multiply in a\n      // single stage and expect to get the data just\n      // set. (For example, AxisProxy, x y both call\n      // getData and setDate sequentially).\n      // So the context.data should be fetched from\n      // upstream each time when a stage starts to be\n      // performed.\n      if (task !== this.dataTask) {\n        context.data = data;\n      }\n    }\n    inner(this).data = data;\n  };\n  SeriesModel.prototype.getEncode = function () {\n    var encode = this.get('encode', true);\n    if (encode) {\n      return zrUtil.createHashMap(encode);\n    }\n  };\n  SeriesModel.prototype.getSourceManager = function () {\n    return inner(this).sourceManager;\n  };\n  SeriesModel.prototype.getSource = function () {\n    return this.getSourceManager().getSource();\n  };\n  /**\n   * Get data before processed\n   */\n  SeriesModel.prototype.getRawData = function () {\n    return inner(this).dataBeforeProcessed;\n  };\n  SeriesModel.prototype.getColorBy = function () {\n    var colorBy = this.get('colorBy');\n    return colorBy || 'series';\n  };\n  SeriesModel.prototype.isColorBySeries = function () {\n    return this.getColorBy() === 'series';\n  };\n  /**\n   * Get base axis if has coordinate system and has axis.\n   * By default use coordSys.getBaseAxis();\n   * Can be overridden for some chart.\n   * @return {type} description\n   */\n  SeriesModel.prototype.getBaseAxis = function () {\n    var coordSys = this.coordinateSystem;\n    // @ts-ignore\n    return coordSys && coordSys.getBaseAxis && coordSys.getBaseAxis();\n  };\n  /**\n   * Retrieve the index of nearest value in the view coordinate.\n   * Data position is compared with each axis's dataToCoord.\n   *\n   * @param axisDim axis dimension\n   * @param dim data dimension\n   * @param value\n   * @param [maxDistance=Infinity] The maximum distance in view coordinate space\n   * @return If and only if multiple indices has\n   *         the same value, they are put to the result.\n   */\n  SeriesModel.prototype.indicesOfNearest = function (axisDim, dim, value, maxDistance) {\n    var data = this.getData();\n    var coordSys = this.coordinateSystem;\n    var axis = coordSys && coordSys.getAxis(axisDim);\n    if (!coordSys || !axis) {\n      return [];\n    }\n    var targetCoord = axis.dataToCoord(value);\n    if (maxDistance == null) {\n      maxDistance = Infinity;\n    }\n    var nearestIndices = [];\n    var minDist = Infinity;\n    var minDiff = -1;\n    var nearestIndicesLen = 0;\n    data.each(dim, function (dimValue, idx) {\n      var dataCoord = axis.dataToCoord(dimValue);\n      var diff = targetCoord - dataCoord;\n      var dist = Math.abs(diff);\n      if (dist <= maxDistance) {\n        // When the `value` is at the middle of `this.get(dim, i)` and `this.get(dim, i+1)`,\n        // we'd better not push both of them to `nearestIndices`, otherwise it is easy to\n        // get more than one item in `nearestIndices` (more specifically, in `tooltip`).\n        // So we choose the one that `diff >= 0` in this case.\n        // But if `this.get(dim, i)` and `this.get(dim, j)` get the same value, both of them\n        // should be push to `nearestIndices`.\n        if (dist < minDist || dist === minDist && diff >= 0 && minDiff < 0) {\n          minDist = dist;\n          minDiff = diff;\n          nearestIndicesLen = 0;\n        }\n        if (diff === minDiff) {\n          nearestIndices[nearestIndicesLen++] = idx;\n        }\n      }\n    });\n    nearestIndices.length = nearestIndicesLen;\n    return nearestIndices;\n  };\n  /**\n   * Default tooltip formatter\n   *\n   * @param dataIndex\n   * @param multipleSeries\n   * @param dataType\n   * @param renderMode valid values: 'html'(by default) and 'richText'.\n   *        'html' is used for rendering tooltip in extra DOM form, and the result\n   *        string is used as DOM HTML content.\n   *        'richText' is used for rendering tooltip in rich text form, for those where\n   *        DOM operation is not supported.\n   * @return formatted tooltip with `html` and `markers`\n   *        Notice: The override method can also return string\n   */\n  SeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    return defaultSeriesFormatTooltip({\n      series: this,\n      dataIndex: dataIndex,\n      multipleSeries: multipleSeries\n    });\n  };\n  SeriesModel.prototype.isAnimationEnabled = function () {\n    var ecModel = this.ecModel;\n    // Disable animation if using echarts in node but not give ssr flag.\n    // In ssr mode, renderToString will generate svg with css animation.\n    if (env.node && !(ecModel && ecModel.ssr)) {\n      return false;\n    }\n    var animationEnabled = this.getShallow('animation');\n    if (animationEnabled) {\n      if (this.getData().count() > this.getShallow('animationThreshold')) {\n        animationEnabled = false;\n      }\n    }\n    return !!animationEnabled;\n  };\n  SeriesModel.prototype.restoreData = function () {\n    this.dataTask.dirty();\n  };\n  SeriesModel.prototype.getColorFromPalette = function (name, scope, requestColorNum) {\n    var ecModel = this.ecModel;\n    // PENDING\n    var color = PaletteMixin.prototype.getColorFromPalette.call(this, name, scope, requestColorNum);\n    if (!color) {\n      color = ecModel.getColorFromPalette(name, scope, requestColorNum);\n    }\n    return color;\n  };\n  /**\n   * Use `data.mapDimensionsAll(coordDim)` instead.\n   * @deprecated\n   */\n  SeriesModel.prototype.coordDimToDataDim = function (coordDim) {\n    return this.getRawData().mapDimensionsAll(coordDim);\n  };\n  /**\n   * Get progressive rendering count each step\n   */\n  SeriesModel.prototype.getProgressive = function () {\n    return this.get('progressive');\n  };\n  /**\n   * Get progressive rendering count each step\n   */\n  SeriesModel.prototype.getProgressiveThreshold = function () {\n    return this.get('progressiveThreshold');\n  };\n  // PENGING If selectedMode is null ?\n  SeriesModel.prototype.select = function (innerDataIndices, dataType) {\n    this._innerSelect(this.getData(dataType), innerDataIndices);\n  };\n  SeriesModel.prototype.unselect = function (innerDataIndices, dataType) {\n    var selectedMap = this.option.selectedMap;\n    if (!selectedMap) {\n      return;\n    }\n    var selectedMode = this.option.selectedMode;\n    var data = this.getData(dataType);\n    if (selectedMode === 'series' || selectedMap === 'all') {\n      this.option.selectedMap = {};\n      this._selectedDataIndicesMap = {};\n      return;\n    }\n    for (var i = 0; i < innerDataIndices.length; i++) {\n      var dataIndex = innerDataIndices[i];\n      var nameOrId = getSelectionKey(data, dataIndex);\n      selectedMap[nameOrId] = false;\n      this._selectedDataIndicesMap[nameOrId] = -1;\n    }\n  };\n  SeriesModel.prototype.toggleSelect = function (innerDataIndices, dataType) {\n    var tmpArr = [];\n    for (var i = 0; i < innerDataIndices.length; i++) {\n      tmpArr[0] = innerDataIndices[i];\n      this.isSelected(innerDataIndices[i], dataType) ? this.unselect(tmpArr, dataType) : this.select(tmpArr, dataType);\n    }\n  };\n  SeriesModel.prototype.getSelectedDataIndices = function () {\n    if (this.option.selectedMap === 'all') {\n      return [].slice.call(this.getData().getIndices());\n    }\n    var selectedDataIndicesMap = this._selectedDataIndicesMap;\n    var nameOrIds = zrUtil.keys(selectedDataIndicesMap);\n    var dataIndices = [];\n    for (var i = 0; i < nameOrIds.length; i++) {\n      var dataIndex = selectedDataIndicesMap[nameOrIds[i]];\n      if (dataIndex >= 0) {\n        dataIndices.push(dataIndex);\n      }\n    }\n    return dataIndices;\n  };\n  SeriesModel.prototype.isSelected = function (dataIndex, dataType) {\n    var selectedMap = this.option.selectedMap;\n    if (!selectedMap) {\n      return false;\n    }\n    var data = this.getData(dataType);\n    return (selectedMap === 'all' || selectedMap[getSelectionKey(data, dataIndex)]) && !data.getItemModel(dataIndex).get(['select', 'disabled']);\n  };\n  SeriesModel.prototype.isUniversalTransitionEnabled = function () {\n    if (this[SERIES_UNIVERSAL_TRANSITION_PROP]) {\n      return true;\n    }\n    var universalTransitionOpt = this.option.universalTransition;\n    // Quick reject\n    if (!universalTransitionOpt) {\n      return false;\n    }\n    if (universalTransitionOpt === true) {\n      return true;\n    }\n    // Can be simply 'universalTransition: true'\n    return universalTransitionOpt && universalTransitionOpt.enabled;\n  };\n  SeriesModel.prototype._innerSelect = function (data, innerDataIndices) {\n    var _a, _b;\n    var option = this.option;\n    var selectedMode = option.selectedMode;\n    var len = innerDataIndices.length;\n    if (!selectedMode || !len) {\n      return;\n    }\n    if (selectedMode === 'series') {\n      option.selectedMap = 'all';\n    } else if (selectedMode === 'multiple') {\n      if (!zrUtil.isObject(option.selectedMap)) {\n        option.selectedMap = {};\n      }\n      var selectedMap = option.selectedMap;\n      for (var i = 0; i < len; i++) {\n        var dataIndex = innerDataIndices[i];\n        // TODO different types of data share same object.\n        var nameOrId = getSelectionKey(data, dataIndex);\n        selectedMap[nameOrId] = true;\n        this._selectedDataIndicesMap[nameOrId] = data.getRawIndex(dataIndex);\n      }\n    } else if (selectedMode === 'single' || selectedMode === true) {\n      var lastDataIndex = innerDataIndices[len - 1];\n      var nameOrId = getSelectionKey(data, lastDataIndex);\n      option.selectedMap = (_a = {}, _a[nameOrId] = true, _a);\n      this._selectedDataIndicesMap = (_b = {}, _b[nameOrId] = data.getRawIndex(lastDataIndex), _b);\n    }\n  };\n  SeriesModel.prototype._initSelectedMapFromData = function (data) {\n    // Ignore select info in data if selectedMap exists.\n    // NOTE It's only for legacy usage. edge data is not supported.\n    if (this.option.selectedMap) {\n      return;\n    }\n    var dataIndices = [];\n    if (data.hasItemOption) {\n      data.each(function (idx) {\n        var rawItem = data.getRawDataItem(idx);\n        if (rawItem && rawItem.selected) {\n          dataIndices.push(idx);\n        }\n      });\n    }\n    if (dataIndices.length > 0) {\n      this._innerSelect(data, dataIndices);\n    }\n  };\n  // /**\n  //  * @see {module:echarts/stream/Scheduler}\n  //  */\n  // abstract pipeTask: null\n  SeriesModel.registerClass = function (clz) {\n    return ComponentModel.registerClass(clz);\n  };\n  SeriesModel.protoInitialize = function () {\n    var proto = SeriesModel.prototype;\n    proto.type = 'series.__base__';\n    proto.seriesIndex = 0;\n    proto.ignoreStyleOnData = false;\n    proto.hasSymbolVisual = false;\n    proto.defaultSymbol = 'circle';\n    // Make sure the values can be accessed!\n    proto.visualStyleAccessPath = 'itemStyle';\n    proto.visualDrawType = 'fill';\n  }();\n  return SeriesModel;\n}(ComponentModel);\nzrUtil.mixin(SeriesModel, DataFormatMixin);\nzrUtil.mixin(SeriesModel, PaletteMixin);\nmountExtend(SeriesModel, ComponentModel);\n/**\n * MUST be called after `prepareSource` called\n * Here we need to make auto series, especially for auto legend. But we\n * do not modify series.name in option to avoid side effects.\n */\nfunction autoSeriesName(seriesModel) {\n  // User specified name has higher priority, otherwise it may cause\n  // series can not be queried unexpectedly.\n  var name = seriesModel.name;\n  if (!modelUtil.isNameSpecified(seriesModel)) {\n    seriesModel.name = getSeriesAutoName(seriesModel) || name;\n  }\n}\nfunction getSeriesAutoName(seriesModel) {\n  var data = seriesModel.getRawData();\n  var dataDims = data.mapDimensionsAll('seriesName');\n  var nameArr = [];\n  zrUtil.each(dataDims, function (dataDim) {\n    var dimInfo = data.getDimensionInfo(dataDim);\n    dimInfo.displayName && nameArr.push(dimInfo.displayName);\n  });\n  return nameArr.join(' ');\n}\nfunction dataTaskCount(context) {\n  return context.model.getRawData().count();\n}\nfunction dataTaskReset(context) {\n  var seriesModel = context.model;\n  seriesModel.setData(seriesModel.getRawData().cloneShallow());\n  return dataTaskProgress;\n}\nfunction dataTaskProgress(param, context) {\n  // Avoid repeat cloneShallow when data just created in reset.\n  if (context.outputData && param.end > context.outputData.count()) {\n    context.model.getRawData().cloneShallow(context.outputData);\n  }\n}\n// TODO refactor\nfunction wrapData(data, seriesModel) {\n  zrUtil.each(zrUtil.concatArray(data.CHANGABLE_METHODS, data.DOWNSAMPLE_METHODS), function (methodName) {\n    data.wrapMethod(methodName, zrUtil.curry(onDataChange, seriesModel));\n  });\n}\nfunction onDataChange(seriesModel, newList) {\n  var task = getCurrentTask(seriesModel);\n  if (task) {\n    // Consider case: filter, selectRange\n    task.setOutputEnd((newList || this).count());\n  }\n  return newList;\n}\nfunction getCurrentTask(seriesModel) {\n  var scheduler = (seriesModel.ecModel || {}).scheduler;\n  var pipeline = scheduler && scheduler.getPipeline(seriesModel.uid);\n  if (pipeline) {\n    // When pipline finished, the currrentTask keep the last\n    // task (renderTask).\n    var task = pipeline.currentTask;\n    if (task) {\n      var agentStubMap = task.agentStubMap;\n      if (agentStubMap) {\n        task = agentStubMap.get(seriesModel.uid);\n      }\n    }\n    return task;\n  }\n}\nexport default SeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Symbol factory\nimport { each, isArray, retrieve2 } from 'zrender/lib/core/util.js';\nimport * as graphic from './graphic.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { calculateTextPosition } from 'zrender/lib/contain/text.js';\nimport { parsePercent } from './number.js';\nimport tokens from '../visual/tokens.js';\n/**\n * Triangle shape\n * @inner\n */\nvar Triangle = graphic.Path.extend({\n  type: 'triangle',\n  shape: {\n    cx: 0,\n    cy: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (path, shape) {\n    var cx = shape.cx;\n    var cy = shape.cy;\n    var width = shape.width / 2;\n    var height = shape.height / 2;\n    path.moveTo(cx, cy - height);\n    path.lineTo(cx + width, cy + height);\n    path.lineTo(cx - width, cy + height);\n    path.closePath();\n  }\n});\n/**\n * Diamond shape\n * @inner\n */\nvar Diamond = graphic.Path.extend({\n  type: 'diamond',\n  shape: {\n    cx: 0,\n    cy: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (path, shape) {\n    var cx = shape.cx;\n    var cy = shape.cy;\n    var width = shape.width / 2;\n    var height = shape.height / 2;\n    path.moveTo(cx, cy - height);\n    path.lineTo(cx + width, cy);\n    path.lineTo(cx, cy + height);\n    path.lineTo(cx - width, cy);\n    path.closePath();\n  }\n});\n/**\n * Pin shape\n * @inner\n */\nvar Pin = graphic.Path.extend({\n  type: 'pin',\n  shape: {\n    // x, y on the cusp\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (path, shape) {\n    var x = shape.x;\n    var y = shape.y;\n    var w = shape.width / 5 * 3;\n    // Height must be larger than width\n    var h = Math.max(w, shape.height);\n    var r = w / 2;\n    // Dist on y with tangent point and circle center\n    var dy = r * r / (h - r);\n    var cy = y - h + r + dy;\n    var angle = Math.asin(dy / r);\n    // Dist on x with tangent point and circle center\n    var dx = Math.cos(angle) * r;\n    var tanX = Math.sin(angle);\n    var tanY = Math.cos(angle);\n    var cpLen = r * 0.6;\n    var cpLen2 = r * 0.7;\n    path.moveTo(x - dx, cy + dy);\n    path.arc(x, cy, r, Math.PI - angle, Math.PI * 2 + angle);\n    path.bezierCurveTo(x + dx - tanX * cpLen, cy + dy + tanY * cpLen, x, y - cpLen2, x, y);\n    path.bezierCurveTo(x, y - cpLen2, x - dx + tanX * cpLen, cy + dy + tanY * cpLen, x - dx, cy + dy);\n    path.closePath();\n  }\n});\n/**\n * Arrow shape\n * @inner\n */\nvar Arrow = graphic.Path.extend({\n  type: 'arrow',\n  shape: {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (ctx, shape) {\n    var height = shape.height;\n    var width = shape.width;\n    var x = shape.x;\n    var y = shape.y;\n    var dx = width / 3 * 2;\n    ctx.moveTo(x, y);\n    ctx.lineTo(x + dx, y + height);\n    ctx.lineTo(x, y + height / 4 * 3);\n    ctx.lineTo(x - dx, y + height);\n    ctx.lineTo(x, y);\n    ctx.closePath();\n  }\n});\n/**\n * Map of path constructors\n */\n// TODO Use function to build symbol path.\nvar symbolCtors = {\n  line: graphic.Line,\n  rect: graphic.Rect,\n  roundRect: graphic.Rect,\n  square: graphic.Rect,\n  circle: graphic.Circle,\n  diamond: Diamond,\n  pin: Pin,\n  arrow: Arrow,\n  triangle: Triangle\n};\nvar symbolShapeMakers = {\n  line: function (x, y, w, h, shape) {\n    shape.x1 = x;\n    shape.y1 = y + h / 2;\n    shape.x2 = x + w;\n    shape.y2 = y + h / 2;\n  },\n  rect: function (x, y, w, h, shape) {\n    shape.x = x;\n    shape.y = y;\n    shape.width = w;\n    shape.height = h;\n  },\n  roundRect: function (x, y, w, h, shape) {\n    shape.x = x;\n    shape.y = y;\n    shape.width = w;\n    shape.height = h;\n    shape.r = Math.min(w, h) / 4;\n  },\n  square: function (x, y, w, h, shape) {\n    var size = Math.min(w, h);\n    shape.x = x;\n    shape.y = y;\n    shape.width = size;\n    shape.height = size;\n  },\n  circle: function (x, y, w, h, shape) {\n    // Put circle in the center of square\n    shape.cx = x + w / 2;\n    shape.cy = y + h / 2;\n    shape.r = Math.min(w, h) / 2;\n  },\n  diamond: function (x, y, w, h, shape) {\n    shape.cx = x + w / 2;\n    shape.cy = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  },\n  pin: function (x, y, w, h, shape) {\n    shape.x = x + w / 2;\n    shape.y = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  },\n  arrow: function (x, y, w, h, shape) {\n    shape.x = x + w / 2;\n    shape.y = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  },\n  triangle: function (x, y, w, h, shape) {\n    shape.cx = x + w / 2;\n    shape.cy = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  }\n};\nexport var symbolBuildProxies = {};\neach(symbolCtors, function (Ctor, name) {\n  symbolBuildProxies[name] = new Ctor();\n});\nvar SymbolClz = graphic.Path.extend({\n  type: 'symbol',\n  shape: {\n    symbolType: '',\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  calculateTextPosition: function (out, config, rect) {\n    var res = calculateTextPosition(out, config, rect);\n    var shape = this.shape;\n    if (shape && shape.symbolType === 'pin' && config.position === 'inside') {\n      res.y = rect.y + rect.height * 0.4;\n    }\n    return res;\n  },\n  buildPath: function (ctx, shape, inBundle) {\n    var symbolType = shape.symbolType;\n    if (symbolType !== 'none') {\n      var proxySymbol = symbolBuildProxies[symbolType];\n      if (!proxySymbol) {\n        // Default rect\n        symbolType = 'rect';\n        proxySymbol = symbolBuildProxies[symbolType];\n      }\n      symbolShapeMakers[symbolType](shape.x, shape.y, shape.width, shape.height, proxySymbol.shape);\n      proxySymbol.buildPath(ctx, proxySymbol.shape, inBundle);\n    }\n  }\n});\n// Provide setColor helper method to avoid determine if set the fill or stroke outside\nfunction symbolPathSetColor(color, innerColor) {\n  if (this.type !== 'image') {\n    var symbolStyle = this.style;\n    if (this.__isEmptyBrush) {\n      symbolStyle.stroke = color;\n      symbolStyle.fill = innerColor || tokens.color.neutral00;\n      // TODO Same width with lineStyle in LineView\n      symbolStyle.lineWidth = 2;\n    } else if (this.shape.symbolType === 'line') {\n      symbolStyle.stroke = color;\n    } else {\n      symbolStyle.fill = color;\n    }\n    this.markRedraw();\n  }\n}\n/**\n * Create a symbol element with given symbol configuration: shape, x, y, width, height, color\n */\nexport function createSymbol(symbolType, x, y, w, h, color,\n// whether to keep the ratio of w/h,\nkeepAspect) {\n  // TODO Support image object, DynamicImage.\n  var isEmpty = symbolType.indexOf('empty') === 0;\n  if (isEmpty) {\n    symbolType = symbolType.substr(5, 1).toLowerCase() + symbolType.substr(6);\n  }\n  var symbolPath;\n  if (symbolType.indexOf('image://') === 0) {\n    symbolPath = graphic.makeImage(symbolType.slice(8), new BoundingRect(x, y, w, h), keepAspect ? 'center' : 'cover');\n  } else if (symbolType.indexOf('path://') === 0) {\n    symbolPath = graphic.makePath(symbolType.slice(7), {}, new BoundingRect(x, y, w, h), keepAspect ? 'center' : 'cover');\n  } else {\n    symbolPath = new SymbolClz({\n      shape: {\n        symbolType: symbolType,\n        x: x,\n        y: y,\n        width: w,\n        height: h\n      }\n    });\n  }\n  symbolPath.__isEmptyBrush = isEmpty;\n  // TODO Should deprecate setColor\n  symbolPath.setColor = symbolPathSetColor;\n  if (color) {\n    symbolPath.setColor(color);\n  }\n  return symbolPath;\n}\nexport function normalizeSymbolSize(symbolSize) {\n  if (!isArray(symbolSize)) {\n    symbolSize = [+symbolSize, +symbolSize];\n  }\n  return [symbolSize[0] || 0, symbolSize[1] || 0];\n}\nexport function normalizeSymbolOffset(symbolOffset, symbolSize) {\n  if (symbolOffset == null) {\n    return;\n  }\n  if (!isArray(symbolOffset)) {\n    symbolOffset = [symbolOffset, symbolOffset];\n  }\n  return [parsePercent(symbolOffset[0], symbolSize[0]) || 0, parsePercent(retrieve2(symbolOffset[1], symbolOffset[0]), symbolSize[1]) || 0];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { retrieveRawValue } from '../../data/helper/dataProvider.js';\nimport { isArray } from 'zrender/lib/core/util.js';\n/**\n * @return label string. Not null/undefined\n */\nexport function getDefaultLabel(data, dataIndex) {\n  var labelDims = data.mapDimensionsAll('defaultedLabel');\n  var len = labelDims.length;\n  // Simple optimization (in lots of cases, label dims length is 1)\n  if (len === 1) {\n    var rawVal = retrieveRawValue(data, dataIndex, labelDims[0]);\n    return rawVal != null ? rawVal + '' : null;\n  } else if (len) {\n    var vals = [];\n    for (var i = 0; i < labelDims.length; i++) {\n      vals.push(retrieveRawValue(data, dataIndex, labelDims[i]));\n    }\n    return vals.join(' ');\n  }\n}\nexport function getDefaultInterpolatedLabel(data, interpolatedValue) {\n  var labelDims = data.mapDimensionsAll('defaultedLabel');\n  if (!isArray(interpolatedValue)) {\n    return interpolatedValue + '';\n  }\n  var vals = [];\n  for (var i = 0; i < labelDims.length; i++) {\n    var dimIndex = data.getDimensionIndex(labelDims[i]);\n    if (dimIndex >= 0) {\n      vals.push(interpolatedValue[dimIndex]);\n    }\n  }\n  return vals.join(' ');\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { createSymbol, normalizeSymbolOffset, normalizeSymbolSize } from '../../util/symbol.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { enterEmphasis, leaveEmphasis, toggleHoverEmphasis } from '../../util/states.js';\nimport { getDefaultLabel } from './labelHelper.js';\nimport { extend, retrieve2 } from 'zrender/lib/core/util.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar Symbol = /** @class */function (_super) {\n  __extends(Symbol, _super);\n  function Symbol(data, idx, seriesScope, opts) {\n    var _this = _super.call(this) || this;\n    _this.updateData(data, idx, seriesScope, opts);\n    return _this;\n  }\n  Symbol.prototype._createSymbol = function (symbolType, data, idx, symbolSize, z2, keepAspect) {\n    // Remove paths created before\n    this.removeAll();\n    // let symbolPath = createSymbol(\n    //     symbolType, -0.5, -0.5, 1, 1, color\n    // );\n    // If width/height are set too small (e.g., set to 1) on ios10\n    // and macOS Sierra, a circle stroke become a rect, no matter what\n    // the scale is set. So we set width/height as 2. See #4150.\n    var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, null, keepAspect);\n    symbolPath.attr({\n      z2: retrieve2(z2, 100),\n      culling: true,\n      scaleX: symbolSize[0] / 2,\n      scaleY: symbolSize[1] / 2\n    });\n    // Rewrite drift method\n    symbolPath.drift = driftSymbol;\n    this._symbolType = symbolType;\n    this.add(symbolPath);\n  };\n  /**\n   * Stop animation\n   * @param {boolean} toLastFrame\n   */\n  Symbol.prototype.stopSymbolAnimation = function (toLastFrame) {\n    this.childAt(0).stopAnimation(null, toLastFrame);\n  };\n  Symbol.prototype.getSymbolType = function () {\n    return this._symbolType;\n  };\n  /**\n   * FIXME:\n   * Caution: This method breaks the encapsulation of this module,\n   * but it indeed brings convenience. So do not use the method\n   * unless you detailedly know all the implements of `Symbol`,\n   * especially animation.\n   *\n   * Get symbol path element.\n   */\n  Symbol.prototype.getSymbolPath = function () {\n    return this.childAt(0);\n  };\n  /**\n   * Highlight symbol\n   */\n  Symbol.prototype.highlight = function () {\n    enterEmphasis(this.childAt(0));\n  };\n  /**\n   * Downplay symbol\n   */\n  Symbol.prototype.downplay = function () {\n    leaveEmphasis(this.childAt(0));\n  };\n  /**\n   * @param {number} zlevel\n   * @param {number} z\n   */\n  Symbol.prototype.setZ = function (zlevel, z) {\n    var symbolPath = this.childAt(0);\n    symbolPath.zlevel = zlevel;\n    symbolPath.z = z;\n  };\n  Symbol.prototype.setDraggable = function (draggable, hasCursorOption) {\n    var symbolPath = this.childAt(0);\n    symbolPath.draggable = draggable;\n    symbolPath.cursor = !hasCursorOption && draggable ? 'move' : symbolPath.cursor;\n  };\n  /**\n   * Update symbol properties\n   */\n  Symbol.prototype.updateData = function (data, idx, seriesScope, opts) {\n    this.silent = false;\n    var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n    var seriesModel = data.hostModel;\n    var symbolSize = Symbol.getSymbolSize(data, idx);\n    var z2 = Symbol.getSymbolZ2(data, idx);\n    var isInit = symbolType !== this._symbolType;\n    var disableAnimation = opts && opts.disableAnimation;\n    if (isInit) {\n      var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\n      this._createSymbol(symbolType, data, idx, symbolSize, z2, keepAspect);\n    } else {\n      var symbolPath = this.childAt(0);\n      symbolPath.silent = false;\n      var target = {\n        scaleX: symbolSize[0] / 2,\n        scaleY: symbolSize[1] / 2\n      };\n      disableAnimation ? symbolPath.attr(target) : graphic.updateProps(symbolPath, target, seriesModel, idx);\n      saveOldStyle(symbolPath);\n    }\n    this._updateCommon(data, idx, symbolSize, seriesScope, opts);\n    if (isInit) {\n      var symbolPath = this.childAt(0);\n      if (!disableAnimation) {\n        var target = {\n          scaleX: this._sizeX,\n          scaleY: this._sizeY,\n          style: {\n            // Always fadeIn. Because it has fadeOut animation when symbol is removed..\n            opacity: symbolPath.style.opacity\n          }\n        };\n        symbolPath.scaleX = symbolPath.scaleY = 0;\n        symbolPath.style.opacity = 0;\n        graphic.initProps(symbolPath, target, seriesModel, idx);\n      }\n    }\n    if (disableAnimation) {\n      // Must stop leave transition manually if don't call initProps or updateProps.\n      this.childAt(0).stopAnimation('leave');\n    }\n  };\n  Symbol.prototype._updateCommon = function (data, idx, symbolSize, seriesScope, opts) {\n    var symbolPath = this.childAt(0);\n    var seriesModel = data.hostModel;\n    var emphasisItemStyle;\n    var blurItemStyle;\n    var selectItemStyle;\n    var focus;\n    var blurScope;\n    var emphasisDisabled;\n    var labelStatesModels;\n    var hoverScale;\n    var cursorStyle;\n    if (seriesScope) {\n      emphasisItemStyle = seriesScope.emphasisItemStyle;\n      blurItemStyle = seriesScope.blurItemStyle;\n      selectItemStyle = seriesScope.selectItemStyle;\n      focus = seriesScope.focus;\n      blurScope = seriesScope.blurScope;\n      labelStatesModels = seriesScope.labelStatesModels;\n      hoverScale = seriesScope.hoverScale;\n      cursorStyle = seriesScope.cursorStyle;\n      emphasisDisabled = seriesScope.emphasisDisabled;\n    }\n    if (!seriesScope || data.hasItemOption) {\n      var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx);\n      var emphasisModel = itemModel.getModel('emphasis');\n      emphasisItemStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n      selectItemStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\n      blurItemStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n      focus = emphasisModel.get('focus');\n      blurScope = emphasisModel.get('blurScope');\n      emphasisDisabled = emphasisModel.get('disabled');\n      labelStatesModels = getLabelStatesModels(itemModel);\n      hoverScale = emphasisModel.getShallow('scale');\n      cursorStyle = itemModel.getShallow('cursor');\n    }\n    var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\n    symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\n    var symbolOffset = normalizeSymbolOffset(data.getItemVisual(idx, 'symbolOffset'), symbolSize);\n    if (symbolOffset) {\n      symbolPath.x = symbolOffset[0];\n      symbolPath.y = symbolOffset[1];\n    }\n    cursorStyle && symbolPath.attr('cursor', cursorStyle);\n    var symbolStyle = data.getItemVisual(idx, 'style');\n    var visualColor = symbolStyle.fill;\n    if (symbolPath instanceof ZRImage) {\n      var pathStyle = symbolPath.style;\n      symbolPath.useStyle(extend({\n        // TODO other properties like x, y ?\n        image: pathStyle.image,\n        x: pathStyle.x,\n        y: pathStyle.y,\n        width: pathStyle.width,\n        height: pathStyle.height\n      }, symbolStyle));\n    } else {\n      if (symbolPath.__isEmptyBrush) {\n        // fill and stroke will be swapped if it's empty.\n        // So we cloned a new style to avoid it affecting the original style in visual storage.\n        // TODO Better implementation. No empty logic!\n        symbolPath.useStyle(extend({}, symbolStyle));\n      } else {\n        symbolPath.useStyle(symbolStyle);\n      }\n      // Disable decal because symbol scale will been applied on the decal.\n      symbolPath.style.decal = null;\n      symbolPath.setColor(visualColor, opts && opts.symbolInnerColor);\n      symbolPath.style.strokeNoScale = true;\n    }\n    var liftZ = data.getItemVisual(idx, 'liftZ');\n    var z2Origin = this._z2;\n    if (liftZ != null) {\n      if (z2Origin == null) {\n        this._z2 = symbolPath.z2;\n        symbolPath.z2 += liftZ;\n      }\n    } else if (z2Origin != null) {\n      symbolPath.z2 = z2Origin;\n      this._z2 = null;\n    }\n    var useNameLabel = opts && opts.useNameLabel;\n    setLabelStyle(symbolPath, labelStatesModels, {\n      labelFetcher: seriesModel,\n      labelDataIndex: idx,\n      defaultText: getLabelDefaultText,\n      inheritColor: visualColor,\n      defaultOpacity: symbolStyle.opacity\n    });\n    // Do not execute util needed.\n    function getLabelDefaultText(idx) {\n      return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\n    }\n    this._sizeX = symbolSize[0] / 2;\n    this._sizeY = symbolSize[1] / 2;\n    var emphasisState = symbolPath.ensureState('emphasis');\n    emphasisState.style = emphasisItemStyle;\n    symbolPath.ensureState('select').style = selectItemStyle;\n    symbolPath.ensureState('blur').style = blurItemStyle;\n    // null / undefined / true means to use default strategy.\n    // 0 / false / negative number / NaN / Infinity means no scale.\n    var scaleRatio = hoverScale == null || hoverScale === true ? Math.max(1.1, 3 / this._sizeY)\n    // PENDING: restrict hoverScale > 1? It seems unreasonable to scale down\n    : isFinite(hoverScale) && hoverScale > 0 ? +hoverScale : 1;\n    // always set scale to allow resetting\n    emphasisState.scaleX = this._sizeX * scaleRatio;\n    emphasisState.scaleY = this._sizeY * scaleRatio;\n    this.setSymbolScale(1);\n    toggleHoverEmphasis(this, focus, blurScope, emphasisDisabled);\n  };\n  Symbol.prototype.setSymbolScale = function (scale) {\n    this.scaleX = this.scaleY = scale;\n  };\n  Symbol.prototype.fadeOut = function (cb, seriesModel, opt) {\n    var symbolPath = this.childAt(0);\n    var dataIndex = getECData(this).dataIndex;\n    var animationOpt = opt && opt.animation;\n    // Avoid mistaken hover when fading out\n    this.silent = symbolPath.silent = true;\n    // Not show text when animating\n    if (opt && opt.fadeLabel) {\n      var textContent = symbolPath.getTextContent();\n      if (textContent) {\n        graphic.removeElement(textContent, {\n          style: {\n            opacity: 0\n          }\n        }, seriesModel, {\n          dataIndex: dataIndex,\n          removeOpt: animationOpt,\n          cb: function () {\n            symbolPath.removeTextContent();\n          }\n        });\n      }\n    } else {\n      symbolPath.removeTextContent();\n    }\n    graphic.removeElement(symbolPath, {\n      style: {\n        opacity: 0\n      },\n      scaleX: 0,\n      scaleY: 0\n    }, seriesModel, {\n      dataIndex: dataIndex,\n      cb: cb,\n      removeOpt: animationOpt\n    });\n  };\n  Symbol.getSymbolSize = function (data, idx) {\n    return normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n  };\n  Symbol.getSymbolZ2 = function (data, idx) {\n    return data.getItemVisual(idx, 'z2');\n  };\n  return Symbol;\n}(graphic.Group);\nfunction driftSymbol(dx, dy) {\n  this.parent.drift(dx, dy);\n}\nexport default Symbol;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic.js';\nimport SymbolClz from './Symbol.js';\nimport { isObject } from 'zrender/lib/core/util.js';\nimport { getLabelStatesModels } from '../../label/labelStyle.js';\nfunction symbolNeedsDraw(data, point, idx, opt) {\n  return point && !isNaN(point[0]) && !isNaN(point[1]) && !(opt.isIgnore && opt.isIgnore(idx))\n  // We do not set clipShape on group, because it will cut part of\n  // the symbol element shape. We use the same clip shape here as\n  // the line clip.\n  && !(opt.clipShape && !opt.clipShape.contain(point[0], point[1])) && data.getItemVisual(idx, 'symbol') !== 'none';\n}\nfunction normalizeUpdateOpt(opt) {\n  if (opt != null && !isObject(opt)) {\n    opt = {\n      isIgnore: opt\n    };\n  }\n  return opt || {};\n}\nfunction makeSeriesScope(data) {\n  var seriesModel = data.hostModel;\n  var emphasisModel = seriesModel.getModel('emphasis');\n  return {\n    emphasisItemStyle: emphasisModel.getModel('itemStyle').getItemStyle(),\n    blurItemStyle: seriesModel.getModel(['blur', 'itemStyle']).getItemStyle(),\n    selectItemStyle: seriesModel.getModel(['select', 'itemStyle']).getItemStyle(),\n    focus: emphasisModel.get('focus'),\n    blurScope: emphasisModel.get('blurScope'),\n    emphasisDisabled: emphasisModel.get('disabled'),\n    hoverScale: emphasisModel.get('scale'),\n    labelStatesModels: getLabelStatesModels(seriesModel),\n    cursorStyle: seriesModel.get('cursor')\n  };\n}\nvar SymbolDraw = /** @class */function () {\n  function SymbolDraw(SymbolCtor) {\n    this.group = new graphic.Group();\n    this._SymbolCtor = SymbolCtor || SymbolClz;\n  }\n  /**\n   * Update symbols draw by new data\n   */\n  SymbolDraw.prototype.updateData = function (data, opt) {\n    // Remove progressive els.\n    this._progressiveEls = null;\n    opt = normalizeUpdateOpt(opt);\n    var group = this.group;\n    var seriesModel = data.hostModel;\n    var oldData = this._data;\n    var SymbolCtor = this._SymbolCtor;\n    var disableAnimation = opt.disableAnimation;\n    var seriesScope = makeSeriesScope(data);\n    var symbolUpdateOpt = {\n      disableAnimation: disableAnimation\n    };\n    var getSymbolPoint = opt.getSymbolPoint || function (idx) {\n      return data.getItemLayout(idx);\n    };\n    // There is no oldLineData only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n    if (!oldData) {\n      group.removeAll();\n    }\n    data.diff(oldData).add(function (newIdx) {\n      var point = getSymbolPoint(newIdx);\n      if (symbolNeedsDraw(data, point, newIdx, opt)) {\n        var symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n        symbolEl.setPosition(point);\n        data.setItemGraphicEl(newIdx, symbolEl);\n        group.add(symbolEl);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n      var point = getSymbolPoint(newIdx);\n      if (!symbolNeedsDraw(data, point, newIdx, opt)) {\n        group.remove(symbolEl);\n        return;\n      }\n      var newSymbolType = data.getItemVisual(newIdx, 'symbol') || 'circle';\n      var oldSymbolType = symbolEl && symbolEl.getSymbolType && symbolEl.getSymbolType();\n      if (!symbolEl\n      // Create a new if symbol type changed.\n      || oldSymbolType && oldSymbolType !== newSymbolType) {\n        group.remove(symbolEl);\n        symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n        symbolEl.setPosition(point);\n      } else {\n        symbolEl.updateData(data, newIdx, seriesScope, symbolUpdateOpt);\n        var target = {\n          x: point[0],\n          y: point[1]\n        };\n        disableAnimation ? symbolEl.attr(target) : graphic.updateProps(symbolEl, target, seriesModel);\n      }\n      // Add back\n      group.add(symbolEl);\n      data.setItemGraphicEl(newIdx, symbolEl);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && el.fadeOut(function () {\n        group.remove(el);\n      }, seriesModel);\n    }).execute();\n    this._getSymbolPoint = getSymbolPoint;\n    this._data = data;\n  };\n  ;\n  SymbolDraw.prototype.updateLayout = function () {\n    var _this = this;\n    var data = this._data;\n    if (data) {\n      // Not use animation\n      data.eachItemGraphicEl(function (el, idx) {\n        var point = _this._getSymbolPoint(idx);\n        el.setPosition(point);\n        el.markRedraw();\n      });\n    }\n  };\n  ;\n  SymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this._seriesScope = makeSeriesScope(data);\n    this._data = null;\n    this.group.removeAll();\n  };\n  ;\n  /**\n   * Update symbols draw by new data\n   */\n  SymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n    // Clear\n    this._progressiveEls = [];\n    opt = normalizeUpdateOpt(opt);\n    function updateIncrementalAndHover(el) {\n      if (!el.isGroup) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n    for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n      var point = data.getItemLayout(idx);\n      if (symbolNeedsDraw(data, point, idx, opt)) {\n        var el = new this._SymbolCtor(data, idx, this._seriesScope);\n        el.traverse(updateIncrementalAndHover);\n        el.setPosition(point);\n        this.group.add(el);\n        data.setItemGraphicEl(idx, el);\n        this._progressiveEls.push(el);\n      }\n    }\n  };\n  ;\n  SymbolDraw.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n  SymbolDraw.prototype.remove = function (enableAnimation) {\n    var group = this.group;\n    var data = this._data;\n    // Incremental model do not have this._data.\n    if (data && enableAnimation) {\n      data.eachItemGraphicEl(function (el) {\n        el.fadeOut(function () {\n          group.remove(el);\n        }, data.hostModel);\n      });\n    } else {\n      group.removeAll();\n    }\n  };\n  ;\n  return SymbolDraw;\n}();\nexport default SymbolDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner } from '../../util/model.js';\n/**\n * @return {string} If large mode changed, return string 'reset';\n */\nexport default function createRenderPlanner() {\n  var inner = makeInner();\n  return function (seriesModel) {\n    var fields = inner(seriesModel);\n    var pipelineContext = seriesModel.pipelineContext;\n    var originalLarge = !!fields.large;\n    var originalProgressive = !!fields.progressiveRender;\n    // FIXME: if the planner works on a filtered series, `pipelineContext` does not\n    // exists. See #11611 . Probably we need to modify this structure, see the comment\n    // on `performRawSeries` in `Schedular.js`.\n    var large = fields.large = !!(pipelineContext && pipelineContext.large);\n    var progressive = fields.progressiveRender = !!(pipelineContext && pipelineContext.progressiveRender);\n    return !!(originalLarge !== large || originalProgressive !== progressive) && 'reset';\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each } from 'zrender/lib/core/util.js';\nimport Group from 'zrender/lib/graphic/Group.js';\nimport * as componentUtil from '../util/component.js';\nimport * as clazzUtil from '../util/clazz.js';\nimport * as modelUtil from '../util/model.js';\nimport { enterEmphasis, leaveEmphasis, getHighlightDigit, isHighDownDispatcher } from '../util/states.js';\nimport { createTask } from '../core/task.js';\nimport createRenderPlanner from '../chart/helper/createRenderPlanner.js';\nimport { traverseElements } from '../util/graphic.js';\nimport { error } from '../util/log.js';\nvar inner = modelUtil.makeInner();\nvar renderPlanner = createRenderPlanner();\nvar ChartView = /** @class */function () {\n  function ChartView() {\n    this.group = new Group();\n    this.uid = componentUtil.getUID('viewChart');\n    this.renderTask = createTask({\n      plan: renderTaskPlan,\n      reset: renderTaskReset\n    });\n    this.renderTask.context = {\n      view: this\n    };\n  }\n  ChartView.prototype.init = function (ecModel, api) {};\n  ChartView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    if (process.env.NODE_ENV !== 'production') {\n      throw new Error('render method must been implemented');\n    }\n  };\n  /**\n   * Highlight series or specified data item.\n   */\n  ChartView.prototype.highlight = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData(payload && payload.dataType);\n    if (!data) {\n      if (process.env.NODE_ENV !== 'production') {\n        error(\"Unknown dataType \" + payload.dataType);\n      }\n      return;\n    }\n    toggleHighlight(data, payload, 'emphasis');\n  };\n  /**\n   * Downplay series or specified data item.\n   */\n  ChartView.prototype.downplay = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData(payload && payload.dataType);\n    if (!data) {\n      if (process.env.NODE_ENV !== 'production') {\n        error(\"Unknown dataType \" + payload.dataType);\n      }\n      return;\n    }\n    toggleHighlight(data, payload, 'normal');\n  };\n  /**\n   * Remove self.\n   */\n  ChartView.prototype.remove = function (ecModel, api) {\n    this.group.removeAll();\n  };\n  /**\n   * Dispose self.\n   */\n  ChartView.prototype.dispose = function (ecModel, api) {};\n  ChartView.prototype.updateView = function (seriesModel, ecModel, api, payload) {\n    this.render(seriesModel, ecModel, api, payload);\n  };\n  // FIXME never used?\n  ChartView.prototype.updateLayout = function (seriesModel, ecModel, api, payload) {\n    this.render(seriesModel, ecModel, api, payload);\n  };\n  // FIXME never used?\n  ChartView.prototype.updateVisual = function (seriesModel, ecModel, api, payload) {\n    this.render(seriesModel, ecModel, api, payload);\n  };\n  /**\n   * Traverse the new rendered elements.\n   *\n   * It will traverse the new added element in progressive rendering.\n   * And traverse all in normal rendering.\n   */\n  ChartView.prototype.eachRendered = function (cb) {\n    traverseElements(this.group, cb);\n  };\n  ChartView.markUpdateMethod = function (payload, methodName) {\n    inner(payload).updateMethod = methodName;\n  };\n  ChartView.protoInitialize = function () {\n    var proto = ChartView.prototype;\n    proto.type = 'chart';\n  }();\n  return ChartView;\n}();\n;\n/**\n * Set state of single element\n */\nfunction elSetState(el, state, highlightDigit) {\n  if (el && isHighDownDispatcher(el)) {\n    (state === 'emphasis' ? enterEmphasis : leaveEmphasis)(el, highlightDigit);\n  }\n}\nfunction toggleHighlight(data, payload, state) {\n  var dataIndex = modelUtil.queryDataIndex(data, payload);\n  var highlightDigit = payload && payload.highlightKey != null ? getHighlightDigit(payload.highlightKey) : null;\n  if (dataIndex != null) {\n    each(modelUtil.normalizeToArray(dataIndex), function (dataIdx) {\n      elSetState(data.getItemGraphicEl(dataIdx), state, highlightDigit);\n    });\n  } else {\n    data.eachItemGraphicEl(function (el) {\n      elSetState(el, state, highlightDigit);\n    });\n  }\n}\nclazzUtil.enableClassExtend(ChartView, ['dispose']);\nclazzUtil.enableClassManagement(ChartView);\nfunction renderTaskPlan(context) {\n  return renderPlanner(context.model);\n}\nfunction renderTaskReset(context) {\n  var seriesModel = context.model;\n  var ecModel = context.ecModel;\n  var api = context.api;\n  var payload = context.payload;\n  // FIXME: remove updateView updateVisual\n  var progressiveRender = seriesModel.pipelineContext.progressiveRender;\n  var view = context.view;\n  var updateMethod = payload && inner(payload).updateMethod;\n  var methodName = progressiveRender ? 'incrementalPrepareRender' : updateMethod && view[updateMethod] ? updateMethod\n  // `appendData` is also supported when data amount\n  // is less than progressive threshold.\n  : 'render';\n  if (methodName !== 'render') {\n    view[methodName](seriesModel, ecModel, api, payload);\n  }\n  return progressMethodMap[methodName];\n}\nvar progressMethodMap = {\n  incrementalPrepareRender: {\n    progress: function (params, context) {\n      context.view.incrementalRender(params, context.model, context.ecModel, context.api, context.payload);\n    }\n  },\n  render: {\n    // Put view.render in `progress` to support appendData. But in this case\n    // view.render should not be called in reset, otherwise it will be called\n    // twise. Use `forceFirstProgress` to make sure that view.render is called\n    // in any cases.\n    forceFirstProgress: true,\n    progress: function (params, context) {\n      context.view.render(context.model, context.ecModel, context.api, context.payload);\n    }\n  }\n};\nexport default ChartView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, defaults, keys } from 'zrender/lib/core/util.js';\nimport { parsePercent } from '../util/number.js';\nimport { isDimensionStacked } from '../data/helper/dataStackHelper.js';\nimport createRenderPlanner from '../chart/helper/createRenderPlanner.js';\nimport { createFloat32Array } from '../util/vendor.js';\nvar STACK_PREFIX = '__ec_stack_';\nfunction getSeriesStackId(seriesModel) {\n  return seriesModel.get('stack') || STACK_PREFIX + seriesModel.seriesIndex;\n}\nfunction getAxisKey(axis) {\n  return axis.dim + axis.index;\n}\n/**\n * @return {Object} {width, offset, offsetCenter} If axis.type is not 'category', return undefined.\n */\nexport function getLayoutOnAxis(opt) {\n  var params = [];\n  var baseAxis = opt.axis;\n  var axisKey = 'axis0';\n  if (baseAxis.type !== 'category') {\n    return;\n  }\n  var bandWidth = baseAxis.getBandWidth();\n  for (var i = 0; i < opt.count || 0; i++) {\n    params.push(defaults({\n      bandWidth: bandWidth,\n      axisKey: axisKey,\n      stackId: STACK_PREFIX + i\n    }, opt));\n  }\n  var widthAndOffsets = doCalBarWidthAndOffset(params);\n  var result = [];\n  for (var i = 0; i < opt.count; i++) {\n    var item = widthAndOffsets[axisKey][STACK_PREFIX + i];\n    item.offsetCenter = item.offset + item.width / 2;\n    result.push(item);\n  }\n  return result;\n}\nexport function prepareLayoutBarSeries(seriesType, ecModel) {\n  var seriesModels = [];\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    // Check series coordinate, do layout for cartesian2d only\n    if (isOnCartesian(seriesModel)) {\n      seriesModels.push(seriesModel);\n    }\n  });\n  return seriesModels;\n}\n/**\n * Map from (baseAxis.dim + '_' + baseAxis.index) to min gap of two adjacent\n * values.\n * This works for time axes, value axes, and log axes.\n * For a single time axis, return value is in the form like\n * {'x_0': [1000000]}.\n * The value of 1000000 is in milliseconds.\n */\nfunction getValueAxesMinGaps(barSeries) {\n  /**\n   * Map from axis.index to values.\n   * For a single time axis, axisValues is in the form like\n   * {'x_0': [1495555200000, 1495641600000, 1495728000000]}.\n   * Items in axisValues[x], e.g. 1495555200000, are time values of all\n   * series.\n   */\n  var axisValues = {};\n  each(barSeries, function (seriesModel) {\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    if (baseAxis.type !== 'time' && baseAxis.type !== 'value') {\n      return;\n    }\n    var data = seriesModel.getData();\n    var key = baseAxis.dim + '_' + baseAxis.index;\n    var dimIdx = data.getDimensionIndex(data.mapDimension(baseAxis.dim));\n    var store = data.getStore();\n    for (var i = 0, cnt = store.count(); i < cnt; ++i) {\n      var value = store.get(dimIdx, i);\n      if (!axisValues[key]) {\n        // No previous data for the axis\n        axisValues[key] = [value];\n      } else {\n        // No value in previous series\n        axisValues[key].push(value);\n      }\n      // Ignore duplicated time values in the same axis\n    }\n  });\n  var axisMinGaps = {};\n  for (var key in axisValues) {\n    if (axisValues.hasOwnProperty(key)) {\n      var valuesInAxis = axisValues[key];\n      if (valuesInAxis) {\n        // Sort axis values into ascending order to calculate gaps\n        valuesInAxis.sort(function (a, b) {\n          return a - b;\n        });\n        var min = null;\n        for (var j = 1; j < valuesInAxis.length; ++j) {\n          var delta = valuesInAxis[j] - valuesInAxis[j - 1];\n          if (delta > 0) {\n            // Ignore 0 delta because they are of the same axis value\n            min = min === null ? delta : Math.min(min, delta);\n          }\n        }\n        // Set to null if only have one data\n        axisMinGaps[key] = min;\n      }\n    }\n  }\n  return axisMinGaps;\n}\nexport function makeColumnLayout(barSeries) {\n  var axisMinGaps = getValueAxesMinGaps(barSeries);\n  var seriesInfoList = [];\n  each(barSeries, function (seriesModel) {\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var axisExtent = baseAxis.getExtent();\n    var bandWidth;\n    if (baseAxis.type === 'category') {\n      bandWidth = baseAxis.getBandWidth();\n    } else if (baseAxis.type === 'value' || baseAxis.type === 'time') {\n      var key = baseAxis.dim + '_' + baseAxis.index;\n      var minGap = axisMinGaps[key];\n      var extentSpan = Math.abs(axisExtent[1] - axisExtent[0]);\n      var scale = baseAxis.scale.getExtent();\n      var scaleSpan = Math.abs(scale[1] - scale[0]);\n      bandWidth = minGap ? extentSpan / scaleSpan * minGap : extentSpan; // When there is only one data value\n    } else {\n      var data = seriesModel.getData();\n      bandWidth = Math.abs(axisExtent[1] - axisExtent[0]) / data.count();\n    }\n    var barWidth = parsePercent(seriesModel.get('barWidth'), bandWidth);\n    var barMaxWidth = parsePercent(seriesModel.get('barMaxWidth'), bandWidth);\n    var barMinWidth = parsePercent(\n    // barMinWidth by default is 0.5 / 1 in cartesian. Because in value axis,\n    // the auto-calculated bar width might be less than 0.5 / 1.\n    seriesModel.get('barMinWidth') || (isInLargeMode(seriesModel) ? 0.5 : 1), bandWidth);\n    var barGap = seriesModel.get('barGap');\n    var barCategoryGap = seriesModel.get('barCategoryGap');\n    var defaultBarGap = seriesModel.get('defaultBarGap');\n    seriesInfoList.push({\n      bandWidth: bandWidth,\n      barWidth: barWidth,\n      barMaxWidth: barMaxWidth,\n      barMinWidth: barMinWidth,\n      barGap: barGap,\n      barCategoryGap: barCategoryGap,\n      defaultBarGap: defaultBarGap,\n      axisKey: getAxisKey(baseAxis),\n      stackId: getSeriesStackId(seriesModel)\n    });\n  });\n  return doCalBarWidthAndOffset(seriesInfoList);\n}\nfunction doCalBarWidthAndOffset(seriesInfoList) {\n  // Columns info on each category axis. Key is cartesian name\n  var columnsMap = {};\n  each(seriesInfoList, function (seriesInfo, idx) {\n    var axisKey = seriesInfo.axisKey;\n    var bandWidth = seriesInfo.bandWidth;\n    var columnsOnAxis = columnsMap[axisKey] || {\n      bandWidth: bandWidth,\n      remainedWidth: bandWidth,\n      autoWidthCount: 0,\n      categoryGap: null,\n      gap: seriesInfo.defaultBarGap || 0,\n      stacks: {}\n    };\n    var stacks = columnsOnAxis.stacks;\n    columnsMap[axisKey] = columnsOnAxis;\n    var stackId = seriesInfo.stackId;\n    if (!stacks[stackId]) {\n      columnsOnAxis.autoWidthCount++;\n    }\n    stacks[stackId] = stacks[stackId] || {\n      width: 0,\n      maxWidth: 0\n    };\n    // Caution: In a single coordinate system, these barGrid attributes\n    // will be shared by series. Consider that they have default values,\n    // only the attributes set on the last series will work.\n    // Do not change this fact unless there will be a break change.\n    var barWidth = seriesInfo.barWidth;\n    if (barWidth && !stacks[stackId].width) {\n      // See #6312, do not restrict width.\n      stacks[stackId].width = barWidth;\n      barWidth = Math.min(columnsOnAxis.remainedWidth, barWidth);\n      columnsOnAxis.remainedWidth -= barWidth;\n    }\n    var barMaxWidth = seriesInfo.barMaxWidth;\n    barMaxWidth && (stacks[stackId].maxWidth = barMaxWidth);\n    var barMinWidth = seriesInfo.barMinWidth;\n    barMinWidth && (stacks[stackId].minWidth = barMinWidth);\n    var barGap = seriesInfo.barGap;\n    barGap != null && (columnsOnAxis.gap = barGap);\n    var barCategoryGap = seriesInfo.barCategoryGap;\n    barCategoryGap != null && (columnsOnAxis.categoryGap = barCategoryGap);\n  });\n  var result = {};\n  each(columnsMap, function (columnsOnAxis, coordSysName) {\n    result[coordSysName] = {};\n    var stacks = columnsOnAxis.stacks;\n    var bandWidth = columnsOnAxis.bandWidth;\n    var categoryGapPercent = columnsOnAxis.categoryGap;\n    if (categoryGapPercent == null) {\n      var columnCount = keys(stacks).length;\n      // More columns in one group\n      // the spaces between group is smaller. Or the column will be too thin.\n      categoryGapPercent = Math.max(35 - columnCount * 4, 15) + '%';\n    }\n    var categoryGap = parsePercent(categoryGapPercent, bandWidth);\n    var barGapPercent = parsePercent(columnsOnAxis.gap, 1);\n    var remainedWidth = columnsOnAxis.remainedWidth;\n    var autoWidthCount = columnsOnAxis.autoWidthCount;\n    var autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0);\n    // Find if any auto calculated bar exceeded maxBarWidth\n    each(stacks, function (column) {\n      var maxWidth = column.maxWidth;\n      var minWidth = column.minWidth;\n      if (!column.width) {\n        var finalWidth = autoWidth;\n        if (maxWidth && maxWidth < finalWidth) {\n          finalWidth = Math.min(maxWidth, remainedWidth);\n        }\n        // `minWidth` has higher priority. `minWidth` decide that whether the\n        // bar is able to be visible. So `minWidth` should not be restricted\n        // by `maxWidth` or `remainedWidth` (which is from `bandWidth`). In\n        // the extreme cases for `value` axis, bars are allowed to overlap\n        // with each other if `minWidth` specified.\n        if (minWidth && minWidth > finalWidth) {\n          finalWidth = minWidth;\n        }\n        if (finalWidth !== autoWidth) {\n          column.width = finalWidth;\n          remainedWidth -= finalWidth + barGapPercent * finalWidth;\n          autoWidthCount--;\n        }\n      } else {\n        // `barMinWidth/barMaxWidth` has higher priority than `barWidth`, as\n        // CSS does. Because barWidth can be a percent value, where\n        // `barMaxWidth` can be used to restrict the final width.\n        var finalWidth = column.width;\n        if (maxWidth) {\n          finalWidth = Math.min(finalWidth, maxWidth);\n        }\n        // `minWidth` has higher priority, as described above\n        if (minWidth) {\n          finalWidth = Math.max(finalWidth, minWidth);\n        }\n        column.width = finalWidth;\n        remainedWidth -= finalWidth + barGapPercent * finalWidth;\n        autoWidthCount--;\n      }\n    });\n    // Recalculate width again\n    autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0);\n    var widthSum = 0;\n    var lastColumn;\n    each(stacks, function (column, idx) {\n      if (!column.width) {\n        column.width = autoWidth;\n      }\n      lastColumn = column;\n      widthSum += column.width * (1 + barGapPercent);\n    });\n    if (lastColumn) {\n      widthSum -= lastColumn.width * barGapPercent;\n    }\n    var offset = -widthSum / 2;\n    each(stacks, function (column, stackId) {\n      result[coordSysName][stackId] = result[coordSysName][stackId] || {\n        bandWidth: bandWidth,\n        offset: offset,\n        width: column.width\n      };\n      offset += column.width * (1 + barGapPercent);\n    });\n  });\n  return result;\n}\nfunction retrieveColumnLayout(barWidthAndOffset, axis, seriesModel) {\n  if (barWidthAndOffset && axis) {\n    var result = barWidthAndOffset[getAxisKey(axis)];\n    if (result != null && seriesModel != null) {\n      return result[getSeriesStackId(seriesModel)];\n    }\n    return result;\n  }\n}\nexport { retrieveColumnLayout };\nexport function layout(seriesType, ecModel) {\n  var seriesModels = prepareLayoutBarSeries(seriesType, ecModel);\n  var barWidthAndOffset = makeColumnLayout(seriesModels);\n  each(seriesModels, function (seriesModel) {\n    var data = seriesModel.getData();\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var stackId = getSeriesStackId(seriesModel);\n    var columnLayoutInfo = barWidthAndOffset[getAxisKey(baseAxis)][stackId];\n    var columnOffset = columnLayoutInfo.offset;\n    var columnWidth = columnLayoutInfo.width;\n    data.setLayout({\n      bandWidth: columnLayoutInfo.bandWidth,\n      offset: columnOffset,\n      size: columnWidth\n    });\n  });\n}\n// TODO: Do not support stack in large mode yet.\nexport function createProgressiveLayout(seriesType) {\n  return {\n    seriesType: seriesType,\n    plan: createRenderPlanner(),\n    reset: function (seriesModel) {\n      if (!isOnCartesian(seriesModel)) {\n        return;\n      }\n      var data = seriesModel.getData();\n      var cartesian = seriesModel.coordinateSystem;\n      var baseAxis = cartesian.getBaseAxis();\n      var valueAxis = cartesian.getOtherAxis(baseAxis);\n      var valueDimIdx = data.getDimensionIndex(data.mapDimension(valueAxis.dim));\n      var baseDimIdx = data.getDimensionIndex(data.mapDimension(baseAxis.dim));\n      var drawBackground = seriesModel.get('showBackground', true);\n      var valueDim = data.mapDimension(valueAxis.dim);\n      var stackResultDim = data.getCalculationInfo('stackResultDimension');\n      var stacked = isDimensionStacked(data, valueDim) && !!data.getCalculationInfo('stackedOnSeries');\n      var isValueAxisH = valueAxis.isHorizontal();\n      var valueAxisStart = getValueAxisStart(baseAxis, valueAxis);\n      var isLarge = isInLargeMode(seriesModel);\n      var barMinHeight = seriesModel.get('barMinHeight') || 0;\n      var stackedDimIdx = stackResultDim && data.getDimensionIndex(stackResultDim);\n      // Layout info.\n      var columnWidth = data.getLayout('size');\n      var columnOffset = data.getLayout('offset');\n      return {\n        progress: function (params, data) {\n          var count = params.count;\n          var largePoints = isLarge && createFloat32Array(count * 3);\n          var largeBackgroundPoints = isLarge && drawBackground && createFloat32Array(count * 3);\n          var largeDataIndices = isLarge && createFloat32Array(count);\n          var coordLayout = cartesian.master.getRect();\n          var bgSize = isValueAxisH ? coordLayout.width : coordLayout.height;\n          var dataIndex;\n          var store = data.getStore();\n          var idxOffset = 0;\n          while ((dataIndex = params.next()) != null) {\n            var value = store.get(stacked ? stackedDimIdx : valueDimIdx, dataIndex);\n            var baseValue = store.get(baseDimIdx, dataIndex);\n            var baseCoord = valueAxisStart;\n            var stackStartValue = void 0;\n            // Because of the barMinHeight, we can not use the value in\n            // stackResultDimension directly.\n            if (stacked) {\n              stackStartValue = +value - store.get(valueDimIdx, dataIndex);\n            }\n            var x = void 0;\n            var y = void 0;\n            var width = void 0;\n            var height = void 0;\n            if (isValueAxisH) {\n              var coord = cartesian.dataToPoint([value, baseValue]);\n              if (stacked) {\n                var startCoord = cartesian.dataToPoint([stackStartValue, baseValue]);\n                baseCoord = startCoord[0];\n              }\n              x = baseCoord;\n              y = coord[1] + columnOffset;\n              width = coord[0] - baseCoord;\n              height = columnWidth;\n              if (Math.abs(width) < barMinHeight) {\n                width = (width < 0 ? -1 : 1) * barMinHeight;\n              }\n            } else {\n              var coord = cartesian.dataToPoint([baseValue, value]);\n              if (stacked) {\n                var startCoord = cartesian.dataToPoint([baseValue, stackStartValue]);\n                baseCoord = startCoord[1];\n              }\n              x = coord[0] + columnOffset;\n              y = baseCoord;\n              width = columnWidth;\n              height = coord[1] - baseCoord;\n              if (Math.abs(height) < barMinHeight) {\n                // Include zero to has a positive bar\n                height = (height <= 0 ? -1 : 1) * barMinHeight;\n              }\n            }\n            if (!isLarge) {\n              data.setItemLayout(dataIndex, {\n                x: x,\n                y: y,\n                width: width,\n                height: height\n              });\n            } else {\n              largePoints[idxOffset] = x;\n              largePoints[idxOffset + 1] = y;\n              largePoints[idxOffset + 2] = isValueAxisH ? width : height;\n              if (largeBackgroundPoints) {\n                largeBackgroundPoints[idxOffset] = isValueAxisH ? coordLayout.x : x;\n                largeBackgroundPoints[idxOffset + 1] = isValueAxisH ? y : coordLayout.y;\n                largeBackgroundPoints[idxOffset + 2] = bgSize;\n              }\n              largeDataIndices[dataIndex] = dataIndex;\n            }\n            idxOffset += 3;\n          }\n          if (isLarge) {\n            data.setLayout({\n              largePoints: largePoints,\n              largeDataIndices: largeDataIndices,\n              largeBackgroundPoints: largeBackgroundPoints,\n              valueAxisHorizontal: isValueAxisH\n            });\n          }\n        }\n      };\n    }\n  };\n}\nfunction isOnCartesian(seriesModel) {\n  return seriesModel.coordinateSystem && seriesModel.coordinateSystem.type === 'cartesian2d';\n}\nfunction isInLargeMode(seriesModel) {\n  return seriesModel.pipelineContext && seriesModel.pipelineContext.large;\n}\n// See cases in `test/bar-start.html` and `#7412`, `#8747`.\nfunction getValueAxisStart(baseAxis, valueAxis) {\n  var startValue = valueAxis.model.get('startValue');\n  if (!startValue) {\n    startValue = 0;\n  }\n  return valueAxis.toGlobalCoord(valueAxis.dataToCoord(valueAxis.type === 'log' ? startValue > 0 ? startValue : 1 : startValue));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar ORIGIN_METHOD = '\\0__throttleOriginMethod';\nvar RATE = '\\0__throttleRate';\nvar THROTTLE_TYPE = '\\0__throttleType';\n;\n/**\n * @public\n * @param {(Function)} fn\n * @param {number} [delay=0] Unit: ms.\n * @param {boolean} [debounce=false]\n *        true: If call interval less than `delay`, only the last call works.\n *        false: If call interval less than `delay, call works on fixed rate.\n * @return {(Function)} throttled fn.\n */\nexport function throttle(fn, delay, debounce) {\n  var currCall;\n  var lastCall = 0;\n  var lastExec = 0;\n  var timer = null;\n  var diff;\n  var scope;\n  var args;\n  var debounceNextCall;\n  delay = delay || 0;\n  function exec() {\n    lastExec = new Date().getTime();\n    timer = null;\n    fn.apply(scope, args || []);\n  }\n  var cb = function () {\n    var cbArgs = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      cbArgs[_i] = arguments[_i];\n    }\n    currCall = new Date().getTime();\n    scope = this;\n    args = cbArgs;\n    var thisDelay = debounceNextCall || delay;\n    var thisDebounce = debounceNextCall || debounce;\n    debounceNextCall = null;\n    diff = currCall - (thisDebounce ? lastCall : lastExec) - thisDelay;\n    clearTimeout(timer);\n    // Here we should make sure that: the `exec` SHOULD NOT be called later\n    // than a new call of `cb`, that is, preserving the command order. Consider\n    // calculating \"scale rate\" when roaming as an example. When a call of `cb`\n    // happens, either the `exec` is called dierectly, or the call is delayed.\n    // But the delayed call should never be later than next call of `cb`. Under\n    // this assurance, we can simply update view state each time `dispatchAction`\n    // triggered by user roaming, but not need to add extra code to avoid the\n    // state being \"rolled-back\".\n    if (thisDebounce) {\n      timer = setTimeout(exec, thisDelay);\n    } else {\n      if (diff >= 0) {\n        exec();\n      } else {\n        timer = setTimeout(exec, -diff);\n      }\n    }\n    lastCall = currCall;\n  };\n  /**\n   * Clear throttle.\n   * @public\n   */\n  cb.clear = function () {\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n  };\n  /**\n   * Enable debounce once.\n   */\n  cb.debounceNextCall = function (debounceDelay) {\n    debounceNextCall = debounceDelay;\n  };\n  return cb;\n}\n/**\n * Create throttle method or update throttle rate.\n *\n * @example\n * ComponentView.prototype.render = function () {\n *     ...\n *     throttle.createOrUpdate(\n *         this,\n *         '_dispatchAction',\n *         this.model.get('throttle'),\n *         'fixRate'\n *     );\n * };\n * ComponentView.prototype.remove = function () {\n *     throttle.clear(this, '_dispatchAction');\n * };\n * ComponentView.prototype.dispose = function () {\n *     throttle.clear(this, '_dispatchAction');\n * };\n *\n */\nexport function createOrUpdate(obj, fnAttr, rate, throttleType) {\n  var fn = obj[fnAttr];\n  if (!fn) {\n    return;\n  }\n  var originFn = fn[ORIGIN_METHOD] || fn;\n  var lastThrottleType = fn[THROTTLE_TYPE];\n  var lastRate = fn[RATE];\n  if (lastRate !== rate || lastThrottleType !== throttleType) {\n    if (rate == null || !throttleType) {\n      return obj[fnAttr] = originFn;\n    }\n    fn = obj[fnAttr] = throttle(originFn, rate, throttleType === 'debounce');\n    fn[ORIGIN_METHOD] = originFn;\n    fn[THROTTLE_TYPE] = throttleType;\n    fn[RATE] = rate;\n  }\n  return fn;\n}\n/**\n * Clear throttle. Example see throttle.createOrUpdate.\n */\nexport function clear(obj, fnAttr) {\n  var fn = obj[fnAttr];\n  if (fn && fn[ORIGIN_METHOD]) {\n    // Clear throttle\n    fn.clear && fn.clear();\n    obj[fnAttr] = fn[ORIGIN_METHOD];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend, each, isArray, isString } from 'zrender/lib/core/util.js';\nimport { deprecateReplaceLog, deprecateLog } from '../util/log.js';\nimport { queryDataIndex } from '../util/model.js';\n// Legacy data selection action.\n// Includes: pieSelect, pieUnSelect, pieToggleSelect, mapSelect, mapUnSelect, mapToggleSelect\nexport function createLegacyDataSelectAction(seriesType, ecRegisterAction) {\n  function getSeriesIndices(ecModel, payload) {\n    var seriesIndices = [];\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: seriesType,\n      query: payload\n    }, function (seriesModel) {\n      seriesIndices.push(seriesModel.seriesIndex);\n    });\n    return seriesIndices;\n  }\n  each([[seriesType + 'ToggleSelect', 'toggleSelect'], [seriesType + 'Select', 'select'], [seriesType + 'UnSelect', 'unselect']], function (eventsMap) {\n    ecRegisterAction(eventsMap[0], function (payload, ecModel, api) {\n      payload = extend({}, payload);\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateReplaceLog(payload.type, eventsMap[1]);\n      }\n      api.dispatchAction(extend(payload, {\n        type: eventsMap[1],\n        seriesIndex: getSeriesIndices(ecModel, payload)\n      }));\n    });\n  });\n}\nfunction handleSeriesLegacySelectEvents(type, eventPostfix, ecIns, ecModel, payload) {\n  var legacyEventName = type + eventPostfix;\n  if (!ecIns.isSilent(legacyEventName)) {\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateLog(\"event \" + legacyEventName + \" is deprecated.\");\n    }\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'pie'\n    }, function (seriesModel) {\n      var seriesIndex = seriesModel.seriesIndex;\n      var selectedMap = seriesModel.option.selectedMap;\n      var selected = payload.selected;\n      for (var i = 0; i < selected.length; i++) {\n        if (selected[i].seriesIndex === seriesIndex) {\n          var data = seriesModel.getData();\n          var dataIndex = queryDataIndex(data, payload.fromActionPayload);\n          ecIns.trigger(legacyEventName, {\n            type: legacyEventName,\n            seriesId: seriesModel.id,\n            name: isArray(dataIndex) ? data.getName(dataIndex[0]) : data.getName(dataIndex),\n            selected: isString(selectedMap) ? selectedMap : extend({}, selectedMap)\n          });\n        }\n      }\n    });\n  }\n}\nexport function handleLegacySelectEvents(messageCenter, ecIns, api) {\n  messageCenter.on('selectchanged', function (params) {\n    var ecModel = api.getModel();\n    if (params.isFromClick) {\n      handleSeriesLegacySelectEvents('map', 'selectchanged', ecIns, ecModel, params);\n      handleSeriesLegacySelectEvents('pie', 'selectchanged', ecIns, ecModel, params);\n    } else if (params.fromAction === 'select') {\n      handleSeriesLegacySelectEvents('map', 'selected', ecIns, ecModel, params);\n      handleSeriesLegacySelectEvents('pie', 'selected', ecIns, ecModel, params);\n    } else if (params.fromAction === 'unselect') {\n      handleSeriesLegacySelectEvents('map', 'unselected', ecIns, ecModel, params);\n      handleSeriesLegacySelectEvents('pie', 'unselected', ecIns, ecModel, params);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { OrientedBoundingRect, WH, XY, ensureCopyRect, ensureCopyTransform, expandOrShrinkRect, isBoundingRectAxisAligned } from '../util/graphic.js';\nimport { LabelMarginType } from './labelStyle.js';\nvar LABEL_LAYOUT_BASE_PROPS = ['label', 'labelLine', 'layoutOption', 'priority', 'defaultAttr', 'marginForce', 'minMarginForce', 'marginDefault', 'suggestIgnore'];\nvar LABEL_LAYOUT_DIRTY_BIT_OTHERS = 1;\nvar LABEL_LAYOUT_DIRTY_BIT_OBB = 2;\nvar LABEL_LAYOUT_DIRTY_ALL = LABEL_LAYOUT_DIRTY_BIT_OTHERS | LABEL_LAYOUT_DIRTY_BIT_OBB;\nexport function setLabelLayoutDirty(labelGeometry, dirtyOrClear, dirtyBits) {\n  dirtyBits = dirtyBits || LABEL_LAYOUT_DIRTY_ALL;\n  dirtyOrClear ? labelGeometry.dirty |= dirtyBits : labelGeometry.dirty &= ~dirtyBits;\n}\nfunction isLabelLayoutDirty(labelGeometry, dirtyBits) {\n  dirtyBits = dirtyBits || LABEL_LAYOUT_DIRTY_ALL;\n  return labelGeometry.dirty == null || !!(labelGeometry.dirty & dirtyBits);\n}\n/**\n * [CAUTION]\n *  - No auto dirty propagation mechanism yet. If the transform of the raw label or any of its ancestors is\n *    changed, must sync the changes to the props of `LabelGeometry` by:\n *    either explicitly call:\n *      `setLabelLayoutDirty(labelLayout, true); ensureLabelLayoutWithGeometry(labelLayout);`\n *    or call (if only translation is performed):\n *      `labelLayoutApplyTranslation(labelLayout);`\n *  - `label.ignore` is not necessarily falsy, and not considered in computing `LabelGeometry`,\n *    since it might be modified by some overlap resolving handling.\n *  - To duplicate or make a variation:\n *    use `newLabelLayoutWithGeometry`.\n *\n * The result can also be the input of this method.\n * @return `NullUndefined` if and only if `labelLayout` is `NullUndefined`.\n */\nexport function ensureLabelLayoutWithGeometry(labelLayout) {\n  if (!labelLayout) {\n    return;\n  }\n  if (isLabelLayoutDirty(labelLayout)) {\n    computeLabelGeometry(labelLayout, labelLayout.label, labelLayout);\n  }\n  return labelLayout;\n}\n/**\n * The props in `out` will be filled if existing, or created.\n */\nexport function computeLabelGeometry(out, label, opt) {\n  // [CAUTION] These props may be modified directly for performance consideration,\n  //  therefore, do not output the internal data structure of zrender Element.\n  var rawTransform = label.getComputedTransform();\n  out.transform = ensureCopyTransform(out.transform, rawTransform);\n  // NOTE: should call `getBoundingRect` after `getComputedTransform`, or may get an inaccurate bounding rect.\n  //  The reason is that `getComputedTransform` calls `__host.updateInnerText()` internally, which updates the label\n  //  by `textConfig` mounted on the host.\n  // PENDING: add a dirty bit for that in zrender?\n  var outLocalRect = out.localRect = ensureCopyRect(out.localRect, label.getBoundingRect());\n  var labelStyleExt = label.style;\n  var margin = labelStyleExt.margin;\n  var marginForce = opt && opt.marginForce;\n  var minMarginForce = opt && opt.minMarginForce;\n  var marginDefault = opt && opt.marginDefault;\n  var marginType = labelStyleExt.__marginType;\n  if (marginType == null && marginDefault) {\n    margin = marginDefault;\n    marginType = LabelMarginType.textMargin;\n  }\n  // `textMargin` and `minMargin` can not exist both.\n  for (var i = 0; i < 4; i++) {\n    _tmpLabelMargin[i] = marginType === LabelMarginType.minMargin && minMarginForce && minMarginForce[i] != null ? minMarginForce[i] : marginForce && marginForce[i] != null ? marginForce[i] : margin ? margin[i] : 0;\n  }\n  if (marginType === LabelMarginType.textMargin) {\n    expandOrShrinkRect(outLocalRect, _tmpLabelMargin, false, false);\n  }\n  var outGlobalRect = out.rect = ensureCopyRect(out.rect, outLocalRect);\n  if (rawTransform) {\n    outGlobalRect.applyTransform(rawTransform);\n  }\n  // Notice: label.style.margin is actually `minMargin / 2`, handled by `setTextStyleCommon`.\n  if (marginType === LabelMarginType.minMargin) {\n    expandOrShrinkRect(outGlobalRect, _tmpLabelMargin, false, false);\n  }\n  out.axisAligned = isBoundingRectAxisAligned(rawTransform);\n  (out.label = out.label || {}).ignore = label.ignore;\n  setLabelLayoutDirty(out, false);\n  setLabelLayoutDirty(out, true, LABEL_LAYOUT_DIRTY_BIT_OBB);\n  // Do not remove `obb` (if existing) for reuse, just reset the dirty bit.\n  return out;\n}\nvar _tmpLabelMargin = [0, 0, 0, 0];\n/**\n * The props in `out` will be filled if existing, or created.\n */\nexport function computeLabelGeometry2(out, rawLocalRect, rawTransform) {\n  out.transform = ensureCopyTransform(out.transform, rawTransform);\n  out.localRect = ensureCopyRect(out.localRect, rawLocalRect);\n  out.rect = ensureCopyRect(out.rect, rawLocalRect);\n  if (rawTransform) {\n    out.rect.applyTransform(rawTransform);\n  }\n  out.axisAligned = isBoundingRectAxisAligned(rawTransform);\n  out.obb = undefined; // Reset to undefined, will be created by `ensureOBB` when using.\n  (out.label = out.label || {}).ignore = false;\n  return out;\n}\n/**\n * This is a shortcut of\n *   ```js\n *   labelLayout.label.x = newX;\n *   labelLayout.label.y = newY;\n *   setLabelLayoutDirty(labelLayout, true);\n *   ensureLabelLayoutWithGeometry(labelLayout);\n *   ```\n * and provide better performance in this common case.\n */\nexport function labelLayoutApplyTranslation(labelLayout, offset) {\n  if (!labelLayout) {\n    return;\n  }\n  labelLayout.label.x += offset.x;\n  labelLayout.label.y += offset.y;\n  labelLayout.label.markRedraw();\n  var transform = labelLayout.transform;\n  if (transform) {\n    transform[4] += offset.x;\n    transform[5] += offset.y;\n  }\n  var globalRect = labelLayout.rect;\n  if (globalRect) {\n    globalRect.x += offset.x;\n    globalRect.y += offset.y;\n  }\n  var obb = labelLayout.obb;\n  if (obb) {\n    obb.fromBoundingRect(labelLayout.localRect, transform);\n  }\n}\n/**\n * To duplicate or make a variation of a label layout.\n * Copy the only relevant properties to avoid the conflict or wrongly reuse of the props of `LabelLayoutWithGeometry`.\n */\nexport function newLabelLayoutWithGeometry(newBaseWithDefaults, source) {\n  for (var i = 0; i < LABEL_LAYOUT_BASE_PROPS.length; i++) {\n    var prop = LABEL_LAYOUT_BASE_PROPS[i];\n    if (newBaseWithDefaults[prop] == null) {\n      newBaseWithDefaults[prop] = source[prop];\n    }\n  }\n  return ensureLabelLayoutWithGeometry(newBaseWithDefaults);\n}\n/**\n * Create obb if no one, can cache it.\n */\nfunction ensureOBB(labelGeometry) {\n  var obb = labelGeometry.obb;\n  if (!obb || isLabelLayoutDirty(labelGeometry, LABEL_LAYOUT_DIRTY_BIT_OBB)) {\n    labelGeometry.obb = obb = obb || new OrientedBoundingRect();\n    obb.fromBoundingRect(labelGeometry.localRect, labelGeometry.transform);\n    setLabelLayoutDirty(labelGeometry, false, LABEL_LAYOUT_DIRTY_BIT_OBB);\n  }\n  return obb;\n}\n/**\n * Adjust labels on x/y direction to avoid overlap.\n *\n * PENDING: the current implementation is based on the global bounding rect rather than the local rect,\n *  which may be not preferable in some edge cases when the label has rotation, but works for most cases,\n *  since rotation is unnecessary when there is sufficient space, while squeezing is applied regardless\n *  of overlapping when there is no enough space.\n *\n * NOTICE:\n *  - The input `list` and its content will be modified (sort, label.x/y, rect).\n *  - The caller should sync the modifications to the other parts by\n *    `setLabelLayoutDirty` and `ensureLabelLayoutWithGeometry` if needed.\n *\n * @return adjusted\n */\nexport function shiftLayoutOnXY(list, xyDimIdx,\n// 0 for x, 1 for y\nminBound,\n// for x, leftBound; for y, topBound\nmaxBound,\n// for x, rightBound; for y, bottomBound\n// If average the shifts on all labels and add them to 0\n// TODO: Not sure if should enable it.\n// Pros: The angle of lines will distribute more equally\n// Cons: In some layout. It may not what user wanted. like in pie. the label of last sector is usually changed unexpectedly.\nbalanceShift) {\n  var len = list.length;\n  var xyDim = XY[xyDimIdx];\n  var sizeDim = WH[xyDimIdx];\n  if (len < 2) {\n    return false;\n  }\n  list.sort(function (a, b) {\n    return a.rect[xyDim] - b.rect[xyDim];\n  });\n  var lastPos = 0;\n  var delta;\n  var adjusted = false;\n  // const shifts = [];\n  var totalShifts = 0;\n  for (var i = 0; i < len; i++) {\n    var item = list[i];\n    var rect = item.rect;\n    delta = rect[xyDim] - lastPos;\n    if (delta < 0) {\n      // shiftForward(i, len, -delta);\n      rect[xyDim] -= delta;\n      item.label[xyDim] -= delta;\n      adjusted = true;\n    }\n    var shift = Math.max(-delta, 0);\n    // shifts.push(shift);\n    totalShifts += shift;\n    lastPos = rect[xyDim] + rect[sizeDim];\n  }\n  if (totalShifts > 0 && balanceShift) {\n    // Shift back to make the distribution more equally.\n    shiftList(-totalShifts / len, 0, len);\n  }\n  // TODO bleedMargin?\n  var first = list[0];\n  var last = list[len - 1];\n  var minGap;\n  var maxGap;\n  updateMinMaxGap();\n  // If ends exceed two bounds, squeeze at most 80%, then take the gap of two bounds.\n  minGap < 0 && squeezeGaps(-minGap, 0.8);\n  maxGap < 0 && squeezeGaps(maxGap, 0.8);\n  updateMinMaxGap();\n  takeBoundsGap(minGap, maxGap, 1);\n  takeBoundsGap(maxGap, minGap, -1);\n  // Handle bailout when there is not enough space.\n  updateMinMaxGap();\n  if (minGap < 0) {\n    squeezeWhenBailout(-minGap);\n  }\n  if (maxGap < 0) {\n    squeezeWhenBailout(maxGap);\n  }\n  function updateMinMaxGap() {\n    minGap = first.rect[xyDim] - minBound;\n    maxGap = maxBound - last.rect[xyDim] - last.rect[sizeDim];\n  }\n  function takeBoundsGap(gapThisBound, gapOtherBound, moveDir) {\n    if (gapThisBound < 0) {\n      // Move from other gap if can.\n      var moveFromMaxGap = Math.min(gapOtherBound, -gapThisBound);\n      if (moveFromMaxGap > 0) {\n        shiftList(moveFromMaxGap * moveDir, 0, len);\n        var remained = moveFromMaxGap + gapThisBound;\n        if (remained < 0) {\n          squeezeGaps(-remained * moveDir, 1);\n        }\n      } else {\n        squeezeGaps(-gapThisBound * moveDir, 1);\n      }\n    }\n  }\n  function shiftList(delta, start, end) {\n    if (delta !== 0) {\n      adjusted = true;\n    }\n    for (var i = start; i < end; i++) {\n      var item = list[i];\n      var rect = item.rect;\n      rect[xyDim] += delta;\n      item.label[xyDim] += delta;\n    }\n  }\n  // Squeeze gaps if the labels exceed margin.\n  function squeezeGaps(delta, maxSqeezePercent) {\n    var gaps = [];\n    var totalGaps = 0;\n    for (var i = 1; i < len; i++) {\n      var prevItemRect = list[i - 1].rect;\n      var gap = Math.max(list[i].rect[xyDim] - prevItemRect[xyDim] - prevItemRect[sizeDim], 0);\n      gaps.push(gap);\n      totalGaps += gap;\n    }\n    if (!totalGaps) {\n      return;\n    }\n    var squeezePercent = Math.min(Math.abs(delta) / totalGaps, maxSqeezePercent);\n    if (delta > 0) {\n      for (var i = 0; i < len - 1; i++) {\n        // Distribute the shift delta to all gaps.\n        var movement = gaps[i] * squeezePercent;\n        // Forward\n        shiftList(movement, 0, i + 1);\n      }\n    } else {\n      // Backward\n      for (var i = len - 1; i > 0; i--) {\n        // Distribute the shift delta to all gaps.\n        var movement = gaps[i - 1] * squeezePercent;\n        shiftList(-movement, i, len);\n      }\n    }\n  }\n  /**\n   * Squeeze to allow overlap if there is no more space available.\n   * Let other overlapping strategy like hideOverlap do the job instead of keep exceeding the bounds.\n   */\n  function squeezeWhenBailout(delta) {\n    var dir = delta < 0 ? -1 : 1;\n    delta = Math.abs(delta);\n    var moveForEachLabel = Math.ceil(delta / (len - 1));\n    for (var i = 0; i < len - 1; i++) {\n      if (dir > 0) {\n        // Forward\n        shiftList(moveForEachLabel, 0, i + 1);\n      } else {\n        // Backward\n        shiftList(-moveForEachLabel, len - i - 1, len);\n      }\n      delta -= moveForEachLabel;\n      if (delta <= 0) {\n        return;\n      }\n    }\n  }\n  return adjusted;\n}\n/**\n * @see `SavedLabelAttr` in `LabelManager.ts`\n * @see `hideOverlap`\n */\nexport function restoreIgnore(labelList) {\n  for (var i = 0; i < labelList.length; i++) {\n    var labelItem = labelList[i];\n    var defaultAttr = labelItem.defaultAttr;\n    var labelLine = labelItem.labelLine;\n    labelItem.label.attr('ignore', defaultAttr.ignore);\n    labelLine && labelLine.attr('ignore', defaultAttr.labelGuideIgnore);\n  }\n}\n/**\n * [NOTICE - restore]:\n *  'series:layoutlabels' may be triggered during some shortcut passes, such as zooming in series.graph/geo\n *  (`updateLabelLayout`), where the modified `Element` props should be restorable from `defaultAttr`.\n *  @see `SavedLabelAttr` in `LabelManager.ts`\n *  `restoreIgnore` can be called to perform the restore, if needed.\n *\n * [NOTICE - state]:\n *  Regarding Element's states, this method is only designed for the normal state.\n *  PENDING: although currently this method is effectively called in other states in `updateLabelLayout` case,\n *      the bad case is not noticeable in the zooming scenario.\n */\nexport function hideOverlap(labelList) {\n  var displayedLabels = [];\n  // TODO, render overflow visible first, put in the displayedLabels.\n  labelList.sort(function (a, b) {\n    return (b.suggestIgnore ? 1 : 0) - (a.suggestIgnore ? 1 : 0) || b.priority - a.priority;\n  });\n  function hideEl(el) {\n    if (!el.ignore) {\n      // Show on emphasis.\n      var emphasisState = el.ensureState('emphasis');\n      if (emphasisState.ignore == null) {\n        emphasisState.ignore = false;\n      }\n    }\n    el.ignore = true;\n  }\n  for (var i = 0; i < labelList.length; i++) {\n    var labelItem = ensureLabelLayoutWithGeometry(labelList[i]);\n    // The current `el.ignore` is involved, since some previous overlap\n    // resolving strategies may have set `el.ignore` to true.\n    if (labelItem.label.ignore) {\n      continue;\n    }\n    var label = labelItem.label;\n    var labelLine = labelItem.labelLine;\n    // NOTICE: even when the with/height of globalRect of a label is 0, the label line should\n    // still be displayed, since we should follow the concept of \"truncation\", meaning that\n    // something exists even if it cannot be fully displayed. A visible label line is necessary\n    // to allow users to get a tooltip with label info on hover.\n    var overlapped = false;\n    for (var j = 0; j < displayedLabels.length; j++) {\n      if (labelIntersect(labelItem, displayedLabels[j], null, {\n        touchThreshold: 0.05\n      })) {\n        overlapped = true;\n        break;\n      }\n    }\n    // TODO Callback to determine if this overlap should be handled?\n    if (overlapped) {\n      hideEl(label);\n      labelLine && hideEl(labelLine);\n    } else {\n      displayedLabels.push(labelItem);\n    }\n  }\n}\n/**\n * Enable fast check for performance; use obb if inevitable.\n * If `mtv` is used, `targetLayoutInfo` can be moved based on the values filled into `mtv`.\n *\n * This method is based only on the current `Element` states (regardless of other states).\n * Typically this method (and the entire layout process) is performed in normal state.\n */\nexport function labelIntersect(baseLayoutInfo, targetLayoutInfo, mtv, intersectOpt) {\n  if (!baseLayoutInfo || !targetLayoutInfo) {\n    return false;\n  }\n  if (baseLayoutInfo.label && baseLayoutInfo.label.ignore || targetLayoutInfo.label && targetLayoutInfo.label.ignore) {\n    return false;\n  }\n  // Fast rejection.\n  if (!baseLayoutInfo.rect.intersect(targetLayoutInfo.rect, mtv, intersectOpt)) {\n    return false;\n  }\n  if (baseLayoutInfo.axisAligned && targetLayoutInfo.axisAligned) {\n    return true; // obb is the same as the normal bounding rect.\n  }\n  return ensureOBB(baseLayoutInfo).intersect(ensureOBB(targetLayoutInfo), mtv, intersectOpt);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/**\n * LegendVisualProvider is an bridge that pick encoded color from data and\n * provide to the legend component.\n */\nvar LegendVisualProvider = /** @class */function () {\n  function LegendVisualProvider(\n  // Function to get data after filtered. It stores all the encoding info\n  getDataWithEncodedVisual,\n  // Function to get raw data before filtered.\n  getRawData) {\n    this._getDataWithEncodedVisual = getDataWithEncodedVisual;\n    this._getRawData = getRawData;\n  }\n  LegendVisualProvider.prototype.getAllNames = function () {\n    var rawData = this._getRawData();\n    // We find the name from the raw data. In case it's filtered by the legend component.\n    // Normally, the name can be found in rawData, but can't be found in filtered data will display as gray.\n    return rawData.mapArray(rawData.getName);\n  };\n  LegendVisualProvider.prototype.containName = function (name) {\n    var rawData = this._getRawData();\n    return rawData.indexOfName(name) >= 0;\n  };\n  LegendVisualProvider.prototype.indexOfName = function (name) {\n    // Only get data when necessary.\n    // Because LegendVisualProvider constructor may be new in the stage that data is not prepared yet.\n    // Invoking Series#getData immediately will throw an error.\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n    return dataWithEncodedVisual.indexOfName(name);\n  };\n  LegendVisualProvider.prototype.getItemVisual = function (dataIndex, key) {\n    // Get encoded visual properties from final filtered data.\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n    return dataWithEncodedVisual.getItemVisual(dataIndex, key);\n  };\n  return LegendVisualProvider;\n}();\nexport default LegendVisualProvider;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { modifyHSL } from 'zrender/lib/tool/color.js';\nimport tokens from '../visual/tokens.js';\nvar platform = '';\n// Navigator not exists in node\nif (typeof navigator !== 'undefined') {\n  /* global navigator */\n  platform = navigator.platform || '';\n}\nvar decalColor = 'rgba(0, 0, 0, 0.2)';\nvar themeColor = tokens.color.theme[0];\nvar lightThemeColor = modifyHSL(themeColor, null, null, 0.9);\nexport default {\n  darkMode: 'auto',\n  // backgroundColor: 'rgba(0,0,0,0)',\n  colorBy: 'series',\n  color: tokens.color.theme,\n  gradientColor: [lightThemeColor, themeColor],\n  aria: {\n    decal: {\n      decals: [{\n        color: decalColor,\n        dashArrayX: [1, 0],\n        dashArrayY: [2, 5],\n        symbolSize: 1,\n        rotation: Math.PI / 6\n      }, {\n        color: decalColor,\n        symbol: 'circle',\n        dashArrayX: [[8, 8], [0, 8, 8, 0]],\n        dashArrayY: [6, 0],\n        symbolSize: 0.8\n      }, {\n        color: decalColor,\n        dashArrayX: [1, 0],\n        dashArrayY: [4, 3],\n        rotation: -Math.PI / 4\n      }, {\n        color: decalColor,\n        dashArrayX: [[6, 6], [0, 6, 6, 0]],\n        dashArrayY: [6, 0]\n      }, {\n        color: decalColor,\n        dashArrayX: [[1, 0], [1, 6]],\n        dashArrayY: [1, 0, 6, 0],\n        rotation: Math.PI / 4\n      }, {\n        color: decalColor,\n        symbol: 'triangle',\n        dashArrayX: [[9, 9], [0, 9, 9, 0]],\n        dashArrayY: [7, 2],\n        symbolSize: 0.75\n      }]\n    }\n  },\n  // If xAxis and yAxis declared, grid is created by default.\n  // grid: {},\n  textStyle: {\n    // color: '#000',\n    // decoration: 'none',\n    // PENDING\n    fontFamily: platform.match(/^Win/) ? 'Microsoft YaHei' : 'sans-serif',\n    // fontFamily: 'Arial, Verdana, sans-serif',\n    fontSize: 12,\n    fontStyle: 'normal',\n    fontWeight: 'normal'\n  },\n  // http://blogs.adobe.com/webplatform/2014/02/24/using-blend-modes-in-html-canvas/\n  // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation\n  // Default is source-over\n  blendMode: null,\n  stateAnimation: {\n    duration: 300,\n    easing: 'cubicOut'\n  },\n  animation: 'auto',\n  animationDuration: 1000,\n  animationDurationUpdate: 500,\n  animationEasing: 'cubicInOut',\n  animationEasingUpdate: 'cubicInOut',\n  animationThreshold: 2000,\n  // Configuration for progressive/incremental rendering\n  progressiveThreshold: 3000,\n  progressive: 400,\n  // Threshold of if use single hover layer to optimize.\n  // It is recommended that `hoverLayerThreshold` is equivalent to or less than\n  // `progressiveThreshold`, otherwise hover will cause restart of progressive,\n  // which is unexpected.\n  // see example <echarts/test/heatmap-large.html>.\n  hoverLayerThreshold: 3000,\n  // See: module:echarts/scale/Time\n  useUTC: false\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createHashMap, assert } from 'zrender/lib/core/util.js';\nimport { isComponentIdInternal } from '../util/model.js';\nvar internalOptionCreatorMap = createHashMap();\nexport function registerInternalOptionCreator(mainType, creator) {\n  assert(internalOptionCreatorMap.get(mainType) == null && creator);\n  internalOptionCreatorMap.set(mainType, creator);\n}\nexport function concatInternalOptions(ecModel, mainType, newCmptOptionList) {\n  var internalOptionCreator = internalOptionCreatorMap.get(mainType);\n  if (!internalOptionCreator) {\n    return newCmptOptionList;\n  }\n  var internalOptions = internalOptionCreator(ecModel);\n  if (!internalOptions) {\n    return newCmptOptionList;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    for (var i = 0; i < internalOptions.length; i++) {\n      assert(isComponentIdInternal(internalOptions[i]));\n    }\n  }\n  return newCmptOptionList.concat(internalOptions);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Caution: If the mechanism should be changed some day, these cases\n * should be considered:\n *\n * (1) In `merge option` mode, if using the same option to call `setOption`\n * many times, the result should be the same (try our best to ensure that).\n * (2) In `merge option` mode, if a component has no id/name specified, it\n * will be merged by index, and the result sequence of the components is\n * consistent to the original sequence.\n * (3) In `replaceMerge` mode, keep the result sequence of the components is\n * consistent to the original sequence, even though there might result in \"hole\".\n * (4) `reset` feature (in toolbox). Find detailed info in comments about\n * `mergeOption` in module:echarts/model/OptionManager.\n */\nimport { each, filter, isArray, isObject, isString, createHashMap, assert, clone, merge, extend, mixin, isFunction } from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../util/model.js';\nimport Model from './Model.js';\nimport ComponentModel from './Component.js';\nimport globalDefault from './globalDefault.js';\nimport { resetSourceDefaulter } from '../data/helper/sourceHelper.js';\nimport { concatInternalOptions } from './internalComponentCreator.js';\nimport { PaletteMixin } from './mixin/palette.js';\nimport { error, warn } from '../util/log.js';\n// -----------------------\n// Internal method names:\n// -----------------------\nvar reCreateSeriesIndices;\nvar assertSeriesInitialized;\nvar initBase;\nvar OPTION_INNER_KEY = '\\0_ec_inner';\nvar OPTION_INNER_VALUE = 1;\nvar BUITIN_COMPONENTS_MAP = {\n  grid: 'GridComponent',\n  polar: 'PolarComponent',\n  geo: 'GeoComponent',\n  singleAxis: 'SingleAxisComponent',\n  parallel: 'ParallelComponent',\n  calendar: 'CalendarComponent',\n  matrix: 'MatrixComponent',\n  graphic: 'GraphicComponent',\n  toolbox: 'ToolboxComponent',\n  tooltip: 'TooltipComponent',\n  axisPointer: 'AxisPointerComponent',\n  brush: 'BrushComponent',\n  title: 'TitleComponent',\n  timeline: 'TimelineComponent',\n  markPoint: 'MarkPointComponent',\n  markLine: 'MarkLineComponent',\n  markArea: 'MarkAreaComponent',\n  legend: 'LegendComponent',\n  dataZoom: 'DataZoomComponent',\n  visualMap: 'VisualMapComponent',\n  // aria: 'AriaComponent',\n  // dataset: 'DatasetComponent',\n  // Dependencies\n  xAxis: 'GridComponent',\n  yAxis: 'GridComponent',\n  angleAxis: 'PolarComponent',\n  radiusAxis: 'PolarComponent'\n};\nvar BUILTIN_CHARTS_MAP = {\n  line: 'LineChart',\n  bar: 'BarChart',\n  pie: 'PieChart',\n  scatter: 'ScatterChart',\n  radar: 'RadarChart',\n  map: 'MapChart',\n  tree: 'TreeChart',\n  treemap: 'TreemapChart',\n  graph: 'GraphChart',\n  chord: 'ChordChart',\n  gauge: 'GaugeChart',\n  funnel: 'FunnelChart',\n  parallel: 'ParallelChart',\n  sankey: 'SankeyChart',\n  boxplot: 'BoxplotChart',\n  candlestick: 'CandlestickChart',\n  effectScatter: 'EffectScatterChart',\n  lines: 'LinesChart',\n  heatmap: 'HeatmapChart',\n  pictorialBar: 'PictorialBarChart',\n  themeRiver: 'ThemeRiverChart',\n  sunburst: 'SunburstChart',\n  custom: 'CustomChart'\n};\nvar componetsMissingLogPrinted = {};\nfunction checkMissingComponents(option) {\n  each(option, function (componentOption, mainType) {\n    if (!ComponentModel.hasClass(mainType)) {\n      var componentImportName = BUITIN_COMPONENTS_MAP[mainType];\n      if (componentImportName && !componetsMissingLogPrinted[componentImportName]) {\n        error(\"Component \" + mainType + \" is used but not imported.\\nimport { \" + componentImportName + \" } from 'echarts/components';\\necharts.use([\" + componentImportName + \"]);\");\n        componetsMissingLogPrinted[componentImportName] = true;\n      }\n    }\n  });\n}\nvar GlobalModel = /** @class */function (_super) {\n  __extends(GlobalModel, _super);\n  function GlobalModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  GlobalModel.prototype.init = function (option, parentModel, ecModel, theme, locale, optionManager) {\n    theme = theme || {};\n    this.option = null; // Mark as not initialized.\n    this._theme = new Model(theme);\n    this._locale = new Model(locale);\n    this._optionManager = optionManager;\n  };\n  GlobalModel.prototype.setOption = function (option, opts, optionPreprocessorFuncs) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(option != null, 'option is null/undefined');\n      assert(option[OPTION_INNER_KEY] !== OPTION_INNER_VALUE, 'please use chart.getOption()');\n    }\n    var innerOpt = normalizeSetOptionInput(opts);\n    this._optionManager.setOption(option, optionPreprocessorFuncs, innerOpt);\n    this._resetOption(null, innerOpt);\n  };\n  /**\n   * @param type null/undefined: reset all.\n   *        'recreate': force recreate all.\n   *        'timeline': only reset timeline option\n   *        'media': only reset media query option\n   * @return Whether option changed.\n   */\n  GlobalModel.prototype.resetOption = function (type, opt) {\n    return this._resetOption(type, normalizeSetOptionInput(opt));\n  };\n  GlobalModel.prototype._resetOption = function (type, opt) {\n    var optionChanged = false;\n    var optionManager = this._optionManager;\n    if (!type || type === 'recreate') {\n      var baseOption = optionManager.mountOption(type === 'recreate');\n      if (process.env.NODE_ENV !== 'production') {\n        checkMissingComponents(baseOption);\n      }\n      if (!this.option || type === 'recreate') {\n        initBase(this, baseOption);\n      } else {\n        this.restoreData();\n        this._mergeOption(baseOption, opt);\n      }\n      optionChanged = true;\n    }\n    if (type === 'timeline' || type === 'media') {\n      this.restoreData();\n    }\n    // By design, if `setOption(option2)` at the second time, and `option2` is a `ECUnitOption`,\n    // it should better not have the same props with `MediaUnit['option']`.\n    // Because either `option2` or `MediaUnit['option']` will be always merged to \"current option\"\n    // rather than original \"baseOption\". If they both override a prop, the result might be\n    // unexpected when media state changed after `setOption` called.\n    // If we really need to modify a props in each `MediaUnit['option']`, use the full version\n    // (`{baseOption, media}`) in `setOption`.\n    // For `timeline`, the case is the same.\n    if (!type || type === 'recreate' || type === 'timeline') {\n      var timelineOption = optionManager.getTimelineOption(this);\n      if (timelineOption) {\n        optionChanged = true;\n        this._mergeOption(timelineOption, opt);\n      }\n    }\n    if (!type || type === 'recreate' || type === 'media') {\n      var mediaOptions = optionManager.getMediaOption(this);\n      if (mediaOptions.length) {\n        each(mediaOptions, function (mediaOption) {\n          optionChanged = true;\n          this._mergeOption(mediaOption, opt);\n        }, this);\n      }\n    }\n    return optionChanged;\n  };\n  GlobalModel.prototype.mergeOption = function (option) {\n    this._mergeOption(option, null);\n  };\n  GlobalModel.prototype._mergeOption = function (newOption, opt) {\n    var option = this.option;\n    var componentsMap = this._componentsMap;\n    var componentsCount = this._componentsCount;\n    var newCmptTypes = [];\n    var newCmptTypeMap = createHashMap();\n    var replaceMergeMainTypeMap = opt && opt.replaceMergeMainTypeMap;\n    resetSourceDefaulter(this);\n    // If no component class, merge directly.\n    // For example: color, animaiton options, etc.\n    each(newOption, function (componentOption, mainType) {\n      if (componentOption == null) {\n        return;\n      }\n      if (!ComponentModel.hasClass(mainType)) {\n        // globalSettingTask.dirty();\n        option[mainType] = option[mainType] == null ? clone(componentOption) : merge(option[mainType], componentOption, true);\n      } else if (mainType) {\n        newCmptTypes.push(mainType);\n        newCmptTypeMap.set(mainType, true);\n      }\n    });\n    if (replaceMergeMainTypeMap) {\n      // If there is a mainType `xxx` in `replaceMerge` but not declared in option,\n      // we trade it as it is declared in option as `{xxx: []}`. Because:\n      // (1) for normal merge, `{xxx: null/undefined}` are the same meaning as `{xxx: []}`.\n      // (2) some preprocessor may convert some of `{xxx: null/undefined}` to `{xxx: []}`.\n      replaceMergeMainTypeMap.each(function (val, mainTypeInReplaceMerge) {\n        if (ComponentModel.hasClass(mainTypeInReplaceMerge) && !newCmptTypeMap.get(mainTypeInReplaceMerge)) {\n          newCmptTypes.push(mainTypeInReplaceMerge);\n          newCmptTypeMap.set(mainTypeInReplaceMerge, true);\n        }\n      });\n    }\n    ComponentModel.topologicalTravel(newCmptTypes, ComponentModel.getAllClassMainTypes(), visitComponent, this);\n    function visitComponent(mainType) {\n      var newCmptOptionList = concatInternalOptions(this, mainType, modelUtil.normalizeToArray(newOption[mainType]));\n      var oldCmptList = componentsMap.get(mainType);\n      var mergeMode =\n      // `!oldCmptList` means init. See the comment in `mappingToExists`\n      !oldCmptList ? 'replaceAll' : replaceMergeMainTypeMap && replaceMergeMainTypeMap.get(mainType) ? 'replaceMerge' : 'normalMerge';\n      var mappingResult = modelUtil.mappingToExists(oldCmptList, newCmptOptionList, mergeMode);\n      // Set mainType and complete subType.\n      modelUtil.setComponentTypeToKeyInfo(mappingResult, mainType, ComponentModel);\n      // Empty it before the travel, in order to prevent `this._componentsMap`\n      // from being used in the `init`/`mergeOption`/`optionUpdated` of some\n      // components, which is probably incorrect logic.\n      option[mainType] = null;\n      componentsMap.set(mainType, null);\n      componentsCount.set(mainType, 0);\n      var optionsByMainType = [];\n      var cmptsByMainType = [];\n      var cmptsCountByMainType = 0;\n      var tooltipExists;\n      var tooltipWarningLogged;\n      each(mappingResult, function (resultItem, index) {\n        var componentModel = resultItem.existing;\n        var newCmptOption = resultItem.newOption;\n        if (!newCmptOption) {\n          if (componentModel) {\n            // Consider where is no new option and should be merged using {},\n            // see removeEdgeAndAdd in topologicalTravel and\n            // ComponentModel.getAllClassMainTypes.\n            componentModel.mergeOption({}, this);\n            componentModel.optionUpdated({}, false);\n          }\n          // If no both `resultItem.exist` and `resultItem.option`,\n          // either it is in `replaceMerge` and not matched by any id,\n          // or it has been removed in previous `replaceMerge` and left a \"hole\" in this component index.\n        } else {\n          var isSeriesType = mainType === 'series';\n          var ComponentModelClass = ComponentModel.getClass(mainType, resultItem.keyInfo.subType, !isSeriesType // Give a more detailed warn later if series don't exists\n          );\n          if (!ComponentModelClass) {\n            if (process.env.NODE_ENV !== 'production') {\n              var subType = resultItem.keyInfo.subType;\n              var seriesImportName = BUILTIN_CHARTS_MAP[subType];\n              if (!componetsMissingLogPrinted[subType]) {\n                componetsMissingLogPrinted[subType] = true;\n                if (seriesImportName) {\n                  error(\"Series \" + subType + \" is used but not imported.\\nimport { \" + seriesImportName + \" } from 'echarts/charts';\\necharts.use([\" + seriesImportName + \"]);\");\n                } else {\n                  error(\"Unknown series \" + subType);\n                }\n              }\n            }\n            return;\n          }\n          // TODO Before multiple tooltips get supported, we do this check to avoid unexpected exception.\n          if (mainType === 'tooltip') {\n            if (tooltipExists) {\n              if (process.env.NODE_ENV !== 'production') {\n                if (!tooltipWarningLogged) {\n                  warn('Currently only one tooltip component is allowed.');\n                  tooltipWarningLogged = true;\n                }\n              }\n              return;\n            }\n            tooltipExists = true;\n          }\n          if (componentModel && componentModel.constructor === ComponentModelClass) {\n            componentModel.name = resultItem.keyInfo.name;\n            // componentModel.settingTask && componentModel.settingTask.dirty();\n            componentModel.mergeOption(newCmptOption, this);\n            componentModel.optionUpdated(newCmptOption, false);\n          } else {\n            // PENDING Global as parent ?\n            var extraOpt = extend({\n              componentIndex: index\n            }, resultItem.keyInfo);\n            componentModel = new ComponentModelClass(newCmptOption, this, this, extraOpt);\n            // Assign `keyInfo`\n            extend(componentModel, extraOpt);\n            if (resultItem.brandNew) {\n              componentModel.__requireNewView = true;\n            }\n            componentModel.init(newCmptOption, this, this);\n            // Call optionUpdated after init.\n            // newCmptOption has been used as componentModel.option\n            // and may be merged with theme and default, so pass null\n            // to avoid confusion.\n            componentModel.optionUpdated(null, true);\n          }\n        }\n        if (componentModel) {\n          optionsByMainType.push(componentModel.option);\n          cmptsByMainType.push(componentModel);\n          cmptsCountByMainType++;\n        } else {\n          // Always do assign to avoid elided item in array.\n          optionsByMainType.push(void 0);\n          cmptsByMainType.push(void 0);\n        }\n      }, this);\n      option[mainType] = optionsByMainType;\n      componentsMap.set(mainType, cmptsByMainType);\n      componentsCount.set(mainType, cmptsCountByMainType);\n      // Backup series for filtering.\n      if (mainType === 'series') {\n        reCreateSeriesIndices(this);\n      }\n    }\n    // If no series declared, ensure `_seriesIndices` initialized.\n    if (!this._seriesIndices) {\n      reCreateSeriesIndices(this);\n    }\n  };\n  /**\n   * Get option for output (cloned option and inner info removed)\n   */\n  GlobalModel.prototype.getOption = function () {\n    var option = clone(this.option);\n    each(option, function (optInMainType, mainType) {\n      if (ComponentModel.hasClass(mainType)) {\n        var opts = modelUtil.normalizeToArray(optInMainType);\n        // Inner cmpts need to be removed.\n        // Inner cmpts might not be at last since ec5.0, but still\n        // compatible for users: if inner cmpt at last, splice the returned array.\n        var realLen = opts.length;\n        var metNonInner = false;\n        for (var i = realLen - 1; i >= 0; i--) {\n          // Remove options with inner id.\n          if (opts[i] && !modelUtil.isComponentIdInternal(opts[i])) {\n            metNonInner = true;\n          } else {\n            opts[i] = null;\n            !metNonInner && realLen--;\n          }\n        }\n        opts.length = realLen;\n        option[mainType] = opts;\n      }\n    });\n    delete option[OPTION_INNER_KEY];\n    return option;\n  };\n  GlobalModel.prototype.setTheme = function (theme) {\n    this._theme = new Model(theme);\n    this._resetOption('recreate', null);\n  };\n  GlobalModel.prototype.getTheme = function () {\n    return this._theme;\n  };\n  GlobalModel.prototype.getLocaleModel = function () {\n    return this._locale;\n  };\n  GlobalModel.prototype.setUpdatePayload = function (payload) {\n    this._payload = payload;\n  };\n  GlobalModel.prototype.getUpdatePayload = function () {\n    return this._payload;\n  };\n  /**\n   * @param idx If not specified, return the first one.\n   */\n  GlobalModel.prototype.getComponent = function (mainType, idx) {\n    var list = this._componentsMap.get(mainType);\n    if (list) {\n      var cmpt = list[idx || 0];\n      if (cmpt) {\n        return cmpt;\n      } else if (idx == null) {\n        for (var i = 0; i < list.length; i++) {\n          if (list[i]) {\n            return list[i];\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @return Never be null/undefined.\n   */\n  GlobalModel.prototype.queryComponents = function (condition) {\n    var mainType = condition.mainType;\n    if (!mainType) {\n      return [];\n    }\n    var index = condition.index;\n    var id = condition.id;\n    var name = condition.name;\n    var cmpts = this._componentsMap.get(mainType);\n    if (!cmpts || !cmpts.length) {\n      return [];\n    }\n    var result;\n    if (index != null) {\n      result = [];\n      each(modelUtil.normalizeToArray(index), function (idx) {\n        cmpts[idx] && result.push(cmpts[idx]);\n      });\n    } else if (id != null) {\n      result = queryByIdOrName('id', id, cmpts);\n    } else if (name != null) {\n      result = queryByIdOrName('name', name, cmpts);\n    } else {\n      // Return all non-empty components in that mainType\n      result = filter(cmpts, function (cmpt) {\n        return !!cmpt;\n      });\n    }\n    return filterBySubType(result, condition);\n  };\n  /**\n   * The interface is different from queryComponents,\n   * which is convenient for inner usage.\n   *\n   * @usage\n   * let result = findComponents(\n   *     {mainType: 'dataZoom', query: {dataZoomId: 'abc'}}\n   * );\n   * let result = findComponents(\n   *     {mainType: 'series', subType: 'pie', query: {seriesName: 'uio'}}\n   * );\n   * let result = findComponents(\n   *     {mainType: 'series',\n   *     filter: function (model, index) {...}}\n   * );\n   * // result like [component0, componnet1, ...]\n   */\n  GlobalModel.prototype.findComponents = function (condition) {\n    var query = condition.query;\n    var mainType = condition.mainType;\n    var queryCond = getQueryCond(query);\n    var result = queryCond ? this.queryComponents(queryCond)\n    // Retrieve all non-empty components.\n    : filter(this._componentsMap.get(mainType), function (cmpt) {\n      return !!cmpt;\n    });\n    return doFilter(filterBySubType(result, condition));\n    function getQueryCond(q) {\n      var indexAttr = mainType + 'Index';\n      var idAttr = mainType + 'Id';\n      var nameAttr = mainType + 'Name';\n      return q && (q[indexAttr] != null || q[idAttr] != null || q[nameAttr] != null) ? {\n        mainType: mainType,\n        // subType will be filtered finally.\n        index: q[indexAttr],\n        id: q[idAttr],\n        name: q[nameAttr]\n      } : null;\n    }\n    function doFilter(res) {\n      return condition.filter ? filter(res, condition.filter) : res;\n    }\n  };\n  GlobalModel.prototype.eachComponent = function (mainType, cb, context) {\n    var componentsMap = this._componentsMap;\n    if (isFunction(mainType)) {\n      var ctxForAll_1 = cb;\n      var cbForAll_1 = mainType;\n      componentsMap.each(function (cmpts, componentType) {\n        for (var i = 0; cmpts && i < cmpts.length; i++) {\n          var cmpt = cmpts[i];\n          cmpt && cbForAll_1.call(ctxForAll_1, componentType, cmpt, cmpt.componentIndex);\n        }\n      });\n    } else {\n      var cmpts = isString(mainType) ? componentsMap.get(mainType) : isObject(mainType) ? this.findComponents(mainType) : null;\n      for (var i = 0; cmpts && i < cmpts.length; i++) {\n        var cmpt = cmpts[i];\n        cmpt && cb.call(context, cmpt, cmpt.componentIndex);\n      }\n    }\n  };\n  /**\n   * Get series list before filtered by name.\n   */\n  GlobalModel.prototype.getSeriesByName = function (name) {\n    var nameStr = modelUtil.convertOptionIdName(name, null);\n    return filter(this._componentsMap.get('series'), function (oneSeries) {\n      return !!oneSeries && nameStr != null && oneSeries.name === nameStr;\n    });\n  };\n  /**\n   * Get series list before filtered by index.\n   */\n  GlobalModel.prototype.getSeriesByIndex = function (seriesIndex) {\n    return this._componentsMap.get('series')[seriesIndex];\n  };\n  /**\n   * Get series list before filtered by type.\n   * FIXME: rename to getRawSeriesByType?\n   */\n  GlobalModel.prototype.getSeriesByType = function (subType) {\n    return filter(this._componentsMap.get('series'), function (oneSeries) {\n      return !!oneSeries && oneSeries.subType === subType;\n    });\n  };\n  /**\n   * Get all series before filtered.\n   */\n  GlobalModel.prototype.getSeries = function () {\n    return filter(this._componentsMap.get('series'), function (oneSeries) {\n      return !!oneSeries;\n    });\n  };\n  /**\n   * Count series before filtered.\n   */\n  GlobalModel.prototype.getSeriesCount = function () {\n    return this._componentsCount.get('series');\n  };\n  /**\n   * After filtering, series may be different\n   * from raw series.\n   */\n  GlobalModel.prototype.eachSeries = function (cb, context) {\n    assertSeriesInitialized(this);\n    each(this._seriesIndices, function (rawSeriesIndex) {\n      var series = this._componentsMap.get('series')[rawSeriesIndex];\n      cb.call(context, series, rawSeriesIndex);\n    }, this);\n  };\n  /**\n   * Iterate raw series before filtered.\n   *\n   * @param {Function} cb\n   * @param {*} context\n   */\n  GlobalModel.prototype.eachRawSeries = function (cb, context) {\n    each(this._componentsMap.get('series'), function (series) {\n      series && cb.call(context, series, series.componentIndex);\n    });\n  };\n  /**\n   * After filtering, series may be different.\n   * from raw series.\n   */\n  GlobalModel.prototype.eachSeriesByType = function (subType, cb, context) {\n    assertSeriesInitialized(this);\n    each(this._seriesIndices, function (rawSeriesIndex) {\n      var series = this._componentsMap.get('series')[rawSeriesIndex];\n      if (series.subType === subType) {\n        cb.call(context, series, rawSeriesIndex);\n      }\n    }, this);\n  };\n  /**\n   * Iterate raw series before filtered of given type.\n   */\n  GlobalModel.prototype.eachRawSeriesByType = function (subType, cb, context) {\n    return each(this.getSeriesByType(subType), cb, context);\n  };\n  GlobalModel.prototype.isSeriesFiltered = function (seriesModel) {\n    assertSeriesInitialized(this);\n    return this._seriesIndicesMap.get(seriesModel.componentIndex) == null;\n  };\n  GlobalModel.prototype.getCurrentSeriesIndices = function () {\n    return (this._seriesIndices || []).slice();\n  };\n  GlobalModel.prototype.filterSeries = function (cb, context) {\n    assertSeriesInitialized(this);\n    var newSeriesIndices = [];\n    each(this._seriesIndices, function (seriesRawIdx) {\n      var series = this._componentsMap.get('series')[seriesRawIdx];\n      cb.call(context, series, seriesRawIdx) && newSeriesIndices.push(seriesRawIdx);\n    }, this);\n    this._seriesIndices = newSeriesIndices;\n    this._seriesIndicesMap = createHashMap(newSeriesIndices);\n  };\n  GlobalModel.prototype.restoreData = function (payload) {\n    reCreateSeriesIndices(this);\n    var componentsMap = this._componentsMap;\n    var componentTypes = [];\n    componentsMap.each(function (components, componentType) {\n      if (ComponentModel.hasClass(componentType)) {\n        componentTypes.push(componentType);\n      }\n    });\n    ComponentModel.topologicalTravel(componentTypes, ComponentModel.getAllClassMainTypes(), function (componentType) {\n      each(componentsMap.get(componentType), function (component) {\n        if (component && (componentType !== 'series' || !isNotTargetSeries(component, payload))) {\n          component.restoreData();\n        }\n      });\n    });\n  };\n  GlobalModel.internalField = function () {\n    reCreateSeriesIndices = function (ecModel) {\n      var seriesIndices = ecModel._seriesIndices = [];\n      each(ecModel._componentsMap.get('series'), function (series) {\n        // series may have been removed by `replaceMerge`.\n        series && seriesIndices.push(series.componentIndex);\n      });\n      ecModel._seriesIndicesMap = createHashMap(seriesIndices);\n    };\n    assertSeriesInitialized = function (ecModel) {\n      // Components that use _seriesIndices should depends on series component,\n      // which make sure that their initialization is after series.\n      if (process.env.NODE_ENV !== 'production') {\n        if (!ecModel._seriesIndices) {\n          throw new Error('Option should contains series.');\n        }\n      }\n    };\n    initBase = function (ecModel, baseOption) {\n      // Using OPTION_INNER_KEY to mark that this option cannot be used outside,\n      // i.e. `chart.setOption(chart.getModel().option);` is forbidden.\n      ecModel.option = {};\n      ecModel.option[OPTION_INNER_KEY] = OPTION_INNER_VALUE;\n      // Init with series: [], in case of calling findSeries method\n      // before series initialized.\n      ecModel._componentsMap = createHashMap({\n        series: []\n      });\n      ecModel._componentsCount = createHashMap();\n      // If user spefied `option.aria`, aria will be enable. This detection should be\n      // performed before theme and globalDefault merge.\n      var airaOption = baseOption.aria;\n      if (isObject(airaOption) && airaOption.enabled == null) {\n        airaOption.enabled = true;\n      }\n      mergeTheme(baseOption, ecModel._theme.option);\n      // TODO Needs clone when merging to the unexisted property\n      merge(baseOption, globalDefault, false);\n      ecModel._mergeOption(baseOption, null);\n    };\n  }();\n  return GlobalModel;\n}(Model);\nfunction isNotTargetSeries(seriesModel, payload) {\n  if (payload) {\n    var index = payload.seriesIndex;\n    var id = payload.seriesId;\n    var name_1 = payload.seriesName;\n    return index != null && seriesModel.componentIndex !== index || id != null && seriesModel.id !== id || name_1 != null && seriesModel.name !== name_1;\n  }\n}\nfunction mergeTheme(option, theme) {\n  // PENDING\n  // NOT use `colorLayer` in theme if option has `color`\n  var notMergeColorLayer = option.color && !option.colorLayer;\n  each(theme, function (themeItem, name) {\n    if (name === 'colorLayer' && notMergeColorLayer || name === 'color' && option.color) {\n      return;\n    }\n    // If it is component model mainType, the model handles that merge later.\n    // otherwise, merge them here.\n    if (!ComponentModel.hasClass(name)) {\n      if (typeof themeItem === 'object') {\n        option[name] = !option[name] ? clone(themeItem) : merge(option[name], themeItem, false);\n      } else {\n        if (option[name] == null) {\n          option[name] = themeItem;\n        }\n      }\n    }\n  });\n}\nfunction queryByIdOrName(attr, idOrName, cmpts) {\n  // Here is a break from echarts4: string and number are\n  // treated as equal.\n  if (isArray(idOrName)) {\n    var keyMap_1 = createHashMap();\n    each(idOrName, function (idOrNameItem) {\n      if (idOrNameItem != null) {\n        var idName = modelUtil.convertOptionIdName(idOrNameItem, null);\n        idName != null && keyMap_1.set(idOrNameItem, true);\n      }\n    });\n    return filter(cmpts, function (cmpt) {\n      return cmpt && keyMap_1.get(cmpt[attr]);\n    });\n  } else {\n    var idName_1 = modelUtil.convertOptionIdName(idOrName, null);\n    return filter(cmpts, function (cmpt) {\n      return cmpt && idName_1 != null && cmpt[attr] === idName_1;\n    });\n  }\n}\nfunction filterBySubType(components, condition) {\n  // Using hasOwnProperty for restrict. Consider\n  // subType is undefined in user payload.\n  return condition.hasOwnProperty('subType') ? filter(components, function (cmpt) {\n    return cmpt && cmpt.subType === condition.subType;\n  }) : components;\n}\nfunction normalizeSetOptionInput(opts) {\n  var replaceMergeMainTypeMap = createHashMap();\n  opts && each(modelUtil.normalizeToArray(opts.replaceMerge), function (mainType) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(ComponentModel.hasClass(mainType), '\"' + mainType + '\" is not valid component main type in \"replaceMerge\"');\n    }\n    replaceMergeMainTypeMap.set(mainType, true);\n  });\n  return {\n    replaceMergeMainTypeMap: replaceMergeMainTypeMap\n  };\n}\nmixin(GlobalModel, PaletteMixin);\nexport default GlobalModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar availableMethods = ['getDom', 'getZr', 'getWidth', 'getHeight', 'getDevicePixelRatio', 'dispatchAction', 'isSSR', 'isDisposed', 'on', 'off', 'getDataURL', 'getConnectedDataURL',\n// 'getModel',\n'getOption',\n// 'getViewOfComponentModel',\n// 'getViewOfSeriesModel',\n'getId', 'updateLabelLayout'];\nvar ExtensionAPI = /** @class */function () {\n  function ExtensionAPI(ecInstance) {\n    zrUtil.each(availableMethods, function (methodName) {\n      this[methodName] = zrUtil.bind(ecInstance[methodName], ecInstance);\n    }, this);\n  }\n  return ExtensionAPI;\n}();\nexport default ExtensionAPI;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { normalizeToArray\n// , MappingExistingItem, setComponentTypeToKeyInfo, mappingToExists\n} from '../util/model.js';\nimport { each, clone, map, isTypedArray, setAsPrimitive, isArray, isObject\n// , HashMap , createHashMap, extend, merge,\n} from 'zrender/lib/core/util.js';\nimport { error } from '../util/log.js';\nvar QUERY_REG = /^(min|max)?(.+)$/;\n// Key: mainType\n// type FakeComponentsMap = HashMap<(MappingExistingItem & { subType: string })[]>;\n/**\n * TERM EXPLANATIONS:\n * See `ECOption` and `ECUnitOption` in `src/util/types.ts`.\n */\nvar OptionManager = /** @class */function () {\n  // timeline.notMerge is not supported in ec3. Firstly there is rearly\n  // case that notMerge is needed. Secondly supporting 'notMerge' requires\n  // rawOption cloned and backuped when timeline changed, which does no\n  // good to performance. What's more, that both timeline and setOption\n  // method supply 'notMerge' brings complex and some problems.\n  // Consider this case:\n  // (step1) chart.setOption({timeline: {notMerge: false}, ...}, false);\n  // (step2) chart.setOption({timeline: {notMerge: true}, ...}, false);\n  function OptionManager(api) {\n    this._timelineOptions = [];\n    this._mediaList = [];\n    /**\n     * -1, means default.\n     * empty means no media.\n     */\n    this._currentMediaIndices = [];\n    this._api = api;\n  }\n  OptionManager.prototype.setOption = function (rawOption, optionPreprocessorFuncs, opt) {\n    if (rawOption) {\n      // That set dat primitive is dangerous if user reuse the data when setOption again.\n      each(normalizeToArray(rawOption.series), function (series) {\n        series && series.data && isTypedArray(series.data) && setAsPrimitive(series.data);\n      });\n      each(normalizeToArray(rawOption.dataset), function (dataset) {\n        dataset && dataset.source && isTypedArray(dataset.source) && setAsPrimitive(dataset.source);\n      });\n    }\n    // Caution: some series modify option data, if do not clone,\n    // it should ensure that the repeat modify correctly\n    // (create a new object when modify itself).\n    rawOption = clone(rawOption);\n    // FIXME\n    // If some property is set in timeline options or media option but\n    // not set in baseOption, a warning should be given.\n    var optionBackup = this._optionBackup;\n    var newParsedOption = parseRawOption(rawOption, optionPreprocessorFuncs, !optionBackup);\n    this._newBaseOption = newParsedOption.baseOption;\n    // For setOption at second time (using merge mode);\n    if (optionBackup) {\n      // FIXME\n      // the restore merge solution is essentially incorrect.\n      // the mapping can not be 100% consistent with ecModel, which probably brings\n      // potential bug!\n      // The first merge is delayed, because in most cases, users do not call `setOption` twice.\n      // let fakeCmptsMap = this._fakeCmptsMap;\n      // if (!fakeCmptsMap) {\n      //     fakeCmptsMap = this._fakeCmptsMap = createHashMap();\n      //     mergeToBackupOption(fakeCmptsMap, null, optionBackup.baseOption, null);\n      // }\n      // mergeToBackupOption(\n      //     fakeCmptsMap, optionBackup.baseOption, newParsedOption.baseOption, opt\n      // );\n      // For simplicity, timeline options and media options do not support merge,\n      // that is, if you `setOption` twice and both has timeline options, the latter\n      // timeline options will not be merged to the former, but just substitute them.\n      if (newParsedOption.timelineOptions.length) {\n        optionBackup.timelineOptions = newParsedOption.timelineOptions;\n      }\n      if (newParsedOption.mediaList.length) {\n        optionBackup.mediaList = newParsedOption.mediaList;\n      }\n      if (newParsedOption.mediaDefault) {\n        optionBackup.mediaDefault = newParsedOption.mediaDefault;\n      }\n    } else {\n      this._optionBackup = newParsedOption;\n    }\n  };\n  OptionManager.prototype.mountOption = function (isRecreate) {\n    var optionBackup = this._optionBackup;\n    this._timelineOptions = optionBackup.timelineOptions;\n    this._mediaList = optionBackup.mediaList;\n    this._mediaDefault = optionBackup.mediaDefault;\n    this._currentMediaIndices = [];\n    return clone(isRecreate\n    // this._optionBackup.baseOption, which is created at the first `setOption`\n    // called, and is merged into every new option by inner method `mergeToBackupOption`\n    // each time `setOption` called, can be only used in `isRecreate`, because\n    // its reliability is under suspicion. In other cases option merge is\n    // performed by `model.mergeOption`.\n    ? optionBackup.baseOption : this._newBaseOption);\n  };\n  OptionManager.prototype.getTimelineOption = function (ecModel) {\n    var option;\n    var timelineOptions = this._timelineOptions;\n    if (timelineOptions.length) {\n      // getTimelineOption can only be called after ecModel inited,\n      // so we can get currentIndex from timelineModel.\n      var timelineModel = ecModel.getComponent('timeline');\n      if (timelineModel) {\n        option = clone(\n        // FIXME:TS as TimelineModel or quivlant interface\n        timelineOptions[timelineModel.getCurrentIndex()]);\n      }\n    }\n    return option;\n  };\n  OptionManager.prototype.getMediaOption = function (ecModel) {\n    var ecWidth = this._api.getWidth();\n    var ecHeight = this._api.getHeight();\n    var mediaList = this._mediaList;\n    var mediaDefault = this._mediaDefault;\n    var indices = [];\n    var result = [];\n    // No media defined.\n    if (!mediaList.length && !mediaDefault) {\n      return result;\n    }\n    // Multi media may be applied, the latter defined media has higher priority.\n    for (var i = 0, len = mediaList.length; i < len; i++) {\n      if (applyMediaQuery(mediaList[i].query, ecWidth, ecHeight)) {\n        indices.push(i);\n      }\n    }\n    // FIXME\n    // Whether mediaDefault should force users to provide? Otherwise\n    // the change by media query can not be recorvered.\n    if (!indices.length && mediaDefault) {\n      indices = [-1];\n    }\n    if (indices.length && !indicesEquals(indices, this._currentMediaIndices)) {\n      result = map(indices, function (index) {\n        return clone(index === -1 ? mediaDefault.option : mediaList[index].option);\n      });\n    }\n    // Otherwise return nothing.\n    this._currentMediaIndices = indices;\n    return result;\n  };\n  return OptionManager;\n}();\n/**\n * [RAW_OPTION_PATTERNS]\n * (Note: \"series: []\" represents all other props in `ECUnitOption`)\n *\n * (1) No prop \"baseOption\" declared:\n * Root option is used as \"baseOption\" (except prop \"options\" and \"media\").\n * ```js\n * option = {\n *     series: [],\n *     timeline: {},\n *     options: [],\n * };\n * option = {\n *     series: [],\n *     media: {},\n * };\n * option = {\n *     series: [],\n *     timeline: {},\n *     options: [],\n *     media: {},\n * }\n * ```\n *\n * (2) Prop \"baseOption\" declared:\n * If \"baseOption\" declared, `ECUnitOption` props can only be declared\n * inside \"baseOption\" except prop \"timeline\" (compat ec2).\n * ```js\n * option = {\n *     baseOption: {\n *         timeline: {},\n *         series: [],\n *     },\n *     options: []\n * };\n * option = {\n *     baseOption: {\n *         series: [],\n *     },\n *     media: []\n * };\n * option = {\n *     baseOption: {\n *         timeline: {},\n *         series: [],\n *     },\n *     options: []\n *     media: []\n * };\n * option = {\n *     // ec3 compat ec2: allow (only) `timeline` declared\n *     // outside baseOption. Keep this setting for compat.\n *     timeline: {},\n *     baseOption: {\n *         series: [],\n *     },\n *     options: [],\n *     media: []\n * };\n * ```\n */\nfunction parseRawOption(\n// `rawOption` May be modified\nrawOption, optionPreprocessorFuncs, isNew) {\n  var mediaList = [];\n  var mediaDefault;\n  var baseOption;\n  var declaredBaseOption = rawOption.baseOption;\n  // Compatible with ec2, [RAW_OPTION_PATTERNS] above.\n  var timelineOnRoot = rawOption.timeline;\n  var timelineOptionsOnRoot = rawOption.options;\n  var mediaOnRoot = rawOption.media;\n  var hasMedia = !!rawOption.media;\n  var hasTimeline = !!(timelineOptionsOnRoot || timelineOnRoot || declaredBaseOption && declaredBaseOption.timeline);\n  if (declaredBaseOption) {\n    baseOption = declaredBaseOption;\n    // For merge option.\n    if (!baseOption.timeline) {\n      baseOption.timeline = timelineOnRoot;\n    }\n  }\n  // For convenience, enable to use the root option as the `baseOption`:\n  // `{ ...normalOptionProps, media: [{ ... }, { ... }] }`\n  else {\n    if (hasTimeline || hasMedia) {\n      rawOption.options = rawOption.media = null;\n    }\n    baseOption = rawOption;\n  }\n  if (hasMedia) {\n    if (isArray(mediaOnRoot)) {\n      each(mediaOnRoot, function (singleMedia) {\n        if (process.env.NODE_ENV !== 'production') {\n          // Real case of wrong config.\n          if (singleMedia && !singleMedia.option && isObject(singleMedia.query) && isObject(singleMedia.query.option)) {\n            error('Illegal media option. Must be like { media: [ { query: {}, option: {} } ] }');\n          }\n        }\n        if (singleMedia && singleMedia.option) {\n          if (singleMedia.query) {\n            mediaList.push(singleMedia);\n          } else if (!mediaDefault) {\n            // Use the first media default.\n            mediaDefault = singleMedia;\n          }\n        }\n      });\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        // Real case of wrong config.\n        error('Illegal media option. Must be an array. Like { media: [ {...}, {...} ] }');\n      }\n    }\n  }\n  doPreprocess(baseOption);\n  each(timelineOptionsOnRoot, function (option) {\n    return doPreprocess(option);\n  });\n  each(mediaList, function (media) {\n    return doPreprocess(media.option);\n  });\n  function doPreprocess(option) {\n    each(optionPreprocessorFuncs, function (preProcess) {\n      preProcess(option, isNew);\n    });\n  }\n  return {\n    baseOption: baseOption,\n    timelineOptions: timelineOptionsOnRoot || [],\n    mediaDefault: mediaDefault,\n    mediaList: mediaList\n  };\n}\n/**\n * @see <http://www.w3.org/TR/css3-mediaqueries/#media1>\n * Support: width, height, aspectRatio\n * Can use max or min as prefix.\n */\nfunction applyMediaQuery(query, ecWidth, ecHeight) {\n  var realMap = {\n    width: ecWidth,\n    height: ecHeight,\n    aspectratio: ecWidth / ecHeight // lower case for convenience.\n  };\n  var applicable = true;\n  each(query, function (value, attr) {\n    var matched = attr.match(QUERY_REG);\n    if (!matched || !matched[1] || !matched[2]) {\n      return;\n    }\n    var operator = matched[1];\n    var realAttr = matched[2].toLowerCase();\n    if (!compare(realMap[realAttr], value, operator)) {\n      applicable = false;\n    }\n  });\n  return applicable;\n}\nfunction compare(real, expect, operator) {\n  if (operator === 'min') {\n    return real >= expect;\n  } else if (operator === 'max') {\n    return real <= expect;\n  } else {\n    // Equals\n    return real === expect;\n  }\n}\nfunction indicesEquals(indices1, indices2) {\n  // indices is always order by asc and has only finite number.\n  return indices1.join(',') === indices2.join(',');\n}\n/**\n * Consider case:\n * `chart.setOption(opt1);`\n * Then user do some interaction like dataZoom, dataView changing.\n * `chart.setOption(opt2);`\n * Then user press 'reset button' in toolbox.\n *\n * After doing that all of the interaction effects should be reset, the\n * chart should be the same as the result of invoke\n * `chart.setOption(opt1); chart.setOption(opt2);`.\n *\n * Although it is not able ensure that\n * `chart.setOption(opt1); chart.setOption(opt2);` is equivalents to\n * `chart.setOption(merge(opt1, opt2));` exactly,\n * this might be the only simple way to implement that feature.\n *\n * MEMO: We've considered some other approaches:\n * 1. Each model handles its self restoration but not uniform treatment.\n *     (Too complex in logic and error-prone)\n * 2. Use a shadow ecModel. (Performance expensive)\n *\n * FIXME: A possible solution:\n * Add a extra level of model for each component model. The inheritance chain would be:\n * ecModel <- componentModel <- componentActionModel <- dataItemModel\n * And all of the actions can only modify the `componentActionModel` rather than\n * `componentModel`. `setOption` will only modify the `ecModel` and `componentModel`.\n * When \"resotre\" action triggered, model from `componentActionModel` will be discarded\n * instead of recreating the \"ecModel\" from the \"_optionBackup\".\n */\n// function mergeToBackupOption(\n//     fakeCmptsMap: FakeComponentsMap,\n//     // `tarOption` Can be null/undefined, means init\n//     tarOption: ECUnitOption,\n//     newOption: ECUnitOption,\n//     // Can be null/undefined\n//     opt: InnerSetOptionOpts\n// ): void {\n//     newOption = newOption || {} as ECUnitOption;\n//     const notInit = !!tarOption;\n//     each(newOption, function (newOptsInMainType, mainType) {\n//         if (newOptsInMainType == null) {\n//             return;\n//         }\n//         if (!ComponentModel.hasClass(mainType)) {\n//             if (tarOption) {\n//                 tarOption[mainType] = merge(tarOption[mainType], newOptsInMainType, true);\n//             }\n//         }\n//         else {\n//             const oldTarOptsInMainType = notInit ? normalizeToArray(tarOption[mainType]) : null;\n//             const oldFakeCmptsInMainType = fakeCmptsMap.get(mainType) || [];\n//             const resultTarOptsInMainType = notInit ? (tarOption[mainType] = [] as ComponentOption[]) : null;\n//             const resultFakeCmptsInMainType = fakeCmptsMap.set(mainType, []);\n//             const mappingResult = mappingToExists(\n//                 oldFakeCmptsInMainType,\n//                 normalizeToArray(newOptsInMainType),\n//                 (opt && opt.replaceMergeMainTypeMap.get(mainType)) ? 'replaceMerge' : 'normalMerge'\n//             );\n//             setComponentTypeToKeyInfo(mappingResult, mainType, ComponentModel as ComponentModelConstructor);\n//             each(mappingResult, function (resultItem, index) {\n//                 // The same logic as `Global.ts#_mergeOption`.\n//                 let fakeCmpt = resultItem.existing;\n//                 const newOption = resultItem.newOption;\n//                 const keyInfo = resultItem.keyInfo;\n//                 let fakeCmptOpt;\n//                 if (!newOption) {\n//                     fakeCmptOpt = oldTarOptsInMainType[index];\n//                 }\n//                 else {\n//                     if (fakeCmpt && fakeCmpt.subType === keyInfo.subType) {\n//                         fakeCmpt.name = keyInfo.name;\n//                         if (notInit) {\n//                             fakeCmptOpt = merge(oldTarOptsInMainType[index], newOption, true);\n//                         }\n//                     }\n//                     else {\n//                         fakeCmpt = extend({}, keyInfo);\n//                         if (notInit) {\n//                             fakeCmptOpt = clone(newOption);\n//                         }\n//                     }\n//                 }\n//                 if (fakeCmpt) {\n//                     notInit && resultTarOptsInMainType.push(fakeCmptOpt);\n//                     resultFakeCmptsInMainType.push(fakeCmpt);\n//                 }\n//                 else {\n//                     notInit && resultTarOptsInMainType.push(void 0);\n//                     resultFakeCmptsInMainType.push(void 0);\n//                 }\n//             });\n//         }\n//     });\n// }\nexport default OptionManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../../util/model.js';\nimport { deprecateLog, deprecateReplaceLog } from '../../util/log.js';\nvar each = zrUtil.each;\nvar isObject = zrUtil.isObject;\nvar POSSIBLE_STYLES = ['areaStyle', 'lineStyle', 'nodeStyle', 'linkStyle', 'chordStyle', 'label', 'labelLine'];\nfunction compatEC2ItemStyle(opt) {\n  var itemStyleOpt = opt && opt.itemStyle;\n  if (!itemStyleOpt) {\n    return;\n  }\n  for (var i = 0, len = POSSIBLE_STYLES.length; i < len; i++) {\n    var styleName = POSSIBLE_STYLES[i];\n    var normalItemStyleOpt = itemStyleOpt.normal;\n    var emphasisItemStyleOpt = itemStyleOpt.emphasis;\n    if (normalItemStyleOpt && normalItemStyleOpt[styleName]) {\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateReplaceLog(\"itemStyle.normal.\" + styleName, styleName);\n      }\n      opt[styleName] = opt[styleName] || {};\n      if (!opt[styleName].normal) {\n        opt[styleName].normal = normalItemStyleOpt[styleName];\n      } else {\n        zrUtil.merge(opt[styleName].normal, normalItemStyleOpt[styleName]);\n      }\n      normalItemStyleOpt[styleName] = null;\n    }\n    if (emphasisItemStyleOpt && emphasisItemStyleOpt[styleName]) {\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateReplaceLog(\"itemStyle.emphasis.\" + styleName, \"emphasis.\" + styleName);\n      }\n      opt[styleName] = opt[styleName] || {};\n      if (!opt[styleName].emphasis) {\n        opt[styleName].emphasis = emphasisItemStyleOpt[styleName];\n      } else {\n        zrUtil.merge(opt[styleName].emphasis, emphasisItemStyleOpt[styleName]);\n      }\n      emphasisItemStyleOpt[styleName] = null;\n    }\n  }\n}\nfunction convertNormalEmphasis(opt, optType, useExtend) {\n  if (opt && opt[optType] && (opt[optType].normal || opt[optType].emphasis)) {\n    var normalOpt = opt[optType].normal;\n    var emphasisOpt = opt[optType].emphasis;\n    if (normalOpt) {\n      if (process.env.NODE_ENV !== 'production') {\n        // eslint-disable-next-line max-len\n        deprecateLog(\"'normal' hierarchy in \" + optType + \" has been removed since 4.0. All style properties are configured in \" + optType + \" directly now.\");\n      }\n      // Timeline controlStyle has other properties besides normal and emphasis\n      if (useExtend) {\n        opt[optType].normal = opt[optType].emphasis = null;\n        zrUtil.defaults(opt[optType], normalOpt);\n      } else {\n        opt[optType] = normalOpt;\n      }\n    }\n    if (emphasisOpt) {\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateLog(optType + \".emphasis has been changed to emphasis.\" + optType + \" since 4.0\");\n      }\n      opt.emphasis = opt.emphasis || {};\n      opt.emphasis[optType] = emphasisOpt;\n      // Also compat the case user mix the style and focus together in ec3 style\n      // for example: { itemStyle: { normal: {}, emphasis: {focus, shadowBlur} } }\n      if (emphasisOpt.focus) {\n        opt.emphasis.focus = emphasisOpt.focus;\n      }\n      if (emphasisOpt.blurScope) {\n        opt.emphasis.blurScope = emphasisOpt.blurScope;\n      }\n    }\n  }\n}\nfunction removeEC3NormalStatus(opt) {\n  convertNormalEmphasis(opt, 'itemStyle');\n  convertNormalEmphasis(opt, 'lineStyle');\n  convertNormalEmphasis(opt, 'areaStyle');\n  convertNormalEmphasis(opt, 'label');\n  convertNormalEmphasis(opt, 'labelLine');\n  // treemap\n  convertNormalEmphasis(opt, 'upperLabel');\n  // graph\n  convertNormalEmphasis(opt, 'edgeLabel');\n}\nfunction compatTextStyle(opt, propName) {\n  // Check whether is not object (string\\null\\undefined ...)\n  var labelOptSingle = isObject(opt) && opt[propName];\n  var textStyle = isObject(labelOptSingle) && labelOptSingle.textStyle;\n  if (textStyle) {\n    if (process.env.NODE_ENV !== 'production') {\n      // eslint-disable-next-line max-len\n      deprecateLog(\"textStyle hierarchy in \" + propName + \" has been removed since 4.0. All textStyle properties are configured in \" + propName + \" directly now.\");\n    }\n    for (var i = 0, len = modelUtil.TEXT_STYLE_OPTIONS.length; i < len; i++) {\n      var textPropName = modelUtil.TEXT_STYLE_OPTIONS[i];\n      if (textStyle.hasOwnProperty(textPropName)) {\n        labelOptSingle[textPropName] = textStyle[textPropName];\n      }\n    }\n  }\n}\nfunction compatEC3CommonStyles(opt) {\n  if (opt) {\n    removeEC3NormalStatus(opt);\n    compatTextStyle(opt, 'label');\n    opt.emphasis && compatTextStyle(opt.emphasis, 'label');\n  }\n}\nfunction processSeries(seriesOpt) {\n  if (!isObject(seriesOpt)) {\n    return;\n  }\n  compatEC2ItemStyle(seriesOpt);\n  removeEC3NormalStatus(seriesOpt);\n  compatTextStyle(seriesOpt, 'label');\n  // treemap\n  compatTextStyle(seriesOpt, 'upperLabel');\n  // graph\n  compatTextStyle(seriesOpt, 'edgeLabel');\n  if (seriesOpt.emphasis) {\n    compatTextStyle(seriesOpt.emphasis, 'label');\n    // treemap\n    compatTextStyle(seriesOpt.emphasis, 'upperLabel');\n    // graph\n    compatTextStyle(seriesOpt.emphasis, 'edgeLabel');\n  }\n  var markPoint = seriesOpt.markPoint;\n  if (markPoint) {\n    compatEC2ItemStyle(markPoint);\n    compatEC3CommonStyles(markPoint);\n  }\n  var markLine = seriesOpt.markLine;\n  if (markLine) {\n    compatEC2ItemStyle(markLine);\n    compatEC3CommonStyles(markLine);\n  }\n  var markArea = seriesOpt.markArea;\n  if (markArea) {\n    compatEC3CommonStyles(markArea);\n  }\n  var data = seriesOpt.data;\n  // Break with ec3: if `setOption` again, there may be no `type` in option,\n  // then the backward compat based on option type will not be performed.\n  if (seriesOpt.type === 'graph') {\n    data = data || seriesOpt.nodes;\n    var edgeData = seriesOpt.links || seriesOpt.edges;\n    if (edgeData && !zrUtil.isTypedArray(edgeData)) {\n      for (var i = 0; i < edgeData.length; i++) {\n        compatEC3CommonStyles(edgeData[i]);\n      }\n    }\n    zrUtil.each(seriesOpt.categories, function (opt) {\n      removeEC3NormalStatus(opt);\n    });\n  }\n  if (data && !zrUtil.isTypedArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      compatEC3CommonStyles(data[i]);\n    }\n  }\n  // mark point data\n  markPoint = seriesOpt.markPoint;\n  if (markPoint && markPoint.data) {\n    var mpData = markPoint.data;\n    for (var i = 0; i < mpData.length; i++) {\n      compatEC3CommonStyles(mpData[i]);\n    }\n  }\n  // mark line data\n  markLine = seriesOpt.markLine;\n  if (markLine && markLine.data) {\n    var mlData = markLine.data;\n    for (var i = 0; i < mlData.length; i++) {\n      if (zrUtil.isArray(mlData[i])) {\n        compatEC3CommonStyles(mlData[i][0]);\n        compatEC3CommonStyles(mlData[i][1]);\n      } else {\n        compatEC3CommonStyles(mlData[i]);\n      }\n    }\n  }\n  // Series\n  if (seriesOpt.type === 'gauge') {\n    compatTextStyle(seriesOpt, 'axisLabel');\n    compatTextStyle(seriesOpt, 'title');\n    compatTextStyle(seriesOpt, 'detail');\n  } else if (seriesOpt.type === 'treemap') {\n    convertNormalEmphasis(seriesOpt.breadcrumb, 'itemStyle');\n    zrUtil.each(seriesOpt.levels, function (opt) {\n      removeEC3NormalStatus(opt);\n    });\n  } else if (seriesOpt.type === 'tree') {\n    removeEC3NormalStatus(seriesOpt.leaves);\n  }\n  // sunburst starts from ec4, so it does not need to compat levels.\n}\nfunction toArr(o) {\n  return zrUtil.isArray(o) ? o : o ? [o] : [];\n}\nfunction toObj(o) {\n  return (zrUtil.isArray(o) ? o[0] : o) || {};\n}\nexport default function globalCompatStyle(option, isTheme) {\n  each(toArr(option.series), function (seriesOpt) {\n    isObject(seriesOpt) && processSeries(seriesOpt);\n  });\n  var axes = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'parallelAxis', 'radar'];\n  isTheme && axes.push('valueAxis', 'categoryAxis', 'logAxis', 'timeAxis');\n  each(axes, function (axisName) {\n    each(toArr(option[axisName]), function (axisOpt) {\n      if (axisOpt) {\n        compatTextStyle(axisOpt, 'axisLabel');\n        compatTextStyle(axisOpt.axisPointer, 'label');\n      }\n    });\n  });\n  each(toArr(option.parallel), function (parallelOpt) {\n    var parallelAxisDefault = parallelOpt && parallelOpt.parallelAxisDefault;\n    compatTextStyle(parallelAxisDefault, 'axisLabel');\n    compatTextStyle(parallelAxisDefault && parallelAxisDefault.axisPointer, 'label');\n  });\n  each(toArr(option.calendar), function (calendarOpt) {\n    convertNormalEmphasis(calendarOpt, 'itemStyle');\n    compatTextStyle(calendarOpt, 'dayLabel');\n    compatTextStyle(calendarOpt, 'monthLabel');\n    compatTextStyle(calendarOpt, 'yearLabel');\n  });\n  // radar.name.textStyle\n  each(toArr(option.radar), function (radarOpt) {\n    compatTextStyle(radarOpt, 'name');\n    // Use axisName instead of name because component has name property\n    if (radarOpt.name && radarOpt.axisName == null) {\n      radarOpt.axisName = radarOpt.name;\n      delete radarOpt.name;\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateLog('name property in radar component has been changed to axisName');\n      }\n    }\n    if (radarOpt.nameGap != null && radarOpt.axisNameGap == null) {\n      radarOpt.axisNameGap = radarOpt.nameGap;\n      delete radarOpt.nameGap;\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateLog('nameGap property in radar component has been changed to axisNameGap');\n      }\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      each(radarOpt.indicator, function (indicatorOpt) {\n        if (indicatorOpt.text) {\n          deprecateReplaceLog('text', 'name', 'radar.indicator');\n        }\n      });\n    }\n  });\n  each(toArr(option.geo), function (geoOpt) {\n    if (isObject(geoOpt)) {\n      compatEC3CommonStyles(geoOpt);\n      each(toArr(geoOpt.regions), function (regionObj) {\n        compatEC3CommonStyles(regionObj);\n      });\n    }\n  });\n  each(toArr(option.timeline), function (timelineOpt) {\n    compatEC3CommonStyles(timelineOpt);\n    convertNormalEmphasis(timelineOpt, 'label');\n    convertNormalEmphasis(timelineOpt, 'itemStyle');\n    convertNormalEmphasis(timelineOpt, 'controlStyle', true);\n    var data = timelineOpt.data;\n    zrUtil.isArray(data) && zrUtil.each(data, function (item) {\n      if (zrUtil.isObject(item)) {\n        convertNormalEmphasis(item, 'label');\n        convertNormalEmphasis(item, 'itemStyle');\n      }\n    });\n  });\n  each(toArr(option.toolbox), function (toolboxOpt) {\n    convertNormalEmphasis(toolboxOpt, 'iconStyle');\n    each(toolboxOpt.feature, function (featureOpt) {\n      convertNormalEmphasis(featureOpt, 'iconStyle');\n    });\n  });\n  compatTextStyle(toObj(option.axisPointer), 'label');\n  compatTextStyle(toObj(option.tooltip).axisPointer, 'label');\n  // Clean logs\n  // storedLogs = {};\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, isArray, isObject, isTypedArray, defaults } from 'zrender/lib/core/util.js';\nimport compatStyle from './helper/compatStyle.js';\nimport { normalizeToArray } from '../util/model.js';\nimport { deprecateLog, deprecateReplaceLog } from '../util/log.js';\nfunction get(opt, path) {\n  var pathArr = path.split(',');\n  var obj = opt;\n  for (var i = 0; i < pathArr.length; i++) {\n    obj = obj && obj[pathArr[i]];\n    if (obj == null) {\n      break;\n    }\n  }\n  return obj;\n}\nfunction set(opt, path, val, overwrite) {\n  var pathArr = path.split(',');\n  var obj = opt;\n  var key;\n  var i = 0;\n  for (; i < pathArr.length - 1; i++) {\n    key = pathArr[i];\n    if (obj[key] == null) {\n      obj[key] = {};\n    }\n    obj = obj[key];\n  }\n  if (overwrite || obj[pathArr[i]] == null) {\n    obj[pathArr[i]] = val;\n  }\n}\nfunction compatLayoutProperties(option) {\n  option && each(LAYOUT_PROPERTIES, function (prop) {\n    if (prop[0] in option && !(prop[1] in option)) {\n      option[prop[1]] = option[prop[0]];\n    }\n  });\n}\nvar LAYOUT_PROPERTIES = [['x', 'left'], ['y', 'top'], ['x2', 'right'], ['y2', 'bottom']];\nvar COMPATITABLE_COMPONENTS = ['grid', 'geo', 'parallel', 'legend', 'toolbox', 'title', 'visualMap', 'dataZoom', 'timeline'];\nvar BAR_ITEM_STYLE_MAP = [['borderRadius', 'barBorderRadius'], ['borderColor', 'barBorderColor'], ['borderWidth', 'barBorderWidth']];\nfunction compatBarItemStyle(option) {\n  var itemStyle = option && option.itemStyle;\n  if (itemStyle) {\n    for (var i = 0; i < BAR_ITEM_STYLE_MAP.length; i++) {\n      var oldName = BAR_ITEM_STYLE_MAP[i][1];\n      var newName = BAR_ITEM_STYLE_MAP[i][0];\n      if (itemStyle[oldName] != null) {\n        itemStyle[newName] = itemStyle[oldName];\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateReplaceLog(oldName, newName);\n        }\n      }\n    }\n  }\n}\nfunction compatPieLabel(option) {\n  if (!option) {\n    return;\n  }\n  if (option.alignTo === 'edge' && option.margin != null && option.edgeDistance == null) {\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('label.margin', 'label.edgeDistance', 'pie');\n    }\n    option.edgeDistance = option.margin;\n  }\n}\nfunction compatSunburstState(option) {\n  if (!option) {\n    return;\n  }\n  if (option.downplay && !option.blur) {\n    option.blur = option.downplay;\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('downplay', 'blur', 'sunburst');\n    }\n  }\n}\nfunction compatGraphFocus(option) {\n  if (!option) {\n    return;\n  }\n  if (option.focusNodeAdjacency != null) {\n    option.emphasis = option.emphasis || {};\n    if (option.emphasis.focus == null) {\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateReplaceLog('focusNodeAdjacency', 'emphasis: { focus: \\'adjacency\\'}', 'graph/sankey');\n      }\n      option.emphasis.focus = 'adjacency';\n    }\n  }\n}\nfunction traverseTree(data, cb) {\n  if (data) {\n    for (var i = 0; i < data.length; i++) {\n      cb(data[i]);\n      data[i] && traverseTree(data[i].children, cb);\n    }\n  }\n}\nexport default function globalBackwardCompat(option, isTheme) {\n  compatStyle(option, isTheme);\n  // Make sure series array for model initialization.\n  option.series = normalizeToArray(option.series);\n  each(option.series, function (seriesOpt) {\n    if (!isObject(seriesOpt)) {\n      return;\n    }\n    var seriesType = seriesOpt.type;\n    if (seriesType === 'line') {\n      if (seriesOpt.clipOverflow != null) {\n        seriesOpt.clip = seriesOpt.clipOverflow;\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateReplaceLog('clipOverflow', 'clip', 'line');\n        }\n      }\n    } else if (seriesType === 'pie' || seriesType === 'gauge') {\n      if (seriesOpt.clockWise != null) {\n        seriesOpt.clockwise = seriesOpt.clockWise;\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateReplaceLog('clockWise', 'clockwise');\n        }\n      }\n      compatPieLabel(seriesOpt.label);\n      var data = seriesOpt.data;\n      if (data && !isTypedArray(data)) {\n        for (var i = 0; i < data.length; i++) {\n          compatPieLabel(data[i]);\n        }\n      }\n      if (seriesOpt.hoverOffset != null) {\n        seriesOpt.emphasis = seriesOpt.emphasis || {};\n        if (seriesOpt.emphasis.scaleSize = null) {\n          if (process.env.NODE_ENV !== 'production') {\n            deprecateReplaceLog('hoverOffset', 'emphasis.scaleSize');\n          }\n          seriesOpt.emphasis.scaleSize = seriesOpt.hoverOffset;\n        }\n      }\n    } else if (seriesType === 'gauge') {\n      var pointerColor = get(seriesOpt, 'pointer.color');\n      pointerColor != null && set(seriesOpt, 'itemStyle.color', pointerColor);\n    } else if (seriesType === 'bar') {\n      compatBarItemStyle(seriesOpt);\n      compatBarItemStyle(seriesOpt.backgroundStyle);\n      compatBarItemStyle(seriesOpt.emphasis);\n      var data = seriesOpt.data;\n      if (data && !isTypedArray(data)) {\n        for (var i = 0; i < data.length; i++) {\n          if (typeof data[i] === 'object') {\n            compatBarItemStyle(data[i]);\n            compatBarItemStyle(data[i] && data[i].emphasis);\n          }\n        }\n      }\n    } else if (seriesType === 'sunburst') {\n      var highlightPolicy = seriesOpt.highlightPolicy;\n      if (highlightPolicy) {\n        seriesOpt.emphasis = seriesOpt.emphasis || {};\n        if (!seriesOpt.emphasis.focus) {\n          seriesOpt.emphasis.focus = highlightPolicy;\n          if (process.env.NODE_ENV !== 'production') {\n            deprecateReplaceLog('highlightPolicy', 'emphasis.focus', 'sunburst');\n          }\n        }\n      }\n      compatSunburstState(seriesOpt);\n      traverseTree(seriesOpt.data, compatSunburstState);\n    } else if (seriesType === 'graph' || seriesType === 'sankey') {\n      compatGraphFocus(seriesOpt);\n      // TODO nodes, edges?\n    } else if (seriesType === 'map') {\n      if (seriesOpt.mapType && !seriesOpt.map) {\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateReplaceLog('mapType', 'map', 'map');\n        }\n        seriesOpt.map = seriesOpt.mapType;\n      }\n      if (seriesOpt.mapLocation) {\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateLog('`mapLocation` is not used anymore.');\n        }\n        defaults(seriesOpt, seriesOpt.mapLocation);\n      }\n    }\n    if (seriesOpt.hoverAnimation != null) {\n      seriesOpt.emphasis = seriesOpt.emphasis || {};\n      if (seriesOpt.emphasis && seriesOpt.emphasis.scale == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateReplaceLog('hoverAnimation', 'emphasis.scale');\n        }\n        seriesOpt.emphasis.scale = seriesOpt.hoverAnimation;\n      }\n    }\n    compatLayoutProperties(seriesOpt);\n  });\n  // dataRange has changed to visualMap\n  if (option.dataRange) {\n    option.visualMap = option.dataRange;\n  }\n  each(COMPATITABLE_COMPONENTS, function (componentName) {\n    var options = option[componentName];\n    if (options) {\n      if (!isArray(options)) {\n        options = [options];\n      }\n      each(options, function (option) {\n        compatLayoutProperties(option);\n      });\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createHashMap, each } from 'zrender/lib/core/util.js';\nimport { addSafe } from '../util/number.js';\n// (1) [Caution]: the logic is correct based on the premises:\n//     data processing stage is blocked in stream.\n//     See <module:echarts/stream/Scheduler#performDataProcessorTasks>\n// (2) Only register once when import repeatedly.\n//     Should be executed after series is filtered and before stack calculation.\nexport default function dataStack(ecModel) {\n  var stackInfoMap = createHashMap();\n  ecModel.eachSeries(function (seriesModel) {\n    var stack = seriesModel.get('stack');\n    // Compatible: when `stack` is set as '', do not stack.\n    if (stack) {\n      var stackInfoList = stackInfoMap.get(stack) || stackInfoMap.set(stack, []);\n      var data = seriesModel.getData();\n      var stackInfo = {\n        // Used for calculate axis extent automatically.\n        // TODO: Type getCalculationInfo return more specific type?\n        stackResultDimension: data.getCalculationInfo('stackResultDimension'),\n        stackedOverDimension: data.getCalculationInfo('stackedOverDimension'),\n        stackedDimension: data.getCalculationInfo('stackedDimension'),\n        stackedByDimension: data.getCalculationInfo('stackedByDimension'),\n        isStackedByIndex: data.getCalculationInfo('isStackedByIndex'),\n        data: data,\n        seriesModel: seriesModel\n      };\n      // If stacked on axis that do not support data stack.\n      if (!stackInfo.stackedDimension || !(stackInfo.isStackedByIndex || stackInfo.stackedByDimension)) {\n        return;\n      }\n      stackInfoList.push(stackInfo);\n    }\n  });\n  // Process each stack group\n  stackInfoMap.each(function (stackInfoList) {\n    if (stackInfoList.length === 0) {\n      return;\n    }\n    // Check if stack order needs to be reversed\n    var firstSeries = stackInfoList[0].seriesModel;\n    var stackOrder = firstSeries.get('stackOrder') || 'seriesAsc';\n    if (stackOrder === 'seriesDesc') {\n      stackInfoList.reverse();\n    }\n    // Set stackedOnSeries for each series in the final order\n    each(stackInfoList, function (stackInfo, index) {\n      stackInfo.data.setCalculationInfo('stackedOnSeries', index > 0 ? stackInfoList[index - 1].seriesModel : null);\n    });\n    // Calculate stack values\n    calculateStack(stackInfoList);\n  });\n}\nfunction calculateStack(stackInfoList) {\n  each(stackInfoList, function (targetStackInfo, idxInStack) {\n    var resultVal = [];\n    var resultNaN = [NaN, NaN];\n    var dims = [targetStackInfo.stackResultDimension, targetStackInfo.stackedOverDimension];\n    var targetData = targetStackInfo.data;\n    var isStackedByIndex = targetStackInfo.isStackedByIndex;\n    var stackStrategy = targetStackInfo.seriesModel.get('stackStrategy') || 'samesign';\n    // Should not write on raw data, because stack series model list changes\n    // depending on legend selection.\n    targetData.modify(dims, function (v0, v1, dataIndex) {\n      var sum = targetData.get(targetStackInfo.stackedDimension, dataIndex);\n      // Consider `connectNulls` of line area, if value is NaN, stackedOver\n      // should also be NaN, to draw a appropriate belt area.\n      if (isNaN(sum)) {\n        return resultNaN;\n      }\n      var byValue;\n      var stackedDataRawIndex;\n      if (isStackedByIndex) {\n        stackedDataRawIndex = targetData.getRawIndex(dataIndex);\n      } else {\n        byValue = targetData.get(targetStackInfo.stackedByDimension, dataIndex);\n      }\n      // If stackOver is NaN, chart view will render point on value start.\n      var stackedOver = NaN;\n      for (var j = idxInStack - 1; j >= 0; j--) {\n        var stackInfo = stackInfoList[j];\n        // Has been optimized by inverted indices on `stackedByDimension`.\n        if (!isStackedByIndex) {\n          stackedDataRawIndex = stackInfo.data.rawIndexOf(stackInfo.stackedByDimension, byValue);\n        }\n        if (stackedDataRawIndex >= 0) {\n          var val = stackInfo.data.getByRawIndex(stackInfo.stackResultDimension, stackedDataRawIndex);\n          // Considering positive stack, negative stack and empty data\n          if (stackStrategy === 'all' // single stack group\n          || stackStrategy === 'positive' && val > 0 || stackStrategy === 'negative' && val < 0 || stackStrategy === 'samesign' && sum >= 0 && val > 0 // All positive stack\n          || stackStrategy === 'samesign' && sum <= 0 && val < 0 // All negative stack\n          ) {\n            // The sum has to be very small to be affected by the\n            // floating arithmetic problem. An incorrect result will probably\n            // cause axis min/max to be filtered incorrectly.\n            sum = addSafe(sum, val);\n            stackedOver = val;\n            break;\n          }\n        }\n      }\n      resultVal[0] = sum;\n      resultVal[1] = stackedOver;\n      return resultVal;\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport Group from 'zrender/lib/graphic/Group.js';\nimport * as componentUtil from '../util/component.js';\nimport * as clazzUtil from '../util/clazz.js';\nvar ComponentView = /** @class */function () {\n  function ComponentView() {\n    this.group = new Group();\n    this.uid = componentUtil.getUID('viewComponent');\n  }\n  ComponentView.prototype.init = function (ecModel, api) {};\n  ComponentView.prototype.render = function (model, ecModel, api, payload) {};\n  ComponentView.prototype.dispose = function (ecModel, api) {};\n  ComponentView.prototype.updateView = function (model, ecModel, api, payload) {\n    // Do nothing;\n  };\n  ComponentView.prototype.updateLayout = function (model, ecModel, api, payload) {\n    // Do nothing;\n  };\n  ComponentView.prototype.updateVisual = function (model, ecModel, api, payload) {\n    // Do nothing;\n  };\n  /**\n   * Hook for toggle blur target series.\n   * Can be used in marker for blur or leave blur the markers\n   */\n  ComponentView.prototype.toggleBlurSeries = function (seriesModels, isBlur, ecModel) {\n    // Do nothing;\n  };\n  /**\n   * Traverse the new rendered elements.\n   *\n   * It will traverse the new added element in progressive rendering.\n   * And traverse all in normal rendering.\n   */\n  ComponentView.prototype.eachRendered = function (cb) {\n    var group = this.group;\n    if (group) {\n      group.traverse(cb);\n    }\n  };\n  return ComponentView;\n}();\n;\nclazzUtil.enableClassExtend(ComponentView);\nclazzUtil.enableClassManagement(ComponentView);\nexport default ComponentView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isFunction, extend, createHashMap } from 'zrender/lib/core/util.js';\nimport makeStyleMapper from '../model/mixin/makeStyleMapper.js';\nimport { ITEM_STYLE_KEY_MAP } from '../model/mixin/itemStyle.js';\nimport { LINE_STYLE_KEY_MAP } from '../model/mixin/lineStyle.js';\nimport Model from '../model/Model.js';\nimport { makeInner } from '../util/model.js';\nvar inner = makeInner();\nvar defaultStyleMappers = {\n  itemStyle: makeStyleMapper(ITEM_STYLE_KEY_MAP, true),\n  lineStyle: makeStyleMapper(LINE_STYLE_KEY_MAP, true)\n};\nvar defaultColorKey = {\n  lineStyle: 'stroke',\n  itemStyle: 'fill'\n};\nfunction getStyleMapper(seriesModel, stylePath) {\n  var styleMapper = seriesModel.visualStyleMapper || defaultStyleMappers[stylePath];\n  if (!styleMapper) {\n    console.warn(\"Unknown style type '\" + stylePath + \"'.\");\n    return defaultStyleMappers.itemStyle;\n  }\n  return styleMapper;\n}\nfunction getDefaultColorKey(seriesModel, stylePath) {\n  // return defaultColorKey[stylePath] ||\n  var colorKey = seriesModel.visualDrawType || defaultColorKey[stylePath];\n  if (!colorKey) {\n    console.warn(\"Unknown style type '\" + stylePath + \"'.\");\n    return 'fill';\n  }\n  return colorKey;\n}\nvar seriesStyleTask = {\n  createOnAllSeries: true,\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    var stylePath = seriesModel.visualStyleAccessPath || 'itemStyle';\n    // Set in itemStyle\n    var styleModel = seriesModel.getModel(stylePath);\n    var getStyle = getStyleMapper(seriesModel, stylePath);\n    var globalStyle = getStyle(styleModel);\n    var decalOption = styleModel.getShallow('decal');\n    if (decalOption) {\n      data.setVisual('decal', decalOption);\n      decalOption.dirty = true;\n    }\n    // TODO\n    var colorKey = getDefaultColorKey(seriesModel, stylePath);\n    var color = globalStyle[colorKey];\n    // TODO style callback\n    var colorCallback = isFunction(color) ? color : null;\n    var hasAutoColor = globalStyle.fill === 'auto' || globalStyle.stroke === 'auto';\n    // Get from color palette by default.\n    if (!globalStyle[colorKey] || colorCallback || hasAutoColor) {\n      // Note: If some series has color specified (e.g., by itemStyle.color), we DO NOT\n      // make it effect palette. Because some scenarios users need to make some series\n      // transparent or as background, which should better not effect the palette.\n      var colorPalette = seriesModel.getColorFromPalette(\n      // TODO series count changed.\n      seriesModel.name, null, ecModel.getSeriesCount());\n      if (!globalStyle[colorKey]) {\n        globalStyle[colorKey] = colorPalette;\n        data.setVisual('colorFromPalette', true);\n      }\n      globalStyle.fill = globalStyle.fill === 'auto' || isFunction(globalStyle.fill) ? colorPalette : globalStyle.fill;\n      globalStyle.stroke = globalStyle.stroke === 'auto' || isFunction(globalStyle.stroke) ? colorPalette : globalStyle.stroke;\n    }\n    data.setVisual('style', globalStyle);\n    data.setVisual('drawType', colorKey);\n    // Only visible series has each data be visual encoded\n    if (!ecModel.isSeriesFiltered(seriesModel) && colorCallback) {\n      data.setVisual('colorFromPalette', false);\n      return {\n        dataEach: function (data, idx) {\n          var dataParams = seriesModel.getDataParams(idx);\n          var itemStyle = extend({}, globalStyle);\n          itemStyle[colorKey] = colorCallback(dataParams);\n          data.setItemVisual(idx, 'style', itemStyle);\n        }\n      };\n    }\n  }\n};\nvar sharedModel = new Model();\nvar dataStyleTask = {\n  createOnAllSeries: true,\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    if (seriesModel.ignoreStyleOnData || ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n    var data = seriesModel.getData();\n    var stylePath = seriesModel.visualStyleAccessPath || 'itemStyle';\n    // Set in itemStyle\n    var getStyle = getStyleMapper(seriesModel, stylePath);\n    var colorKey = data.getVisual('drawType');\n    return {\n      dataEach: data.hasItemOption ? function (data, idx) {\n        // Not use getItemModel for performance considuration\n        var rawItem = data.getRawDataItem(idx);\n        if (rawItem && rawItem[stylePath]) {\n          sharedModel.option = rawItem[stylePath];\n          var style = getStyle(sharedModel);\n          var existsStyle = data.ensureUniqueItemVisual(idx, 'style');\n          extend(existsStyle, style);\n          if (sharedModel.option.decal) {\n            data.setItemVisual(idx, 'decal', sharedModel.option.decal);\n            sharedModel.option.decal.dirty = true;\n          }\n          if (colorKey in style) {\n            data.setItemVisual(idx, 'colorFromPalette', false);\n          }\n        }\n      } : null\n    };\n  }\n};\n// Pick color from palette for the data which has not been set with color yet.\n// Note: do not support stream rendering. No such cases yet.\nvar dataColorPaletteTask = {\n  performRawSeries: true,\n  overallReset: function (ecModel) {\n    // Each type of series uses one scope.\n    // Pie and funnel are using different scopes.\n    var paletteScopeGroupByType = createHashMap();\n    ecModel.eachSeries(function (seriesModel) {\n      var colorBy = seriesModel.getColorBy();\n      if (seriesModel.isColorBySeries()) {\n        return;\n      }\n      var key = seriesModel.type + '-' + colorBy;\n      var colorScope = paletteScopeGroupByType.get(key);\n      if (!colorScope) {\n        colorScope = {};\n        paletteScopeGroupByType.set(key, colorScope);\n      }\n      inner(seriesModel).scope = colorScope;\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      if (seriesModel.isColorBySeries() || ecModel.isSeriesFiltered(seriesModel)) {\n        return;\n      }\n      var dataAll = seriesModel.getRawData();\n      var idxMap = {};\n      var data = seriesModel.getData();\n      var colorScope = inner(seriesModel).scope;\n      var stylePath = seriesModel.visualStyleAccessPath || 'itemStyle';\n      var colorKey = getDefaultColorKey(seriesModel, stylePath);\n      data.each(function (idx) {\n        var rawIdx = data.getRawIndex(idx);\n        idxMap[rawIdx] = idx;\n      });\n      // Iterate on data before filtered. To make sure color from palette can be\n      // Consistent when toggling legend.\n      dataAll.each(function (rawIdx) {\n        var idx = idxMap[rawIdx];\n        var fromPalette = data.getItemVisual(idx, 'colorFromPalette');\n        // Get color from palette for each data only when the color is inherited from series color, which is\n        // also picked from color palette. So following situation is not in the case:\n        // 1. series.itemStyle.color is set\n        // 2. color is encoded by visualMap\n        if (fromPalette) {\n          var itemStyle = data.ensureUniqueItemVisual(idx, 'style');\n          var name_1 = dataAll.getName(rawIdx) || rawIdx + '';\n          var dataCount = dataAll.count();\n          itemStyle[colorKey] = seriesModel.getColorFromPalette(name_1, colorScope, dataCount);\n        }\n      });\n    });\n  }\n};\nexport { seriesStyleTask, dataStyleTask, dataColorPaletteTask };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../util/graphic.js';\nimport tokens from '../visual/tokens.js';\nvar PI = Math.PI;\n/**\n * @param {module:echarts/ExtensionAPI} api\n * @param {Object} [opts]\n * @param {string} [opts.text]\n * @param {string} [opts.color]\n * @param {string} [opts.textColor]\n * @return {module:zrender/Element}\n */\nexport default function defaultLoading(api, opts) {\n  opts = opts || {};\n  zrUtil.defaults(opts, {\n    text: 'loading',\n    textColor: tokens.color.primary,\n    fontSize: 12,\n    fontWeight: 'normal',\n    fontStyle: 'normal',\n    fontFamily: 'sans-serif',\n    maskColor: 'rgba(255,255,255,0.8)',\n    showSpinner: true,\n    color: tokens.color.theme[0],\n    spinnerRadius: 10,\n    lineWidth: 5,\n    zlevel: 0\n  });\n  var group = new graphic.Group();\n  var mask = new graphic.Rect({\n    style: {\n      fill: opts.maskColor\n    },\n    zlevel: opts.zlevel,\n    z: 10000\n  });\n  group.add(mask);\n  var textContent = new graphic.Text({\n    style: {\n      text: opts.text,\n      fill: opts.textColor,\n      fontSize: opts.fontSize,\n      fontWeight: opts.fontWeight,\n      fontStyle: opts.fontStyle,\n      fontFamily: opts.fontFamily\n    },\n    zlevel: opts.zlevel,\n    z: 10001\n  });\n  var labelRect = new graphic.Rect({\n    style: {\n      fill: 'none'\n    },\n    textContent: textContent,\n    textConfig: {\n      position: 'right',\n      distance: 10\n    },\n    zlevel: opts.zlevel,\n    z: 10001\n  });\n  group.add(labelRect);\n  var arc;\n  if (opts.showSpinner) {\n    arc = new graphic.Arc({\n      shape: {\n        startAngle: -PI / 2,\n        endAngle: -PI / 2 + 0.1,\n        r: opts.spinnerRadius\n      },\n      style: {\n        stroke: opts.color,\n        lineCap: 'round',\n        lineWidth: opts.lineWidth\n      },\n      zlevel: opts.zlevel,\n      z: 10001\n    });\n    arc.animateShape(true).when(1000, {\n      endAngle: PI * 3 / 2\n    }).start('circularInOut');\n    arc.animateShape(true).when(1000, {\n      startAngle: PI * 3 / 2\n    }).delay(300).start('circularInOut');\n    group.add(arc);\n  }\n  // Inject resize\n  group.resize = function () {\n    var textWidth = textContent.getBoundingRect().width;\n    var r = opts.showSpinner ? opts.spinnerRadius : 0;\n    // cx = (containerWidth - arcDiameter - textDistance - textWidth) / 2\n    // textDistance needs to be calculated when both animation and text exist\n    var cx = (api.getWidth() - r * 2 - (opts.showSpinner && textWidth ? 10 : 0) - textWidth) / 2 - (opts.showSpinner && textWidth ? 0 : 5 + textWidth / 2)\n    // only show the text\n    + (opts.showSpinner ? 0 : textWidth / 2)\n    // only show the spinner\n    + (textWidth ? 0 : r);\n    var cy = api.getHeight() / 2;\n    opts.showSpinner && arc.setShape({\n      cx: cx,\n      cy: cy\n    });\n    labelRect.setShape({\n      x: cx - r,\n      y: cy - r,\n      width: r * 2,\n      height: r * 2\n    });\n    mask.setShape({\n      x: 0,\n      y: 0,\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n  };\n  group.resize();\n  return group;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, map, isFunction, createHashMap, noop, assert } from 'zrender/lib/core/util.js';\nimport { createTask } from './task.js';\nimport { getUID } from '../util/component.js';\nimport GlobalModel from '../model/Global.js';\nimport ExtensionAPI from './ExtensionAPI.js';\nimport { normalizeToArray } from '../util/model.js';\n;\nvar Scheduler = /** @class */function () {\n  function Scheduler(ecInstance, api, dataProcessorHandlers, visualHandlers) {\n    // key: handlerUID\n    this._stageTaskMap = createHashMap();\n    this.ecInstance = ecInstance;\n    this.api = api;\n    // Fix current processors in case that in some rear cases that\n    // processors might be registered after echarts instance created.\n    // Register processors incrementally for a echarts instance is\n    // not supported by this stream architecture.\n    dataProcessorHandlers = this._dataProcessorHandlers = dataProcessorHandlers.slice();\n    visualHandlers = this._visualHandlers = visualHandlers.slice();\n    this._allHandlers = dataProcessorHandlers.concat(visualHandlers);\n  }\n  Scheduler.prototype.restoreData = function (ecModel, payload) {\n    // TODO: Only restore needed series and components, but not all components.\n    // Currently `restoreData` of all of the series and component will be called.\n    // But some independent components like `title`, `legend`, `graphic`, `toolbox`,\n    // `tooltip`, `axisPointer`, etc, do not need series refresh when `setOption`,\n    // and some components like coordinate system, axes, dataZoom, visualMap only\n    // need their target series refresh.\n    // (1) If we are implementing this feature some day, we should consider these cases:\n    // if a data processor depends on a component (e.g., dataZoomProcessor depends\n    // on the settings of `dataZoom`), it should be re-performed if the component\n    // is modified by `setOption`.\n    // (2) If a processor depends on sevral series, speicified by its `getTargetSeries`,\n    // it should be re-performed when the result array of `getTargetSeries` changed.\n    // We use `dependencies` to cover these issues.\n    // (3) How to update target series when coordinate system related components modified.\n    // TODO: simply the dirty mechanism? Check whether only the case here can set tasks dirty,\n    // and this case all of the tasks will be set as dirty.\n    ecModel.restoreData(payload);\n    // Theoretically an overall task not only depends on each of its target series, but also\n    // depends on all of the series.\n    // The overall task is not in pipeline, and `ecModel.restoreData` only set pipeline tasks\n    // dirty. If `getTargetSeries` of an overall task returns nothing, we should also ensure\n    // that the overall task is set as dirty and to be performed, otherwise it probably cause\n    // state chaos. So we have to set dirty of all of the overall tasks manually, otherwise it\n    // probably cause state chaos (consider `dataZoomProcessor`).\n    this._stageTaskMap.each(function (taskRecord) {\n      var overallTask = taskRecord.overallTask;\n      overallTask && overallTask.dirty();\n    });\n  };\n  // If seriesModel provided, incremental threshold is check by series data.\n  Scheduler.prototype.getPerformArgs = function (task, isBlock) {\n    // For overall task\n    if (!task.__pipeline) {\n      return;\n    }\n    var pipeline = this._pipelineMap.get(task.__pipeline.id);\n    var pCtx = pipeline.context;\n    var incremental = !isBlock && pipeline.progressiveEnabled && (!pCtx || pCtx.progressiveRender) && task.__idxInPipeline > pipeline.blockIndex;\n    var step = incremental ? pipeline.step : null;\n    var modDataCount = pCtx && pCtx.modDataCount;\n    var modBy = modDataCount != null ? Math.ceil(modDataCount / step) : null;\n    return {\n      step: step,\n      modBy: modBy,\n      modDataCount: modDataCount\n    };\n  };\n  Scheduler.prototype.getPipeline = function (pipelineId) {\n    return this._pipelineMap.get(pipelineId);\n  };\n  /**\n   * Current, progressive rendering starts from visual and layout.\n   * Always detect render mode in the same stage, avoiding that incorrect\n   * detection caused by data filtering.\n   * Caution:\n   * `updateStreamModes` use `seriesModel.getData()`.\n   */\n  Scheduler.prototype.updateStreamModes = function (seriesModel, view) {\n    var pipeline = this._pipelineMap.get(seriesModel.uid);\n    var data = seriesModel.getData();\n    var dataLen = data.count();\n    // `progressiveRender` means that can render progressively in each\n    // animation frame. Note that some types of series do not provide\n    // `view.incrementalPrepareRender` but support `chart.appendData`. We\n    // use the term `incremental` but not `progressive` to describe the\n    // case that `chart.appendData`.\n    var progressiveRender = pipeline.progressiveEnabled && view.incrementalPrepareRender && dataLen >= pipeline.threshold;\n    var large = seriesModel.get('large') && dataLen >= seriesModel.get('largeThreshold');\n    // TODO: modDataCount should not updated if `appendData`, otherwise cause whole repaint.\n    // see `test/candlestick-large3.html`\n    var modDataCount = seriesModel.get('progressiveChunkMode') === 'mod' ? dataLen : null;\n    seriesModel.pipelineContext = pipeline.context = {\n      progressiveRender: progressiveRender,\n      modDataCount: modDataCount,\n      large: large\n    };\n  };\n  Scheduler.prototype.restorePipelines = function (ecModel) {\n    var scheduler = this;\n    var pipelineMap = scheduler._pipelineMap = createHashMap();\n    ecModel.eachSeries(function (seriesModel) {\n      var progressive = seriesModel.getProgressive();\n      var pipelineId = seriesModel.uid;\n      pipelineMap.set(pipelineId, {\n        id: pipelineId,\n        head: null,\n        tail: null,\n        threshold: seriesModel.getProgressiveThreshold(),\n        progressiveEnabled: progressive && !(seriesModel.preventIncremental && seriesModel.preventIncremental()),\n        blockIndex: -1,\n        step: Math.round(progressive || 700),\n        count: 0\n      });\n      scheduler._pipe(seriesModel, seriesModel.dataTask);\n    });\n  };\n  Scheduler.prototype.prepareStageTasks = function () {\n    var stageTaskMap = this._stageTaskMap;\n    var ecModel = this.api.getModel();\n    var api = this.api;\n    each(this._allHandlers, function (handler) {\n      var record = stageTaskMap.get(handler.uid) || stageTaskMap.set(handler.uid, {});\n      var errMsg = '';\n      if (process.env.NODE_ENV !== 'production') {\n        // Currently do not need to support to sepecify them both.\n        errMsg = '\"reset\" and \"overallReset\" must not be both specified.';\n      }\n      assert(!(handler.reset && handler.overallReset), errMsg);\n      handler.reset && this._createSeriesStageTask(handler, record, ecModel, api);\n      handler.overallReset && this._createOverallStageTask(handler, record, ecModel, api);\n    }, this);\n  };\n  Scheduler.prototype.prepareView = function (view, model, ecModel, api) {\n    var renderTask = view.renderTask;\n    var context = renderTask.context;\n    context.model = model;\n    context.ecModel = ecModel;\n    context.api = api;\n    renderTask.__block = !view.incrementalPrepareRender;\n    this._pipe(model, renderTask);\n  };\n  Scheduler.prototype.performDataProcessorTasks = function (ecModel, payload) {\n    // If we do not use `block` here, it should be considered when to update modes.\n    this._performStageTasks(this._dataProcessorHandlers, ecModel, payload, {\n      block: true\n    });\n  };\n  Scheduler.prototype.performVisualTasks = function (ecModel, payload, opt) {\n    this._performStageTasks(this._visualHandlers, ecModel, payload, opt);\n  };\n  Scheduler.prototype._performStageTasks = function (stageHandlers, ecModel, payload, opt) {\n    opt = opt || {};\n    var unfinished = false;\n    var scheduler = this;\n    each(stageHandlers, function (stageHandler, idx) {\n      if (opt.visualType && opt.visualType !== stageHandler.visualType) {\n        return;\n      }\n      var stageHandlerRecord = scheduler._stageTaskMap.get(stageHandler.uid);\n      var seriesTaskMap = stageHandlerRecord.seriesTaskMap;\n      var overallTask = stageHandlerRecord.overallTask;\n      if (overallTask) {\n        var overallNeedDirty_1;\n        var agentStubMap = overallTask.agentStubMap;\n        agentStubMap.each(function (stub) {\n          if (needSetDirty(opt, stub)) {\n            stub.dirty();\n            overallNeedDirty_1 = true;\n          }\n        });\n        overallNeedDirty_1 && overallTask.dirty();\n        scheduler.updatePayload(overallTask, payload);\n        var performArgs_1 = scheduler.getPerformArgs(overallTask, opt.block);\n        // Execute stubs firstly, which may set the overall task dirty,\n        // then execute the overall task. And stub will call seriesModel.setData,\n        // which ensures that in the overallTask seriesModel.getData() will not\n        // return incorrect data.\n        agentStubMap.each(function (stub) {\n          stub.perform(performArgs_1);\n        });\n        if (overallTask.perform(performArgs_1)) {\n          unfinished = true;\n        }\n      } else if (seriesTaskMap) {\n        seriesTaskMap.each(function (task, pipelineId) {\n          if (needSetDirty(opt, task)) {\n            task.dirty();\n          }\n          var performArgs = scheduler.getPerformArgs(task, opt.block);\n          // FIXME\n          // if intending to declare `performRawSeries` in handlers, only\n          // stream-independent (specifically, data item independent) operations can be\n          // performed. Because if a series is filtered, most of the tasks will not\n          // be performed. A stream-dependent operation probably cause wrong biz logic.\n          // Perhaps we should not provide a separate callback for this case instead\n          // of providing the config `performRawSeries`. The stream-dependent operations\n          // and stream-independent operations should better not be mixed.\n          performArgs.skip = !stageHandler.performRawSeries && ecModel.isSeriesFiltered(task.context.model);\n          scheduler.updatePayload(task, payload);\n          if (task.perform(performArgs)) {\n            unfinished = true;\n          }\n        });\n      }\n    });\n    function needSetDirty(opt, task) {\n      return opt.setDirty && (!opt.dirtyMap || opt.dirtyMap.get(task.__pipeline.id));\n    }\n    this.unfinished = unfinished || this.unfinished;\n  };\n  Scheduler.prototype.performSeriesTasks = function (ecModel) {\n    var unfinished;\n    ecModel.eachSeries(function (seriesModel) {\n      // Progress to the end for dataInit and dataRestore.\n      unfinished = seriesModel.dataTask.perform() || unfinished;\n    });\n    this.unfinished = unfinished || this.unfinished;\n  };\n  Scheduler.prototype.plan = function () {\n    // Travel pipelines, check block.\n    this._pipelineMap.each(function (pipeline) {\n      var task = pipeline.tail;\n      do {\n        if (task.__block) {\n          pipeline.blockIndex = task.__idxInPipeline;\n          break;\n        }\n        task = task.getUpstream();\n      } while (task);\n    });\n  };\n  Scheduler.prototype.updatePayload = function (task, payload) {\n    payload !== 'remain' && (task.context.payload = payload);\n  };\n  Scheduler.prototype._createSeriesStageTask = function (stageHandler, stageHandlerRecord, ecModel, api) {\n    var scheduler = this;\n    var oldSeriesTaskMap = stageHandlerRecord.seriesTaskMap;\n    // The count of stages are totally about only several dozen, so\n    // do not need to reuse the map.\n    var newSeriesTaskMap = stageHandlerRecord.seriesTaskMap = createHashMap();\n    var seriesType = stageHandler.seriesType;\n    var getTargetSeries = stageHandler.getTargetSeries;\n    // If a stageHandler should cover all series, `createOnAllSeries` should be declared mandatorily,\n    // to avoid some typo or abuse. Otherwise if an extension do not specify a `seriesType`,\n    // it works but it may cause other irrelevant charts blocked.\n    if (stageHandler.createOnAllSeries) {\n      ecModel.eachRawSeries(create);\n    } else if (seriesType) {\n      ecModel.eachRawSeriesByType(seriesType, create);\n    } else if (getTargetSeries) {\n      getTargetSeries(ecModel, api).each(create);\n    }\n    function create(seriesModel) {\n      var pipelineId = seriesModel.uid;\n      // Init tasks for each seriesModel only once.\n      // Reuse original task instance.\n      var task = newSeriesTaskMap.set(pipelineId, oldSeriesTaskMap && oldSeriesTaskMap.get(pipelineId) || createTask({\n        plan: seriesTaskPlan,\n        reset: seriesTaskReset,\n        count: seriesTaskCount\n      }));\n      task.context = {\n        model: seriesModel,\n        ecModel: ecModel,\n        api: api,\n        // PENDING: `useClearVisual` not used?\n        useClearVisual: stageHandler.isVisual && !stageHandler.isLayout,\n        plan: stageHandler.plan,\n        reset: stageHandler.reset,\n        scheduler: scheduler\n      };\n      scheduler._pipe(seriesModel, task);\n    }\n  };\n  Scheduler.prototype._createOverallStageTask = function (stageHandler, stageHandlerRecord, ecModel, api) {\n    var scheduler = this;\n    var overallTask = stageHandlerRecord.overallTask = stageHandlerRecord.overallTask\n    // For overall task, the function only be called on reset stage.\n    || createTask({\n      reset: overallTaskReset\n    });\n    overallTask.context = {\n      ecModel: ecModel,\n      api: api,\n      overallReset: stageHandler.overallReset,\n      scheduler: scheduler\n    };\n    var oldAgentStubMap = overallTask.agentStubMap;\n    // The count of stages are totally about only several dozen, so\n    // do not need to reuse the map.\n    var newAgentStubMap = overallTask.agentStubMap = createHashMap();\n    var seriesType = stageHandler.seriesType;\n    var getTargetSeries = stageHandler.getTargetSeries;\n    var overallProgress = true;\n    var shouldOverallTaskDirty = false;\n    // FIXME:TS never used, so comment it\n    // let modifyOutputEnd = stageHandler.modifyOutputEnd;\n    // An overall task with seriesType detected or has `getTargetSeries`, we add\n    // stub in each pipelines, it will set the overall task dirty when the pipeline\n    // progress. Moreover, to avoid call the overall task each frame (too frequent),\n    // we set the pipeline block.\n    var errMsg = '';\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = '\"createOnAllSeries\" is not supported for \"overallReset\", ' + 'because it will block all streams.';\n    }\n    assert(!stageHandler.createOnAllSeries, errMsg);\n    if (seriesType) {\n      ecModel.eachRawSeriesByType(seriesType, createStub);\n    } else if (getTargetSeries) {\n      getTargetSeries(ecModel, api).each(createStub);\n    }\n    // Otherwise, (usually it is legacy case), the overall task will only be\n    // executed when upstream is dirty. Otherwise the progressive rendering of all\n    // pipelines will be disabled unexpectedly. But it still needs stubs to receive\n    // dirty info from upstream.\n    else {\n      overallProgress = false;\n      each(ecModel.getSeries(), createStub);\n    }\n    function createStub(seriesModel) {\n      var pipelineId = seriesModel.uid;\n      var stub = newAgentStubMap.set(pipelineId, oldAgentStubMap && oldAgentStubMap.get(pipelineId) || (\n      // When the result of `getTargetSeries` changed, the overallTask\n      // should be set as dirty and re-performed.\n      shouldOverallTaskDirty = true, createTask({\n        reset: stubReset,\n        onDirty: stubOnDirty\n      })));\n      stub.context = {\n        model: seriesModel,\n        overallProgress: overallProgress\n        // FIXME:TS never used, so comment it\n        // modifyOutputEnd: modifyOutputEnd\n      };\n      stub.agent = overallTask;\n      stub.__block = overallProgress;\n      scheduler._pipe(seriesModel, stub);\n    }\n    if (shouldOverallTaskDirty) {\n      overallTask.dirty();\n    }\n  };\n  Scheduler.prototype._pipe = function (seriesModel, task) {\n    var pipelineId = seriesModel.uid;\n    var pipeline = this._pipelineMap.get(pipelineId);\n    !pipeline.head && (pipeline.head = task);\n    pipeline.tail && pipeline.tail.pipe(task);\n    pipeline.tail = task;\n    task.__idxInPipeline = pipeline.count++;\n    task.__pipeline = pipeline;\n  };\n  Scheduler.wrapStageHandler = function (stageHandler, visualType) {\n    if (isFunction(stageHandler)) {\n      stageHandler = {\n        overallReset: stageHandler,\n        seriesType: detectSeriseType(stageHandler)\n      };\n    }\n    stageHandler.uid = getUID('stageHandler');\n    visualType && (stageHandler.visualType = visualType);\n    return stageHandler;\n  };\n  ;\n  return Scheduler;\n}();\nfunction overallTaskReset(context) {\n  context.overallReset(context.ecModel, context.api, context.payload);\n}\nfunction stubReset(context) {\n  return context.overallProgress && stubProgress;\n}\nfunction stubProgress() {\n  this.agent.dirty();\n  this.getDownstream().dirty();\n}\nfunction stubOnDirty() {\n  this.agent && this.agent.dirty();\n}\nfunction seriesTaskPlan(context) {\n  return context.plan ? context.plan(context.model, context.ecModel, context.api, context.payload) : null;\n}\nfunction seriesTaskReset(context) {\n  if (context.useClearVisual) {\n    context.data.clearAllVisual();\n  }\n  var resetDefines = context.resetDefines = normalizeToArray(context.reset(context.model, context.ecModel, context.api, context.payload));\n  return resetDefines.length > 1 ? map(resetDefines, function (v, idx) {\n    return makeSeriesTaskProgress(idx);\n  }) : singleSeriesTaskProgress;\n}\nvar singleSeriesTaskProgress = makeSeriesTaskProgress(0);\nfunction makeSeriesTaskProgress(resetDefineIdx) {\n  return function (params, context) {\n    var data = context.data;\n    var resetDefine = context.resetDefines[resetDefineIdx];\n    if (resetDefine && resetDefine.dataEach) {\n      for (var i = params.start; i < params.end; i++) {\n        resetDefine.dataEach(data, i);\n      }\n    } else if (resetDefine && resetDefine.progress) {\n      resetDefine.progress(params, data);\n    }\n  };\n}\nfunction seriesTaskCount(context) {\n  return context.data.count();\n}\n/**\n * Only some legacy stage handlers (usually in echarts extensions) are pure function.\n * To ensure that they can work normally, they should work in block mode, that is,\n * they should not be started util the previous tasks finished. So they cause the\n * progressive rendering disabled. We try to detect the series type, to narrow down\n * the block range to only the series type they concern, but not all series.\n */\nfunction detectSeriseType(legacyFunc) {\n  seriesType = null;\n  try {\n    // Assume there is no async when calling `eachSeriesByType`.\n    legacyFunc(ecModelMock, apiMock);\n  } catch (e) {}\n  return seriesType;\n}\nvar ecModelMock = {};\nvar apiMock = {};\nvar seriesType;\nmockMethods(ecModelMock, GlobalModel);\nmockMethods(apiMock, ExtensionAPI);\necModelMock.eachSeriesByType = ecModelMock.eachRawSeriesByType = function (type) {\n  seriesType = type;\n};\necModelMock.eachComponent = function (cond) {\n  if (cond.mainType === 'series' && cond.subType) {\n    seriesType = cond.subType;\n  }\n};\nfunction mockMethods(target, Clz) {\n  /* eslint-disable */\n  for (var name_1 in Clz.prototype) {\n    // Do not use hasOwnProperty\n    target[name_1] = noop;\n  }\n  /* eslint-enable */\n}\nexport default Scheduler;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport tokens from '../visual/tokens.js';\nvar color = tokens.darkColor;\nvar backgroundColor = color.background;\nvar axisCommon = function () {\n  return {\n    axisLine: {\n      lineStyle: {\n        color: color.axisLine\n      }\n    },\n    splitLine: {\n      lineStyle: {\n        color: color.axisSplitLine\n      }\n    },\n    splitArea: {\n      areaStyle: {\n        color: [color.backgroundTint, color.backgroundTransparent]\n      }\n    },\n    minorSplitLine: {\n      lineStyle: {\n        color: color.axisMinorSplitLine\n      }\n    },\n    axisLabel: {\n      color: color.axisLabel\n    },\n    axisName: {}\n  };\n};\nvar matrixAxis = {\n  label: {\n    color: color.secondary\n  },\n  itemStyle: {\n    borderColor: color.borderTint\n  },\n  dividerLineStyle: {\n    color: color.border\n  }\n};\nvar theme = {\n  darkMode: true,\n  color: color.theme,\n  backgroundColor: backgroundColor,\n  axisPointer: {\n    lineStyle: {\n      color: color.border\n    },\n    crossStyle: {\n      color: color.borderShade\n    },\n    label: {\n      color: color.tertiary\n    }\n  },\n  legend: {\n    textStyle: {\n      color: color.secondary\n    },\n    pageTextStyle: {\n      color: color.tertiary\n    }\n  },\n  textStyle: {\n    color: color.secondary\n  },\n  title: {\n    textStyle: {\n      color: color.primary\n    },\n    subtextStyle: {\n      color: color.quaternary\n    }\n  },\n  toolbox: {\n    iconStyle: {\n      borderColor: color.accent50\n    }\n  },\n  tooltip: {\n    backgroundColor: color.neutral20,\n    defaultBorderColor: color.border,\n    textStyle: {\n      color: color.tertiary\n    }\n  },\n  dataZoom: {\n    borderColor: color.accent10,\n    textStyle: {\n      color: color.tertiary\n    },\n    brushStyle: {\n      color: color.backgroundTint\n    },\n    handleStyle: {\n      color: color.neutral00,\n      borderColor: color.accent20\n    },\n    moveHandleStyle: {\n      color: color.accent40\n    },\n    emphasis: {\n      handleStyle: {\n        borderColor: color.accent50\n      }\n    },\n    dataBackground: {\n      lineStyle: {\n        color: color.accent30\n      },\n      areaStyle: {\n        color: color.accent20\n      }\n    },\n    selectedDataBackground: {\n      lineStyle: {\n        color: color.accent50\n      },\n      areaStyle: {\n        color: color.accent30\n      }\n    }\n  },\n  visualMap: {\n    textStyle: {\n      color: color.secondary\n    },\n    handleStyle: {\n      borderColor: color.neutral30\n    }\n  },\n  timeline: {\n    lineStyle: {\n      color: color.accent10\n    },\n    label: {\n      color: color.tertiary\n    },\n    controlStyle: {\n      color: color.accent30,\n      borderColor: color.accent30\n    }\n  },\n  calendar: {\n    itemStyle: {\n      color: color.neutral00,\n      borderColor: color.neutral20\n    },\n    dayLabel: {\n      color: color.tertiary\n    },\n    monthLabel: {\n      color: color.secondary\n    },\n    yearLabel: {\n      color: color.secondary\n    }\n  },\n  matrix: {\n    x: matrixAxis,\n    y: matrixAxis,\n    backgroundColor: {\n      borderColor: color.axisLine\n    },\n    body: {\n      itemStyle: {\n        borderColor: color.borderTint\n      }\n    }\n  },\n  timeAxis: axisCommon(),\n  logAxis: axisCommon(),\n  valueAxis: axisCommon(),\n  categoryAxis: axisCommon(),\n  line: {\n    symbol: 'circle'\n  },\n  graph: {\n    color: color.theme\n  },\n  gauge: {\n    title: {\n      color: color.secondary\n    },\n    axisLine: {\n      lineStyle: {\n        color: [[1, color.neutral05]]\n      }\n    },\n    axisLabel: {\n      color: color.axisLabel\n    },\n    detail: {\n      color: color.primary\n    }\n  },\n  candlestick: {\n    itemStyle: {\n      color: '#f64e56',\n      color0: '#54ea92',\n      borderColor: '#f64e56',\n      borderColor0: '#54ea92'\n      // borderColor: '#ca2824',\n      // borderColor0: '#09a443'\n    }\n  },\n  funnel: {\n    itemStyle: {\n      borderColor: color.background\n    }\n  },\n  radar: function () {\n    var radar = axisCommon();\n    radar.axisName = {\n      color: color.axisLabel\n    };\n    radar.axisLine.lineStyle.color = color.neutral20;\n    return radar;\n  }(),\n  treemap: {\n    breadcrumb: {\n      itemStyle: {\n        color: color.neutral20,\n        textStyle: {\n          color: color.secondary\n        }\n      },\n      emphasis: {\n        itemStyle: {\n          color: color.neutral30\n        }\n      }\n    }\n  },\n  sunburst: {\n    itemStyle: {\n      borderColor: color.background\n    }\n  },\n  map: {\n    itemStyle: {\n      borderColor: color.border,\n      areaColor: color.neutral10\n    },\n    label: {\n      color: color.tertiary\n    },\n    emphasis: {\n      label: {\n        color: color.primary\n      },\n      itemStyle: {\n        areaColor: color.highlight\n      }\n    },\n    select: {\n      label: {\n        color: color.primary\n      },\n      itemStyle: {\n        areaColor: color.highlight\n      }\n    }\n  },\n  geo: {\n    itemStyle: {\n      borderColor: color.border,\n      areaColor: color.neutral10\n    },\n    emphasis: {\n      label: {\n        color: color.primary\n      },\n      itemStyle: {\n        areaColor: color.highlight\n      }\n    },\n    select: {\n      label: {\n        color: color.primary\n      },\n      itemStyle: {\n        color: color.highlight\n      }\n    }\n  }\n};\ntheme.categoryAxis.splitLine.show = false;\nexport default theme;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parseClassType } from './clazz.js';\n/**\n * Usage of query:\n * `chart.on('click', query, handler);`\n * The `query` can be:\n * + The component type query string, only `mainType` or `mainType.subType`,\n *   like: 'xAxis', 'series', 'xAxis.category' or 'series.line'.\n * + The component query object, like:\n *   `{seriesIndex: 2}`, `{seriesName: 'xx'}`, `{seriesId: 'some'}`,\n *   `{xAxisIndex: 2}`, `{xAxisName: 'xx'}`, `{xAxisId: 'some'}`.\n * + The data query object, like:\n *   `{dataIndex: 123}`, `{dataType: 'link'}`, `{name: 'some'}`.\n * + The other query object (cmponent customized query), like:\n *   `{element: 'some'}` (only available in custom series).\n *\n * Caveat: If a prop in the `query` object is `null/undefined`, it is the\n * same as there is no such prop in the `query` object.\n */\nvar ECEventProcessor = /** @class */function () {\n  function ECEventProcessor() {}\n  ECEventProcessor.prototype.normalizeQuery = function (query) {\n    var cptQuery = {};\n    var dataQuery = {};\n    var otherQuery = {};\n    // `query` is `mainType` or `mainType.subType` of component.\n    if (zrUtil.isString(query)) {\n      var condCptType = parseClassType(query);\n      // `.main` and `.sub` may be ''.\n      cptQuery.mainType = condCptType.main || null;\n      cptQuery.subType = condCptType.sub || null;\n    }\n    // `query` is an object, convert to {mainType, index, name, id}.\n    else {\n      // `xxxIndex`, `xxxName`, `xxxId`, `name`, `dataIndex`, `dataType` is reserved,\n      // can not be used in `compomentModel.filterForExposedEvent`.\n      var suffixes_1 = ['Index', 'Name', 'Id'];\n      var dataKeys_1 = {\n        name: 1,\n        dataIndex: 1,\n        dataType: 1\n      };\n      zrUtil.each(query, function (val, key) {\n        var reserved = false;\n        for (var i = 0; i < suffixes_1.length; i++) {\n          var propSuffix = suffixes_1[i];\n          var suffixPos = key.lastIndexOf(propSuffix);\n          if (suffixPos > 0 && suffixPos === key.length - propSuffix.length) {\n            var mainType = key.slice(0, suffixPos);\n            // Consider `dataIndex`.\n            if (mainType !== 'data') {\n              cptQuery.mainType = mainType;\n              cptQuery[propSuffix.toLowerCase()] = val;\n              reserved = true;\n            }\n          }\n        }\n        if (dataKeys_1.hasOwnProperty(key)) {\n          dataQuery[key] = val;\n          reserved = true;\n        }\n        if (!reserved) {\n          otherQuery[key] = val;\n        }\n      });\n    }\n    return {\n      cptQuery: cptQuery,\n      dataQuery: dataQuery,\n      otherQuery: otherQuery\n    };\n  };\n  ECEventProcessor.prototype.filter = function (eventType, query) {\n    // They should be assigned before each trigger call.\n    var eventInfo = this.eventInfo;\n    if (!eventInfo) {\n      return true;\n    }\n    var targetEl = eventInfo.targetEl;\n    var packedEvent = eventInfo.packedEvent;\n    var model = eventInfo.model;\n    var view = eventInfo.view;\n    // For event like 'globalout'.\n    if (!model || !view) {\n      return true;\n    }\n    var cptQuery = query.cptQuery;\n    var dataQuery = query.dataQuery;\n    return check(cptQuery, model, 'mainType') && check(cptQuery, model, 'subType') && check(cptQuery, model, 'index', 'componentIndex') && check(cptQuery, model, 'name') && check(cptQuery, model, 'id') && check(dataQuery, packedEvent, 'name') && check(dataQuery, packedEvent, 'dataIndex') && check(dataQuery, packedEvent, 'dataType') && (!view.filterForExposedEvent || view.filterForExposedEvent(eventType, query.otherQuery, targetEl, packedEvent));\n    function check(query, host, prop, propOnHost) {\n      return query[prop] == null || host[propOnHost || prop] === query[prop];\n    }\n  };\n  ECEventProcessor.prototype.afterTrigger = function () {\n    // Make sure the eventInfo won't be used in next trigger.\n    this.eventInfo = null;\n  };\n  return ECEventProcessor;\n}();\nexport { ECEventProcessor };\n;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend, isFunction, keys } from 'zrender/lib/core/util.js';\nvar SYMBOL_PROPS_WITH_CB = ['symbol', 'symbolSize', 'symbolRotate', 'symbolOffset'];\nvar SYMBOL_PROPS = SYMBOL_PROPS_WITH_CB.concat(['symbolKeepAspect']);\n// Encoding visual for all series include which is filtered for legend drawing\nvar seriesSymbolTask = {\n  createOnAllSeries: true,\n  // For legend.\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    if (seriesModel.legendIcon) {\n      data.setVisual('legendIcon', seriesModel.legendIcon);\n    }\n    if (!seriesModel.hasSymbolVisual) {\n      return;\n    }\n    var symbolOptions = {};\n    var symbolOptionsCb = {};\n    var hasCallback = false;\n    for (var i = 0; i < SYMBOL_PROPS_WITH_CB.length; i++) {\n      var symbolPropName = SYMBOL_PROPS_WITH_CB[i];\n      var val = seriesModel.get(symbolPropName);\n      if (isFunction(val)) {\n        hasCallback = true;\n        symbolOptionsCb[symbolPropName] = val;\n      } else {\n        symbolOptions[symbolPropName] = val;\n      }\n    }\n    symbolOptions.symbol = symbolOptions.symbol || seriesModel.defaultSymbol;\n    data.setVisual(extend({\n      legendIcon: seriesModel.legendIcon || symbolOptions.symbol,\n      symbolKeepAspect: seriesModel.get('symbolKeepAspect')\n    }, symbolOptions));\n    // Only visible series has each data be visual encoded\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n    var symbolPropsCb = keys(symbolOptionsCb);\n    function dataEach(data, idx) {\n      var rawValue = seriesModel.getRawValue(idx);\n      var params = seriesModel.getDataParams(idx);\n      for (var i = 0; i < symbolPropsCb.length; i++) {\n        var symbolPropName = symbolPropsCb[i];\n        data.setItemVisual(idx, symbolPropName, symbolOptionsCb[symbolPropName](rawValue, params));\n      }\n    }\n    return {\n      dataEach: hasCallback ? dataEach : null\n    };\n  }\n};\nvar dataSymbolTask = {\n  createOnAllSeries: true,\n  // For legend.\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    if (!seriesModel.hasSymbolVisual) {\n      return;\n    }\n    // Only visible series has each data be visual encoded\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n    var data = seriesModel.getData();\n    function dataEach(data, idx) {\n      var itemModel = data.getItemModel(idx);\n      for (var i = 0; i < SYMBOL_PROPS.length; i++) {\n        var symbolPropName = SYMBOL_PROPS[i];\n        var val = itemModel.getShallow(symbolPropName, true);\n        if (val != null) {\n          data.setItemVisual(idx, symbolPropName, val);\n        }\n      }\n    }\n    return {\n      dataEach: data.hasItemOption ? dataEach : null\n    };\n  }\n};\nexport { seriesSymbolTask, dataSymbolTask };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport function getItemVisualFromData(data, dataIndex, key) {\n  switch (key) {\n    case 'color':\n      var style = data.getItemVisual(dataIndex, 'style');\n      return style[data.getVisual('drawType')];\n    case 'opacity':\n      return data.getItemVisual(dataIndex, 'style').opacity;\n    case 'symbol':\n    case 'symbolSize':\n    case 'liftZ':\n      return data.getItemVisual(dataIndex, key);\n    default:\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn(\"Unknown visual type \" + key);\n      }\n  }\n}\nexport function getVisualFromData(data, key) {\n  switch (key) {\n    case 'color':\n      var style = data.getVisual('style');\n      return style[data.getVisual('drawType')];\n    case 'opacity':\n      return data.getVisual('style').opacity;\n    case 'symbol':\n    case 'symbolSize':\n    case 'liftZ':\n      return data.getVisual(key);\n    default:\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn(\"Unknown visual type \" + key);\n      }\n  }\n}\nexport function setItemVisualFromData(data, dataIndex, key, value) {\n  switch (key) {\n    case 'color':\n      // Make sure not sharing style object.\n      var style = data.ensureUniqueItemVisual(dataIndex, 'style');\n      style[data.getVisual('drawType')] = value;\n      // Mark the color has been changed, not from palette anymore\n      data.setItemVisual(dataIndex, 'colorFromPalette', false);\n      break;\n    case 'opacity':\n      data.ensureUniqueItemVisual(dataIndex, 'style').opacity = value;\n      break;\n    case 'symbol':\n    case 'symbolSize':\n    case 'liftZ':\n      data.setItemVisual(dataIndex, key, value);\n      break;\n    default:\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn(\"Unknown visual type \" + key);\n      }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport function findEventDispatcher(target, det, returnFirstMatch) {\n  var found;\n  while (target) {\n    if (det(target)) {\n      found = target;\n      if (returnFirstMatch) {\n        break;\n      }\n    }\n    target = target.__hostTarget || target.parent;\n  }\n  return found;\n}","var wmUniqueIndex = Math.round(Math.random() * 9);\nvar supportDefineProperty = typeof Object.defineProperty === 'function';\nvar WeakMap = (function () {\n    function WeakMap() {\n        this._id = '__ec_inner_' + wmUniqueIndex++;\n    }\n    WeakMap.prototype.get = function (key) {\n        return this._guard(key)[this._id];\n    };\n    WeakMap.prototype.set = function (key, value) {\n        var target = this._guard(key);\n        if (supportDefineProperty) {\n            Object.defineProperty(target, this._id, {\n                value: value,\n                enumerable: false,\n                configurable: true\n            });\n        }\n        else {\n            target[this._id] = value;\n        }\n        return this;\n    };\n    WeakMap.prototype[\"delete\"] = function (key) {\n        if (this.has(key)) {\n            delete this._guard(key)[this._id];\n            return true;\n        }\n        return false;\n    };\n    WeakMap.prototype.has = function (key) {\n        return !!this._guard(key)[this._id];\n    };\n    WeakMap.prototype._guard = function (key) {\n        if (key !== Object(key)) {\n            throw TypeError('Value of WeakMap is not a non-null object.');\n        }\n        return key;\n    };\n    return WeakMap;\n}());\nexport default WeakMap;\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport WeakMap from 'zrender/lib/core/WeakMap.js';\nimport LRU from 'zrender/lib/core/LRU.js';\nimport { defaults, map, isArray, isString, isNumber } from 'zrender/lib/core/util.js';\nimport { getLeastCommonMultiple } from './number.js';\nimport { createSymbol } from './symbol.js';\nimport { brushSingle } from 'zrender/lib/canvas/graphic.js';\nimport { platformApi } from 'zrender/lib/core/platform.js';\nvar decalMap = new WeakMap();\nvar decalCache = new LRU(100);\nvar decalKeys = ['symbol', 'symbolSize', 'symbolKeepAspect', 'color', 'backgroundColor', 'dashArrayX', 'dashArrayY', 'maxTileWidth', 'maxTileHeight'];\n/**\n * Create or update pattern image from decal options\n *\n * @param {InnerDecalObject | 'none'} decalObject decal options, 'none' if no decal\n * @return {Pattern} pattern with generated image, null if no decal\n */\nexport function createOrUpdatePatternFromDecal(decalObject, api) {\n  if (decalObject === 'none') {\n    return null;\n  }\n  var dpr = api.getDevicePixelRatio();\n  var zr = api.getZr();\n  var isSVG = zr.painter.type === 'svg';\n  if (decalObject.dirty) {\n    decalMap[\"delete\"](decalObject);\n  }\n  var oldPattern = decalMap.get(decalObject);\n  if (oldPattern) {\n    return oldPattern;\n  }\n  var decalOpt = defaults(decalObject, {\n    symbol: 'rect',\n    symbolSize: 1,\n    symbolKeepAspect: true,\n    color: 'rgba(0, 0, 0, 0.2)',\n    backgroundColor: null,\n    dashArrayX: 5,\n    dashArrayY: 5,\n    rotation: 0,\n    maxTileWidth: 512,\n    maxTileHeight: 512\n  });\n  if (decalOpt.backgroundColor === 'none') {\n    decalOpt.backgroundColor = null;\n  }\n  var pattern = {\n    repeat: 'repeat'\n  };\n  setPatternnSource(pattern);\n  pattern.rotation = decalOpt.rotation;\n  pattern.scaleX = pattern.scaleY = isSVG ? 1 : 1 / dpr;\n  decalMap.set(decalObject, pattern);\n  decalObject.dirty = false;\n  return pattern;\n  function setPatternnSource(pattern) {\n    var keys = [dpr];\n    var isValidKey = true;\n    for (var i = 0; i < decalKeys.length; ++i) {\n      var value = decalOpt[decalKeys[i]];\n      if (value != null && !isArray(value) && !isString(value) && !isNumber(value) && typeof value !== 'boolean') {\n        isValidKey = false;\n        break;\n      }\n      keys.push(value);\n    }\n    var cacheKey;\n    if (isValidKey) {\n      cacheKey = keys.join(',') + (isSVG ? '-svg' : '');\n      var cache = decalCache.get(cacheKey);\n      if (cache) {\n        isSVG ? pattern.svgElement = cache : pattern.image = cache;\n      }\n    }\n    var dashArrayX = normalizeDashArrayX(decalOpt.dashArrayX);\n    var dashArrayY = normalizeDashArrayY(decalOpt.dashArrayY);\n    var symbolArray = normalizeSymbolArray(decalOpt.symbol);\n    var lineBlockLengthsX = getLineBlockLengthX(dashArrayX);\n    var lineBlockLengthY = getLineBlockLengthY(dashArrayY);\n    var canvas = !isSVG && platformApi.createCanvas();\n    var svgRoot = isSVG && {\n      tag: 'g',\n      attrs: {},\n      key: 'dcl',\n      children: []\n    };\n    var pSize = getPatternSize();\n    var ctx;\n    if (canvas) {\n      canvas.width = pSize.width * dpr;\n      canvas.height = pSize.height * dpr;\n      ctx = canvas.getContext('2d');\n    }\n    brushDecal();\n    if (isValidKey) {\n      decalCache.put(cacheKey, canvas || svgRoot);\n    }\n    pattern.image = canvas;\n    pattern.svgElement = svgRoot;\n    pattern.svgWidth = pSize.width;\n    pattern.svgHeight = pSize.height;\n    /**\n     * Get minimum length that can make a repeatable pattern.\n     *\n     * @return {Object} pattern width and height\n     */\n    function getPatternSize() {\n      /**\n       * For example, if dash is [[3, 2], [2, 1]] for X, it looks like\n       * |---  ---  ---  ---  --- ...\n       * |-- -- -- -- -- -- -- -- ...\n       * |---  ---  ---  ---  --- ...\n       * |-- -- -- -- -- -- -- -- ...\n       * So the minimum length of X is 15,\n       * which is the least common multiple of `3 + 2` and `2 + 1`\n       * |---  ---  ---  |---  --- ...\n       * |-- -- -- -- -- |-- -- -- ...\n       */\n      var width = 1;\n      for (var i = 0, xlen = lineBlockLengthsX.length; i < xlen; ++i) {\n        width = getLeastCommonMultiple(width, lineBlockLengthsX[i]);\n      }\n      var symbolRepeats = 1;\n      for (var i = 0, xlen = symbolArray.length; i < xlen; ++i) {\n        symbolRepeats = getLeastCommonMultiple(symbolRepeats, symbolArray[i].length);\n      }\n      width *= symbolRepeats;\n      var height = lineBlockLengthY * lineBlockLengthsX.length * symbolArray.length;\n      if (process.env.NODE_ENV !== 'production') {\n        var warn = function (attrName) {\n          /* eslint-disable-next-line */\n          console.warn(\"Calculated decal size is greater than \" + attrName + \" due to decal option settings so \" + attrName + \" is used for the decal size. Please consider changing the decal option to make a smaller decal or set \" + attrName + \" to be larger to avoid incontinuity.\");\n        };\n        if (width > decalOpt.maxTileWidth) {\n          warn('maxTileWidth');\n        }\n        if (height > decalOpt.maxTileHeight) {\n          warn('maxTileHeight');\n        }\n      }\n      return {\n        width: Math.max(1, Math.min(width, decalOpt.maxTileWidth)),\n        height: Math.max(1, Math.min(height, decalOpt.maxTileHeight))\n      };\n    }\n    function brushDecal() {\n      if (ctx) {\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        if (decalOpt.backgroundColor) {\n          ctx.fillStyle = decalOpt.backgroundColor;\n          ctx.fillRect(0, 0, canvas.width, canvas.height);\n        }\n      }\n      var ySum = 0;\n      for (var i = 0; i < dashArrayY.length; ++i) {\n        ySum += dashArrayY[i];\n      }\n      if (ySum <= 0) {\n        // dashArrayY is 0, draw nothing\n        return;\n      }\n      var y = -lineBlockLengthY;\n      var yId = 0;\n      var yIdTotal = 0;\n      var xId0 = 0;\n      while (y < pSize.height) {\n        if (yId % 2 === 0) {\n          var symbolYId = yIdTotal / 2 % symbolArray.length;\n          var x = 0;\n          var xId1 = 0;\n          var xId1Total = 0;\n          while (x < pSize.width * 2) {\n            var xSum = 0;\n            for (var i = 0; i < dashArrayX[xId0].length; ++i) {\n              xSum += dashArrayX[xId0][i];\n            }\n            if (xSum <= 0) {\n              // Skip empty line\n              break;\n            }\n            // E.g., [15, 5, 20, 5] draws only for 15 and 20\n            if (xId1 % 2 === 0) {\n              var size = (1 - decalOpt.symbolSize) * 0.5;\n              var left = x + dashArrayX[xId0][xId1] * size;\n              var top_1 = y + dashArrayY[yId] * size;\n              var width = dashArrayX[xId0][xId1] * decalOpt.symbolSize;\n              var height = dashArrayY[yId] * decalOpt.symbolSize;\n              var symbolXId = xId1Total / 2 % symbolArray[symbolYId].length;\n              brushSymbol(left, top_1, width, height, symbolArray[symbolYId][symbolXId]);\n            }\n            x += dashArrayX[xId0][xId1];\n            ++xId1Total;\n            ++xId1;\n            if (xId1 === dashArrayX[xId0].length) {\n              xId1 = 0;\n            }\n          }\n          ++xId0;\n          if (xId0 === dashArrayX.length) {\n            xId0 = 0;\n          }\n        }\n        y += dashArrayY[yId];\n        ++yIdTotal;\n        ++yId;\n        if (yId === dashArrayY.length) {\n          yId = 0;\n        }\n      }\n      function brushSymbol(x, y, width, height, symbolType) {\n        var scale = isSVG ? 1 : dpr;\n        var symbol = createSymbol(symbolType, x * scale, y * scale, width * scale, height * scale, decalOpt.color, decalOpt.symbolKeepAspect);\n        if (isSVG) {\n          var symbolVNode = zr.painter.renderOneToVNode(symbol);\n          if (symbolVNode) {\n            svgRoot.children.push(symbolVNode);\n          }\n        } else {\n          // Paint to canvas for all other renderers.\n          brushSingle(ctx, symbol);\n        }\n      }\n    }\n  }\n}\n/**\n * Convert symbol array into normalized array\n *\n * @param {string | (string | string[])[]} symbol symbol input\n * @return {string[][]} normolized symbol array\n */\nfunction normalizeSymbolArray(symbol) {\n  if (!symbol || symbol.length === 0) {\n    return [['rect']];\n  }\n  if (isString(symbol)) {\n    return [[symbol]];\n  }\n  var isAllString = true;\n  for (var i = 0; i < symbol.length; ++i) {\n    if (!isString(symbol[i])) {\n      isAllString = false;\n      break;\n    }\n  }\n  if (isAllString) {\n    return normalizeSymbolArray([symbol]);\n  }\n  var result = [];\n  for (var i = 0; i < symbol.length; ++i) {\n    if (isString(symbol[i])) {\n      result.push([symbol[i]]);\n    } else {\n      result.push(symbol[i]);\n    }\n  }\n  return result;\n}\n/**\n * Convert dash input into dashArray\n *\n * @param {DecalDashArrayX} dash dash input\n * @return {number[][]} normolized dash array\n */\nfunction normalizeDashArrayX(dash) {\n  if (!dash || dash.length === 0) {\n    return [[0, 0]];\n  }\n  if (isNumber(dash)) {\n    var dashValue = Math.ceil(dash);\n    return [[dashValue, dashValue]];\n  }\n  /**\n   * [20, 5] should be normalized into [[20, 5]],\n   * while [20, [5, 10]] should be normalized into [[20, 20], [5, 10]]\n   */\n  var isAllNumber = true;\n  for (var i = 0; i < dash.length; ++i) {\n    if (!isNumber(dash[i])) {\n      isAllNumber = false;\n      break;\n    }\n  }\n  if (isAllNumber) {\n    return normalizeDashArrayX([dash]);\n  }\n  var result = [];\n  for (var i = 0; i < dash.length; ++i) {\n    if (isNumber(dash[i])) {\n      var dashValue = Math.ceil(dash[i]);\n      result.push([dashValue, dashValue]);\n    } else {\n      var dashValue = map(dash[i], function (n) {\n        return Math.ceil(n);\n      });\n      if (dashValue.length % 2 === 1) {\n        // [4, 2, 1] means |----  -    -- |----  -    -- |\n        // so normalize it to be [4, 2, 1, 4, 2, 1]\n        result.push(dashValue.concat(dashValue));\n      } else {\n        result.push(dashValue);\n      }\n    }\n  }\n  return result;\n}\n/**\n * Convert dash input into dashArray\n *\n * @param {DecalDashArrayY} dash dash input\n * @return {number[]} normolized dash array\n */\nfunction normalizeDashArrayY(dash) {\n  if (!dash || typeof dash === 'object' && dash.length === 0) {\n    return [0, 0];\n  }\n  if (isNumber(dash)) {\n    var dashValue_1 = Math.ceil(dash);\n    return [dashValue_1, dashValue_1];\n  }\n  var dashValue = map(dash, function (n) {\n    return Math.ceil(n);\n  });\n  return dash.length % 2 ? dashValue.concat(dashValue) : dashValue;\n}\n/**\n * Get block length of each line. A block is the length of dash line and space.\n * For example, a line with [4, 1] has a dash line of 4 and a space of 1 after\n * that, so the block length of this line is 5.\n *\n * @param {number[][]} dash dash array of X or Y\n * @return {number[]} block length of each line\n */\nfunction getLineBlockLengthX(dash) {\n  return map(dash, function (line) {\n    return getLineBlockLengthY(line);\n  });\n}\nfunction getLineBlockLengthY(dash) {\n  var blockLength = 0;\n  for (var i = 0; i < dash.length; ++i) {\n    blockLength += dash[i];\n  }\n  if (dash.length % 2 === 1) {\n    // [4, 2, 1] means |----  -    -- |----  -    -- |\n    // So total length is (4 + 2 + 1) * 2\n    return blockLength * 2;\n  }\n  return blockLength;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createOrUpdatePatternFromDecal } from '../util/decal.js';\nexport default function decalVisual(ecModel, api) {\n  ecModel.eachRawSeries(function (seriesModel) {\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n    var data = seriesModel.getData();\n    if (data.hasItemVisual()) {\n      data.each(function (idx) {\n        var decal = data.getItemVisual(idx, 'decal');\n        if (decal) {\n          var itemStyle = data.ensureUniqueItemVisual(idx, 'style');\n          itemStyle.decal = createOrUpdatePatternFromDecal(decal, api);\n        }\n      });\n    }\n    var decal = data.getVisual('decal');\n    if (decal) {\n      var style = data.getVisual('style');\n      style.decal = createOrUpdatePatternFromDecal(decal, api);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport Eventful from 'zrender/lib/core/Eventful.js';\n;\nvar lifecycle = new Eventful();\nexport default lifecycle;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { error } from '../util/log.js';\n// Implementation of exported APIs. For example registerMap, getMap.\n// The implementations will be registered when installing the component.\n// Avoid these code being bundled to the core module.\nvar implsStore = {};\n// TODO Type\nexport function registerImpl(name, impl) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (implsStore[name]) {\n      error(\"Already has an implementation of \" + name + \".\");\n    }\n  }\n  implsStore[name] = impl;\n}\nexport function getImpl(name) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (!implsStore[name]) {\n      error(\"Implementation of \" + name + \" doesn't exists.\");\n    }\n  }\n  return implsStore[name];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport { __extends } from \"tslib\";\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrender from 'zrender/lib/zrender.js';\nimport { assert, each, isFunction, isObject, indexOf, bind, clone, setAsPrimitive, extend, createHashMap, map, defaults, isDom, isArray, noop, isString, retrieve2 } from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport timsort from 'zrender/lib/core/timsort.js';\nimport Eventful from 'zrender/lib/core/Eventful.js';\nimport GlobalModel from '../model/Global.js';\nimport ExtensionAPI from './ExtensionAPI.js';\nimport CoordinateSystemManager from './CoordinateSystem.js';\nimport OptionManager from '../model/OptionManager.js';\nimport backwardCompat from '../preprocessor/backwardCompat.js';\nimport dataStack from '../processor/dataStack.js';\nimport SeriesModel from '../model/Series.js';\nimport ComponentView from '../view/Component.js';\nimport ChartView from '../view/Chart.js';\nimport * as graphic from '../util/graphic.js';\nimport { getECData } from '../util/innerStore.js';\nimport { isHighDownDispatcher, HOVER_STATE_EMPHASIS, HOVER_STATE_BLUR, blurSeriesFromHighlightPayload, toggleSelectionFromPayload, updateSeriesElementSelection, getAllSelectedIndices, isSelectChangePayload, isHighDownPayload, HIGHLIGHT_ACTION_TYPE, DOWNPLAY_ACTION_TYPE, SELECT_ACTION_TYPE, UNSELECT_ACTION_TYPE, TOGGLE_SELECT_ACTION_TYPE, savePathStates, enterEmphasis, leaveEmphasis, leaveBlur, enterSelect, leaveSelect, enterBlur, allLeaveBlur, findComponentHighDownDispatchers, blurComponent, handleGlobalMouseOverForHighDown, handleGlobalMouseOutForHighDown, SELECT_CHANGED_EVENT_TYPE } from '../util/states.js';\nimport * as modelUtil from '../util/model.js';\nimport { throttle } from '../util/throttle.js';\nimport { seriesStyleTask, dataStyleTask, dataColorPaletteTask } from '../visual/style.js';\nimport loadingDefault from '../loading/default.js';\nimport Scheduler from './Scheduler.js';\nimport darkTheme from '../theme/dark.js';\nimport { parseClassType } from '../util/clazz.js';\nimport { ECEventProcessor } from '../util/ECEventProcessor.js';\nimport { seriesSymbolTask, dataSymbolTask } from '../visual/symbol.js';\nimport { getVisualFromData, getItemVisualFromData } from '../visual/helper.js';\nimport { deprecateLog, deprecateReplaceLog, error, warn } from '../util/log.js';\nimport { handleLegacySelectEvents } from '../legacy/dataSelectAction.js';\nimport { registerExternalTransform } from '../data/helper/transform.js';\nimport { createLocaleObject, SYSTEM_LANG } from './locale.js';\nimport { findEventDispatcher } from '../util/event.js';\nimport decal from '../visual/decal.js';\nimport lifecycle from './lifecycle.js';\nimport { platformApi, setPlatformAPI } from 'zrender/lib/core/platform.js';\nimport { getImpl } from './impl.js';\nimport { registerCustomSeries as registerCustom } from '../chart/custom/customSeriesRegister.js';\nexport var version = '6.0.0';\nexport var dependencies = {\n  zrender: '6.0.0'\n};\nvar TEST_FRAME_REMAIN_TIME = 1;\nvar PRIORITY_PROCESSOR_SERIES_FILTER = 800;\n// Some data processors depends on the stack result dimension (to calculate data extent).\n// So data stack stage should be in front of data processing stage.\nvar PRIORITY_PROCESSOR_DATASTACK = 900;\n// \"Data filter\" will block the stream, so it should be\n// put at the beginning of data processing.\nvar PRIORITY_PROCESSOR_FILTER = 1000;\nvar PRIORITY_PROCESSOR_DEFAULT = 2000;\nvar PRIORITY_PROCESSOR_STATISTIC = 5000;\nvar PRIORITY_VISUAL_LAYOUT = 1000;\nvar PRIORITY_VISUAL_PROGRESSIVE_LAYOUT = 1100;\nvar PRIORITY_VISUAL_GLOBAL = 2000;\nvar PRIORITY_VISUAL_CHART = 3000;\nvar PRIORITY_VISUAL_COMPONENT = 4000;\n// Visual property in data. Greater than `PRIORITY_VISUAL_COMPONENT` to enable to\n// overwrite the viusal result of component (like `visualMap`)\n// using data item specific setting (like itemStyle.xxx on data item)\nvar PRIORITY_VISUAL_CHART_DATA_CUSTOM = 4500;\n// Greater than `PRIORITY_VISUAL_CHART_DATA_CUSTOM` to enable to layout based on\n// visual result like `symbolSize`.\nvar PRIORITY_VISUAL_POST_CHART_LAYOUT = 4600;\nvar PRIORITY_VISUAL_BRUSH = 5000;\nvar PRIORITY_VISUAL_ARIA = 6000;\nvar PRIORITY_VISUAL_DECAL = 7000;\nexport var PRIORITY = {\n  PROCESSOR: {\n    FILTER: PRIORITY_PROCESSOR_FILTER,\n    SERIES_FILTER: PRIORITY_PROCESSOR_SERIES_FILTER,\n    STATISTIC: PRIORITY_PROCESSOR_STATISTIC\n  },\n  VISUAL: {\n    LAYOUT: PRIORITY_VISUAL_LAYOUT,\n    PROGRESSIVE_LAYOUT: PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,\n    GLOBAL: PRIORITY_VISUAL_GLOBAL,\n    CHART: PRIORITY_VISUAL_CHART,\n    POST_CHART_LAYOUT: PRIORITY_VISUAL_POST_CHART_LAYOUT,\n    COMPONENT: PRIORITY_VISUAL_COMPONENT,\n    BRUSH: PRIORITY_VISUAL_BRUSH,\n    CHART_ITEM: PRIORITY_VISUAL_CHART_DATA_CUSTOM,\n    ARIA: PRIORITY_VISUAL_ARIA,\n    DECAL: PRIORITY_VISUAL_DECAL\n  }\n};\n// Main process have three entries: `setOption`, `dispatchAction` and `resize`,\n// where they must not be invoked nestedly, except the only case: invoke\n// dispatchAction with updateMethod \"none\" in main process.\n// This flag is used to carry out this rule.\n// All events will be triggered out side main process (i.e. when !this[IN_MAIN_PROCESS]).\nvar IN_MAIN_PROCESS_KEY = '__flagInMainProcess';\n// Useful for detecting outdated rendering results in scenarios that these issues are involved:\n//  - Use shortcut (such as, updateTransform, or no update) to start a main process.\n//  - Asynchronously update rendered view (e.g., graph force layout).\n//  - Multiple ChartView/ComponentView render to one group cooperatively.\nvar MAIN_PROCESS_VERSION_KEY = '__mainProcessVersion';\nvar PENDING_UPDATE = '__pendingUpdate';\nvar STATUS_NEEDS_UPDATE_KEY = '__needsUpdateStatus';\nvar ACTION_REG = /^[a-zA-Z0-9_]+$/;\nvar CONNECT_STATUS_KEY = '__connectUpdateStatus';\nvar CONNECT_STATUS_PENDING = 0;\nvar CONNECT_STATUS_UPDATING = 1;\nvar CONNECT_STATUS_UPDATED = 2;\n;\n;\nfunction createRegisterEventWithLowercaseECharts(method) {\n  return function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    if (this.isDisposed()) {\n      disposedWarning(this.id);\n      return;\n    }\n    return toLowercaseNameAndCallEventful(this, method, args);\n  };\n}\nfunction createRegisterEventWithLowercaseMessageCenter(method) {\n  return function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    return toLowercaseNameAndCallEventful(this, method, args);\n  };\n}\nfunction toLowercaseNameAndCallEventful(host, method, args) {\n  // `args[0]` is event name. Event name is all lowercase.\n  args[0] = args[0] && args[0].toLowerCase();\n  return Eventful.prototype[method].apply(host, args);\n}\nvar MessageCenter = /** @class */function (_super) {\n  __extends(MessageCenter, _super);\n  function MessageCenter() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  return MessageCenter;\n}(Eventful);\nvar messageCenterProto = MessageCenter.prototype;\nmessageCenterProto.on = createRegisterEventWithLowercaseMessageCenter('on');\nmessageCenterProto.off = createRegisterEventWithLowercaseMessageCenter('off');\n// ---------------------------------------\n// Internal method names for class ECharts\n// ---------------------------------------\nvar prepare;\nvar prepareView;\nvar updateDirectly;\nvar updateMethods;\nvar doConvertPixel;\nvar updateStreamModes;\nvar doDispatchAction;\nvar flushPendingActions;\nvar triggerUpdatedEvent;\nvar bindRenderedEvent;\nvar bindMouseEvent;\nvar render;\nvar renderComponents;\nvar renderSeries;\nvar createExtensionAPI;\nvar enableConnect;\nvar markStatusToUpdate;\nvar applyChangedStates;\nvar updateMainProcessVersion;\nvar ECharts = /** @class */function (_super) {\n  __extends(ECharts, _super);\n  function ECharts(dom,\n  // Theme name or themeOption.\n  theme, opts) {\n    var _this = _super.call(this, new ECEventProcessor()) || this;\n    _this._chartsViews = [];\n    _this._chartsMap = {};\n    _this._componentsViews = [];\n    _this._componentsMap = {};\n    // Can't dispatch action during rendering procedure\n    _this._pendingActions = [];\n    opts = opts || {};\n    _this._dom = dom;\n    var defaultRenderer = 'canvas';\n    var defaultCoarsePointer = 'auto';\n    var defaultUseDirtyRect = false;\n    _this[MAIN_PROCESS_VERSION_KEY] = 1;\n    if (process.env.NODE_ENV !== 'production') {\n      var root = /* eslint-disable-next-line */\n      env.hasGlobalWindow ? window : global;\n      if (root) {\n        defaultRenderer = retrieve2(root.__ECHARTS__DEFAULT__RENDERER__, defaultRenderer);\n        defaultCoarsePointer = retrieve2(root.__ECHARTS__DEFAULT__COARSE_POINTER, defaultCoarsePointer);\n        defaultUseDirtyRect = retrieve2(root.__ECHARTS__DEFAULT__USE_DIRTY_RECT__, defaultUseDirtyRect);\n      }\n    }\n    if (opts.ssr) {\n      zrender.registerSSRDataGetter(function (el) {\n        var ecData = getECData(el);\n        var dataIndex = ecData.dataIndex;\n        if (dataIndex == null) {\n          return;\n        }\n        var hashMap = createHashMap();\n        hashMap.set('series_index', ecData.seriesIndex);\n        hashMap.set('data_index', dataIndex);\n        ecData.ssrType && hashMap.set('ssr_type', ecData.ssrType);\n        return hashMap;\n      });\n    }\n    var zr = _this._zr = zrender.init(dom, {\n      renderer: opts.renderer || defaultRenderer,\n      devicePixelRatio: opts.devicePixelRatio,\n      width: opts.width,\n      height: opts.height,\n      ssr: opts.ssr,\n      useDirtyRect: retrieve2(opts.useDirtyRect, defaultUseDirtyRect),\n      useCoarsePointer: retrieve2(opts.useCoarsePointer, defaultCoarsePointer),\n      pointerSize: opts.pointerSize\n    });\n    _this._ssr = opts.ssr;\n    // Expect 60 fps.\n    _this._throttledZrFlush = throttle(bind(zr.flush, zr), 17);\n    _this._updateTheme(theme);\n    _this._locale = createLocaleObject(opts.locale || SYSTEM_LANG);\n    _this._coordSysMgr = new CoordinateSystemManager();\n    var api = _this._api = createExtensionAPI(_this);\n    // Sort on demand\n    function prioritySortFunc(a, b) {\n      return a.__prio - b.__prio;\n    }\n    timsort(visualFuncs, prioritySortFunc);\n    timsort(dataProcessorFuncs, prioritySortFunc);\n    _this._scheduler = new Scheduler(_this, api, dataProcessorFuncs, visualFuncs);\n    _this._messageCenter = new MessageCenter();\n    // Init mouse events\n    _this._initEvents();\n    // In case some people write `window.onresize = chart.resize`\n    _this.resize = bind(_this.resize, _this);\n    zr.animation.on('frame', _this._onframe, _this);\n    bindRenderedEvent(zr, _this);\n    bindMouseEvent(zr, _this);\n    // ECharts instance can be used as value.\n    setAsPrimitive(_this);\n    return _this;\n  }\n  ECharts.prototype._onframe = function () {\n    if (this._disposed) {\n      return;\n    }\n    applyChangedStates(this);\n    var scheduler = this._scheduler;\n    // Lazy update\n    if (this[PENDING_UPDATE]) {\n      var silent = this[PENDING_UPDATE].silent;\n      this[IN_MAIN_PROCESS_KEY] = true;\n      updateMainProcessVersion(this);\n      try {\n        prepare(this);\n        updateMethods.update.call(this, null, this[PENDING_UPDATE].updateParams);\n      } catch (e) {\n        this[IN_MAIN_PROCESS_KEY] = false;\n        this[PENDING_UPDATE] = null;\n        throw e;\n      }\n      // At present, in each frame, zrender performs:\n      //   (1) animation step forward.\n      //   (2) trigger('frame') (where this `_onframe` is called)\n      //   (3) zrender flush (render).\n      // If we do nothing here, since we use `setToFinal: true`, the step (3) above\n      // will render the final state of the elements before the real animation started.\n      this._zr.flush();\n      this[IN_MAIN_PROCESS_KEY] = false;\n      this[PENDING_UPDATE] = null;\n      flushPendingActions.call(this, silent);\n      triggerUpdatedEvent.call(this, silent);\n    }\n    // Avoid do both lazy update and progress in one frame.\n    else if (scheduler.unfinished) {\n      // Stream progress.\n      var remainTime = TEST_FRAME_REMAIN_TIME;\n      var ecModel = this._model;\n      var api = this._api;\n      scheduler.unfinished = false;\n      do {\n        var startTime = +new Date();\n        scheduler.performSeriesTasks(ecModel);\n        // Currently dataProcessorFuncs do not check threshold.\n        scheduler.performDataProcessorTasks(ecModel);\n        updateStreamModes(this, ecModel);\n        // Do not update coordinate system here. Because that coord system update in\n        // each frame is not a good user experience. So we follow the rule that\n        // the extent of the coordinate system is determined in the first frame (the\n        // frame is executed immediately after task reset.\n        // this._coordSysMgr.update(ecModel, api);\n        // console.log('--- ec frame visual ---', remainTime);\n        scheduler.performVisualTasks(ecModel);\n        renderSeries(this, this._model, api, 'remain', {});\n        remainTime -= +new Date() - startTime;\n      } while (remainTime > 0 && scheduler.unfinished);\n      // Call flush explicitly for trigger finished event.\n      if (!scheduler.unfinished) {\n        this._zr.flush();\n      }\n      // Else, zr flushing be ensue within the same frame,\n      // because zr flushing is after onframe event.\n    }\n  };\n  ECharts.prototype.getDom = function () {\n    return this._dom;\n  };\n  ECharts.prototype.getId = function () {\n    return this.id;\n  };\n  ECharts.prototype.getZr = function () {\n    return this._zr;\n  };\n  ECharts.prototype.isSSR = function () {\n    return this._ssr;\n  };\n  /* eslint-disable-next-line */\n  ECharts.prototype.setOption = function (option, notMerge, lazyUpdate) {\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      if (process.env.NODE_ENV !== 'production') {\n        error('`setOption` should not be called during main process.');\n      }\n      return;\n    }\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    var silent;\n    var replaceMerge;\n    var transitionOpt;\n    if (isObject(notMerge)) {\n      lazyUpdate = notMerge.lazyUpdate;\n      silent = notMerge.silent;\n      replaceMerge = notMerge.replaceMerge;\n      transitionOpt = notMerge.transition;\n      notMerge = notMerge.notMerge;\n    }\n    this[IN_MAIN_PROCESS_KEY] = true;\n    updateMainProcessVersion(this);\n    if (!this._model || notMerge) {\n      var optionManager = new OptionManager(this._api);\n      var theme = this._theme;\n      var ecModel = this._model = new GlobalModel();\n      ecModel.scheduler = this._scheduler;\n      ecModel.ssr = this._ssr;\n      ecModel.init(null, null, null, theme, this._locale, optionManager);\n    }\n    this._model.setOption(option, {\n      replaceMerge: replaceMerge\n    }, optionPreprocessorFuncs);\n    var updateParams = {\n      seriesTransition: transitionOpt,\n      optionChanged: true\n    };\n    if (lazyUpdate) {\n      this[PENDING_UPDATE] = {\n        silent: silent,\n        updateParams: updateParams\n      };\n      this[IN_MAIN_PROCESS_KEY] = false;\n      // `setOption(option, {lazyMode: true})` may be called when zrender has been slept.\n      // It should wake it up to make sure zrender start to render at the next frame.\n      this.getZr().wakeUp();\n    } else {\n      try {\n        prepare(this);\n        updateMethods.update.call(this, null, updateParams);\n      } catch (e) {\n        this[PENDING_UPDATE] = null;\n        this[IN_MAIN_PROCESS_KEY] = false;\n        throw e;\n      }\n      // Ensure zr refresh sychronously, and then pixel in canvas can be\n      // fetched after `setOption`.\n      if (!this._ssr) {\n        // not use flush when using ssr mode.\n        this._zr.flush();\n      }\n      this[PENDING_UPDATE] = null;\n      this[IN_MAIN_PROCESS_KEY] = false;\n      flushPendingActions.call(this, silent);\n      triggerUpdatedEvent.call(this, silent);\n    }\n  };\n  /**\n   * Update theme with name or theme option and repaint the chart.\n   * @param theme Theme name or theme option.\n   * @param opts Optional settings\n   */\n  ECharts.prototype.setTheme = function (theme, opts) {\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      if (process.env.NODE_ENV !== 'production') {\n        error('`setTheme` should not be called during main process.');\n      }\n      return;\n    }\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    var ecModel = this._model;\n    if (!ecModel) {\n      return;\n    }\n    var silent = opts && opts.silent;\n    var updateParams = null;\n    if (this[PENDING_UPDATE]) {\n      if (silent == null) {\n        silent = this[PENDING_UPDATE].silent;\n      }\n      updateParams = this[PENDING_UPDATE].updateParams;\n      this[PENDING_UPDATE] = null;\n    }\n    this[IN_MAIN_PROCESS_KEY] = true;\n    updateMainProcessVersion(this);\n    try {\n      this._updateTheme(theme);\n      ecModel.setTheme(this._theme);\n      prepare(this);\n      updateMethods.update.call(this, {\n        type: 'setTheme'\n      }, updateParams);\n    } catch (e) {\n      this[IN_MAIN_PROCESS_KEY] = false;\n      throw e;\n    }\n    this[IN_MAIN_PROCESS_KEY] = false;\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  };\n  ECharts.prototype._updateTheme = function (theme) {\n    if (isString(theme)) {\n      theme = themeStorage[theme];\n    }\n    if (theme) {\n      theme = clone(theme);\n      theme && backwardCompat(theme, true);\n      this._theme = theme;\n    }\n  };\n  // We don't want developers to use getModel directly.\n  ECharts.prototype.getModel = function () {\n    return this._model;\n  };\n  ECharts.prototype.getOption = function () {\n    return this._model && this._model.getOption();\n  };\n  ECharts.prototype.getWidth = function () {\n    return this._zr.getWidth();\n  };\n  ECharts.prototype.getHeight = function () {\n    return this._zr.getHeight();\n  };\n  ECharts.prototype.getDevicePixelRatio = function () {\n    return this._zr.painter.dpr\n    /* eslint-disable-next-line */ || env.hasGlobalWindow && window.devicePixelRatio || 1;\n  };\n  /**\n   * Get canvas which has all thing rendered\n   * @deprecated Use renderToCanvas instead.\n   */\n  ECharts.prototype.getRenderedCanvas = function (opts) {\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('getRenderedCanvas', 'renderToCanvas');\n    }\n    return this.renderToCanvas(opts);\n  };\n  ECharts.prototype.renderToCanvas = function (opts) {\n    opts = opts || {};\n    var painter = this._zr.painter;\n    if (process.env.NODE_ENV !== 'production') {\n      if (painter.type !== 'canvas') {\n        throw new Error('renderToCanvas can only be used in the canvas renderer.');\n      }\n    }\n    return painter.getRenderedCanvas({\n      backgroundColor: opts.backgroundColor || this._model.get('backgroundColor'),\n      pixelRatio: opts.pixelRatio || this.getDevicePixelRatio()\n    });\n  };\n  ECharts.prototype.renderToSVGString = function (opts) {\n    opts = opts || {};\n    var painter = this._zr.painter;\n    if (process.env.NODE_ENV !== 'production') {\n      if (painter.type !== 'svg') {\n        throw new Error('renderToSVGString can only be used in the svg renderer.');\n      }\n    }\n    return painter.renderToString({\n      useViewBox: opts.useViewBox\n    });\n  };\n  /**\n   * Get svg data url\n   */\n  ECharts.prototype.getSvgDataURL = function () {\n    var zr = this._zr;\n    var list = zr.storage.getDisplayList();\n    // Stop animations\n    each(list, function (el) {\n      el.stopAnimation(null, true);\n    });\n    return zr.painter.toDataURL();\n  };\n  ECharts.prototype.getDataURL = function (opts) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    opts = opts || {};\n    var excludeComponents = opts.excludeComponents;\n    var ecModel = this._model;\n    var excludesComponentViews = [];\n    var self = this;\n    each(excludeComponents, function (componentType) {\n      ecModel.eachComponent({\n        mainType: componentType\n      }, function (component) {\n        var view = self._componentsMap[component.__viewId];\n        if (!view.group.ignore) {\n          excludesComponentViews.push(view);\n          view.group.ignore = true;\n        }\n      });\n    });\n    var url = this._zr.painter.getType() === 'svg' ? this.getSvgDataURL() : this.renderToCanvas(opts).toDataURL('image/' + (opts && opts.type || 'png'));\n    each(excludesComponentViews, function (view) {\n      view.group.ignore = false;\n    });\n    return url;\n  };\n  ECharts.prototype.getConnectedDataURL = function (opts) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    var isSvg = opts.type === 'svg';\n    var groupId = this.group;\n    var mathMin = Math.min;\n    var mathMax = Math.max;\n    var MAX_NUMBER = Infinity;\n    if (connectedGroups[groupId]) {\n      var left_1 = MAX_NUMBER;\n      var top_1 = MAX_NUMBER;\n      var right_1 = -MAX_NUMBER;\n      var bottom_1 = -MAX_NUMBER;\n      var canvasList_1 = [];\n      var dpr_1 = opts && opts.pixelRatio || this.getDevicePixelRatio();\n      each(instances, function (chart, id) {\n        if (chart.group === groupId) {\n          var canvas = isSvg ? chart.getZr().painter.getSvgDom().innerHTML : chart.renderToCanvas(clone(opts));\n          var boundingRect = chart.getDom().getBoundingClientRect();\n          left_1 = mathMin(boundingRect.left, left_1);\n          top_1 = mathMin(boundingRect.top, top_1);\n          right_1 = mathMax(boundingRect.right, right_1);\n          bottom_1 = mathMax(boundingRect.bottom, bottom_1);\n          canvasList_1.push({\n            dom: canvas,\n            left: boundingRect.left,\n            top: boundingRect.top\n          });\n        }\n      });\n      left_1 *= dpr_1;\n      top_1 *= dpr_1;\n      right_1 *= dpr_1;\n      bottom_1 *= dpr_1;\n      var width = right_1 - left_1;\n      var height = bottom_1 - top_1;\n      var targetCanvas = platformApi.createCanvas();\n      var zr_1 = zrender.init(targetCanvas, {\n        renderer: isSvg ? 'svg' : 'canvas'\n      });\n      zr_1.resize({\n        width: width,\n        height: height\n      });\n      if (isSvg) {\n        var content_1 = '';\n        each(canvasList_1, function (item) {\n          var x = item.left - left_1;\n          var y = item.top - top_1;\n          content_1 += '<g transform=\"translate(' + x + ',' + y + ')\">' + item.dom + '</g>';\n        });\n        zr_1.painter.getSvgRoot().innerHTML = content_1;\n        if (opts.connectedBackgroundColor) {\n          zr_1.painter.setBackgroundColor(opts.connectedBackgroundColor);\n        }\n        zr_1.refreshImmediately();\n        return zr_1.painter.toDataURL();\n      } else {\n        // Background between the charts\n        if (opts.connectedBackgroundColor) {\n          zr_1.add(new graphic.Rect({\n            shape: {\n              x: 0,\n              y: 0,\n              width: width,\n              height: height\n            },\n            style: {\n              fill: opts.connectedBackgroundColor\n            }\n          }));\n        }\n        each(canvasList_1, function (item) {\n          var img = new graphic.Image({\n            style: {\n              x: item.left * dpr_1 - left_1,\n              y: item.top * dpr_1 - top_1,\n              image: item.dom\n            }\n          });\n          zr_1.add(img);\n        });\n        zr_1.refreshImmediately();\n        return targetCanvas.toDataURL('image/' + (opts && opts.type || 'png'));\n      }\n    } else {\n      return this.getDataURL(opts);\n    }\n  };\n  ECharts.prototype.convertToPixel = function (finder, value, opt) {\n    return doConvertPixel(this, 'convertToPixel', finder, value, opt);\n  };\n  /**\n   * Convert from logical coordinate system to pixel coordinate system.\n   * See CoordinateSystem#convertToPixel.\n   *\n   * @see CoordinateSystem['dataToLayout'] for parameters and return.\n   * @see CoordinateSystemDataCoord\n   */\n  ECharts.prototype.convertToLayout = function (finder, value, opt) {\n    return doConvertPixel(this, 'convertToLayout', finder, value, opt);\n  };\n  // The above are signatures from before v6, thus they should be preserved for backward compat.\n  ECharts.prototype.convertFromPixel = function (finder, value, opt) {\n    return doConvertPixel(this, 'convertFromPixel', finder, value, opt);\n  };\n  /**\n   * Is the specified coordinate systems or components contain the given pixel point.\n   * @param {Array|number} value\n   * @return {boolean} result\n   */\n  ECharts.prototype.containPixel = function (finder, value) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    var ecModel = this._model;\n    var result;\n    var findResult = modelUtil.parseFinder(ecModel, finder);\n    each(findResult, function (models, key) {\n      key.indexOf('Models') >= 0 && each(models, function (model) {\n        var coordSys = model.coordinateSystem;\n        if (coordSys && coordSys.containPoint) {\n          result = result || !!coordSys.containPoint(value);\n        } else if (key === 'seriesModels') {\n          var view = this._chartsMap[model.__viewId];\n          if (view && view.containPoint) {\n            result = result || view.containPoint(value, model);\n          } else {\n            if (process.env.NODE_ENV !== 'production') {\n              warn(key + ': ' + (view ? 'The found component do not support containPoint.' : 'No view mapping to the found component.'));\n            }\n          }\n        } else {\n          if (process.env.NODE_ENV !== 'production') {\n            warn(key + ': containPoint is not supported');\n          }\n        }\n      }, this);\n    }, this);\n    return !!result;\n  };\n  /**\n   * Get visual from series or data.\n   * @param finder\n   *        If string, e.g., 'series', means {seriesIndex: 0}.\n   *        If Object, could contain some of these properties below:\n   *        {\n   *            seriesIndex / seriesId / seriesName,\n   *            dataIndex / dataIndexInside\n   *        }\n   *        If dataIndex is not specified, series visual will be fetched,\n   *        but not data item visual.\n   *        If all of seriesIndex, seriesId, seriesName are not specified,\n   *        visual will be fetched from first series.\n   * @param visualType 'color', 'symbol', 'symbolSize'\n   */\n  ECharts.prototype.getVisual = function (finder, visualType) {\n    var ecModel = this._model;\n    var parsedFinder = modelUtil.parseFinder(ecModel, finder, {\n      defaultMainType: 'series'\n    });\n    var seriesModel = parsedFinder.seriesModel;\n    if (process.env.NODE_ENV !== 'production') {\n      if (!seriesModel) {\n        warn('There is no specified series model');\n      }\n    }\n    var data = seriesModel.getData();\n    var dataIndexInside = parsedFinder.hasOwnProperty('dataIndexInside') ? parsedFinder.dataIndexInside : parsedFinder.hasOwnProperty('dataIndex') ? data.indexOfRawIndex(parsedFinder.dataIndex) : null;\n    return dataIndexInside != null ? getItemVisualFromData(data, dataIndexInside, visualType) : getVisualFromData(data, visualType);\n  };\n  /**\n   * Get view of corresponding component model\n   */\n  ECharts.prototype.getViewOfComponentModel = function (componentModel) {\n    return this._componentsMap[componentModel.__viewId];\n  };\n  /**\n   * Get view of corresponding series model\n   */\n  ECharts.prototype.getViewOfSeriesModel = function (seriesModel) {\n    return this._chartsMap[seriesModel.__viewId];\n  };\n  ECharts.prototype._initEvents = function () {\n    var _this = this;\n    each(MOUSE_EVENT_NAMES, function (eveName) {\n      var handler = function (e) {\n        var ecModel = _this.getModel();\n        var el = e.target;\n        var params;\n        var isGlobalOut = eveName === 'globalout';\n        // no e.target when 'globalout'.\n        if (isGlobalOut) {\n          params = {};\n        } else {\n          el && findEventDispatcher(el, function (parent) {\n            var ecData = getECData(parent);\n            if (ecData && ecData.dataIndex != null) {\n              var dataModel = ecData.dataModel || ecModel.getSeriesByIndex(ecData.seriesIndex);\n              params = dataModel && dataModel.getDataParams(ecData.dataIndex, ecData.dataType, el) || {};\n              return true;\n            }\n            // If element has custom eventData of components\n            else if (ecData.eventData) {\n              params = extend({}, ecData.eventData);\n              return true;\n            }\n          }, true);\n        }\n        // Contract: if params prepared in mouse event,\n        // these properties must be specified:\n        // {\n        //    componentType: string (component main type)\n        //    componentIndex: number\n        // }\n        // Otherwise event query can not work.\n        if (params) {\n          var componentType = params.componentType;\n          var componentIndex = params.componentIndex;\n          // Special handling for historic reason: when trigger by\n          // markLine/markPoint/markArea, the componentType is\n          // 'markLine'/'markPoint'/'markArea', but we should better\n          // enable them to be queried by seriesIndex, since their\n          // option is set in each series.\n          if (componentType === 'markLine' || componentType === 'markPoint' || componentType === 'markArea') {\n            componentType = 'series';\n            componentIndex = params.seriesIndex;\n          }\n          var model = componentType && componentIndex != null && ecModel.getComponent(componentType, componentIndex);\n          var view = model && _this[model.mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId];\n          if (process.env.NODE_ENV !== 'production') {\n            // `event.componentType` and `event[componentTpype + 'Index']` must not\n            // be missed, otherwise there is no way to distinguish source component.\n            // See `dataFormat.getDataParams`.\n            if (!isGlobalOut && !(model && view)) {\n              warn('model or view can not be found by params');\n            }\n          }\n          params.event = e;\n          params.type = eveName;\n          _this._$eventProcessor.eventInfo = {\n            targetEl: el,\n            packedEvent: params,\n            model: model,\n            view: view\n          };\n          _this.trigger(eveName, params);\n        }\n      };\n      // Consider that some component (like tooltip, brush, ...)\n      // register zr event handler, but user event handler might\n      // do anything, such as call `setOption` or `dispatchAction`,\n      // which probably update any of the content and probably\n      // cause problem if it is called previous other inner handlers.\n      handler.zrEventfulCallAtLast = true;\n      _this._zr.on(eveName, handler, _this);\n    });\n    var messageCenter = this._messageCenter;\n    each(publicEventTypeMap, function (_, eventType) {\n      messageCenter.on(eventType, function (event) {\n        _this.trigger(eventType, event);\n      });\n    });\n    handleLegacySelectEvents(messageCenter, this, this._api);\n  };\n  ECharts.prototype.isDisposed = function () {\n    return this._disposed;\n  };\n  ECharts.prototype.clear = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    this.setOption({\n      series: []\n    }, true);\n  };\n  ECharts.prototype.dispose = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    this._disposed = true;\n    var dom = this.getDom();\n    if (dom) {\n      modelUtil.setAttribute(this.getDom(), DOM_ATTRIBUTE_KEY, '');\n    }\n    var chart = this;\n    var api = chart._api;\n    var ecModel = chart._model;\n    each(chart._componentsViews, function (component) {\n      component.dispose(ecModel, api);\n    });\n    each(chart._chartsViews, function (chart) {\n      chart.dispose(ecModel, api);\n    });\n    // Dispose after all views disposed\n    chart._zr.dispose();\n    // Set properties to null.\n    // To reduce the memory cost in case the top code still holds this instance unexpectedly.\n    chart._dom = chart._model = chart._chartsMap = chart._componentsMap = chart._chartsViews = chart._componentsViews = chart._scheduler = chart._api = chart._zr = chart._throttledZrFlush = chart._theme = chart._coordSysMgr = chart._messageCenter = null;\n    delete instances[chart.id];\n  };\n  /**\n   * Resize the chart\n   */\n  ECharts.prototype.resize = function (opts) {\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      if (process.env.NODE_ENV !== 'production') {\n        error('`resize` should not be called during main process.');\n      }\n      return;\n    }\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    this._zr.resize(opts);\n    var ecModel = this._model;\n    // Resize loading effect\n    this._loadingFX && this._loadingFX.resize();\n    if (!ecModel) {\n      return;\n    }\n    var needPrepare = ecModel.resetOption('media');\n    var silent = opts && opts.silent;\n    // There is some real cases that:\n    // chart.setOption(option, { lazyUpdate: true });\n    // chart.resize();\n    if (this[PENDING_UPDATE]) {\n      if (silent == null) {\n        silent = this[PENDING_UPDATE].silent;\n      }\n      needPrepare = true;\n      this[PENDING_UPDATE] = null;\n    }\n    this[IN_MAIN_PROCESS_KEY] = true;\n    updateMainProcessVersion(this);\n    try {\n      needPrepare && prepare(this);\n      updateMethods.update.call(this, {\n        type: 'resize',\n        animation: extend({\n          // Disable animation\n          duration: 0\n        }, opts && opts.animation)\n      });\n    } catch (e) {\n      this[IN_MAIN_PROCESS_KEY] = false;\n      throw e;\n    }\n    this[IN_MAIN_PROCESS_KEY] = false;\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  };\n  ECharts.prototype.showLoading = function (name, cfg) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    if (isObject(name)) {\n      cfg = name;\n      name = '';\n    }\n    name = name || 'default';\n    this.hideLoading();\n    if (!loadingEffects[name]) {\n      if (process.env.NODE_ENV !== 'production') {\n        warn('Loading effects ' + name + ' not exists.');\n      }\n      return;\n    }\n    var el = loadingEffects[name](this._api, cfg);\n    var zr = this._zr;\n    this._loadingFX = el;\n    zr.add(el);\n  };\n  /**\n   * Hide loading effect\n   */\n  ECharts.prototype.hideLoading = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    this._loadingFX && this._zr.remove(this._loadingFX);\n    this._loadingFX = null;\n  };\n  ECharts.prototype.makeActionFromEvent = function (eventObj) {\n    var payload = extend({}, eventObj);\n    payload.type = connectionEventRevertMap[eventObj.type];\n    return payload;\n  };\n  /**\n   * @param opt If pass boolean, means opt.silent\n   * @param opt.silent Default `false`. Whether trigger events.\n   * @param opt.flush Default `undefined`.\n   *        true: Flush immediately, and then pixel in canvas can be fetched\n   *            immediately. Caution: it might affect performance.\n   *        false: Not flush.\n   *        undefined: Auto decide whether perform flush.\n   */\n  ECharts.prototype.dispatchAction = function (payload, opt) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    if (!isObject(opt)) {\n      opt = {\n        silent: !!opt\n      };\n    }\n    if (!actions[payload.type]) {\n      return;\n    }\n    // Avoid dispatch action before setOption. Especially in `connect`.\n    if (!this._model) {\n      return;\n    }\n    // May dispatchAction in rendering procedure\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      this._pendingActions.push(payload);\n      return;\n    }\n    var silent = opt.silent;\n    doDispatchAction.call(this, payload, silent);\n    var flush = opt.flush;\n    if (flush) {\n      this._zr.flush();\n    } else if (flush !== false && env.browser.weChat) {\n      // In WeChat embedded browser, `requestAnimationFrame` and `setInterval`\n      // hang when sliding page (on touch event), which cause that zr does not\n      // refresh until user interaction finished, which is not expected.\n      // But `dispatchAction` may be called too frequently when pan on touch\n      // screen, which impacts performance if do not throttle them.\n      this._throttledZrFlush();\n    }\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  };\n  ECharts.prototype.updateLabelLayout = function () {\n    lifecycle.trigger('series:layoutlabels', this._model, this._api, {\n      // Not adding series labels.\n      // TODO\n      updatedSeries: []\n    });\n  };\n  ECharts.prototype.appendData = function (params) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    var seriesIndex = params.seriesIndex;\n    var ecModel = this.getModel();\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n    if (process.env.NODE_ENV !== 'production') {\n      assert(params.data && seriesModel);\n    }\n    seriesModel.appendData(params);\n    // Note: `appendData` does not support that update extent of coordinate\n    // system, util some scenario require that. In the expected usage of\n    // `appendData`, the initial extent of coordinate system should better\n    // be fixed by axis `min`/`max` setting or initial data, otherwise if\n    // the extent changed while `appendData`, the location of the painted\n    // graphic elements have to be changed, which make the usage of\n    // `appendData` meaningless.\n    this._scheduler.unfinished = true;\n    this.getZr().wakeUp();\n  };\n  // A work around for no `internal` modifier in ts yet but\n  // need to strictly hide private methods to JS users.\n  ECharts.internalField = function () {\n    prepare = function (ecIns) {\n      var scheduler = ecIns._scheduler;\n      scheduler.restorePipelines(ecIns._model);\n      scheduler.prepareStageTasks();\n      prepareView(ecIns, true);\n      prepareView(ecIns, false);\n      scheduler.plan();\n    };\n    /**\n     * Prepare view instances of charts and components\n     */\n    prepareView = function (ecIns, isComponent) {\n      var ecModel = ecIns._model;\n      var scheduler = ecIns._scheduler;\n      var viewList = isComponent ? ecIns._componentsViews : ecIns._chartsViews;\n      var viewMap = isComponent ? ecIns._componentsMap : ecIns._chartsMap;\n      var zr = ecIns._zr;\n      var api = ecIns._api;\n      for (var i = 0; i < viewList.length; i++) {\n        viewList[i].__alive = false;\n      }\n      isComponent ? ecModel.eachComponent(function (componentType, model) {\n        componentType !== 'series' && doPrepare(model);\n      }) : ecModel.eachSeries(doPrepare);\n      function doPrepare(model) {\n        // By default view will be reused if possible for the case that `setOption` with \"notMerge\"\n        // mode and need to enable transition animation. (Usually, when they have the same id, or\n        // especially no id but have the same type & name & index. See the `model.id` generation\n        // rule in `makeIdAndName` and `viewId` generation rule here).\n        // But in `replaceMerge` mode, this feature should be able to disabled when it is clear that\n        // the new model has nothing to do with the old model.\n        var requireNewView = model.__requireNewView;\n        // This command should not work twice.\n        model.__requireNewView = false;\n        // Consider: id same and type changed.\n        var viewId = '_ec_' + model.id + '_' + model.type;\n        var view = !requireNewView && viewMap[viewId];\n        if (!view) {\n          var classType = parseClassType(model.type);\n          var Clazz = isComponent ? ComponentView.getClass(classType.main, classType.sub) :\n          // FIXME:TS\n          // (ChartView as ChartViewConstructor).getClass('series', classType.sub)\n          // For backward compat, still support a chart type declared as only subType\n          // like \"liquidfill\", but recommend \"series.liquidfill\"\n          // But need a base class to make a type series.\n          ChartView.getClass(classType.sub);\n          if (process.env.NODE_ENV !== 'production') {\n            assert(Clazz, classType.sub + ' does not exist.');\n          }\n          view = new Clazz();\n          view.init(ecModel, api);\n          viewMap[viewId] = view;\n          viewList.push(view);\n          zr.add(view.group);\n        }\n        model.__viewId = view.__id = viewId;\n        view.__alive = true;\n        view.__model = model;\n        view.group.__ecComponentInfo = {\n          mainType: model.mainType,\n          index: model.componentIndex\n        };\n        !isComponent && scheduler.prepareView(view, model, ecModel, api);\n      }\n      for (var i = 0; i < viewList.length;) {\n        var view = viewList[i];\n        if (!view.__alive) {\n          !isComponent && view.renderTask.dispose();\n          zr.remove(view.group);\n          view.dispose(ecModel, api);\n          viewList.splice(i, 1);\n          if (viewMap[view.__id] === view) {\n            delete viewMap[view.__id];\n          }\n          view.__id = view.group.__ecComponentInfo = null;\n        } else {\n          i++;\n        }\n      }\n    };\n    updateDirectly = function (ecIns, method, payload, mainType, subType) {\n      var ecModel = ecIns._model;\n      ecModel.setUpdatePayload(payload);\n      // broadcast\n      if (!mainType) {\n        // FIXME\n        // Chart will not be update directly here, except set dirty.\n        // But there is no such scenario now.\n        each([].concat(ecIns._componentsViews).concat(ecIns._chartsViews), callView);\n        return;\n      }\n      var query = {};\n      query[mainType + 'Id'] = payload[mainType + 'Id'];\n      query[mainType + 'Index'] = payload[mainType + 'Index'];\n      query[mainType + 'Name'] = payload[mainType + 'Name'];\n      var condition = {\n        mainType: mainType,\n        query: query\n      };\n      subType && (condition.subType = subType); // subType may be '' by parseClassType;\n      var excludeSeriesId = payload.excludeSeriesId;\n      var excludeSeriesIdMap;\n      if (excludeSeriesId != null) {\n        excludeSeriesIdMap = createHashMap();\n        each(modelUtil.normalizeToArray(excludeSeriesId), function (id) {\n          var modelId = modelUtil.convertOptionIdName(id, null);\n          if (modelId != null) {\n            excludeSeriesIdMap.set(modelId, true);\n          }\n        });\n      }\n      // If dispatchAction before setOption, do nothing.\n      ecModel && ecModel.eachComponent(condition, function (model) {\n        var isExcluded = excludeSeriesIdMap && excludeSeriesIdMap.get(model.id) != null;\n        if (isExcluded) {\n          return;\n        }\n        ;\n        if (isHighDownPayload(payload)) {\n          if (model instanceof SeriesModel) {\n            if (payload.type === HIGHLIGHT_ACTION_TYPE && !payload.notBlur && !model.get(['emphasis', 'disabled'])) {\n              blurSeriesFromHighlightPayload(model, payload, ecIns._api);\n            }\n          } else {\n            var _a = findComponentHighDownDispatchers(model.mainType, model.componentIndex, payload.name, ecIns._api),\n              focusSelf = _a.focusSelf,\n              dispatchers = _a.dispatchers;\n            if (payload.type === HIGHLIGHT_ACTION_TYPE && focusSelf && !payload.notBlur) {\n              blurComponent(model.mainType, model.componentIndex, ecIns._api);\n            }\n            // PENDING:\n            // Whether to put this \"enter emphasis\" code in `ComponentView`,\n            // which will be the same as `ChartView` but might be not necessary\n            // and will be far from this logic.\n            if (dispatchers) {\n              each(dispatchers, function (dispatcher) {\n                payload.type === HIGHLIGHT_ACTION_TYPE ? enterEmphasis(dispatcher) : leaveEmphasis(dispatcher);\n              });\n            }\n          }\n        } else if (isSelectChangePayload(payload)) {\n          // TODO geo\n          if (model instanceof SeriesModel) {\n            toggleSelectionFromPayload(model, payload, ecIns._api);\n            updateSeriesElementSelection(model);\n            markStatusToUpdate(ecIns);\n          }\n        }\n      }, ecIns);\n      ecModel && ecModel.eachComponent(condition, function (model) {\n        var isExcluded = excludeSeriesIdMap && excludeSeriesIdMap.get(model.id) != null;\n        if (isExcluded) {\n          return;\n        }\n        ;\n        callView(ecIns[mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId]);\n      }, ecIns);\n      function callView(view) {\n        view && view.__alive && view[method] && view[method](view.__model, ecModel, ecIns._api, payload);\n      }\n    };\n    updateMethods = {\n      prepareAndUpdate: function (payload) {\n        prepare(this);\n        updateMethods.update.call(this, payload, payload && {\n          // Needs to mark option changed if newOption is given.\n          // It's from MagicType.\n          // TODO If use a separate flag optionChanged in payload?\n          optionChanged: payload.newOption != null\n        });\n      },\n      update: function (payload, updateParams) {\n        var ecModel = this._model;\n        var api = this._api;\n        var zr = this._zr;\n        var coordSysMgr = this._coordSysMgr;\n        var scheduler = this._scheduler;\n        // update before setOption\n        if (!ecModel) {\n          return;\n        }\n        ecModel.setUpdatePayload(payload);\n        scheduler.restoreData(ecModel, payload);\n        scheduler.performSeriesTasks(ecModel);\n        // TODO\n        // Save total ecModel here for undo/redo (after restoring data and before processing data).\n        // Undo (restoration of total ecModel) can be carried out in 'action' or outside API call.\n        // Create new coordinate system each update\n        // In LineView may save the old coordinate system and use it to get the original point.\n        coordSysMgr.create(ecModel, api);\n        scheduler.performDataProcessorTasks(ecModel, payload);\n        // Current stream render is not supported in data process. So we can update\n        // stream modes after data processing, where the filtered data is used to\n        // determine whether to use progressive rendering.\n        updateStreamModes(this, ecModel);\n        // We update stream modes before coordinate system updated, then the modes info\n        // can be fetched when coord sys updating (consider the barGrid extent fix). But\n        // the drawback is the full coord info can not be fetched. Fortunately this full\n        // coord is not required in stream mode updater currently.\n        coordSysMgr.update(ecModel, api);\n        clearColorPalette(ecModel);\n        scheduler.performVisualTasks(ecModel, payload);\n        // Set background and dark mode before rendering, because they affect auto-color-determination\n        // in zrender Text, and consequently affect the bounding rect if stroke is added.\n        var backgroundColor = ecModel.get('backgroundColor') || 'transparent';\n        zr.setBackgroundColor(backgroundColor);\n        // Force set dark mode.\n        var darkMode = ecModel.get('darkMode');\n        if (darkMode != null && darkMode !== 'auto') {\n          zr.setDarkMode(darkMode);\n        }\n        render(this, ecModel, api, payload, updateParams);\n        lifecycle.trigger('afterupdate', ecModel, api);\n      },\n      updateTransform: function (payload) {\n        var _this = this;\n        var ecModel = this._model;\n        var api = this._api;\n        // update before setOption\n        if (!ecModel) {\n          return;\n        }\n        ecModel.setUpdatePayload(payload);\n        // ChartView.markUpdateMethod(payload, 'updateTransform');\n        var componentDirtyList = [];\n        ecModel.eachComponent(function (componentType, componentModel) {\n          if (componentType === 'series') {\n            return;\n          }\n          var componentView = _this.getViewOfComponentModel(componentModel);\n          if (componentView && componentView.__alive) {\n            if (componentView.updateTransform) {\n              var result = componentView.updateTransform(componentModel, ecModel, api, payload);\n              result && result.update && componentDirtyList.push(componentView);\n            } else {\n              componentDirtyList.push(componentView);\n            }\n          }\n        });\n        var seriesDirtyMap = createHashMap();\n        ecModel.eachSeries(function (seriesModel) {\n          var chartView = _this._chartsMap[seriesModel.__viewId];\n          if (chartView.updateTransform) {\n            var result = chartView.updateTransform(seriesModel, ecModel, api, payload);\n            result && result.update && seriesDirtyMap.set(seriesModel.uid, 1);\n          } else {\n            seriesDirtyMap.set(seriesModel.uid, 1);\n          }\n        });\n        clearColorPalette(ecModel);\n        // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n        // this._scheduler.performVisualTasks(ecModel, payload, 'layout', true);\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          setDirty: true,\n          dirtyMap: seriesDirtyMap\n        });\n        // Currently, not call render of components. Geo render cost a lot.\n        // renderComponents(ecIns, ecModel, api, payload, componentDirtyList);\n        renderSeries(this, ecModel, api, payload, {}, seriesDirtyMap);\n        lifecycle.trigger('afterupdate', ecModel, api);\n      },\n      updateView: function (payload) {\n        var ecModel = this._model;\n        // update before setOption\n        if (!ecModel) {\n          return;\n        }\n        ecModel.setUpdatePayload(payload);\n        ChartView.markUpdateMethod(payload, 'updateView');\n        clearColorPalette(ecModel);\n        // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          setDirty: true\n        });\n        render(this, ecModel, this._api, payload, {});\n        lifecycle.trigger('afterupdate', ecModel, this._api);\n      },\n      updateVisual: function (payload) {\n        // updateMethods.update.call(this, payload);\n        var _this = this;\n        var ecModel = this._model;\n        // update before setOption\n        if (!ecModel) {\n          return;\n        }\n        ecModel.setUpdatePayload(payload);\n        // clear all visual\n        ecModel.eachSeries(function (seriesModel) {\n          seriesModel.getData().clearAllVisual();\n        });\n        // Perform visual\n        ChartView.markUpdateMethod(payload, 'updateVisual');\n        clearColorPalette(ecModel);\n        // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          visualType: 'visual',\n          setDirty: true\n        });\n        ecModel.eachComponent(function (componentType, componentModel) {\n          if (componentType !== 'series') {\n            var componentView = _this.getViewOfComponentModel(componentModel);\n            componentView && componentView.__alive && componentView.updateVisual(componentModel, ecModel, _this._api, payload);\n          }\n        });\n        ecModel.eachSeries(function (seriesModel) {\n          var chartView = _this._chartsMap[seriesModel.__viewId];\n          chartView.updateVisual(seriesModel, ecModel, _this._api, payload);\n        });\n        lifecycle.trigger('afterupdate', ecModel, this._api);\n      },\n      updateLayout: function (payload) {\n        updateMethods.update.call(this, payload);\n      }\n    };\n    function doConvertPixelImpl(ecIns, methodName, finder, value, opt) {\n      if (ecIns._disposed) {\n        disposedWarning(ecIns.id);\n        return;\n      }\n      var ecModel = ecIns._model;\n      var coordSysList = ecIns._coordSysMgr.getCoordinateSystems();\n      var result;\n      var parsedFinder = modelUtil.parseFinder(ecModel, finder);\n      for (var i = 0; i < coordSysList.length; i++) {\n        var coordSys = coordSysList[i];\n        if (coordSys[methodName] && (result = coordSys[methodName](ecModel, parsedFinder, value, opt)) != null) {\n          return result;\n        }\n      }\n      if (process.env.NODE_ENV !== 'production') {\n        warn('No coordinate system that supports ' + methodName + ' found by the given finder.');\n      }\n    }\n    ;\n    doConvertPixel = doConvertPixelImpl;\n    updateStreamModes = function (ecIns, ecModel) {\n      var chartsMap = ecIns._chartsMap;\n      var scheduler = ecIns._scheduler;\n      ecModel.eachSeries(function (seriesModel) {\n        scheduler.updateStreamModes(seriesModel, chartsMap[seriesModel.__viewId]);\n      });\n    };\n    doDispatchAction = function (payload, silent) {\n      var _this = this;\n      var ecModel = this.getModel();\n      var payloadType = payload.type;\n      var escapeConnect = payload.escapeConnect;\n      var actionInfo = actions[payloadType];\n      var cptTypeTmp = (actionInfo.update || 'update').split(':');\n      var updateMethod = cptTypeTmp.pop();\n      var cptType = cptTypeTmp[0] != null && parseClassType(cptTypeTmp[0]);\n      this[IN_MAIN_PROCESS_KEY] = true;\n      updateMainProcessVersion(this);\n      var payloads = [payload];\n      var batched = false;\n      // Batch action\n      if (payload.batch) {\n        batched = true;\n        payloads = map(payload.batch, function (item) {\n          item = defaults(extend({}, item), payload);\n          item.batch = null;\n          return item;\n        });\n      }\n      var eventObjBatch = [];\n      var eventObj;\n      var actionResultBatch = [];\n      var nonRefinedEventType = actionInfo.nonRefinedEventType;\n      var isSelectChange = isSelectChangePayload(payload);\n      var isHighDown = isHighDownPayload(payload);\n      // Only leave blur once if there are multiple batches.\n      if (isHighDown) {\n        allLeaveBlur(this._api);\n      }\n      each(payloads, function (batchItem) {\n        // Action can specify the event by return it.\n        var actionResult = actionInfo.action(batchItem, ecModel, _this._api);\n        if (actionInfo.refineEvent) {\n          actionResultBatch.push(actionResult);\n        } else {\n          eventObj = actionResult;\n        }\n        eventObj = eventObj || extend({}, batchItem);\n        eventObj.type = nonRefinedEventType;\n        eventObjBatch.push(eventObj);\n        // light update does not perform data process, layout and visual.\n        if (isHighDown) {\n          var _a = modelUtil.preParseFinder(payload),\n            queryOptionMap = _a.queryOptionMap,\n            mainTypeSpecified = _a.mainTypeSpecified;\n          var componentMainType = mainTypeSpecified ? queryOptionMap.keys()[0] : 'series';\n          updateDirectly(_this, updateMethod, batchItem, componentMainType);\n          markStatusToUpdate(_this);\n        } else if (isSelectChange) {\n          // At present `dispatchAction({ type: 'select', ... })` is not supported on components.\n          // geo still use 'geoselect'.\n          updateDirectly(_this, updateMethod, batchItem, 'series');\n          markStatusToUpdate(_this);\n        } else if (cptType) {\n          updateDirectly(_this, updateMethod, batchItem, cptType.main, cptType.sub);\n        }\n      });\n      if (updateMethod !== 'none' && !isHighDown && !isSelectChange && !cptType) {\n        try {\n          // Still dirty\n          if (this[PENDING_UPDATE]) {\n            prepare(this);\n            updateMethods.update.call(this, payload);\n            this[PENDING_UPDATE] = null;\n          } else {\n            updateMethods[updateMethod].call(this, payload);\n          }\n        } catch (e) {\n          this[IN_MAIN_PROCESS_KEY] = false;\n          throw e;\n        }\n      }\n      // Follow the rule of action batch\n      if (batched) {\n        eventObj = {\n          type: nonRefinedEventType,\n          escapeConnect: escapeConnect,\n          batch: eventObjBatch\n        };\n      } else {\n        eventObj = eventObjBatch[0];\n      }\n      this[IN_MAIN_PROCESS_KEY] = false;\n      if (!silent) {\n        var refinedEvent = void 0;\n        if (actionInfo.refineEvent) {\n          var eventContent = actionInfo.refineEvent(actionResultBatch, payload, ecModel, this._api).eventContent;\n          assert(isObject(eventContent));\n          refinedEvent = defaults({\n            type: actionInfo.refinedEventType\n          }, eventContent);\n          refinedEvent.fromAction = payload.type;\n          refinedEvent.fromActionPayload = payload;\n          refinedEvent.escapeConnect = true;\n        }\n        var messageCenter = this._messageCenter;\n        // - If `refineEvent` created a `refinedEvent`, `eventObj` (replicated from the original payload)\n        //  is still needed to be triggered for the feature `connect`. But it will not be triggered to\n        //  users in this case.\n        // - If no `refineEvent` used, `eventObj` will be triggered for both `connect` and users.\n        messageCenter.trigger(eventObj.type, eventObj);\n        if (refinedEvent) {\n          messageCenter.trigger(refinedEvent.type, refinedEvent);\n        }\n      }\n    };\n    flushPendingActions = function (silent) {\n      var pendingActions = this._pendingActions;\n      while (pendingActions.length) {\n        var payload = pendingActions.shift();\n        doDispatchAction.call(this, payload, silent);\n      }\n    };\n    triggerUpdatedEvent = function (silent) {\n      !silent && this.trigger('updated');\n    };\n    /**\n     * Event `rendered` is triggered when zr\n     * rendered. It is useful for realtime\n     * snapshot (reflect animation).\n     *\n     * Event `finished` is triggered when:\n     * (1) zrender rendering finished.\n     * (2) initial animation finished.\n     * (3) progressive rendering finished.\n     * (4) no pending action.\n     * (5) no delayed setOption needs to be processed.\n     */\n    bindRenderedEvent = function (zr, ecIns) {\n      zr.on('rendered', function (params) {\n        ecIns.trigger('rendered', params);\n        // The `finished` event should not be triggered repeatedly,\n        // so it should only be triggered when rendering indeed happens\n        // in zrender. (Consider the case that dipatchAction is keep\n        // triggering when mouse move).\n        if (\n        // Although zr is dirty if initial animation is not finished\n        // and this checking is called on frame, we also check\n        // animation finished for robustness.\n        zr.animation.isFinished() && !ecIns[PENDING_UPDATE] && !ecIns._scheduler.unfinished && !ecIns._pendingActions.length) {\n          ecIns.trigger('finished');\n        }\n      });\n    };\n    bindMouseEvent = function (zr, ecIns) {\n      zr.on('mouseover', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\n        if (dispatcher) {\n          handleGlobalMouseOverForHighDown(dispatcher, e, ecIns._api);\n          markStatusToUpdate(ecIns);\n        }\n      }).on('mouseout', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\n        if (dispatcher) {\n          handleGlobalMouseOutForHighDown(dispatcher, e, ecIns._api);\n          markStatusToUpdate(ecIns);\n        }\n      }).on('click', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, function (target) {\n          return getECData(target).dataIndex != null;\n        }, true);\n        if (dispatcher) {\n          var actionType = dispatcher.selected ? 'unselect' : 'select';\n          var ecData = getECData(dispatcher);\n          ecIns._api.dispatchAction({\n            type: actionType,\n            dataType: ecData.dataType,\n            dataIndexInside: ecData.dataIndex,\n            seriesIndex: ecData.seriesIndex,\n            isFromClick: true\n          });\n        }\n      });\n    };\n    function clearColorPalette(ecModel) {\n      ecModel.clearColorPalette();\n      ecModel.eachSeries(function (seriesModel) {\n        seriesModel.clearColorPalette();\n      });\n    }\n    ;\n    // Allocate zlevels for series and components\n    function allocateZlevels(ecModel) {\n      ;\n      var componentZLevels = [];\n      var seriesZLevels = [];\n      var hasSeparateZLevel = false;\n      ecModel.eachComponent(function (componentType, componentModel) {\n        var zlevel = componentModel.get('zlevel') || 0;\n        var z = componentModel.get('z') || 0;\n        var zlevelKey = componentModel.getZLevelKey();\n        hasSeparateZLevel = hasSeparateZLevel || !!zlevelKey;\n        (componentType === 'series' ? seriesZLevels : componentZLevels).push({\n          zlevel: zlevel,\n          z: z,\n          idx: componentModel.componentIndex,\n          type: componentType,\n          key: zlevelKey\n        });\n      });\n      if (hasSeparateZLevel) {\n        // Series after component\n        var zLevels = componentZLevels.concat(seriesZLevels);\n        var lastSeriesZLevel_1;\n        var lastSeriesKey_1;\n        timsort(zLevels, function (a, b) {\n          if (a.zlevel === b.zlevel) {\n            return a.z - b.z;\n          }\n          return a.zlevel - b.zlevel;\n        });\n        each(zLevels, function (item) {\n          var componentModel = ecModel.getComponent(item.type, item.idx);\n          var zlevel = item.zlevel;\n          var key = item.key;\n          if (lastSeriesZLevel_1 != null) {\n            zlevel = Math.max(lastSeriesZLevel_1, zlevel);\n          }\n          if (key) {\n            if (zlevel === lastSeriesZLevel_1 && key !== lastSeriesKey_1) {\n              zlevel++;\n            }\n            lastSeriesKey_1 = key;\n          } else if (lastSeriesKey_1) {\n            if (zlevel === lastSeriesZLevel_1) {\n              zlevel++;\n            }\n            lastSeriesKey_1 = '';\n          }\n          lastSeriesZLevel_1 = zlevel;\n          componentModel.setZLevel(zlevel);\n        });\n      }\n    }\n    render = function (ecIns, ecModel, api, payload, updateParams) {\n      allocateZlevels(ecModel);\n      renderComponents(ecIns, ecModel, api, payload, updateParams);\n      each(ecIns._chartsViews, function (chart) {\n        chart.__alive = false;\n      });\n      renderSeries(ecIns, ecModel, api, payload, updateParams);\n      // Remove groups of unrendered charts\n      each(ecIns._chartsViews, function (chart) {\n        if (!chart.__alive) {\n          chart.remove(ecModel, api);\n        }\n      });\n    };\n    renderComponents = function (ecIns, ecModel, api, payload, updateParams, dirtyList) {\n      each(dirtyList || ecIns._componentsViews, function (componentView) {\n        var componentModel = componentView.__model;\n        clearStates(componentModel, componentView);\n        componentView.render(componentModel, ecModel, api, payload);\n        updateZ(componentModel, componentView);\n        updateStates(componentModel, componentView);\n      });\n    };\n    /**\n     * Render each chart and component\n     */\n    renderSeries = function (ecIns, ecModel, api, payload, updateParams, dirtyMap) {\n      // Render all charts\n      var scheduler = ecIns._scheduler;\n      updateParams = extend(updateParams || {}, {\n        updatedSeries: ecModel.getSeries()\n      });\n      // TODO progressive?\n      lifecycle.trigger('series:beforeupdate', ecModel, api, updateParams);\n      var unfinished = false;\n      ecModel.eachSeries(function (seriesModel) {\n        var chartView = ecIns._chartsMap[seriesModel.__viewId];\n        chartView.__alive = true;\n        var renderTask = chartView.renderTask;\n        scheduler.updatePayload(renderTask, payload);\n        // TODO states on marker.\n        clearStates(seriesModel, chartView);\n        if (dirtyMap && dirtyMap.get(seriesModel.uid)) {\n          renderTask.dirty();\n        }\n        if (renderTask.perform(scheduler.getPerformArgs(renderTask))) {\n          unfinished = true;\n        }\n        chartView.group.silent = !!seriesModel.get('silent');\n        // Should not call markRedraw on group, because it will disable zrender\n        // incremental render (always render from the __startIndex each frame)\n        // chartView.group.markRedraw();\n        updateBlend(seriesModel, chartView);\n        updateSeriesElementSelection(seriesModel);\n      });\n      scheduler.unfinished = unfinished || scheduler.unfinished;\n      lifecycle.trigger('series:layoutlabels', ecModel, api, updateParams);\n      // transition after label is layouted.\n      lifecycle.trigger('series:transition', ecModel, api, updateParams);\n      ecModel.eachSeries(function (seriesModel) {\n        var chartView = ecIns._chartsMap[seriesModel.__viewId];\n        // Update Z after labels updated. Before applying states.\n        updateZ(seriesModel, chartView);\n        // NOTE: Update states after label is updated.\n        // label should be in normal status when layouting.\n        updateStates(seriesModel, chartView);\n      });\n      // If use hover layer\n      updateHoverLayerStatus(ecIns, ecModel);\n      lifecycle.trigger('series:afterupdate', ecModel, api, updateParams);\n    };\n    markStatusToUpdate = function (ecIns) {\n      ecIns[STATUS_NEEDS_UPDATE_KEY] = true;\n      // Wake up zrender if it's sleep. Let it update states in the next frame.\n      ecIns.getZr().wakeUp();\n    };\n    updateMainProcessVersion = function (ecIns) {\n      ecIns[MAIN_PROCESS_VERSION_KEY] = (ecIns[MAIN_PROCESS_VERSION_KEY] + 1) % 1000;\n    };\n    applyChangedStates = function (ecIns) {\n      if (!ecIns[STATUS_NEEDS_UPDATE_KEY]) {\n        return;\n      }\n      ecIns.getZr().storage.traverse(function (el) {\n        // Not applied on removed elements, it may still in fading.\n        if (graphic.isElementRemoved(el)) {\n          return;\n        }\n        applyElementStates(el);\n      });\n      ecIns[STATUS_NEEDS_UPDATE_KEY] = false;\n    };\n    function applyElementStates(el) {\n      var newStates = [];\n      var oldStates = el.currentStates;\n      // Keep other states.\n      for (var i = 0; i < oldStates.length; i++) {\n        var stateName = oldStates[i];\n        if (!(stateName === 'emphasis' || stateName === 'blur' || stateName === 'select')) {\n          newStates.push(stateName);\n        }\n      }\n      // Only use states when it's exists.\n      if (el.selected && el.states.select) {\n        newStates.push('select');\n      }\n      if (el.hoverState === HOVER_STATE_EMPHASIS && el.states.emphasis) {\n        newStates.push('emphasis');\n      } else if (el.hoverState === HOVER_STATE_BLUR && el.states.blur) {\n        newStates.push('blur');\n      }\n      el.useStates(newStates);\n    }\n    function updateHoverLayerStatus(ecIns, ecModel) {\n      var zr = ecIns._zr;\n      var storage = zr.storage;\n      var elCount = 0;\n      storage.traverse(function (el) {\n        if (!el.isGroup) {\n          elCount++;\n        }\n      });\n      if (elCount > ecModel.get('hoverLayerThreshold') && !env.node && !env.worker) {\n        ecModel.eachSeries(function (seriesModel) {\n          if (seriesModel.preventUsingHoverLayer) {\n            return;\n          }\n          var chartView = ecIns._chartsMap[seriesModel.__viewId];\n          if (chartView.__alive) {\n            chartView.eachRendered(function (el) {\n              if (el.states.emphasis) {\n                el.states.emphasis.hoverLayer = true;\n              }\n            });\n          }\n        });\n      }\n    }\n    ;\n    /**\n     * Update chart and blend.\n     */\n    function updateBlend(seriesModel, chartView) {\n      var blendMode = seriesModel.get('blendMode') || null;\n      chartView.eachRendered(function (el) {\n        // FIXME marker and other components\n        if (!el.isGroup) {\n          // DON'T mark the element dirty. In case element is incremental and don't want to rerender.\n          el.style.blend = blendMode;\n        }\n      });\n    }\n    ;\n    function updateZ(model, view) {\n      if (model.preventAutoZ) {\n        return;\n      }\n      var zInfo = graphic.retrieveZInfo(model);\n      // Set z and zlevel\n      view.eachRendered(function (el) {\n        graphic.traverseUpdateZ(el, zInfo.z, zInfo.zlevel);\n        // Don't traverse the children because it has been traversed in _updateZ.\n        return true;\n      });\n    }\n    ;\n    // Clear states without animation.\n    // TODO States on component.\n    function clearStates(model, view) {\n      view.eachRendered(function (el) {\n        // Not applied on removed elements, it may still in fading.\n        if (graphic.isElementRemoved(el)) {\n          return;\n        }\n        var textContent = el.getTextContent();\n        var textGuide = el.getTextGuideLine();\n        if (el.stateTransition) {\n          el.stateTransition = null;\n        }\n        if (textContent && textContent.stateTransition) {\n          textContent.stateTransition = null;\n        }\n        if (textGuide && textGuide.stateTransition) {\n          textGuide.stateTransition = null;\n        }\n        // TODO If el is incremental.\n        if (el.hasState()) {\n          el.prevStates = el.currentStates;\n          el.clearStates();\n        } else if (el.prevStates) {\n          el.prevStates = null;\n        }\n      });\n    }\n    function updateStates(model, view) {\n      var stateAnimationModel = model.getModel('stateAnimation');\n      var enableAnimation = model.isAnimationEnabled();\n      var duration = stateAnimationModel.get('duration');\n      var stateTransition = duration > 0 ? {\n        duration: duration,\n        delay: stateAnimationModel.get('delay'),\n        easing: stateAnimationModel.get('easing')\n        // additive: stateAnimationModel.get('additive')\n      } : null;\n      view.eachRendered(function (el) {\n        if (el.states && el.states.emphasis) {\n          // Not applied on removed elements, it may still in fading.\n          if (graphic.isElementRemoved(el)) {\n            return;\n          }\n          if (el instanceof graphic.Path) {\n            savePathStates(el);\n          }\n          // Only updated on changed element. In case element is incremental and don't want to rerender.\n          // TODO, a more proper way?\n          if (el.__dirty) {\n            var prevStates = el.prevStates;\n            // Restore states without animation\n            if (prevStates) {\n              el.useStates(prevStates);\n            }\n          }\n          // Update state transition and enable animation again.\n          if (enableAnimation) {\n            el.stateTransition = stateTransition;\n            var textContent = el.getTextContent();\n            var textGuide = el.getTextGuideLine();\n            // TODO Is it necessary to animate label?\n            if (textContent) {\n              textContent.stateTransition = stateTransition;\n            }\n            if (textGuide) {\n              textGuide.stateTransition = stateTransition;\n            }\n          }\n          // Use highlighted and selected flag to toggle states.\n          if (el.__dirty) {\n            applyElementStates(el);\n          }\n        }\n      });\n    }\n    ;\n    createExtensionAPI = function (ecIns) {\n      return new (/** @class */function (_super) {\n        __extends(class_1, _super);\n        function class_1() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n        class_1.prototype.getCoordinateSystems = function () {\n          return ecIns._coordSysMgr.getCoordinateSystems();\n        };\n        class_1.prototype.getComponentByElement = function (el) {\n          while (el) {\n            var modelInfo = el.__ecComponentInfo;\n            if (modelInfo != null) {\n              return ecIns._model.getComponent(modelInfo.mainType, modelInfo.index);\n            }\n            el = el.parent;\n          }\n        };\n        class_1.prototype.enterEmphasis = function (el, highlightDigit) {\n          enterEmphasis(el, highlightDigit);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.leaveEmphasis = function (el, highlightDigit) {\n          leaveEmphasis(el, highlightDigit);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.enterBlur = function (el) {\n          enterBlur(el);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.leaveBlur = function (el) {\n          leaveBlur(el);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.enterSelect = function (el) {\n          enterSelect(el);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.leaveSelect = function (el) {\n          leaveSelect(el);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.getModel = function () {\n          return ecIns.getModel();\n        };\n        class_1.prototype.getViewOfComponentModel = function (componentModel) {\n          return ecIns.getViewOfComponentModel(componentModel);\n        };\n        class_1.prototype.getViewOfSeriesModel = function (seriesModel) {\n          return ecIns.getViewOfSeriesModel(seriesModel);\n        };\n        class_1.prototype.getMainProcessVersion = function () {\n          return ecIns[MAIN_PROCESS_VERSION_KEY];\n        };\n        return class_1;\n      }(ExtensionAPI))(ecIns);\n    };\n    enableConnect = function (chart) {\n      function updateConnectedChartsStatus(charts, status) {\n        for (var i = 0; i < charts.length; i++) {\n          var otherChart = charts[i];\n          otherChart[CONNECT_STATUS_KEY] = status;\n        }\n      }\n      each(connectionEventRevertMap, function (_, eventType) {\n        chart._messageCenter.on(eventType, function (event) {\n          if (connectedGroups[chart.group] && chart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_PENDING) {\n            if (event && event.escapeConnect) {\n              return;\n            }\n            var action_1 = chart.makeActionFromEvent(event);\n            var otherCharts_1 = [];\n            each(instances, function (otherChart) {\n              if (otherChart !== chart && otherChart.group === chart.group) {\n                otherCharts_1.push(otherChart);\n              }\n            });\n            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_PENDING);\n            each(otherCharts_1, function (otherChart) {\n              if (otherChart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_UPDATING) {\n                otherChart.dispatchAction(action_1);\n              }\n            });\n            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_UPDATED);\n          }\n        });\n      });\n    };\n  }();\n  return ECharts;\n}(Eventful);\nvar echartsProto = ECharts.prototype;\nechartsProto.on = createRegisterEventWithLowercaseECharts('on');\nechartsProto.off = createRegisterEventWithLowercaseECharts('off');\n/**\n * @deprecated\n */\n// @ts-ignore\nechartsProto.one = function (eventName, cb, ctx) {\n  var self = this;\n  deprecateLog('ECharts#one is deprecated.');\n  function wrapped() {\n    var args2 = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args2[_i] = arguments[_i];\n    }\n    cb && cb.apply && cb.apply(this, args2);\n    // @ts-ignore\n    self.off(eventName, wrapped);\n  }\n  ;\n  // @ts-ignore\n  this.on.call(this, eventName, wrapped, ctx);\n};\nvar MOUSE_EVENT_NAMES = ['click', 'dblclick', 'mouseover', 'mouseout', 'mousemove', 'mousedown', 'mouseup', 'globalout', 'contextmenu'];\nfunction disposedWarning(id) {\n  if (process.env.NODE_ENV !== 'production') {\n    warn('Instance ' + id + ' has been disposed');\n  }\n}\nvar actions = {};\n/**\n * Map event type to action type for reproducing action from event for `connect`.\n */\nvar connectionEventRevertMap = {};\n/**\n * To remove duplication.\n */\nvar publicEventTypeMap = {};\nvar dataProcessorFuncs = [];\nvar optionPreprocessorFuncs = [];\nvar visualFuncs = [];\nvar themeStorage = {};\nvar loadingEffects = {};\nvar instances = {};\nvar connectedGroups = {};\nvar idBase = +new Date() - 0;\nvar groupIdBase = +new Date() - 0;\nvar DOM_ATTRIBUTE_KEY = '_echarts_instance_';\n/**\n * @param opts.devicePixelRatio Use window.devicePixelRatio by default\n * @param opts.renderer Can choose 'canvas' or 'svg' to render the chart.\n * @param opts.width Use clientWidth of the input `dom` by default.\n *        Can be 'auto' (the same as null/undefined)\n * @param opts.height Use clientHeight of the input `dom` by default.\n *        Can be 'auto' (the same as null/undefined)\n * @param opts.locale Specify the locale.\n * @param opts.useDirtyRect Enable dirty rectangle rendering or not.\n */\nexport function init(dom, theme, opts) {\n  var isClient = !(opts && opts.ssr);\n  if (isClient) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!dom) {\n        throw new Error('Initialize failed: invalid dom.');\n      }\n    }\n    var existInstance = getInstanceByDom(dom);\n    if (existInstance) {\n      if (process.env.NODE_ENV !== 'production') {\n        warn('There is a chart instance already initialized on the dom.');\n      }\n      return existInstance;\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      if (isDom(dom) && dom.nodeName.toUpperCase() !== 'CANVAS' && (!dom.clientWidth && (!opts || opts.width == null) || !dom.clientHeight && (!opts || opts.height == null))) {\n        warn('Can\\'t get DOM width or height. Please check ' + 'dom.clientWidth and dom.clientHeight. They should not be 0.' + 'For example, you may need to call this in the callback ' + 'of window.onload.');\n      }\n    }\n  }\n  var chart = new ECharts(dom, theme, opts);\n  chart.id = 'ec_' + idBase++;\n  instances[chart.id] = chart;\n  isClient && modelUtil.setAttribute(dom, DOM_ATTRIBUTE_KEY, chart.id);\n  enableConnect(chart);\n  lifecycle.trigger('afterinit', chart);\n  return chart;\n}\n/**\n * @usage\n * (A)\n * ```js\n * let chart1 = echarts.init(dom1);\n * let chart2 = echarts.init(dom2);\n * chart1.group = 'xxx';\n * chart2.group = 'xxx';\n * echarts.connect('xxx');\n * ```\n * (B)\n * ```js\n * let chart1 = echarts.init(dom1);\n * let chart2 = echarts.init(dom2);\n * echarts.connect('xxx', [chart1, chart2]);\n * ```\n */\nexport function connect(groupId) {\n  // Is array of charts\n  if (isArray(groupId)) {\n    var charts = groupId;\n    groupId = null;\n    // If any chart has group\n    each(charts, function (chart) {\n      if (chart.group != null) {\n        groupId = chart.group;\n      }\n    });\n    groupId = groupId || 'g_' + groupIdBase++;\n    each(charts, function (chart) {\n      chart.group = groupId;\n    });\n  }\n  connectedGroups[groupId] = true;\n  return groupId;\n}\nexport function disconnect(groupId) {\n  connectedGroups[groupId] = false;\n}\n/**\n * Alias and backward compatibility\n * @deprecated\n */\nexport var disConnect = disconnect;\n/**\n * Dispose a chart instance\n */\nexport function dispose(chart) {\n  if (isString(chart)) {\n    chart = instances[chart];\n  } else if (!(chart instanceof ECharts)) {\n    // Try to treat as dom\n    chart = getInstanceByDom(chart);\n  }\n  if (chart instanceof ECharts && !chart.isDisposed()) {\n    chart.dispose();\n  }\n}\nexport function getInstanceByDom(dom) {\n  return instances[modelUtil.getAttribute(dom, DOM_ATTRIBUTE_KEY)];\n}\nexport function getInstanceById(key) {\n  return instances[key];\n}\n/**\n * Register theme\n */\nexport function registerTheme(name, theme) {\n  themeStorage[name] = theme;\n}\n/**\n * Register option preprocessor\n */\nexport function registerPreprocessor(preprocessorFunc) {\n  if (indexOf(optionPreprocessorFuncs, preprocessorFunc) < 0) {\n    optionPreprocessorFuncs.push(preprocessorFunc);\n  }\n}\nexport function registerProcessor(priority, processor) {\n  normalizeRegister(dataProcessorFuncs, priority, processor, PRIORITY_PROCESSOR_DEFAULT);\n}\n/**\n * Register postIniter\n * @param {Function} postInitFunc\n */\nexport function registerPostInit(postInitFunc) {\n  registerUpdateLifecycle('afterinit', postInitFunc);\n}\n/**\n * Register postUpdater\n * @param {Function} postUpdateFunc\n */\nexport function registerPostUpdate(postUpdateFunc) {\n  registerUpdateLifecycle('afterupdate', postUpdateFunc);\n}\nexport function registerUpdateLifecycle(name, cb) {\n  lifecycle.on(name, cb);\n}\nexport function registerAction(arg0, arg1, action) {\n  var actionType;\n  var publicEventType;\n  var refineEvent;\n  var update;\n  var publishNonRefinedEvent;\n  if (isFunction(arg1)) {\n    action = arg1;\n    arg1 = '';\n  }\n  if (isObject(arg0)) {\n    actionType = arg0.type;\n    publicEventType = arg0.event;\n    update = arg0.update;\n    publishNonRefinedEvent = arg0.publishNonRefinedEvent;\n    if (!action) {\n      action = arg0.action;\n    }\n    refineEvent = arg0.refineEvent;\n  } else {\n    actionType = arg0;\n    publicEventType = arg1;\n  }\n  function createEventType(actionOrEventType) {\n    // Event type should be all lowercase\n    return actionOrEventType.toLowerCase();\n  }\n  publicEventType = createEventType(publicEventType || actionType);\n  // See comments on {ActionInfo} for the reason.\n  var nonRefinedEventType = refineEvent ? createEventType(actionType) : publicEventType;\n  // Support calling `registerAction` multiple times with the same action\n  // type; subsequent calls have no effect.\n  if (actions[actionType]) {\n    return;\n  }\n  // Validate action type and event name.\n  assert(ACTION_REG.test(actionType) && ACTION_REG.test(publicEventType));\n  if (refineEvent) {\n    // An event replicated from the action will be triggered internally for `connect` in this case.\n    assert(publicEventType !== actionType);\n  }\n  actions[actionType] = {\n    actionType: actionType,\n    refinedEventType: publicEventType,\n    nonRefinedEventType: nonRefinedEventType,\n    update: update,\n    action: action,\n    refineEvent: refineEvent\n  };\n  publicEventTypeMap[publicEventType] = 1;\n  if (refineEvent && publishNonRefinedEvent) {\n    publicEventTypeMap[nonRefinedEventType] = 1;\n  }\n  if (process.env.NODE_ENV !== 'production' && connectionEventRevertMap[nonRefinedEventType]) {\n    error(nonRefinedEventType + \" must not be shared; use \\\"refineEvent\\\" if you intend to share an event name.\");\n  }\n  connectionEventRevertMap[nonRefinedEventType] = actionType;\n}\nexport function registerCoordinateSystem(type, coordSysCreator) {\n  CoordinateSystemManager.register(type, coordSysCreator);\n}\n/**\n * Get dimensions of specified coordinate system.\n * @param {string} type\n * @return {Array.<string|Object>}\n */\nexport function getCoordinateSystemDimensions(type) {\n  var coordSysCreator = CoordinateSystemManager.get(type);\n  if (coordSysCreator) {\n    return coordSysCreator.getDimensionsInfo ? coordSysCreator.getDimensionsInfo() : coordSysCreator.dimensions.slice();\n  }\n}\nexport function registerCustomSeries(seriesType, renderItem) {\n  registerCustom(seriesType, renderItem);\n}\nexport { registerLocale } from './locale.js';\nfunction registerLayout(priority, layoutTask) {\n  normalizeRegister(visualFuncs, priority, layoutTask, PRIORITY_VISUAL_LAYOUT, 'layout');\n}\nfunction registerVisual(priority, visualTask) {\n  normalizeRegister(visualFuncs, priority, visualTask, PRIORITY_VISUAL_CHART, 'visual');\n}\nexport { registerLayout, registerVisual };\nvar registeredTasks = [];\nfunction normalizeRegister(targetList, priority, fn, defaultPriority, visualType) {\n  if (isFunction(priority) || isObject(priority)) {\n    fn = priority;\n    priority = defaultPriority;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    if (isNaN(priority) || priority == null) {\n      throw new Error('Illegal priority');\n    }\n    // Check duplicate\n    each(targetList, function (wrap) {\n      assert(wrap.__raw !== fn);\n    });\n  }\n  // Already registered\n  if (indexOf(registeredTasks, fn) >= 0) {\n    return;\n  }\n  registeredTasks.push(fn);\n  var stageHandler = Scheduler.wrapStageHandler(fn, visualType);\n  stageHandler.__prio = priority;\n  stageHandler.__raw = fn;\n  targetList.push(stageHandler);\n}\nexport function registerLoading(name, loadingFx) {\n  loadingEffects[name] = loadingFx;\n}\n/**\n * ZRender need a canvas context to do measureText.\n * But in node environment canvas may be created by node-canvas.\n * So we need to specify how to create a canvas instead of using document.createElement('canvas')\n *\n *\n * @deprecated use setPlatformAPI({ createCanvas }) instead.\n *\n * @example\n *     let Canvas = require('canvas');\n *     let echarts = require('echarts');\n *     echarts.setCanvasCreator(function () {\n *         // Small size is enough.\n *         return new Canvas(32, 32);\n *     });\n */\nexport function setCanvasCreator(creator) {\n  if (process.env.NODE_ENV !== 'production') {\n    deprecateLog('setCanvasCreator is deprecated. Use setPlatformAPI({ createCanvas }) instead.');\n  }\n  setPlatformAPI({\n    createCanvas: creator\n  });\n}\n/**\n * The parameters and usage: see `geoSourceManager.registerMap`.\n * Compatible with previous `echarts.registerMap`.\n */\nexport function registerMap(mapName, geoJson, specialAreas) {\n  var registerMap = getImpl('registerMap');\n  registerMap && registerMap(mapName, geoJson, specialAreas);\n}\nexport function getMap(mapName) {\n  var getMap = getImpl('getMap');\n  return getMap && getMap(mapName);\n}\nexport var registerTransform = registerExternalTransform;\n/**\n * Globa dispatchAction to a specified chart instance.\n */\n// export function dispatchAction(payload: { chartId: string } & Payload, opt?: Parameters<ECharts['dispatchAction']>[1]) {\n//     if (!payload || !payload.chartId) {\n//         // Must have chartId to find chart\n//         return;\n//     }\n//     const chart = instances[payload.chartId];\n//     if (chart) {\n//         chart.dispatchAction(payload, opt);\n//     }\n// }\n// Builtin global visual\nregisterVisual(PRIORITY_VISUAL_GLOBAL, seriesStyleTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataStyleTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataColorPaletteTask);\nregisterVisual(PRIORITY_VISUAL_GLOBAL, seriesSymbolTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataSymbolTask);\nregisterVisual(PRIORITY_VISUAL_DECAL, decal);\nregisterPreprocessor(backwardCompat);\nregisterProcessor(PRIORITY_PROCESSOR_DATASTACK, dataStack);\nregisterLoading('default', loadingDefault);\n// Default actions\nregisterAction({\n  type: HIGHLIGHT_ACTION_TYPE,\n  event: HIGHLIGHT_ACTION_TYPE,\n  update: HIGHLIGHT_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: DOWNPLAY_ACTION_TYPE,\n  event: DOWNPLAY_ACTION_TYPE,\n  update: DOWNPLAY_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: SELECT_ACTION_TYPE,\n  event: SELECT_CHANGED_EVENT_TYPE,\n  update: SELECT_ACTION_TYPE,\n  action: noop,\n  refineEvent: makeSelectChangedEvent,\n  publishNonRefinedEvent: true\n});\nregisterAction({\n  type: UNSELECT_ACTION_TYPE,\n  event: SELECT_CHANGED_EVENT_TYPE,\n  update: UNSELECT_ACTION_TYPE,\n  action: noop,\n  refineEvent: makeSelectChangedEvent,\n  publishNonRefinedEvent: true\n});\nregisterAction({\n  type: TOGGLE_SELECT_ACTION_TYPE,\n  event: SELECT_CHANGED_EVENT_TYPE,\n  update: TOGGLE_SELECT_ACTION_TYPE,\n  action: noop,\n  refineEvent: makeSelectChangedEvent,\n  publishNonRefinedEvent: true\n});\nfunction makeSelectChangedEvent(actionResultBatch, payload, ecModel, api) {\n  return {\n    eventContent: {\n      selected: getAllSelectedIndices(ecModel),\n      isFromClick: payload.isFromClick || false\n    }\n  };\n}\n// Default theme, so that we can use `chart.setTheme('default')` to revert to\n// the default theme after changing to other themes.\nregisterTheme('default', {});\nregisterTheme('dark', darkTheme);\n// For backward compatibility, where the namespace `dataTool` will\n// be mounted on `echarts` is the extension `dataTool` is imported.\nexport var dataTool = {};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { registerPreprocessor, registerProcessor, registerPostInit, registerPostUpdate, registerAction, registerCoordinateSystem, registerLayout, registerVisual, registerTransform, registerLoading, registerMap, registerUpdateLifecycle, PRIORITY } from './core/echarts.js';\nimport ComponentView from './view/Component.js';\nimport ChartView from './view/Chart.js';\nimport ComponentModel from './model/Component.js';\nimport SeriesModel from './model/Series.js';\nimport { isFunction, indexOf, isArray, each } from 'zrender/lib/core/util.js';\nimport { registerImpl } from './core/impl.js';\nimport { registerPainter } from 'zrender/lib/zrender.js';\nimport { registerCustomSeries } from './chart/custom/customSeriesRegister.js';\nvar extensions = [];\nvar extensionRegisters = {\n  registerPreprocessor: registerPreprocessor,\n  registerProcessor: registerProcessor,\n  registerPostInit: registerPostInit,\n  registerPostUpdate: registerPostUpdate,\n  registerUpdateLifecycle: registerUpdateLifecycle,\n  registerAction: registerAction,\n  registerCoordinateSystem: registerCoordinateSystem,\n  registerLayout: registerLayout,\n  registerVisual: registerVisual,\n  registerTransform: registerTransform,\n  registerLoading: registerLoading,\n  registerMap: registerMap,\n  registerImpl: registerImpl,\n  PRIORITY: PRIORITY,\n  ComponentModel: ComponentModel,\n  ComponentView: ComponentView,\n  SeriesModel: SeriesModel,\n  ChartView: ChartView,\n  // TODO Use ComponentModel and SeriesModel instead of Constructor\n  registerComponentModel: function (ComponentModelClass) {\n    ComponentModel.registerClass(ComponentModelClass);\n  },\n  registerComponentView: function (ComponentViewClass) {\n    ComponentView.registerClass(ComponentViewClass);\n  },\n  registerSeriesModel: function (SeriesModelClass) {\n    SeriesModel.registerClass(SeriesModelClass);\n  },\n  registerChartView: function (ChartViewClass) {\n    ChartView.registerClass(ChartViewClass);\n  },\n  registerCustomSeries: function (seriesType, renderItem) {\n    registerCustomSeries(seriesType, renderItem);\n  },\n  registerSubTypeDefaulter: function (componentType, defaulter) {\n    ComponentModel.registerSubTypeDefaulter(componentType, defaulter);\n  },\n  registerPainter: function (painterType, PainterCtor) {\n    registerPainter(painterType, PainterCtor);\n  }\n};\nexport function use(ext) {\n  if (isArray(ext)) {\n    // use([ChartLine, ChartBar]);\n    each(ext, function (singleExt) {\n      use(singleExt);\n    });\n    return;\n  }\n  if (indexOf(extensions, ext) >= 0) {\n    return;\n  }\n  extensions.push(ext);\n  if (isFunction(ext)) {\n    ext = {\n      install: ext\n    };\n  }\n  ext.install(extensionRegisters);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nimport { getLayoutParams, mergeLayoutParam } from '../../util/layout.js';\nimport tokens from '../../visual/tokens.js';\n// For backward compatibility, do not use a margin. Although the labels might touch the edge of\n// the canvas, the chart canvas probably does not have an border or a different background color within a page.\nexport var OUTER_BOUNDS_DEFAULT = {\n  left: 0,\n  right: 0,\n  top: 0,\n  bottom: 0\n};\nexport var OUTER_BOUNDS_CLAMP_DEFAULT = ['25%', '25%'];\nvar GridModel = /** @class */function (_super) {\n  __extends(GridModel, _super);\n  function GridModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  GridModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n    var outerBoundsCp = getLayoutParams(option.outerBounds);\n    _super.prototype.mergeDefaultAndTheme.apply(this, arguments);\n    if (outerBoundsCp && option.outerBounds) {\n      mergeLayoutParam(option.outerBounds, outerBoundsCp);\n    }\n  };\n  GridModel.prototype.mergeOption = function (newOption, ecModel) {\n    _super.prototype.mergeOption.apply(this, arguments);\n    if (this.option.outerBounds && newOption.outerBounds) {\n      mergeLayoutParam(this.option.outerBounds, newOption.outerBounds);\n    }\n  };\n  GridModel.type = 'grid';\n  GridModel.dependencies = ['xAxis', 'yAxis'];\n  GridModel.layoutMode = 'box';\n  GridModel.defaultOption = {\n    show: false,\n    // zlevel: 0,\n    z: 0,\n    left: '15%',\n    top: 65,\n    right: '10%',\n    bottom: 80,\n    // If grid size contain label\n    containLabel: false,\n    outerBoundsMode: 'auto',\n    outerBounds: OUTER_BOUNDS_DEFAULT,\n    outerBoundsContain: 'all',\n    outerBoundsClampWidth: OUTER_BOUNDS_CLAMP_DEFAULT[0],\n    outerBoundsClampHeight: OUTER_BOUNDS_CLAMP_DEFAULT[1],\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    backgroundColor: tokens.color.transparent,\n    borderWidth: 1,\n    borderColor: tokens.color.neutral30\n  };\n  return GridModel;\n}(ComponentModel);\nexport default GridModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nvar AxisModelCommonMixin = /** @class */function () {\n  function AxisModelCommonMixin() {}\n  AxisModelCommonMixin.prototype.getNeedCrossZero = function () {\n    var option = this.option;\n    return !option.scale;\n  };\n  /**\n   * Should be implemented by each axis model if necessary.\n   * @return coordinate system model\n   */\n  AxisModelCommonMixin.prototype.getCoordSysModel = function () {\n    return;\n  };\n  return AxisModelCommonMixin;\n}();\nexport { AxisModelCommonMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ComponentModel from '../../model/Component.js';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\nvar CartesianAxisModel = /** @class */function (_super) {\n  __extends(CartesianAxisModel, _super);\n  function CartesianAxisModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  CartesianAxisModel.prototype.getCoordSysModel = function () {\n    return this.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n  };\n  CartesianAxisModel.type = 'cartesian2dAxis';\n  return CartesianAxisModel;\n}(ComponentModel);\nexport { CartesianAxisModel };\nzrUtil.mixin(CartesianAxisModel, AxisModelCommonMixin);\nexport default CartesianAxisModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport tokens from '../visual/tokens.js';\nvar defaultOption = {\n  show: true,\n  // zlevel: 0,\n  z: 0,\n  // Inverse the axis.\n  inverse: false,\n  // Axis name displayed.\n  name: '',\n  // 'start' | 'middle' | 'end'\n  nameLocation: 'end',\n  // By degree. By default auto rotate by nameLocation.\n  nameRotate: null,\n  nameTruncate: {\n    maxWidth: null,\n    ellipsis: '...',\n    placeholder: '.'\n  },\n  // Use global text style by default.\n  nameTextStyle: {\n    // textMargin: never, // The default value will be specified based on `nameLocation`.\n  },\n  // The gap between axisName and axisLine.\n  nameGap: 15,\n  // Default `false` to support tooltip.\n  silent: false,\n  // Default `false` to avoid legacy user event listener fail.\n  triggerEvent: false,\n  tooltip: {\n    show: false\n  },\n  axisPointer: {},\n  axisLine: {\n    show: true,\n    onZero: true,\n    onZeroAxisIndex: null,\n    lineStyle: {\n      color: tokens.color.axisLine,\n      width: 1,\n      type: 'solid'\n    },\n    // The arrow at both ends the the axis.\n    symbol: ['none', 'none'],\n    symbolSize: [10, 15],\n    breakLine: true\n  },\n  axisTick: {\n    show: true,\n    // Whether axisTick is inside the grid or outside the grid.\n    inside: false,\n    // The length of axisTick.\n    length: 5,\n    lineStyle: {\n      width: 1\n    }\n  },\n  axisLabel: {\n    show: true,\n    // Whether axisLabel is inside the grid or outside the grid.\n    inside: false,\n    rotate: 0,\n    // true | false | null/undefined (auto)\n    showMinLabel: null,\n    // true | false | null/undefined (auto)\n    showMaxLabel: null,\n    margin: 8,\n    // formatter: null,\n    fontSize: 12,\n    color: tokens.color.axisLabel,\n    // In scenarios like axis labels, when labels text's progression direction matches the label\n    // layout direction (e.g., when all letters are in a single line), extra start/end margin is\n    // needed to prevent the text from appearing visually joined. In the other case, when lables\n    // are stacked (e.g., having rotation or horizontal labels on yAxis), the layout needs to be\n    // compact, so NO extra top/bottom margin should be applied.\n    textMargin: [0, 3]\n  },\n  splitLine: {\n    show: true,\n    showMinLine: true,\n    showMaxLine: true,\n    lineStyle: {\n      color: tokens.color.axisSplitLine,\n      width: 1,\n      type: 'solid'\n    }\n  },\n  splitArea: {\n    show: false,\n    areaStyle: {\n      color: [tokens.color.backgroundTint, tokens.color.backgroundTransparent]\n    }\n  },\n  breakArea: {\n    show: true,\n    itemStyle: {\n      color: tokens.color.neutral00,\n      // Break border color should be darker than the splitLine\n      // because it has opacity and should be more prominent\n      borderColor: tokens.color.border,\n      borderWidth: 1,\n      borderType: [3, 3],\n      opacity: 0.6\n    },\n    zigzagAmplitude: 4,\n    zigzagMinSpan: 4,\n    zigzagMaxSpan: 20,\n    zigzagZ: 100,\n    expandOnClick: true\n  },\n  breakLabelLayout: {\n    moveOverlap: 'auto'\n  }\n};\nvar categoryAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For categoryAxis, boolean.\n  boundaryGap: true,\n  // Set false to faster category collection.\n  deduplication: null,\n  jitter: 0,\n  jitterOverlap: true,\n  jitterMargin: 2,\n  // splitArea: {\n  // show: false\n  // },\n  splitLine: {\n    show: false\n  },\n  axisTick: {\n    // If tick is align with label when boundaryGap is true\n    alignWithLabel: false,\n    interval: 'auto',\n    show: 'auto'\n  },\n  axisLabel: {\n    interval: 'auto'\n  }\n}, defaultOption);\nvar valueAxis = zrUtil.merge({\n  boundaryGap: [0, 0],\n  axisLine: {\n    // Not shown when other axis is categoryAxis in cartesian\n    show: 'auto'\n  },\n  axisTick: {\n    // Not shown when other axis is categoryAxis in cartesian\n    show: 'auto'\n  },\n  // TODO\n  // min/max: [30, datamin, 60] or [20, datamin] or [datamin, 60]\n  splitNumber: 5,\n  minorTick: {\n    // Minor tick, not available for cateogry axis.\n    show: false,\n    // Split number of minor ticks. The value should be in range of (0, 100)\n    splitNumber: 5,\n    // Length of minor tick\n    length: 3,\n    // Line style\n    lineStyle: {\n      // Default to be same with axisTick\n    }\n  },\n  minorSplitLine: {\n    show: false,\n    lineStyle: {\n      color: tokens.color.axisMinorSplitLine,\n      width: 1\n    }\n  }\n}, defaultOption);\nvar timeAxis = zrUtil.merge({\n  splitNumber: 6,\n  axisLabel: {\n    // To eliminate labels that are not nice\n    showMinLabel: false,\n    showMaxLabel: false,\n    rich: {\n      primary: {\n        fontWeight: 'bold'\n      }\n    }\n  },\n  splitLine: {\n    show: false\n  }\n}, valueAxis);\nvar logAxis = zrUtil.defaults({\n  logBase: 10\n}, valueAxis);\nexport default {\n  category: categoryAxis,\n  value: valueAxis,\n  time: timeAxis,\n  log: logAxis\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createHashMap, isObject, map, isString } from 'zrender/lib/core/util.js';\nvar uidBase = 0;\nvar OrdinalMeta = /** @class */function () {\n  /**\n   * PENDING - Regarding forcibly converting to string:\n   *  In the early days, the underlying hash map impl used JS plain object and converted the key to\n   *  string; later in https://github.com/ecomfe/zrender/pull/966 it was changed to a JS Map (in supported\n   *  platforms), which does not require string keys. But consider any input that `scale/Ordinal['parse']`\n   *  is involved, a number input represents an `OrdinalNumber` (i.e., an index), and affect the query\n   *  behavior:\n   *    - If forcbily converting to string:\n   *      pros: users can use numeric string (such as, '123') to query the raw data (123), tho it's probably\n   *      still confusing.\n   *      cons: NaN/null/undefined in data will be equals to 'NaN'/'null'/'undefined', if simply using\n   *      `val + ''` to convert them, like currently `getName` does.\n   *    - Otherwise:\n   *      pros: see NaN/null/undefined case above.\n   *      cons: users cannot query the raw data (123) any more.\n   *  There are two inconsistent behaviors in the current impl:\n   *    - Force conversion is applied on the case `xAxis{data: ['aaa', 'bbb', ...]}`,\n   *      but no conversion applied to the case `xAxis{data: [{value: 'aaa'}, ...]}` and\n   *      the case `dataset: {source: [['aaa', 123], ['bbb', 234], ...]}`.\n   *    - behaves differently according to whether JS Map is supported (the polyfill is simply using JS\n   *      plain object) (tho it seems rare platform that do not support it).\n   *  Since there's no sufficient good solution to offset cost of the breaking change, we preserve the\n   *  current behavior, until real issues is reported.\n   */\n  function OrdinalMeta(opt) {\n    this.categories = opt.categories || [];\n    this._needCollect = opt.needCollect;\n    this._deduplication = opt.deduplication;\n    this.uid = ++uidBase;\n    this._onCollect = opt.onCollect;\n  }\n  OrdinalMeta.createByAxisModel = function (axisModel) {\n    var option = axisModel.option;\n    var data = option.data;\n    var categories = data && map(data, getName);\n    return new OrdinalMeta({\n      categories: categories,\n      needCollect: !categories,\n      // deduplication is default in axis.\n      deduplication: option.dedplication !== false\n    });\n  };\n  ;\n  OrdinalMeta.prototype.getOrdinal = function (category) {\n    return this._getOrCreateMap().get(category);\n  };\n  /**\n   * @return The ordinal. If not found, return NaN.\n   */\n  OrdinalMeta.prototype.parseAndCollect = function (category) {\n    var index;\n    var needCollect = this._needCollect;\n    // The value of category dim can be the index of the given category set.\n    // This feature is only supported when !needCollect, because we should\n    // consider a common case: a value is 2017, which is a number but is\n    // expected to be tread as a category. This case usually happen in dataset,\n    // where it happent to be no need of the index feature.\n    if (!isString(category) && !needCollect) {\n      return category;\n    }\n    // Optimize for the scenario:\n    // category is ['2012-01-01', '2012-01-02', ...], where the input\n    // data has been ensured not duplicate and is large data.\n    // Notice, if a dataset dimension provide categroies, usually echarts\n    // should remove duplication except user tell echarts dont do that\n    // (set axis.deduplication = false), because echarts do not know whether\n    // the values in the category dimension has duplication (consider the\n    // parallel-aqi example)\n    if (needCollect && !this._deduplication) {\n      index = this.categories.length;\n      this.categories[index] = category;\n      this._onCollect && this._onCollect(category, index);\n      return index;\n    }\n    var map = this._getOrCreateMap();\n    index = map.get(category);\n    if (index == null) {\n      if (needCollect) {\n        index = this.categories.length;\n        this.categories[index] = category;\n        map.set(category, index);\n        this._onCollect && this._onCollect(category, index);\n      } else {\n        index = NaN;\n      }\n    }\n    return index;\n  };\n  // Consider big data, do not create map until needed.\n  OrdinalMeta.prototype._getOrCreateMap = function () {\n    return this._map || (this._map = createHashMap(this.categories));\n  };\n  return OrdinalMeta;\n}();\nfunction getName(obj) {\n  if (isObject(obj) && obj.value != null) {\n    return obj.value;\n  } else {\n    return obj + '';\n  }\n}\nexport default OrdinalMeta;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport var AXIS_TYPES = {\n  value: 1,\n  category: 1,\n  time: 1,\n  log: 1\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _impl = null;\nexport function registerAxisBreakHelperImpl(impl) {\n  if (!_impl) {\n    _impl = impl;\n  }\n}\nexport function getAxisBreakHelper() {\n  return _impl;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport axisDefault from './axisDefault.js';\nimport { getLayoutParams, mergeLayoutParam, fetchLayoutMode } from '../util/layout.js';\nimport OrdinalMeta from '../data/OrdinalMeta.js';\nimport { AXIS_TYPES } from './axisCommonTypes.js';\nimport { each, merge } from 'zrender/lib/core/util.js';\nimport { getAxisBreakHelper } from '../component/axis/axisBreakHelper.js';\n/**\n * Generate sub axis model class\n * @param axisName 'x' 'y' 'radius' 'angle' 'parallel' ...\n */\nexport default function axisModelCreator(registers, axisName, BaseAxisModelClass, extraDefaultOption) {\n  each(AXIS_TYPES, function (v, axisType) {\n    var defaultOption = merge(merge({}, axisDefault[axisType], true), extraDefaultOption, true);\n    var AxisModel = /** @class */function (_super) {\n      __extends(AxisModel, _super);\n      function AxisModel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = axisName + 'Axis.' + axisType;\n        return _this;\n      }\n      AxisModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n        var layoutMode = fetchLayoutMode(this);\n        var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n        var themeModel = ecModel.getTheme();\n        merge(option, themeModel.get(axisType + 'Axis'));\n        merge(option, this.getDefaultOption());\n        option.type = getAxisType(option);\n        if (layoutMode) {\n          mergeLayoutParam(option, inputPositionParams, layoutMode);\n        }\n      };\n      AxisModel.prototype.optionUpdated = function () {\n        var thisOption = this.option;\n        if (thisOption.type === 'category') {\n          this.__ordinalMeta = OrdinalMeta.createByAxisModel(this);\n        }\n      };\n      /**\n       * Should not be called before all of 'getInitailData' finished.\n       * Because categories are collected during initializing data.\n       */\n      AxisModel.prototype.getCategories = function (rawData) {\n        var option = this.option;\n        // FIXME\n        // warning if called before all of 'getInitailData' finished.\n        if (option.type === 'category') {\n          if (rawData) {\n            return option.data;\n          }\n          return this.__ordinalMeta.categories;\n        }\n      };\n      AxisModel.prototype.getOrdinalMeta = function () {\n        return this.__ordinalMeta;\n      };\n      AxisModel.prototype.updateAxisBreaks = function (payload) {\n        var axisBreakHelper = getAxisBreakHelper();\n        return axisBreakHelper ? axisBreakHelper.updateModelAxisBreak(this, payload) : {\n          breaks: []\n        };\n      };\n      AxisModel.type = axisName + 'Axis.' + axisType;\n      AxisModel.defaultOption = defaultOption;\n      return AxisModel;\n    }(BaseAxisModelClass);\n    registers.registerComponentModel(AxisModel);\n  });\n  registers.registerSubTypeDefaulter(axisName + 'Axis', getAxisType);\n}\nfunction getAxisType(option) {\n  // Default axis with data is category axis\n  return option.type || (option.data ? 'category' : 'value');\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { getPrecision, round, nice, quantityExponent } from '../util/number.js';\nimport { bind } from 'zrender/lib/core/util.js';\nexport function isValueNice(val) {\n  var exp10 = Math.pow(10, quantityExponent(Math.abs(val)));\n  var f = Math.abs(val / exp10);\n  return f === 0 || f === 1 || f === 2 || f === 3 || f === 5;\n}\nexport function isIntervalOrLogScale(scale) {\n  return scale.type === 'interval' || scale.type === 'log';\n}\n/**\n * @param extent Both extent[0] and extent[1] should be valid number.\n *               Should be extent[0] < extent[1].\n * @param splitNumber splitNumber should be >= 1.\n */\nexport function intervalScaleNiceTicks(extent, spanWithBreaks, splitNumber, minInterval, maxInterval) {\n  var result = {};\n  var interval = result.interval = nice(spanWithBreaks / splitNumber, true);\n  if (minInterval != null && interval < minInterval) {\n    interval = result.interval = minInterval;\n  }\n  if (maxInterval != null && interval > maxInterval) {\n    interval = result.interval = maxInterval;\n  }\n  // Tow more digital for tick.\n  var precision = result.intervalPrecision = getIntervalPrecision(interval);\n  // Niced extent inside original extent\n  var niceTickExtent = result.niceTickExtent = [round(Math.ceil(extent[0] / interval) * interval, precision), round(Math.floor(extent[1] / interval) * interval, precision)];\n  fixExtent(niceTickExtent, extent);\n  return result;\n}\nexport function increaseInterval(interval) {\n  var exp10 = Math.pow(10, quantityExponent(interval));\n  // Increase interval\n  var f = interval / exp10;\n  if (!f) {\n    f = 1;\n  } else if (f === 2) {\n    f = 3;\n  } else if (f === 3) {\n    f = 5;\n  } else {\n    // f is 1 or 5\n    f *= 2;\n  }\n  return round(f * exp10);\n}\n/**\n * @return interval precision\n */\nexport function getIntervalPrecision(interval) {\n  // Tow more digital for tick.\n  return getPrecision(interval) + 2;\n}\nfunction clamp(niceTickExtent, idx, extent) {\n  niceTickExtent[idx] = Math.max(Math.min(niceTickExtent[idx], extent[1]), extent[0]);\n}\n// In some cases (e.g., splitNumber is 1), niceTickExtent may be out of extent.\nexport function fixExtent(niceTickExtent, extent) {\n  !isFinite(niceTickExtent[0]) && (niceTickExtent[0] = extent[0]);\n  !isFinite(niceTickExtent[1]) && (niceTickExtent[1] = extent[1]);\n  clamp(niceTickExtent, 0, extent);\n  clamp(niceTickExtent, 1, extent);\n  if (niceTickExtent[0] > niceTickExtent[1]) {\n    niceTickExtent[0] = niceTickExtent[1];\n  }\n}\nexport function contain(val, extent) {\n  return val >= extent[0] && val <= extent[1];\n}\nvar ScaleCalculator = /** @class */function () {\n  function ScaleCalculator() {\n    this.normalize = normalize;\n    this.scale = scale;\n  }\n  ScaleCalculator.prototype.updateMethods = function (brkCtx) {\n    if (brkCtx.hasBreaks()) {\n      this.normalize = bind(brkCtx.normalize, brkCtx);\n      this.scale = bind(brkCtx.scale, brkCtx);\n    } else {\n      this.normalize = normalize;\n      this.scale = scale;\n    }\n  };\n  return ScaleCalculator;\n}();\nexport { ScaleCalculator };\nfunction normalize(val, extent) {\n  if (extent[1] === extent[0]) {\n    return 0.5;\n  }\n  return (val - extent[0]) / (extent[1] - extent[0]);\n}\nfunction scale(val, extent) {\n  return val * (extent[1] - extent[0]) + extent[0];\n}\nexport function logTransform(base, extent, noClampNegative) {\n  var loggedBase = Math.log(base);\n  return [\n  // log(negative) is NaN, so safe guard here.\n  // PENDING: But even getting a -Infinity still does not make sense in extent.\n  //  Just keep it as is, getting a NaN to make some previous cases works by coincidence.\n  Math.log(noClampNegative ? extent[0] : Math.max(0, extent[0])) / loggedBase, Math.log(noClampNegative ? extent[1] : Math.max(0, extent[1])) / loggedBase];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as clazzUtil from '../util/clazz.js';\nimport { ScaleCalculator } from './helper.js';\nimport { bind } from 'zrender/lib/core/util.js';\nimport { getScaleBreakHelper } from './break.js';\nvar Scale = /** @class */function () {\n  function Scale(setting) {\n    this._calculator = new ScaleCalculator();\n    this._setting = setting || {};\n    this._extent = [Infinity, -Infinity];\n    var scaleBreakHelper = getScaleBreakHelper();\n    if (scaleBreakHelper) {\n      this._brkCtx = scaleBreakHelper.createScaleBreakContext();\n      this._brkCtx.update(this._extent);\n    }\n  }\n  Scale.prototype.getSetting = function (name) {\n    return this._setting[name];\n  };\n  /**\n   * [CAVEAT]: It should not be overridden!\n   */\n  Scale.prototype._innerUnionExtent = function (other) {\n    var extent = this._extent;\n    // Considered that number could be NaN and should not write into the extent.\n    this._innerSetExtent(other[0] < extent[0] ? other[0] : extent[0], other[1] > extent[1] ? other[1] : extent[1]);\n  };\n  /**\n   * Set extent from data\n   */\n  Scale.prototype.unionExtentFromData = function (data, dim) {\n    this._innerUnionExtent(data.getApproximateExtent(dim));\n  };\n  /**\n   * Get a new slice of extent.\n   * Extent is always in increase order.\n   */\n  Scale.prototype.getExtent = function () {\n    return this._extent.slice();\n  };\n  Scale.prototype.setExtent = function (start, end) {\n    this._innerSetExtent(start, end);\n  };\n  /**\n   * [CAVEAT]: It should not be overridden!\n   */\n  Scale.prototype._innerSetExtent = function (start, end) {\n    var thisExtent = this._extent;\n    if (!isNaN(start)) {\n      thisExtent[0] = start;\n    }\n    if (!isNaN(end)) {\n      thisExtent[1] = end;\n    }\n    this._brkCtx && this._brkCtx.update(thisExtent);\n  };\n  /**\n   * Prerequisite: Scale#parse is ready.\n   */\n  Scale.prototype.setBreaksFromOption = function (breakOptionList) {\n    var scaleBreakHelper = getScaleBreakHelper();\n    if (scaleBreakHelper) {\n      this._innerSetBreak(scaleBreakHelper.parseAxisBreakOption(breakOptionList, bind(this.parse, this)));\n    }\n  };\n  /**\n   * [CAVEAT]: It should not be overridden!\n   */\n  Scale.prototype._innerSetBreak = function (parsed) {\n    if (this._brkCtx) {\n      this._brkCtx.setBreaks(parsed);\n      this._calculator.updateMethods(this._brkCtx);\n      this._brkCtx.update(this._extent);\n    }\n  };\n  /**\n   * [CAVEAT]: It should not be overridden!\n   */\n  Scale.prototype._innerGetBreaks = function () {\n    return this._brkCtx ? this._brkCtx.breaks : [];\n  };\n  /**\n   * Do not expose the internal `_breaks` unless necessary.\n   */\n  Scale.prototype.hasBreaks = function () {\n    return this._brkCtx ? this._brkCtx.hasBreaks() : false;\n  };\n  Scale.prototype._getExtentSpanWithBreaks = function () {\n    return this._brkCtx && this._brkCtx.hasBreaks() ? this._brkCtx.getExtentSpan() : this._extent[1] - this._extent[0];\n  };\n  /**\n   * If value is in extent range\n   */\n  Scale.prototype.isInExtentRange = function (value) {\n    return this._extent[0] <= value && this._extent[1] >= value;\n  };\n  /**\n   * When axis extent depends on data and no data exists,\n   * axis ticks should not be drawn, which is named 'blank'.\n   */\n  Scale.prototype.isBlank = function () {\n    return this._isBlank;\n  };\n  /**\n   * When axis extent depends on data and no data exists,\n   * axis ticks should not be drawn, which is named 'blank'.\n   */\n  Scale.prototype.setBlank = function (isBlank) {\n    this._isBlank = isBlank;\n  };\n  return Scale;\n}();\nclazzUtil.enableClassManagement(Scale);\nexport default Scale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Linear continuous scale\n * http://en.wikipedia.org/wiki/Level_of_measurement\n */\n// FIXME only one data\nimport Scale from './Scale.js';\nimport OrdinalMeta from '../data/OrdinalMeta.js';\nimport * as scaleHelper from './helper.js';\nimport { isArray, map, isObject, isString } from 'zrender/lib/core/util.js';\nvar OrdinalScale = /** @class */function (_super) {\n  __extends(OrdinalScale, _super);\n  function OrdinalScale(setting) {\n    var _this = _super.call(this, setting) || this;\n    _this.type = 'ordinal';\n    var ordinalMeta = _this.getSetting('ordinalMeta');\n    // Caution: Should not use instanceof, consider ec-extensions using\n    // import approach to get OrdinalMeta class.\n    if (!ordinalMeta) {\n      ordinalMeta = new OrdinalMeta({});\n    }\n    if (isArray(ordinalMeta)) {\n      ordinalMeta = new OrdinalMeta({\n        categories: map(ordinalMeta, function (item) {\n          return isObject(item) ? item.value : item;\n        })\n      });\n    }\n    _this._ordinalMeta = ordinalMeta;\n    _this._extent = _this.getSetting('extent') || [0, ordinalMeta.categories.length - 1];\n    return _this;\n  }\n  OrdinalScale.prototype.parse = function (val) {\n    // Caution: Math.round(null) will return `0` rather than `NaN`\n    if (val == null) {\n      return NaN;\n    }\n    return isString(val) ? this._ordinalMeta.getOrdinal(val)\n    // val might be float.\n    : Math.round(val);\n  };\n  OrdinalScale.prototype.contain = function (val) {\n    return scaleHelper.contain(val, this._extent) && val >= 0 && val < this._ordinalMeta.categories.length;\n  };\n  /**\n   * Normalize given rank or name to linear [0, 1]\n   * @param val raw ordinal number.\n   * @return normalized value in [0, 1].\n   */\n  OrdinalScale.prototype.normalize = function (val) {\n    val = this._getTickNumber(val);\n    return this._calculator.normalize(val, this._extent);\n  };\n  /**\n   * @param val normalized value in [0, 1].\n   * @return raw ordinal number.\n   */\n  OrdinalScale.prototype.scale = function (val) {\n    val = Math.round(this._calculator.scale(val, this._extent));\n    return this.getRawOrdinalNumber(val);\n  };\n  OrdinalScale.prototype.getTicks = function () {\n    var ticks = [];\n    var extent = this._extent;\n    var rank = extent[0];\n    while (rank <= extent[1]) {\n      ticks.push({\n        value: rank\n      });\n      rank++;\n    }\n    return ticks;\n  };\n  OrdinalScale.prototype.getMinorTicks = function (splitNumber) {\n    // Not support.\n    return;\n  };\n  /**\n   * @see `Ordinal['_ordinalNumbersByTick']`\n   */\n  OrdinalScale.prototype.setSortInfo = function (info) {\n    if (info == null) {\n      this._ordinalNumbersByTick = this._ticksByOrdinalNumber = null;\n      return;\n    }\n    var infoOrdinalNumbers = info.ordinalNumbers;\n    var ordinalsByTick = this._ordinalNumbersByTick = [];\n    var ticksByOrdinal = this._ticksByOrdinalNumber = [];\n    // Unnecessary support negative tick in `realtimeSort`.\n    var tickNum = 0;\n    var allCategoryLen = this._ordinalMeta.categories.length;\n    for (var len = Math.min(allCategoryLen, infoOrdinalNumbers.length); tickNum < len; ++tickNum) {\n      var ordinalNumber = infoOrdinalNumbers[tickNum];\n      ordinalsByTick[tickNum] = ordinalNumber;\n      ticksByOrdinal[ordinalNumber] = tickNum;\n    }\n    // Handle that `series.data` only covers part of the `axis.category.data`.\n    var unusedOrdinal = 0;\n    for (; tickNum < allCategoryLen; ++tickNum) {\n      while (ticksByOrdinal[unusedOrdinal] != null) {\n        unusedOrdinal++;\n      }\n      ;\n      ordinalsByTick.push(unusedOrdinal);\n      ticksByOrdinal[unusedOrdinal] = tickNum;\n    }\n  };\n  OrdinalScale.prototype._getTickNumber = function (ordinal) {\n    var ticksByOrdinalNumber = this._ticksByOrdinalNumber;\n    // also support ordinal out of range of `ordinalMeta.categories.length`,\n    // where ordinal numbers are used as tick value directly.\n    return ticksByOrdinalNumber && ordinal >= 0 && ordinal < ticksByOrdinalNumber.length ? ticksByOrdinalNumber[ordinal] : ordinal;\n  };\n  /**\n   * @usage\n   * ```js\n   * const ordinalNumber = ordinalScale.getRawOrdinalNumber(tickVal);\n   *\n   * // case0\n   * const rawOrdinalValue = axisModel.getCategories()[ordinalNumber];\n   * // case1\n   * const rawOrdinalValue = this._ordinalMeta.categories[ordinalNumber];\n   * // case2\n   * const coord = axis.dataToCoord(ordinalNumber);\n   * ```\n   *\n   * @param {OrdinalNumber} tickNumber index of display\n   */\n  OrdinalScale.prototype.getRawOrdinalNumber = function (tickNumber) {\n    var ordinalNumbersByTick = this._ordinalNumbersByTick;\n    // tickNumber may be out of range, e.g., when axis max is larger than `ordinalMeta.categories.length`.,\n    // where ordinal numbers are used as tick value directly.\n    return ordinalNumbersByTick && tickNumber >= 0 && tickNumber < ordinalNumbersByTick.length ? ordinalNumbersByTick[tickNumber] : tickNumber;\n  };\n  /**\n   * Get item on tick\n   */\n  OrdinalScale.prototype.getLabel = function (tick) {\n    if (!this.isBlank()) {\n      var ordinalNumber = this.getRawOrdinalNumber(tick.value);\n      var cateogry = this._ordinalMeta.categories[ordinalNumber];\n      // Note that if no data, ordinalMeta.categories is an empty array.\n      // Return empty if it's not exist.\n      return cateogry == null ? '' : cateogry + '';\n    }\n  };\n  OrdinalScale.prototype.count = function () {\n    return this._extent[1] - this._extent[0] + 1;\n  };\n  /**\n   * @override\n   * If value is in extent range\n   */\n  OrdinalScale.prototype.isInExtentRange = function (value) {\n    value = this._getTickNumber(value);\n    return this._extent[0] <= value && this._extent[1] >= value;\n  };\n  OrdinalScale.prototype.getOrdinalMeta = function () {\n    return this._ordinalMeta;\n  };\n  OrdinalScale.prototype.calcNiceTicks = function () {};\n  OrdinalScale.prototype.calcNiceExtent = function () {};\n  OrdinalScale.type = 'ordinal';\n  return OrdinalScale;\n}(Scale);\nScale.registerClass(OrdinalScale);\nexport default OrdinalScale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as numberUtil from '../util/number.js';\nimport * as formatUtil from '../util/format.js';\nimport Scale from './Scale.js';\nimport * as helper from './helper.js';\nimport { getScaleBreakHelper } from './break.js';\nvar roundNumber = numberUtil.round;\nvar IntervalScale = /** @class */function (_super) {\n  __extends(IntervalScale, _super);\n  function IntervalScale() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'interval';\n    // Step is calculated in adjustExtent.\n    _this._interval = 0;\n    _this._intervalPrecision = 2;\n    return _this;\n  }\n  IntervalScale.prototype.parse = function (val) {\n    // `Scale#parse` (and its overrids) are typically applied at the axis values input\n    // in echarts option. e.g., `axis.min/max`, `dataZoom.min/max`, etc.\n    // but `series.data` is not included, which uses `dataValueHelper.ts`#`parseDataValue`.\n    // `Scale#parse` originally introduced in fb8c813215098b9d2458966229bb95c510883d5e\n    // at 2016 for dataZoom start/end settings (See `parseAxisModelMinMax`).\n    //\n    // Historically `scale/Interval.ts` returns the input value directly. But numeric\n    // values (such as a number-like string '123') effectively passed through here and\n    // were involved in calculations, which was error-prone and inconsistent with the\n    // declared TS return type. Previously such issues are fixed separately in different\n    // places case by case (such as #2475).\n    //\n    // Now, we perform actual parse to ensure its `number` type here. The parsing rule\n    // follows the series data parsing rule (`dataValueHelper.ts`#`parseDataValue`)\n    // and maintains compatibility as much as possible (thus a more strict parsing\n    // `number.ts`#`numericToNumber` is not used here.)\n    //\n    // FIXME: `ScaleDataValue` also need to be modified to include numeric string type,\n    //  since it effectively does.\n    return val == null || val === '' ? NaN\n    // If string (like '-'), using '+' parse to NaN\n    // If object, also parse to NaN\n    : Number(val);\n  };\n  IntervalScale.prototype.contain = function (val) {\n    return helper.contain(val, this._extent);\n  };\n  IntervalScale.prototype.normalize = function (val) {\n    return this._calculator.normalize(val, this._extent);\n  };\n  IntervalScale.prototype.scale = function (val) {\n    return this._calculator.scale(val, this._extent);\n  };\n  IntervalScale.prototype.getInterval = function () {\n    return this._interval;\n  };\n  IntervalScale.prototype.setInterval = function (interval) {\n    this._interval = interval;\n    // Dropped auto calculated niceExtent and use user-set extent.\n    // We assume user wants to set both interval, min, max to get a better result.\n    this._niceExtent = this._extent.slice();\n    this._intervalPrecision = helper.getIntervalPrecision(interval);\n  };\n  /**\n   * @override\n   */\n  IntervalScale.prototype.getTicks = function (opt) {\n    opt = opt || {};\n    var interval = this._interval;\n    var extent = this._extent;\n    var niceTickExtent = this._niceExtent;\n    var intervalPrecision = this._intervalPrecision;\n    var scaleBreakHelper = getScaleBreakHelper();\n    var ticks = [];\n    // If interval is 0, return [];\n    if (!interval) {\n      return ticks;\n    }\n    if (opt.breakTicks === 'only_break' && scaleBreakHelper) {\n      scaleBreakHelper.addBreaksToTicks(ticks, this._brkCtx.breaks, this._extent);\n      return ticks;\n    }\n    // Consider this case: using dataZoom toolbox, zoom and zoom.\n    var safeLimit = 10000;\n    if (extent[0] < niceTickExtent[0]) {\n      if (opt.expandToNicedExtent) {\n        ticks.push({\n          value: roundNumber(niceTickExtent[0] - interval, intervalPrecision)\n        });\n      } else {\n        ticks.push({\n          value: extent[0]\n        });\n      }\n    }\n    var estimateNiceMultiple = function (tickVal, targetTick) {\n      return Math.round((targetTick - tickVal) / interval);\n    };\n    var tick = niceTickExtent[0];\n    while (tick <= niceTickExtent[1]) {\n      ticks.push({\n        value: tick\n      });\n      // Avoid rounding error\n      tick = roundNumber(tick + interval, intervalPrecision);\n      if (this._brkCtx) {\n        var moreMultiple = this._brkCtx.calcNiceTickMultiple(tick, estimateNiceMultiple);\n        if (moreMultiple >= 0) {\n          tick = roundNumber(tick + moreMultiple * interval, intervalPrecision);\n        }\n      }\n      if (ticks.length > 0 && tick === ticks[ticks.length - 1].value) {\n        // Consider out of safe float point, e.g.,\n        // -3711126.9907707 + 2e-10 === -3711126.9907707\n        break;\n      }\n      if (ticks.length > safeLimit) {\n        return [];\n      }\n    }\n    // Consider this case: the last item of ticks is smaller\n    // than niceTickExtent[1] and niceTickExtent[1] === extent[1].\n    var lastNiceTick = ticks.length ? ticks[ticks.length - 1].value : niceTickExtent[1];\n    if (extent[1] > lastNiceTick) {\n      if (opt.expandToNicedExtent) {\n        ticks.push({\n          value: roundNumber(lastNiceTick + interval, intervalPrecision)\n        });\n      } else {\n        ticks.push({\n          value: extent[1]\n        });\n      }\n    }\n    if (scaleBreakHelper) {\n      scaleBreakHelper.pruneTicksByBreak(opt.pruneByBreak, ticks, this._brkCtx.breaks, function (item) {\n        return item.value;\n      }, this._interval, this._extent);\n    }\n    if (opt.breakTicks !== 'none' && scaleBreakHelper) {\n      scaleBreakHelper.addBreaksToTicks(ticks, this._brkCtx.breaks, this._extent);\n    }\n    return ticks;\n  };\n  IntervalScale.prototype.getMinorTicks = function (splitNumber) {\n    var ticks = this.getTicks({\n      expandToNicedExtent: true\n    });\n    // NOTE: In log-scale, do not support minor ticks when breaks exist.\n    //  because currently log-scale minor ticks is calculated based on raw values\n    //  rather than log-transformed value, due to an odd effect when breaks exist.\n    var minorTicks = [];\n    var extent = this.getExtent();\n    for (var i = 1; i < ticks.length; i++) {\n      var nextTick = ticks[i];\n      var prevTick = ticks[i - 1];\n      if (prevTick[\"break\"] || nextTick[\"break\"]) {\n        // Do not build minor ticks to the adjacent ticks to breaks ticks,\n        // since the interval might be irregular.\n        continue;\n      }\n      var count = 0;\n      var minorTicksGroup = [];\n      var interval = nextTick.value - prevTick.value;\n      var minorInterval = interval / splitNumber;\n      var minorIntervalPrecision = helper.getIntervalPrecision(minorInterval);\n      while (count < splitNumber - 1) {\n        var minorTick = roundNumber(prevTick.value + (count + 1) * minorInterval, minorIntervalPrecision);\n        // For the first and last interval. The count may be less than splitNumber.\n        if (minorTick > extent[0] && minorTick < extent[1]) {\n          minorTicksGroup.push(minorTick);\n        }\n        count++;\n      }\n      var scaleBreakHelper = getScaleBreakHelper();\n      scaleBreakHelper && scaleBreakHelper.pruneTicksByBreak('auto', minorTicksGroup, this._getNonTransBreaks(), function (value) {\n        return value;\n      }, this._interval, extent);\n      minorTicks.push(minorTicksGroup);\n    }\n    return minorTicks;\n  };\n  IntervalScale.prototype._getNonTransBreaks = function () {\n    return this._brkCtx ? this._brkCtx.breaks : [];\n  };\n  /**\n   * @param opt.precision If 'auto', use nice presision.\n   * @param opt.pad returns 1.50 but not 1.5 if precision is 2.\n   */\n  IntervalScale.prototype.getLabel = function (data, opt) {\n    if (data == null) {\n      return '';\n    }\n    var precision = opt && opt.precision;\n    if (precision == null) {\n      precision = numberUtil.getPrecision(data.value) || 0;\n    } else if (precision === 'auto') {\n      // Should be more precise then tick.\n      precision = this._intervalPrecision;\n    }\n    // (1) If `precision` is set, 12.005 should be display as '12.00500'.\n    // (2) Use roundNumber (toFixed) to avoid scientific notation like '3.5e-7'.\n    var dataNum = roundNumber(data.value, precision, true);\n    return formatUtil.addCommas(dataNum);\n  };\n  /**\n   * FIXME: refactor - disallow override, use composition instead.\n   *\n   * The override of `calcNiceTicks` should ensure these members are provided:\n   *  this._intervalPrecision\n   *  this._interval\n   *\n   * @param splitNumber By default `5`.\n   */\n  IntervalScale.prototype.calcNiceTicks = function (splitNumber, minInterval, maxInterval) {\n    splitNumber = splitNumber || 5;\n    var extent = this._extent.slice();\n    var span = this._getExtentSpanWithBreaks();\n    if (!isFinite(span)) {\n      return;\n    }\n    // User may set axis min 0 and data are all negative\n    // FIXME If it needs to reverse ?\n    if (span < 0) {\n      span = -span;\n      extent.reverse();\n      this._innerSetExtent(extent[0], extent[1]);\n      extent = this._extent.slice();\n    }\n    var result = helper.intervalScaleNiceTicks(extent, span, splitNumber, minInterval, maxInterval);\n    this._intervalPrecision = result.intervalPrecision;\n    this._interval = result.interval;\n    this._niceExtent = result.niceTickExtent;\n  };\n  IntervalScale.prototype.calcNiceExtent = function (opt) {\n    var extent = this._extent.slice();\n    // If extent start and end are same, expand them\n    if (extent[0] === extent[1]) {\n      if (extent[0] !== 0) {\n        // Expand extent\n        // Note that extents can be both negative. See #13154\n        var expandSize = Math.abs(extent[0]);\n        // In the fowllowing case\n        //      Axis has been fixed max 100\n        //      Plus data are all 100 and axis extent are [100, 100].\n        // Extend to the both side will cause expanded max is larger than fixed max.\n        // So only expand to the smaller side.\n        if (!opt.fixMax) {\n          extent[1] += expandSize / 2;\n          extent[0] -= expandSize / 2;\n        } else {\n          extent[0] -= expandSize / 2;\n        }\n      } else {\n        extent[1] = 1;\n      }\n    }\n    var span = extent[1] - extent[0];\n    // If there are no data and extent are [Infinity, -Infinity]\n    if (!isFinite(span)) {\n      extent[0] = 0;\n      extent[1] = 1;\n    }\n    this._innerSetExtent(extent[0], extent[1]);\n    extent = this._extent.slice();\n    this.calcNiceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval);\n    var interval = this._interval;\n    var intervalPrecition = this._intervalPrecision;\n    if (!opt.fixMin) {\n      extent[0] = roundNumber(Math.floor(extent[0] / interval) * interval, intervalPrecition);\n    }\n    if (!opt.fixMax) {\n      extent[1] = roundNumber(Math.ceil(extent[1] / interval) * interval, intervalPrecition);\n    }\n    this._innerSetExtent(extent[0], extent[1]);\n  };\n  IntervalScale.prototype.setNiceExtent = function (min, max) {\n    this._niceExtent = [min, max];\n  };\n  IntervalScale.type = 'interval';\n  return IntervalScale;\n}(Scale);\nScale.registerClass(IntervalScale);\nexport default IntervalScale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/*\n* A third-party license is embedded for some of the code in this file:\n* The \"scaleLevels\" was originally copied from \"d3.js\" with some\n* modifications made for this project.\n* (See more details in the comment on the definition of \"scaleLevels\" below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\n// [About UTC and local time zone]:\n// In most cases, `number.parseDate` will treat input data string as local time\n// (except time zone is specified in time string). And `format.formateTime` returns\n// local time by default. option.useUTC is false by default. This design has\n// considered these common cases:\n// (1) Time that is persistent in server is in UTC, but it is needed to be displayed\n// in local time by default.\n// (2) By default, the input data string (e.g., '2011-01-02') should be displayed\n// as its original time, without any time difference.\nimport * as numberUtil from '../util/number.js';\nimport { ONE_SECOND, ONE_MINUTE, ONE_HOUR, ONE_DAY, ONE_YEAR, format, leveledFormat, timeUnits, fullLeveledFormatter, getPrimaryTimeUnit, isPrimaryTimeUnit, getDefaultFormatPrecisionOfInterval, fullYearGetterName, monthSetterName, fullYearSetterName, dateSetterName, hoursGetterName, hoursSetterName, minutesSetterName, secondsSetterName, millisecondsSetterName, monthGetterName, dateGetterName, minutesGetterName, secondsGetterName, millisecondsGetterName, getUnitFromValue, primaryTimeUnits, roundTime } from '../util/time.js';\nimport * as scaleHelper from './helper.js';\nimport IntervalScale from './Interval.js';\nimport Scale from './Scale.js';\nimport { warn } from '../util/log.js';\nimport { each, filter, indexOf, isNumber, map } from 'zrender/lib/core/util.js';\nimport { getScaleBreakHelper } from './break.js';\n// FIXME \nvar bisect = function (a, x, lo, hi) {\n  while (lo < hi) {\n    var mid = lo + hi >>> 1;\n    if (a[mid][1] < x) {\n      lo = mid + 1;\n    } else {\n      hi = mid;\n    }\n  }\n  return lo;\n};\nvar TimeScale = /** @class */function (_super) {\n  __extends(TimeScale, _super);\n  function TimeScale(settings) {\n    var _this = _super.call(this, settings) || this;\n    _this.type = 'time';\n    return _this;\n  }\n  /**\n   * Get label is mainly for other components like dataZoom, tooltip.\n   */\n  TimeScale.prototype.getLabel = function (tick) {\n    var useUTC = this.getSetting('useUTC');\n    return format(tick.value, fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))] || fullLeveledFormatter.second, useUTC, this.getSetting('locale'));\n  };\n  TimeScale.prototype.getFormattedLabel = function (tick, idx, labelFormatter) {\n    var isUTC = this.getSetting('useUTC');\n    var lang = this.getSetting('locale');\n    return leveledFormat(tick, idx, labelFormatter, lang, isUTC);\n  };\n  /**\n   * @override\n   */\n  TimeScale.prototype.getTicks = function (opt) {\n    opt = opt || {};\n    var interval = this._interval;\n    var extent = this._extent;\n    var scaleBreakHelper = getScaleBreakHelper();\n    var ticks = [];\n    // If interval is 0, return [];\n    if (!interval) {\n      return ticks;\n    }\n    var useUTC = this.getSetting('useUTC');\n    if (scaleBreakHelper && opt.breakTicks === 'only_break') {\n      getScaleBreakHelper().addBreaksToTicks(ticks, this._brkCtx.breaks, this._extent);\n      return ticks;\n    }\n    var extent0Unit = getUnitFromValue(extent[1], useUTC);\n    ticks.push({\n      value: extent[0],\n      time: {\n        level: 0,\n        upperTimeUnit: extent0Unit,\n        lowerTimeUnit: extent0Unit\n      }\n    });\n    var innerTicks = getIntervalTicks(this._minLevelUnit, this._approxInterval, useUTC, extent, this._getExtentSpanWithBreaks(), this._brkCtx);\n    ticks = ticks.concat(innerTicks);\n    var extent1Unit = getUnitFromValue(extent[1], useUTC);\n    ticks.push({\n      value: extent[1],\n      time: {\n        level: 0,\n        upperTimeUnit: extent1Unit,\n        lowerTimeUnit: extent1Unit\n      }\n    });\n    var isUTC = this.getSetting('useUTC');\n    var upperUnitIndex = primaryTimeUnits.length - 1;\n    var maxLevel = 0;\n    each(ticks, function (tick) {\n      upperUnitIndex = Math.min(upperUnitIndex, indexOf(primaryTimeUnits, tick.time.upperTimeUnit));\n      maxLevel = Math.max(maxLevel, tick.time.level);\n    });\n    if (scaleBreakHelper) {\n      getScaleBreakHelper().pruneTicksByBreak(opt.pruneByBreak, ticks, this._brkCtx.breaks, function (item) {\n        return item.value;\n      }, this._approxInterval, this._extent);\n    }\n    if (scaleBreakHelper && opt.breakTicks !== 'none') {\n      getScaleBreakHelper().addBreaksToTicks(ticks, this._brkCtx.breaks, this._extent, function (trimmedBrk) {\n        // @see `parseTimeAxisLabelFormatterDictionary`.\n        var lowerBrkUnitIndex = Math.max(indexOf(primaryTimeUnits, getUnitFromValue(trimmedBrk.vmin, isUTC)), indexOf(primaryTimeUnits, getUnitFromValue(trimmedBrk.vmax, isUTC)));\n        var upperBrkUnitIndex = 0;\n        for (var unitIdx = 0; unitIdx < primaryTimeUnits.length; unitIdx++) {\n          if (!isPrimaryUnitValueAndGreaterSame(primaryTimeUnits[unitIdx], trimmedBrk.vmin, trimmedBrk.vmax, isUTC)) {\n            upperBrkUnitIndex = unitIdx;\n            break;\n          }\n        }\n        var upperIdx = Math.min(upperBrkUnitIndex, upperUnitIndex);\n        var lowerIdx = Math.max(upperIdx, lowerBrkUnitIndex);\n        return {\n          level: maxLevel,\n          lowerTimeUnit: primaryTimeUnits[lowerIdx],\n          upperTimeUnit: primaryTimeUnits[upperIdx]\n        };\n      });\n    }\n    return ticks;\n  };\n  TimeScale.prototype.calcNiceExtent = function (opt) {\n    var extent = this.getExtent();\n    // If extent start and end are same, expand them\n    if (extent[0] === extent[1]) {\n      // Expand extent\n      extent[0] -= ONE_DAY;\n      extent[1] += ONE_DAY;\n    }\n    // If there are no data and extent are [Infinity, -Infinity]\n    if (extent[1] === -Infinity && extent[0] === Infinity) {\n      var d = new Date();\n      extent[1] = +new Date(d.getFullYear(), d.getMonth(), d.getDate());\n      extent[0] = extent[1] - ONE_DAY;\n    }\n    this._innerSetExtent(extent[0], extent[1]);\n    this.calcNiceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval);\n  };\n  TimeScale.prototype.calcNiceTicks = function (approxTickNum, minInterval, maxInterval) {\n    approxTickNum = approxTickNum || 10;\n    var span = this._getExtentSpanWithBreaks();\n    this._approxInterval = span / approxTickNum;\n    if (minInterval != null && this._approxInterval < minInterval) {\n      this._approxInterval = minInterval;\n    }\n    if (maxInterval != null && this._approxInterval > maxInterval) {\n      this._approxInterval = maxInterval;\n    }\n    var scaleIntervalsLen = scaleIntervals.length;\n    var idx = Math.min(bisect(scaleIntervals, this._approxInterval, 0, scaleIntervalsLen), scaleIntervalsLen - 1);\n    // Interval that can be used to calculate ticks\n    this._interval = scaleIntervals[idx][1];\n    this._intervalPrecision = scaleHelper.getIntervalPrecision(this._interval);\n    // Min level used when picking ticks from top down.\n    // We check one more level to avoid the ticks are to sparse in some case.\n    this._minLevelUnit = scaleIntervals[Math.max(idx - 1, 0)][0];\n  };\n  TimeScale.prototype.parse = function (val) {\n    // val might be float.\n    return isNumber(val) ? val : +numberUtil.parseDate(val);\n  };\n  TimeScale.prototype.contain = function (val) {\n    return scaleHelper.contain(val, this._extent);\n  };\n  TimeScale.prototype.normalize = function (val) {\n    return this._calculator.normalize(val, this._extent);\n  };\n  TimeScale.prototype.scale = function (val) {\n    return this._calculator.scale(val, this._extent);\n  };\n  TimeScale.type = 'time';\n  return TimeScale;\n}(IntervalScale);\n/**\n * This implementation was originally copied from \"d3.js\"\n * <https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/time/scale.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n */\nvar scaleIntervals = [\n// Format                           interval\n['second', ONE_SECOND], ['minute', ONE_MINUTE], ['hour', ONE_HOUR], ['quarter-day', ONE_HOUR * 6], ['half-day', ONE_HOUR * 12], ['day', ONE_DAY * 1.2], ['half-week', ONE_DAY * 3.5], ['week', ONE_DAY * 7], ['month', ONE_DAY * 31], ['quarter', ONE_DAY * 95], ['half-year', ONE_YEAR / 2], ['year', ONE_YEAR] // 1Y\n];\nfunction isPrimaryUnitValueAndGreaterSame(unit, valueA, valueB, isUTC) {\n  return roundTime(new Date(valueA), unit, isUTC).getTime() === roundTime(new Date(valueB), unit, isUTC).getTime();\n}\n// function isUnitValueSame(\n//     unit: PrimaryTimeUnit,\n//     valueA: number,\n//     valueB: number,\n//     isUTC: boolean\n// ): boolean {\n//     const dateA = numberUtil.parseDate(valueA) as any;\n//     const dateB = numberUtil.parseDate(valueB) as any;\n//     const isSame = (unit: PrimaryTimeUnit) => {\n//         return getUnitValue(dateA, unit, isUTC)\n//             === getUnitValue(dateB, unit, isUTC);\n//     };\n//     const isSameYear = () => isSame('year');\n//     // const isSameHalfYear = () => isSameYear() && isSame('half-year');\n//     // const isSameQuater = () => isSameYear() && isSame('quarter');\n//     const isSameMonth = () => isSameYear() && isSame('month');\n//     const isSameDay = () => isSameMonth() && isSame('day');\n//     // const isSameHalfDay = () => isSameDay() && isSame('half-day');\n//     const isSameHour = () => isSameDay() && isSame('hour');\n//     const isSameMinute = () => isSameHour() && isSame('minute');\n//     const isSameSecond = () => isSameMinute() && isSame('second');\n//     const isSameMilliSecond = () => isSameSecond() && isSame('millisecond');\n//     switch (unit) {\n//         case 'year':\n//             return isSameYear();\n//         case 'month':\n//             return isSameMonth();\n//         case 'day':\n//             return isSameDay();\n//         case 'hour':\n//             return isSameHour();\n//         case 'minute':\n//             return isSameMinute();\n//         case 'second':\n//             return isSameSecond();\n//         case 'millisecond':\n//             return isSameMilliSecond();\n//     }\n// }\n// const primaryUnitGetters = {\n//     year: fullYearGetterName(),\n//     month: monthGetterName(),\n//     day: dateGetterName(),\n//     hour: hoursGetterName(),\n//     minute: minutesGetterName(),\n//     second: secondsGetterName(),\n//     millisecond: millisecondsGetterName()\n// };\n// const primaryUnitUTCGetters = {\n//     year: fullYearGetterName(true),\n//     month: monthGetterName(true),\n//     day: dateGetterName(true),\n//     hour: hoursGetterName(true),\n//     minute: minutesGetterName(true),\n//     second: secondsGetterName(true),\n//     millisecond: millisecondsGetterName(true)\n// };\n// function moveTick(date: Date, unitName: TimeUnit, step: number, isUTC: boolean) {\n//     step = step || 1;\n//     switch (getPrimaryTimeUnit(unitName)) {\n//         case 'year':\n//             date[fullYearSetterName(isUTC)](date[fullYearGetterName(isUTC)]() + step);\n//             break;\n//         case 'month':\n//             date[monthSetterName(isUTC)](date[monthGetterName(isUTC)]() + step);\n//             break;\n//         case 'day':\n//             date[dateSetterName(isUTC)](date[dateGetterName(isUTC)]() + step);\n//             break;\n//         case 'hour':\n//             date[hoursSetterName(isUTC)](date[hoursGetterName(isUTC)]() + step);\n//             break;\n//         case 'minute':\n//             date[minutesSetterName(isUTC)](date[minutesGetterName(isUTC)]() + step);\n//             break;\n//         case 'second':\n//             date[secondsSetterName(isUTC)](date[secondsGetterName(isUTC)]() + step);\n//             break;\n//         case 'millisecond':\n//             date[millisecondsSetterName(isUTC)](date[millisecondsGetterName(isUTC)]() + step);\n//             break;\n//     }\n//     return date.getTime();\n// }\n// const DATE_INTERVALS = [[8, 7.5], [4, 3.5], [2, 1.5]];\n// const MONTH_INTERVALS = [[6, 5.5], [3, 2.5], [2, 1.5]];\n// const MINUTES_SECONDS_INTERVALS = [[30, 30], [20, 20], [15, 15], [10, 10], [5, 5], [2, 2]];\nfunction getDateInterval(approxInterval, daysInMonth) {\n  approxInterval /= ONE_DAY;\n  return approxInterval > 16 ? 16\n  // Math.floor(daysInMonth / 2) + 1  // In this case we only want one tick between two months.\n  : approxInterval > 7.5 ? 7 // TODO week 7 or day 8?\n  : approxInterval > 3.5 ? 4 : approxInterval > 1.5 ? 2 : 1;\n}\nfunction getMonthInterval(approxInterval) {\n  var APPROX_ONE_MONTH = 30 * ONE_DAY;\n  approxInterval /= APPROX_ONE_MONTH;\n  return approxInterval > 6 ? 6 : approxInterval > 3 ? 3 : approxInterval > 2 ? 2 : 1;\n}\nfunction getHourInterval(approxInterval) {\n  approxInterval /= ONE_HOUR;\n  return approxInterval > 12 ? 12 : approxInterval > 6 ? 6 : approxInterval > 3.5 ? 4 : approxInterval > 2 ? 2 : 1;\n}\nfunction getMinutesAndSecondsInterval(approxInterval, isMinutes) {\n  approxInterval /= isMinutes ? ONE_MINUTE : ONE_SECOND;\n  return approxInterval > 30 ? 30 : approxInterval > 20 ? 20 : approxInterval > 15 ? 15 : approxInterval > 10 ? 10 : approxInterval > 5 ? 5 : approxInterval > 2 ? 2 : 1;\n}\nfunction getMillisecondsInterval(approxInterval) {\n  return numberUtil.nice(approxInterval, true);\n}\n// e.g., if the input unit is 'day', start calculate ticks from the first day of\n// that month to make ticks \"nice\".\nfunction getFirstTimestampOfUnit(timestamp, unitName, isUTC) {\n  var upperUnitIdx = Math.max(0, indexOf(primaryTimeUnits, unitName) - 1);\n  return roundTime(new Date(timestamp), primaryTimeUnits[upperUnitIdx], isUTC).getTime();\n}\nfunction createEstimateNiceMultiple(setMethodName, dateMethodInterval) {\n  var tmpDate = new Date(0);\n  tmpDate[setMethodName](1);\n  var tmpTime = tmpDate.getTime();\n  tmpDate[setMethodName](1 + dateMethodInterval);\n  var approxTimeInterval = tmpDate.getTime() - tmpTime;\n  return function (tickVal, targetValue) {\n    // Only in month that accurate result can not get by division of\n    // timestamp interval, but no need accurate here.\n    return Math.max(0, Math.round((targetValue - tickVal) / approxTimeInterval));\n  };\n}\nfunction getIntervalTicks(bottomUnitName, approxInterval, isUTC, extent, extentSpanWithBreaks, brkCtx) {\n  var safeLimit = 10000;\n  var unitNames = timeUnits;\n  var iter = 0;\n  function addTicksInSpan(interval, minTimestamp, maxTimestamp, getMethodName, setMethodName, isDate, out) {\n    var estimateNiceMultiple = createEstimateNiceMultiple(setMethodName, interval);\n    var dateTime = minTimestamp;\n    var date = new Date(dateTime);\n    // if (isDate) {\n    //     d -= 1; // Starts with 0;   PENDING\n    // }\n    while (dateTime < maxTimestamp && dateTime <= extent[1]) {\n      out.push({\n        value: dateTime\n      });\n      if (iter++ > safeLimit) {\n        if (process.env.NODE_ENV !== 'production') {\n          warn('Exceed safe limit in time scale.');\n        }\n        break;\n      }\n      date[setMethodName](date[getMethodName]() + interval);\n      dateTime = date.getTime();\n      if (brkCtx) {\n        var moreMultiple = brkCtx.calcNiceTickMultiple(dateTime, estimateNiceMultiple);\n        if (moreMultiple > 0) {\n          date[setMethodName](date[getMethodName]() + moreMultiple * interval);\n          dateTime = date.getTime();\n        }\n      }\n    }\n    // This extra tick is for calcuating ticks of next level. Will not been added to the final result\n    out.push({\n      value: dateTime,\n      notAdd: true\n    });\n  }\n  function addLevelTicks(unitName, lastLevelTicks, levelTicks) {\n    var newAddedTicks = [];\n    var isFirstLevel = !lastLevelTicks.length;\n    if (isPrimaryUnitValueAndGreaterSame(getPrimaryTimeUnit(unitName), extent[0], extent[1], isUTC)) {\n      return;\n    }\n    if (isFirstLevel) {\n      lastLevelTicks = [{\n        value: getFirstTimestampOfUnit(extent[0], unitName, isUTC)\n      }, {\n        value: extent[1]\n      }];\n    }\n    for (var i = 0; i < lastLevelTicks.length - 1; i++) {\n      var startTick = lastLevelTicks[i].value;\n      var endTick = lastLevelTicks[i + 1].value;\n      if (startTick === endTick) {\n        continue;\n      }\n      var interval = void 0;\n      var getterName = void 0;\n      var setterName = void 0;\n      var isDate = false;\n      switch (unitName) {\n        case 'year':\n          interval = Math.max(1, Math.round(approxInterval / ONE_DAY / 365));\n          getterName = fullYearGetterName(isUTC);\n          setterName = fullYearSetterName(isUTC);\n          break;\n        case 'half-year':\n        case 'quarter':\n        case 'month':\n          interval = getMonthInterval(approxInterval);\n          getterName = monthGetterName(isUTC);\n          setterName = monthSetterName(isUTC);\n          break;\n        case 'week': // PENDING If week is added. Ignore day.\n        case 'half-week':\n        case 'day':\n          interval = getDateInterval(approxInterval, 31); // Use 32 days and let interval been 16\n          getterName = dateGetterName(isUTC);\n          setterName = dateSetterName(isUTC);\n          isDate = true;\n          break;\n        case 'half-day':\n        case 'quarter-day':\n        case 'hour':\n          interval = getHourInterval(approxInterval);\n          getterName = hoursGetterName(isUTC);\n          setterName = hoursSetterName(isUTC);\n          break;\n        case 'minute':\n          interval = getMinutesAndSecondsInterval(approxInterval, true);\n          getterName = minutesGetterName(isUTC);\n          setterName = minutesSetterName(isUTC);\n          break;\n        case 'second':\n          interval = getMinutesAndSecondsInterval(approxInterval, false);\n          getterName = secondsGetterName(isUTC);\n          setterName = secondsSetterName(isUTC);\n          break;\n        case 'millisecond':\n          interval = getMillisecondsInterval(approxInterval);\n          getterName = millisecondsGetterName(isUTC);\n          setterName = millisecondsSetterName(isUTC);\n          break;\n      }\n      // Notice: This expansion by `getFirstTimestampOfUnit` may cause too many ticks and\n      // iteration. e.g., when three levels of ticks is displayed, which can be caused by\n      // data zoom and axis breaks. Thus trim them here.\n      if (endTick >= extent[0] && startTick <= extent[1]) {\n        addTicksInSpan(interval, startTick, endTick, getterName, setterName, isDate, newAddedTicks);\n      }\n      if (unitName === 'year' && levelTicks.length > 1 && i === 0) {\n        // Add nearest years to the left extent.\n        levelTicks.unshift({\n          value: levelTicks[0].value - interval\n        });\n      }\n    }\n    for (var i = 0; i < newAddedTicks.length; i++) {\n      levelTicks.push(newAddedTicks[i]);\n    }\n  }\n  var levelsTicks = [];\n  var currentLevelTicks = [];\n  var tickCount = 0;\n  var lastLevelTickCount = 0;\n  for (var i = 0; i < unitNames.length; ++i) {\n    var primaryTimeUnit = getPrimaryTimeUnit(unitNames[i]);\n    if (!isPrimaryTimeUnit(unitNames[i])) {\n      // TODO\n      continue;\n    }\n    addLevelTicks(unitNames[i], levelsTicks[levelsTicks.length - 1] || [], currentLevelTicks);\n    var nextPrimaryTimeUnit = unitNames[i + 1] ? getPrimaryTimeUnit(unitNames[i + 1]) : null;\n    if (primaryTimeUnit !== nextPrimaryTimeUnit) {\n      if (currentLevelTicks.length) {\n        lastLevelTickCount = tickCount;\n        // Remove the duplicate so the tick count can be precisely.\n        currentLevelTicks.sort(function (a, b) {\n          return a.value - b.value;\n        });\n        var levelTicksRemoveDuplicated = [];\n        for (var i_1 = 0; i_1 < currentLevelTicks.length; ++i_1) {\n          var tickValue = currentLevelTicks[i_1].value;\n          if (i_1 === 0 || currentLevelTicks[i_1 - 1].value !== tickValue) {\n            levelTicksRemoveDuplicated.push(currentLevelTicks[i_1]);\n            if (tickValue >= extent[0] && tickValue <= extent[1]) {\n              tickCount++;\n            }\n          }\n        }\n        var targetTickNum = extentSpanWithBreaks / approxInterval;\n        // Added too much in this level and not too less in last level\n        if (tickCount > targetTickNum * 1.5 && lastLevelTickCount > targetTickNum / 1.5) {\n          break;\n        }\n        // Only treat primary time unit as one level.\n        levelsTicks.push(levelTicksRemoveDuplicated);\n        if (tickCount > targetTickNum || bottomUnitName === unitNames[i]) {\n          break;\n        }\n      }\n      // Reset if next unitName is primary\n      currentLevelTicks = [];\n    }\n  }\n  var levelsTicksInExtent = filter(map(levelsTicks, function (levelTicks) {\n    return filter(levelTicks, function (tick) {\n      return tick.value >= extent[0] && tick.value <= extent[1] && !tick.notAdd;\n    });\n  }), function (levelTicks) {\n    return levelTicks.length > 0;\n  });\n  var ticks = [];\n  var maxLevel = levelsTicksInExtent.length - 1;\n  for (var i = 0; i < levelsTicksInExtent.length; ++i) {\n    var levelTicks = levelsTicksInExtent[i];\n    for (var k = 0; k < levelTicks.length; ++k) {\n      var unit = getUnitFromValue(levelTicks[k].value, isUTC);\n      ticks.push({\n        value: levelTicks[k].value,\n        time: {\n          level: maxLevel - i,\n          upperTimeUnit: unit,\n          lowerTimeUnit: unit\n        }\n      });\n    }\n  }\n  ticks.sort(function (a, b) {\n    return a.value - b.value;\n  });\n  // Remove duplicates\n  var result = [];\n  for (var i = 0; i < ticks.length; ++i) {\n    if (i === 0 || ticks[i].value !== ticks[i - 1].value) {\n      result.push(ticks[i]);\n    }\n  }\n  return result;\n}\nScale.registerClass(TimeScale);\nexport default TimeScale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Scale from './Scale.js';\nimport * as numberUtil from '../util/number.js';\n// Use some method of IntervalScale\nimport IntervalScale from './Interval.js';\nimport { getIntervalPrecision, logTransform } from './helper.js';\nimport { getScaleBreakHelper } from './break.js';\nvar fixRound = numberUtil.round;\nvar mathFloor = Math.floor;\nvar mathCeil = Math.ceil;\nvar mathPow = Math.pow;\nvar mathLog = Math.log;\nvar LogScale = /** @class */function (_super) {\n  __extends(LogScale, _super);\n  function LogScale() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'log';\n    _this.base = 10;\n    _this._originalScale = new IntervalScale();\n    return _this;\n  }\n  /**\n   * @param Whether expand the ticks to niced extent.\n   */\n  LogScale.prototype.getTicks = function (opt) {\n    opt = opt || {};\n    var extent = this._extent.slice();\n    var originalExtent = this._originalScale.getExtent();\n    var ticks = _super.prototype.getTicks.call(this, opt);\n    var base = this.base;\n    var originalBreaks = this._originalScale._innerGetBreaks();\n    var scaleBreakHelper = getScaleBreakHelper();\n    return zrUtil.map(ticks, function (tick) {\n      var val = tick.value;\n      var roundingCriterion = null;\n      var powVal = mathPow(base, val);\n      // Fix #4158\n      if (val === extent[0] && this._fixMin) {\n        roundingCriterion = originalExtent[0];\n      } else if (val === extent[1] && this._fixMax) {\n        roundingCriterion = originalExtent[1];\n      }\n      var vBreak;\n      if (scaleBreakHelper) {\n        var transformed = scaleBreakHelper.getTicksLogTransformBreak(tick, base, originalBreaks, fixRoundingError);\n        vBreak = transformed.vBreak;\n        if (roundingCriterion == null) {\n          roundingCriterion = transformed.brkRoundingCriterion;\n        }\n      }\n      if (roundingCriterion != null) {\n        powVal = fixRoundingError(powVal, roundingCriterion);\n      }\n      return {\n        value: powVal,\n        \"break\": vBreak\n      };\n    }, this);\n  };\n  LogScale.prototype._getNonTransBreaks = function () {\n    return this._originalScale._innerGetBreaks();\n  };\n  LogScale.prototype.setExtent = function (start, end) {\n    this._originalScale.setExtent(start, end);\n    var loggedExtent = logTransform(this.base, [start, end]);\n    _super.prototype.setExtent.call(this, loggedExtent[0], loggedExtent[1]);\n  };\n  /**\n   * @return {number} end\n   */\n  LogScale.prototype.getExtent = function () {\n    var base = this.base;\n    var extent = _super.prototype.getExtent.call(this);\n    extent[0] = mathPow(base, extent[0]);\n    extent[1] = mathPow(base, extent[1]);\n    // Fix #4158\n    var originalExtent = this._originalScale.getExtent();\n    this._fixMin && (extent[0] = fixRoundingError(extent[0], originalExtent[0]));\n    this._fixMax && (extent[1] = fixRoundingError(extent[1], originalExtent[1]));\n    return extent;\n  };\n  LogScale.prototype.unionExtentFromData = function (data, dim) {\n    this._originalScale.unionExtentFromData(data, dim);\n    var loggedOther = logTransform(this.base, data.getApproximateExtent(dim), true);\n    this._innerUnionExtent(loggedOther);\n  };\n  /**\n   * Update interval and extent of intervals for nice ticks\n   * @param approxTickNum default 10 Given approx tick number\n   */\n  LogScale.prototype.calcNiceTicks = function (approxTickNum) {\n    approxTickNum = approxTickNum || 10;\n    var extent = this._extent.slice();\n    var span = this._getExtentSpanWithBreaks();\n    if (!isFinite(span) || span <= 0) {\n      return;\n    }\n    var interval = numberUtil.quantity(span);\n    var err = approxTickNum / span * interval;\n    // Filter ticks to get closer to the desired count.\n    if (err <= 0.5) {\n      interval *= 10;\n    }\n    // Interval should be integer\n    while (!isNaN(interval) && Math.abs(interval) < 1 && Math.abs(interval) > 0) {\n      interval *= 10;\n    }\n    var niceExtent = [fixRound(mathCeil(extent[0] / interval) * interval), fixRound(mathFloor(extent[1] / interval) * interval)];\n    this._interval = interval;\n    this._intervalPrecision = getIntervalPrecision(interval);\n    this._niceExtent = niceExtent;\n  };\n  LogScale.prototype.calcNiceExtent = function (opt) {\n    _super.prototype.calcNiceExtent.call(this, opt);\n    this._fixMin = opt.fixMin;\n    this._fixMax = opt.fixMax;\n  };\n  LogScale.prototype.contain = function (val) {\n    val = mathLog(val) / mathLog(this.base);\n    return _super.prototype.contain.call(this, val);\n  };\n  LogScale.prototype.normalize = function (val) {\n    val = mathLog(val) / mathLog(this.base);\n    return _super.prototype.normalize.call(this, val);\n  };\n  LogScale.prototype.scale = function (val) {\n    val = _super.prototype.scale.call(this, val);\n    return mathPow(this.base, val);\n  };\n  LogScale.prototype.setBreaksFromOption = function (breakOptionList) {\n    var scaleBreakHelper = getScaleBreakHelper();\n    if (!scaleBreakHelper) {\n      return;\n    }\n    var _a = scaleBreakHelper.logarithmicParseBreaksFromOption(breakOptionList, this.base, zrUtil.bind(this.parse, this)),\n      parsedOriginal = _a.parsedOriginal,\n      parsedLogged = _a.parsedLogged;\n    this._originalScale._innerSetBreak(parsedOriginal);\n    this._innerSetBreak(parsedLogged);\n  };\n  LogScale.type = 'log';\n  return LogScale;\n}(IntervalScale);\nfunction fixRoundingError(val, originalVal) {\n  return fixRound(val, numberUtil.getPrecision(originalVal));\n}\nScale.registerClass(LogScale);\nexport default LogScale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { assert, isArray, eqNaN, isFunction } from 'zrender/lib/core/util.js';\nimport { parsePercent } from 'zrender/lib/contain/text.js';\nvar ScaleRawExtentInfo = /** @class */function () {\n  function ScaleRawExtentInfo(scale, model,\n  // Usually: data extent from all series on this axis.\n  originalExtent) {\n    this._prepareParams(scale, model, originalExtent);\n  }\n  /**\n   * Parameters depending on outside (like model, user callback)\n   * are prepared and fixed here.\n   */\n  ScaleRawExtentInfo.prototype._prepareParams = function (scale, model,\n  // Usually: data extent from all series on this axis.\n  dataExtent) {\n    if (dataExtent[1] < dataExtent[0]) {\n      dataExtent = [NaN, NaN];\n    }\n    this._dataMin = dataExtent[0];\n    this._dataMax = dataExtent[1];\n    var isOrdinal = this._isOrdinal = scale.type === 'ordinal';\n    this._needCrossZero = scale.type === 'interval' && model.getNeedCrossZero && model.getNeedCrossZero();\n    var axisMinValue = model.get('min', true);\n    if (axisMinValue == null) {\n      axisMinValue = model.get('startValue', true);\n    }\n    var modelMinRaw = this._modelMinRaw = axisMinValue;\n    if (isFunction(modelMinRaw)) {\n      // This callback always provides users the full data extent (before data is filtered).\n      this._modelMinNum = parseAxisModelMinMax(scale, modelMinRaw({\n        min: dataExtent[0],\n        max: dataExtent[1]\n      }));\n    } else if (modelMinRaw !== 'dataMin') {\n      this._modelMinNum = parseAxisModelMinMax(scale, modelMinRaw);\n    }\n    var modelMaxRaw = this._modelMaxRaw = model.get('max', true);\n    if (isFunction(modelMaxRaw)) {\n      // This callback always provides users the full data extent (before data is filtered).\n      this._modelMaxNum = parseAxisModelMinMax(scale, modelMaxRaw({\n        min: dataExtent[0],\n        max: dataExtent[1]\n      }));\n    } else if (modelMaxRaw !== 'dataMax') {\n      this._modelMaxNum = parseAxisModelMinMax(scale, modelMaxRaw);\n    }\n    if (isOrdinal) {\n      // FIXME: there is a flaw here: if there is no \"block\" data processor like `dataZoom`,\n      // and progressive rendering is using, here the category result might just only contain\n      // the processed chunk rather than the entire result.\n      this._axisDataLen = model.getCategories().length;\n    } else {\n      var boundaryGap = model.get('boundaryGap');\n      var boundaryGapArr = isArray(boundaryGap) ? boundaryGap : [boundaryGap || 0, boundaryGap || 0];\n      if (typeof boundaryGapArr[0] === 'boolean' || typeof boundaryGapArr[1] === 'boolean') {\n        if (process.env.NODE_ENV !== 'production') {\n          console.warn('Boolean type for boundaryGap is only ' + 'allowed for ordinal axis. Please use string in ' + 'percentage instead, e.g., \"20%\". Currently, ' + 'boundaryGap is set to be 0.');\n        }\n        this._boundaryGapInner = [0, 0];\n      } else {\n        this._boundaryGapInner = [parsePercent(boundaryGapArr[0], 1), parsePercent(boundaryGapArr[1], 1)];\n      }\n    }\n  };\n  /**\n   * Calculate extent by prepared parameters.\n   * This method has no external dependency and can be called duplicatedly,\n   * getting the same result.\n   * If parameters changed, should call this method to recalcuate.\n   */\n  ScaleRawExtentInfo.prototype.calculate = function () {\n    // Notice: When min/max is not set (that is, when there are null/undefined,\n    // which is the most common case), these cases should be ensured:\n    // (1) For 'ordinal', show all axis.data.\n    // (2) For others:\n    //      + `boundaryGap` is applied (if min/max set, boundaryGap is\n    //      disabled).\n    //      + If `needCrossZero`, min/max should be zero, otherwise, min/max should\n    //      be the result that originalExtent enlarged by boundaryGap.\n    // (3) If no data, it should be ensured that `scale.setBlank` is set.\n    var isOrdinal = this._isOrdinal;\n    var dataMin = this._dataMin;\n    var dataMax = this._dataMax;\n    var axisDataLen = this._axisDataLen;\n    var boundaryGapInner = this._boundaryGapInner;\n    var span = !isOrdinal ? dataMax - dataMin || Math.abs(dataMin) : null;\n    // Currently if a `'value'` axis model min is specified as 'dataMin'/'dataMax',\n    // `boundaryGap` will not be used. It's the different from specifying as `null`/`undefined`.\n    var min = this._modelMinRaw === 'dataMin' ? dataMin : this._modelMinNum;\n    var max = this._modelMaxRaw === 'dataMax' ? dataMax : this._modelMaxNum;\n    // If `_modelMinNum`/`_modelMaxNum` is `null`/`undefined`, should not be fixed.\n    var minFixed = min != null;\n    var maxFixed = max != null;\n    if (min == null) {\n      min = isOrdinal ? axisDataLen ? 0 : NaN : dataMin - boundaryGapInner[0] * span;\n    }\n    if (max == null) {\n      max = isOrdinal ? axisDataLen ? axisDataLen - 1 : NaN : dataMax + boundaryGapInner[1] * span;\n    }\n    (min == null || !isFinite(min)) && (min = NaN);\n    (max == null || !isFinite(max)) && (max = NaN);\n    var isBlank = eqNaN(min) || eqNaN(max) || isOrdinal && !axisDataLen;\n    // If data extent modified, need to recalculated to ensure cross zero.\n    if (this._needCrossZero) {\n      // Axis is over zero and min is not set\n      if (min > 0 && max > 0 && !minFixed) {\n        min = 0;\n        // minFixed = true;\n      }\n      // Axis is under zero and max is not set\n      if (min < 0 && max < 0 && !maxFixed) {\n        max = 0;\n        // maxFixed = true;\n      }\n      // PENDING:\n      // When `needCrossZero` and all data is positive/negative, should it be ensured\n      // that the results processed by boundaryGap are positive/negative?\n      // If so, here `minFixed`/`maxFixed` need to be set.\n    }\n    var determinedMin = this._determinedMin;\n    var determinedMax = this._determinedMax;\n    if (determinedMin != null) {\n      min = determinedMin;\n      minFixed = true;\n    }\n    if (determinedMax != null) {\n      max = determinedMax;\n      maxFixed = true;\n    }\n    // Ensure min/max be finite number or NaN here. (not to be null/undefined)\n    // `NaN` means min/max axis is blank.\n    return {\n      min: min,\n      max: max,\n      minFixed: minFixed,\n      maxFixed: maxFixed,\n      isBlank: isBlank\n    };\n  };\n  ScaleRawExtentInfo.prototype.modifyDataMinMax = function (minMaxName, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(!this.frozen);\n    }\n    this[DATA_MIN_MAX_ATTR[minMaxName]] = val;\n  };\n  ScaleRawExtentInfo.prototype.setDeterminedMinMax = function (minMaxName, val) {\n    var attr = DETERMINED_MIN_MAX_ATTR[minMaxName];\n    if (process.env.NODE_ENV !== 'production') {\n      assert(!this.frozen\n      // Earse them usually means logic flaw.\n      && this[attr] == null);\n    }\n    this[attr] = val;\n  };\n  ScaleRawExtentInfo.prototype.freeze = function () {\n    // @ts-ignore\n    this.frozen = true;\n  };\n  return ScaleRawExtentInfo;\n}();\nexport { ScaleRawExtentInfo };\nvar DETERMINED_MIN_MAX_ATTR = {\n  min: '_determinedMin',\n  max: '_determinedMax'\n};\nvar DATA_MIN_MAX_ATTR = {\n  min: '_dataMin',\n  max: '_dataMax'\n};\n/**\n * Get scale min max and related info only depends on model settings.\n * This method can be called after coordinate system created.\n * For example, in data processing stage.\n *\n * Scale extent info probably be required multiple times during a workflow.\n * For example:\n * (1) `dataZoom` depends it to get the axis extent in \"100%\" state.\n * (2) `processor/extentCalculator` depends it to make sure whether axis extent is specified.\n * (3) `coordSys.update` use it to finally decide the scale extent.\n * But the callback of `min`/`max` should not be called multiple times.\n * The code below should not be implemented repeatedly either.\n * So we cache the result in the scale instance, which will be recreated at the beginning\n * of the workflow (because `scale` instance will be recreated each round of the workflow).\n */\nexport function ensureScaleRawExtentInfo(scale, model,\n// Usually: data extent from all series on this axis.\noriginalExtent) {\n  // Do not permit to recreate.\n  var rawExtentInfo = scale.rawExtentInfo;\n  if (rawExtentInfo) {\n    return rawExtentInfo;\n  }\n  rawExtentInfo = new ScaleRawExtentInfo(scale, model, originalExtent);\n  // @ts-ignore\n  scale.rawExtentInfo = rawExtentInfo;\n  return rawExtentInfo;\n}\nexport function parseAxisModelMinMax(scale, minMax) {\n  return minMax == null ? null : eqNaN(minMax) ? NaN : scale.parse(minMax);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport OrdinalScale from '../scale/Ordinal.js';\nimport IntervalScale from '../scale/Interval.js';\nimport Scale from '../scale/Scale.js';\nimport { prepareLayoutBarSeries, makeColumnLayout, retrieveColumnLayout } from '../layout/barGrid.js';\nimport TimeScale from '../scale/Time.js';\nimport LogScale from '../scale/Log.js';\nimport { getStackedDimension } from '../data/helper/dataStackHelper.js';\nimport { ensureScaleRawExtentInfo } from './scaleRawExtentInfo.js';\nimport { parseTimeAxisLabelFormatter } from '../util/time.js';\nimport { getScaleBreakHelper } from '../scale/break.js';\nimport { error } from '../util/log.js';\n/**\n * Get axis scale extent before niced.\n * Item of returned array can only be number (including Infinity and NaN).\n *\n * Caution:\n * Precondition of calling this method:\n * The scale extent has been initialized using series data extent via\n * `scale.setExtent` or `scale.unionExtentFromData`;\n */\nexport function getScaleExtent(scale, model) {\n  var scaleType = scale.type;\n  var rawExtentResult = ensureScaleRawExtentInfo(scale, model, scale.getExtent()).calculate();\n  scale.setBlank(rawExtentResult.isBlank);\n  var min = rawExtentResult.min;\n  var max = rawExtentResult.max;\n  // If bars are placed on a base axis of type time or interval account for axis boundary overflow and current axis\n  // is base axis\n  // FIXME\n  // (1) Consider support value axis, where below zero and axis `onZero` should be handled properly.\n  // (2) Refactor the logic with `barGrid`. Is it not need to `makeBarWidthAndOffsetInfo` twice with different extent?\n  //     Should not depend on series type `bar`?\n  // (3) Fix that might overlap when using dataZoom.\n  // (4) Consider other chart types using `barGrid`?\n  // See #6728, #4862, `test/bar-overflow-time-plot.html`\n  var ecModel = model.ecModel;\n  if (ecModel && scaleType === 'time' /* || scaleType === 'interval' */) {\n    var barSeriesModels = prepareLayoutBarSeries('bar', ecModel);\n    var isBaseAxisAndHasBarSeries_1 = false;\n    zrUtil.each(barSeriesModels, function (seriesModel) {\n      isBaseAxisAndHasBarSeries_1 = isBaseAxisAndHasBarSeries_1 || seriesModel.getBaseAxis() === model.axis;\n    });\n    if (isBaseAxisAndHasBarSeries_1) {\n      // Calculate placement of bars on axis. TODO should be decoupled\n      // with barLayout\n      var barWidthAndOffset = makeColumnLayout(barSeriesModels);\n      // Adjust axis min and max to account for overflow\n      var adjustedScale = adjustScaleForOverflow(min, max, model, barWidthAndOffset);\n      min = adjustedScale.min;\n      max = adjustedScale.max;\n    }\n  }\n  return {\n    extent: [min, max],\n    // \"fix\" means \"fixed\", the value should not be\n    // changed in the subsequent steps.\n    fixMin: rawExtentResult.minFixed,\n    fixMax: rawExtentResult.maxFixed\n  };\n}\nfunction adjustScaleForOverflow(min, max, model,\n// Only support cartesian coord yet.\nbarWidthAndOffset) {\n  // Get Axis Length\n  var axisExtent = model.axis.getExtent();\n  var axisLength = Math.abs(axisExtent[1] - axisExtent[0]);\n  // Get bars on current base axis and calculate min and max overflow\n  var barsOnCurrentAxis = retrieveColumnLayout(barWidthAndOffset, model.axis);\n  if (barsOnCurrentAxis === undefined) {\n    return {\n      min: min,\n      max: max\n    };\n  }\n  var minOverflow = Infinity;\n  zrUtil.each(barsOnCurrentAxis, function (item) {\n    minOverflow = Math.min(item.offset, minOverflow);\n  });\n  var maxOverflow = -Infinity;\n  zrUtil.each(barsOnCurrentAxis, function (item) {\n    maxOverflow = Math.max(item.offset + item.width, maxOverflow);\n  });\n  minOverflow = Math.abs(minOverflow);\n  maxOverflow = Math.abs(maxOverflow);\n  var totalOverFlow = minOverflow + maxOverflow;\n  // Calculate required buffer based on old range and overflow\n  var oldRange = max - min;\n  var oldRangePercentOfNew = 1 - (minOverflow + maxOverflow) / axisLength;\n  var overflowBuffer = oldRange / oldRangePercentOfNew - oldRange;\n  max += overflowBuffer * (maxOverflow / totalOverFlow);\n  min -= overflowBuffer * (minOverflow / totalOverFlow);\n  return {\n    min: min,\n    max: max\n  };\n}\n// Precondition of calling this method:\n// The scale extent has been initialized using series data extent via\n// `scale.setExtent` or `scale.unionExtentFromData`;\nexport function niceScaleExtent(scale, inModel) {\n  var model = inModel;\n  var extentInfo = getScaleExtent(scale, model);\n  var extent = extentInfo.extent;\n  var splitNumber = model.get('splitNumber');\n  if (scale instanceof LogScale) {\n    scale.base = model.get('logBase');\n  }\n  var scaleType = scale.type;\n  var interval = model.get('interval');\n  var isIntervalOrTime = scaleType === 'interval' || scaleType === 'time';\n  scale.setBreaksFromOption(retrieveAxisBreaksOption(model));\n  scale.setExtent(extent[0], extent[1]);\n  scale.calcNiceExtent({\n    splitNumber: splitNumber,\n    fixMin: extentInfo.fixMin,\n    fixMax: extentInfo.fixMax,\n    minInterval: isIntervalOrTime ? model.get('minInterval') : null,\n    maxInterval: isIntervalOrTime ? model.get('maxInterval') : null\n  });\n  // If some one specified the min, max. And the default calculated interval\n  // is not good enough. He can specify the interval. It is often appeared\n  // in angle axis with angle 0 - 360. Interval calculated in interval scale is hard\n  // to be 60.\n  // FIXME\n  if (interval != null) {\n    scale.setInterval && scale.setInterval(interval);\n  }\n}\n/**\n * @param axisType Default retrieve from model.type\n */\nexport function createScaleByModel(model, axisType) {\n  axisType = axisType || model.get('type');\n  if (axisType) {\n    switch (axisType) {\n      // Buildin scale\n      case 'category':\n        return new OrdinalScale({\n          ordinalMeta: model.getOrdinalMeta ? model.getOrdinalMeta() : model.getCategories(),\n          extent: [Infinity, -Infinity]\n        });\n      case 'time':\n        return new TimeScale({\n          locale: model.ecModel.getLocaleModel(),\n          useUTC: model.ecModel.get('useUTC')\n        });\n      default:\n        // case 'value'/'interval', 'log', or others.\n        return new (Scale.getClass(axisType) || IntervalScale)();\n    }\n  }\n}\n/**\n * Check if the axis cross 0\n */\nexport function ifAxisCrossZero(axis) {\n  var dataExtent = axis.scale.getExtent();\n  var min = dataExtent[0];\n  var max = dataExtent[1];\n  return !(min > 0 && max > 0 || min < 0 && max < 0);\n}\n/**\n * @param axis\n * @return Label formatter function.\n *         param: {number} tickValue,\n *         param: {number} idx, the index in all ticks.\n *                         If category axis, this param is not required.\n *         return: {string} label string.\n */\nexport function makeLabelFormatter(axis) {\n  var labelFormatter = axis.getLabelModel().get('formatter');\n  if (axis.type === 'time') {\n    var parsed_1 = parseTimeAxisLabelFormatter(labelFormatter);\n    return function (tick, idx) {\n      return axis.scale.getFormattedLabel(tick, idx, parsed_1);\n    };\n  } else if (zrUtil.isString(labelFormatter)) {\n    return function (tick) {\n      // For category axis, get raw value; for numeric axis,\n      // get formatted label like '1,333,444'.\n      var label = axis.scale.getLabel(tick);\n      var text = labelFormatter.replace('{value}', label != null ? label : '');\n      return text;\n    };\n  } else if (zrUtil.isFunction(labelFormatter)) {\n    if (axis.type === 'category') {\n      return function (tick, idx) {\n        // The original intention of `idx` is \"the index of the tick in all ticks\".\n        // But the previous implementation of category axis do not consider the\n        // `axisLabel.interval`, which cause that, for example, the `interval` is\n        // `1`, then the ticks \"name5\", \"name7\", \"name9\" are displayed, where the\n        // corresponding `idx` are `0`, `2`, `4`, but not `0`, `1`, `2`. So we keep\n        // the definition here for back compatibility.\n        return labelFormatter(getAxisRawValue(axis, tick), tick.value - axis.scale.getExtent()[0], null // Using `null` just for backward compat.\n        );\n      };\n    }\n    var scaleBreakHelper_1 = getScaleBreakHelper();\n    return function (tick, idx) {\n      // Using `null` just for backward compat. It's been found that in the `test/axis-customTicks.html`,\n      // there is a formatter `function (value, index, revers = true) { ... }`. Although the third param\n      // `revers` is incorrect and always `null`, changing it might introduce a breaking change.\n      var extra = null;\n      if (scaleBreakHelper_1) {\n        extra = scaleBreakHelper_1.makeAxisLabelFormatterParamBreak(extra, tick[\"break\"]);\n      }\n      return labelFormatter(getAxisRawValue(axis, tick), idx, extra);\n    };\n  } else {\n    return function (tick) {\n      return axis.scale.getLabel(tick);\n    };\n  }\n}\nexport function getAxisRawValue(axis, tick) {\n  // In category axis with data zoom, tick is not the original\n  // index of axis.data. So tick should not be exposed to user\n  // in category axis.\n  return axis.type === 'category' ? axis.scale.getLabel(tick) : tick.value;\n}\n/**\n * @param model axisLabelModel or axisTickModel\n * @return {number|String} Can be null|'auto'|number|function\n */\nexport function getOptionCategoryInterval(model) {\n  var interval = model.get('interval');\n  return interval == null ? 'auto' : interval;\n}\n/**\n * Set `categoryInterval` as 0 implicitly indicates that\n * show all labels regardless of overlap.\n * @param {Object} axis axisModel.axis\n */\nexport function shouldShowAllLabels(axis) {\n  return axis.type === 'category' && getOptionCategoryInterval(axis.getLabelModel()) === 0;\n}\nexport function getDataDimensionsOnAxis(data, axisDim) {\n  // Remove duplicated dat dimensions caused by `getStackedDimension`.\n  var dataDimMap = {};\n  // Currently `mapDimensionsAll` will contain stack result dimension ('__\\0ecstackresult').\n  // PENDING: is it reasonable? Do we need to remove the original dim from \"coord dim\" since\n  // there has been stacked result dim?\n  zrUtil.each(data.mapDimensionsAll(axisDim), function (dataDim) {\n    // For example, the extent of the original dimension\n    // is [0.1, 0.5], the extent of the `stackResultDimension`\n    // is [7, 9], the final extent should NOT include [0.1, 0.5],\n    // because there is no graphic corresponding to [0.1, 0.5].\n    // See the case in `test/area-stack.html` `main1`, where area line\n    // stack needs `yAxis` not start from 0.\n    dataDimMap[getStackedDimension(data, dataDim)] = true;\n  });\n  return zrUtil.keys(dataDimMap);\n}\nexport function unionAxisExtentFromData(dataExtent, data, axisDim) {\n  if (data) {\n    zrUtil.each(getDataDimensionsOnAxis(data, axisDim), function (dim) {\n      var seriesExtent = data.getApproximateExtent(dim);\n      seriesExtent[0] < dataExtent[0] && (dataExtent[0] = seriesExtent[0]);\n      seriesExtent[1] > dataExtent[1] && (dataExtent[1] = seriesExtent[1]);\n    });\n  }\n}\nexport function isNameLocationCenter(nameLocation) {\n  return nameLocation === 'middle' || nameLocation === 'center';\n}\nexport function shouldAxisShow(axisModel) {\n  return axisModel.getShallow('show');\n}\nexport function retrieveAxisBreaksOption(model) {\n  var option = model.get('breaks', true);\n  if (option != null) {\n    if (!getScaleBreakHelper()) {\n      if (process.env.NODE_ENV !== 'production') {\n        error('Must `import {AxisBreak} from \"echarts/features.js\"; use(AxisBreak);` first if using breaks option.');\n      }\n      return undefined;\n    }\n    if (!isSupportAxisBreak(model.axis)) {\n      if (process.env.NODE_ENV !== 'production') {\n        error(\"Axis '\" + model.axis.dim + \"'-'\" + model.axis.type + \"' does not support break.\");\n      }\n      return undefined;\n    }\n    return option;\n  }\n}\nfunction isSupportAxisBreak(axis) {\n  // The polar radius axis can also support break feasibly. Do not do it until the requirements are met.\n  return (axis.dim === 'x' || axis.dim === 'y' || axis.dim === 'z' || axis.dim === 'single') && axis.type !== 'category';\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar Cartesian = /** @class */function () {\n  function Cartesian(name) {\n    this.type = 'cartesian';\n    this._dimList = [];\n    this._axes = {};\n    this.name = name || '';\n  }\n  Cartesian.prototype.getAxis = function (dim) {\n    return this._axes[dim];\n  };\n  Cartesian.prototype.getAxes = function () {\n    return zrUtil.map(this._dimList, function (dim) {\n      return this._axes[dim];\n    }, this);\n  };\n  Cartesian.prototype.getAxesByScale = function (scaleType) {\n    scaleType = scaleType.toLowerCase();\n    return zrUtil.filter(this.getAxes(), function (axis) {\n      return axis.scale.type === scaleType;\n    });\n  };\n  Cartesian.prototype.addAxis = function (axis) {\n    var dim = axis.dim;\n    this._axes[dim] = axis;\n    this._dimList.push(dim);\n  };\n  return Cartesian;\n}();\n;\nexport default Cartesian;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport Cartesian from './Cartesian.js';\nimport { invert } from 'zrender/lib/core/matrix.js';\nimport { applyTransform } from 'zrender/lib/core/vector.js';\nexport var cartesian2DDimensions = ['x', 'y'];\nfunction canCalculateAffineTransform(scale) {\n  return (scale.type === 'interval' || scale.type === 'time') && !scale.hasBreaks();\n}\nvar Cartesian2D = /** @class */function (_super) {\n  __extends(Cartesian2D, _super);\n  function Cartesian2D() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'cartesian2d';\n    _this.dimensions = cartesian2DDimensions;\n    return _this;\n  }\n  /**\n   * Calculate an affine transform matrix if two axes are time or value.\n   * It's mainly for accelartion on the large time series data.\n   */\n  Cartesian2D.prototype.calcAffineTransform = function () {\n    this._transform = this._invTransform = null;\n    var xAxisScale = this.getAxis('x').scale;\n    var yAxisScale = this.getAxis('y').scale;\n    if (!canCalculateAffineTransform(xAxisScale) || !canCalculateAffineTransform(yAxisScale)) {\n      return;\n    }\n    var xScaleExtent = xAxisScale.getExtent();\n    var yScaleExtent = yAxisScale.getExtent();\n    var start = this.dataToPoint([xScaleExtent[0], yScaleExtent[0]]);\n    var end = this.dataToPoint([xScaleExtent[1], yScaleExtent[1]]);\n    var xScaleSpan = xScaleExtent[1] - xScaleExtent[0];\n    var yScaleSpan = yScaleExtent[1] - yScaleExtent[0];\n    if (!xScaleSpan || !yScaleSpan) {\n      return;\n    }\n    // Accelerate data to point calculation on the special large time series data.\n    var scaleX = (end[0] - start[0]) / xScaleSpan;\n    var scaleY = (end[1] - start[1]) / yScaleSpan;\n    var translateX = start[0] - xScaleExtent[0] * scaleX;\n    var translateY = start[1] - yScaleExtent[0] * scaleY;\n    var m = this._transform = [scaleX, 0, 0, scaleY, translateX, translateY];\n    this._invTransform = invert([], m);\n  };\n  /**\n   * Base axis will be used on stacking.\n   */\n  Cartesian2D.prototype.getBaseAxis = function () {\n    return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAxis('x');\n  };\n  Cartesian2D.prototype.containPoint = function (point) {\n    var axisX = this.getAxis('x');\n    var axisY = this.getAxis('y');\n    return axisX.contain(axisX.toLocalCoord(point[0])) && axisY.contain(axisY.toLocalCoord(point[1]));\n  };\n  Cartesian2D.prototype.containData = function (data) {\n    return this.getAxis('x').containData(data[0]) && this.getAxis('y').containData(data[1]);\n  };\n  Cartesian2D.prototype.containZone = function (data1, data2) {\n    var zoneDiag1 = this.dataToPoint(data1);\n    var zoneDiag2 = this.dataToPoint(data2);\n    var area = this.getArea();\n    var zone = new BoundingRect(zoneDiag1[0], zoneDiag1[1], zoneDiag2[0] - zoneDiag1[0], zoneDiag2[1] - zoneDiag1[1]);\n    return area.intersect(zone);\n  };\n  Cartesian2D.prototype.dataToPoint = function (data, clamp, out) {\n    out = out || [];\n    var xVal = data[0];\n    var yVal = data[1];\n    // [CAVEAT]: Do not add time consuming operation within and before fast path.\n    // Fast path.\n    if (this._transform\n    // It's supported that if data is like `[Inifity, 123]`, where only Y pixel calculated.\n    && xVal != null && isFinite(xVal) && yVal != null && isFinite(yVal)) {\n      return applyTransform(out, data, this._transform);\n    }\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out[0] = xAxis.toGlobalCoord(xAxis.dataToCoord(xVal, clamp));\n    out[1] = yAxis.toGlobalCoord(yAxis.dataToCoord(yVal, clamp));\n    return out;\n  };\n  Cartesian2D.prototype.clampData = function (data, out) {\n    var xScale = this.getAxis('x').scale;\n    var yScale = this.getAxis('y').scale;\n    var xAxisExtent = xScale.getExtent();\n    var yAxisExtent = yScale.getExtent();\n    var x = xScale.parse(data[0]);\n    var y = yScale.parse(data[1]);\n    out = out || [];\n    out[0] = Math.min(Math.max(Math.min(xAxisExtent[0], xAxisExtent[1]), x), Math.max(xAxisExtent[0], xAxisExtent[1]));\n    out[1] = Math.min(Math.max(Math.min(yAxisExtent[0], yAxisExtent[1]), y), Math.max(yAxisExtent[0], yAxisExtent[1]));\n    return out;\n  };\n  Cartesian2D.prototype.pointToData = function (point, clamp, out) {\n    out = out || [];\n    if (this._invTransform) {\n      return applyTransform(out, point, this._invTransform);\n    }\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out[0] = xAxis.coordToData(xAxis.toLocalCoord(point[0]), clamp);\n    out[1] = yAxis.coordToData(yAxis.toLocalCoord(point[1]), clamp);\n    return out;\n  };\n  Cartesian2D.prototype.getOtherAxis = function (axis) {\n    return this.getAxis(axis.dim === 'x' ? 'y' : 'x');\n  };\n  /**\n   * Get rect area of cartesian.\n   * Area will have a contain function to determine if a point is in the coordinate system.\n   */\n  Cartesian2D.prototype.getArea = function (tolerance) {\n    tolerance = tolerance || 0;\n    var xExtent = this.getAxis('x').getGlobalExtent();\n    var yExtent = this.getAxis('y').getGlobalExtent();\n    var x = Math.min(xExtent[0], xExtent[1]) - tolerance;\n    var y = Math.min(yExtent[0], yExtent[1]) - tolerance;\n    var width = Math.max(xExtent[0], xExtent[1]) - x + tolerance;\n    var height = Math.max(yExtent[0], yExtent[1]) - y + tolerance;\n    return new BoundingRect(x, y, width, height);\n  };\n  return Cartesian2D;\n}(Cartesian);\n;\nexport default Cartesian2D;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as textContain from 'zrender/lib/contain/text.js';\nimport { makeInner } from '../util/model.js';\nimport { makeLabelFormatter, getOptionCategoryInterval, shouldShowAllLabels } from './axisHelper.js';\nvar modelInner = makeInner();\nvar axisInner = makeInner();\nexport var AxisTickLabelComputingKind = {\n  estimate: 1,\n  determine: 2\n};\nexport function createAxisLabelsComputingContext(kind) {\n  return {\n    out: {\n      noPxChangeTryDetermine: []\n    },\n    kind: kind\n  };\n}\nfunction tickValuesToNumbers(axis, values) {\n  var nums = zrUtil.map(values, function (val) {\n    return axis.scale.parse(val);\n  });\n  if (axis.type === 'time' && nums.length > 0) {\n    // Time axis needs duplicate first/last tick (see TimeScale.getTicks())\n    // The first and last tick/label don't get drawn\n    nums.sort();\n    nums.unshift(nums[0]);\n    nums.push(nums[nums.length - 1]);\n  }\n  return nums;\n}\nexport function createAxisLabels(axis, ctx) {\n  var custom = axis.getLabelModel().get('customValues');\n  if (custom) {\n    var labelFormatter_1 = makeLabelFormatter(axis);\n    var extent_1 = axis.scale.getExtent();\n    var tickNumbers = tickValuesToNumbers(axis, custom);\n    var ticks = zrUtil.filter(tickNumbers, function (val) {\n      return val >= extent_1[0] && val <= extent_1[1];\n    });\n    return {\n      labels: zrUtil.map(ticks, function (numval) {\n        var tick = {\n          value: numval\n        };\n        return {\n          formattedLabel: labelFormatter_1(tick),\n          rawLabel: axis.scale.getLabel(tick),\n          tickValue: numval,\n          time: undefined,\n          \"break\": undefined\n        };\n      })\n    };\n  }\n  // Only ordinal scale support tick interval\n  return axis.type === 'category' ? makeCategoryLabels(axis, ctx) : makeRealNumberLabels(axis);\n}\n/**\n * @param tickModel For example, can be axisTick, splitLine, splitArea.\n */\nexport function createAxisTicks(axis, tickModel, opt) {\n  var custom = axis.getTickModel().get('customValues');\n  if (custom) {\n    var extent_2 = axis.scale.getExtent();\n    var tickNumbers = tickValuesToNumbers(axis, custom);\n    return {\n      ticks: zrUtil.filter(tickNumbers, function (val) {\n        return val >= extent_2[0] && val <= extent_2[1];\n      })\n    };\n  }\n  // Only ordinal scale support tick interval\n  return axis.type === 'category' ? makeCategoryTicks(axis, tickModel) : {\n    ticks: zrUtil.map(axis.scale.getTicks(opt), function (tick) {\n      return tick.value;\n    })\n  };\n}\nfunction makeCategoryLabels(axis, ctx) {\n  var labelModel = axis.getLabelModel();\n  var result = makeCategoryLabelsActually(axis, labelModel, ctx);\n  return !labelModel.get('show') || axis.scale.isBlank() ? {\n    labels: []\n  } : result;\n}\nfunction makeCategoryLabelsActually(axis, labelModel, ctx) {\n  var labelsCache = ensureCategoryLabelCache(axis);\n  var optionLabelInterval = getOptionCategoryInterval(labelModel);\n  var isEstimate = ctx.kind === AxisTickLabelComputingKind.estimate;\n  // In AxisTickLabelComputingKind.estimate, the result likely varies during a single\n  // pass of ec main process,due to the change of axisExtent, and will not be shared with\n  // splitLine. Therefore no cache is used.\n  if (!isEstimate) {\n    // PENDING: check necessary?\n    var result_1 = axisCacheGet(labelsCache, optionLabelInterval);\n    if (result_1) {\n      return result_1;\n    }\n  }\n  var labels;\n  var numericLabelInterval;\n  if (zrUtil.isFunction(optionLabelInterval)) {\n    labels = makeLabelsByCustomizedCategoryInterval(axis, optionLabelInterval);\n  } else {\n    numericLabelInterval = optionLabelInterval === 'auto' ? makeAutoCategoryInterval(axis, ctx) : optionLabelInterval;\n    labels = makeLabelsByNumericCategoryInterval(axis, numericLabelInterval);\n  }\n  var result = {\n    labels: labels,\n    labelCategoryInterval: numericLabelInterval\n  };\n  if (!isEstimate) {\n    axisCacheSet(labelsCache, optionLabelInterval, result);\n  } else {\n    ctx.out.noPxChangeTryDetermine.push(function () {\n      axisCacheSet(labelsCache, optionLabelInterval, result);\n      return true;\n    });\n  }\n  return result;\n}\nfunction makeCategoryTicks(axis, tickModel) {\n  var ticksCache = ensureCategoryTickCache(axis);\n  var optionTickInterval = getOptionCategoryInterval(tickModel);\n  var result = axisCacheGet(ticksCache, optionTickInterval);\n  if (result) {\n    return result;\n  }\n  var ticks;\n  var tickCategoryInterval;\n  // Optimize for the case that large category data and no label displayed,\n  // we should not return all ticks.\n  if (!tickModel.get('show') || axis.scale.isBlank()) {\n    ticks = [];\n  }\n  if (zrUtil.isFunction(optionTickInterval)) {\n    ticks = makeLabelsByCustomizedCategoryInterval(axis, optionTickInterval, true);\n  }\n  // Always use label interval by default despite label show. Consider this\n  // scenario, Use multiple grid with the xAxis sync, and only one xAxis shows\n  // labels. `splitLine` and `axisTick` should be consistent in this case.\n  else if (optionTickInterval === 'auto') {\n    var labelsResult = makeCategoryLabelsActually(axis, axis.getLabelModel(), createAxisLabelsComputingContext(AxisTickLabelComputingKind.determine));\n    tickCategoryInterval = labelsResult.labelCategoryInterval;\n    ticks = zrUtil.map(labelsResult.labels, function (labelItem) {\n      return labelItem.tickValue;\n    });\n  } else {\n    tickCategoryInterval = optionTickInterval;\n    ticks = makeLabelsByNumericCategoryInterval(axis, tickCategoryInterval, true);\n  }\n  // Cache to avoid calling interval function repeatedly.\n  return axisCacheSet(ticksCache, optionTickInterval, {\n    ticks: ticks,\n    tickCategoryInterval: tickCategoryInterval\n  });\n}\nfunction makeRealNumberLabels(axis) {\n  var ticks = axis.scale.getTicks();\n  var labelFormatter = makeLabelFormatter(axis);\n  return {\n    labels: zrUtil.map(ticks, function (tick, idx) {\n      return {\n        formattedLabel: labelFormatter(tick, idx),\n        rawLabel: axis.scale.getLabel(tick),\n        tickValue: tick.value,\n        time: tick.time,\n        \"break\": tick[\"break\"]\n      };\n    })\n  };\n}\n// Large category data calculation is performance sensitive, and ticks and label probably will\n// be fetched multiple times (e.g. shared by splitLine and axisTick). So we cache the result.\n// axis is created each time during a ec process, so we do not need to clear cache.\nvar ensureCategoryTickCache = initAxisCacheMethod('axisTick');\nvar ensureCategoryLabelCache = initAxisCacheMethod('axisLabel');\n/**\n * PENDING: refactor to JS Map? Because key can be a function or more complicated object, and\n * cache size always is small, and currently no JS Map object key polyfill, we use a simple\n * array cache instead of plain object hash.\n */\nfunction initAxisCacheMethod(prop) {\n  return function ensureCache(axis) {\n    return axisInner(axis)[prop] || (axisInner(axis)[prop] = {\n      list: []\n    });\n  };\n}\nfunction axisCacheGet(cache, key) {\n  for (var i = 0; i < cache.list.length; i++) {\n    if (cache.list[i].key === key) {\n      return cache.list[i].value;\n    }\n  }\n}\nfunction axisCacheSet(cache, key, value) {\n  cache.list.push({\n    key: key,\n    value: value\n  });\n  return value;\n}\nfunction makeAutoCategoryInterval(axis, ctx) {\n  if (ctx.kind === AxisTickLabelComputingKind.estimate) {\n    // Currently axisTick is not involved in estimate kind, and the result likely varies during a\n    // single pass of ec main process, due to the change of axisExtent. Therefore no cache is used.\n    var result_2 = axis.calculateCategoryInterval(ctx);\n    ctx.out.noPxChangeTryDetermine.push(function () {\n      axisInner(axis).autoInterval = result_2;\n      return true;\n    });\n    return result_2;\n  }\n  // Both tick and label uses this result, cacah it to avoid recompute.\n  var result = axisInner(axis).autoInterval;\n  return result != null ? result : axisInner(axis).autoInterval = axis.calculateCategoryInterval(ctx);\n}\n/**\n * Calculate interval for category axis ticks and labels.\n * Use a stretegy to try to avoid overlapping.\n * To get precise result, at least one of `getRotate` and `isHorizontal`\n * should be implemented in axis.\n */\nexport function calculateCategoryInterval(axis, ctx) {\n  var kind = ctx.kind;\n  var params = fetchAutoCategoryIntervalCalculationParams(axis);\n  var labelFormatter = makeLabelFormatter(axis);\n  var rotation = (params.axisRotate - params.labelRotate) / 180 * Math.PI;\n  var ordinalScale = axis.scale;\n  var ordinalExtent = ordinalScale.getExtent();\n  // Providing this method is for optimization:\n  // avoid generating a long array by `getTicks`\n  // in large category data case.\n  var tickCount = ordinalScale.count();\n  if (ordinalExtent[1] - ordinalExtent[0] < 1) {\n    return 0;\n  }\n  var step = 1;\n  // Simple optimization. Arbitrary value.\n  var maxCount = 40;\n  if (tickCount > maxCount) {\n    step = Math.max(1, Math.floor(tickCount / maxCount));\n  }\n  var tickValue = ordinalExtent[0];\n  var unitSpan = axis.dataToCoord(tickValue + 1) - axis.dataToCoord(tickValue);\n  var unitW = Math.abs(unitSpan * Math.cos(rotation));\n  var unitH = Math.abs(unitSpan * Math.sin(rotation));\n  var maxW = 0;\n  var maxH = 0;\n  // Caution: Performance sensitive for large category data.\n  // Consider dataZoom, we should make appropriate step to avoid O(n) loop.\n  for (; tickValue <= ordinalExtent[1]; tickValue += step) {\n    var width = 0;\n    var height = 0;\n    // Not precise, do not consider align and vertical align\n    // and each distance from axis line yet.\n    var rect = textContain.getBoundingRect(labelFormatter({\n      value: tickValue\n    }), params.font, 'center', 'top');\n    // Magic number\n    width = rect.width * 1.3;\n    height = rect.height * 1.3;\n    // Min size, void long loop.\n    maxW = Math.max(maxW, width, 7);\n    maxH = Math.max(maxH, height, 7);\n  }\n  var dw = maxW / unitW;\n  var dh = maxH / unitH;\n  // 0/0 is NaN, 1/0 is Infinity.\n  isNaN(dw) && (dw = Infinity);\n  isNaN(dh) && (dh = Infinity);\n  var interval = Math.max(0, Math.floor(Math.min(dw, dh)));\n  if (kind === AxisTickLabelComputingKind.estimate) {\n    // In estimate kind, the inteval likely varies, thus do not erase the cache.\n    ctx.out.noPxChangeTryDetermine.push(zrUtil.bind(calculateCategoryIntervalTryDetermine, null, axis, interval, tickCount));\n    return interval;\n  }\n  var lastInterval = calculateCategoryIntervalDealCache(axis, interval, tickCount);\n  return lastInterval != null ? lastInterval : interval;\n}\nfunction calculateCategoryIntervalTryDetermine(axis, interval, tickCount) {\n  return calculateCategoryIntervalDealCache(axis, interval, tickCount) == null;\n}\n// Return the lastInterval if need to use it, otherwise return NullUndefined and save cache.\nfunction calculateCategoryIntervalDealCache(axis, interval, tickCount) {\n  var cache = modelInner(axis.model);\n  var axisExtent = axis.getExtent();\n  var lastAutoInterval = cache.lastAutoInterval;\n  var lastTickCount = cache.lastTickCount;\n  // Use cache to keep interval stable while moving zoom window,\n  // otherwise the calculated interval might jitter when the zoom\n  // window size is close to the interval-changing size.\n  // For example, if all of the axis labels are `a, b, c, d, e, f, g`.\n  // The jitter will cause that sometimes the displayed labels are\n  // `a, d, g` (interval: 2) sometimes `a, c, e`(interval: 1).\n  if (lastAutoInterval != null && lastTickCount != null && Math.abs(lastAutoInterval - interval) <= 1 && Math.abs(lastTickCount - tickCount) <= 1\n  // Always choose the bigger one, otherwise the critical\n  // point is not the same when zooming in or zooming out.\n  && lastAutoInterval > interval\n  // If the axis change is caused by chart resize, the cache should not\n  // be used. Otherwise some hidden labels might not be shown again.\n  && cache.axisExtent0 === axisExtent[0] && cache.axisExtent1 === axisExtent[1]) {\n    return lastAutoInterval;\n  }\n  // Only update cache if cache not used, otherwise the\n  // changing of interval is too insensitive.\n  else {\n    cache.lastTickCount = tickCount;\n    cache.lastAutoInterval = interval;\n    cache.axisExtent0 = axisExtent[0];\n    cache.axisExtent1 = axisExtent[1];\n  }\n}\nfunction fetchAutoCategoryIntervalCalculationParams(axis) {\n  var labelModel = axis.getLabelModel();\n  return {\n    axisRotate: axis.getRotate ? axis.getRotate() : axis.isHorizontal && !axis.isHorizontal() ? 90 : 0,\n    labelRotate: labelModel.get('rotate') || 0,\n    font: labelModel.getFont()\n  };\n}\nfunction makeLabelsByNumericCategoryInterval(axis, categoryInterval, onlyTick) {\n  var labelFormatter = makeLabelFormatter(axis);\n  var ordinalScale = axis.scale;\n  var ordinalExtent = ordinalScale.getExtent();\n  var labelModel = axis.getLabelModel();\n  var result = [];\n  // TODO: axisType: ordinalTime, pick the tick from each month/day/year/...\n  var step = Math.max((categoryInterval || 0) + 1, 1);\n  var startTick = ordinalExtent[0];\n  var tickCount = ordinalScale.count();\n  // Calculate start tick based on zero if possible to keep label consistent\n  // while zooming and moving while interval > 0. Otherwise the selection\n  // of displayable ticks and symbols probably keep changing.\n  // 3 is empirical value.\n  if (startTick !== 0 && step > 1 && tickCount / step > 2) {\n    startTick = Math.round(Math.ceil(startTick / step) * step);\n  }\n  // (1) Only add min max label here but leave overlap checking\n  // to render stage, which also ensure the returned list\n  // suitable for splitLine and splitArea rendering.\n  // (2) Scales except category always contain min max label so\n  // do not need to perform this process.\n  var showAllLabel = shouldShowAllLabels(axis);\n  var includeMinLabel = labelModel.get('showMinLabel') || showAllLabel;\n  var includeMaxLabel = labelModel.get('showMaxLabel') || showAllLabel;\n  if (includeMinLabel && startTick !== ordinalExtent[0]) {\n    addItem(ordinalExtent[0]);\n  }\n  // Optimize: avoid generating large array by `ordinalScale.getTicks()`.\n  var tickValue = startTick;\n  for (; tickValue <= ordinalExtent[1]; tickValue += step) {\n    addItem(tickValue);\n  }\n  if (includeMaxLabel && tickValue - step !== ordinalExtent[1]) {\n    addItem(ordinalExtent[1]);\n  }\n  function addItem(tickValue) {\n    var tickObj = {\n      value: tickValue\n    };\n    result.push(onlyTick ? tickValue : {\n      formattedLabel: labelFormatter(tickObj),\n      rawLabel: ordinalScale.getLabel(tickObj),\n      tickValue: tickValue,\n      time: undefined,\n      \"break\": undefined\n    });\n  }\n  return result;\n}\nfunction makeLabelsByCustomizedCategoryInterval(axis, categoryInterval, onlyTick) {\n  var ordinalScale = axis.scale;\n  var labelFormatter = makeLabelFormatter(axis);\n  var result = [];\n  zrUtil.each(ordinalScale.getTicks(), function (tick) {\n    var rawLabel = ordinalScale.getLabel(tick);\n    var tickValue = tick.value;\n    if (categoryInterval(tick.value, rawLabel)) {\n      result.push(onlyTick ? tickValue : {\n        formattedLabel: labelFormatter(tick),\n        rawLabel: rawLabel,\n        tickValue: tickValue,\n        time: undefined,\n        \"break\": undefined\n      });\n    }\n  });\n  return result;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, map } from 'zrender/lib/core/util.js';\nimport { linearMap, getPixelPrecision, round } from '../util/number.js';\nimport { createAxisTicks, createAxisLabels, calculateCategoryInterval, AxisTickLabelComputingKind, createAxisLabelsComputingContext } from './axisTickLabelBuilder.js';\nvar NORMALIZED_EXTENT = [0, 1];\n/**\n * Base class of Axis.\n *\n * Lifetime: recreate for each main process.\n * [NOTICE]: Some caches is stored on the axis instance (see `axisTickLabelBuilder.ts`)\n *  which is based on this lifetime.\n */\nvar Axis = /** @class */function () {\n  function Axis(dim, scale, extent) {\n    this.onBand = false;\n    // Make sure that `extent[0] > extent[1]` only if `inverse: true`.\n    // `inverse` can be inferred by `extent` unless `extent[0] === extent[1]`.\n    this.inverse = false;\n    this.dim = dim;\n    this.scale = scale;\n    this._extent = extent || [0, 0];\n  }\n  /**\n   * If axis extent contain given coord\n   */\n  Axis.prototype.contain = function (coord) {\n    var extent = this._extent;\n    var min = Math.min(extent[0], extent[1]);\n    var max = Math.max(extent[0], extent[1]);\n    return coord >= min && coord <= max;\n  };\n  /**\n   * If axis extent contain given data\n   */\n  Axis.prototype.containData = function (data) {\n    return this.scale.contain(this.scale.parse(data));\n  };\n  /**\n   * Get coord extent.\n   */\n  Axis.prototype.getExtent = function () {\n    return this._extent.slice();\n  };\n  /**\n   * Get precision used for formatting\n   */\n  Axis.prototype.getPixelPrecision = function (dataExtent) {\n    return getPixelPrecision(dataExtent || this.scale.getExtent(), this._extent);\n  };\n  /**\n   * Set coord extent\n   */\n  Axis.prototype.setExtent = function (start, end) {\n    var extent = this._extent;\n    extent[0] = start;\n    extent[1] = end;\n  };\n  /**\n   * Convert data to coord. Data is the rank if it has an ordinal scale\n   */\n  Axis.prototype.dataToCoord = function (data, clamp) {\n    var extent = this._extent;\n    var scale = this.scale;\n    data = scale.normalize(scale.parse(data));\n    if (this.onBand && scale.type === 'ordinal') {\n      extent = extent.slice();\n      fixExtentWithBands(extent, scale.count());\n    }\n    return linearMap(data, NORMALIZED_EXTENT, extent, clamp);\n  };\n  /**\n   * Convert coord to data. Data is the rank if it has an ordinal scale\n   */\n  Axis.prototype.coordToData = function (coord, clamp) {\n    var extent = this._extent;\n    var scale = this.scale;\n    if (this.onBand && scale.type === 'ordinal') {\n      extent = extent.slice();\n      fixExtentWithBands(extent, scale.count());\n    }\n    var t = linearMap(coord, extent, NORMALIZED_EXTENT, clamp);\n    return this.scale.scale(t);\n  };\n  /**\n   * Convert pixel point to data in axis\n   */\n  Axis.prototype.pointToData = function (point, clamp) {\n    // Should be implemented in derived class if necessary.\n    return;\n  };\n  /**\n   * Different from `zrUtil.map(axis.getTicks(), axis.dataToCoord, axis)`,\n   * `axis.getTicksCoords` considers `onBand`, which is used by\n   * `boundaryGap:true` of category axis and splitLine and splitArea.\n   * @param opt.tickModel default: axis.model.getModel('axisTick')\n   * @param opt.clamp If `true`, the first and the last\n   *        tick must be at the axis end points. Otherwise, clip ticks\n   *        that outside the axis extent.\n   */\n  Axis.prototype.getTicksCoords = function (opt) {\n    opt = opt || {};\n    var tickModel = opt.tickModel || this.getTickModel();\n    var result = createAxisTicks(this, tickModel, {\n      breakTicks: opt.breakTicks,\n      pruneByBreak: opt.pruneByBreak\n    });\n    var ticks = result.ticks;\n    var ticksCoords = map(ticks, function (tickVal) {\n      return {\n        coord: this.dataToCoord(this.scale.type === 'ordinal' ? this.scale.getRawOrdinalNumber(tickVal) : tickVal),\n        tickValue: tickVal\n      };\n    }, this);\n    var alignWithLabel = tickModel.get('alignWithLabel');\n    fixOnBandTicksCoords(this, ticksCoords, alignWithLabel, opt.clamp);\n    return ticksCoords;\n  };\n  Axis.prototype.getMinorTicksCoords = function () {\n    if (this.scale.type === 'ordinal') {\n      // Category axis doesn't support minor ticks\n      return [];\n    }\n    var minorTickModel = this.model.getModel('minorTick');\n    var splitNumber = minorTickModel.get('splitNumber');\n    // Protection.\n    if (!(splitNumber > 0 && splitNumber < 100)) {\n      splitNumber = 5;\n    }\n    var minorTicks = this.scale.getMinorTicks(splitNumber);\n    var minorTicksCoords = map(minorTicks, function (minorTicksGroup) {\n      return map(minorTicksGroup, function (minorTick) {\n        return {\n          coord: this.dataToCoord(minorTick),\n          tickValue: minorTick\n        };\n      }, this);\n    }, this);\n    return minorTicksCoords;\n  };\n  Axis.prototype.getViewLabels = function (ctx) {\n    ctx = ctx || createAxisLabelsComputingContext(AxisTickLabelComputingKind.determine);\n    return createAxisLabels(this, ctx).labels;\n  };\n  Axis.prototype.getLabelModel = function () {\n    return this.model.getModel('axisLabel');\n  };\n  /**\n   * Notice here we only get the default tick model. For splitLine\n   * or splitArea, we should pass the splitLineModel or splitAreaModel\n   * manually when calling `getTicksCoords`.\n   * In GL, this method may be overridden to:\n   * `axisModel.getModel('axisTick', grid3DModel.getModel('axisTick'));`\n   */\n  Axis.prototype.getTickModel = function () {\n    return this.model.getModel('axisTick');\n  };\n  /**\n   * Get width of band\n   */\n  Axis.prototype.getBandWidth = function () {\n    var axisExtent = this._extent;\n    var dataExtent = this.scale.getExtent();\n    var len = dataExtent[1] - dataExtent[0] + (this.onBand ? 1 : 0);\n    // Fix #2728, avoid NaN when only one data.\n    len === 0 && (len = 1);\n    var size = Math.abs(axisExtent[1] - axisExtent[0]);\n    return Math.abs(size) / len;\n  };\n  /**\n   * Only be called in category axis.\n   * Can be overridden, consider other axes like in 3D.\n   * @return Auto interval for cateogry axis tick and label\n   */\n  Axis.prototype.calculateCategoryInterval = function (ctx) {\n    ctx = ctx || createAxisLabelsComputingContext(AxisTickLabelComputingKind.determine);\n    return calculateCategoryInterval(this, ctx);\n  };\n  return Axis;\n}();\nfunction fixExtentWithBands(extent, nTick) {\n  var size = extent[1] - extent[0];\n  var len = nTick;\n  var margin = size / len / 2;\n  extent[0] += margin;\n  extent[1] -= margin;\n}\n// If axis has labels [1, 2, 3, 4]. Bands on the axis are\n// |---1---|---2---|---3---|---4---|.\n// So the displayed ticks and splitLine/splitArea should between\n// each data item, otherwise cause misleading (e.g., split tow bars\n// of a single data item when there are two bar series).\n// Also consider if tickCategoryInterval > 0 and onBand, ticks and\n// splitLine/spliteArea should layout appropriately corresponding\n// to displayed labels. (So we should not use `getBandWidth` in this\n// case).\nfunction fixOnBandTicksCoords(axis, ticksCoords, alignWithLabel, clamp) {\n  var ticksLen = ticksCoords.length;\n  if (!axis.onBand || alignWithLabel || !ticksLen) {\n    return;\n  }\n  var axisExtent = axis.getExtent();\n  var last;\n  var diffSize;\n  if (ticksLen === 1) {\n    ticksCoords[0].coord = axisExtent[0];\n    ticksCoords[0].onBand = true;\n    last = ticksCoords[1] = {\n      coord: axisExtent[1],\n      tickValue: ticksCoords[0].tickValue,\n      onBand: true\n    };\n  } else {\n    var crossLen = ticksCoords[ticksLen - 1].tickValue - ticksCoords[0].tickValue;\n    var shift_1 = (ticksCoords[ticksLen - 1].coord - ticksCoords[0].coord) / crossLen;\n    each(ticksCoords, function (ticksItem) {\n      ticksItem.coord -= shift_1 / 2;\n      ticksItem.onBand = true;\n    });\n    var dataExtent = axis.scale.getExtent();\n    diffSize = 1 + dataExtent[1] - ticksCoords[ticksLen - 1].tickValue;\n    last = {\n      coord: ticksCoords[ticksLen - 1].coord + shift_1 * diffSize,\n      tickValue: dataExtent[1] + 1,\n      onBand: true\n    };\n    ticksCoords.push(last);\n  }\n  var inverse = axisExtent[0] > axisExtent[1];\n  // Handling clamp.\n  if (littleThan(ticksCoords[0].coord, axisExtent[0])) {\n    clamp ? ticksCoords[0].coord = axisExtent[0] : ticksCoords.shift();\n  }\n  if (clamp && littleThan(axisExtent[0], ticksCoords[0].coord)) {\n    ticksCoords.unshift({\n      coord: axisExtent[0],\n      onBand: true\n    });\n  }\n  if (littleThan(axisExtent[1], last.coord)) {\n    clamp ? last.coord = axisExtent[1] : ticksCoords.pop();\n  }\n  if (clamp && littleThan(last.coord, axisExtent[1])) {\n    ticksCoords.push({\n      coord: axisExtent[1],\n      onBand: true\n    });\n  }\n  function littleThan(a, b) {\n    // Avoid rounding error cause calculated tick coord different with extent.\n    // It may cause an extra unnecessary tick added.\n    a = round(a);\n    b = round(b);\n    return inverse ? a > b : a < b;\n  }\n}\nexport default Axis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis.js';\nvar Axis2D = /** @class */function (_super) {\n  __extends(Axis2D, _super);\n  function Axis2D(dim, scale, coordExtent, axisType, position) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n    /**\n     * Index of axis, can be used as key\n     * Injected outside.\n     */\n    _this.index = 0;\n    _this.type = axisType || 'value';\n    _this.position = position || 'bottom';\n    return _this;\n  }\n  Axis2D.prototype.isHorizontal = function () {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  };\n  /**\n   * Each item cooresponds to this.getExtent(), which\n   * means globalExtent[0] may greater than globalExtent[1],\n   * unless `asc` is input.\n   *\n   * @param {boolean} [asc]\n   * @return {Array.<number>}\n   */\n  Axis2D.prototype.getGlobalExtent = function (asc) {\n    var ret = this.getExtent();\n    ret[0] = this.toGlobalCoord(ret[0]);\n    ret[1] = this.toGlobalCoord(ret[1]);\n    asc && ret[0] > ret[1] && ret.reverse();\n    return ret;\n  };\n  Axis2D.prototype.pointToData = function (point, clamp) {\n    return this.coordToData(this.toLocalCoord(point[this.dim === 'x' ? 0 : 1]), clamp);\n  };\n  /**\n   * Set ordinalSortInfo\n   * @param info new OrdinalSortInfo\n   */\n  Axis2D.prototype.setCategorySortInfo = function (info) {\n    if (this.type !== 'category') {\n      return false;\n    }\n    this.model.option.categorySortInfo = info;\n    this.scale.setSortInfo(info);\n  };\n  return Axis2D;\n}(Axis);\nexport default Axis2D;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { parseFinder } from '../../util/model.js';\nimport { defaults, each } from 'zrender/lib/core/util.js';\nexport var AXIS_BREAK_EXPAND_ACTION_TYPE = 'expandAxisBreak';\nexport var AXIS_BREAK_COLLAPSE_ACTION_TYPE = 'collapseAxisBreak';\nexport var AXIS_BREAK_TOGGLE_ACTION_TYPE = 'toggleAxisBreak';\nvar AXIS_BREAK_CHANGED_EVENT_TYPE = 'axisbreakchanged';\nvar expandAxisBreakActionInfo = {\n  type: AXIS_BREAK_EXPAND_ACTION_TYPE,\n  event: AXIS_BREAK_CHANGED_EVENT_TYPE,\n  update: 'update',\n  refineEvent: refineAxisBreakChangeEvent\n};\nvar collapseAxisBreakActionInfo = {\n  type: AXIS_BREAK_COLLAPSE_ACTION_TYPE,\n  event: AXIS_BREAK_CHANGED_EVENT_TYPE,\n  update: 'update',\n  refineEvent: refineAxisBreakChangeEvent\n};\nvar toggleAxisBreakActionInfo = {\n  type: AXIS_BREAK_TOGGLE_ACTION_TYPE,\n  event: AXIS_BREAK_CHANGED_EVENT_TYPE,\n  update: 'update',\n  refineEvent: refineAxisBreakChangeEvent\n};\nfunction refineAxisBreakChangeEvent(actionResultBatch, payload, ecModel, api) {\n  var breaks = [];\n  each(actionResultBatch, function (actionResult) {\n    breaks = breaks.concat(actionResult.eventBreaks);\n  });\n  return {\n    eventContent: {\n      breaks: breaks\n    }\n  };\n}\nexport function registerAction(registers) {\n  registers.registerAction(expandAxisBreakActionInfo, actionHandler);\n  registers.registerAction(collapseAxisBreakActionInfo, actionHandler);\n  registers.registerAction(toggleAxisBreakActionInfo, actionHandler);\n  function actionHandler(payload, ecModel) {\n    var eventBreaks = [];\n    var finderResult = parseFinder(ecModel, payload);\n    function dealUpdate(modelProp, indexProp) {\n      each(finderResult[modelProp], function (axisModel) {\n        var result = axisModel.updateAxisBreaks(payload);\n        each(result.breaks, function (item) {\n          var _a;\n          eventBreaks.push(defaults((_a = {}, _a[indexProp] = axisModel.componentIndex, _a), item));\n        });\n      });\n    }\n    dealUpdate('xAxisModels', 'xAxisIndex');\n    dealUpdate('yAxisModels', 'yAxisIndex');\n    dealUpdate('singleAxisModels', 'singleAxisIndex');\n    return {\n      eventBreaks: eventBreaks\n    };\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { retrieve, defaults, extend, each, isObject, isString, isNumber, isFunction, retrieve2, assert, map, retrieve3, filter } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport Model from '../../model/Model.js';\nimport { isRadianAroundZero, remRadian } from '../../util/number.js';\nimport { createSymbol, normalizeSymbolOffset } from '../../util/symbol.js';\nimport * as matrixUtil from 'zrender/lib/core/matrix.js';\nimport { applyTransform as v2ApplyTransform } from 'zrender/lib/core/vector.js';\nimport { isNameLocationCenter, shouldShowAllLabels } from '../../coord/axisHelper.js';\nimport { hideOverlap, labelIntersect, computeLabelGeometry2, ensureLabelLayoutWithGeometry, labelLayoutApplyTranslation, setLabelLayoutDirty, newLabelLayoutWithGeometry } from '../../label/labelLayoutHelper.js';\nimport { makeInner } from '../../util/model.js';\nimport { getAxisBreakHelper } from './axisBreakHelper.js';\nimport { AXIS_BREAK_EXPAND_ACTION_TYPE } from './axisAction.js';\nimport { getScaleBreakHelper } from '../../scale/break.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport Point from 'zrender/lib/core/Point.js';\nimport { copyTransform } from 'zrender/lib/core/Transformable.js';\nimport { AxisTickLabelComputingKind, createAxisLabelsComputingContext } from '../../coord/axisTickLabelBuilder.js';\nvar PI = Math.PI;\nvar DEFAULT_CENTER_NAME_MARGIN_LEVELS = [[1, 2, 1, 2], [5, 3, 5, 3], [8, 3, 8, 3]];\nvar DEFAULT_ENDS_NAME_MARGIN_LEVELS = [[0, 1, 0, 1], [0, 3, 0, 3], [0, 3, 0, 3]];\nexport var getLabelInner = makeInner();\nvar getTickInner = makeInner();\n/**\n * A context shared by difference axisBuilder instances.\n * For cross-axes overlap resolving.\n *\n * Lifecycle constraint: should not over a pass of ec main process.\n *  If model is changed, the context must be disposed.\n *\n * @see AxisBuilderLocalContext\n */\nvar AxisBuilderSharedContext = /** @class */function () {\n  function AxisBuilderSharedContext(resolveAxisNameOverlap) {\n    /**\n     * [CAUTION] Do not modify this data structure outside this class.\n     */\n    this.recordMap = {};\n    this.resolveAxisNameOverlap = resolveAxisNameOverlap;\n  }\n  AxisBuilderSharedContext.prototype.ensureRecord = function (axisModel) {\n    var dim = axisModel.axis.dim;\n    var idx = axisModel.componentIndex;\n    var recordMap = this.recordMap;\n    var records = recordMap[dim] || (recordMap[dim] = []);\n    return records[idx] || (records[idx] = {\n      ready: {}\n    });\n  };\n  return AxisBuilderSharedContext;\n}();\nexport { AxisBuilderSharedContext };\n;\n/**\n * [CAUTION]\n *  1. The call of this function must be after axisLabel overlap handlings\n *     (such as `hideOverlap`, `fixMinMaxLabelShow`) and after transform calculating.\n *  2. Can be called multiple times and should be idempotent.\n */\nfunction resetOverlapRecordToShared(cfg, shared, axisModel, labelLayoutList) {\n  var axis = axisModel.axis;\n  var record = shared.ensureRecord(axisModel);\n  var labelInfoList = [];\n  var stOccupiedRect;\n  var useStOccupiedRect = hasAxisName(cfg.axisName) && isNameLocationCenter(cfg.nameLocation);\n  each(labelLayoutList, function (layout) {\n    var layoutInfo = ensureLabelLayoutWithGeometry(layout);\n    if (!layoutInfo || layoutInfo.label.ignore) {\n      return;\n    }\n    labelInfoList.push(layoutInfo);\n    var transGroup = record.transGroup;\n    if (useStOccupiedRect) {\n      // Transform to \"standard axis\" for creating stOccupiedRect (the label rects union).\n      transGroup.transform ? matrixUtil.invert(_stTransTmp, transGroup.transform) : matrixUtil.identity(_stTransTmp);\n      if (layoutInfo.transform) {\n        matrixUtil.mul(_stTransTmp, _stTransTmp, layoutInfo.transform);\n      }\n      BoundingRect.copy(_stLabelRectTmp, layoutInfo.localRect);\n      _stLabelRectTmp.applyTransform(_stTransTmp);\n      stOccupiedRect ? stOccupiedRect.union(_stLabelRectTmp) : BoundingRect.copy(stOccupiedRect = new BoundingRect(0, 0, 0, 0), _stLabelRectTmp);\n    }\n  });\n  var sortByDim = Math.abs(record.dirVec.x) > 0.1 ? 'x' : 'y';\n  var sortByValue = record.transGroup[sortByDim];\n  labelInfoList.sort(function (info1, info2) {\n    return Math.abs(info1.label[sortByDim] - sortByValue) - Math.abs(info2.label[sortByDim] - sortByValue);\n  });\n  if (useStOccupiedRect && stOccupiedRect) {\n    var extent = axis.getExtent();\n    var axisLineX = Math.min(extent[0], extent[1]);\n    var axisLineWidth = Math.max(extent[0], extent[1]) - axisLineX;\n    // If `nameLocation` is 'middle', enlarge axis labels boundingRect to axisLine to avoid bad\n    //  case like that axis name is placed in the gap between axis labels and axis line.\n    // If only one label exists, the entire band should be occupied for\n    // visual consistency, so extent it to [0, canvas width].\n    stOccupiedRect.union(new BoundingRect(axisLineX, 0, axisLineWidth, 1));\n  }\n  record.stOccupiedRect = stOccupiedRect;\n  record.labelInfoList = labelInfoList;\n}\nvar _stTransTmp = matrixUtil.create();\nvar _stLabelRectTmp = new BoundingRect(0, 0, 0, 0);\n/**\n * The default resolver does not involve other axes within the same coordinate system.\n */\nexport var resolveAxisNameOverlapDefault = function (cfg, ctx, axisModel, nameLayoutInfo, nameMoveDirVec, thisRecord) {\n  if (isNameLocationCenter(cfg.nameLocation)) {\n    var stOccupiedRect = thisRecord.stOccupiedRect;\n    if (stOccupiedRect) {\n      moveIfOverlap(computeLabelGeometry2({}, stOccupiedRect, thisRecord.transGroup.transform), nameLayoutInfo, nameMoveDirVec);\n    }\n  } else {\n    moveIfOverlapByLinearLabels(thisRecord.labelInfoList, thisRecord.dirVec, nameLayoutInfo, nameMoveDirVec);\n  }\n};\n// [NOTICE] not consider ignore.\nfunction moveIfOverlap(basedLayoutInfo, movableLayoutInfo, moveDirVec) {\n  var mtv = new Point();\n  if (labelIntersect(basedLayoutInfo, movableLayoutInfo, mtv, {\n    direction: Math.atan2(moveDirVec.y, moveDirVec.x),\n    bidirectional: false,\n    touchThreshold: 0.05\n  })) {\n    labelLayoutApplyTranslation(movableLayoutInfo, mtv);\n  }\n}\nexport function moveIfOverlapByLinearLabels(baseLayoutInfoList, baseDirVec, movableLayoutInfo, moveDirVec) {\n  // Detect and move from far to close.\n  var sameDir = Point.dot(moveDirVec, baseDirVec) >= 0;\n  for (var idx = 0, len = baseLayoutInfoList.length; idx < len; idx++) {\n    var labelInfo = baseLayoutInfoList[sameDir ? idx : len - 1 - idx];\n    if (!labelInfo.label.ignore) {\n      moveIfOverlap(labelInfo, movableLayoutInfo, moveDirVec);\n    }\n  }\n}\n/**\n * @caution\n * - Ensure it is called after the data processing stage finished.\n * - It might be called before `CahrtView#render`, sush as called at `CoordinateSystem#update`,\n *  thus ensure the result the same whenever it is called.\n *\n * A builder for a straight-line axis.\n *\n * A final axis is translated and rotated from a \"standard axis\".\n * So opt.position and opt.rotation is required.\n *\n * A \"standard axis\" is the axis [0,0]-->[abs(axisExtent[1]-axisExtent[0]),0]\n * for example: [0,0]-->[50,0]\n */\nvar AxisBuilder = /** @class */function () {\n  /**\n   * [CAUTION]: axisModel.axis.extent/scale must be ready to use.\n   */\n  function AxisBuilder(axisModel, api, opt, shared) {\n    this.group = new graphic.Group();\n    this._axisModel = axisModel;\n    this._api = api;\n    this._local = {};\n    this._shared = shared || new AxisBuilderSharedContext(resolveAxisNameOverlapDefault);\n    this._resetCfgDetermined(opt);\n  }\n  /**\n   * Regarding axis label related configurations, only the change of label.x/y is supported; other\n   * changes are not necessary and not performant. To be specific, only `axis.position`\n   * (and consequently `labelOffset`) and `axis.extent` can be changed, and assume everything in\n   * `axisModel` are not changed.\n   * Axis line related configurations can be changed since this method can only be called\n   * before they are created.\n   */\n  AxisBuilder.prototype.updateCfg = function (opt) {\n    if (process.env.NODE_ENV !== 'production') {\n      var ready = this._shared.ensureRecord(this._axisModel).ready;\n      // After that, changing cfg is not supported; avoid unnecessary complexity.\n      assert(!ready.axisLine && !ready.axisTickLabelDetermine);\n      // Have to be called again if cfg changed.\n      ready.axisName = ready.axisTickLabelEstimate = false;\n    }\n    var raw = this._cfg.raw;\n    raw.position = opt.position;\n    raw.labelOffset = opt.labelOffset;\n    this._resetCfgDetermined(raw);\n  };\n  /**\n   * [CAUTION] For debug usage. Never change it outside!\n   */\n  AxisBuilder.prototype.__getRawCfg = function () {\n    return this._cfg.raw;\n  };\n  AxisBuilder.prototype._resetCfgDetermined = function (raw) {\n    var axisModel = this._axisModel;\n    // FIXME:\n    //  Currently there is no uniformed way to set default values if an option\n    //  is specified null/undefined by user (intentionally or unintentionally),\n    //  e.g. null/undefined is not a illegal value for `nameLocation`.\n    //  Try to use `getDefaultOption` to address it. But radar has no `getDefaultOption`.\n    var axisModelDefaultOption = axisModel.getDefaultOption ? axisModel.getDefaultOption() : {};\n    // Default value\n    var axisName = retrieve2(raw.axisName, axisModel.get('name'));\n    var nameMoveOverlapOption = axisModel.get('nameMoveOverlap');\n    if (nameMoveOverlapOption == null || nameMoveOverlapOption === 'auto') {\n      nameMoveOverlapOption = retrieve2(raw.defaultNameMoveOverlap, true);\n    }\n    var cfg = {\n      raw: raw,\n      position: raw.position,\n      rotation: raw.rotation,\n      nameDirection: retrieve2(raw.nameDirection, 1),\n      tickDirection: retrieve2(raw.tickDirection, 1),\n      labelDirection: retrieve2(raw.labelDirection, 1),\n      labelOffset: retrieve2(raw.labelOffset, 0),\n      silent: retrieve2(raw.silent, true),\n      axisName: axisName,\n      nameLocation: retrieve3(axisModel.get('nameLocation'), axisModelDefaultOption.nameLocation, 'end'),\n      shouldNameMoveOverlap: hasAxisName(axisName) && nameMoveOverlapOption,\n      optionHideOverlap: axisModel.get(['axisLabel', 'hideOverlap']),\n      showMinorTicks: axisModel.get(['minorTick', 'show'])\n    };\n    if (process.env.NODE_ENV !== 'production') {\n      assert(cfg.position != null);\n      assert(cfg.rotation != null);\n    }\n    this._cfg = cfg;\n    // FIXME Not use a separate text group?\n    var transformGroup = new graphic.Group({\n      x: cfg.position[0],\n      y: cfg.position[1],\n      rotation: cfg.rotation\n    });\n    transformGroup.updateTransform();\n    this._transformGroup = transformGroup;\n    var record = this._shared.ensureRecord(axisModel);\n    record.transGroup = this._transformGroup;\n    record.dirVec = new Point(Math.cos(-cfg.rotation), Math.sin(-cfg.rotation));\n  };\n  AxisBuilder.prototype.build = function (axisPartNameMap, extraParams) {\n    var _this = this;\n    if (!axisPartNameMap) {\n      axisPartNameMap = {\n        axisLine: true,\n        axisTickLabelEstimate: false,\n        axisTickLabelDetermine: true,\n        axisName: true\n      };\n    }\n    each(AXIS_BUILDER_AXIS_PART_NAMES, function (partName) {\n      if (axisPartNameMap[partName]) {\n        builders[partName](_this._cfg, _this._local, _this._shared, _this._axisModel, _this.group, _this._transformGroup, _this._api, extraParams || {});\n      }\n    });\n    return this;\n  };\n  /**\n   * Currently only get text align/verticalAlign by rotation.\n   * NO `position` is involved, otherwise it have to be performed for each `updateAxisLabelChangableProps`.\n   */\n  AxisBuilder.innerTextLayout = function (axisRotation, textRotation, direction) {\n    var rotationDiff = remRadian(textRotation - axisRotation);\n    var textAlign;\n    var textVerticalAlign;\n    if (isRadianAroundZero(rotationDiff)) {\n      // Label is parallel with axis line.\n      textVerticalAlign = direction > 0 ? 'top' : 'bottom';\n      textAlign = 'center';\n    } else if (isRadianAroundZero(rotationDiff - PI)) {\n      // Label is inverse parallel with axis line.\n      textVerticalAlign = direction > 0 ? 'bottom' : 'top';\n      textAlign = 'center';\n    } else {\n      textVerticalAlign = 'middle';\n      if (rotationDiff > 0 && rotationDiff < PI) {\n        textAlign = direction > 0 ? 'right' : 'left';\n      } else {\n        textAlign = direction > 0 ? 'left' : 'right';\n      }\n    }\n    return {\n      rotation: rotationDiff,\n      textAlign: textAlign,\n      textVerticalAlign: textVerticalAlign\n    };\n  };\n  AxisBuilder.makeAxisEventDataBase = function (axisModel) {\n    var eventData = {\n      componentType: axisModel.mainType,\n      componentIndex: axisModel.componentIndex\n    };\n    eventData[axisModel.mainType + 'Index'] = axisModel.componentIndex;\n    return eventData;\n  };\n  AxisBuilder.isLabelSilent = function (axisModel) {\n    var tooltipOpt = axisModel.get('tooltip');\n    return axisModel.get('silent')\n    // Consider mouse cursor, add these restrictions.\n    || !(axisModel.get('triggerEvent') || tooltipOpt && tooltipOpt.show);\n  };\n  return AxisBuilder;\n}();\n;\n// Sorted by dependency order.\nvar AXIS_BUILDER_AXIS_PART_NAMES = ['axisLine', 'axisTickLabelEstimate', 'axisTickLabelDetermine', 'axisName'];\nvar builders = {\n  axisLine: function (cfg, local, shared, axisModel, group, transformGroup, api) {\n    if (process.env.NODE_ENV !== 'production') {\n      var ready = shared.ensureRecord(axisModel).ready;\n      assert(!ready.axisLine);\n      ready.axisLine = true;\n    }\n    var shown = axisModel.get(['axisLine', 'show']);\n    if (shown === 'auto') {\n      shown = true;\n      if (cfg.raw.axisLineAutoShow != null) {\n        shown = !!cfg.raw.axisLineAutoShow;\n      }\n    }\n    if (!shown) {\n      return;\n    }\n    var extent = axisModel.axis.getExtent();\n    var matrix = transformGroup.transform;\n    var pt1 = [extent[0], 0];\n    var pt2 = [extent[1], 0];\n    var inverse = pt1[0] > pt2[0];\n    if (matrix) {\n      v2ApplyTransform(pt1, pt1, matrix);\n      v2ApplyTransform(pt2, pt2, matrix);\n    }\n    var lineStyle = extend({\n      lineCap: 'round'\n    }, axisModel.getModel(['axisLine', 'lineStyle']).getLineStyle());\n    var pathBaseProp = {\n      strokeContainThreshold: cfg.raw.strokeContainThreshold || 5,\n      silent: true,\n      z2: 1,\n      style: lineStyle\n    };\n    if (axisModel.get(['axisLine', 'breakLine']) && axisModel.axis.scale.hasBreaks()) {\n      getAxisBreakHelper().buildAxisBreakLine(axisModel, group, transformGroup, pathBaseProp);\n    } else {\n      var line = new graphic.Line(extend({\n        shape: {\n          x1: pt1[0],\n          y1: pt1[1],\n          x2: pt2[0],\n          y2: pt2[1]\n        }\n      }, pathBaseProp));\n      graphic.subPixelOptimizeLine(line.shape, line.style.lineWidth);\n      line.anid = 'line';\n      group.add(line);\n    }\n    var arrows = axisModel.get(['axisLine', 'symbol']);\n    if (arrows != null) {\n      var arrowSize = axisModel.get(['axisLine', 'symbolSize']);\n      if (isString(arrows)) {\n        // Use the same arrow for start and end point\n        arrows = [arrows, arrows];\n      }\n      if (isString(arrowSize) || isNumber(arrowSize)) {\n        // Use the same size for width and height\n        arrowSize = [arrowSize, arrowSize];\n      }\n      var arrowOffset = normalizeSymbolOffset(axisModel.get(['axisLine', 'symbolOffset']) || 0, arrowSize);\n      var symbolWidth_1 = arrowSize[0];\n      var symbolHeight_1 = arrowSize[1];\n      each([{\n        rotate: cfg.rotation + Math.PI / 2,\n        offset: arrowOffset[0],\n        r: 0\n      }, {\n        rotate: cfg.rotation - Math.PI / 2,\n        offset: arrowOffset[1],\n        r: Math.sqrt((pt1[0] - pt2[0]) * (pt1[0] - pt2[0]) + (pt1[1] - pt2[1]) * (pt1[1] - pt2[1]))\n      }], function (point, index) {\n        if (arrows[index] !== 'none' && arrows[index] != null) {\n          var symbol = createSymbol(arrows[index], -symbolWidth_1 / 2, -symbolHeight_1 / 2, symbolWidth_1, symbolHeight_1, lineStyle.stroke, true);\n          // Calculate arrow position with offset\n          var r = point.r + point.offset;\n          var pt = inverse ? pt2 : pt1;\n          symbol.attr({\n            rotation: point.rotate,\n            x: pt[0] + r * Math.cos(cfg.rotation),\n            y: pt[1] - r * Math.sin(cfg.rotation),\n            silent: true,\n            z2: 11\n          });\n          group.add(symbol);\n        }\n      });\n    }\n  },\n  /**\n   * [CAUTION] This method can be called multiple times, following the change due to `resetCfg` called\n   *  in size measurement. Thus this method should be idempotent, and should be performant.\n   */\n  axisTickLabelEstimate: function (cfg, local, shared, axisModel, group, transformGroup, api, extraParams) {\n    if (process.env.NODE_ENV !== 'production') {\n      var ready = shared.ensureRecord(axisModel).ready;\n      assert(!ready.axisTickLabelDetermine);\n      ready.axisTickLabelEstimate = true;\n    }\n    var needCallLayout = dealLastTickLabelResultReusable(local, group, extraParams);\n    if (needCallLayout) {\n      layOutAxisTickLabel(cfg, local, shared, axisModel, group, transformGroup, api, AxisTickLabelComputingKind.estimate);\n    }\n  },\n  /**\n   * Finish axis tick label build.\n   * Can be only called once.\n   */\n  axisTickLabelDetermine: function (cfg, local, shared, axisModel, group, transformGroup, api, extraParams) {\n    if (process.env.NODE_ENV !== 'production') {\n      var ready = shared.ensureRecord(axisModel).ready;\n      ready.axisTickLabelDetermine = true;\n    }\n    var needCallLayout = dealLastTickLabelResultReusable(local, group, extraParams);\n    if (needCallLayout) {\n      layOutAxisTickLabel(cfg, local, shared, axisModel, group, transformGroup, api, AxisTickLabelComputingKind.determine);\n    }\n    var ticksEls = buildAxisMajorTicks(cfg, group, transformGroup, axisModel);\n    syncLabelIgnoreToMajorTicks(cfg, local.labelLayoutList, ticksEls);\n    buildAxisMinorTicks(cfg, group, transformGroup, axisModel, cfg.tickDirection);\n  },\n  /**\n   * [CAUTION] This method can be called multiple times, following the change due to `resetCfg` called\n   *  in size measurement. Thus this method should be idempotent, and should be performant.\n   */\n  axisName: function (cfg, local, shared, axisModel, group, transformGroup, api, extraParams) {\n    var sharedRecord = shared.ensureRecord(axisModel);\n    if (process.env.NODE_ENV !== 'production') {\n      var ready = sharedRecord.ready;\n      assert(ready.axisTickLabelEstimate || ready.axisTickLabelDetermine);\n      ready.axisName = true;\n    }\n    // Remove the existing name result created in estimation phase.\n    if (local.nameEl) {\n      group.remove(local.nameEl);\n      local.nameEl = sharedRecord.nameLayout = sharedRecord.nameLocation = null;\n    }\n    var name = cfg.axisName;\n    if (!hasAxisName(name)) {\n      return;\n    }\n    var nameLocation = cfg.nameLocation;\n    var nameDirection = cfg.nameDirection;\n    var textStyleModel = axisModel.getModel('nameTextStyle');\n    var gap = axisModel.get('nameGap') || 0;\n    var extent = axisModel.axis.getExtent();\n    var gapStartEndSignal = axisModel.axis.inverse ? -1 : 1;\n    var pos = new Point(0, 0);\n    var nameMoveDirVec = new Point(0, 0);\n    if (nameLocation === 'start') {\n      pos.x = extent[0] - gapStartEndSignal * gap;\n      nameMoveDirVec.x = -gapStartEndSignal;\n    } else if (nameLocation === 'end') {\n      pos.x = extent[1] + gapStartEndSignal * gap;\n      nameMoveDirVec.x = gapStartEndSignal;\n    } else {\n      // 'middle' or 'center'\n      pos.x = (extent[0] + extent[1]) / 2;\n      pos.y = cfg.labelOffset + nameDirection * gap;\n      nameMoveDirVec.y = nameDirection;\n    }\n    var mt = matrixUtil.create();\n    nameMoveDirVec.transform(matrixUtil.rotate(mt, mt, cfg.rotation));\n    var nameRotation = axisModel.get('nameRotate');\n    if (nameRotation != null) {\n      nameRotation = nameRotation * PI / 180; // To radian.\n    }\n    var labelLayout;\n    var axisNameAvailableWidth;\n    if (isNameLocationCenter(nameLocation)) {\n      labelLayout = AxisBuilder.innerTextLayout(cfg.rotation, nameRotation != null ? nameRotation : cfg.rotation,\n      // Adapt to axis.\n      nameDirection);\n    } else {\n      labelLayout = endTextLayout(cfg.rotation, nameLocation, nameRotation || 0, extent);\n      axisNameAvailableWidth = cfg.raw.axisNameAvailableWidth;\n      if (axisNameAvailableWidth != null) {\n        axisNameAvailableWidth = Math.abs(axisNameAvailableWidth / Math.sin(labelLayout.rotation));\n        !isFinite(axisNameAvailableWidth) && (axisNameAvailableWidth = null);\n      }\n    }\n    var textFont = textStyleModel.getFont();\n    var truncateOpt = axisModel.get('nameTruncate', true) || {};\n    var ellipsis = truncateOpt.ellipsis;\n    var maxWidth = retrieve(cfg.raw.nameTruncateMaxWidth, truncateOpt.maxWidth, axisNameAvailableWidth);\n    var nameMarginLevel = extraParams.nameMarginLevel || 0;\n    var textEl = new graphic.Text({\n      x: pos.x,\n      y: pos.y,\n      rotation: labelLayout.rotation,\n      silent: AxisBuilder.isLabelSilent(axisModel),\n      style: createTextStyle(textStyleModel, {\n        text: name,\n        font: textFont,\n        overflow: 'truncate',\n        width: maxWidth,\n        ellipsis: ellipsis,\n        fill: textStyleModel.getTextColor() || axisModel.get(['axisLine', 'lineStyle', 'color']),\n        align: textStyleModel.get('align') || labelLayout.textAlign,\n        verticalAlign: textStyleModel.get('verticalAlign') || labelLayout.textVerticalAlign\n      }),\n      z2: 1\n    });\n    graphic.setTooltipConfig({\n      el: textEl,\n      componentModel: axisModel,\n      itemName: name\n    });\n    textEl.__fullText = name;\n    // Id for animation\n    textEl.anid = 'name';\n    if (axisModel.get('triggerEvent')) {\n      var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);\n      eventData.targetType = 'axisName';\n      eventData.name = name;\n      getECData(textEl).eventData = eventData;\n    }\n    transformGroup.add(textEl);\n    textEl.updateTransform();\n    local.nameEl = textEl;\n    var nameLayout = sharedRecord.nameLayout = ensureLabelLayoutWithGeometry({\n      label: textEl,\n      priority: textEl.z2,\n      defaultAttr: {\n        ignore: textEl.ignore\n      },\n      marginDefault: isNameLocationCenter(nameLocation)\n      // Make axis name visually far from axis labels.\n      // (but not too aggressive, consider multiple small charts)\n      ? DEFAULT_CENTER_NAME_MARGIN_LEVELS[nameMarginLevel]\n      // top/button margin is set to `0` to inserted the xAxis name into the indention\n      // above the axis labels to save space. (see example below.)\n      : DEFAULT_ENDS_NAME_MARGIN_LEVELS[nameMarginLevel]\n    });\n    sharedRecord.nameLocation = nameLocation;\n    group.add(textEl);\n    textEl.decomposeTransform();\n    if (cfg.shouldNameMoveOverlap && nameLayout) {\n      var record = shared.ensureRecord(axisModel);\n      if (process.env.NODE_ENV !== 'production') {\n        assert(record.labelInfoList);\n      }\n      shared.resolveAxisNameOverlap(cfg, shared, axisModel, nameLayout, nameMoveDirVec, record);\n    }\n  }\n};\nfunction layOutAxisTickLabel(cfg, local, shared, axisModel, group, transformGroup, api, kind) {\n  if (!axisLabelBuildResultExists(local)) {\n    buildAxisLabel(cfg, local, group, kind, axisModel, api);\n  }\n  var labelLayoutList = local.labelLayoutList;\n  updateAxisLabelChangableProps(cfg, axisModel, labelLayoutList, transformGroup);\n  adjustBreakLabels(axisModel, cfg.rotation, labelLayoutList);\n  var optionHideOverlap = cfg.optionHideOverlap;\n  fixMinMaxLabelShow(axisModel, labelLayoutList, optionHideOverlap);\n  if (optionHideOverlap) {\n    // This bit fixes the label overlap issue for the time chart.\n    // See https://github.com/apache/echarts/issues/14266 for more.\n    hideOverlap(\n    // Filter the already ignored labels by the previous overlap resolving methods.\n    filter(labelLayoutList, function (layout) {\n      return layout && !layout.label.ignore;\n    }));\n  }\n  // Always call it even this axis has no name, since it serves in overlapping detection\n  // and grid outerBounds on other axis.\n  resetOverlapRecordToShared(cfg, shared, axisModel, labelLayoutList);\n}\n;\nfunction endTextLayout(rotation, textPosition, textRotate, extent) {\n  var rotationDiff = remRadian(textRotate - rotation);\n  var textAlign;\n  var textVerticalAlign;\n  var inverse = extent[0] > extent[1];\n  var onLeft = textPosition === 'start' && !inverse || textPosition !== 'start' && inverse;\n  if (isRadianAroundZero(rotationDiff - PI / 2)) {\n    textVerticalAlign = onLeft ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI * 1.5)) {\n    textVerticalAlign = onLeft ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n    if (rotationDiff < PI * 1.5 && rotationDiff > PI / 2) {\n      textAlign = onLeft ? 'left' : 'right';\n    } else {\n      textAlign = onLeft ? 'right' : 'left';\n    }\n  }\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n}\n/**\n * Assume `labelLayoutList` has no `label.ignore: true`.\n * Assume `labelLayoutList` have been sorted by value ascending order.\n */\nfunction fixMinMaxLabelShow(axisModel, labelLayoutList, optionHideOverlap) {\n  if (shouldShowAllLabels(axisModel.axis)) {\n    return;\n  }\n  // FIXME\n  // Have not consider onBand yet, where tick els is more than label els.\n  // Assert no ignore in labels.\n  function deal(showMinMaxLabel, outmostLabelIdx, innerLabelIdx) {\n    var outmostLabelLayout = ensureLabelLayoutWithGeometry(labelLayoutList[outmostLabelIdx]);\n    var innerLabelLayout = ensureLabelLayoutWithGeometry(labelLayoutList[innerLabelIdx]);\n    if (!outmostLabelLayout || !innerLabelLayout) {\n      return;\n    }\n    if (showMinMaxLabel === false || outmostLabelLayout.suggestIgnore) {\n      ignoreEl(outmostLabelLayout.label);\n      return;\n    }\n    if (innerLabelLayout.suggestIgnore) {\n      ignoreEl(innerLabelLayout.label);\n      return;\n    }\n    // PENDING: Originally we thought `optionHideOverlap === false` means do not hide anything,\n    //  since currently the bounding rect of text might not accurate enough and might slightly bigger,\n    //  which causes false positive. But `optionHideOverlap: null/undfined` is falsy and likely\n    //  be treated as false.\n    // In most fonts the glyph does not reach the boundary of the bounding rect.\n    // This is needed to avoid too aggressive to hide two elements that meet at the edge\n    // due to compact layout by the same bounding rect or OBB.\n    var touchThreshold = 0.1;\n    // This treatment is for backward compatibility. And `!optionHideOverlap` implies that\n    // the user accepts the visual touch between adjacent labels, thus \"hide min/max label\"\n    // should be conservative, since the space might be sufficient in this case.\n    if (!optionHideOverlap) {\n      var marginForce = [0, 0, 0, 0];\n      // Make a copy to apply `ignoreMargin`.\n      outmostLabelLayout = newLabelLayoutWithGeometry({\n        marginForce: marginForce\n      }, outmostLabelLayout);\n      innerLabelLayout = newLabelLayoutWithGeometry({\n        marginForce: marginForce\n      }, innerLabelLayout);\n    }\n    if (labelIntersect(outmostLabelLayout, innerLabelLayout, null, {\n      touchThreshold: touchThreshold\n    })) {\n      if (showMinMaxLabel) {\n        ignoreEl(innerLabelLayout.label);\n      } else {\n        ignoreEl(outmostLabelLayout.label);\n      }\n    }\n  }\n  // If min or max are user set, we need to check\n  // If the tick on min(max) are overlap on their neighbour tick\n  // If they are overlapped, we need to hide the min(max) tick label\n  var showMinLabel = axisModel.get(['axisLabel', 'showMinLabel']);\n  var showMaxLabel = axisModel.get(['axisLabel', 'showMaxLabel']);\n  var labelsLen = labelLayoutList.length;\n  deal(showMinLabel, 0, 1);\n  deal(showMaxLabel, labelsLen - 1, labelsLen - 2);\n}\n// PENDING: Is it necessary to display a tick while the corresponding label is ignored?\nfunction syncLabelIgnoreToMajorTicks(cfg, labelLayoutList, tickEls) {\n  if (cfg.showMinorTicks) {\n    // It probably unreaasonable to hide major ticks when show minor ticks.\n    return;\n  }\n  each(labelLayoutList, function (labelLayout) {\n    if (labelLayout && labelLayout.label.ignore) {\n      for (var idx = 0; idx < tickEls.length; idx++) {\n        var tickEl = tickEls[idx];\n        // Assume small array, linear search is fine for performance.\n        // PENDING: measure?\n        var tickInner = getTickInner(tickEl);\n        var labelInner = getLabelInner(labelLayout.label);\n        if (tickInner.tickValue != null && !tickInner.onBand && tickInner.tickValue === labelInner.tickValue) {\n          ignoreEl(tickEl);\n          return;\n        }\n      }\n    }\n  });\n}\nfunction ignoreEl(el) {\n  el && (el.ignore = true);\n}\nfunction createTicks(ticksCoords, tickTransform, tickEndCoord, tickLineStyle, anidPrefix) {\n  var tickEls = [];\n  var pt1 = [];\n  var pt2 = [];\n  for (var i = 0; i < ticksCoords.length; i++) {\n    var tickCoord = ticksCoords[i].coord;\n    pt1[0] = tickCoord;\n    pt1[1] = 0;\n    pt2[0] = tickCoord;\n    pt2[1] = tickEndCoord;\n    if (tickTransform) {\n      v2ApplyTransform(pt1, pt1, tickTransform);\n      v2ApplyTransform(pt2, pt2, tickTransform);\n    }\n    // Tick line, Not use group transform to have better line draw\n    var tickEl = new graphic.Line({\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: tickLineStyle,\n      z2: 2,\n      autoBatch: true,\n      silent: true\n    });\n    graphic.subPixelOptimizeLine(tickEl.shape, tickEl.style.lineWidth);\n    tickEl.anid = anidPrefix + '_' + ticksCoords[i].tickValue;\n    tickEls.push(tickEl);\n    var inner = getTickInner(tickEl);\n    inner.onBand = !!ticksCoords[i].onBand;\n    inner.tickValue = ticksCoords[i].tickValue;\n  }\n  return tickEls;\n}\nfunction buildAxisMajorTicks(cfg, group, transformGroup, axisModel) {\n  var axis = axisModel.axis;\n  var tickModel = axisModel.getModel('axisTick');\n  var shown = tickModel.get('show');\n  if (shown === 'auto') {\n    shown = true;\n    if (cfg.raw.axisTickAutoShow != null) {\n      shown = !!cfg.raw.axisTickAutoShow;\n    }\n  }\n  if (!shown || axis.scale.isBlank()) {\n    return [];\n  }\n  var lineStyleModel = tickModel.getModel('lineStyle');\n  var tickEndCoord = cfg.tickDirection * tickModel.get('length');\n  var ticksCoords = axis.getTicksCoords();\n  var ticksEls = createTicks(ticksCoords, transformGroup.transform, tickEndCoord, defaults(lineStyleModel.getLineStyle(), {\n    stroke: axisModel.get(['axisLine', 'lineStyle', 'color'])\n  }), 'ticks');\n  for (var i = 0; i < ticksEls.length; i++) {\n    group.add(ticksEls[i]);\n  }\n  return ticksEls;\n}\nfunction buildAxisMinorTicks(cfg, group, transformGroup, axisModel, tickDirection) {\n  var axis = axisModel.axis;\n  var minorTickModel = axisModel.getModel('minorTick');\n  if (!cfg.showMinorTicks || axis.scale.isBlank()) {\n    return;\n  }\n  var minorTicksCoords = axis.getMinorTicksCoords();\n  if (!minorTicksCoords.length) {\n    return;\n  }\n  var lineStyleModel = minorTickModel.getModel('lineStyle');\n  var tickEndCoord = tickDirection * minorTickModel.get('length');\n  var minorTickLineStyle = defaults(lineStyleModel.getLineStyle(), defaults(axisModel.getModel('axisTick').getLineStyle(), {\n    stroke: axisModel.get(['axisLine', 'lineStyle', 'color'])\n  }));\n  for (var i = 0; i < minorTicksCoords.length; i++) {\n    var minorTicksEls = createTicks(minorTicksCoords[i], transformGroup.transform, tickEndCoord, minorTickLineStyle, 'minorticks_' + i);\n    for (var k = 0; k < minorTicksEls.length; k++) {\n      group.add(minorTicksEls[k]);\n    }\n  }\n}\n// Return whether need to call `layOutAxisTickLabel` again.\nfunction dealLastTickLabelResultReusable(local, group, extraParams) {\n  if (axisLabelBuildResultExists(local)) {\n    var axisLabelsCreationContext = local.axisLabelsCreationContext;\n    if (process.env.NODE_ENV !== 'production') {\n      assert(local.labelGroup && axisLabelsCreationContext);\n    }\n    var noPxChangeTryDetermine = axisLabelsCreationContext.out.noPxChangeTryDetermine;\n    if (extraParams.noPxChange) {\n      var canDetermine = true;\n      for (var idx = 0; idx < noPxChangeTryDetermine.length; idx++) {\n        canDetermine = canDetermine && noPxChangeTryDetermine[idx]();\n      }\n      if (canDetermine) {\n        return false;\n      }\n    }\n    if (noPxChangeTryDetermine.length) {\n      // Remove the result of `buildAxisLabel`\n      group.remove(local.labelGroup);\n      axisLabelBuildResultSet(local, null, null, null);\n    }\n  }\n  return true;\n}\nfunction buildAxisLabel(cfg, local, group, kind, axisModel, api) {\n  var axis = axisModel.axis;\n  var show = retrieve(cfg.raw.axisLabelShow, axisModel.get(['axisLabel', 'show']));\n  var labelGroup = new graphic.Group();\n  group.add(labelGroup);\n  var axisLabelCreationCtx = createAxisLabelsComputingContext(kind);\n  if (!show || axis.scale.isBlank()) {\n    axisLabelBuildResultSet(local, [], labelGroup, axisLabelCreationCtx);\n    return;\n  }\n  var labelModel = axisModel.getModel('axisLabel');\n  var labels = axis.getViewLabels(axisLabelCreationCtx);\n  // Special label rotate.\n  var labelRotation = (retrieve(cfg.raw.labelRotate, labelModel.get('rotate')) || 0) * PI / 180;\n  var labelLayout = AxisBuilder.innerTextLayout(cfg.rotation, labelRotation, cfg.labelDirection);\n  var rawCategoryData = axisModel.getCategories && axisModel.getCategories(true);\n  var labelEls = [];\n  var triggerEvent = axisModel.get('triggerEvent');\n  var z2Min = Infinity;\n  var z2Max = -Infinity;\n  each(labels, function (labelItem, index) {\n    var _a;\n    var tickValue = axis.scale.type === 'ordinal' ? axis.scale.getRawOrdinalNumber(labelItem.tickValue) : labelItem.tickValue;\n    var formattedLabel = labelItem.formattedLabel;\n    var rawLabel = labelItem.rawLabel;\n    var itemLabelModel = labelModel;\n    if (rawCategoryData && rawCategoryData[tickValue]) {\n      var rawCategoryItem = rawCategoryData[tickValue];\n      if (isObject(rawCategoryItem) && rawCategoryItem.textStyle) {\n        itemLabelModel = new Model(rawCategoryItem.textStyle, labelModel, axisModel.ecModel);\n      }\n    }\n    var textColor = itemLabelModel.getTextColor() || axisModel.get(['axisLine', 'lineStyle', 'color']);\n    var align = itemLabelModel.getShallow('align', true) || labelLayout.textAlign;\n    var alignMin = retrieve2(itemLabelModel.getShallow('alignMinLabel', true), align);\n    var alignMax = retrieve2(itemLabelModel.getShallow('alignMaxLabel', true), align);\n    var verticalAlign = itemLabelModel.getShallow('verticalAlign', true) || itemLabelModel.getShallow('baseline', true) || labelLayout.textVerticalAlign;\n    var verticalAlignMin = retrieve2(itemLabelModel.getShallow('verticalAlignMinLabel', true), verticalAlign);\n    var verticalAlignMax = retrieve2(itemLabelModel.getShallow('verticalAlignMaxLabel', true), verticalAlign);\n    var z2 = 10 + (((_a = labelItem.time) === null || _a === void 0 ? void 0 : _a.level) || 0);\n    z2Min = Math.min(z2Min, z2);\n    z2Max = Math.max(z2Max, z2);\n    var textEl = new graphic.Text({\n      // --- transform props start ---\n      // All of the transform props MUST not be set here, but should be set in\n      // `updateAxisLabelChangableProps`, because they may change in estimation,\n      // and need to calculate based on global coord sys by `decomposeTransform`.\n      x: 0,\n      y: 0,\n      rotation: 0,\n      // --- transform props end ---\n      silent: AxisBuilder.isLabelSilent(axisModel),\n      z2: z2,\n      style: createTextStyle(itemLabelModel, {\n        text: formattedLabel,\n        align: index === 0 ? alignMin : index === labels.length - 1 ? alignMax : align,\n        verticalAlign: index === 0 ? verticalAlignMin : index === labels.length - 1 ? verticalAlignMax : verticalAlign,\n        fill: isFunction(textColor) ? textColor(\n        // (1) In category axis with data zoom, tick is not the original\n        // index of axis.data. So tick should not be exposed to user\n        // in category axis.\n        // (2) Compatible with previous version, which always use formatted label as\n        // input. But in interval scale the formatted label is like '223,445', which\n        // maked user replace ','. So we modify it to return original val but remain\n        // it as 'string' to avoid error in replacing.\n        axis.type === 'category' ? rawLabel : axis.type === 'value' ? tickValue + '' : tickValue, index) : textColor\n      })\n    });\n    textEl.anid = 'label_' + tickValue;\n    var inner = getLabelInner(textEl);\n    inner[\"break\"] = labelItem[\"break\"];\n    inner.tickValue = tickValue;\n    inner.layoutRotation = labelLayout.rotation;\n    graphic.setTooltipConfig({\n      el: textEl,\n      componentModel: axisModel,\n      itemName: formattedLabel,\n      formatterParamsExtra: {\n        isTruncated: function () {\n          return textEl.isTruncated;\n        },\n        value: rawLabel,\n        tickIndex: index\n      }\n    });\n    // Pack data for mouse event\n    if (triggerEvent) {\n      var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);\n      eventData.targetType = 'axisLabel';\n      eventData.value = rawLabel;\n      eventData.tickIndex = index;\n      if (labelItem[\"break\"]) {\n        eventData[\"break\"] = {\n          // type: labelItem.break.type,\n          start: labelItem[\"break\"].parsedBreak.vmin,\n          end: labelItem[\"break\"].parsedBreak.vmax\n        };\n      }\n      if (axis.type === 'category') {\n        eventData.dataIndex = tickValue;\n      }\n      getECData(textEl).eventData = eventData;\n      if (labelItem[\"break\"]) {\n        addBreakEventHandler(axisModel, api, textEl, labelItem[\"break\"]);\n      }\n    }\n    labelEls.push(textEl);\n    labelGroup.add(textEl);\n  });\n  var labelLayoutList = map(labelEls, function (label) {\n    return {\n      label: label,\n      priority: getLabelInner(label)[\"break\"] ? label.z2 + (z2Max - z2Min + 1) // Make break labels be highest priority.\n      : label.z2,\n      defaultAttr: {\n        ignore: label.ignore\n      }\n    };\n  });\n  axisLabelBuildResultSet(local, labelLayoutList, labelGroup, axisLabelCreationCtx);\n}\n// Indicate that `layOutAxisTickLabel` has been called.\nfunction axisLabelBuildResultExists(local) {\n  return !!local.labelLayoutList;\n}\nfunction axisLabelBuildResultSet(local, labelLayoutList, labelGroup, axisLabelsCreationContext) {\n  // Ensure the same lifetime.\n  local.labelLayoutList = labelLayoutList;\n  local.labelGroup = labelGroup;\n  local.axisLabelsCreationContext = axisLabelsCreationContext;\n}\nfunction updateAxisLabelChangableProps(cfg, axisModel, labelLayoutList, transformGroup) {\n  var labelMargin = axisModel.get(['axisLabel', 'margin']);\n  each(labelLayoutList, function (layout, idx) {\n    var geometry = ensureLabelLayoutWithGeometry(layout);\n    if (!geometry) {\n      return;\n    }\n    var labelEl = geometry.label;\n    var inner = getLabelInner(labelEl);\n    // See the comment in `suggestIgnore`.\n    geometry.suggestIgnore = labelEl.ignore;\n    // Currently no `ignore:true` is set in `buildAxisLabel`\n    // But `ignore:true` may be set subsequently for overlap handling, thus reset it here.\n    labelEl.ignore = false;\n    copyTransform(_tmpLayoutEl, _tmpLayoutElReset);\n    _tmpLayoutEl.x = axisModel.axis.dataToCoord(inner.tickValue);\n    _tmpLayoutEl.y = cfg.labelOffset + cfg.labelDirection * labelMargin;\n    _tmpLayoutEl.rotation = inner.layoutRotation;\n    transformGroup.add(_tmpLayoutEl);\n    _tmpLayoutEl.updateTransform();\n    transformGroup.remove(_tmpLayoutEl);\n    _tmpLayoutEl.decomposeTransform();\n    copyTransform(labelEl, _tmpLayoutEl);\n    labelEl.markRedraw();\n    setLabelLayoutDirty(geometry, true);\n    ensureLabelLayoutWithGeometry(geometry);\n  });\n}\nvar _tmpLayoutEl = new graphic.Rect();\nvar _tmpLayoutElReset = new graphic.Rect();\nfunction hasAxisName(axisName) {\n  return !!axisName;\n}\nfunction addBreakEventHandler(axisModel, api, textEl, visualBreak) {\n  textEl.on('click', function (params) {\n    var payload = {\n      type: AXIS_BREAK_EXPAND_ACTION_TYPE,\n      breaks: [{\n        start: visualBreak.parsedBreak.breakOption.start,\n        end: visualBreak.parsedBreak.breakOption.end\n      }]\n    };\n    payload[axisModel.axis.dim + \"AxisIndex\"] = axisModel.componentIndex;\n    api.dispatchAction(payload);\n  });\n}\nfunction adjustBreakLabels(axisModel, axisRotation, labelLayoutList) {\n  var scaleBreakHelper = getScaleBreakHelper();\n  if (!scaleBreakHelper) {\n    return;\n  }\n  var breakLabelIndexPairs = scaleBreakHelper.retrieveAxisBreakPairs(labelLayoutList, function (layoutInfo) {\n    return layoutInfo && getLabelInner(layoutInfo.label)[\"break\"];\n  }, true);\n  var moveOverlap = axisModel.get(['breakLabelLayout', 'moveOverlap'], true);\n  if (moveOverlap === true || moveOverlap === 'auto') {\n    each(breakLabelIndexPairs, function (idxPair) {\n      getAxisBreakHelper().adjustBreakLabelPair(axisModel.axis.inverse, axisRotation, [ensureLabelLayoutWithGeometry(labelLayoutList[idxPair[0]]), ensureLabelLayoutWithGeometry(labelLayoutList[idxPair[1]])]);\n    });\n  }\n}\nexport default AxisBuilder;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\nimport AxisBuilder from '../../component/axis/AxisBuilder.js';\nimport { isIntervalOrLogScale } from '../../scale/helper.js';\n/**\n * [__CAUTION__]\n *  MUST guarantee: if only the input `rect` and `axis.extent` changed,\n *  only `layout.position` changes.\n *  This character is replied on `grid.contain` calculation in `AxisBuilder`.\n *  @see updateCartesianAxisViewCommonPartBuilder\n *\n * Can only be called after coordinate system creation stage.\n * (Can be called before coordinate system update stage).\n */\nexport function layout(rect, axisModel, opt) {\n  opt = opt || {};\n  var axis = axisModel.axis;\n  var layout = {};\n  var otherAxisOnZeroOf = axis.getAxesOnZeroOf()[0];\n  var rawAxisPosition = axis.position;\n  var axisPosition = otherAxisOnZeroOf ? 'onZero' : rawAxisPosition;\n  var axisDim = axis.dim;\n  var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\n  var idx = {\n    left: 0,\n    right: 1,\n    top: 0,\n    bottom: 1,\n    onZero: 2\n  };\n  var axisOffset = axisModel.get('offset') || 0;\n  var posBound = axisDim === 'x' ? [rectBound[2] - axisOffset, rectBound[3] + axisOffset] : [rectBound[0] - axisOffset, rectBound[1] + axisOffset];\n  if (otherAxisOnZeroOf) {\n    var onZeroCoord = otherAxisOnZeroOf.toGlobalCoord(otherAxisOnZeroOf.dataToCoord(0));\n    posBound[idx.onZero] = Math.max(Math.min(onZeroCoord, posBound[1]), posBound[0]);\n  }\n  // Axis position\n  layout.position = [axisDim === 'y' ? posBound[idx[axisPosition]] : rectBound[0], axisDim === 'x' ? posBound[idx[axisPosition]] : rectBound[3]];\n  // Axis rotation\n  layout.rotation = Math.PI / 2 * (axisDim === 'x' ? 0 : 1);\n  // Tick and label direction, x y is axisDim\n  var dirMap = {\n    top: -1,\n    bottom: 1,\n    left: -1,\n    right: 1\n  };\n  layout.labelDirection = layout.tickDirection = layout.nameDirection = dirMap[rawAxisPosition];\n  layout.labelOffset = otherAxisOnZeroOf ? posBound[idx[rawAxisPosition]] - posBound[idx.onZero] : 0;\n  if (axisModel.get(['axisTick', 'inside'])) {\n    layout.tickDirection = -layout.tickDirection;\n  }\n  if (zrUtil.retrieve(opt.labelInside, axisModel.get(['axisLabel', 'inside']))) {\n    layout.labelDirection = -layout.labelDirection;\n  }\n  // Special label rotation\n  var labelRotate = axisModel.get(['axisLabel', 'rotate']);\n  layout.labelRotate = axisPosition === 'top' ? -labelRotate : labelRotate;\n  // Over splitLine and splitArea\n  layout.z2 = 1;\n  return layout;\n}\nexport function isCartesian2DDeclaredSeries(seriesModel) {\n  return seriesModel.get('coordinateSystem') === 'cartesian2d';\n}\n/**\n * Note: If pie (or other similar series) use cartesian2d, here\n *  option `seriesModel.get('coordinateSystem') === 'cartesian2d'`\n *  and `seriesModel.coordinateSystem !== cartesian2dCoordSysInstance`\n *  and `seriesModel.boxCoordinateSystem === cartesian2dCoordSysInstance`,\n *  the logic below is probably wrong, therefore skip it temporarily.\n */\nexport function isCartesian2DInjectedAsDataCoordSys(seriesModel) {\n  return seriesModel.coordinateSystem && seriesModel.coordinateSystem.type === 'cartesian2d';\n}\nexport function findAxisModels(seriesModel) {\n  var axisModelMap = {\n    xAxisModel: null,\n    yAxisModel: null\n  };\n  zrUtil.each(axisModelMap, function (v, key) {\n    var axisType = key.replace(/Model$/, '');\n    var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n    if (process.env.NODE_ENV !== 'production') {\n      if (!axisModel) {\n        throw new Error(axisType + ' \"' + zrUtil.retrieve3(seriesModel.get(axisType + 'Index'), seriesModel.get(axisType + 'Id'), 0) + '\" not found');\n      }\n    }\n    axisModelMap[key] = axisModel;\n  });\n  return axisModelMap;\n}\nexport function createCartesianAxisViewCommonPartBuilder(gridRect, cartesians, axisModel, api, ctx, defaultNameMoveOverlap) {\n  var layoutResult = layout(gridRect, axisModel);\n  var axisLineAutoShow = false;\n  var axisTickAutoShow = false;\n  // Not show axisTick or axisLine if other axis is category / time\n  for (var i = 0; i < cartesians.length; i++) {\n    if (isIntervalOrLogScale(cartesians[i].getOtherAxis(axisModel.axis).scale)) {\n      // Still show axis tick or axisLine if other axis is value / log\n      axisLineAutoShow = axisTickAutoShow = true;\n      if (axisModel.axis.type === 'category' && axisModel.axis.onBand) {\n        axisTickAutoShow = false;\n      }\n    }\n  }\n  layoutResult.axisLineAutoShow = axisLineAutoShow;\n  layoutResult.axisTickAutoShow = axisTickAutoShow;\n  layoutResult.defaultNameMoveOverlap = defaultNameMoveOverlap;\n  return new AxisBuilder(axisModel, api, layoutResult, ctx);\n}\nexport function updateCartesianAxisViewCommonPartBuilder(axisBuilder, gridRect, axisModel) {\n  var newRaw = layout(gridRect, axisModel);\n  if (process.env.NODE_ENV !== 'production') {\n    var oldRaw_1 = axisBuilder.__getRawCfg();\n    zrUtil.each(zrUtil.keys(newRaw), function (prop) {\n      if (prop !== 'position' && prop !== 'labelOffset') {\n        zrUtil.assert(newRaw[prop] === oldRaw_1[prop]);\n      }\n    });\n  }\n  axisBuilder.updateCfg(newRaw);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { getPrecisionSafe, round } from '../util/number.js';\nimport IntervalScale from '../scale/Interval.js';\nimport { getScaleExtent, retrieveAxisBreaksOption } from './axisHelper.js';\nimport { warn } from '../util/log.js';\nimport { logTransform, increaseInterval, isValueNice } from '../scale/helper.js';\nexport function alignScaleTicks(scale, axisModel, alignToScale) {\n  var _a;\n  var intervalScaleProto = IntervalScale.prototype;\n  // NOTE: There is a precondition for log scale  here:\n  // In log scale we store _interval and _extent of exponent value.\n  // So if we use the method of InternalScale to set/get these data.\n  // It process the exponent value, which is linear and what we want here.\n  var alignToTicks = intervalScaleProto.getTicks.call(alignToScale);\n  var alignToNicedTicks = intervalScaleProto.getTicks.call(alignToScale, {\n    expandToNicedExtent: true\n  });\n  var alignToSplitNumber = alignToTicks.length - 1;\n  var alignToInterval = intervalScaleProto.getInterval.call(alignToScale);\n  var scaleExtent = getScaleExtent(scale, axisModel);\n  var rawExtent = scaleExtent.extent;\n  var isMinFixed = scaleExtent.fixMin;\n  var isMaxFixed = scaleExtent.fixMax;\n  if (scale.type === 'log') {\n    rawExtent = logTransform(scale.base, rawExtent, true);\n  }\n  scale.setBreaksFromOption(retrieveAxisBreaksOption(axisModel));\n  scale.setExtent(rawExtent[0], rawExtent[1]);\n  scale.calcNiceExtent({\n    splitNumber: alignToSplitNumber,\n    fixMin: isMinFixed,\n    fixMax: isMaxFixed\n  });\n  var extent = intervalScaleProto.getExtent.call(scale);\n  // Need to update the rawExtent.\n  // Because value in rawExtent may be not parsed. e.g. 'dataMin', 'dataMax'\n  if (isMinFixed) {\n    rawExtent[0] = extent[0];\n  }\n  if (isMaxFixed) {\n    rawExtent[1] = extent[1];\n  }\n  var interval = intervalScaleProto.getInterval.call(scale);\n  var min = rawExtent[0];\n  var max = rawExtent[1];\n  if (isMinFixed && isMaxFixed) {\n    // User set min, max, divide to get new interval\n    interval = (max - min) / alignToSplitNumber;\n  } else if (isMinFixed) {\n    max = rawExtent[0] + interval * alignToSplitNumber;\n    // User set min, expand extent on the other side\n    while (max < rawExtent[1] && isFinite(max) && isFinite(rawExtent[1])) {\n      interval = increaseInterval(interval);\n      max = rawExtent[0] + interval * alignToSplitNumber;\n    }\n  } else if (isMaxFixed) {\n    // User set max, expand extent on the other side\n    min = rawExtent[1] - interval * alignToSplitNumber;\n    while (min > rawExtent[0] && isFinite(min) && isFinite(rawExtent[0])) {\n      interval = increaseInterval(interval);\n      min = rawExtent[1] - interval * alignToSplitNumber;\n    }\n  } else {\n    var nicedSplitNumber = scale.getTicks().length - 1;\n    if (nicedSplitNumber > alignToSplitNumber) {\n      interval = increaseInterval(interval);\n    }\n    var range = interval * alignToSplitNumber;\n    max = Math.ceil(rawExtent[1] / interval) * interval;\n    min = round(max - range);\n    // Not change the result that crossing zero.\n    if (min < 0 && rawExtent[0] >= 0) {\n      min = 0;\n      max = round(range);\n    } else if (max > 0 && rawExtent[1] <= 0) {\n      max = 0;\n      min = -round(range);\n    }\n  }\n  // Adjust min, max based on the extent of alignTo. When min or max is set in alignTo scale\n  var t0 = (alignToTicks[0].value - alignToNicedTicks[0].value) / alignToInterval;\n  var t1 = (alignToTicks[alignToSplitNumber].value - alignToNicedTicks[alignToSplitNumber].value) / alignToInterval;\n  // NOTE: Must in setExtent -> setInterval -> setNiceExtent order.\n  intervalScaleProto.setExtent.call(scale, min + interval * t0, max + interval * t1);\n  intervalScaleProto.setInterval.call(scale, interval);\n  if (t0 || t1) {\n    intervalScaleProto.setNiceExtent.call(scale, min + interval, max - interval);\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    var ticks = intervalScaleProto.getTicks.call(scale);\n    if (ticks[1] && (!isValueNice(interval) || getPrecisionSafe(ticks[1].value) > getPrecisionSafe(interval))) {\n      warn(\"The ticks may be not readable when set min: \" + axisModel.get('min') + \", max: \" + axisModel.get('max') + (\" and alignTicks: true. (\" + ((_a = axisModel.axis) === null || _a === void 0 ? void 0 : _a.dim) + \"AxisIndex: \" + axisModel.componentIndex + \")\"), true);\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/**\n * Grid is a region which contains at most 4 cartesian systems\n *\n * TODO Default cartesian\n */\nimport { isObject, each, indexOf, retrieve3, keys, assert, eqNaN, find, retrieve2 } from 'zrender/lib/core/util.js';\nimport { createBoxLayoutReference, getLayoutRect } from '../../util/layout.js';\nimport { createScaleByModel, ifAxisCrossZero, niceScaleExtent, getDataDimensionsOnAxis, isNameLocationCenter, shouldAxisShow } from '../../coord/axisHelper.js';\nimport Cartesian2D, { cartesian2DDimensions } from './Cartesian2D.js';\nimport Axis2D from './Axis2D.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\n// Depends on GridModel, AxisModel, which performs preprocess.\nimport { OUTER_BOUNDS_CLAMP_DEFAULT, OUTER_BOUNDS_DEFAULT } from './GridModel.js';\nimport { findAxisModels, createCartesianAxisViewCommonPartBuilder, updateCartesianAxisViewCommonPartBuilder, isCartesian2DInjectedAsDataCoordSys } from './cartesianAxisHelper.js';\nimport { isIntervalOrLogScale } from '../../scale/helper.js';\nimport { alignScaleTicks } from '../axisAlignTicks.js';\nimport { expandOrShrinkRect, WH, XY } from '../../util/graphic.js';\nimport { AxisBuilderSharedContext, resolveAxisNameOverlapDefault, moveIfOverlapByLinearLabels, getLabelInner } from '../../component/axis/AxisBuilder.js';\nimport { error, log } from '../../util/log.js';\nimport { AxisTickLabelComputingKind } from '../axisTickLabelBuilder.js';\nimport { injectCoordSysByOption } from '../../core/CoordinateSystem.js';\nimport { mathMax, parsePositionSizeOption } from '../../util/number.js';\n// margin is [top, right, bottom, left]\nvar XY_TO_MARGIN_IDX = [[3, 1], [0, 2] // xyIdx 1 => 'y'\n];\nvar Grid = /** @class */function () {\n  function Grid(gridModel, ecModel, api) {\n    // FIXME:TS where used (different from registered type 'cartesian2d')?\n    this.type = 'grid';\n    this._coordsMap = {};\n    this._coordsList = [];\n    this._axesMap = {};\n    this._axesList = [];\n    this.axisPointerEnabled = true;\n    this.dimensions = cartesian2DDimensions;\n    this._initCartesian(gridModel, ecModel, api);\n    this.model = gridModel;\n  }\n  Grid.prototype.getRect = function () {\n    return this._rect;\n  };\n  Grid.prototype.update = function (ecModel, api) {\n    var axesMap = this._axesMap;\n    this._updateScale(ecModel, this.model);\n    function updateAxisTicks(axes) {\n      var alignTo;\n      // Axis is added in order of axisIndex.\n      var axesIndices = keys(axes);\n      var len = axesIndices.length;\n      if (!len) {\n        return;\n      }\n      var axisNeedsAlign = [];\n      // Process once and calculate the ticks for those don't use alignTicks.\n      for (var i = len - 1; i >= 0; i--) {\n        var idx = +axesIndices[i]; // Convert to number.\n        var axis = axes[idx];\n        var model = axis.model;\n        var scale = axis.scale;\n        if (\n        // Only value and log axis without interval support alignTicks.\n        isIntervalOrLogScale(scale) && model.get('alignTicks') && model.get('interval') == null) {\n          axisNeedsAlign.push(axis);\n        } else {\n          niceScaleExtent(scale, model);\n          if (isIntervalOrLogScale(scale)) {\n            // Can only align to interval or log axis.\n            alignTo = axis;\n          }\n        }\n      }\n      ;\n      // All axes has set alignTicks. Pick the first one.\n      // PENDING. Should we find the axis that both set interval, min, max and align to this one?\n      if (axisNeedsAlign.length) {\n        if (!alignTo) {\n          alignTo = axisNeedsAlign.pop();\n          niceScaleExtent(alignTo.scale, alignTo.model);\n        }\n        each(axisNeedsAlign, function (axis) {\n          alignScaleTicks(axis.scale, axis.model, alignTo.scale);\n        });\n      }\n    }\n    updateAxisTicks(axesMap.x);\n    updateAxisTicks(axesMap.y);\n    // Key: axisDim_axisIndex, value: boolean, whether onZero target.\n    var onZeroRecords = {};\n    each(axesMap.x, function (xAxis) {\n      fixAxisOnZero(axesMap, 'y', xAxis, onZeroRecords);\n    });\n    each(axesMap.y, function (yAxis) {\n      fixAxisOnZero(axesMap, 'x', yAxis, onZeroRecords);\n    });\n    // Resize again if containLabel is enabled\n    // FIXME It may cause getting wrong grid size in data processing stage\n    this.resize(this.model, api);\n  };\n  /**\n   * Resize the grid.\n   *\n   * [NOTE]\n   * If both \"grid.containLabel/grid.contain\" and pixel-required-data-processing (such as, \"dataSampling\")\n   * exist, circular dependency occurs in logic.\n   * The final compromised sequence is:\n   *  1. Calculate \"axis.extent\" (pixel extent) and AffineTransform based on only \"grid layout options\".\n   *      Not accurate if \"grid.containLabel/grid.contain\" is required, but it is a compromise to avoid\n   *      circular dependency.\n   *  2. Perform \"series data processing\" (where \"dataSampling\" requires \"axis.extent\").\n   *  3. Calculate \"scale.extent\" (data extent) based on \"processed series data\".\n   *  4. Modify \"axis.extent\" for \"grid.containLabel/grid.contain\":\n   *      4.1. Calculate \"axis labels\" based on \"scale.extent\".\n   *      4.2. Modify \"axis.extent\" by the bounding rects of \"axis labels and names\".\n   */\n  Grid.prototype.resize = function (gridModel, api, beforeDataProcessing) {\n    var layoutRef = createBoxLayoutReference(gridModel, api);\n    var gridRect = this._rect = getLayoutRect(gridModel.getBoxLayoutParams(), layoutRef.refContainer);\n    // PENDING: whether to support that if the input `coord` is out of the base coord sys,\n    //  do not render anything. At present, the behavior is undefined.\n    var axesMap = this._axesMap;\n    var coordsList = this._coordsList;\n    var optionContainLabel = gridModel.get('containLabel'); // No `.get(, true)` for backward compat.\n    updateAllAxisExtentTransByGridRect(axesMap, gridRect);\n    if (!beforeDataProcessing) {\n      var axisBuilderSharedCtx = createAxisBiulders(gridRect, coordsList, axesMap, optionContainLabel, api);\n      var noPxChange = void 0;\n      if (optionContainLabel) {\n        if (legacyLayOutGridByContainLabel) {\n          // console.time('legacyLayOutGridByContainLabel');\n          legacyLayOutGridByContainLabel(this._axesList, gridRect);\n          updateAllAxisExtentTransByGridRect(axesMap, gridRect);\n          // console.timeEnd('legacyLayOutGridByContainLabel');\n        } else {\n          if (process.env.NODE_ENV !== 'production') {\n            log('Specified `grid.containLabel` but no `use(LegacyGridContainLabel)`;' + 'use `grid.outerBounds` instead.', true);\n          }\n          noPxChange = layOutGridByOuterBounds(gridRect.clone(), 'axisLabel', null, gridRect, axesMap, axisBuilderSharedCtx, layoutRef);\n        }\n      } else {\n        var _a = prepareOuterBounds(gridModel, gridRect, layoutRef),\n          outerBoundsRect = _a.outerBoundsRect,\n          parsedOuterBoundsContain = _a.parsedOuterBoundsContain,\n          outerBoundsClamp = _a.outerBoundsClamp;\n        if (outerBoundsRect) {\n          // console.time('layOutGridByOuterBounds');\n          noPxChange = layOutGridByOuterBounds(outerBoundsRect, parsedOuterBoundsContain, outerBoundsClamp, gridRect, axesMap, axisBuilderSharedCtx, layoutRef);\n          // console.timeEnd('layOutGridByOuterBounds');\n        }\n      }\n      // console.time('buildAxesView_determine');\n      createOrUpdateAxesView(gridRect, axesMap, AxisTickLabelComputingKind.determine, null, noPxChange, layoutRef);\n      // console.timeEnd('buildAxesView_determine');\n    } // End of beforeDataProcessing\n    each(this._coordsList, function (coord) {\n      // Calculate affine matrix to accelerate the data to point transform.\n      // If all the axes scales are time or value.\n      coord.calcAffineTransform();\n    });\n  };\n  Grid.prototype.getAxis = function (dim, axisIndex) {\n    var axesMapOnDim = this._axesMap[dim];\n    if (axesMapOnDim != null) {\n      return axesMapOnDim[axisIndex || 0];\n    }\n  };\n  Grid.prototype.getAxes = function () {\n    return this._axesList.slice();\n  };\n  Grid.prototype.getCartesian = function (xAxisIndex, yAxisIndex) {\n    if (xAxisIndex != null && yAxisIndex != null) {\n      var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n      return this._coordsMap[key];\n    }\n    if (isObject(xAxisIndex)) {\n      yAxisIndex = xAxisIndex.yAxisIndex;\n      xAxisIndex = xAxisIndex.xAxisIndex;\n    }\n    for (var i = 0, coordList = this._coordsList; i < coordList.length; i++) {\n      if (coordList[i].getAxis('x').index === xAxisIndex || coordList[i].getAxis('y').index === yAxisIndex) {\n        return coordList[i];\n      }\n    }\n  };\n  Grid.prototype.getCartesians = function () {\n    return this._coordsList.slice();\n  };\n  /**\n   * @implements\n   */\n  Grid.prototype.convertToPixel = function (ecModel, finder, value) {\n    var target = this._findConvertTarget(finder);\n    return target.cartesian ? target.cartesian.dataToPoint(value) : target.axis ? target.axis.toGlobalCoord(target.axis.dataToCoord(value)) : null;\n  };\n  /**\n   * @implements\n   */\n  Grid.prototype.convertFromPixel = function (ecModel, finder, value) {\n    var target = this._findConvertTarget(finder);\n    return target.cartesian ? target.cartesian.pointToData(value) : target.axis ? target.axis.coordToData(target.axis.toLocalCoord(value)) : null;\n  };\n  Grid.prototype._findConvertTarget = function (finder) {\n    var seriesModel = finder.seriesModel;\n    var xAxisModel = finder.xAxisModel || seriesModel && seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\n    var yAxisModel = finder.yAxisModel || seriesModel && seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\n    var gridModel = finder.gridModel;\n    var coordsList = this._coordsList;\n    var cartesian;\n    var axis;\n    if (seriesModel) {\n      cartesian = seriesModel.coordinateSystem;\n      indexOf(coordsList, cartesian) < 0 && (cartesian = null);\n    } else if (xAxisModel && yAxisModel) {\n      cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n    } else if (xAxisModel) {\n      axis = this.getAxis('x', xAxisModel.componentIndex);\n    } else if (yAxisModel) {\n      axis = this.getAxis('y', yAxisModel.componentIndex);\n    }\n    // Lowest priority.\n    else if (gridModel) {\n      var grid = gridModel.coordinateSystem;\n      if (grid === this) {\n        cartesian = this._coordsList[0];\n      }\n    }\n    return {\n      cartesian: cartesian,\n      axis: axis\n    };\n  };\n  /**\n   * @implements\n   */\n  Grid.prototype.containPoint = function (point) {\n    var coord = this._coordsList[0];\n    if (coord) {\n      return coord.containPoint(point);\n    }\n  };\n  /**\n   * Initialize cartesian coordinate systems\n   */\n  Grid.prototype._initCartesian = function (gridModel, ecModel, api) {\n    var _this = this;\n    var grid = this;\n    var axisPositionUsed = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    var axesMap = {\n      x: {},\n      y: {}\n    };\n    var axesCount = {\n      x: 0,\n      y: 0\n    };\n    // Create axis\n    ecModel.eachComponent('xAxis', createAxisCreator('x'), this);\n    ecModel.eachComponent('yAxis', createAxisCreator('y'), this);\n    if (!axesCount.x || !axesCount.y) {\n      // Roll back when there no either x or y axis\n      this._axesMap = {};\n      this._axesList = [];\n      return;\n    }\n    this._axesMap = axesMap;\n    // Create cartesian2d\n    each(axesMap.x, function (xAxis, xAxisIndex) {\n      each(axesMap.y, function (yAxis, yAxisIndex) {\n        var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n        var cartesian = new Cartesian2D(key);\n        cartesian.master = _this;\n        cartesian.model = gridModel;\n        _this._coordsMap[key] = cartesian;\n        _this._coordsList.push(cartesian);\n        cartesian.addAxis(xAxis);\n        cartesian.addAxis(yAxis);\n      });\n    });\n    function createAxisCreator(dimName) {\n      return function (axisModel, idx) {\n        if (!isAxisUsedInTheGrid(axisModel, gridModel)) {\n          return;\n        }\n        var axisPosition = axisModel.get('position');\n        if (dimName === 'x') {\n          // Fix position\n          if (axisPosition !== 'top' && axisPosition !== 'bottom') {\n            // Default bottom of X\n            axisPosition = axisPositionUsed.bottom ? 'top' : 'bottom';\n          }\n        } else {\n          // Fix position\n          if (axisPosition !== 'left' && axisPosition !== 'right') {\n            // Default left of Y\n            axisPosition = axisPositionUsed.left ? 'right' : 'left';\n          }\n        }\n        axisPositionUsed[axisPosition] = true;\n        var axis = new Axis2D(dimName, createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition);\n        var isCategory = axis.type === 'category';\n        axis.onBand = isCategory && axisModel.get('boundaryGap');\n        axis.inverse = axisModel.get('inverse');\n        // Inject axis into axisModel\n        axisModel.axis = axis;\n        // Inject axisModel into axis\n        axis.model = axisModel;\n        // Inject grid info axis\n        axis.grid = grid;\n        // Index of axis, can be used as key\n        axis.index = idx;\n        grid._axesList.push(axis);\n        axesMap[dimName][idx] = axis;\n        axesCount[dimName]++;\n      };\n    }\n  };\n  /**\n   * Update cartesian properties from series.\n   */\n  Grid.prototype._updateScale = function (ecModel, gridModel) {\n    // Reset scale\n    each(this._axesList, function (axis) {\n      axis.scale.setExtent(Infinity, -Infinity);\n      if (axis.type === 'category') {\n        var categorySortInfo = axis.model.get('categorySortInfo');\n        axis.scale.setSortInfo(categorySortInfo);\n      }\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      // If pie (or other similar series) use cartesian2d, the unionExtent logic below is\n      // wrong, therefore skip it temporarily. See also in `defaultAxisExtentFromData.ts`.\n      // TODO: support union extent in this case.\n      if (isCartesian2DInjectedAsDataCoordSys(seriesModel)) {\n        var axesModelMap = findAxisModels(seriesModel);\n        var xAxisModel = axesModelMap.xAxisModel;\n        var yAxisModel = axesModelMap.yAxisModel;\n        if (!isAxisUsedInTheGrid(xAxisModel, gridModel) || !isAxisUsedInTheGrid(yAxisModel, gridModel)) {\n          return;\n        }\n        var cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n        var data = seriesModel.getData();\n        var xAxis = cartesian.getAxis('x');\n        var yAxis = cartesian.getAxis('y');\n        unionExtent(data, xAxis);\n        unionExtent(data, yAxis);\n      }\n    }, this);\n    function unionExtent(data, axis) {\n      each(getDataDimensionsOnAxis(data, axis.dim), function (dim) {\n        axis.scale.unionExtentFromData(data, dim);\n      });\n    }\n  };\n  /**\n   * @param dim 'x' or 'y' or 'auto' or null/undefined\n   */\n  Grid.prototype.getTooltipAxes = function (dim) {\n    var baseAxes = [];\n    var otherAxes = [];\n    each(this.getCartesians(), function (cartesian) {\n      var baseAxis = dim != null && dim !== 'auto' ? cartesian.getAxis(dim) : cartesian.getBaseAxis();\n      var otherAxis = cartesian.getOtherAxis(baseAxis);\n      indexOf(baseAxes, baseAxis) < 0 && baseAxes.push(baseAxis);\n      indexOf(otherAxes, otherAxis) < 0 && otherAxes.push(otherAxis);\n    });\n    return {\n      baseAxes: baseAxes,\n      otherAxes: otherAxes\n    };\n  };\n  Grid.create = function (ecModel, api) {\n    var grids = [];\n    ecModel.eachComponent('grid', function (gridModel, idx) {\n      var grid = new Grid(gridModel, ecModel, api);\n      grid.name = 'grid_' + idx;\n      // dataSampling requires axis extent, so resize\n      // should be performed in create stage.\n      grid.resize(gridModel, api, true);\n      gridModel.coordinateSystem = grid;\n      grids.push(grid);\n    });\n    // Inject the coordinateSystems into seriesModel\n    ecModel.eachSeries(function (seriesModel) {\n      injectCoordSysByOption({\n        targetModel: seriesModel,\n        coordSysType: 'cartesian2d',\n        coordSysProvider: coordSysProvider\n      });\n      function coordSysProvider() {\n        var axesModelMap = findAxisModels(seriesModel);\n        var xAxisModel = axesModelMap.xAxisModel;\n        var yAxisModel = axesModelMap.yAxisModel;\n        var gridModel = xAxisModel.getCoordSysModel();\n        if (process.env.NODE_ENV !== 'production') {\n          if (!gridModel) {\n            throw new Error('Grid \"' + retrieve3(xAxisModel.get('gridIndex'), xAxisModel.get('gridId'), 0) + '\" not found');\n          }\n          if (xAxisModel.getCoordSysModel() !== yAxisModel.getCoordSysModel()) {\n            throw new Error('xAxis and yAxis must use the same grid');\n          }\n        }\n        var grid = gridModel.coordinateSystem;\n        return grid.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n      }\n    });\n    return grids;\n  };\n  // For deciding which dimensions to use when creating list data\n  Grid.dimensions = cartesian2DDimensions;\n  return Grid;\n}();\n/**\n * Check if the axis is used in the specified grid.\n */\nfunction isAxisUsedInTheGrid(axisModel, gridModel) {\n  return axisModel.getCoordSysModel() === gridModel;\n}\nfunction fixAxisOnZero(axesMap, otherAxisDim, axis,\n// Key: see `getOnZeroRecordKey`\nonZeroRecords) {\n  axis.getAxesOnZeroOf = function () {\n    // TODO: onZero of multiple axes.\n    return otherAxisOnZeroOf ? [otherAxisOnZeroOf] : [];\n  };\n  // onZero can not be enabled in these two situations:\n  // 1. When any other axis is a category axis.\n  // 2. When no axis is cross 0 point.\n  var otherAxes = axesMap[otherAxisDim];\n  var otherAxisOnZeroOf;\n  var axisModel = axis.model;\n  var onZero = axisModel.get(['axisLine', 'onZero']);\n  var onZeroAxisIndex = axisModel.get(['axisLine', 'onZeroAxisIndex']);\n  if (!onZero) {\n    return;\n  }\n  // If target axis is specified.\n  if (onZeroAxisIndex != null) {\n    if (canOnZeroToAxis(otherAxes[onZeroAxisIndex])) {\n      otherAxisOnZeroOf = otherAxes[onZeroAxisIndex];\n    }\n  } else {\n    // Find the first available other axis.\n    for (var idx in otherAxes) {\n      if (otherAxes.hasOwnProperty(idx) && canOnZeroToAxis(otherAxes[idx])\n      // Consider that two Y axes on one value axis,\n      // if both onZero, the two Y axes overlap.\n      && !onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]) {\n        otherAxisOnZeroOf = otherAxes[idx];\n        break;\n      }\n    }\n  }\n  if (otherAxisOnZeroOf) {\n    onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)] = true;\n  }\n  function getOnZeroRecordKey(axis) {\n    return axis.dim + '_' + axis.index;\n  }\n}\nfunction canOnZeroToAxis(axis) {\n  return axis && axis.type !== 'category' && axis.type !== 'time' && ifAxisCrossZero(axis);\n}\nfunction updateAxisTransform(axis, coordBase) {\n  var axisExtent = axis.getExtent();\n  var axisExtentSum = axisExtent[0] + axisExtent[1];\n  // Fast transform\n  axis.toGlobalCoord = axis.dim === 'x' ? function (coord) {\n    return coord + coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n  axis.toLocalCoord = axis.dim === 'x' ? function (coord) {\n    return coord - coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n}\nfunction updateAllAxisExtentTransByGridRect(axesMap, gridRect) {\n  each(axesMap.x, function (axis) {\n    return updateAxisExtentTransByGridRect(axis, gridRect.x, gridRect.width);\n  });\n  each(axesMap.y, function (axis) {\n    return updateAxisExtentTransByGridRect(axis, gridRect.y, gridRect.height);\n  });\n}\nfunction updateAxisExtentTransByGridRect(axis, gridXY, gridWH) {\n  var extent = [0, gridWH];\n  var idx = axis.inverse ? 1 : 0;\n  axis.setExtent(extent[idx], extent[1 - idx]);\n  updateAxisTransform(axis, gridXY);\n}\nvar legacyLayOutGridByContainLabel;\nexport function registerLegacyGridContainLabelImpl(impl) {\n  legacyLayOutGridByContainLabel = impl;\n}\n// Return noPxChange.\nfunction layOutGridByOuterBounds(outerBoundsRect, outerBoundsContain, outerBoundsClamp, gridRect, axesMap, axisBuilderSharedCtx, layoutRef) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(outerBoundsContain === 'all' || outerBoundsContain === 'axisLabel');\n  }\n  // Assume `updateAllAxisExtentTransByGridRect` has been performed once before this call.\n  // [NOTE]:\n  // - The bounding rect of the axis elements might be sensitve to variations in `axis.extent` due to strategies\n  //  like hideOverlap/moveOverlap. @see the comment in `LabelLayoutBase['suggestIgnore']`.\n  // - The final `gridRect` might be slightly smaller than the ideally expected result if labels are giant and\n  //  get hidden due to overlapping. More iterations could improve precision, but not performant. We consider\n  //  the current result acceptable, since no alignment among charts can be guaranteed when using this feature.\n  createOrUpdateAxesView(gridRect, axesMap, AxisTickLabelComputingKind.estimate, outerBoundsContain, false, layoutRef);\n  var margin = [0, 0, 0, 0];\n  fillLabelNameOverflowOnOneDimension(0);\n  fillLabelNameOverflowOnOneDimension(1);\n  // If axis is blank, no label can be used to detect overflow.\n  // gridRect itself should not overflow.\n  fillMarginOnOneDimension(gridRect, 0, NaN);\n  fillMarginOnOneDimension(gridRect, 1, NaN);\n  var noPxChange = find(margin, function (item) {\n    return item > 0;\n  }) == null;\n  expandOrShrinkRect(gridRect, margin, true, true, outerBoundsClamp);\n  updateAllAxisExtentTransByGridRect(axesMap, gridRect);\n  return noPxChange;\n  function fillLabelNameOverflowOnOneDimension(xyIdx) {\n    each(axesMap[XY[xyIdx]], function (axis) {\n      if (!shouldAxisShow(axis.model)) {\n        return;\n      }\n      // FIXME: zr Group.union may wrongly union (0, 0, 0, 0) and not performant.\n      // unionRect.union(axis.axisBuilder.group.getBoundingRect());\n      // If ussing Group.getBoundingRect to calculate shrink space, it is not strictly accurate when\n      // the outermost label is ignored and the secondary label is very long and contribute to the\n      // union extension:\n      //      -|---|---|---|\n      //         1,000,000,000\n      // Therefore we calculate them one by one.\n      // Also considered axis may be blank or no labels.\n      var sharedRecord = axisBuilderSharedCtx.ensureRecord(axis.model);\n      var labelInfoList = sharedRecord.labelInfoList;\n      if (labelInfoList) {\n        for (var idx = 0; idx < labelInfoList.length; idx++) {\n          var labelInfo = labelInfoList[idx];\n          var proportion = axis.scale.normalize(getLabelInner(labelInfo.label).tickValue);\n          proportion = xyIdx === 1 ? 1 - proportion : proportion;\n          // xAxis use proportion on x, yAxis use proprotion on y, otherwise not.\n          fillMarginOnOneDimension(labelInfo.rect, xyIdx, proportion);\n          fillMarginOnOneDimension(labelInfo.rect, 1 - xyIdx, NaN);\n        }\n      }\n      var nameLayout = sharedRecord.nameLayout;\n      if (nameLayout) {\n        var proportion = isNameLocationCenter(sharedRecord.nameLocation) ? 0.5 : NaN;\n        fillMarginOnOneDimension(nameLayout.rect, xyIdx, proportion);\n        fillMarginOnOneDimension(nameLayout.rect, 1 - xyIdx, NaN);\n      }\n    });\n  }\n  function fillMarginOnOneDimension(itemRect, xyIdx, proportion // NaN mean no use proportion\n  ) {\n    var overflow1 = outerBoundsRect[XY[xyIdx]] - itemRect[XY[xyIdx]];\n    var overflow2 = itemRect[WH[xyIdx]] + itemRect[XY[xyIdx]] - (outerBoundsRect[WH[xyIdx]] + outerBoundsRect[XY[xyIdx]]);\n    overflow1 = applyProportion(overflow1, 1 - proportion);\n    overflow2 = applyProportion(overflow2, proportion);\n    var minIdx = XY_TO_MARGIN_IDX[xyIdx][0];\n    var maxIdx = XY_TO_MARGIN_IDX[xyIdx][1];\n    margin[minIdx] = mathMax(margin[minIdx], overflow1);\n    margin[maxIdx] = mathMax(margin[maxIdx], overflow2);\n  }\n  function applyProportion(overflow, proportion) {\n    // proportion is not likely to near zero. If so, give up shrink\n    if (overflow > 0 && !eqNaN(proportion) && proportion > 1e-4) {\n      overflow /= proportion;\n    }\n    return overflow;\n  }\n}\nfunction createAxisBiulders(gridRect, cartesians, axesMap, optionContainLabel, api) {\n  var axisBuilderSharedCtx = new AxisBuilderSharedContext(resolveAxisNameOverlapForGrid);\n  each(axesMap, function (axisList) {\n    return each(axisList, function (axis) {\n      if (shouldAxisShow(axis.model)) {\n        // See `AxisBaseOptionCommon['nameMoveOverlap']`.\n        var defaultNameMoveOverlap = !optionContainLabel;\n        axis.axisBuilder = createCartesianAxisViewCommonPartBuilder(gridRect, cartesians, axis.model, api, axisBuilderSharedCtx, defaultNameMoveOverlap);\n      }\n    });\n  });\n  return axisBuilderSharedCtx;\n}\n/**\n * Promote the axis-elements-building from \"view render\" stage to \"coordinate system resize\" stage.\n * This is aimed to resovle overlap across multiple axes, since currently it's hard to reconcile\n * multiple axes in \"view render\" stage.\n *\n * [CAUTION] But this promotion assumes that the subsequent \"visual mapping\" stage does not affect\n * this axis-elements-building; otherwise we have to refactor it again.\n */\nfunction createOrUpdateAxesView(gridRect, axesMap, kind, outerBoundsContain, noPxChange, layoutRef) {\n  var isDetermine = kind === AxisTickLabelComputingKind.determine;\n  each(axesMap, function (axisList) {\n    return each(axisList, function (axis) {\n      if (shouldAxisShow(axis.model)) {\n        updateCartesianAxisViewCommonPartBuilder(axis.axisBuilder, gridRect, axis.model);\n        axis.axisBuilder.build(isDetermine ? {\n          axisTickLabelDetermine: true\n        } : {\n          axisTickLabelEstimate: true\n        }, {\n          noPxChange: noPxChange\n        });\n      }\n    });\n  });\n  var nameMarginLevelMap = {\n    x: 0,\n    y: 0\n  };\n  calcNameMarginLevel(0);\n  calcNameMarginLevel(1);\n  function calcNameMarginLevel(xyIdx) {\n    nameMarginLevelMap[XY[1 - xyIdx]] = gridRect[WH[xyIdx]] <= layoutRef.refContainer[WH[xyIdx]] * 0.5 ? 0 : 1 - xyIdx === 1 ? 2 : 1;\n  }\n  each(axesMap, function (axisList, xy) {\n    return each(axisList, function (axis) {\n      if (shouldAxisShow(axis.model)) {\n        if (outerBoundsContain === 'all' || isDetermine) {\n          // To resolve overlap, `axisName` layout depends on `axisTickLabel` layout result\n          // (all of the axes of the same `grid`; consider multiple x or y axes).\n          axis.axisBuilder.build({\n            axisName: true\n          }, {\n            nameMarginLevel: nameMarginLevelMap[xy]\n          });\n        }\n        if (isDetermine) {\n          axis.axisBuilder.build({\n            axisLine: true\n          });\n        }\n      }\n    });\n  });\n}\nfunction prepareOuterBounds(gridModel, rawRridRect, layoutRef) {\n  var outerBoundsRect;\n  var optionOuterBoundsMode = gridModel.get('outerBoundsMode', true);\n  if (optionOuterBoundsMode === 'same') {\n    outerBoundsRect = rawRridRect.clone();\n  } else if (optionOuterBoundsMode == null || optionOuterBoundsMode === 'auto') {\n    outerBoundsRect = getLayoutRect(gridModel.get('outerBounds', true) || OUTER_BOUNDS_DEFAULT, layoutRef.refContainer);\n  } else if (optionOuterBoundsMode !== 'none') {\n    if (process.env.NODE_ENV !== 'production') {\n      error(\"Invalid grid[\" + gridModel.componentIndex + \"].outerBoundsMode.\");\n    }\n  }\n  var optionOuterBoundsContain = gridModel.get('outerBoundsContain', true);\n  var parsedOuterBoundsContain;\n  if (optionOuterBoundsContain == null || optionOuterBoundsContain === 'auto') {\n    parsedOuterBoundsContain = 'all';\n  } else if (indexOf(['all', 'axisLabel'], optionOuterBoundsContain) < 0) {\n    if (process.env.NODE_ENV !== 'production') {\n      error(\"Invalid grid[\" + gridModel.componentIndex + \"].outerBoundsContain.\");\n    }\n    parsedOuterBoundsContain = 'all';\n  } else {\n    parsedOuterBoundsContain = optionOuterBoundsContain;\n  }\n  var outerBoundsClamp = [parsePositionSizeOption(retrieve2(gridModel.get('outerBoundsClampWidth', true), OUTER_BOUNDS_CLAMP_DEFAULT[0]), rawRridRect.width), parsePositionSizeOption(retrieve2(gridModel.get('outerBoundsClampHeight', true), OUTER_BOUNDS_CLAMP_DEFAULT[1]), rawRridRect.height)];\n  return {\n    outerBoundsRect: outerBoundsRect,\n    parsedOuterBoundsContain: parsedOuterBoundsContain,\n    outerBoundsClamp: outerBoundsClamp\n  };\n}\nvar resolveAxisNameOverlapForGrid = function (cfg, ctx, axisModel, nameLayoutInfo, nameMoveDirVec, thisRecord) {\n  var perpendicularDim = axisModel.axis.dim === 'x' ? 'y' : 'x';\n  resolveAxisNameOverlapDefault(cfg, ctx, axisModel, nameLayoutInfo, nameMoveDirVec, thisRecord);\n  // If nameLocation 'center', and there are multiple axes parallel to this axis, do not adjust by\n  //  other axes, because the axis name should be close to its axis line as much as possible even\n  //  if overlapping; otherwise it might cause misleading.\n  // If nameLocation 'center', do not adjust by perpendicular axes, since they are not likely to overlap.\n  // If nameLocation 'start'/'end', move name within the same direction to escape overlap with the\n  //  perpendicular axes.\n  if (!isNameLocationCenter(cfg.nameLocation)) {\n    each(ctx.recordMap[perpendicularDim], function (perpenRecord) {\n      // perpendicular axis may be no name.\n      if (perpenRecord && perpenRecord.labelInfoList && perpenRecord.dirVec) {\n        moveIfOverlapByLinearLabels(perpenRecord.labelInfoList, perpenRecord.dirVec, nameLayoutInfo, nameMoveDirVec);\n      }\n    });\n  }\n};\nexport default Grid;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport Model from '../../model/Model.js';\nimport { each, curry, clone, defaults, isArray, indexOf } from 'zrender/lib/core/util.js';\n// Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n// allAxesInfo should be updated when setOption performed.\nexport function collect(ecModel, api) {\n  var result = {\n    /**\n     * key: makeKey(axis.model)\n     * value: {\n     *      axis,\n     *      coordSys,\n     *      axisPointerModel,\n     *      triggerTooltip,\n     *      triggerEmphasis,\n     *      involveSeries,\n     *      snap,\n     *      seriesModels,\n     *      seriesDataCount\n     * }\n     */\n    axesInfo: {},\n    seriesInvolved: false,\n    /**\n     * key: makeKey(coordSys.model)\n     * value: Object: key makeKey(axis.model), value: axisInfo\n     */\n    coordSysAxesInfo: {},\n    coordSysMap: {}\n  };\n  collectAxesInfo(result, ecModel, api);\n  // Check seriesInvolved for performance, in case too many series in some chart.\n  result.seriesInvolved && collectSeriesInfo(result, ecModel);\n  return result;\n}\nfunction collectAxesInfo(result, ecModel, api) {\n  var globalTooltipModel = ecModel.getComponent('tooltip');\n  var globalAxisPointerModel = ecModel.getComponent('axisPointer');\n  // links can only be set on global.\n  var linksOption = globalAxisPointerModel.get('link', true) || [];\n  var linkGroups = [];\n  // Collect axes info.\n  each(api.getCoordinateSystems(), function (coordSys) {\n    // Some coordinate system do not support axes, like geo.\n    if (!coordSys.axisPointerEnabled) {\n      return;\n    }\n    var coordSysKey = makeKey(coordSys.model);\n    var axesInfoInCoordSys = result.coordSysAxesInfo[coordSysKey] = {};\n    result.coordSysMap[coordSysKey] = coordSys;\n    // Set tooltip (like 'cross') is a convenient way to show axisPointer\n    // for user. So we enable setting tooltip on coordSys model.\n    var coordSysModel = coordSys.model;\n    var baseTooltipModel = coordSysModel.getModel('tooltip', globalTooltipModel);\n    each(coordSys.getAxes(), curry(saveTooltipAxisInfo, false, null));\n    // If axis tooltip used, choose tooltip axis for each coordSys.\n    // Notice this case: coordSys is `grid` but not `cartesian2D` here.\n    if (coordSys.getTooltipAxes && globalTooltipModel\n    // If tooltip.showContent is set as false, tooltip will not\n    // show but axisPointer will show as normal.\n    && baseTooltipModel.get('show')) {\n      // Compatible with previous logic. But series.tooltip.trigger: 'axis'\n      // or series.data[n].tooltip.trigger: 'axis' are not support any more.\n      var triggerAxis = baseTooltipModel.get('trigger') === 'axis';\n      var cross = baseTooltipModel.get(['axisPointer', 'type']) === 'cross';\n      var tooltipAxes = coordSys.getTooltipAxes(baseTooltipModel.get(['axisPointer', 'axis']));\n      if (triggerAxis || cross) {\n        each(tooltipAxes.baseAxes, curry(saveTooltipAxisInfo, cross ? 'cross' : true, triggerAxis));\n      }\n      if (cross) {\n        each(tooltipAxes.otherAxes, curry(saveTooltipAxisInfo, 'cross', false));\n      }\n    }\n    // fromTooltip: true | false | 'cross'\n    // triggerTooltip: true | false | null\n    function saveTooltipAxisInfo(fromTooltip, triggerTooltip, axis) {\n      var axisPointerModel = axis.model.getModel('axisPointer', globalAxisPointerModel);\n      var axisPointerShow = axisPointerModel.get('show');\n      if (!axisPointerShow || axisPointerShow === 'auto' && !fromTooltip && !isHandleTrigger(axisPointerModel)) {\n        return;\n      }\n      if (triggerTooltip == null) {\n        triggerTooltip = axisPointerModel.get('triggerTooltip');\n      }\n      axisPointerModel = fromTooltip ? makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) : axisPointerModel;\n      var snap = axisPointerModel.get('snap');\n      var triggerEmphasis = axisPointerModel.get('triggerEmphasis');\n      var axisKey = makeKey(axis.model);\n      var involveSeries = triggerTooltip || snap || axis.type === 'category';\n      // If result.axesInfo[key] exist, override it (tooltip has higher priority).\n      var axisInfo = result.axesInfo[axisKey] = {\n        key: axisKey,\n        axis: axis,\n        coordSys: coordSys,\n        axisPointerModel: axisPointerModel,\n        triggerTooltip: triggerTooltip,\n        triggerEmphasis: triggerEmphasis,\n        involveSeries: involveSeries,\n        snap: snap,\n        useHandle: isHandleTrigger(axisPointerModel),\n        seriesModels: [],\n        linkGroup: null\n      };\n      axesInfoInCoordSys[axisKey] = axisInfo;\n      result.seriesInvolved = result.seriesInvolved || involveSeries;\n      var groupIndex = getLinkGroupIndex(linksOption, axis);\n      if (groupIndex != null) {\n        var linkGroup = linkGroups[groupIndex] || (linkGroups[groupIndex] = {\n          axesInfo: {}\n        });\n        linkGroup.axesInfo[axisKey] = axisInfo;\n        linkGroup.mapper = linksOption[groupIndex].mapper;\n        axisInfo.linkGroup = linkGroup;\n      }\n    }\n  });\n}\nfunction makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) {\n  var tooltipAxisPointerModel = baseTooltipModel.getModel('axisPointer');\n  var fields = ['type', 'snap', 'lineStyle', 'shadowStyle', 'label', 'animation', 'animationDurationUpdate', 'animationEasingUpdate', 'z'];\n  var volatileOption = {};\n  each(fields, function (field) {\n    volatileOption[field] = clone(tooltipAxisPointerModel.get(field));\n  });\n  // category axis do not auto snap, otherwise some tick that do not\n  // has value can not be hovered. value/time/log axis default snap if\n  // triggered from tooltip and trigger tooltip.\n  volatileOption.snap = axis.type !== 'category' && !!triggerTooltip;\n  // Compatible with previous behavior, tooltip axis does not show label by default.\n  // Only these properties can be overridden from tooltip to axisPointer.\n  if (tooltipAxisPointerModel.get('type') === 'cross') {\n    volatileOption.type = 'line';\n  }\n  var labelOption = volatileOption.label || (volatileOption.label = {});\n  // Follow the convention, do not show label when triggered by tooltip by default.\n  labelOption.show == null && (labelOption.show = false);\n  if (fromTooltip === 'cross') {\n    // When 'cross', both axes show labels.\n    var tooltipAxisPointerLabelShow = tooltipAxisPointerModel.get(['label', 'show']);\n    labelOption.show = tooltipAxisPointerLabelShow != null ? tooltipAxisPointerLabelShow : true;\n    // If triggerTooltip, this is a base axis, which should better not use cross style\n    // (cross style is dashed by default)\n    if (!triggerTooltip) {\n      var crossStyle = volatileOption.lineStyle = tooltipAxisPointerModel.get('crossStyle');\n      crossStyle && defaults(labelOption, crossStyle.textStyle);\n    }\n  }\n  return axis.model.getModel('axisPointer', new Model(volatileOption, globalAxisPointerModel, ecModel));\n}\nfunction collectSeriesInfo(result, ecModel) {\n  // Prepare data for axis trigger\n  ecModel.eachSeries(function (seriesModel) {\n    // Notice this case: this coordSys is `cartesian2D` but not `grid`.\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesTooltipTrigger = seriesModel.get(['tooltip', 'trigger'], true);\n    var seriesTooltipShow = seriesModel.get(['tooltip', 'show'], true);\n    if (!coordSys || !coordSys.model // PENDING: radar do not have a model.\n    || seriesTooltipTrigger === 'none' || seriesTooltipTrigger === false || seriesTooltipTrigger === 'item' || seriesTooltipShow === false || seriesModel.get(['axisPointer', 'show'], true) === false) {\n      return;\n    }\n    each(result.coordSysAxesInfo[makeKey(coordSys.model)], function (axisInfo) {\n      var axis = axisInfo.axis;\n      if (coordSys.getAxis(axis.dim) === axis) {\n        axisInfo.seriesModels.push(seriesModel);\n        axisInfo.seriesDataCount == null && (axisInfo.seriesDataCount = 0);\n        axisInfo.seriesDataCount += seriesModel.getData().count();\n      }\n    });\n  });\n}\n/**\n * For example:\n * {\n *     axisPointer: {\n *         links: [{\n *             xAxisIndex: [2, 4],\n *             yAxisIndex: 'all'\n *         }, {\n *             xAxisId: ['a5', 'a7'],\n *             xAxisName: 'xxx'\n *         }]\n *     }\n * }\n */\nfunction getLinkGroupIndex(linksOption, axis) {\n  var axisModel = axis.model;\n  var dim = axis.dim;\n  for (var i = 0; i < linksOption.length; i++) {\n    var linkOption = linksOption[i] || {};\n    if (checkPropInLink(linkOption[dim + 'AxisId'], axisModel.id) || checkPropInLink(linkOption[dim + 'AxisIndex'], axisModel.componentIndex) || checkPropInLink(linkOption[dim + 'AxisName'], axisModel.name)) {\n      return i;\n    }\n  }\n}\nfunction checkPropInLink(linkPropValue, axisPropValue) {\n  return linkPropValue === 'all' || isArray(linkPropValue) && indexOf(linkPropValue, axisPropValue) >= 0 || linkPropValue === axisPropValue;\n}\nexport function fixValue(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n  if (!axisInfo) {\n    return;\n  }\n  var axisPointerModel = axisInfo.axisPointerModel;\n  var scale = axisInfo.axis.scale;\n  var option = axisPointerModel.option;\n  var status = axisPointerModel.get('status');\n  var value = axisPointerModel.get('value');\n  // Parse init value for category and time axis.\n  if (value != null) {\n    value = scale.parse(value);\n  }\n  var useHandle = isHandleTrigger(axisPointerModel);\n  // If `handle` used, `axisPointer` will always be displayed, so value\n  // and status should be initialized.\n  if (status == null) {\n    option.status = useHandle ? 'show' : 'hide';\n  }\n  var extent = scale.getExtent().slice();\n  extent[0] > extent[1] && extent.reverse();\n  if (\n  // Pick a value on axis when initializing.\n  value == null\n  // If both `handle` and `dataZoom` are used, value may be out of axis extent,\n  // where we should re-pick a value to keep `handle` displaying normally.\n  || value > extent[1]) {\n    // Make handle displayed on the end of the axis when init, which looks better.\n    value = extent[1];\n  }\n  if (value < extent[0]) {\n    value = extent[0];\n  }\n  option.value = value;\n  if (useHandle) {\n    option.status = axisInfo.axis.scale.isBlank() ? 'hide' : 'show';\n  }\n}\nexport function getAxisInfo(axisModel) {\n  var coordSysAxesInfo = (axisModel.ecModel.getComponent('axisPointer') || {}).coordSysAxesInfo;\n  return coordSysAxesInfo && coordSysAxesInfo.axesInfo[makeKey(axisModel)];\n}\nexport function getAxisPointerModel(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n  return axisInfo && axisInfo.axisPointerModel;\n}\nfunction isHandleTrigger(axisPointerModel) {\n  return !!axisPointerModel.get(['handle', 'show']);\n}\n/**\n * @param {module:echarts/model/Model} model\n * @return {string} unique key\n */\nexport function makeKey(model) {\n  return model.type + '||' + model.id;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as axisPointerModelHelper from '../axisPointer/modelHelper.js';\nimport ComponentView from '../../view/Component.js';\nvar axisPointerClazz = {};\n/**\n * Base class of AxisView.\n */\nvar AxisView = /** @class */function (_super) {\n  __extends(AxisView, _super);\n  function AxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = AxisView.type;\n    return _this;\n  }\n  /**\n   * @override\n   */\n  AxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    // FIXME\n    // This process should proformed after coordinate systems updated\n    // (axis scale updated), and should be performed each time update.\n    // So put it here temporarily, although it is not appropriate to\n    // put a model-writing procedure in `view`.\n    this.axisPointerClass && axisPointerModelHelper.fixValue(axisModel);\n    _super.prototype.render.apply(this, arguments);\n    this._doUpdateAxisPointerClass(axisModel, api, true);\n  };\n  /**\n   * Action handler.\n   */\n  AxisView.prototype.updateAxisPointer = function (axisModel, ecModel, api, payload) {\n    this._doUpdateAxisPointerClass(axisModel, api, false);\n  };\n  /**\n   * @override\n   */\n  AxisView.prototype.remove = function (ecModel, api) {\n    var axisPointer = this._axisPointer;\n    axisPointer && axisPointer.remove(api);\n  };\n  /**\n   * @override\n   */\n  AxisView.prototype.dispose = function (ecModel, api) {\n    this._disposeAxisPointer(api);\n    _super.prototype.dispose.apply(this, arguments);\n  };\n  AxisView.prototype._doUpdateAxisPointerClass = function (axisModel, api, forceRender) {\n    var Clazz = AxisView.getAxisPointerClass(this.axisPointerClass);\n    if (!Clazz) {\n      return;\n    }\n    var axisPointerModel = axisPointerModelHelper.getAxisPointerModel(axisModel);\n    axisPointerModel ? (this._axisPointer || (this._axisPointer = new Clazz())).render(axisModel, axisPointerModel, api, forceRender) : this._disposeAxisPointer(api);\n  };\n  AxisView.prototype._disposeAxisPointer = function (api) {\n    this._axisPointer && this._axisPointer.dispose(api);\n    this._axisPointer = null;\n  };\n  AxisView.registerAxisPointerClass = function (type, clazz) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (axisPointerClazz[type]) {\n        throw new Error('axisPointer ' + type + ' exists');\n      }\n    }\n    axisPointerClazz[type] = clazz;\n  };\n  ;\n  AxisView.getAxisPointerClass = function (type) {\n    return type && axisPointerClazz[type];\n  };\n  ;\n  AxisView.type = 'axis';\n  return AxisView;\n}(ComponentView);\nexport default AxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nexport function rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel) {\n  var axis = axisModel.axis;\n  if (axis.scale.isBlank()) {\n    return;\n  }\n  // TODO: TYPE\n  var splitAreaModel = axisModel.getModel('splitArea');\n  var areaStyleModel = splitAreaModel.getModel('areaStyle');\n  var areaColors = areaStyleModel.get('color');\n  var gridRect = gridModel.coordinateSystem.getRect();\n  var ticksCoords = axis.getTicksCoords({\n    tickModel: splitAreaModel,\n    clamp: true,\n    breakTicks: 'none',\n    pruneByBreak: 'preserve_extent_bound'\n  });\n  if (!ticksCoords.length) {\n    return;\n  }\n  // For Making appropriate splitArea animation, the color and anid\n  // should be corresponding to previous one if possible.\n  var areaColorsLen = areaColors.length;\n  var lastSplitAreaColors = inner(axisView).splitAreaColors;\n  var newSplitAreaColors = zrUtil.createHashMap();\n  var colorIndex = 0;\n  if (lastSplitAreaColors) {\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var cIndex = lastSplitAreaColors.get(ticksCoords[i].tickValue);\n      if (cIndex != null) {\n        colorIndex = (cIndex + (areaColorsLen - 1) * i) % areaColorsLen;\n        break;\n      }\n    }\n  }\n  var prev = axis.toGlobalCoord(ticksCoords[0].coord);\n  var areaStyle = areaStyleModel.getAreaStyle();\n  areaColors = zrUtil.isArray(areaColors) ? areaColors : [areaColors];\n  for (var i = 1; i < ticksCoords.length; i++) {\n    var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n    var x = void 0;\n    var y = void 0;\n    var width = void 0;\n    var height = void 0;\n    if (axis.isHorizontal()) {\n      x = prev;\n      y = gridRect.y;\n      width = tickCoord - x;\n      height = gridRect.height;\n      prev = x + width;\n    } else {\n      x = gridRect.x;\n      y = prev;\n      width = gridRect.width;\n      height = tickCoord - y;\n      prev = y + height;\n    }\n    var tickValue = ticksCoords[i - 1].tickValue;\n    tickValue != null && newSplitAreaColors.set(tickValue, colorIndex);\n    axisGroup.add(new graphic.Rect({\n      anid: tickValue != null ? 'area_' + tickValue : null,\n      shape: {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      },\n      style: zrUtil.defaults({\n        fill: areaColors[colorIndex]\n      }, areaStyle),\n      autoBatch: true,\n      silent: true\n    }));\n    colorIndex = (colorIndex + 1) % areaColorsLen;\n  }\n  inner(axisView).splitAreaColors = newSplitAreaColors;\n}\nexport function rectCoordAxisHandleRemove(axisView) {\n  inner(axisView).splitAreaColors = null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport AxisView from './AxisView.js';\nimport { rectCoordAxisBuildSplitArea, rectCoordAxisHandleRemove } from './axisSplitHelper.js';\nimport { getAxisBreakHelper } from './axisBreakHelper.js';\nimport { shouldAxisShow } from '../../coord/axisHelper.js';\nvar selfBuilderAttrs = ['splitArea', 'splitLine', 'minorSplitLine', 'breakArea'];\nvar CartesianAxisView = /** @class */function (_super) {\n  __extends(CartesianAxisView, _super);\n  function CartesianAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CartesianAxisView.type;\n    _this.axisPointerClass = 'CartesianAxisPointer';\n    return _this;\n  }\n  /**\n   * @override\n   */\n  CartesianAxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n    if (!shouldAxisShow(axisModel)) {\n      return;\n    }\n    this._axisGroup.add(axisModel.axis.axisBuilder.group);\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get([name, 'show'])) {\n        axisElementBuilders[name](this, this._axisGroup, axisModel, axisModel.getCoordSysModel(), api);\n      }\n    }, this);\n    // THIS is a special case for bar racing chart.\n    // Update the axis label from the natural initial layout to\n    // sorted layout should has no animation.\n    var isInitialSortFromBarRacing = payload && payload.type === 'changeAxisOrder' && payload.isInitSort;\n    if (!isInitialSortFromBarRacing) {\n      graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n    }\n    _super.prototype.render.call(this, axisModel, ecModel, api, payload);\n  };\n  CartesianAxisView.prototype.remove = function () {\n    rectCoordAxisHandleRemove(this);\n  };\n  CartesianAxisView.type = 'cartesianAxis';\n  return CartesianAxisView;\n}(AxisView);\nvar axisElementBuilders = {\n  splitLine: function (axisView, axisGroup, axisModel, gridModel, api) {\n    var axis = axisModel.axis;\n    if (axis.scale.isBlank()) {\n      return;\n    }\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    var showMinLine = splitLineModel.get('showMinLine') !== false;\n    var showMaxLine = splitLineModel.get('showMaxLine') !== false;\n    lineColors = zrUtil.isArray(lineColors) ? lineColors : [lineColors];\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitLineModel,\n      breakTicks: 'none',\n      pruneByBreak: 'preserve_extent_bound'\n    });\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n      if (i === 0 && !showMinLine || i === ticksCoords.length - 1 && !showMaxLine) {\n        continue;\n      }\n      var tickValue = ticksCoords[i].tickValue;\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n      var colorIndex = lineCount++ % lineColors.length;\n      var line = new graphic.Line({\n        anid: tickValue != null ? 'line_' + tickValue : null,\n        autoBatch: true,\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        style: zrUtil.defaults({\n          stroke: lineColors[colorIndex]\n        }, lineStyle),\n        silent: true\n      });\n      graphic.subPixelOptimizeLine(line.shape, lineStyle.lineWidth);\n      axisGroup.add(line);\n    }\n  },\n  minorSplitLine: function (axisView, axisGroup, axisModel, gridModel, api) {\n    var axis = axisModel.axis;\n    var minorSplitLineModel = axisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var minorTicksCoords = axis.getMinorTicksCoords();\n    if (!minorTicksCoords.length) {\n      return;\n    }\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n    for (var i = 0; i < minorTicksCoords.length; i++) {\n      for (var k = 0; k < minorTicksCoords[i].length; k++) {\n        var tickCoord = axis.toGlobalCoord(minorTicksCoords[i][k].coord);\n        if (isHorizontal) {\n          p1[0] = tickCoord;\n          p1[1] = gridRect.y;\n          p2[0] = tickCoord;\n          p2[1] = gridRect.y + gridRect.height;\n        } else {\n          p1[0] = gridRect.x;\n          p1[1] = tickCoord;\n          p2[0] = gridRect.x + gridRect.width;\n          p2[1] = tickCoord;\n        }\n        var line = new graphic.Line({\n          anid: 'minor_line_' + minorTicksCoords[i][k].tickValue,\n          autoBatch: true,\n          shape: {\n            x1: p1[0],\n            y1: p1[1],\n            x2: p2[0],\n            y2: p2[1]\n          },\n          style: lineStyle,\n          silent: true\n        });\n        graphic.subPixelOptimizeLine(line.shape, lineStyle.lineWidth);\n        axisGroup.add(line);\n      }\n    }\n  },\n  splitArea: function (axisView, axisGroup, axisModel, gridModel, api) {\n    rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel);\n  },\n  breakArea: function (axisView, axisGroup, axisModel, gridModel, api) {\n    var axisBreakHelper = getAxisBreakHelper();\n    var scale = axisModel.axis.scale;\n    if (axisBreakHelper && scale.type !== 'ordinal') {\n      axisBreakHelper.rectCoordBuildBreakAxis(axisGroup, axisView, axisModel, gridModel.coordinateSystem.getRect(), api);\n    }\n  }\n};\nvar CartesianXAxisView = /** @class */function (_super) {\n  __extends(CartesianXAxisView, _super);\n  function CartesianXAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CartesianXAxisView.type;\n    return _this;\n  }\n  CartesianXAxisView.type = 'xAxis';\n  return CartesianXAxisView;\n}(CartesianAxisView);\nexport { CartesianXAxisView };\nvar CartesianYAxisView = /** @class */function (_super) {\n  __extends(CartesianYAxisView, _super);\n  function CartesianYAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CartesianXAxisView.type;\n    return _this;\n  }\n  CartesianYAxisView.type = 'yAxis';\n  return CartesianYAxisView;\n}(CartesianAxisView);\nexport { CartesianYAxisView };\nexport default CartesianAxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component.js';\nimport GridModel from '../../coord/cartesian/GridModel.js';\nimport { Rect } from '../../util/graphic.js';\nimport { defaults } from 'zrender/lib/core/util.js';\nimport { CartesianAxisModel } from '../../coord/cartesian/AxisModel.js';\nimport axisModelCreator from '../../coord/axisModelCreator.js';\nimport Grid from '../../coord/cartesian/Grid.js';\nimport { CartesianXAxisView, CartesianYAxisView } from '../axis/CartesianAxisView.js';\n// Grid view\nvar GridView = /** @class */function (_super) {\n  __extends(GridView, _super);\n  function GridView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'grid';\n    return _this;\n  }\n  GridView.prototype.render = function (gridModel, ecModel) {\n    this.group.removeAll();\n    if (gridModel.get('show')) {\n      this.group.add(new Rect({\n        shape: gridModel.coordinateSystem.getRect(),\n        style: defaults({\n          fill: gridModel.get('backgroundColor')\n        }, gridModel.getItemStyle()),\n        silent: true,\n        z2: -1\n      }));\n    }\n  };\n  GridView.type = 'grid';\n  return GridView;\n}(ComponentView);\nvar extraOption = {\n  // gridIndex: 0,\n  // gridId: '',\n  offset: 0\n};\nexport function install(registers) {\n  registers.registerComponentView(GridView);\n  registers.registerComponentModel(GridModel);\n  registers.registerCoordinateSystem('cartesian2d', Grid);\n  axisModelCreator(registers, 'x', CartesianAxisModel, extraOption);\n  axisModelCreator(registers, 'y', CartesianAxisModel, extraOption);\n  registers.registerComponentView(CartesianXAxisView);\n  registers.registerComponentView(CartesianYAxisView);\n  registers.registerPreprocessor(function (option) {\n    // Only create grid when need\n    if (option.xAxis && option.yAxis && !option.grid) {\n      option.grid = {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as echarts from '../../core/echarts.js';\nimport { noop } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nexport function take(zr, resourceKey, userKey) {\n  inner(zr)[resourceKey] = userKey;\n}\nexport function release(zr, resourceKey, userKey) {\n  var store = inner(zr);\n  var uKey = store[resourceKey];\n  if (uKey === userKey) {\n    store[resourceKey] = null;\n  }\n}\nexport function isTaken(zr, resourceKey) {\n  return !!inner(zr)[resourceKey];\n}\n/**\n * payload: {\n *     type: 'takeGlobalCursor',\n *     key: 'dataZoomSelect', or 'brush', or ...,\n *         If no userKey, release global cursor.\n * }\n */\n// TODO: SELF REGISTERED.\necharts.registerAction({\n  type: 'takeGlobalCursor',\n  event: 'globalCursorTaken',\n  update: 'update'\n}, noop);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { retrieveZInfo } from '../../util/graphic.js';\nvar IRRELEVANT_EXCLUDES = {\n  'axisPointer': 1,\n  'tooltip': 1,\n  'brush': 1\n};\n/**\n * Used on roam/brush triggering determination.\n * This is to avoid that: mouse clicking on an elements that is over geo or graph,\n * but roam is triggered unexpectedly.\n */\nexport function onIrrelevantElement(e, api, targetComponent) {\n  var eventElComponent = api.getComponentByElement(e.topTarget);\n  if (!eventElComponent || eventElComponent === targetComponent || IRRELEVANT_EXCLUDES.hasOwnProperty(eventElComponent.mainType)) {\n    return false;\n  }\n  // At present the `true` return is conservative. That is, the caller, such as a RoamController,\n  // is more likely to get a `false` return and start a roam behavior, becuase even if the\n  // `model.coordinateSystem` does not exist, the `e.topTarget` may be also a relevant element,\n  // such as axis split line/area or series elements, where roam should be available. Otherwise,\n  // if a dataZoom-served cartesian is full of series elements, the dataZoom-roaming can hardly\n  // be triggered.\n  var eventElCoordSys = eventElComponent.coordinateSystem;\n  // If eventElComponent is axisModel, it works only if it is injected with coordinateSystem.\n  if (!eventElCoordSys || eventElCoordSys.model === targetComponent) {\n    return false;\n  }\n  // e.g., if a cartesian is covered by a graph, the graph has a higher presedence in roam.\n  // A potential bad case is that RoamController does not prevent the cartesian from handling zr\n  // event, such as click and hovering, but it's fine so far.\n  // Aslo be conservative, if equals, return false.\n  var eventElCmptZInfo = retrieveZInfo(eventElComponent);\n  var targetCmptZInfo = retrieveZInfo(targetComponent);\n  if ((eventElCmptZInfo.zlevel - targetCmptZInfo.zlevel || eventElCmptZInfo.z - targetCmptZInfo.z) <= 0) {\n    return false;\n  }\n  return true;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Eventful from 'zrender/lib/core/Eventful.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport * as interactionMutex from './interactionMutex.js';\nimport { isString, bind, defaults, extend, retrieve2 } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nimport { retrieveZInfo } from '../../util/graphic.js';\nimport { onIrrelevantElement } from './cursorHelper.js';\n;\n/**\n * An manager of zoom and pan(darg) hehavior.\n * But it is not responsible for updating the view, since view updates vary and can\n * not be handled in a uniform way.\n *\n * Note: regarding view updates:\n *  - Transformabe views typically use `coord/View` (e.g., geo and series.graph roaming).\n *    Some commonly used view update logic has been organized into `roamHelper.ts`.\n *  - Non-transformable views handle updates themselves, possibly involving re-layout,\n *    (e.g., treemap).\n *  - Some scenarios do not require transformation (e.g., dataZoom roaming for cartesian,\n *    brush component).\n */\nvar RoamController = /** @class */function (_super) {\n  __extends(RoamController, _super);\n  function RoamController(zr) {\n    var _this = _super.call(this) || this;\n    _this._zr = zr;\n    // Avoid two roamController bind the same handler\n    var mousedownHandler = bind(_this._mousedownHandler, _this);\n    var mousemoveHandler = bind(_this._mousemoveHandler, _this);\n    var mouseupHandler = bind(_this._mouseupHandler, _this);\n    var mousewheelHandler = bind(_this._mousewheelHandler, _this);\n    var pinchHandler = bind(_this._pinchHandler, _this);\n    /**\n     * Notice:\n     *  - only enable needed types. For example, if 'zoom'\n     *    is not needed, 'zoom' should not be enabled, otherwise\n     *    default mousewheel behaviour (scroll page) will be disabled.\n     *  - This method is idempotent.\n     */\n    _this.enable = function (controlType, rawOpt) {\n      var zInfo = rawOpt.zInfo;\n      var _a = retrieveZInfo(zInfo.component),\n        z = _a.z,\n        zlevel = _a.zlevel;\n      var zInfoParsed = {\n        component: zInfo.component,\n        z: z,\n        zlevel: zlevel,\n        // By default roam controller is the lowest z2 comparing to other elememts in a component.\n        z2: retrieve2(zInfo.z2, -Infinity)\n      };\n      var triggerInfo = extend({}, rawOpt.triggerInfo);\n      this._opt = defaults(extend({}, rawOpt), {\n        zoomOnMouseWheel: true,\n        moveOnMouseMove: true,\n        // By default, wheel do not trigger move.\n        moveOnMouseWheel: false,\n        preventDefaultMouseMove: true,\n        zInfoParsed: zInfoParsed,\n        triggerInfo: triggerInfo\n      });\n      if (controlType == null) {\n        controlType = true;\n      }\n      // A handy optimization for repeatedly calling `enable` during roaming.\n      // Assert `disable` is only affected by `controlType`.\n      if (!this._enabled || this._controlType !== controlType) {\n        this._enabled = true;\n        // Disable previous first\n        this.disable();\n        if (controlType === true || controlType === 'move' || controlType === 'pan') {\n          addRoamZrListener(zr, 'mousedown', mousedownHandler, zInfoParsed);\n          addRoamZrListener(zr, 'mousemove', mousemoveHandler, zInfoParsed);\n          addRoamZrListener(zr, 'mouseup', mouseupHandler, zInfoParsed);\n        }\n        if (controlType === true || controlType === 'scale' || controlType === 'zoom') {\n          addRoamZrListener(zr, 'mousewheel', mousewheelHandler, zInfoParsed);\n          addRoamZrListener(zr, 'pinch', pinchHandler, zInfoParsed);\n        }\n      }\n    };\n    _this.disable = function () {\n      this._enabled = false;\n      removeRoamZrListener(zr, 'mousedown', mousedownHandler);\n      removeRoamZrListener(zr, 'mousemove', mousemoveHandler);\n      removeRoamZrListener(zr, 'mouseup', mouseupHandler);\n      removeRoamZrListener(zr, 'mousewheel', mousewheelHandler);\n      removeRoamZrListener(zr, 'pinch', pinchHandler);\n    };\n    return _this;\n  }\n  RoamController.prototype.isDragging = function () {\n    return this._dragging;\n  };\n  RoamController.prototype.isPinching = function () {\n    return this._pinching;\n  };\n  RoamController.prototype._checkPointer = function (e, x, y) {\n    var opt = this._opt;\n    var zInfoParsed = opt.zInfoParsed;\n    if (onIrrelevantElement(e, opt.api, zInfoParsed.component)) {\n      return false;\n    }\n    ;\n    var triggerInfo = opt.triggerInfo;\n    var roamTrigger = triggerInfo.roamTrigger;\n    var inArea = false;\n    if (roamTrigger === 'global') {\n      inArea = true;\n    }\n    if (!inArea) {\n      inArea = triggerInfo.isInSelf(e, x, y);\n    }\n    if (inArea && triggerInfo.isInClip && !triggerInfo.isInClip(e, x, y)) {\n      inArea = false;\n    }\n    return inArea;\n  };\n  RoamController.prototype._decideCursorStyle = function (e, x, y, forReverse) {\n    // If this cursor style decision is not strictly consistent with zrender,\n    // it's fine - zr will set the cursor on the next mousemove.\n    // This `grab` cursor style should take the lowest precedence. If the hovring element already\n    // have a cursor, zrender will set it to be non-'default' before entering this handler.\n    // (note, e.target is never silent, e.topTarget can be silent be irrelevant.)\n    var target = e.target;\n    if (!target && this._checkPointer(e, x, y)) {\n      // To indicate users that this area is draggable, otherwise users probably cannot kwown\n      // that when hovering out of the shape but still inside the bounding rect.\n      return 'grab';\n    }\n    if (forReverse) {\n      return target && target.cursor || 'default';\n    }\n  };\n  RoamController.prototype.dispose = function () {\n    this.disable();\n  };\n  RoamController.prototype._mousedownHandler = function (e) {\n    if (eventTool.isMiddleOrRightButtonOnMouseUpDown(e) || eventConsumed(e)) {\n      return;\n    }\n    var el = e.target;\n    while (el) {\n      if (el.draggable) {\n        return;\n      }\n      // check if host is draggable\n      el = el.__hostTarget || el.parent;\n    }\n    var x = e.offsetX;\n    var y = e.offsetY;\n    // To determine dragging start, only by checking on mosedown, but not mousemove.\n    // Mouse can be out of target when mouse moving.\n    if (this._checkPointer(e, x, y)) {\n      this._x = x;\n      this._y = y;\n      this._dragging = true;\n    }\n  };\n  RoamController.prototype._mousemoveHandler = function (e) {\n    var zr = this._zr;\n    if (e.gestureEvent === 'pinch' || interactionMutex.isTaken(zr, 'globalPan') || eventConsumed(e)) {\n      return;\n    }\n    var x = e.offsetX;\n    var y = e.offsetY;\n    if (!this._dragging || !isAvailableBehavior('moveOnMouseMove', e, this._opt)) {\n      var cursorStyle = this._decideCursorStyle(e, x, y, false);\n      if (cursorStyle) {\n        zr.setCursorStyle(cursorStyle);\n      }\n      return;\n    }\n    zr.setCursorStyle('grabbing');\n    var oldX = this._x;\n    var oldY = this._y;\n    var dx = x - oldX;\n    var dy = y - oldY;\n    this._x = x;\n    this._y = y;\n    if (this._opt.preventDefaultMouseMove) {\n      eventTool.stop(e.event);\n    }\n    e.__ecRoamConsumed = true;\n    trigger(this, 'pan', 'moveOnMouseMove', e, {\n      dx: dx,\n      dy: dy,\n      oldX: oldX,\n      oldY: oldY,\n      newX: x,\n      newY: y,\n      isAvailableBehavior: null\n    });\n  };\n  RoamController.prototype._mouseupHandler = function (e) {\n    if (eventConsumed(e)) {\n      return;\n    }\n    var zr = this._zr;\n    if (!eventTool.isMiddleOrRightButtonOnMouseUpDown(e)) {\n      this._dragging = false;\n      var cursorStyle = this._decideCursorStyle(e, e.offsetX, e.offsetY, true);\n      if (cursorStyle) {\n        zr.setCursorStyle(cursorStyle);\n      }\n    }\n  };\n  RoamController.prototype._mousewheelHandler = function (e) {\n    if (eventConsumed(e)) {\n      return;\n    }\n    var shouldZoom = isAvailableBehavior('zoomOnMouseWheel', e, this._opt);\n    var shouldMove = isAvailableBehavior('moveOnMouseWheel', e, this._opt);\n    var wheelDelta = e.wheelDelta;\n    var absWheelDeltaDelta = Math.abs(wheelDelta);\n    var originX = e.offsetX;\n    var originY = e.offsetY;\n    // wheelDelta maybe -0 in chrome mac.\n    if (wheelDelta === 0 || !shouldZoom && !shouldMove) {\n      return;\n    }\n    // If both `shouldZoom` and `shouldMove` is true, trigger\n    // their event both, and the final behavior is determined\n    // by event listener themselves.\n    if (shouldZoom) {\n      // Convenience:\n      // Mac and VM Windows on Mac: scroll up: zoom out.\n      // Windows: scroll up: zoom in.\n      // FIXME: Should do more test in different environment.\n      // wheelDelta is too complicated in difference nvironment\n      // (https://developer.mozilla.org/en-US/docs/Web/Events/mousewheel),\n      // although it has been normallized by zrender.\n      // wheelDelta of mouse wheel is bigger than touch pad.\n      var factor = absWheelDeltaDelta > 3 ? 1.4 : absWheelDeltaDelta > 1 ? 1.2 : 1.1;\n      var scale = wheelDelta > 0 ? factor : 1 / factor;\n      this._checkTriggerMoveZoom(this, 'zoom', 'zoomOnMouseWheel', e, {\n        scale: scale,\n        originX: originX,\n        originY: originY,\n        isAvailableBehavior: null\n      });\n    }\n    if (shouldMove) {\n      // FIXME: Should do more test in different environment.\n      var absDelta = Math.abs(wheelDelta);\n      // wheelDelta of mouse wheel is bigger than touch pad.\n      var scrollDelta = (wheelDelta > 0 ? 1 : -1) * (absDelta > 3 ? 0.4 : absDelta > 1 ? 0.15 : 0.05);\n      this._checkTriggerMoveZoom(this, 'scrollMove', 'moveOnMouseWheel', e, {\n        scrollDelta: scrollDelta,\n        originX: originX,\n        originY: originY,\n        isAvailableBehavior: null\n      });\n    }\n  };\n  RoamController.prototype._pinchHandler = function (e) {\n    if (interactionMutex.isTaken(this._zr, 'globalPan') || eventConsumed(e)) {\n      return;\n    }\n    var scale = e.pinchScale > 1 ? 1.1 : 1 / 1.1;\n    this._checkTriggerMoveZoom(this, 'zoom', null, e, {\n      scale: scale,\n      originX: e.pinchX,\n      originY: e.pinchY,\n      isAvailableBehavior: null\n    });\n  };\n  RoamController.prototype._checkTriggerMoveZoom = function (controller, eventName, behaviorToCheck, e, contollerEvent) {\n    if (controller._checkPointer(e, contollerEvent.originX, contollerEvent.originY)) {\n      // When mouse is out of roamController rect,\n      // default befavoius should not be be disabled, otherwise\n      // page sliding is disabled, contrary to expectation.\n      eventTool.stop(e.event);\n      e.__ecRoamConsumed = true;\n      trigger(controller, eventName, behaviorToCheck, e, contollerEvent);\n    }\n  };\n  return RoamController;\n}(Eventful);\nfunction eventConsumed(e) {\n  return e.__ecRoamConsumed;\n}\nvar innerZrStore = makeInner();\nfunction ensureZrStore(zr) {\n  var store = innerZrStore(zr);\n  store.roam = store.roam || {};\n  store.uniform = store.uniform || {};\n  return store;\n}\n/**\n * Listeners are sorted by z2/z/zlevel in descending order.\n * This decides the precedence between different roam controllers if they are overlapped.\n *\n * [MEMO]: It's not easy to perfectly reconcile the conflicts caused by overlap.\n *  - Consider cases:\n *    - Multiple roam controllers overlapped.\n *      - Usually only the topmost can trigger roam.\n *    - Roam controllers overlap with other zr elements:\n *      - zr elements are relevant or irrelevent to the host of the roam controller. e.g., axis split line\n *        or series elements is relevant to a cartesian and should trigger roam.\n *      - zr elements is above or below the roam controller host, which affects the precedence of interaction.\n *      - zr elements may not silent only for triggering tooltip by hovering, which is available to roam;\n *        or may not silent for click, where roam is not preferable.\n *  - Approach - `addRoamZrListener+pointerChecker+onIrrelevantElement` (currently used):\n *    - Resolve the precedence between different roam controllers\n *    - But cannot prevent the handling on other zr elements that under the roam controller in z-order.\n *  - Approach - \"use an invisible zr elements to receive the zr events to trigger roam\":\n *    - More complicated in impl.\n *    - May cause bad cases where zr event cannot be receive due to other non-silient zr elements covering it.\n */\nfunction addRoamZrListener(zr, eventType, listener, zInfoParsed) {\n  var store = ensureZrStore(zr);\n  var roam = store.roam;\n  var listenerList = roam[eventType] = roam[eventType] || [];\n  var idx = 0;\n  for (; idx < listenerList.length; idx++) {\n    var currZInfo = listenerList[idx].zInfoParsed;\n    if ((currZInfo.zlevel - zInfoParsed.zlevel || currZInfo.z - zInfoParsed.z || currZInfo.z2 - zInfoParsed.z2\n    // If all equals, the latter added one has a higher precedence.\n    ) <= 0) {\n      break;\n    }\n  }\n  listenerList.splice(idx, 0, {\n    listener: listener,\n    zInfoParsed: zInfoParsed\n  });\n  ensureUniformListener(zr, eventType);\n}\nfunction removeRoamZrListener(zr, eventType, listener) {\n  var store = ensureZrStore(zr);\n  var listenerList = store.roam[eventType] || [];\n  for (var idx = 0; idx < listenerList.length; idx++) {\n    if (listenerList[idx].listener === listener) {\n      listenerList.splice(idx, 1);\n      if (!listenerList.length) {\n        removeUniformListener(zr, eventType);\n      }\n      return;\n    }\n  }\n}\nfunction ensureUniformListener(zr, eventType) {\n  var store = ensureZrStore(zr);\n  if (!store.uniform[eventType]) {\n    zr.on(eventType, store.uniform[eventType] = function (event) {\n      var listenerList = store.roam[eventType];\n      if (listenerList) {\n        for (var i = 0; i < listenerList.length; i++) {\n          listenerList[i].listener(event);\n        }\n      }\n    });\n  }\n}\nfunction removeUniformListener(zr, eventType) {\n  var store = ensureZrStore(zr);\n  var uniform = store.uniform;\n  if (uniform[eventType]) {\n    zr.off(eventType, uniform[eventType]);\n    uniform[eventType] = null;\n  }\n}\nfunction trigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  // Also provide behavior checker for event listener, for some case that\n  // multiple components share one listener.\n  contollerEvent.isAvailableBehavior = bind(isAvailableBehavior, null, behaviorToCheck, e);\n  // TODO should not have type issue.\n  controller.trigger(eventName, contollerEvent);\n}\n// settings: {\n//     zoomOnMouseWheel\n//     moveOnMouseMove\n//     moveOnMouseWheel\n// }\n// The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\nfunction isAvailableBehavior(behaviorToCheck, e, settings) {\n  var setting = settings[behaviorToCheck];\n  return !behaviorToCheck || setting && (!isString(setting) || e.event[setting + 'Key']);\n}\nexport default RoamController;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { BoundingRect } from '../../util/graphic.js';\n/**\n * [CAVEAT] `updateViewOnPan` and `updateViewOnZoom` modifies the group transform directly,\n *  but the 'center' and 'zoom' in echarts option and 'View' coordinate system are not updated yet,\n *  which must be performed later in 'xxxRoam' action by calling `updateCenterAndZoom`.\n * @see {updateCenterAndZoomInAction}\n */\nexport function updateViewOnPan(controllerHost, dx, dy) {\n  var target = controllerHost.target;\n  target.x += dx;\n  target.y += dy;\n  target.dirty();\n}\nexport function updateViewOnZoom(controllerHost, zoomDelta, zoomX, zoomY) {\n  var target = controllerHost.target;\n  var zoomLimit = controllerHost.zoomLimit;\n  var newZoom = controllerHost.zoom = controllerHost.zoom || 1;\n  newZoom *= zoomDelta;\n  newZoom = clampByZoomLimit(newZoom, zoomLimit);\n  var zoomScale = newZoom / controllerHost.zoom;\n  controllerHost.zoom = newZoom;\n  zoomTransformableByOrigin(target, zoomX, zoomY, zoomScale);\n  target.dirty();\n}\n/**\n * A abstraction for some similar impl in roaming.\n */\nexport function updateController(seriesModel, api, pointerCheckerEl, controller, controllerHost, clipRect) {\n  var tmpRect = new BoundingRect(0, 0, 0, 0);\n  controller.enable(seriesModel.get('roam'), {\n    api: api,\n    zInfo: {\n      component: seriesModel\n    },\n    triggerInfo: {\n      roamTrigger: seriesModel.get('roamTrigger'),\n      isInSelf: function (e, x, y) {\n        tmpRect.copy(pointerCheckerEl.getBoundingRect());\n        tmpRect.applyTransform(pointerCheckerEl.getComputedTransform());\n        return tmpRect.contain(x, y);\n      },\n      isInClip: function (e, x, y) {\n        return !clipRect || clipRect.contain(x, y);\n      }\n    }\n  });\n  controllerHost.zoomLimit = seriesModel.get('scaleLimit');\n  var coordinate = seriesModel.coordinateSystem;\n  controllerHost.zoom = coordinate ? coordinate.getZoom() : 1;\n  var type = seriesModel.subType + 'Roam';\n  controller.off('pan').off('zoom').on('pan', function (e) {\n    updateViewOnPan(controllerHost, e.dx, e.dy);\n    api.dispatchAction({\n      seriesId: seriesModel.id,\n      type: type,\n      dx: e.dx,\n      dy: e.dy\n    });\n  }).on('zoom', function (e) {\n    /**\n     * FIXME: should do nothing except `api.dispatchAction` here, the other logic\n     *  should be performed in the action handler and `updateTransform`; otherwise,\n     *  they are inconsistent if user triggers this action explicitly.\n     */\n    updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n    api.dispatchAction({\n      seriesId: seriesModel.id,\n      type: type,\n      zoom: e.scale,\n      originX: e.originX,\n      originY: e.originY\n    });\n    // Only update label layout on zoom\n    api.updateLabelLayout();\n  });\n}\nfunction getCenterCoord(view, point) {\n  // Use projected coord as center because it's linear.\n  return view.pointToProjected ? view.pointToProjected(point) : view.pointToData(point);\n}\n/**\n * Should be called only in action handler.\n * @see {updateViewOnPan|updateViewOnZoom}\n */\nexport function updateCenterAndZoomInAction(view, payload, zoomLimit) {\n  var previousZoom = view.getZoom();\n  var center = view.getCenter();\n  var deltaZoom = payload.zoom;\n  var point = view.projectedToPoint ? view.projectedToPoint(center) : view.dataToPoint(center);\n  if (payload.dx != null && payload.dy != null) {\n    point[0] -= payload.dx;\n    point[1] -= payload.dy;\n    view.setCenter(getCenterCoord(view, point));\n  }\n  if (deltaZoom != null) {\n    deltaZoom = clampByZoomLimit(previousZoom * deltaZoom, zoomLimit) / previousZoom;\n    zoomTransformableByOrigin(view, payload.originX, payload.originY, deltaZoom);\n    view.updateTransform();\n    // [NOTICE] Tricky: `getCetnerCoord` uses `this.invTransform` modified by the `updateTransform` above.\n    view.setCenter(getCenterCoord(view, point));\n    view.setZoom(deltaZoom * previousZoom);\n  }\n  return {\n    center: view.getCenter(),\n    zoom: view.getZoom()\n  };\n}\nfunction zoomTransformableByOrigin(target, originX, originY, deltaZoom) {\n  // Keep the mouse center when scaling.\n  target.x -= (originX - target.x) * (deltaZoom - 1);\n  target.y -= (originY - target.y) * (deltaZoom - 1);\n  target.scaleX *= deltaZoom;\n  target.scaleY *= deltaZoom;\n}\nexport function clampByZoomLimit(zoom, zoomLimit) {\n  if (zoomLimit) {\n    var zoomMin = zoomLimit.min || 0;\n    var zoomMax = zoomLimit.max || Infinity;\n    zoom = Math.max(Math.min(zoomMax, zoom), zoomMin);\n  }\n  return zoom;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Simple view coordinate system\n * Mapping given x, y to transformd view x, y\n */\nimport * as vector from 'zrender/lib/core/vector.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport Transformable from 'zrender/lib/core/Transformable.js';\nimport { parsePercent } from '../util/number.js';\nimport { clone } from 'zrender/lib/core/util.js';\nimport { clampByZoomLimit } from '../component/helper/roamHelper.js';\nvar v2ApplyTransform = vector.applyTransform;\nvar View = /** @class */function (_super) {\n  __extends(View, _super);\n  function View(name, opt) {\n    var _this = _super.call(this) || this;\n    _this.type = 'view';\n    _this.dimensions = ['x', 'y'];\n    /**\n     * Represents the transform brought by roam/zoom.\n     * If `View['_viewRect']` applies roam transform,\n     * we can get the final displayed rect.\n     */\n    _this._roamTransformable = new Transformable();\n    /**\n     * Represents the transform from `View['_rect']` to `View['_viewRect']`.\n     */\n    _this._rawTransformable = new Transformable();\n    _this.name = name;\n    _this._opt = opt;\n    return _this;\n  }\n  View.prototype.setBoundingRect = function (x, y, width, height) {\n    this._rect = new BoundingRect(x, y, width, height);\n    this._updateCenterAndZoom();\n    return this._rect;\n  };\n  View.prototype.getBoundingRect = function () {\n    return this._rect;\n  };\n  /**\n   * If no need to transform `View['_rect']` to `View['_viewRect']`, the calling of\n   * `setViewRect` can be omitted.\n   */\n  View.prototype.setViewRect = function (x, y, width, height) {\n    this._transformTo(x, y, width, height);\n    this._viewRect = new BoundingRect(x, y, width, height);\n  };\n  /**\n   * Transformed to particular position and size\n   */\n  View.prototype._transformTo = function (x, y, width, height) {\n    var rect = this.getBoundingRect();\n    var rawTransform = this._rawTransformable;\n    rawTransform.transform = rect.calculateTransform(new BoundingRect(x, y, width, height));\n    var rawParent = rawTransform.parent;\n    rawTransform.parent = null;\n    rawTransform.decomposeTransform();\n    rawTransform.parent = rawParent;\n    this._updateTransform();\n  };\n  /**\n   * [NOTICE]\n   *  The definition of this center has always been irrelevant to some other series center like\n   *  'series-pie.center' - this center is a point on the same coord sys as `View['_rect'].x/y`,\n   *  rather than canvas viewport, and the unit is not necessarily pixel (e.g., in geo case).\n   *  @see {View['_center']} for details.\n   */\n  View.prototype.setCenter = function (centerCoord) {\n    // #16904 introcuded percentage string here, such as '33%'. But it was based on canvas\n    // width/height, which is not reasonable - the unit may incorrect, and it is unpredictable if\n    // the `View['_rect']` is not calculated based on the current canvas rect. Therefore the percentage\n    // value is changed to based on `View['_rect'].width/height` since v6. Under this definition, users\n    // can use '0%' to map the top-left of `View['_rect']` to the center of `View['_viewRect']`.\n    var opt = this._opt;\n    if (opt && opt.api && opt.ecModel && opt.ecModel.getShallow('legacyViewCoordSysCenterBase') && centerCoord) {\n      centerCoord = [parsePercent(centerCoord[0], opt.api.getWidth()), parsePercent(centerCoord[1], opt.api.getWidth())];\n    }\n    this._centerOption = clone(centerCoord);\n    this._updateCenterAndZoom();\n  };\n  View.prototype.setZoom = function (zoom) {\n    this._zoom = clampByZoomLimit(zoom || 1, this.zoomLimit);\n    this._updateCenterAndZoom();\n  };\n  /**\n   * Get default center without roam\n   */\n  View.prototype.getDefaultCenter = function () {\n    // Rect before any transform\n    var rawRect = this.getBoundingRect();\n    var cx = rawRect.x + rawRect.width / 2;\n    var cy = rawRect.y + rawRect.height / 2;\n    return [cx, cy];\n  };\n  View.prototype.getCenter = function () {\n    return this._center || this.getDefaultCenter();\n  };\n  View.prototype.getZoom = function () {\n    return this._zoom || 1;\n  };\n  View.prototype.getRoamTransform = function () {\n    return this._roamTransformable.getLocalTransform();\n  };\n  /**\n   * Ensure this method is idempotent, since it should be called when\n   * every relevant prop (e.g. _centerOption/_zoom/_rect/_viewRect) changed.\n   */\n  View.prototype._updateCenterAndZoom = function () {\n    var centerOption = this._centerOption;\n    var rect = this._rect;\n    if (centerOption && rect) {\n      this._center = [parsePercent(centerOption[0], rect.width, rect.x), parsePercent(centerOption[1], rect.height, rect.y)];\n    }\n    // Must update after view transform updated\n    var rawTransformMatrix = this._rawTransformable.getLocalTransform();\n    var roamTransform = this._roamTransformable;\n    var defaultCenter = this.getDefaultCenter();\n    var center = this.getCenter();\n    var zoom = this.getZoom();\n    center = vector.applyTransform([], center, rawTransformMatrix);\n    defaultCenter = vector.applyTransform([], defaultCenter, rawTransformMatrix);\n    roamTransform.originX = center[0];\n    roamTransform.originY = center[1];\n    roamTransform.x = defaultCenter[0] - center[0];\n    roamTransform.y = defaultCenter[1] - center[1];\n    roamTransform.scaleX = roamTransform.scaleY = zoom;\n    this._updateTransform();\n  };\n  /**\n   * Update transform props on `this` based on the current\n   * `this._roamTransformable` and `this._rawTransformable`.\n   */\n  View.prototype._updateTransform = function () {\n    var roamTransformable = this._roamTransformable;\n    var rawTransformable = this._rawTransformable;\n    rawTransformable.parent = roamTransformable;\n    roamTransformable.updateTransform();\n    rawTransformable.updateTransform();\n    matrix.copy(this.transform || (this.transform = []), rawTransformable.transform || matrix.create());\n    this._rawTransform = rawTransformable.getLocalTransform();\n    this.invTransform = this.invTransform || [];\n    matrix.invert(this.invTransform, this.transform);\n    this.decomposeTransform();\n  };\n  View.prototype.getTransformInfo = function () {\n    var rawTransformable = this._rawTransformable;\n    var roamTransformable = this._roamTransformable;\n    // Because roamTransformabel has `originX/originY` modified,\n    // but the caller of `getTransformInfo` can not handle `originX/originY`,\n    // so need to recalculate them.\n    var dummyTransformable = new Transformable();\n    dummyTransformable.transform = roamTransformable.transform;\n    dummyTransformable.decomposeTransform();\n    return {\n      roam: {\n        x: dummyTransformable.x,\n        y: dummyTransformable.y,\n        scaleX: dummyTransformable.scaleX,\n        scaleY: dummyTransformable.scaleY\n      },\n      raw: {\n        x: rawTransformable.x,\n        y: rawTransformable.y,\n        scaleX: rawTransformable.scaleX,\n        scaleY: rawTransformable.scaleY\n      }\n    };\n  };\n  View.prototype.getViewRect = function () {\n    return this._viewRect;\n  };\n  /**\n   * Get view rect after roam transform\n   */\n  View.prototype.getViewRectAfterRoam = function () {\n    var rect = this.getBoundingRect().clone();\n    rect.applyTransform(this.transform);\n    return rect;\n  };\n  /**\n   * Convert a single (lon, lat) data item to (x, y) point.\n   */\n  View.prototype.dataToPoint = function (data, noRoam, out) {\n    var transform = noRoam ? this._rawTransform : this.transform;\n    out = out || [];\n    return transform ? v2ApplyTransform(out, data, transform) : vector.copy(out, data);\n  };\n  /**\n   * Convert a (x, y) point to (lon, lat) data\n   */\n  View.prototype.pointToData = function (point, reserved, out) {\n    out = out || [];\n    var invTransform = this.invTransform;\n    return invTransform ? v2ApplyTransform(out, point, invTransform) : (out[0] = point[0], out[1] = point[1], out);\n  };\n  View.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.dataToPoint(value) : null;\n  };\n  View.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.pointToData(pixel) : null;\n  };\n  /**\n   * @implements\n   */\n  View.prototype.containPoint = function (point) {\n    return this.getViewRectAfterRoam().contain(point[0], point[1]);\n  };\n  View.dimensions = ['x', 'y'];\n  return View;\n}(Transformable);\nfunction getCoordSys(finder) {\n  var seriesModel = finder.seriesModel;\n  return seriesModel ? seriesModel.coordinateSystem : null; // e.g., graph.\n}\nexport default View;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/**\n * Link lists and struct (graph or tree)\n */\nimport { curry, each, assert, extend, map, keys } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nfunction linkSeriesData(opt) {\n  var mainData = opt.mainData;\n  var datas = opt.datas;\n  if (!datas) {\n    datas = {\n      main: mainData\n    };\n    opt.datasAttr = {\n      main: 'data'\n    };\n  }\n  opt.datas = opt.mainData = null;\n  linkAll(mainData, datas, opt);\n  // Porxy data original methods.\n  each(datas, function (data) {\n    each(mainData.TRANSFERABLE_METHODS, function (methodName) {\n      data.wrapMethod(methodName, curry(transferInjection, opt));\n    });\n  });\n  // Beyond transfer, additional features should be added to `cloneShallow`.\n  mainData.wrapMethod('cloneShallow', curry(cloneShallowInjection, opt));\n  // Only mainData trigger change, because struct.update may trigger\n  // another changable methods, which may bring about dead lock.\n  each(mainData.CHANGABLE_METHODS, function (methodName) {\n    mainData.wrapMethod(methodName, curry(changeInjection, opt));\n  });\n  // Make sure datas contains mainData.\n  assert(datas[mainData.dataType] === mainData);\n}\nfunction transferInjection(opt, res) {\n  if (isMainData(this)) {\n    // Transfer datas to new main data.\n    var datas = extend({}, inner(this).datas);\n    datas[this.dataType] = res;\n    linkAll(res, datas, opt);\n  } else {\n    // Modify the reference in main data to point newData.\n    linkSingle(res, this.dataType, inner(this).mainData, opt);\n  }\n  return res;\n}\nfunction changeInjection(opt, res) {\n  opt.struct && opt.struct.update();\n  return res;\n}\nfunction cloneShallowInjection(opt, res) {\n  // cloneShallow, which brings about some fragilities, may be inappropriate\n  // to be exposed as an API. So for implementation simplicity we can make\n  // the restriction that cloneShallow of not-mainData should not be invoked\n  // outside, but only be invoked here.\n  each(inner(res).datas, function (data, dataType) {\n    data !== res && linkSingle(data.cloneShallow(), dataType, res, opt);\n  });\n  return res;\n}\n/**\n * Supplement method to List.\n *\n * @public\n * @param [dataType] If not specified, return mainData.\n */\nfunction getLinkedData(dataType) {\n  var mainData = inner(this).mainData;\n  return dataType == null || mainData == null ? mainData : inner(mainData).datas[dataType];\n}\n/**\n * Get list of all linked data\n */\nfunction getLinkedDataAll() {\n  var mainData = inner(this).mainData;\n  return mainData == null ? [{\n    data: mainData\n  }] : map(keys(inner(mainData).datas), function (type) {\n    return {\n      type: type,\n      data: inner(mainData).datas[type]\n    };\n  });\n}\nfunction isMainData(data) {\n  return inner(data).mainData === data;\n}\nfunction linkAll(mainData, datas, opt) {\n  inner(mainData).datas = {};\n  each(datas, function (data, dataType) {\n    linkSingle(data, dataType, mainData, opt);\n  });\n}\nfunction linkSingle(data, dataType, mainData, opt) {\n  inner(mainData).datas[dataType] = data;\n  inner(data).mainData = mainData;\n  data.dataType = dataType;\n  if (opt.struct) {\n    data[opt.structAttr] = opt.struct;\n    opt.struct[opt.datasAttr[dataType]] = data;\n  }\n  // Supplement method.\n  data.getLinkedData = getLinkedData;\n  data.getLinkedDataAll = getLinkedDataAll;\n}\nexport default linkSeriesData;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isNumber } from 'zrender/lib/core/util.js';\nexport default function categoryFilter(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n  if (!legendModels || !legendModels.length) {\n    return;\n  }\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\n    var categoriesData = graphSeries.getCategoriesData();\n    var graph = graphSeries.getGraph();\n    var data = graph.data;\n    var categoryNames = categoriesData.mapArray(categoriesData.getName);\n    data.filterSelf(function (idx) {\n      var model = data.getItemModel(idx);\n      var category = model.getShallow('category');\n      if (category != null) {\n        if (isNumber(category)) {\n          category = categoryNames[category];\n        }\n        // If in any legend component the status is not selected.\n        for (var i = 0; i < legendModels.length; i++) {\n          if (!legendModels[i].isSelected(category)) {\n            return false;\n          }\n        }\n      }\n      return true;\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend, isString } from 'zrender/lib/core/util.js';\nexport default function categoryVisual(ecModel) {\n  var paletteScope = {};\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var categoriesData = seriesModel.getCategoriesData();\n    var data = seriesModel.getData();\n    var categoryNameIdxMap = {};\n    categoriesData.each(function (idx) {\n      var name = categoriesData.getName(idx);\n      // Add prefix to avoid conflict with Object.prototype.\n      categoryNameIdxMap['ec-' + name] = idx;\n      var itemModel = categoriesData.getItemModel(idx);\n      var style = itemModel.getModel('itemStyle').getItemStyle();\n      if (!style.fill) {\n        // Get color from palette.\n        style.fill = seriesModel.getColorFromPalette(name, paletteScope);\n      }\n      categoriesData.setItemVisual(idx, 'style', style);\n      var symbolVisualList = ['symbol', 'symbolSize', 'symbolKeepAspect'];\n      for (var i = 0; i < symbolVisualList.length; i++) {\n        var symbolVisual = itemModel.getShallow(symbolVisualList[i], true);\n        if (symbolVisual != null) {\n          categoriesData.setItemVisual(idx, symbolVisualList[i], symbolVisual);\n        }\n      }\n    });\n    // Assign category color to visual\n    if (categoriesData.count()) {\n      data.each(function (idx) {\n        var model = data.getItemModel(idx);\n        var categoryIdx = model.getShallow('category');\n        if (categoryIdx != null) {\n          if (isString(categoryIdx)) {\n            categoryIdx = categoryNameIdxMap['ec-' + categoryIdx];\n          }\n          var categoryStyle = categoriesData.getItemVisual(categoryIdx, 'style');\n          var style = data.ensureUniqueItemVisual(idx, 'style');\n          extend(style, categoryStyle);\n          var visualList = ['symbol', 'symbolSize', 'symbolKeepAspect'];\n          for (var i = 0; i < visualList.length; i++) {\n            data.setItemVisual(idx, visualList[i], categoriesData.getItemVisual(categoryIdx, visualList[i]));\n          }\n        }\n      });\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend } from 'zrender/lib/core/util.js';\nfunction normalize(a) {\n  if (!(a instanceof Array)) {\n    a = [a, a];\n  }\n  return a;\n}\nexport default function graphEdgeVisual(ecModel) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var graph = seriesModel.getGraph();\n    var edgeData = seriesModel.getEdgeData();\n    var symbolType = normalize(seriesModel.get('edgeSymbol'));\n    var symbolSize = normalize(seriesModel.get('edgeSymbolSize'));\n    // const colorQuery = ['lineStyle', 'color'] as const;\n    // const opacityQuery = ['lineStyle', 'opacity'] as const;\n    edgeData.setVisual('fromSymbol', symbolType && symbolType[0]);\n    edgeData.setVisual('toSymbol', symbolType && symbolType[1]);\n    edgeData.setVisual('fromSymbolSize', symbolSize && symbolSize[0]);\n    edgeData.setVisual('toSymbolSize', symbolSize && symbolSize[1]);\n    edgeData.setVisual('style', seriesModel.getModel('lineStyle').getLineStyle());\n    edgeData.each(function (idx) {\n      var itemModel = edgeData.getItemModel(idx);\n      var edge = graph.getEdgeByIndex(idx);\n      var symbolType = normalize(itemModel.getShallow('symbol', true));\n      var symbolSize = normalize(itemModel.getShallow('symbolSize', true));\n      // Edge visual must after node visual\n      var style = itemModel.getModel('lineStyle').getLineStyle();\n      var existsStyle = edgeData.ensureUniqueItemVisual(idx, 'style');\n      extend(existsStyle, style);\n      switch (existsStyle.stroke) {\n        case 'source':\n          {\n            var nodeStyle = edge.node1.getVisual('style');\n            existsStyle.stroke = nodeStyle && nodeStyle.fill;\n            break;\n          }\n        case 'target':\n          {\n            var nodeStyle = edge.node2.getVisual('style');\n            existsStyle.stroke = nodeStyle && nodeStyle.fill;\n            break;\n          }\n      }\n      symbolType[0] && edge.setVisual('fromSymbol', symbolType[0]);\n      symbolType[1] && edge.setVisual('toSymbol', symbolType[1]);\n      symbolSize[0] && edge.setVisual('fromSymbolSize', symbolSize[0]);\n      symbolSize[1] && edge.setVisual('toSymbolSize', symbolSize[1]);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar KEY_DELIMITER = '-->';\n/**\n * params handler\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @returns {*}\n */\nvar getAutoCurvenessParams = function (seriesModel) {\n  return seriesModel.get('autoCurveness') || null;\n};\n/**\n * Generate a list of edge curvatures, 20 is the default\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param {number} appendLength\n * @return  20 => [0, -0.2, 0.2, -0.4, 0.4, -0.6, 0.6, -0.8, 0.8, -1, 1, -1.2, 1.2, -1.4, 1.4, -1.6, 1.6, -1.8, 1.8, -2]\n */\nvar createCurveness = function (seriesModel, appendLength) {\n  var autoCurvenessParmas = getAutoCurvenessParams(seriesModel);\n  var length = 20;\n  var curvenessList = [];\n  // handler the function set\n  if (zrUtil.isNumber(autoCurvenessParmas)) {\n    length = autoCurvenessParmas;\n  } else if (zrUtil.isArray(autoCurvenessParmas)) {\n    seriesModel.__curvenessList = autoCurvenessParmas;\n    return;\n  }\n  // append length\n  if (appendLength > length) {\n    length = appendLength;\n  }\n  // make sure the length is even\n  var len = length % 2 ? length + 2 : length + 3;\n  curvenessList = [];\n  for (var i = 0; i < len; i++) {\n    curvenessList.push((i % 2 ? i + 1 : i) / 10 * (i % 2 ? -1 : 1));\n  }\n  seriesModel.__curvenessList = curvenessList;\n};\n/**\n * Create different cache key data in the positive and negative directions, in order to set the curvature later\n * @param {number|string|module:echarts/data/Graph.Node} n1\n * @param {number|string|module:echarts/data/Graph.Node} n2\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @returns {string} key\n */\nvar getKeyOfEdges = function (n1, n2, seriesModel) {\n  var source = [n1.id, n1.dataIndex].join('.');\n  var target = [n2.id, n2.dataIndex].join('.');\n  return [seriesModel.uid, source, target].join(KEY_DELIMITER);\n};\n/**\n * get opposite key\n * @param {string} key\n * @returns {string}\n */\nvar getOppositeKey = function (key) {\n  var keys = key.split(KEY_DELIMITER);\n  return [keys[0], keys[2], keys[1]].join(KEY_DELIMITER);\n};\n/**\n * get edgeMap with key\n * @param edge\n * @param {module:echarts/model/SeriesModel} seriesModel\n */\nvar getEdgeFromMap = function (edge, seriesModel) {\n  var key = getKeyOfEdges(edge.node1, edge.node2, seriesModel);\n  return seriesModel.__edgeMap[key];\n};\n/**\n * calculate all cases total length\n * @param edge\n * @param seriesModel\n * @returns {number}\n */\nvar getTotalLengthBetweenNodes = function (edge, seriesModel) {\n  var len = getEdgeMapLengthWithKey(getKeyOfEdges(edge.node1, edge.node2, seriesModel), seriesModel);\n  var lenV = getEdgeMapLengthWithKey(getKeyOfEdges(edge.node2, edge.node1, seriesModel), seriesModel);\n  return len + lenV;\n};\n/**\n *\n * @param key\n */\nvar getEdgeMapLengthWithKey = function (key, seriesModel) {\n  var edgeMap = seriesModel.__edgeMap;\n  return edgeMap[key] ? edgeMap[key].length : 0;\n};\n/**\n * Count the number of edges between the same two points, used to obtain the curvature table and the parity of the edge\n * @see /graph/GraphSeries.js@getInitialData\n * @param {module:echarts/model/SeriesModel} seriesModel\n */\nexport function initCurvenessList(seriesModel) {\n  if (!getAutoCurvenessParams(seriesModel)) {\n    return;\n  }\n  seriesModel.__curvenessList = [];\n  seriesModel.__edgeMap = {};\n  // calc the array of curveness List\n  createCurveness(seriesModel);\n}\n/**\n * set edgeMap with key\n * @param {number|string|module:echarts/data/Graph.Node} n1\n * @param {number|string|module:echarts/data/Graph.Node} n2\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param {number} index\n */\nexport function createEdgeMapForCurveness(n1, n2, seriesModel, index) {\n  if (!getAutoCurvenessParams(seriesModel)) {\n    return;\n  }\n  var key = getKeyOfEdges(n1, n2, seriesModel);\n  var edgeMap = seriesModel.__edgeMap;\n  var oppositeEdges = edgeMap[getOppositeKey(key)];\n  // set direction\n  if (edgeMap[key] && !oppositeEdges) {\n    edgeMap[key].isForward = true;\n  } else if (oppositeEdges && edgeMap[key]) {\n    oppositeEdges.isForward = true;\n    edgeMap[key].isForward = false;\n  }\n  edgeMap[key] = edgeMap[key] || [];\n  edgeMap[key].push(index);\n}\n/**\n * get curvature for edge\n * @param edge\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param index\n */\nexport function getCurvenessForEdge(edge, seriesModel, index, needReverse) {\n  var autoCurvenessParams = getAutoCurvenessParams(seriesModel);\n  var isArrayParam = zrUtil.isArray(autoCurvenessParams);\n  if (!autoCurvenessParams) {\n    return null;\n  }\n  var edgeArray = getEdgeFromMap(edge, seriesModel);\n  if (!edgeArray) {\n    return null;\n  }\n  var edgeIndex = -1;\n  for (var i = 0; i < edgeArray.length; i++) {\n    if (edgeArray[i] === index) {\n      edgeIndex = i;\n      break;\n    }\n  }\n  // if totalLen is Longer createCurveness\n  var totalLen = getTotalLengthBetweenNodes(edge, seriesModel);\n  createCurveness(seriesModel, totalLen);\n  edge.lineStyle = edge.lineStyle || {};\n  // if is opposite edge, must set curvenss to opposite number\n  var curKey = getKeyOfEdges(edge.node1, edge.node2, seriesModel);\n  var curvenessList = seriesModel.__curvenessList;\n  // if pass array no need parity\n  var parityCorrection = isArrayParam ? 0 : totalLen % 2 ? 0 : 1;\n  if (!edgeArray.isForward) {\n    // the opposite edge show outside\n    var oppositeKey = getOppositeKey(curKey);\n    var len = getEdgeMapLengthWithKey(oppositeKey, seriesModel);\n    var resValue = curvenessList[edgeIndex + len + parityCorrection];\n    // isNeedReverse, simple, force type need reverse the curveness in the junction of the forword and the opposite\n    if (needReverse) {\n      // set as array may make the parity handle with the len of opposite\n      if (isArrayParam) {\n        if (autoCurvenessParams && autoCurvenessParams[0] === 0) {\n          return (len + parityCorrection) % 2 ? resValue : -resValue;\n        } else {\n          return ((len % 2 ? 0 : 1) + parityCorrection) % 2 ? resValue : -resValue;\n        }\n      } else {\n        return (len + parityCorrection) % 2 ? resValue : -resValue;\n      }\n    } else {\n      return curvenessList[edgeIndex + len + parityCorrection];\n    }\n  } else {\n    return curvenessList[parityCorrection + edgeIndex];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\nexport function simpleLayout(seriesModel) {\n  var coordSys = seriesModel.coordinateSystem;\n  if (coordSys && coordSys.type !== 'view') {\n    return;\n  }\n  var graph = seriesModel.getGraph();\n  graph.eachNode(function (node) {\n    var model = node.getModel();\n    node.setLayout([+model.get('x'), +model.get('y')]);\n  });\n  simpleLayoutEdge(graph, seriesModel);\n}\nexport function simpleLayoutEdge(graph, seriesModel) {\n  graph.eachEdge(function (edge, index) {\n    var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), -getCurvenessForEdge(edge, seriesModel, index, true), 0);\n    var p1 = vec2.clone(edge.node1.getLayout());\n    var p2 = vec2.clone(edge.node2.getLayout());\n    var points = [p1, p2];\n    if (+curveness) {\n      points.push([(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * curveness]);\n    }\n    edge.setLayout(points);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each } from 'zrender/lib/core/util.js';\nimport { simpleLayout, simpleLayoutEdge } from './simpleLayoutHelper.js';\nexport default function graphSimpleLayout(ecModel, api) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var layout = seriesModel.get('layout');\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys && coordSys.type !== 'view') {\n      var data_1 = seriesModel.getData();\n      var dimensions_1 = [];\n      each(coordSys.dimensions, function (coordDim) {\n        dimensions_1 = dimensions_1.concat(data_1.mapDimensionsAll(coordDim));\n      });\n      for (var dataIndex = 0; dataIndex < data_1.count(); dataIndex++) {\n        var value = [];\n        var hasValue = false;\n        for (var i = 0; i < dimensions_1.length; i++) {\n          var val = data_1.get(dimensions_1[i], dataIndex);\n          if (!isNaN(val)) {\n            hasValue = true;\n          }\n          value.push(val);\n        }\n        if (hasValue) {\n          data_1.setItemLayout(dataIndex, coordSys.dataToPoint(value));\n        } else {\n          // Also {Array.<number>}, not undefined to avoid if...else... statement\n          data_1.setItemLayout(dataIndex, [NaN, NaN]);\n        }\n      }\n      simpleLayoutEdge(data_1.graph, seriesModel);\n    } else if (!layout || layout === 'none') {\n      simpleLayout(seriesModel);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport function getNodeGlobalScale(seriesModel) {\n  var coordSys = seriesModel.coordinateSystem;\n  if (coordSys.type !== 'view') {\n    return 1;\n  }\n  var nodeScaleRatio = seriesModel.option.nodeScaleRatio;\n  var groupZoom = coordSys.scaleX;\n  // Scale node when zoom changes\n  var roamZoom = coordSys.getZoom();\n  var nodeScale = (roamZoom - 1) * nodeScaleRatio + 1;\n  return nodeScale / groupZoom;\n}\nexport function getSymbolSize(node) {\n  var symbolSize = node.getVisual('symbolSize');\n  if (symbolSize instanceof Array) {\n    symbolSize = (symbolSize[0] + symbolSize[1]) / 2;\n  }\n  return +symbolSize;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport { getSymbolSize, getNodeGlobalScale } from './graphHelper.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\nvar PI = Math.PI;\nvar _symbolRadiansHalf = [];\n/**\n * `basedOn` can be:\n * 'value':\n *     This layout is not accurate and have same bad case. For example,\n *     if the min value is very smaller than the max value, the nodes\n *     with the min value probably overlap even though there is enough\n *     space to layout them. So we only use this approach in the as the\n *     init layout of the force layout.\n *     FIXME\n *     Probably we do not need this method any more but use\n *     `basedOn: 'symbolSize'` in force layout if\n *     delay its init operations to GraphView.\n * 'symbolSize':\n *     This approach work only if all of the symbol size calculated.\n *     That is, the progressive rendering is not applied to graph.\n *     FIXME\n *     If progressive rendering is applied to graph some day,\n *     probably we have to use `basedOn: 'value'`.\n */\nexport function circularLayout(seriesModel, basedOn, draggingNode, pointer) {\n  var coordSys = seriesModel.coordinateSystem;\n  if (coordSys && coordSys.type !== 'view') {\n    return;\n  }\n  var rect = coordSys.getBoundingRect();\n  var nodeData = seriesModel.getData();\n  var graph = nodeData.graph;\n  var cx = rect.width / 2 + rect.x;\n  var cy = rect.height / 2 + rect.y;\n  var r = Math.min(rect.width, rect.height) / 2;\n  var count = nodeData.count();\n  nodeData.setLayout({\n    cx: cx,\n    cy: cy\n  });\n  if (!count) {\n    return;\n  }\n  if (draggingNode) {\n    var _a = coordSys.pointToData(pointer),\n      tempX = _a[0],\n      tempY = _a[1];\n    var v = [tempX - cx, tempY - cy];\n    vec2.normalize(v, v);\n    vec2.scale(v, v, r);\n    draggingNode.setLayout([cx + v[0], cy + v[1]], true);\n    var circularRotateLabel = seriesModel.get(['circular', 'rotateLabel']);\n    rotateNodeLabel(draggingNode, circularRotateLabel, cx, cy);\n  }\n  _layoutNodesBasedOn[basedOn](seriesModel, graph, nodeData, r, cx, cy, count);\n  graph.eachEdge(function (edge, index) {\n    var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), getCurvenessForEdge(edge, seriesModel, index), 0);\n    var p1 = vec2.clone(edge.node1.getLayout());\n    var p2 = vec2.clone(edge.node2.getLayout());\n    var cp1;\n    var x12 = (p1[0] + p2[0]) / 2;\n    var y12 = (p1[1] + p2[1]) / 2;\n    if (+curveness) {\n      curveness *= 3;\n      cp1 = [cx * curveness + x12 * (1 - curveness), cy * curveness + y12 * (1 - curveness)];\n    }\n    edge.setLayout([p1, p2, cp1]);\n  });\n}\nvar _layoutNodesBasedOn = {\n  value: function (seriesModel, graph, nodeData, r, cx, cy, count) {\n    var angle = 0;\n    var sum = nodeData.getSum('value');\n    var unitAngle = Math.PI * 2 / (sum || count);\n    graph.eachNode(function (node) {\n      var value = node.getValue('value');\n      var radianHalf = unitAngle * (sum ? value : 1) / 2;\n      angle += radianHalf;\n      node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\n      angle += radianHalf;\n    });\n  },\n  symbolSize: function (seriesModel, graph, nodeData, r, cx, cy, count) {\n    var sumRadian = 0;\n    _symbolRadiansHalf.length = count;\n    var nodeScale = getNodeGlobalScale(seriesModel);\n    graph.eachNode(function (node) {\n      var symbolSize = getSymbolSize(node);\n      // Normally this case will not happen, but we still add\n      // some the defensive code (2px is an arbitrary value).\n      isNaN(symbolSize) && (symbolSize = 2);\n      symbolSize < 0 && (symbolSize = 0);\n      symbolSize *= nodeScale;\n      var symbolRadianHalf = Math.asin(symbolSize / 2 / r);\n      // when `symbolSize / 2` is bigger than `r`.\n      isNaN(symbolRadianHalf) && (symbolRadianHalf = PI / 2);\n      _symbolRadiansHalf[node.dataIndex] = symbolRadianHalf;\n      sumRadian += symbolRadianHalf * 2;\n    });\n    var halfRemainRadian = (2 * PI - sumRadian) / count / 2;\n    var angle = 0;\n    graph.eachNode(function (node) {\n      var radianHalf = halfRemainRadian + _symbolRadiansHalf[node.dataIndex];\n      angle += radianHalf;\n      // init circular layout for\n      // 1. layout undefined node\n      // 2. not fixed node\n      (!node.getLayout() || !node.getLayout().fixed) && node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\n      angle += radianHalf;\n    });\n  }\n};\nexport function rotateNodeLabel(node, circularRotateLabel, cx, cy) {\n  var el = node.getGraphicEl();\n  // need to check if el exists. '-' value may not create node element.\n  if (!el) {\n    return;\n  }\n  var nodeModel = node.getModel();\n  var labelRotate = nodeModel.get(['label', 'rotate']) || 0;\n  var symbolPath = el.getSymbolPath();\n  if (circularRotateLabel) {\n    var pos = node.getLayout();\n    var rad = Math.atan2(pos[1] - cy, pos[0] - cx);\n    if (rad < 0) {\n      rad = Math.PI * 2 + rad;\n    }\n    var isLeft = pos[0] < cx;\n    if (isLeft) {\n      rad = rad - Math.PI;\n    }\n    var textPosition = isLeft ? 'left' : 'right';\n    symbolPath.setTextConfig({\n      rotation: -rad,\n      position: textPosition,\n      origin: 'center'\n    });\n    var emphasisState = symbolPath.ensureState('emphasis');\n    zrUtil.extend(emphasisState.textConfig || (emphasisState.textConfig = {}), {\n      position: textPosition\n    });\n  } else {\n    symbolPath.setTextConfig({\n      rotation: labelRotate *= Math.PI / 180\n    });\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { circularLayout } from './circularLayoutHelper.js';\nexport default function graphCircularLayout(ecModel) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    if (seriesModel.get('layout') === 'circular') {\n      circularLayout(seriesModel, 'symbolSize');\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/*\n* A third-party license is embedded for some of the code in this file:\n* Some formulas were originally copied from \"d3.js\" with some\n* modifications made for this project.\n* (See more details in the comment of the method \"step\" below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\nimport * as vec2 from 'zrender/lib/core/vector.js';\nvar scaleAndAdd = vec2.scaleAndAdd;\n// function adjacentNode(n, e) {\n//     return e.n1 === n ? e.n2 : e.n1;\n// }\nexport function forceLayout(inNodes, inEdges, opts) {\n  var nodes = inNodes;\n  var edges = inEdges;\n  var rect = opts.rect;\n  var width = rect.width;\n  var height = rect.height;\n  var center = [rect.x + width / 2, rect.y + height / 2];\n  // let scale = opts.scale || 1;\n  var gravity = opts.gravity == null ? 0.1 : opts.gravity;\n  // for (let i = 0; i < edges.length; i++) {\n  //     let e = edges[i];\n  //     let n1 = e.n1;\n  //     let n2 = e.n2;\n  //     n1.edges = n1.edges || [];\n  //     n2.edges = n2.edges || [];\n  //     n1.edges.push(e);\n  //     n2.edges.push(e);\n  // }\n  // Init position\n  for (var i = 0; i < nodes.length; i++) {\n    var n = nodes[i];\n    if (!n.p) {\n      n.p = vec2.create(width * (Math.random() - 0.5) + center[0], height * (Math.random() - 0.5) + center[1]);\n    }\n    n.pp = vec2.clone(n.p);\n    n.edges = null;\n  }\n  // Formula in 'Graph Drawing by Force-directed Placement'\n  // let k = scale * Math.sqrt(width * height / nodes.length);\n  // let k2 = k * k;\n  var initialFriction = opts.friction == null ? 0.6 : opts.friction;\n  var friction = initialFriction;\n  var beforeStepCallback;\n  var afterStepCallback;\n  return {\n    warmUp: function () {\n      friction = initialFriction * 0.8;\n    },\n    setFixed: function (idx) {\n      nodes[idx].fixed = true;\n    },\n    setUnfixed: function (idx) {\n      nodes[idx].fixed = false;\n    },\n    /**\n     * Before step hook\n     */\n    beforeStep: function (cb) {\n      beforeStepCallback = cb;\n    },\n    /**\n     * After step hook\n     */\n    afterStep: function (cb) {\n      afterStepCallback = cb;\n    },\n    /**\n     * Some formulas were originally copied from \"d3.js\"\n     * https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/layout/force.js\n     * with some modifications made for this project.\n     * See the license statement at the head of this file.\n     */\n    step: function (cb) {\n      beforeStepCallback && beforeStepCallback(nodes, edges);\n      var v12 = [];\n      var nLen = nodes.length;\n      for (var i = 0; i < edges.length; i++) {\n        var e = edges[i];\n        if (e.ignoreForceLayout) {\n          continue;\n        }\n        var n1 = e.n1;\n        var n2 = e.n2;\n        vec2.sub(v12, n2.p, n1.p);\n        var d = vec2.len(v12) - e.d;\n        var w = n2.w / (n1.w + n2.w);\n        if (isNaN(w)) {\n          w = 0;\n        }\n        vec2.normalize(v12, v12);\n        !n1.fixed && scaleAndAdd(n1.p, n1.p, v12, w * d * friction);\n        !n2.fixed && scaleAndAdd(n2.p, n2.p, v12, -(1 - w) * d * friction);\n      }\n      // Gravity\n      for (var i = 0; i < nLen; i++) {\n        var n = nodes[i];\n        if (!n.fixed) {\n          vec2.sub(v12, center, n.p);\n          // let d = vec2.len(v12);\n          // vec2.scale(v12, v12, 1 / d);\n          // let gravityFactor = gravity;\n          scaleAndAdd(n.p, n.p, v12, gravity * friction);\n        }\n      }\n      // Repulsive\n      // PENDING\n      for (var i = 0; i < nLen; i++) {\n        var n1 = nodes[i];\n        for (var j = i + 1; j < nLen; j++) {\n          var n2 = nodes[j];\n          vec2.sub(v12, n2.p, n1.p);\n          var d = vec2.len(v12);\n          if (d === 0) {\n            // Random repulse\n            vec2.set(v12, Math.random() - 0.5, Math.random() - 0.5);\n            d = 1;\n          }\n          var repFact = (n1.rep + n2.rep) / d / d;\n          !n1.fixed && scaleAndAdd(n1.pp, n1.pp, v12, repFact);\n          !n2.fixed && scaleAndAdd(n2.pp, n2.pp, v12, -repFact);\n        }\n      }\n      var v = [];\n      for (var i = 0; i < nLen; i++) {\n        var n = nodes[i];\n        if (!n.fixed) {\n          vec2.sub(v, n.p, n.pp);\n          scaleAndAdd(n.p, n.p, v, friction);\n          vec2.copy(n.pp, n.p);\n        }\n      }\n      friction = friction * 0.992;\n      var finished = friction < 0.01;\n      afterStepCallback && afterStepCallback(nodes, edges, finished);\n      cb && cb(finished);\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { forceLayout } from './forceHelper.js';\nimport { simpleLayout } from './simpleLayoutHelper.js';\nimport { circularLayout } from './circularLayoutHelper.js';\nimport { linearMap } from '../../util/number.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\nexport default function graphForceLayout(ecModel) {\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\n    var coordSys = graphSeries.coordinateSystem;\n    if (coordSys && coordSys.type !== 'view') {\n      return;\n    }\n    if (graphSeries.get('layout') === 'force') {\n      var preservedPoints_1 = graphSeries.preservedPoints || {};\n      var graph_1 = graphSeries.getGraph();\n      var nodeData_1 = graph_1.data;\n      var edgeData = graph_1.edgeData;\n      var forceModel = graphSeries.getModel('force');\n      var initLayout = forceModel.get('initLayout');\n      if (graphSeries.preservedPoints) {\n        nodeData_1.each(function (idx) {\n          var id = nodeData_1.getId(idx);\n          nodeData_1.setItemLayout(idx, preservedPoints_1[id] || [NaN, NaN]);\n        });\n      } else if (!initLayout || initLayout === 'none') {\n        simpleLayout(graphSeries);\n      } else if (initLayout === 'circular') {\n        circularLayout(graphSeries, 'value');\n      }\n      var nodeDataExtent_1 = nodeData_1.getDataExtent('value');\n      var edgeDataExtent_1 = edgeData.getDataExtent('value');\n      // let edgeDataExtent = edgeData.getDataExtent('value');\n      var repulsion = forceModel.get('repulsion');\n      var edgeLength = forceModel.get('edgeLength');\n      var repulsionArr_1 = zrUtil.isArray(repulsion) ? repulsion : [repulsion, repulsion];\n      var edgeLengthArr_1 = zrUtil.isArray(edgeLength) ? edgeLength : [edgeLength, edgeLength];\n      // Larger value has smaller length\n      edgeLengthArr_1 = [edgeLengthArr_1[1], edgeLengthArr_1[0]];\n      var nodes_1 = nodeData_1.mapArray('value', function (value, idx) {\n        var point = nodeData_1.getItemLayout(idx);\n        var rep = linearMap(value, nodeDataExtent_1, repulsionArr_1);\n        if (isNaN(rep)) {\n          rep = (repulsionArr_1[0] + repulsionArr_1[1]) / 2;\n        }\n        return {\n          w: rep,\n          rep: rep,\n          fixed: nodeData_1.getItemModel(idx).get('fixed'),\n          p: !point || isNaN(point[0]) || isNaN(point[1]) ? null : point\n        };\n      });\n      var edges = edgeData.mapArray('value', function (value, idx) {\n        var edge = graph_1.getEdgeByIndex(idx);\n        var d = linearMap(value, edgeDataExtent_1, edgeLengthArr_1);\n        if (isNaN(d)) {\n          d = (edgeLengthArr_1[0] + edgeLengthArr_1[1]) / 2;\n        }\n        var edgeModel = edge.getModel();\n        var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), -getCurvenessForEdge(edge, graphSeries, idx, true), 0);\n        return {\n          n1: nodes_1[edge.node1.dataIndex],\n          n2: nodes_1[edge.node2.dataIndex],\n          d: d,\n          curveness: curveness,\n          ignoreForceLayout: edgeModel.get('ignoreForceLayout')\n        };\n      });\n      // let coordSys = graphSeries.coordinateSystem;\n      var rect = coordSys.getBoundingRect();\n      var forceInstance = forceLayout(nodes_1, edges, {\n        rect: rect,\n        gravity: forceModel.get('gravity'),\n        friction: forceModel.get('friction')\n      });\n      forceInstance.beforeStep(function (nodes, edges) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          if (nodes[i].fixed) {\n            // Write back to layout instance\n            vec2.copy(nodes[i].p, graph_1.getNodeByIndex(i).getLayout());\n          }\n        }\n      });\n      forceInstance.afterStep(function (nodes, edges, stopped) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          if (!nodes[i].fixed) {\n            graph_1.getNodeByIndex(i).setLayout(nodes[i].p);\n          }\n          preservedPoints_1[nodeData_1.getId(i)] = nodes[i].p;\n        }\n        for (var i = 0, l = edges.length; i < l; i++) {\n          var e = edges[i];\n          var edge = graph_1.getEdgeByIndex(i);\n          var p1 = e.n1.p;\n          var p2 = e.n2.p;\n          var points = edge.getLayout();\n          points = points ? points.slice() : [];\n          points[0] = points[0] || [];\n          points[1] = points[1] || [];\n          vec2.copy(points[0], p1);\n          vec2.copy(points[1], p2);\n          if (+e.curveness) {\n            points[2] = [(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * e.curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * e.curveness];\n          }\n          edge.setLayout(points);\n        }\n      });\n      graphSeries.forceLayout = forceInstance;\n      graphSeries.preservedPoints = preservedPoints_1;\n      // Step to get the layout\n      forceInstance.step();\n    } else {\n      // Remove prev injected forceLayout instance\n      graphSeries.forceLayout = null;\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME Where to create the simple view coordinate system\nimport View from '../../coord/View.js';\nimport { createBoxLayoutReference, getLayoutRect, applyPreserveAspect } from '../../util/layout.js';\nimport * as bbox from 'zrender/lib/core/bbox.js';\nimport { extend } from 'zrender/lib/core/util.js';\nimport { injectCoordSysByOption } from '../../core/CoordinateSystem.js';\nfunction getViewRect(seriesModel, api, aspect) {\n  var layoutRef = createBoxLayoutReference(seriesModel, api);\n  var option = extend(seriesModel.getBoxLayoutParams(), {\n    aspect: aspect\n  });\n  var viewRect = getLayoutRect(option, layoutRef.refContainer);\n  return applyPreserveAspect(seriesModel, viewRect, aspect);\n}\nexport default function createViewCoordSys(ecModel, api) {\n  var viewList = [];\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    injectCoordSysByOption({\n      targetModel: seriesModel,\n      coordSysType: 'view',\n      coordSysProvider: createViewCoordSys,\n      isDefaultDataCoordSys: true\n    });\n    function createViewCoordSys() {\n      var data = seriesModel.getData();\n      var positions = data.mapArray(function (idx) {\n        var itemModel = data.getItemModel(idx);\n        return [+itemModel.get('x'), +itemModel.get('y')];\n      });\n      var min = [];\n      var max = [];\n      bbox.fromPoints(positions, min, max);\n      // If width or height is 0\n      if (max[0] - min[0] === 0) {\n        max[0] += 1;\n        min[0] -= 1;\n      }\n      if (max[1] - min[1] === 0) {\n        max[1] += 1;\n        min[1] -= 1;\n      }\n      var aspect = (max[0] - min[0]) / (max[1] - min[1]);\n      // FIXME If get view rect after data processed?\n      var viewRect = getViewRect(seriesModel, api, aspect);\n      // Position may be NaN, use view rect instead\n      if (isNaN(aspect)) {\n        min = [viewRect.x, viewRect.y];\n        max = [viewRect.x + viewRect.width, viewRect.y + viewRect.height];\n      }\n      var bbWidth = max[0] - min[0];\n      var bbHeight = max[1] - min[1];\n      var viewCoordSys = new View(null, {\n        api: api,\n        ecModel: ecModel\n      });\n      viewCoordSys.zoomLimit = seriesModel.get('scaleLimit');\n      viewCoordSys.setBoundingRect(min[0], min[1], bbWidth, bbHeight);\n      viewCoordSys.setViewRect(viewRect.x, viewRect.y, viewRect.width, viewRect.height);\n      // Update roam info\n      viewCoordSys.setCenter(seriesModel.get('center'));\n      viewCoordSys.setZoom(seriesModel.get('zoom'));\n      viewList.push(viewCoordSys);\n      return viewCoordSys;\n    }\n  });\n  return viewList;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Line path for bezier and straight line draw\n */\nimport * as graphic from '../../util/graphic.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport tokens from '../../visual/tokens.js';\nvar straightLineProto = graphic.Line.prototype;\nvar bezierCurveProto = graphic.BezierCurve.prototype;\nvar StraightLineShape = /** @class */function () {\n  function StraightLineShape() {\n    // Start point\n    this.x1 = 0;\n    this.y1 = 0;\n    // End point\n    this.x2 = 0;\n    this.y2 = 0;\n    this.percent = 1;\n  }\n  return StraightLineShape;\n}();\nvar CurveShape = /** @class */function (_super) {\n  __extends(CurveShape, _super);\n  function CurveShape() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  return CurveShape;\n}(StraightLineShape);\nfunction isStraightLine(shape) {\n  return isNaN(+shape.cpx1) || isNaN(+shape.cpy1);\n}\nvar ECLinePath = /** @class */function (_super) {\n  __extends(ECLinePath, _super);\n  function ECLinePath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'ec-line';\n    return _this;\n  }\n  ECLinePath.prototype.getDefaultStyle = function () {\n    return {\n      stroke: tokens.color.neutral99,\n      fill: null\n    };\n  };\n  ECLinePath.prototype.getDefaultShape = function () {\n    return new StraightLineShape();\n  };\n  ECLinePath.prototype.buildPath = function (ctx, shape) {\n    if (isStraightLine(shape)) {\n      straightLineProto.buildPath.call(this, ctx, shape);\n    } else {\n      bezierCurveProto.buildPath.call(this, ctx, shape);\n    }\n  };\n  ECLinePath.prototype.pointAt = function (t) {\n    if (isStraightLine(this.shape)) {\n      return straightLineProto.pointAt.call(this, t);\n    } else {\n      return bezierCurveProto.pointAt.call(this, t);\n    }\n  };\n  ECLinePath.prototype.tangentAt = function (t) {\n    var shape = this.shape;\n    var p = isStraightLine(shape) ? [shape.x2 - shape.x1, shape.y2 - shape.y1] : bezierCurveProto.tangentAt.call(this, t);\n    return vec2.normalize(p, p);\n  };\n  return ECLinePath;\n}(graphic.Path);\nexport default ECLinePath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { isArray, each, retrieve2 } from 'zrender/lib/core/util.js';\nimport * as vector from 'zrender/lib/core/vector.js';\nimport * as symbolUtil from '../../util/symbol.js';\nimport ECLinePath from './LinePath.js';\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis, enterEmphasis, leaveEmphasis, SPECIAL_STATES } from '../../util/states.js';\nimport { getLabelStatesModels, setLabelStyle } from '../../label/labelStyle.js';\nimport { round } from '../../util/number.js';\nimport tokens from '../../visual/tokens.js';\nvar SYMBOL_CATEGORIES = ['fromSymbol', 'toSymbol'];\nfunction makeSymbolTypeKey(symbolCategory) {\n  return '_' + symbolCategory + 'Type';\n}\nfunction makeSymbolTypeValue(name, lineData, idx) {\n  var symbolType = lineData.getItemVisual(idx, name);\n  if (!symbolType || symbolType === 'none') {\n    return symbolType;\n  }\n  var symbolSize = lineData.getItemVisual(idx, name + 'Size');\n  var symbolRotate = lineData.getItemVisual(idx, name + 'Rotate');\n  var symbolOffset = lineData.getItemVisual(idx, name + 'Offset');\n  var symbolKeepAspect = lineData.getItemVisual(idx, name + 'KeepAspect');\n  var symbolSizeArr = symbolUtil.normalizeSymbolSize(symbolSize);\n  var symbolOffsetArr = symbolUtil.normalizeSymbolOffset(symbolOffset || 0, symbolSizeArr);\n  return symbolType + symbolSizeArr + symbolOffsetArr + (symbolRotate || '') + (symbolKeepAspect || '');\n}\n/**\n * @inner\n */\nfunction createSymbol(name, lineData, idx) {\n  var symbolType = lineData.getItemVisual(idx, name);\n  if (!symbolType || symbolType === 'none') {\n    return;\n  }\n  var symbolSize = lineData.getItemVisual(idx, name + 'Size');\n  var symbolRotate = lineData.getItemVisual(idx, name + 'Rotate');\n  var symbolOffset = lineData.getItemVisual(idx, name + 'Offset');\n  var symbolKeepAspect = lineData.getItemVisual(idx, name + 'KeepAspect');\n  var symbolSizeArr = symbolUtil.normalizeSymbolSize(symbolSize);\n  var symbolOffsetArr = symbolUtil.normalizeSymbolOffset(symbolOffset || 0, symbolSizeArr);\n  var symbolPath = symbolUtil.createSymbol(symbolType, -symbolSizeArr[0] / 2 + symbolOffsetArr[0], -symbolSizeArr[1] / 2 + symbolOffsetArr[1], symbolSizeArr[0], symbolSizeArr[1], null, symbolKeepAspect);\n  symbolPath.__specifiedRotation = symbolRotate == null || isNaN(symbolRotate) ? void 0 : +symbolRotate * Math.PI / 180 || 0;\n  symbolPath.name = name;\n  return symbolPath;\n}\nfunction createLine(points) {\n  var line = new ECLinePath({\n    name: 'line',\n    subPixelOptimize: true\n  });\n  setLinePoints(line.shape, points);\n  return line;\n}\nfunction setLinePoints(targetShape, points) {\n  targetShape.x1 = points[0][0];\n  targetShape.y1 = points[0][1];\n  targetShape.x2 = points[1][0];\n  targetShape.y2 = points[1][1];\n  targetShape.percent = 1;\n  var cp1 = points[2];\n  if (cp1) {\n    targetShape.cpx1 = cp1[0];\n    targetShape.cpy1 = cp1[1];\n  } else {\n    targetShape.cpx1 = NaN;\n    targetShape.cpy1 = NaN;\n  }\n}\nvar Line = /** @class */function (_super) {\n  __extends(Line, _super);\n  function Line(lineData, idx, seriesScope) {\n    var _this = _super.call(this) || this;\n    _this._createLine(lineData, idx, seriesScope);\n    return _this;\n  }\n  Line.prototype._createLine = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var linePoints = lineData.getItemLayout(idx);\n    var z2 = lineData.getItemVisual(idx, 'z2');\n    var line = createLine(linePoints);\n    line.shape.percent = 0;\n    graphic.initProps(line, {\n      z2: retrieve2(z2, 0),\n      shape: {\n        percent: 1\n      }\n    }, seriesModel, idx);\n    this.add(line);\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbol = createSymbol(symbolCategory, lineData, idx);\n      // symbols must added after line to make sure\n      // it will be updated after line#update.\n      // Or symbol position and rotation update in line#beforeUpdate will be one frame slow\n      this.add(symbol);\n      this[makeSymbolTypeKey(symbolCategory)] = makeSymbolTypeValue(symbolCategory, lineData, idx);\n    }, this);\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n  // TODO More strict on the List type in parameters?\n  Line.prototype.updateData = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childOfName('line');\n    var linePoints = lineData.getItemLayout(idx);\n    var target = {\n      shape: {}\n    };\n    setLinePoints(target.shape, linePoints);\n    graphic.updateProps(line, target, seriesModel, idx);\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbolType = makeSymbolTypeValue(symbolCategory, lineData, idx);\n      var key = makeSymbolTypeKey(symbolCategory);\n      // Symbol changed\n      if (this[key] !== symbolType) {\n        this.remove(this.childOfName(symbolCategory));\n        var symbol = createSymbol(symbolCategory, lineData, idx);\n        this.add(symbol);\n      }\n      this[key] = symbolType;\n    }, this);\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n  ;\n  Line.prototype.getLinePath = function () {\n    return this.childAt(0);\n  };\n  Line.prototype._updateCommonStl = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childOfName('line');\n    var emphasisLineStyle = seriesScope && seriesScope.emphasisLineStyle;\n    var blurLineStyle = seriesScope && seriesScope.blurLineStyle;\n    var selectLineStyle = seriesScope && seriesScope.selectLineStyle;\n    var labelStatesModels = seriesScope && seriesScope.labelStatesModels;\n    var emphasisDisabled = seriesScope && seriesScope.emphasisDisabled;\n    var focus = seriesScope && seriesScope.focus;\n    var blurScope = seriesScope && seriesScope.blurScope;\n    // Optimization for large dataset\n    if (!seriesScope || lineData.hasItemOption) {\n      var itemModel = lineData.getItemModel(idx);\n      var emphasisModel = itemModel.getModel('emphasis');\n      emphasisLineStyle = emphasisModel.getModel('lineStyle').getLineStyle();\n      blurLineStyle = itemModel.getModel(['blur', 'lineStyle']).getLineStyle();\n      selectLineStyle = itemModel.getModel(['select', 'lineStyle']).getLineStyle();\n      emphasisDisabled = emphasisModel.get('disabled');\n      focus = emphasisModel.get('focus');\n      blurScope = emphasisModel.get('blurScope');\n      labelStatesModels = getLabelStatesModels(itemModel);\n    }\n    var lineStyle = lineData.getItemVisual(idx, 'style');\n    var visualColor = lineStyle.stroke;\n    line.useStyle(lineStyle);\n    line.style.fill = null;\n    line.style.strokeNoScale = true;\n    line.ensureState('emphasis').style = emphasisLineStyle;\n    line.ensureState('blur').style = blurLineStyle;\n    line.ensureState('select').style = selectLineStyle;\n    // Update symbol\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbol = this.childOfName(symbolCategory);\n      if (symbol) {\n        // Share opacity and color with line.\n        symbol.setColor(visualColor);\n        symbol.style.opacity = lineStyle.opacity;\n        for (var i = 0; i < SPECIAL_STATES.length; i++) {\n          var stateName = SPECIAL_STATES[i];\n          var lineState = line.getState(stateName);\n          if (lineState) {\n            var lineStateStyle = lineState.style || {};\n            var state = symbol.ensureState(stateName);\n            var stateStyle = state.style || (state.style = {});\n            if (lineStateStyle.stroke != null) {\n              stateStyle[symbol.__isEmptyBrush ? 'stroke' : 'fill'] = lineStateStyle.stroke;\n            }\n            if (lineStateStyle.opacity != null) {\n              stateStyle.opacity = lineStateStyle.opacity;\n            }\n          }\n        }\n        symbol.markRedraw();\n      }\n    }, this);\n    var rawVal = seriesModel.getRawValue(idx);\n    setLabelStyle(this, labelStatesModels, {\n      labelDataIndex: idx,\n      labelFetcher: {\n        getFormattedLabel: function (dataIndex, stateName) {\n          return seriesModel.getFormattedLabel(dataIndex, stateName, lineData.dataType);\n        }\n      },\n      inheritColor: visualColor || tokens.color.neutral99,\n      defaultOpacity: lineStyle.opacity,\n      defaultText: (rawVal == null ? lineData.getName(idx) : isFinite(rawVal) ? round(rawVal) : rawVal) + ''\n    });\n    var label = this.getTextContent();\n    // Always set `textStyle` even if `normalStyle.text` is null, because default\n    // values have to be set on `normalStyle`.\n    if (label) {\n      var labelNormalModel = labelStatesModels.normal;\n      label.__align = label.style.align;\n      label.__verticalAlign = label.style.verticalAlign;\n      // 'start', 'middle', 'end'\n      label.__position = labelNormalModel.get('position') || 'middle';\n      var distance = labelNormalModel.get('distance');\n      if (!isArray(distance)) {\n        distance = [distance, distance];\n      }\n      label.__labelDistance = distance;\n    }\n    this.setTextConfig({\n      position: null,\n      local: true,\n      inside: false // Can't be inside for stroke element.\n    });\n    toggleHoverEmphasis(this, focus, blurScope, emphasisDisabled);\n  };\n  Line.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n  Line.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n  Line.prototype.updateLayout = function (lineData, idx) {\n    this.setLinePoints(lineData.getItemLayout(idx));\n  };\n  Line.prototype.setLinePoints = function (points) {\n    var linePath = this.childOfName('line');\n    setLinePoints(linePath.shape, points);\n    linePath.dirty();\n  };\n  Line.prototype.beforeUpdate = function () {\n    var lineGroup = this;\n    var symbolFrom = lineGroup.childOfName('fromSymbol');\n    var symbolTo = lineGroup.childOfName('toSymbol');\n    var label = lineGroup.getTextContent();\n    // Quick reject\n    if (!symbolFrom && !symbolTo && (!label || label.ignore)) {\n      return;\n    }\n    var invScale = 1;\n    var parentNode = this.parent;\n    while (parentNode) {\n      if (parentNode.scaleX) {\n        invScale /= parentNode.scaleX;\n      }\n      parentNode = parentNode.parent;\n    }\n    var line = lineGroup.childOfName('line');\n    // If line not changed\n    // FIXME Parent scale changed\n    if (!this.__dirty && !line.__dirty) {\n      return;\n    }\n    var percent = line.shape.percent;\n    var fromPos = line.pointAt(0);\n    var toPos = line.pointAt(percent);\n    var d = vector.sub([], toPos, fromPos);\n    vector.normalize(d, d);\n    function setSymbolRotation(symbol, percent) {\n      // Fix #12388\n      // when symbol is set to be 'arrow' in markLine,\n      // symbolRotate value will be ignored, and compulsively use tangent angle.\n      // rotate by default if symbol rotation is not specified\n      var specifiedRotation = symbol.__specifiedRotation;\n      if (specifiedRotation == null) {\n        var tangent = line.tangentAt(percent);\n        symbol.attr('rotation', (percent === 1 ? -1 : 1) * Math.PI / 2 - Math.atan2(tangent[1], tangent[0]));\n      } else {\n        symbol.attr('rotation', specifiedRotation);\n      }\n    }\n    if (symbolFrom) {\n      symbolFrom.setPosition(fromPos);\n      setSymbolRotation(symbolFrom, 0);\n      symbolFrom.scaleX = symbolFrom.scaleY = invScale * percent;\n      symbolFrom.markRedraw();\n    }\n    if (symbolTo) {\n      symbolTo.setPosition(toPos);\n      setSymbolRotation(symbolTo, 1);\n      symbolTo.scaleX = symbolTo.scaleY = invScale * percent;\n      symbolTo.markRedraw();\n    }\n    if (label && !label.ignore) {\n      label.x = label.y = 0;\n      label.originX = label.originY = 0;\n      var textAlign = void 0;\n      var textVerticalAlign = void 0;\n      var distance = label.__labelDistance;\n      var distanceX = distance[0] * invScale;\n      var distanceY = distance[1] * invScale;\n      var halfPercent = percent / 2;\n      var tangent = line.tangentAt(halfPercent);\n      var n = [tangent[1], -tangent[0]];\n      var cp = line.pointAt(halfPercent);\n      if (n[1] > 0) {\n        n[0] = -n[0];\n        n[1] = -n[1];\n      }\n      var dir = tangent[0] < 0 ? -1 : 1;\n      if (label.__position !== 'start' && label.__position !== 'end') {\n        var rotation = -Math.atan2(tangent[1], tangent[0]);\n        if (toPos[0] < fromPos[0]) {\n          rotation = Math.PI + rotation;\n        }\n        label.rotation = rotation;\n      }\n      var dy = void 0;\n      switch (label.__position) {\n        case 'insideStartTop':\n        case 'insideMiddleTop':\n        case 'insideEndTop':\n        case 'middle':\n          dy = -distanceY;\n          textVerticalAlign = 'bottom';\n          break;\n        case 'insideStartBottom':\n        case 'insideMiddleBottom':\n        case 'insideEndBottom':\n          dy = distanceY;\n          textVerticalAlign = 'top';\n          break;\n        default:\n          dy = 0;\n          textVerticalAlign = 'middle';\n      }\n      switch (label.__position) {\n        case 'end':\n          label.x = d[0] * distanceX + toPos[0];\n          label.y = d[1] * distanceY + toPos[1];\n          textAlign = d[0] > 0.8 ? 'left' : d[0] < -0.8 ? 'right' : 'center';\n          textVerticalAlign = d[1] > 0.8 ? 'top' : d[1] < -0.8 ? 'bottom' : 'middle';\n          break;\n        case 'start':\n          label.x = -d[0] * distanceX + fromPos[0];\n          label.y = -d[1] * distanceY + fromPos[1];\n          textAlign = d[0] > 0.8 ? 'right' : d[0] < -0.8 ? 'left' : 'center';\n          textVerticalAlign = d[1] > 0.8 ? 'bottom' : d[1] < -0.8 ? 'top' : 'middle';\n          break;\n        case 'insideStartTop':\n        case 'insideStart':\n        case 'insideStartBottom':\n          label.x = distanceX * dir + fromPos[0];\n          label.y = fromPos[1] + dy;\n          textAlign = tangent[0] < 0 ? 'right' : 'left';\n          label.originX = -distanceX * dir;\n          label.originY = -dy;\n          break;\n        case 'insideMiddleTop':\n        case 'insideMiddle':\n        case 'insideMiddleBottom':\n        case 'middle':\n          label.x = cp[0];\n          label.y = cp[1] + dy;\n          textAlign = 'center';\n          label.originY = -dy;\n          break;\n        case 'insideEndTop':\n        case 'insideEnd':\n        case 'insideEndBottom':\n          label.x = -distanceX * dir + toPos[0];\n          label.y = toPos[1] + dy;\n          textAlign = tangent[0] >= 0 ? 'right' : 'left';\n          label.originX = distanceX * dir;\n          label.originY = -dy;\n          break;\n      }\n      label.scaleX = label.scaleY = invScale;\n      label.setStyle({\n        // Use the user specified text align and baseline first\n        verticalAlign: label.__verticalAlign || textVerticalAlign,\n        align: label.__align || textAlign\n      });\n    }\n  };\n  return Line;\n}(graphic.Group);\nexport default Line;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic.js';\nimport LineGroup from './Line.js';\nimport { getLabelStatesModels } from '../../label/labelStyle.js';\nvar LineDraw = /** @class */function () {\n  function LineDraw(LineCtor) {\n    this.group = new graphic.Group();\n    this._LineCtor = LineCtor || LineGroup;\n  }\n  LineDraw.prototype.updateData = function (lineData) {\n    var _this = this;\n    // Remove progressive els.\n    this._progressiveEls = null;\n    var lineDraw = this;\n    var group = lineDraw.group;\n    var oldLineData = lineDraw._lineData;\n    lineDraw._lineData = lineData;\n    // There is no oldLineData only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n    if (!oldLineData) {\n      group.removeAll();\n    }\n    var seriesScope = makeSeriesScope(lineData);\n    lineData.diff(oldLineData).add(function (idx) {\n      _this._doAdd(lineData, idx, seriesScope);\n    }).update(function (newIdx, oldIdx) {\n      _this._doUpdate(oldLineData, lineData, oldIdx, newIdx, seriesScope);\n    }).remove(function (idx) {\n      group.remove(oldLineData.getItemGraphicEl(idx));\n    }).execute();\n  };\n  ;\n  LineDraw.prototype.updateLayout = function () {\n    var lineData = this._lineData;\n    // Do not support update layout in incremental mode.\n    if (!lineData) {\n      return;\n    }\n    lineData.eachItemGraphicEl(function (el, idx) {\n      el.updateLayout(lineData, idx);\n    }, this);\n  };\n  ;\n  LineDraw.prototype.incrementalPrepareUpdate = function (lineData) {\n    this._seriesScope = makeSeriesScope(lineData);\n    this._lineData = null;\n    this.group.removeAll();\n  };\n  ;\n  LineDraw.prototype.incrementalUpdate = function (taskParams, lineData) {\n    this._progressiveEls = [];\n    function updateIncrementalAndHover(el) {\n      if (!el.isGroup && !isEffectObject(el)) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n    for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n      var itemLayout = lineData.getItemLayout(idx);\n      if (lineNeedsDraw(itemLayout)) {\n        var el = new this._LineCtor(lineData, idx, this._seriesScope);\n        el.traverse(updateIncrementalAndHover);\n        this.group.add(el);\n        lineData.setItemGraphicEl(idx, el);\n        this._progressiveEls.push(el);\n      }\n    }\n  };\n  ;\n  LineDraw.prototype.remove = function () {\n    this.group.removeAll();\n  };\n  ;\n  LineDraw.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n  LineDraw.prototype._doAdd = function (lineData, idx, seriesScope) {\n    var itemLayout = lineData.getItemLayout(idx);\n    if (!lineNeedsDraw(itemLayout)) {\n      return;\n    }\n    var el = new this._LineCtor(lineData, idx, seriesScope);\n    lineData.setItemGraphicEl(idx, el);\n    this.group.add(el);\n  };\n  LineDraw.prototype._doUpdate = function (oldLineData, newLineData, oldIdx, newIdx, seriesScope) {\n    var itemEl = oldLineData.getItemGraphicEl(oldIdx);\n    if (!lineNeedsDraw(newLineData.getItemLayout(newIdx))) {\n      this.group.remove(itemEl);\n      return;\n    }\n    if (!itemEl) {\n      itemEl = new this._LineCtor(newLineData, newIdx, seriesScope);\n    } else {\n      itemEl.updateData(newLineData, newIdx, seriesScope);\n    }\n    newLineData.setItemGraphicEl(newIdx, itemEl);\n    this.group.add(itemEl);\n  };\n  return LineDraw;\n}();\nfunction isEffectObject(el) {\n  return el.animators && el.animators.length > 0;\n}\nfunction makeSeriesScope(lineData) {\n  var hostModel = lineData.hostModel;\n  var emphasisModel = hostModel.getModel('emphasis');\n  return {\n    lineStyle: hostModel.getModel('lineStyle').getLineStyle(),\n    emphasisLineStyle: emphasisModel.getModel(['lineStyle']).getLineStyle(),\n    blurLineStyle: hostModel.getModel(['blur', 'lineStyle']).getLineStyle(),\n    selectLineStyle: hostModel.getModel(['select', 'lineStyle']).getLineStyle(),\n    emphasisDisabled: emphasisModel.get('disabled'),\n    blurScope: emphasisModel.get('blurScope'),\n    focus: emphasisModel.get('focus'),\n    labelStatesModels: getLabelStatesModels(hostModel)\n  };\n}\nfunction isPointNaN(pt) {\n  return isNaN(pt[0]) || isNaN(pt[1]);\n}\nfunction lineNeedsDraw(pts) {\n  return pts && !isPointNaN(pts[0]) && !isPointNaN(pts[1]);\n}\nexport default LineDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as curveTool from 'zrender/lib/core/curve.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport { getSymbolSize } from './graphHelper.js';\nvar v1 = [];\nvar v2 = [];\nvar v3 = [];\nvar quadraticAt = curveTool.quadraticAt;\nvar v2DistSquare = vec2.distSquare;\nvar mathAbs = Math.abs;\nfunction intersectCurveCircle(curvePoints, center, radius) {\n  var p0 = curvePoints[0];\n  var p1 = curvePoints[1];\n  var p2 = curvePoints[2];\n  var d = Infinity;\n  var t;\n  var radiusSquare = radius * radius;\n  var interval = 0.1;\n  for (var _t = 0.1; _t <= 0.9; _t += 0.1) {\n    v1[0] = quadraticAt(p0[0], p1[0], p2[0], _t);\n    v1[1] = quadraticAt(p0[1], p1[1], p2[1], _t);\n    var diff = mathAbs(v2DistSquare(v1, center) - radiusSquare);\n    if (diff < d) {\n      d = diff;\n      t = _t;\n    }\n  }\n  // Assume the segment is monotoneFind root through Bisection method\n  // At most 32 iteration\n  for (var i = 0; i < 32; i++) {\n    // let prev = t - interval;\n    var next = t + interval;\n    // v1[0] = quadraticAt(p0[0], p1[0], p2[0], prev);\n    // v1[1] = quadraticAt(p0[1], p1[1], p2[1], prev);\n    v2[0] = quadraticAt(p0[0], p1[0], p2[0], t);\n    v2[1] = quadraticAt(p0[1], p1[1], p2[1], t);\n    v3[0] = quadraticAt(p0[0], p1[0], p2[0], next);\n    v3[1] = quadraticAt(p0[1], p1[1], p2[1], next);\n    var diff = v2DistSquare(v2, center) - radiusSquare;\n    if (mathAbs(diff) < 1e-2) {\n      break;\n    }\n    // let prevDiff = v2DistSquare(v1, center) - radiusSquare;\n    var nextDiff = v2DistSquare(v3, center) - radiusSquare;\n    interval /= 2;\n    if (diff < 0) {\n      if (nextDiff >= 0) {\n        t = t + interval;\n      } else {\n        t = t - interval;\n      }\n    } else {\n      if (nextDiff >= 0) {\n        t = t - interval;\n      } else {\n        t = t + interval;\n      }\n    }\n  }\n  return t;\n}\n// Adjust edge to avoid\nexport default function adjustEdge(graph, scale) {\n  var tmp0 = [];\n  var quadraticSubdivide = curveTool.quadraticSubdivide;\n  var pts = [[], [], []];\n  var pts2 = [[], []];\n  var v = [];\n  scale /= 2;\n  graph.eachEdge(function (edge, idx) {\n    var linePoints = edge.getLayout();\n    var fromSymbol = edge.getVisual('fromSymbol');\n    var toSymbol = edge.getVisual('toSymbol');\n    if (!linePoints.__original) {\n      linePoints.__original = [vec2.clone(linePoints[0]), vec2.clone(linePoints[1])];\n      if (linePoints[2]) {\n        linePoints.__original.push(vec2.clone(linePoints[2]));\n      }\n    }\n    var originalPoints = linePoints.__original;\n    // Quadratic curve\n    if (linePoints[2] != null) {\n      vec2.copy(pts[0], originalPoints[0]);\n      vec2.copy(pts[1], originalPoints[2]);\n      vec2.copy(pts[2], originalPoints[1]);\n      if (fromSymbol && fromSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node1);\n        var t = intersectCurveCircle(pts, originalPoints[0], symbolSize * scale);\n        // Subdivide and get the second\n        quadraticSubdivide(pts[0][0], pts[1][0], pts[2][0], t, tmp0);\n        pts[0][0] = tmp0[3];\n        pts[1][0] = tmp0[4];\n        quadraticSubdivide(pts[0][1], pts[1][1], pts[2][1], t, tmp0);\n        pts[0][1] = tmp0[3];\n        pts[1][1] = tmp0[4];\n      }\n      if (toSymbol && toSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node2);\n        var t = intersectCurveCircle(pts, originalPoints[1], symbolSize * scale);\n        // Subdivide and get the first\n        quadraticSubdivide(pts[0][0], pts[1][0], pts[2][0], t, tmp0);\n        pts[1][0] = tmp0[1];\n        pts[2][0] = tmp0[2];\n        quadraticSubdivide(pts[0][1], pts[1][1], pts[2][1], t, tmp0);\n        pts[1][1] = tmp0[1];\n        pts[2][1] = tmp0[2];\n      }\n      // Copy back to layout\n      vec2.copy(linePoints[0], pts[0]);\n      vec2.copy(linePoints[1], pts[2]);\n      vec2.copy(linePoints[2], pts[1]);\n    }\n    // Line\n    else {\n      vec2.copy(pts2[0], originalPoints[0]);\n      vec2.copy(pts2[1], originalPoints[1]);\n      vec2.sub(v, pts2[1], pts2[0]);\n      vec2.normalize(v, v);\n      if (fromSymbol && fromSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node1);\n        vec2.scaleAndAdd(pts2[0], pts2[0], v, symbolSize * scale);\n      }\n      if (toSymbol && toSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node2);\n        vec2.scaleAndAdd(pts2[1], pts2[1], v, -symbolSize * scale);\n      }\n      vec2.copy(linePoints[0], pts2[0]);\n      vec2.copy(linePoints[1], pts2[1]);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner } from '../../util/model.js';\n/**\n * @caveat Do not import other `src/component/thumbnail/*` files.\n *  This file should be decoupled from them for sake of the size consideration.\n */\n/**\n * FIXME: This is a temporary implmentation. May need refactor to decouple\n *  the direct call from series.graph to thumbnail.\n */\nvar inner = makeInner();\nexport function getThumbnailBridge(model) {\n  if (model) {\n    return inner(model).bridge;\n  }\n}\nexport function injectThumbnailBridge(model, thumbnailBridge) {\n  if (model) {\n    inner(model).bridge = thumbnailBridge;\n  }\n}\n;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../helper/SymbolDraw.js';\nimport LineDraw from '../helper/LineDraw.js';\nimport RoamController from '../../component/helper/RoamController.js';\nimport { updateViewOnZoom, updateViewOnPan } from '../../component/helper/roamHelper.js';\nimport * as graphic from '../../util/graphic.js';\nimport adjustEdge from './adjustEdge.js';\nimport { getNodeGlobalScale } from './graphHelper.js';\nimport ChartView from '../../view/Chart.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { simpleLayoutEdge } from './simpleLayoutHelper.js';\nimport { circularLayout, rotateNodeLabel } from './circularLayoutHelper.js';\nimport { clone, extend } from 'zrender/lib/core/util.js';\nimport ECLinePath from '../helper/LinePath.js';\nimport { getThumbnailBridge } from '../../component/helper/thumbnailBridge.js';\nfunction isViewCoordSys(coordSys) {\n  return coordSys.type === 'view';\n}\nvar GraphView = /** @class */function (_super) {\n  __extends(GraphView, _super);\n  function GraphView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = GraphView.type;\n    return _this;\n  }\n  GraphView.prototype.init = function (ecModel, api) {\n    var symbolDraw = new SymbolDraw();\n    var lineDraw = new LineDraw();\n    var group = this.group;\n    var mainGroup = new graphic.Group();\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: mainGroup\n    };\n    mainGroup.add(symbolDraw.group);\n    mainGroup.add(lineDraw.group);\n    group.add(mainGroup);\n    this._symbolDraw = symbolDraw;\n    this._lineDraw = lineDraw;\n    this._mainGroup = mainGroup;\n    this._firstRender = true;\n  };\n  GraphView.prototype.render = function (seriesModel, ecModel, api) {\n    var _this = this;\n    var coordSys = seriesModel.coordinateSystem;\n    var isForceLayout = false;\n    this._model = seriesModel;\n    this._api = api;\n    this._active = true;\n    var thumbnailInfo = this._getThumbnailInfo();\n    if (thumbnailInfo) {\n      thumbnailInfo.bridge.reset(api);\n    }\n    var symbolDraw = this._symbolDraw;\n    var lineDraw = this._lineDraw;\n    if (isViewCoordSys(coordSys)) {\n      var groupNewProp = {\n        x: coordSys.x,\n        y: coordSys.y,\n        scaleX: coordSys.scaleX,\n        scaleY: coordSys.scaleY\n      };\n      if (this._firstRender) {\n        this._mainGroup.attr(groupNewProp);\n      } else {\n        graphic.updateProps(this._mainGroup, groupNewProp, seriesModel);\n      }\n    }\n    // Fix edge contact point with node\n    adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n    var data = seriesModel.getData();\n    symbolDraw.updateData(data);\n    var edgeData = seriesModel.getEdgeData();\n    // TODO: TYPE\n    lineDraw.updateData(edgeData);\n    this._updateNodeAndLinkScale();\n    this._updateController(null, seriesModel, api);\n    clearTimeout(this._layoutTimeout);\n    var forceLayout = seriesModel.forceLayout;\n    var layoutAnimation = seriesModel.get(['force', 'layoutAnimation']);\n    if (forceLayout) {\n      isForceLayout = true;\n      this._startForceLayoutIteration(forceLayout, api, layoutAnimation);\n    }\n    var layout = seriesModel.get('layout');\n    data.graph.eachNode(function (node) {\n      var idx = node.dataIndex;\n      var el = node.getGraphicEl();\n      var itemModel = node.getModel();\n      if (!el) {\n        return;\n      }\n      // Update draggable\n      el.off('drag').off('dragend');\n      var draggable = itemModel.get('draggable');\n      if (draggable) {\n        el.on('drag', function (e) {\n          switch (layout) {\n            case 'force':\n              forceLayout.warmUp();\n              !_this._layouting && _this._startForceLayoutIteration(forceLayout, api, layoutAnimation);\n              forceLayout.setFixed(idx);\n              // Write position back to layout\n              data.setItemLayout(idx, [el.x, el.y]);\n              break;\n            case 'circular':\n              data.setItemLayout(idx, [el.x, el.y]);\n              // mark node fixed\n              node.setLayout({\n                fixed: true\n              }, true);\n              // recalculate circular layout\n              circularLayout(seriesModel, 'symbolSize', node, [e.offsetX, e.offsetY]);\n              _this.updateLayout(seriesModel);\n              break;\n            case 'none':\n            default:\n              data.setItemLayout(idx, [el.x, el.y]);\n              // update edge\n              simpleLayoutEdge(seriesModel.getGraph(), seriesModel);\n              _this.updateLayout(seriesModel);\n              break;\n          }\n        }).on('dragend', function () {\n          if (forceLayout) {\n            forceLayout.setUnfixed(idx);\n          }\n        });\n      }\n      el.setDraggable(draggable, !!itemModel.get('cursor'));\n      var focus = itemModel.get(['emphasis', 'focus']);\n      if (focus === 'adjacency') {\n        getECData(el).focus = node.getAdjacentDataIndices();\n      }\n    });\n    data.graph.eachEdge(function (edge) {\n      var el = edge.getGraphicEl();\n      var focus = edge.getModel().get(['emphasis', 'focus']);\n      if (!el) {\n        return;\n      }\n      if (focus === 'adjacency') {\n        getECData(el).focus = {\n          edge: [edge.dataIndex],\n          node: [edge.node1.dataIndex, edge.node2.dataIndex]\n        };\n      }\n    });\n    var circularRotateLabel = seriesModel.get('layout') === 'circular' && seriesModel.get(['circular', 'rotateLabel']);\n    var cx = data.getLayout('cx');\n    var cy = data.getLayout('cy');\n    data.graph.eachNode(function (node) {\n      rotateNodeLabel(node, circularRotateLabel, cx, cy);\n    });\n    this._firstRender = false;\n    // Force layout will render thumbnail when layout is finished.\n    if (!isForceLayout) {\n      this._renderThumbnail(seriesModel, api, this._symbolDraw, this._lineDraw);\n    }\n  };\n  GraphView.prototype.dispose = function () {\n    this.remove();\n    this._controller && this._controller.dispose();\n    this._controllerHost = null;\n  };\n  GraphView.prototype._startForceLayoutIteration = function (forceLayout, api, layoutAnimation) {\n    var self = this;\n    var firstRendered = false;\n    (function step() {\n      forceLayout.step(function (stopped) {\n        self.updateLayout(self._model);\n        if (stopped || !firstRendered) {\n          firstRendered = true;\n          self._renderThumbnail(self._model, api, self._symbolDraw, self._lineDraw);\n        }\n        (self._layouting = !stopped) && (layoutAnimation ? self._layoutTimeout = setTimeout(step, 16) : step());\n      });\n    })();\n  };\n  GraphView.prototype._updateController = function (clipRect, seriesModel, api) {\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    var coordSys = seriesModel.coordinateSystem;\n    if (!isViewCoordSys(coordSys)) {\n      controller.disable();\n      return;\n    }\n    controller.enable(seriesModel.get('roam'), {\n      api: api,\n      zInfo: {\n        component: seriesModel\n      },\n      triggerInfo: {\n        roamTrigger: seriesModel.get('roamTrigger'),\n        isInSelf: function (e, x, y) {\n          return coordSys.containPoint([x, y]);\n        },\n        isInClip: function (e, x, y) {\n          return !clipRect || clipRect.contain(x, y);\n        }\n      }\n    });\n    controllerHost.zoomLimit = seriesModel.get('scaleLimit');\n    controllerHost.zoom = coordSys.getZoom();\n    controller.off('pan').off('zoom').on('pan', function (e) {\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'graphRoam',\n        dx: e.dx,\n        dy: e.dy\n      });\n    }).on('zoom', function (e) {\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'graphRoam',\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY\n      });\n    });\n  };\n  /**\n   * A performance shortcut - called by action handler to update the view directly\n   * without any data/visual processing (which are assumed to be unchanged), while\n   * ensuring consistent behavior between internal and external action triggers.\n   */\n  GraphView.prototype.updateViewOnPan = function (seriesModel, api, params) {\n    if (!this._active) {\n      return;\n    }\n    updateViewOnPan(this._controllerHost, params.dx, params.dy);\n    this._updateThumbnailWindow();\n  };\n  /**\n   * A performance shortcut - called by action handler to update the view directly\n   * without any data/visual processing (which are assumed to be unchanged), while\n   * ensuring consistent behavior between internal and external action triggers.\n   */\n  GraphView.prototype.updateViewOnZoom = function (seriesModel, api, params) {\n    if (!this._active) {\n      return;\n    }\n    updateViewOnZoom(this._controllerHost, params.zoom, params.originX, params.originY);\n    this._updateNodeAndLinkScale();\n    adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n    this._lineDraw.updateLayout();\n    // Only update label layout on zoom\n    api.updateLabelLayout();\n    this._updateThumbnailWindow();\n  };\n  GraphView.prototype._updateNodeAndLinkScale = function () {\n    var seriesModel = this._model;\n    var data = seriesModel.getData();\n    var nodeScale = getNodeGlobalScale(seriesModel);\n    data.eachItemGraphicEl(function (el, idx) {\n      el && el.setSymbolScale(nodeScale);\n    });\n  };\n  GraphView.prototype.updateLayout = function (seriesModel) {\n    if (!this._active) {\n      return;\n    }\n    adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n    this._symbolDraw.updateLayout();\n    this._lineDraw.updateLayout();\n  };\n  GraphView.prototype.remove = function () {\n    this._active = false;\n    clearTimeout(this._layoutTimeout);\n    this._layouting = false;\n    this._layoutTimeout = null;\n    this._symbolDraw && this._symbolDraw.remove();\n    this._lineDraw && this._lineDraw.remove();\n    this._controller && this._controller.disable();\n  };\n  /**\n   * Get thumbnail data structure only if supported.\n   */\n  GraphView.prototype._getThumbnailInfo = function () {\n    var model = this._model;\n    var coordSys = model.coordinateSystem;\n    if (coordSys.type !== 'view') {\n      return;\n    }\n    var bridge = getThumbnailBridge(model);\n    if (!bridge) {\n      return;\n    }\n    return {\n      bridge: bridge,\n      coordSys: coordSys\n    };\n  };\n  GraphView.prototype._updateThumbnailWindow = function () {\n    var info = this._getThumbnailInfo();\n    if (info) {\n      info.bridge.updateWindow(info.coordSys.transform, this._api);\n    }\n  };\n  GraphView.prototype._renderThumbnail = function (seriesModel, api, symbolDraw, lineDraw) {\n    var info = this._getThumbnailInfo();\n    if (!info) {\n      return;\n    }\n    var bridgeGroup = new graphic.Group();\n    var symbolNodes = symbolDraw.group.children();\n    var lineNodes = lineDraw.group.children();\n    var lineGroup = new graphic.Group();\n    var symbolGroup = new graphic.Group();\n    bridgeGroup.add(symbolGroup);\n    bridgeGroup.add(lineGroup);\n    // TODO: reuse elemenents for performance in large graph?\n    for (var i = 0; i < symbolNodes.length; i++) {\n      var node = symbolNodes[i];\n      var sub = node.children()[0];\n      var x = node.x;\n      var y = node.y;\n      var subShape = clone(sub.shape);\n      var shape = extend(subShape, {\n        width: sub.scaleX,\n        height: sub.scaleY,\n        x: x - sub.scaleX / 2,\n        y: y - sub.scaleY / 2\n      });\n      var style = clone(sub.style);\n      var subThumbnail = new sub.constructor({\n        shape: shape,\n        style: style,\n        z2: 151\n      });\n      symbolGroup.add(subThumbnail);\n    }\n    for (var i = 0; i < lineNodes.length; i++) {\n      var node = lineNodes[i];\n      var line = node.children()[0];\n      var style = clone(line.style);\n      var shape = clone(line.shape);\n      var lineThumbnail = new ECLinePath({\n        style: style,\n        shape: shape,\n        z2: 151\n      });\n      lineGroup.add(lineThumbnail);\n    }\n    info.bridge.renderContent({\n      api: api,\n      roamType: seriesModel.get('roam'),\n      viewportRect: null,\n      group: bridgeGroup,\n      targetTrans: info.coordSys.transform\n    });\n  };\n  GraphView.type = 'graph';\n  return GraphView;\n}(ChartView);\nexport default GraphView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\n// id may be function name of Object, add a prefix to avoid this problem.\nfunction generateNodeKey(id) {\n  return '_EC_' + id;\n}\nvar Graph = /** @class */function () {\n  function Graph(directed) {\n    this.type = 'graph';\n    this.nodes = [];\n    this.edges = [];\n    this._nodesMap = {};\n    /**\n     * @type {Object.<string, module:echarts/data/Graph.Edge>}\n     * @private\n     */\n    this._edgesMap = {};\n    this._directed = directed || false;\n  }\n  /**\n   * If is directed graph\n   */\n  Graph.prototype.isDirected = function () {\n    return this._directed;\n  };\n  ;\n  /**\n   * Add a new node\n   */\n  Graph.prototype.addNode = function (id, dataIndex) {\n    id = id == null ? '' + dataIndex : '' + id;\n    var nodesMap = this._nodesMap;\n    if (nodesMap[generateNodeKey(id)]) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.error('Graph nodes have duplicate name or id');\n      }\n      return;\n    }\n    var node = new GraphNode(id, dataIndex);\n    node.hostGraph = this;\n    this.nodes.push(node);\n    nodesMap[generateNodeKey(id)] = node;\n    return node;\n  };\n  ;\n  /**\n   * Get node by data index\n   */\n  Graph.prototype.getNodeByIndex = function (dataIndex) {\n    var rawIdx = this.data.getRawIndex(dataIndex);\n    return this.nodes[rawIdx];\n  };\n  ;\n  /**\n   * Get node by id\n   */\n  Graph.prototype.getNodeById = function (id) {\n    return this._nodesMap[generateNodeKey(id)];\n  };\n  ;\n  /**\n   * Add a new edge\n   */\n  Graph.prototype.addEdge = function (n1, n2, dataIndex) {\n    var nodesMap = this._nodesMap;\n    var edgesMap = this._edgesMap;\n    // PENDING\n    if (zrUtil.isNumber(n1)) {\n      n1 = this.nodes[n1];\n    }\n    if (zrUtil.isNumber(n2)) {\n      n2 = this.nodes[n2];\n    }\n    if (!(n1 instanceof GraphNode)) {\n      n1 = nodesMap[generateNodeKey(n1)];\n    }\n    if (!(n2 instanceof GraphNode)) {\n      n2 = nodesMap[generateNodeKey(n2)];\n    }\n    if (!n1 || !n2) {\n      return;\n    }\n    var key = n1.id + '-' + n2.id;\n    var edge = new GraphEdge(n1, n2, dataIndex);\n    edge.hostGraph = this;\n    if (this._directed) {\n      n1.outEdges.push(edge);\n      n2.inEdges.push(edge);\n    }\n    n1.edges.push(edge);\n    if (n1 !== n2) {\n      n2.edges.push(edge);\n    }\n    this.edges.push(edge);\n    edgesMap[key] = edge;\n    return edge;\n  };\n  ;\n  /**\n   * Get edge by data index\n   */\n  Graph.prototype.getEdgeByIndex = function (dataIndex) {\n    var rawIdx = this.edgeData.getRawIndex(dataIndex);\n    return this.edges[rawIdx];\n  };\n  ;\n  /**\n   * Get edge by two linked nodes\n   */\n  Graph.prototype.getEdge = function (n1, n2) {\n    if (n1 instanceof GraphNode) {\n      n1 = n1.id;\n    }\n    if (n2 instanceof GraphNode) {\n      n2 = n2.id;\n    }\n    var edgesMap = this._edgesMap;\n    if (this._directed) {\n      return edgesMap[n1 + '-' + n2];\n    } else {\n      return edgesMap[n1 + '-' + n2] || edgesMap[n2 + '-' + n1];\n    }\n  };\n  ;\n  /**\n   * Iterate all nodes\n   */\n  Graph.prototype.eachNode = function (cb, context) {\n    var nodes = this.nodes;\n    var len = nodes.length;\n    for (var i = 0; i < len; i++) {\n      if (nodes[i].dataIndex >= 0) {\n        cb.call(context, nodes[i], i);\n      }\n    }\n  };\n  ;\n  /**\n   * Iterate all edges\n   */\n  Graph.prototype.eachEdge = function (cb, context) {\n    var edges = this.edges;\n    var len = edges.length;\n    for (var i = 0; i < len; i++) {\n      if (edges[i].dataIndex >= 0 && edges[i].node1.dataIndex >= 0 && edges[i].node2.dataIndex >= 0) {\n        cb.call(context, edges[i], i);\n      }\n    }\n  };\n  ;\n  /**\n   * Breadth first traverse\n   * Return true to stop traversing\n   */\n  Graph.prototype.breadthFirstTraverse = function (cb, startNode, direction, context) {\n    if (!(startNode instanceof GraphNode)) {\n      startNode = this._nodesMap[generateNodeKey(startNode)];\n    }\n    if (!startNode) {\n      return;\n    }\n    var edgeType = direction === 'out' ? 'outEdges' : direction === 'in' ? 'inEdges' : 'edges';\n    for (var i = 0; i < this.nodes.length; i++) {\n      this.nodes[i].__visited = false;\n    }\n    if (cb.call(context, startNode, null)) {\n      return;\n    }\n    var queue = [startNode];\n    while (queue.length) {\n      var currentNode = queue.shift();\n      var edges = currentNode[edgeType];\n      for (var i = 0; i < edges.length; i++) {\n        var e = edges[i];\n        var otherNode = e.node1 === currentNode ? e.node2 : e.node1;\n        if (!otherNode.__visited) {\n          if (cb.call(context, otherNode, currentNode)) {\n            // Stop traversing\n            return;\n          }\n          queue.push(otherNode);\n          otherNode.__visited = true;\n        }\n      }\n    }\n  };\n  ;\n  // TODO\n  // depthFirstTraverse(\n  //     cb, startNode, direction, context\n  // ) {\n  // };\n  // Filter update\n  Graph.prototype.update = function () {\n    var data = this.data;\n    var edgeData = this.edgeData;\n    var nodes = this.nodes;\n    var edges = this.edges;\n    for (var i = 0, len = nodes.length; i < len; i++) {\n      nodes[i].dataIndex = -1;\n    }\n    for (var i = 0, len = data.count(); i < len; i++) {\n      nodes[data.getRawIndex(i)].dataIndex = i;\n    }\n    edgeData.filterSelf(function (idx) {\n      var edge = edges[edgeData.getRawIndex(idx)];\n      return edge.node1.dataIndex >= 0 && edge.node2.dataIndex >= 0;\n    });\n    // Update edge\n    for (var i = 0, len = edges.length; i < len; i++) {\n      edges[i].dataIndex = -1;\n    }\n    for (var i = 0, len = edgeData.count(); i < len; i++) {\n      edges[edgeData.getRawIndex(i)].dataIndex = i;\n    }\n  };\n  ;\n  /**\n   * @return {module:echarts/data/Graph}\n   */\n  Graph.prototype.clone = function () {\n    var graph = new Graph(this._directed);\n    var nodes = this.nodes;\n    var edges = this.edges;\n    for (var i = 0; i < nodes.length; i++) {\n      graph.addNode(nodes[i].id, nodes[i].dataIndex);\n    }\n    for (var i = 0; i < edges.length; i++) {\n      var e = edges[i];\n      graph.addEdge(e.node1.id, e.node2.id, e.dataIndex);\n    }\n    return graph;\n  };\n  ;\n  return Graph;\n}();\nvar GraphNode = /** @class */function () {\n  function GraphNode(id, dataIndex) {\n    this.inEdges = [];\n    this.outEdges = [];\n    this.edges = [];\n    this.dataIndex = -1;\n    this.id = id == null ? '' : id;\n    this.dataIndex = dataIndex == null ? -1 : dataIndex;\n  }\n  /**\n   * @return {number}\n   */\n  GraphNode.prototype.degree = function () {\n    return this.edges.length;\n  };\n  /**\n   * @return {number}\n   */\n  GraphNode.prototype.inDegree = function () {\n    return this.inEdges.length;\n  };\n  /**\n  * @return {number}\n  */\n  GraphNode.prototype.outDegree = function () {\n    return this.outEdges.length;\n  };\n  GraphNode.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n    var graph = this.hostGraph;\n    var itemModel = graph.data.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  };\n  GraphNode.prototype.getAdjacentDataIndices = function () {\n    var dataIndices = {\n      edge: [],\n      node: []\n    };\n    for (var i = 0; i < this.edges.length; i++) {\n      var adjacentEdge = this.edges[i];\n      if (adjacentEdge.dataIndex < 0) {\n        continue;\n      }\n      dataIndices.edge.push(adjacentEdge.dataIndex);\n      dataIndices.node.push(adjacentEdge.node1.dataIndex, adjacentEdge.node2.dataIndex);\n    }\n    return dataIndices;\n  };\n  GraphNode.prototype.getTrajectoryDataIndices = function () {\n    var connectedEdgesMap = zrUtil.createHashMap();\n    var connectedNodesMap = zrUtil.createHashMap();\n    for (var i = 0, len = this.edges.length; i < len; i++) {\n      var adjacentEdge = this.edges[i];\n      if (adjacentEdge.dataIndex < 0) {\n        continue;\n      }\n      connectedEdgesMap.set(adjacentEdge.dataIndex, true);\n      var sourceNodesQueue = [adjacentEdge.node1];\n      var targetNodesQueue = [adjacentEdge.node2];\n      var nodeIteratorIndex = 0;\n      while (nodeIteratorIndex < sourceNodesQueue.length) {\n        var sourceNode = sourceNodesQueue[nodeIteratorIndex];\n        nodeIteratorIndex++;\n        connectedNodesMap.set(sourceNode.dataIndex, true);\n        var sourceNodeInEdges = sourceNode.inEdges;\n        for (var j = 0, len_1 = sourceNodeInEdges.length, inEdge = void 0, inEdgeDataIndex = void 0; j < len_1; j++) {\n          inEdge = sourceNodeInEdges[j];\n          inEdgeDataIndex = inEdge.dataIndex;\n          if (inEdgeDataIndex >= 0 && !connectedEdgesMap.hasKey(inEdgeDataIndex)) {\n            connectedEdgesMap.set(inEdgeDataIndex, true);\n            sourceNodesQueue.push(inEdge.node1);\n          }\n        }\n      }\n      nodeIteratorIndex = 0;\n      while (nodeIteratorIndex < targetNodesQueue.length) {\n        var targetNode = targetNodesQueue[nodeIteratorIndex];\n        nodeIteratorIndex++;\n        connectedNodesMap.set(targetNode.dataIndex, true);\n        var targetNodeOutEdges = targetNode.outEdges;\n        for (var j = 0, len_2 = targetNodeOutEdges.length, outEdge = void 0, outEdgeDataIndex = void 0; j < len_2; j++) {\n          outEdge = targetNodeOutEdges[j];\n          outEdgeDataIndex = outEdge.dataIndex;\n          if (outEdgeDataIndex >= 0 && !connectedEdgesMap.hasKey(outEdgeDataIndex)) {\n            connectedEdgesMap.set(outEdgeDataIndex, true);\n            targetNodesQueue.push(outEdge.node2);\n          }\n        }\n      }\n    }\n    return {\n      edge: connectedEdgesMap.keys(),\n      node: connectedNodesMap.keys()\n    };\n  };\n  return GraphNode;\n}();\nvar GraphEdge = /** @class */function () {\n  function GraphEdge(n1, n2, dataIndex) {\n    this.dataIndex = -1;\n    this.node1 = n1;\n    this.node2 = n2;\n    this.dataIndex = dataIndex == null ? -1 : dataIndex;\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  GraphEdge.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n    var graph = this.hostGraph;\n    var itemModel = graph.edgeData.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  };\n  GraphEdge.prototype.getAdjacentDataIndices = function () {\n    return {\n      edge: [this.dataIndex],\n      node: [this.node1.dataIndex, this.node2.dataIndex]\n    };\n  };\n  GraphEdge.prototype.getTrajectoryDataIndices = function () {\n    var connectedEdgesMap = zrUtil.createHashMap();\n    var connectedNodesMap = zrUtil.createHashMap();\n    connectedEdgesMap.set(this.dataIndex, true);\n    var sourceNodes = [this.node1];\n    var targetNodes = [this.node2];\n    var nodeIteratorIndex = 0;\n    while (nodeIteratorIndex < sourceNodes.length) {\n      var sourceNode = sourceNodes[nodeIteratorIndex];\n      nodeIteratorIndex++;\n      connectedNodesMap.set(sourceNode.dataIndex, true);\n      var sourceNodeInEdges = sourceNode.inEdges;\n      for (var j = 0, len = sourceNodeInEdges.length, inEdge = void 0, inEdgeDataIndex = void 0; j < len; j++) {\n        inEdge = sourceNode.inEdges[j];\n        inEdgeDataIndex = inEdge.dataIndex;\n        if (inEdgeDataIndex >= 0 && !connectedEdgesMap.hasKey(inEdgeDataIndex)) {\n          connectedEdgesMap.set(inEdgeDataIndex, true);\n          sourceNodes.push(inEdge.node1);\n        }\n      }\n    }\n    nodeIteratorIndex = 0;\n    while (nodeIteratorIndex < targetNodes.length) {\n      var targetNode = targetNodes[nodeIteratorIndex];\n      nodeIteratorIndex++;\n      connectedNodesMap.set(targetNode.dataIndex, true);\n      var targetNodeOutEdges = targetNode.outEdges;\n      for (var j = 0, len = targetNodeOutEdges.length, outEdge = void 0, outEdgeDataIndex = void 0; j < len; j++) {\n        outEdge = targetNode.outEdges[j];\n        outEdgeDataIndex = outEdge.dataIndex;\n        if (outEdgeDataIndex >= 0 && !connectedEdgesMap.hasKey(outEdgeDataIndex)) {\n          connectedEdgesMap.set(outEdgeDataIndex, true);\n          targetNodes.push(outEdge.node2);\n        }\n      }\n    }\n    return {\n      edge: connectedEdgesMap.keys(),\n      node: connectedNodesMap.keys()\n    };\n  };\n  return GraphEdge;\n}();\nfunction createGraphDataProxyMixin(hostName, dataName) {\n  return {\n    /**\n     * @param Default 'value'. can be 'a', 'b', 'c', 'd', 'e'.\n     */\n    getValue: function (dimension) {\n      var data = this[hostName][dataName];\n      return data.getStore().get(data.getDimensionIndex(dimension || 'value'), this.dataIndex);\n    },\n    // TODO: TYPE stricter type.\n    setVisual: function (key, value) {\n      this.dataIndex >= 0 && this[hostName][dataName].setItemVisual(this.dataIndex, key, value);\n    },\n    getVisual: function (key) {\n      return this[hostName][dataName].getItemVisual(this.dataIndex, key);\n    },\n    setLayout: function (layout, merge) {\n      this.dataIndex >= 0 && this[hostName][dataName].setItemLayout(this.dataIndex, layout, merge);\n    },\n    getLayout: function () {\n      return this[hostName][dataName].getItemLayout(this.dataIndex);\n    },\n    getGraphicEl: function () {\n      return this[hostName][dataName].getItemGraphicEl(this.dataIndex);\n    },\n    getRawIndex: function () {\n      return this[hostName][dataName].getRawIndex(this.dataIndex);\n    }\n  };\n}\n;\n;\n;\nzrUtil.mixin(GraphNode, createGraphDataProxyMixin('hostGraph', 'data'));\nzrUtil.mixin(GraphEdge, createGraphDataProxyMixin('hostGraph', 'edgeData'));\nexport default Graph;\nexport { GraphNode, GraphEdge };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport Graph from '../../data/Graph.js';\nimport linkSeriesData from '../../data/helper/linkSeriesData.js';\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\nimport createSeriesData from './createSeriesData.js';\nimport { convertOptionIdName } from '../../util/model.js';\nexport default function createGraphFromNodeEdge(nodes, edges, seriesModel, directed, beforeLink) {\n  // ??? TODO\n  // support dataset?\n  var graph = new Graph(directed);\n  for (var i = 0; i < nodes.length; i++) {\n    graph.addNode(zrUtil.retrieve(\n    // Id, name, dataIndex\n    nodes[i].id, nodes[i].name, i), i);\n  }\n  var linkNameList = [];\n  var validEdges = [];\n  var linkCount = 0;\n  for (var i = 0; i < edges.length; i++) {\n    var link = edges[i];\n    var source = link.source;\n    var target = link.target;\n    // addEdge may fail when source or target not exists\n    if (graph.addEdge(source, target, linkCount)) {\n      validEdges.push(link);\n      linkNameList.push(zrUtil.retrieve(convertOptionIdName(link.id, null), source + ' > ' + target));\n      linkCount++;\n    }\n  }\n  var coordSys = seriesModel.get('coordinateSystem');\n  var nodeData;\n  if (coordSys === 'cartesian2d' || coordSys === 'polar' || coordSys === 'matrix') {\n    nodeData = createSeriesData(nodes, seriesModel);\n  } else {\n    var coordSysCtor = CoordinateSystem.get(coordSys);\n    var coordDimensions = coordSysCtor ? coordSysCtor.dimensions || [] : [];\n    // FIXME: Some geo do not need `value` dimenson, whereas `calendar` needs\n    // `value` dimension, but graph need `value` dimension. It's better to\n    // uniform this behavior.\n    if (zrUtil.indexOf(coordDimensions, 'value') < 0) {\n      coordDimensions.concat(['value']);\n    }\n    var dimensions = prepareSeriesDataSchema(nodes, {\n      coordDimensions: coordDimensions,\n      encodeDefine: seriesModel.getEncode()\n    }).dimensions;\n    nodeData = new SeriesData(dimensions, seriesModel);\n    nodeData.initData(nodes);\n  }\n  var edgeData = new SeriesData(['value'], seriesModel);\n  edgeData.initData(validEdges, linkNameList);\n  beforeLink && beforeLink(nodeData, edgeData);\n  linkSeriesData({\n    mainData: nodeData,\n    struct: graph,\n    structAttr: 'graph',\n    datas: {\n      node: nodeData,\n      edge: edgeData\n    },\n    datasAttr: {\n      node: 'data',\n      edge: 'edgeData'\n    }\n  });\n  // Update dataIndex of nodes and edges because invalid edge may be removed\n  graph.update();\n  return graph;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesData from '../../data/SeriesData.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { defaultEmphasis } from '../../util/model.js';\nimport Model from '../../model/Model.js';\nimport createGraphFromNodeEdge from '../helper/createGraphFromNodeEdge.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport SeriesModel from '../../model/Series.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nimport { defaultSeriesFormatTooltip } from '../../component/tooltip/seriesFormatTooltip.js';\nimport { initCurvenessList, createEdgeMapForCurveness } from '../helper/multipleGraphEdgeHelper.js';\nimport tokens from '../../visual/tokens.js';\nvar GraphSeriesModel = /** @class */function (_super) {\n  __extends(GraphSeriesModel, _super);\n  function GraphSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = GraphSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n  GraphSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments);\n    var self = this;\n    function getCategoriesData() {\n      return self._categoriesData;\n    }\n    // Provide data for legend select\n    this.legendVisualProvider = new LegendVisualProvider(getCategoriesData, getCategoriesData);\n    this.fillDataTextStyle(option.edges || option.links);\n    this._updateCategoriesData();\n  };\n  GraphSeriesModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n    this.fillDataTextStyle(option.edges || option.links);\n    this._updateCategoriesData();\n  };\n  GraphSeriesModel.prototype.mergeDefaultAndTheme = function (option) {\n    _super.prototype.mergeDefaultAndTheme.apply(this, arguments);\n    defaultEmphasis(option, 'edgeLabel', ['show']);\n  };\n  GraphSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var edges = option.edges || option.links || [];\n    var nodes = option.data || option.nodes || [];\n    var self = this;\n    if (nodes && edges) {\n      // auto curveness\n      initCurvenessList(this);\n      var graph = createGraphFromNodeEdge(nodes, edges, this, true, beforeLink);\n      zrUtil.each(graph.edges, function (edge) {\n        createEdgeMapForCurveness(edge.node1, edge.node2, this, edge.dataIndex);\n      }, this);\n      return graph.data;\n    }\n    function beforeLink(nodeData, edgeData) {\n      // Overwrite nodeData.getItemModel to\n      nodeData.wrapMethod('getItemModel', function (model) {\n        var categoriesModels = self._categoriesModels;\n        var categoryIdx = model.getShallow('category');\n        var categoryModel = categoriesModels[categoryIdx];\n        if (categoryModel) {\n          categoryModel.parentModel = model.parentModel;\n          model.parentModel = categoryModel;\n        }\n        return model;\n      });\n      // TODO Inherit resolveParentPath by default in Model#getModel?\n      var oldGetModel = Model.prototype.getModel;\n      function newGetModel(path, parentModel) {\n        var model = oldGetModel.call(this, path, parentModel);\n        model.resolveParentPath = resolveParentPath;\n        return model;\n      }\n      edgeData.wrapMethod('getItemModel', function (model) {\n        model.resolveParentPath = resolveParentPath;\n        model.getModel = newGetModel;\n        return model;\n      });\n      function resolveParentPath(pathArr) {\n        if (pathArr && (pathArr[0] === 'label' || pathArr[1] === 'label')) {\n          var newPathArr = pathArr.slice();\n          if (pathArr[0] === 'label') {\n            newPathArr[0] = 'edgeLabel';\n          } else if (pathArr[1] === 'label') {\n            newPathArr[1] = 'edgeLabel';\n          }\n          return newPathArr;\n        }\n        return pathArr;\n      }\n    }\n  };\n  GraphSeriesModel.prototype.getGraph = function () {\n    return this.getData().graph;\n  };\n  GraphSeriesModel.prototype.getEdgeData = function () {\n    return this.getGraph().edgeData;\n  };\n  GraphSeriesModel.prototype.getCategoriesData = function () {\n    return this._categoriesData;\n  };\n  GraphSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    if (dataType === 'edge') {\n      var nodeData = this.getData();\n      var params = this.getDataParams(dataIndex, dataType);\n      var edge = nodeData.graph.getEdgeByIndex(dataIndex);\n      var sourceName = nodeData.getName(edge.node1.dataIndex);\n      var targetName = nodeData.getName(edge.node2.dataIndex);\n      var nameArr = [];\n      sourceName != null && nameArr.push(sourceName);\n      targetName != null && nameArr.push(targetName);\n      return createTooltipMarkup('nameValue', {\n        name: nameArr.join(' > '),\n        value: params.value,\n        noValue: params.value == null\n      });\n    }\n    // dataType === 'node' or empty\n    var nodeMarkup = defaultSeriesFormatTooltip({\n      series: this,\n      dataIndex: dataIndex,\n      multipleSeries: multipleSeries\n    });\n    return nodeMarkup;\n  };\n  GraphSeriesModel.prototype._updateCategoriesData = function () {\n    var categories = zrUtil.map(this.option.categories || [], function (category) {\n      // Data must has value\n      return category.value != null ? category : zrUtil.extend({\n        value: 0\n      }, category);\n    });\n    var categoriesData = new SeriesData(['value'], this);\n    categoriesData.initData(categories);\n    this._categoriesData = categoriesData;\n    this._categoriesModels = categoriesData.mapArray(function (idx) {\n      return categoriesData.getItemModel(idx);\n    });\n  };\n  GraphSeriesModel.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n  GraphSeriesModel.prototype.setCenter = function (center) {\n    this.option.center = center;\n  };\n  GraphSeriesModel.prototype.isAnimationEnabled = function () {\n    return _super.prototype.isAnimationEnabled.call(this)\n    // Not enable animation when do force layout\n    && !(this.get('layout') === 'force' && this.get(['force', 'layoutAnimation']));\n  };\n  GraphSeriesModel.type = 'series.graph';\n  GraphSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n  GraphSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    // Default option for all coordinate systems\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // polarIndex: 0,\n    // geoIndex: 0,\n    legendHoverLink: true,\n    layout: null,\n    // Configuration of circular layout\n    circular: {\n      rotateLabel: false\n    },\n    // Configuration of force directed layout\n    force: {\n      initLayout: null,\n      // Node repulsion. Can be an array to represent range.\n      repulsion: [0, 50],\n      gravity: 0.1,\n      // Initial friction\n      friction: 0.6,\n      // Edge length. Can be an array to represent range.\n      edgeLength: 30,\n      layoutAnimation: true\n    },\n    left: 'center',\n    top: 'center',\n    // right: null,\n    // bottom: null,\n    // width: '80%',\n    // height: '80%',\n    symbol: 'circle',\n    symbolSize: 10,\n    edgeSymbol: ['none', 'none'],\n    edgeSymbolSize: 10,\n    edgeLabel: {\n      position: 'middle',\n      distance: 5\n    },\n    draggable: false,\n    roam: false,\n    // Default on center of graph\n    center: null,\n    zoom: 1,\n    // Symbol size scale ratio in roam\n    nodeScaleRatio: 0.6,\n    // cursor: null,\n    // categories: [],\n    // data: []\n    // Or\n    // nodes: []\n    //\n    // links: []\n    // Or\n    // edges: []\n    label: {\n      show: false,\n      formatter: '{b}'\n    },\n    itemStyle: {},\n    lineStyle: {\n      // Don't use tokens.color.border because of the opacity\n      color: tokens.color.neutral50,\n      width: 1,\n      opacity: 0.5\n    },\n    emphasis: {\n      scale: true,\n      label: {\n        show: true\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: tokens.color.primary\n      }\n    }\n  };\n  return GraphSeriesModel;\n}(SeriesModel);\nexport default GraphSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport categoryFilter from './categoryFilter.js';\nimport categoryVisual from './categoryVisual.js';\nimport edgeVisual from './edgeVisual.js';\nimport simpleLayout from './simpleLayout.js';\nimport circularLayout from './circularLayout.js';\nimport forceLayout from './forceLayout.js';\nimport createView from './createView.js';\nimport View from '../../coord/View.js';\nimport GraphView from './GraphView.js';\nimport GraphSeriesModel from './GraphSeries.js';\nimport { updateCenterAndZoomInAction } from '../../component/helper/roamHelper.js';\nimport { noop } from 'zrender/lib/core/util.js';\nexport function install(registers) {\n  registers.registerChartView(GraphView);\n  registers.registerSeriesModel(GraphSeriesModel);\n  registers.registerProcessor(categoryFilter);\n  registers.registerVisual(categoryVisual);\n  registers.registerVisual(edgeVisual);\n  registers.registerLayout(simpleLayout);\n  registers.registerLayout(registers.PRIORITY.VISUAL.POST_CHART_LAYOUT, circularLayout);\n  registers.registerLayout(forceLayout);\n  registers.registerCoordinateSystem('graphView', {\n    dimensions: View.dimensions,\n    create: createView\n  });\n  // Register legacy focus actions\n  registers.registerAction({\n    type: 'focusNodeAdjacency',\n    event: 'focusNodeAdjacency',\n    update: 'series:focusNodeAdjacency'\n  }, noop);\n  registers.registerAction({\n    type: 'unfocusNodeAdjacency',\n    event: 'unfocusNodeAdjacency',\n    update: 'series:unfocusNodeAdjacency'\n  }, noop);\n  // Register roam action.\n  registers.registerAction({\n    type: 'graphRoam',\n    event: 'graphRoam',\n    update: 'none'\n  }, function (payload, ecModel, api) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: payload\n    }, function (seriesModel) {\n      var graphView = api.getViewOfSeriesModel(seriesModel);\n      if (graphView) {\n        if (payload.dx != null && payload.dy != null) {\n          graphView.updateViewOnPan(seriesModel, api, payload);\n        }\n        if (payload.zoom != null && payload.originX != null && payload.originY != null) {\n          graphView.updateViewOnZoom(seriesModel, api, payload);\n        }\n      }\n      var coordSys = seriesModel.coordinateSystem;\n      var res = updateCenterAndZoomInAction(coordSys, payload, seriesModel.get('scaleLimit'));\n      seriesModel.setCenter && seriesModel.setCenter(res.center);\n      seriesModel.setZoom && seriesModel.setZoom(res.zoom);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/**\n * Calculate slider move result.\n * Usage:\n * (1) If both handle0 and handle1 are needed to be moved, set minSpan the same as\n * maxSpan and the same as `Math.abs(handleEnd[1] - handleEnds[0])`.\n * (2) If handle0 is forbidden to cross handle1, set minSpan as `0`.\n *\n * @param delta Move length.\n * @param handleEnds handleEnds[0] can be bigger then handleEnds[1].\n *              handleEnds will be modified in this method.\n * @param extent handleEnds is restricted by extent.\n *              extent[0] should less or equals than extent[1].\n * @param handleIndex Can be 'all', means that both move the two handleEnds.\n * @param minSpan The range of dataZoom can not be smaller than that.\n *              If not set, handle0 and cross handle1. If set as a non-negative\n *              number (including `0`), handles will push each other when reaching\n *              the minSpan.\n * @param maxSpan The range of dataZoom can not be larger than that.\n * @return The input handleEnds.\n */\nexport default function sliderMove(delta, handleEnds, extent, handleIndex, minSpan, maxSpan) {\n  delta = delta || 0;\n  var extentSpan = extent[1] - extent[0];\n  // Notice maxSpan and minSpan can be null/undefined.\n  if (minSpan != null) {\n    minSpan = restrict(minSpan, [0, extentSpan]);\n  }\n  if (maxSpan != null) {\n    maxSpan = Math.max(maxSpan, minSpan != null ? minSpan : 0);\n  }\n  if (handleIndex === 'all') {\n    var handleSpan = Math.abs(handleEnds[1] - handleEnds[0]);\n    handleSpan = restrict(handleSpan, [0, extentSpan]);\n    minSpan = maxSpan = restrict(handleSpan, [minSpan, maxSpan]);\n    handleIndex = 0;\n  }\n  handleEnds[0] = restrict(handleEnds[0], extent);\n  handleEnds[1] = restrict(handleEnds[1], extent);\n  var originalDistSign = getSpanSign(handleEnds, handleIndex);\n  handleEnds[handleIndex] += delta;\n  // Restrict in extent.\n  var extentMinSpan = minSpan || 0;\n  var realExtent = extent.slice();\n  originalDistSign.sign < 0 ? realExtent[0] += extentMinSpan : realExtent[1] -= extentMinSpan;\n  handleEnds[handleIndex] = restrict(handleEnds[handleIndex], realExtent);\n  // Expand span.\n  var currDistSign;\n  currDistSign = getSpanSign(handleEnds, handleIndex);\n  if (minSpan != null && (currDistSign.sign !== originalDistSign.sign || currDistSign.span < minSpan)) {\n    // If minSpan exists, 'cross' is forbidden.\n    handleEnds[1 - handleIndex] = handleEnds[handleIndex] + originalDistSign.sign * minSpan;\n  }\n  // Shrink span.\n  currDistSign = getSpanSign(handleEnds, handleIndex);\n  if (maxSpan != null && currDistSign.span > maxSpan) {\n    handleEnds[1 - handleIndex] = handleEnds[handleIndex] + currDistSign.sign * maxSpan;\n  }\n  return handleEnds;\n}\nfunction getSpanSign(handleEnds, handleIndex) {\n  var dist = handleEnds[handleIndex] - handleEnds[1 - handleIndex];\n  // If `handleEnds[0] === handleEnds[1]`, always believe that handleEnd[0]\n  // is at left of handleEnds[1] for non-cross case.\n  return {\n    span: Math.abs(dist),\n    sign: dist > 0 ? -1 : dist < 0 ? 1 : handleIndex ? -1 : 1\n  };\n}\nfunction restrict(value, extend) {\n  return Math.min(extend[1] != null ? extend[1] : Infinity, Math.max(extend[0] != null ? extend[0] : -Infinity, value));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { curry, each, map, bind, merge, clone, defaults, assert } from 'zrender/lib/core/util.js';\nimport Eventful from 'zrender/lib/core/Eventful.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as interactionMutex from './interactionMutex.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport tokens from '../../visual/tokens.js';\nvar BRUSH_PANEL_GLOBAL = true;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathPow = Math.pow;\nvar COVER_Z = 10000;\nvar UNSELECT_THRESHOLD = 6;\nvar MIN_RESIZE_LINE_WIDTH = 6;\nvar MUTEX_RESOURCE_KEY = 'globalPan';\nvar DIRECTION_MAP = {\n  w: [0, 0],\n  e: [0, 1],\n  n: [1, 0],\n  s: [1, 1]\n};\nvar CURSOR_MAP = {\n  w: 'ew',\n  e: 'ew',\n  n: 'ns',\n  s: 'ns',\n  ne: 'nesw',\n  sw: 'nesw',\n  nw: 'nwse',\n  se: 'nwse'\n};\nvar DEFAULT_BRUSH_OPT = {\n  brushStyle: {\n    lineWidth: 2,\n    stroke: tokens.color.backgroundTint,\n    fill: tokens.color.borderTint\n  },\n  transformable: true,\n  brushMode: 'single',\n  removeOnClick: false\n};\nvar baseUID = 0;\n/**\n * params:\n *     areas: Array.<Array>, coord relates to container group,\n *                             If no container specified, to global.\n *     opt {\n *         isEnd: boolean,\n *         removeOnClick: boolean\n *     }\n */\nvar BrushController = /** @class */function (_super) {\n  __extends(BrushController, _super);\n  function BrushController(zr) {\n    var _this = _super.call(this) || this;\n    /**\n     * @internal\n     */\n    _this._track = [];\n    /**\n     * @internal\n     */\n    _this._covers = [];\n    _this._handlers = {};\n    if (process.env.NODE_ENV !== 'production') {\n      assert(zr);\n    }\n    _this._zr = zr;\n    _this.group = new graphic.Group();\n    _this._uid = 'brushController_' + baseUID++;\n    each(pointerHandlers, function (handler, eventName) {\n      this._handlers[eventName] = bind(handler, this);\n    }, _this);\n    return _this;\n  }\n  /**\n   * If set to `false`, select disabled.\n   */\n  BrushController.prototype.enableBrush = function (brushOption) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n    this._brushType && this._doDisableBrush();\n    brushOption.brushType && this._doEnableBrush(brushOption);\n    return this;\n  };\n  BrushController.prototype._doEnableBrush = function (brushOption) {\n    var zr = this._zr;\n    // Consider roam, which takes globalPan too.\n    if (!this._enableGlobalPan) {\n      interactionMutex.take(zr, MUTEX_RESOURCE_KEY, this._uid);\n    }\n    each(this._handlers, function (handler, eventName) {\n      zr.on(eventName, handler);\n    });\n    this._brushType = brushOption.brushType;\n    this._brushOption = merge(clone(DEFAULT_BRUSH_OPT), brushOption, true);\n  };\n  BrushController.prototype._doDisableBrush = function () {\n    var zr = this._zr;\n    interactionMutex.release(zr, MUTEX_RESOURCE_KEY, this._uid);\n    each(this._handlers, function (handler, eventName) {\n      zr.off(eventName, handler);\n    });\n    this._brushType = this._brushOption = null;\n  };\n  /**\n   * @param panelOpts If not pass, it is global brush.\n   */\n  BrushController.prototype.setPanels = function (panelOpts) {\n    if (panelOpts && panelOpts.length) {\n      var panels_1 = this._panels = {};\n      each(panelOpts, function (panelOpts) {\n        panels_1[panelOpts.panelId] = clone(panelOpts);\n      });\n    } else {\n      this._panels = null;\n    }\n    return this;\n  };\n  BrushController.prototype.mount = function (opt) {\n    opt = opt || {};\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = true; // should be at first.\n    }\n    this._enableGlobalPan = opt.enableGlobalPan;\n    var thisGroup = this.group;\n    this._zr.add(thisGroup);\n    thisGroup.attr({\n      x: opt.x || 0,\n      y: opt.y || 0,\n      rotation: opt.rotation || 0,\n      scaleX: opt.scaleX || 1,\n      scaleY: opt.scaleY || 1\n    });\n    this._transform = thisGroup.getLocalTransform();\n    return this;\n  };\n  // eachCover(cb, context): void {\n  //     each(this._covers, cb, context);\n  // }\n  /**\n   * Update covers.\n   * @param coverConfigList\n   *        If coverConfigList is null/undefined, all covers removed.\n   */\n  BrushController.prototype.updateCovers = function (coverConfigList) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n    coverConfigList = map(coverConfigList, function (coverConfig) {\n      return merge(clone(DEFAULT_BRUSH_OPT), coverConfig, true);\n    });\n    var tmpIdPrefix = '\\0-brush-index-';\n    var oldCovers = this._covers;\n    var newCovers = this._covers = [];\n    var controller = this;\n    var creatingCover = this._creatingCover;\n    new DataDiffer(oldCovers, coverConfigList, oldGetKey, getKey).add(addOrUpdate).update(addOrUpdate).remove(remove).execute();\n    return this;\n    function getKey(brushOption, index) {\n      return (brushOption.id != null ? brushOption.id : tmpIdPrefix + index) + '-' + brushOption.brushType;\n    }\n    function oldGetKey(cover, index) {\n      return getKey(cover.__brushOption, index);\n    }\n    function addOrUpdate(newIndex, oldIndex) {\n      var newBrushInternal = coverConfigList[newIndex];\n      // Consider setOption in event listener of brushSelect,\n      // where updating cover when creating should be forbidden.\n      if (oldIndex != null && oldCovers[oldIndex] === creatingCover) {\n        newCovers[newIndex] = oldCovers[oldIndex];\n      } else {\n        var cover = newCovers[newIndex] = oldIndex != null ? (oldCovers[oldIndex].__brushOption = newBrushInternal, oldCovers[oldIndex]) : endCreating(controller, createCover(controller, newBrushInternal));\n        updateCoverAfterCreation(controller, cover);\n      }\n    }\n    function remove(oldIndex) {\n      if (oldCovers[oldIndex] !== creatingCover) {\n        controller.group.remove(oldCovers[oldIndex]);\n      }\n    }\n  };\n  BrushController.prototype.unmount = function () {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!this._mounted) {\n        return;\n      }\n    }\n    this.enableBrush(false);\n    // container may 'removeAll' outside.\n    clearCovers(this);\n    this._zr.remove(this.group);\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = false; // should be at last.\n    }\n    return this;\n  };\n  BrushController.prototype.dispose = function () {\n    this.unmount();\n    this.off();\n  };\n  return BrushController;\n}(Eventful);\nfunction createCover(controller, brushOption) {\n  var cover = coverRenderers[brushOption.brushType].createCover(controller, brushOption);\n  cover.__brushOption = brushOption;\n  updateZ(cover, brushOption);\n  controller.group.add(cover);\n  return cover;\n}\nfunction endCreating(controller, creatingCover) {\n  var coverRenderer = getCoverRenderer(creatingCover);\n  if (coverRenderer.endCreating) {\n    coverRenderer.endCreating(controller, creatingCover);\n    updateZ(creatingCover, creatingCover.__brushOption);\n  }\n  return creatingCover;\n}\nfunction updateCoverShape(controller, cover) {\n  var brushOption = cover.__brushOption;\n  getCoverRenderer(cover).updateCoverShape(controller, cover, brushOption.range, brushOption);\n}\nfunction updateZ(cover, brushOption) {\n  var z = brushOption.z;\n  z == null && (z = COVER_Z);\n  cover.traverse(function (el) {\n    el.z = z;\n    el.z2 = z; // Consider in given container.\n  });\n}\nfunction updateCoverAfterCreation(controller, cover) {\n  getCoverRenderer(cover).updateCommon(controller, cover);\n  updateCoverShape(controller, cover);\n}\nfunction getCoverRenderer(cover) {\n  return coverRenderers[cover.__brushOption.brushType];\n}\n// return target panel or `true` (means global panel)\nfunction getPanelByPoint(controller, e, localCursorPoint) {\n  var panels = controller._panels;\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n  var panel;\n  var transform = controller._transform;\n  each(panels, function (pn) {\n    pn.isTargetByCursor(e, localCursorPoint, transform) && (panel = pn);\n  });\n  return panel;\n}\n// Return a panel or true\nfunction getPanelByCover(controller, cover) {\n  var panels = controller._panels;\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n  var panelId = cover.__brushOption.panelId;\n  // User may give cover without coord sys info,\n  // which is then treated as global panel.\n  return panelId != null ? panels[panelId] : BRUSH_PANEL_GLOBAL;\n}\nfunction clearCovers(controller) {\n  var covers = controller._covers;\n  var originalLength = covers.length;\n  each(covers, function (cover) {\n    controller.group.remove(cover);\n  }, controller);\n  covers.length = 0;\n  return !!originalLength;\n}\nfunction trigger(controller, opt) {\n  var areas = map(controller._covers, function (cover) {\n    var brushOption = cover.__brushOption;\n    var range = clone(brushOption.range);\n    return {\n      brushType: brushOption.brushType,\n      panelId: brushOption.panelId,\n      range: range\n    };\n  });\n  controller.trigger('brush', {\n    areas: areas,\n    isEnd: !!opt.isEnd,\n    removeOnClick: !!opt.removeOnClick\n  });\n}\nfunction shouldShowCover(controller) {\n  var track = controller._track;\n  if (!track.length) {\n    return false;\n  }\n  var p2 = track[track.length - 1];\n  var p1 = track[0];\n  var dx = p2[0] - p1[0];\n  var dy = p2[1] - p1[1];\n  var dist = mathPow(dx * dx + dy * dy, 0.5);\n  return dist > UNSELECT_THRESHOLD;\n}\nfunction getTrackEnds(track) {\n  var tail = track.length - 1;\n  tail < 0 && (tail = 0);\n  return [track[0], track[tail]];\n}\n;\nfunction createBaseRectCover(rectRangeConverter, controller, brushOption, edgeNameSequences) {\n  var cover = new graphic.Group();\n  cover.add(new graphic.Rect({\n    name: 'main',\n    style: makeStyle(brushOption),\n    silent: true,\n    draggable: true,\n    cursor: 'move',\n    drift: curry(driftRect, rectRangeConverter, controller, cover, ['n', 's', 'w', 'e']),\n    ondragend: curry(trigger, controller, {\n      isEnd: true\n    })\n  }));\n  each(edgeNameSequences, function (nameSequence) {\n    cover.add(new graphic.Rect({\n      name: nameSequence.join(''),\n      style: {\n        opacity: 0\n      },\n      draggable: true,\n      silent: true,\n      invisible: true,\n      drift: curry(driftRect, rectRangeConverter, controller, cover, nameSequence),\n      ondragend: curry(trigger, controller, {\n        isEnd: true\n      })\n    }));\n  });\n  return cover;\n}\nfunction updateBaseRect(controller, cover, localRange, brushOption) {\n  var lineWidth = brushOption.brushStyle.lineWidth || 0;\n  var handleSize = mathMax(lineWidth, MIN_RESIZE_LINE_WIDTH);\n  var x = localRange[0][0];\n  var y = localRange[1][0];\n  var xa = x - lineWidth / 2;\n  var ya = y - lineWidth / 2;\n  var x2 = localRange[0][1];\n  var y2 = localRange[1][1];\n  var x2a = x2 - handleSize + lineWidth / 2;\n  var y2a = y2 - handleSize + lineWidth / 2;\n  var width = x2 - x;\n  var height = y2 - y;\n  var widtha = width + lineWidth;\n  var heighta = height + lineWidth;\n  updateRectShape(controller, cover, 'main', x, y, width, height);\n  if (brushOption.transformable) {\n    updateRectShape(controller, cover, 'w', xa, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'e', x2a, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'n', xa, ya, widtha, handleSize);\n    updateRectShape(controller, cover, 's', xa, y2a, widtha, handleSize);\n    updateRectShape(controller, cover, 'nw', xa, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'ne', x2a, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'sw', xa, y2a, handleSize, handleSize);\n    updateRectShape(controller, cover, 'se', x2a, y2a, handleSize, handleSize);\n  }\n}\nfunction updateCommon(controller, cover) {\n  var brushOption = cover.__brushOption;\n  var transformable = brushOption.transformable;\n  var mainEl = cover.childAt(0);\n  mainEl.useStyle(makeStyle(brushOption));\n  mainEl.attr({\n    silent: !transformable,\n    cursor: transformable ? 'move' : 'default'\n  });\n  each([['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']], function (nameSequence) {\n    var el = cover.childOfName(nameSequence.join(''));\n    var globalDir = nameSequence.length === 1 ? getGlobalDirection1(controller, nameSequence[0]) : getGlobalDirection2(controller, nameSequence);\n    el && el.attr({\n      silent: !transformable,\n      invisible: !transformable,\n      cursor: transformable ? CURSOR_MAP[globalDir] + '-resize' : null\n    });\n  });\n}\nfunction updateRectShape(controller, cover, name, x, y, w, h) {\n  var el = cover.childOfName(name);\n  el && el.setShape(pointsToRect(clipByPanel(controller, cover, [[x, y], [x + w, y + h]])));\n}\nfunction makeStyle(brushOption) {\n  return defaults({\n    strokeNoScale: true\n  }, brushOption.brushStyle);\n}\nfunction formatRectRange(x, y, x2, y2) {\n  var min = [mathMin(x, x2), mathMin(y, y2)];\n  var max = [mathMax(x, x2), mathMax(y, y2)];\n  return [[min[0], max[0]], [min[1], max[1]] // y range\n  ];\n}\nfunction getTransform(controller) {\n  return graphic.getTransform(controller.group);\n}\nfunction getGlobalDirection1(controller, localDirName) {\n  var map = {\n    w: 'left',\n    e: 'right',\n    n: 'top',\n    s: 'bottom'\n  };\n  var inverseMap = {\n    left: 'w',\n    right: 'e',\n    top: 'n',\n    bottom: 's'\n  };\n  var dir = graphic.transformDirection(map[localDirName], getTransform(controller));\n  return inverseMap[dir];\n}\nfunction getGlobalDirection2(controller, localDirNameSeq) {\n  var globalDir = [getGlobalDirection1(controller, localDirNameSeq[0]), getGlobalDirection1(controller, localDirNameSeq[1])];\n  (globalDir[0] === 'e' || globalDir[0] === 'w') && globalDir.reverse();\n  return globalDir.join('');\n}\nfunction driftRect(rectRangeConverter, controller, cover, dirNameSequence, dx, dy) {\n  var brushOption = cover.__brushOption;\n  var rectRange = rectRangeConverter.toRectRange(brushOption.range);\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(dirNameSequence, function (dirName) {\n    var ind = DIRECTION_MAP[dirName];\n    rectRange[ind[0]][ind[1]] += localDelta[ind[0]];\n  });\n  brushOption.range = rectRangeConverter.fromRectRange(formatRectRange(rectRange[0][0], rectRange[1][0], rectRange[0][1], rectRange[1][1]));\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\nfunction driftPolygon(controller, cover, dx, dy) {\n  var range = cover.__brushOption.range;\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(range, function (point) {\n    point[0] += localDelta[0];\n    point[1] += localDelta[1];\n  });\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\nfunction toLocalDelta(controller, dx, dy) {\n  var thisGroup = controller.group;\n  var localD = thisGroup.transformCoordToLocal(dx, dy);\n  var localZero = thisGroup.transformCoordToLocal(0, 0);\n  return [localD[0] - localZero[0], localD[1] - localZero[1]];\n}\nfunction clipByPanel(controller, cover, data) {\n  var panel = getPanelByCover(controller, cover);\n  return panel && panel !== BRUSH_PANEL_GLOBAL ? panel.clipPath(data, controller._transform) : clone(data);\n}\nfunction pointsToRect(points) {\n  var xmin = mathMin(points[0][0], points[1][0]);\n  var ymin = mathMin(points[0][1], points[1][1]);\n  var xmax = mathMax(points[0][0], points[1][0]);\n  var ymax = mathMax(points[0][1], points[1][1]);\n  return {\n    x: xmin,\n    y: ymin,\n    width: xmax - xmin,\n    height: ymax - ymin\n  };\n}\nfunction resetCursor(controller, e, localCursorPoint) {\n  if (\n  // Check active\n  !controller._brushType\n  // resetCursor should be always called when mouse is in zr area,\n  // but not called when mouse is out of zr area to avoid bad influence\n  // if `mousemove`, `mouseup` are triggered from `document` event.\n  || isOutsideZrArea(controller, e.offsetX, e.offsetY)) {\n    return;\n  }\n  var zr = controller._zr;\n  var covers = controller._covers;\n  var currPanel = getPanelByPoint(controller, e, localCursorPoint);\n  // Check whether in covers.\n  if (!controller._dragging) {\n    for (var i = 0; i < covers.length; i++) {\n      var brushOption = covers[i].__brushOption;\n      if (currPanel && (currPanel === BRUSH_PANEL_GLOBAL || brushOption.panelId === currPanel.panelId) && coverRenderers[brushOption.brushType].contain(covers[i], localCursorPoint[0], localCursorPoint[1])) {\n        // Use cursor style set on cover.\n        return;\n      }\n    }\n  }\n  currPanel && zr.setCursorStyle('crosshair');\n}\nfunction preventDefault(e) {\n  var rawE = e.event;\n  rawE.preventDefault && rawE.preventDefault();\n}\nfunction mainShapeContain(cover, x, y) {\n  return cover.childOfName('main').contain(x, y);\n}\nfunction updateCoverByMouse(controller, e, localCursorPoint, isEnd) {\n  var creatingCover = controller._creatingCover;\n  var panel = controller._creatingPanel;\n  var thisBrushOption = controller._brushOption;\n  var eventParams;\n  controller._track.push(localCursorPoint.slice());\n  if (shouldShowCover(controller) || creatingCover) {\n    if (panel && !creatingCover) {\n      thisBrushOption.brushMode === 'single' && clearCovers(controller);\n      var brushOption = clone(thisBrushOption);\n      brushOption.brushType = determineBrushType(brushOption.brushType, panel);\n      brushOption.panelId = panel === BRUSH_PANEL_GLOBAL ? null : panel.panelId;\n      creatingCover = controller._creatingCover = createCover(controller, brushOption);\n      controller._covers.push(creatingCover);\n    }\n    if (creatingCover) {\n      var coverRenderer = coverRenderers[determineBrushType(controller._brushType, panel)];\n      var coverBrushOption = creatingCover.__brushOption;\n      coverBrushOption.range = coverRenderer.getCreatingRange(clipByPanel(controller, creatingCover, controller._track));\n      if (isEnd) {\n        endCreating(controller, creatingCover);\n        coverRenderer.updateCommon(controller, creatingCover);\n      }\n      updateCoverShape(controller, creatingCover);\n      eventParams = {\n        isEnd: isEnd\n      };\n    }\n  } else if (isEnd && thisBrushOption.brushMode === 'single' && thisBrushOption.removeOnClick) {\n    // Help user to remove covers easily, only by a tiny drag, in 'single' mode.\n    // But a single click do not clear covers, because user may have casual\n    // clicks (for example, click on other component and do not expect covers\n    // disappear).\n    // Only some cover removed, trigger action, but not every click trigger action.\n    if (getPanelByPoint(controller, e, localCursorPoint) && clearCovers(controller)) {\n      eventParams = {\n        isEnd: isEnd,\n        removeOnClick: true\n      };\n    }\n  }\n  return eventParams;\n}\nfunction determineBrushType(brushType, panel) {\n  if (brushType === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(panel && panel.defaultBrushType, 'MUST have defaultBrushType when brushType is \"atuo\"');\n    }\n    return panel.defaultBrushType;\n  }\n  return brushType;\n}\nvar pointerHandlers = {\n  mousedown: function (e) {\n    if (this._dragging) {\n      // In case some browser do not support globalOut,\n      // and release mouse out side the browser.\n      handleDragEnd(this, e);\n    } else if (!e.target || !e.target.draggable) {\n      preventDefault(e);\n      var localCursorPoint = this.group.transformCoordToLocal(e.offsetX, e.offsetY);\n      this._creatingCover = null;\n      var panel = this._creatingPanel = getPanelByPoint(this, e, localCursorPoint);\n      if (panel) {\n        this._dragging = true;\n        this._track = [localCursorPoint.slice()];\n      }\n    }\n  },\n  mousemove: function (e) {\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = this.group.transformCoordToLocal(x, y);\n    resetCursor(this, e, localCursorPoint);\n    if (this._dragging) {\n      preventDefault(e);\n      var eventParams = updateCoverByMouse(this, e, localCursorPoint, false);\n      eventParams && trigger(this, eventParams);\n    }\n  },\n  mouseup: function (e) {\n    handleDragEnd(this, e);\n  }\n};\nfunction handleDragEnd(controller, e) {\n  if (controller._dragging) {\n    preventDefault(e);\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = controller.group.transformCoordToLocal(x, y);\n    var eventParams = updateCoverByMouse(controller, e, localCursorPoint, true);\n    controller._dragging = false;\n    controller._track = [];\n    controller._creatingCover = null;\n    // trigger event should be at final, after procedure will be nested.\n    eventParams && trigger(controller, eventParams);\n  }\n}\nfunction isOutsideZrArea(controller, x, y) {\n  var zr = controller._zr;\n  return x < 0 || x > zr.getWidth() || y < 0 || y > zr.getHeight();\n}\n/**\n * key: brushType\n */\nvar coverRenderers = {\n  lineX: getLineRenderer(0),\n  lineY: getLineRenderer(1),\n  rect: {\n    createCover: function (controller, brushOption) {\n      function returnInput(range) {\n        return range;\n      }\n      return createBaseRectCover({\n        toRectRange: returnInput,\n        fromRectRange: returnInput\n      }, controller, brushOption, [['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      return formatRectRange(ends[1][0], ends[1][1], ends[0][0], ends[0][1]);\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      updateBaseRect(controller, cover, localRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  },\n  polygon: {\n    createCover: function (controller, brushOption) {\n      var cover = new graphic.Group();\n      // Do not use graphic.Polygon because graphic.Polyline do not close the\n      // border of the shape when drawing, which is a better experience for user.\n      cover.add(new graphic.Polyline({\n        name: 'main',\n        style: makeStyle(brushOption),\n        silent: true\n      }));\n      return cover;\n    },\n    getCreatingRange: function (localTrack) {\n      return localTrack;\n    },\n    endCreating: function (controller, cover) {\n      cover.remove(cover.childAt(0));\n      // Use graphic.Polygon close the shape.\n      cover.add(new graphic.Polygon({\n        name: 'main',\n        draggable: true,\n        drift: curry(driftPolygon, controller, cover),\n        ondragend: curry(trigger, controller, {\n          isEnd: true\n        })\n      }));\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      cover.childAt(0).setShape({\n        points: clipByPanel(controller, cover, localRange)\n      });\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  }\n};\nfunction getLineRenderer(xyIndex) {\n  return {\n    createCover: function (controller, brushOption) {\n      return createBaseRectCover({\n        toRectRange: function (range) {\n          var rectRange = [range, [0, 100]];\n          xyIndex && rectRange.reverse();\n          return rectRange;\n        },\n        fromRectRange: function (rectRange) {\n          return rectRange[xyIndex];\n        }\n      }, controller, brushOption, [[['w'], ['e']], [['n'], ['s']]][xyIndex]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      var min = mathMin(ends[0][xyIndex], ends[1][xyIndex]);\n      var max = mathMax(ends[0][xyIndex], ends[1][xyIndex]);\n      return [min, max];\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      var otherExtent;\n      // If brushWidth not specified, fit the panel.\n      var panel = getPanelByCover(controller, cover);\n      if (panel !== BRUSH_PANEL_GLOBAL && panel.getLinearBrushOtherExtent) {\n        otherExtent = panel.getLinearBrushOtherExtent(xyIndex);\n      } else {\n        var zr = controller._zr;\n        otherExtent = [0, [zr.getWidth(), zr.getHeight()][1 - xyIndex]];\n      }\n      var rectRange = [localRange, otherExtent];\n      xyIndex && rectRange.reverse();\n      updateBaseRect(controller, cover, rectRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  };\n}\nexport default BrushController;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { onIrrelevantElement } from './cursorHelper.js';\nimport * as graphicUtil from '../../util/graphic.js';\nexport function makeRectPanelClipPath(rect) {\n  rect = normalizeRect(rect);\n  return function (localPoints) {\n    return graphicUtil.clipPointsByRect(localPoints, rect);\n  };\n}\nexport function makeLinearBrushOtherExtent(rect, specifiedXYIndex) {\n  rect = normalizeRect(rect);\n  return function (xyIndex) {\n    var idx = specifiedXYIndex != null ? specifiedXYIndex : xyIndex;\n    var brushWidth = idx ? rect.width : rect.height;\n    var base = idx ? rect.x : rect.y;\n    return [base, base + (brushWidth || 0)];\n  };\n}\nexport function makeRectIsTargetByCursor(rect, api, targetModel) {\n  var boundingRect = normalizeRect(rect);\n  return function (e, localCursorPoint) {\n    return boundingRect.contain(localCursorPoint[0], localCursorPoint[1]) && !onIrrelevantElement(e, api, targetModel);\n  };\n}\n// Consider width/height is negative.\nfunction normalizeRect(rect) {\n  return BoundingRect.create(rect);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as axisPointerModelHelper from './modelHelper.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport * as throttleUtil from '../../util/throttle.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nvar clone = zrUtil.clone;\nvar bind = zrUtil.bind;\n/**\n * Base axis pointer class in 2D.\n */\nvar BaseAxisPointer = /** @class */function () {\n  function BaseAxisPointer() {\n    this._dragging = false;\n    /**\n     * In px, arbitrary value. Do not set too small,\n     * no animation is ok for most cases.\n     */\n    this.animationThreshold = 15;\n  }\n  /**\n   * @implement\n   */\n  BaseAxisPointer.prototype.render = function (axisModel, axisPointerModel, api, forceRender) {\n    var value = axisPointerModel.get('value');\n    var status = axisPointerModel.get('status');\n    // Bind them to `this`, not in closure, otherwise they will not\n    // be replaced when user calling setOption in not merge mode.\n    this._axisModel = axisModel;\n    this._axisPointerModel = axisPointerModel;\n    this._api = api;\n    // Optimize: `render` will be called repeatedly during mouse move.\n    // So it is power consuming if performing `render` each time,\n    // especially on mobile device.\n    if (!forceRender && this._lastValue === value && this._lastStatus === status) {\n      return;\n    }\n    this._lastValue = value;\n    this._lastStatus = status;\n    var group = this._group;\n    var handle = this._handle;\n    if (!status || status === 'hide') {\n      // Do not clear here, for animation better.\n      group && group.hide();\n      handle && handle.hide();\n      return;\n    }\n    group && group.show();\n    handle && handle.show();\n    // Otherwise status is 'show'\n    var elOption = {};\n    this.makeElOption(elOption, value, axisModel, axisPointerModel, api);\n    // Enable change axis pointer type.\n    var graphicKey = elOption.graphicKey;\n    if (graphicKey !== this._lastGraphicKey) {\n      this.clear(api);\n    }\n    this._lastGraphicKey = graphicKey;\n    var moveAnimation = this._moveAnimation = this.determineAnimation(axisModel, axisPointerModel);\n    if (!group) {\n      group = this._group = new graphic.Group();\n      this.createPointerEl(group, elOption, axisModel, axisPointerModel);\n      this.createLabelEl(group, elOption, axisModel, axisPointerModel);\n      api.getZr().add(group);\n    } else {\n      var doUpdateProps = zrUtil.curry(updateProps, axisPointerModel, moveAnimation);\n      this.updatePointerEl(group, elOption, doUpdateProps);\n      this.updateLabelEl(group, elOption, doUpdateProps, axisPointerModel);\n    }\n    updateMandatoryProps(group, axisPointerModel, true);\n    this._renderHandle(value);\n  };\n  /**\n   * @implement\n   */\n  BaseAxisPointer.prototype.remove = function (api) {\n    this.clear(api);\n  };\n  /**\n   * @implement\n   */\n  BaseAxisPointer.prototype.dispose = function (api) {\n    this.clear(api);\n  };\n  /**\n   * @protected\n   */\n  BaseAxisPointer.prototype.determineAnimation = function (axisModel, axisPointerModel) {\n    var animation = axisPointerModel.get('animation');\n    var axis = axisModel.axis;\n    var isCategoryAxis = axis.type === 'category';\n    var useSnap = axisPointerModel.get('snap');\n    // Value axis without snap always do not snap.\n    if (!useSnap && !isCategoryAxis) {\n      return false;\n    }\n    if (animation === 'auto' || animation == null) {\n      var animationThreshold = this.animationThreshold;\n      if (isCategoryAxis && axis.getBandWidth() > animationThreshold) {\n        return true;\n      }\n      // It is important to auto animation when snap used. Consider if there is\n      // a dataZoom, animation will be disabled when too many points exist, while\n      // it will be enabled for better visual effect when little points exist.\n      if (useSnap) {\n        var seriesDataCount = axisPointerModelHelper.getAxisInfo(axisModel).seriesDataCount;\n        var axisExtent = axis.getExtent();\n        // Approximate band width\n        return Math.abs(axisExtent[0] - axisExtent[1]) / seriesDataCount > animationThreshold;\n      }\n      return false;\n    }\n    return animation === true;\n  };\n  /**\n   * add {pointer, label, graphicKey} to elOption\n   * @protected\n   */\n  BaseAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\n    // Should be implemenented by sub-class.\n  };\n  /**\n   * @protected\n   */\n  BaseAxisPointer.prototype.createPointerEl = function (group, elOption, axisModel, axisPointerModel) {\n    var pointerOption = elOption.pointer;\n    if (pointerOption) {\n      var pointerEl = inner(group).pointerEl = new graphic[pointerOption.type](clone(elOption.pointer));\n      group.add(pointerEl);\n    }\n  };\n  /**\n   * @protected\n   */\n  BaseAxisPointer.prototype.createLabelEl = function (group, elOption, axisModel, axisPointerModel) {\n    if (elOption.label) {\n      var labelEl = inner(group).labelEl = new graphic.Text(clone(elOption.label));\n      group.add(labelEl);\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  };\n  /**\n   * @protected\n   */\n  BaseAxisPointer.prototype.updatePointerEl = function (group, elOption, updateProps) {\n    var pointerEl = inner(group).pointerEl;\n    if (pointerEl && elOption.pointer) {\n      pointerEl.setStyle(elOption.pointer.style);\n      updateProps(pointerEl, {\n        shape: elOption.pointer.shape\n      });\n    }\n  };\n  /**\n   * @protected\n   */\n  BaseAxisPointer.prototype.updateLabelEl = function (group, elOption, updateProps, axisPointerModel) {\n    var labelEl = inner(group).labelEl;\n    if (labelEl) {\n      labelEl.setStyle(elOption.label.style);\n      updateProps(labelEl, {\n        // Consider text length change in vertical axis, animation should\n        // be used on shape, otherwise the effect will be weird.\n        // TODOTODO\n        // shape: elOption.label.shape,\n        x: elOption.label.x,\n        y: elOption.label.y\n      });\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  };\n  /**\n   * @private\n   */\n  BaseAxisPointer.prototype._renderHandle = function (value) {\n    if (this._dragging || !this.updateHandleTransform) {\n      return;\n    }\n    var axisPointerModel = this._axisPointerModel;\n    var zr = this._api.getZr();\n    var handle = this._handle;\n    var handleModel = axisPointerModel.getModel('handle');\n    var status = axisPointerModel.get('status');\n    if (!handleModel.get('show') || !status || status === 'hide') {\n      handle && zr.remove(handle);\n      this._handle = null;\n      return;\n    }\n    var isInit;\n    if (!this._handle) {\n      isInit = true;\n      handle = this._handle = graphic.createIcon(handleModel.get('icon'), {\n        cursor: 'move',\n        draggable: true,\n        onmousemove: function (e) {\n          // For mobile device, prevent screen slider on the button.\n          eventTool.stop(e.event);\n        },\n        onmousedown: bind(this._onHandleDragMove, this, 0, 0),\n        drift: bind(this._onHandleDragMove, this),\n        ondragend: bind(this._onHandleDragEnd, this)\n      });\n      zr.add(handle);\n    }\n    updateMandatoryProps(handle, axisPointerModel, false);\n    // update style\n    handle.setStyle(handleModel.getItemStyle(null, ['color', 'borderColor', 'borderWidth', 'opacity', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY']));\n    // update position\n    var handleSize = handleModel.get('size');\n    if (!zrUtil.isArray(handleSize)) {\n      handleSize = [handleSize, handleSize];\n    }\n    handle.scaleX = handleSize[0] / 2;\n    handle.scaleY = handleSize[1] / 2;\n    throttleUtil.createOrUpdate(this, '_doDispatchAxisPointer', handleModel.get('throttle') || 0, 'fixRate');\n    this._moveHandleToValue(value, isInit);\n  };\n  BaseAxisPointer.prototype._moveHandleToValue = function (value, isInit) {\n    updateProps(this._axisPointerModel, !isInit && this._moveAnimation, this._handle, getHandleTransProps(this.getHandleTransform(value, this._axisModel, this._axisPointerModel)));\n  };\n  BaseAxisPointer.prototype._onHandleDragMove = function (dx, dy) {\n    var handle = this._handle;\n    if (!handle) {\n      return;\n    }\n    this._dragging = true;\n    // Persistent for throttle.\n    var trans = this.updateHandleTransform(getHandleTransProps(handle), [dx, dy], this._axisModel, this._axisPointerModel);\n    this._payloadInfo = trans;\n    handle.stopAnimation();\n    handle.attr(getHandleTransProps(trans));\n    inner(handle).lastProp = null;\n    this._doDispatchAxisPointer();\n  };\n  /**\n   * Throttled method.\n   */\n  BaseAxisPointer.prototype._doDispatchAxisPointer = function () {\n    var handle = this._handle;\n    if (!handle) {\n      return;\n    }\n    var payloadInfo = this._payloadInfo;\n    var axisModel = this._axisModel;\n    this._api.dispatchAction({\n      type: 'updateAxisPointer',\n      x: payloadInfo.cursorPoint[0],\n      y: payloadInfo.cursorPoint[1],\n      tooltipOption: payloadInfo.tooltipOption,\n      axesInfo: [{\n        axisDim: axisModel.axis.dim,\n        axisIndex: axisModel.componentIndex\n      }]\n    });\n  };\n  BaseAxisPointer.prototype._onHandleDragEnd = function () {\n    this._dragging = false;\n    var handle = this._handle;\n    if (!handle) {\n      return;\n    }\n    var value = this._axisPointerModel.get('value');\n    // Consider snap or categroy axis, handle may be not consistent with\n    // axisPointer. So move handle to align the exact value position when\n    // drag ended.\n    this._moveHandleToValue(value);\n    // For the effect: tooltip will be shown when finger holding on handle\n    // button, and will be hidden after finger left handle button.\n    this._api.dispatchAction({\n      type: 'hideTip'\n    });\n  };\n  /**\n   * @private\n   */\n  BaseAxisPointer.prototype.clear = function (api) {\n    this._lastValue = null;\n    this._lastStatus = null;\n    var zr = api.getZr();\n    var group = this._group;\n    var handle = this._handle;\n    if (zr && group) {\n      this._lastGraphicKey = null;\n      group && zr.remove(group);\n      handle && zr.remove(handle);\n      this._group = null;\n      this._handle = null;\n      this._payloadInfo = null;\n    }\n    throttleUtil.clear(this, '_doDispatchAxisPointer');\n  };\n  /**\n   * @protected\n   */\n  BaseAxisPointer.prototype.doClear = function () {\n    // Implemented by sub-class if necessary.\n  };\n  BaseAxisPointer.prototype.buildLabel = function (xy, wh, xDimIndex) {\n    xDimIndex = xDimIndex || 0;\n    return {\n      x: xy[xDimIndex],\n      y: xy[1 - xDimIndex],\n      width: wh[xDimIndex],\n      height: wh[1 - xDimIndex]\n    };\n  };\n  return BaseAxisPointer;\n}();\nfunction updateProps(animationModel, moveAnimation, el, props) {\n  // Animation optimize.\n  if (!propsEqual(inner(el).lastProp, props)) {\n    inner(el).lastProp = props;\n    moveAnimation ? graphic.updateProps(el, props, animationModel) : (el.stopAnimation(), el.attr(props));\n  }\n}\nfunction propsEqual(lastProps, newProps) {\n  if (zrUtil.isObject(lastProps) && zrUtil.isObject(newProps)) {\n    var equals_1 = true;\n    zrUtil.each(newProps, function (item, key) {\n      equals_1 = equals_1 && propsEqual(lastProps[key], item);\n    });\n    return !!equals_1;\n  } else {\n    return lastProps === newProps;\n  }\n}\nfunction updateLabelShowHide(labelEl, axisPointerModel) {\n  labelEl[axisPointerModel.get(['label', 'show']) ? 'show' : 'hide']();\n}\nfunction getHandleTransProps(trans) {\n  return {\n    x: trans.x || 0,\n    y: trans.y || 0,\n    rotation: trans.rotation || 0\n  };\n}\nfunction updateMandatoryProps(group, axisPointerModel, silent) {\n  var z = axisPointerModel.get('z');\n  var zlevel = axisPointerModel.get('zlevel');\n  group && group.traverse(function (el) {\n    if (el.type !== 'group') {\n      z != null && (el.z = z);\n      zlevel != null && (el.zlevel = zlevel);\n      el.silent = silent;\n    }\n  });\n}\nexport default BaseAxisPointer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as textContain from 'zrender/lib/contain/text.js';\nimport * as formatUtil from '../../util/format.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport * as axisHelper from '../../coord/axisHelper.js';\nimport AxisBuilder from '../axis/AxisBuilder.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nexport function buildElStyle(axisPointerModel) {\n  var axisPointerType = axisPointerModel.get('type');\n  var styleModel = axisPointerModel.getModel(axisPointerType + 'Style');\n  var style;\n  if (axisPointerType === 'line') {\n    style = styleModel.getLineStyle();\n    style.fill = null;\n  } else if (axisPointerType === 'shadow') {\n    style = styleModel.getAreaStyle();\n    style.stroke = null;\n  }\n  return style;\n}\n/**\n * @param {Function} labelPos {align, verticalAlign, position}\n */\nexport function buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos) {\n  var value = axisPointerModel.get('value');\n  var text = getValueLabel(value, axisModel.axis, axisModel.ecModel, axisPointerModel.get('seriesDataIndices'), {\n    precision: axisPointerModel.get(['label', 'precision']),\n    formatter: axisPointerModel.get(['label', 'formatter'])\n  });\n  var labelModel = axisPointerModel.getModel('label');\n  var paddings = formatUtil.normalizeCssArray(labelModel.get('padding') || 0);\n  var font = labelModel.getFont();\n  var textRect = textContain.getBoundingRect(text, font);\n  var position = labelPos.position;\n  var width = textRect.width + paddings[1] + paddings[3];\n  var height = textRect.height + paddings[0] + paddings[2];\n  // Adjust by align.\n  var align = labelPos.align;\n  align === 'right' && (position[0] -= width);\n  align === 'center' && (position[0] -= width / 2);\n  var verticalAlign = labelPos.verticalAlign;\n  verticalAlign === 'bottom' && (position[1] -= height);\n  verticalAlign === 'middle' && (position[1] -= height / 2);\n  // Not overflow ec container\n  confineInContainer(position, width, height, api);\n  var bgColor = labelModel.get('backgroundColor');\n  if (!bgColor || bgColor === 'auto') {\n    bgColor = axisModel.get(['axisLine', 'lineStyle', 'color']);\n  }\n  elOption.label = {\n    // shape: {x: 0, y: 0, width: width, height: height, r: labelModel.get('borderRadius')},\n    x: position[0],\n    y: position[1],\n    style: createTextStyle(labelModel, {\n      text: text,\n      font: font,\n      fill: labelModel.getTextColor(),\n      padding: paddings,\n      backgroundColor: bgColor\n    }),\n    // Label should be over axisPointer.\n    z2: 10\n  };\n}\n// Do not overflow ec container\nfunction confineInContainer(position, width, height, api) {\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  position[0] = Math.min(position[0] + width, viewWidth) - width;\n  position[1] = Math.min(position[1] + height, viewHeight) - height;\n  position[0] = Math.max(position[0], 0);\n  position[1] = Math.max(position[1], 0);\n}\nexport function getValueLabel(value, axis, ecModel, seriesDataIndices, opt) {\n  value = axis.scale.parse(value);\n  var text = axis.scale.getLabel({\n    value: value\n  }, {\n    // If `precision` is set, width can be fixed (like '12.00500'), which\n    // helps to debounce when when moving label.\n    precision: opt.precision\n  });\n  var formatter = opt.formatter;\n  if (formatter) {\n    var params_1 = {\n      value: axisHelper.getAxisRawValue(axis, {\n        value: value\n      }),\n      axisDimension: axis.dim,\n      axisIndex: axis.index,\n      seriesData: []\n    };\n    zrUtil.each(seriesDataIndices, function (idxItem) {\n      var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n      var dataIndex = idxItem.dataIndexInside;\n      var dataParams = series && series.getDataParams(dataIndex);\n      dataParams && params_1.seriesData.push(dataParams);\n    });\n    if (zrUtil.isString(formatter)) {\n      text = formatter.replace('{value}', text);\n    } else if (zrUtil.isFunction(formatter)) {\n      text = formatter(params_1);\n    }\n  }\n  return text;\n}\nexport function getTransformedPosition(axis, value, layoutInfo) {\n  var transform = matrix.create();\n  matrix.rotate(transform, transform, layoutInfo.rotation);\n  matrix.translate(transform, transform, layoutInfo.position);\n  return graphic.applyTransform([axis.dataToCoord(value), (layoutInfo.labelOffset || 0) + (layoutInfo.labelDirection || 1) * (layoutInfo.labelMargin || 0)], transform);\n}\nexport function buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api) {\n  var textLayout = AxisBuilder.innerTextLayout(layoutInfo.rotation, 0, layoutInfo.labelDirection);\n  layoutInfo.labelMargin = axisPointerModel.get(['label', 'margin']);\n  buildLabelElOption(elOption, axisModel, axisPointerModel, api, {\n    position: getTransformedPosition(axisModel.axis, value, layoutInfo),\n    align: textLayout.textAlign,\n    verticalAlign: textLayout.textVerticalAlign\n  });\n}\nexport function makeLineShape(p1, p2, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x1: p1[xDimIndex],\n    y1: p1[1 - xDimIndex],\n    x2: p2[xDimIndex],\n    y2: p2[1 - xDimIndex]\n  };\n}\nexport function makeRectShape(xy, wh, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x: xy[xDimIndex],\n    y: xy[1 - xDimIndex],\n    width: wh[xDimIndex],\n    height: wh[1 - xDimIndex]\n  };\n}\nexport function makeSectorShape(cx, cy, r0, r, startAngle, endAngle) {\n  return {\n    cx: cx,\n    cy: cy,\n    r0: r0,\n    r: r,\n    startAngle: startAngle,\n    endAngle: endAngle,\n    clockwise: true\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BaseAxisPointer from './BaseAxisPointer.js';\nimport * as viewHelper from './viewHelper.js';\nimport * as cartesianAxisHelper from '../../coord/cartesian/cartesianAxisHelper.js';\nvar CartesianAxisPointer = /** @class */function (_super) {\n  __extends(CartesianAxisPointer, _super);\n  function CartesianAxisPointer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * @override\n   */\n  CartesianAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisPointerType = axisPointerModel.get('type');\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var pixelValue = axis.toGlobalCoord(axis.dataToCoord(value, true));\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n    var layoutInfo = cartesianAxisHelper.layout(grid.getRect(), axisModel);\n    viewHelper.buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n  };\n  /**\n   * @override\n   */\n  CartesianAxisPointer.prototype.getHandleTransform = function (value, axisModel, axisPointerModel) {\n    var layoutInfo = cartesianAxisHelper.layout(axisModel.axis.grid.getRect(), axisModel, {\n      labelInside: false\n    });\n    layoutInfo.labelMargin = axisPointerModel.get(['handle', 'margin']);\n    var pos = viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo);\n    return {\n      x: pos[0],\n      y: pos[1],\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n    };\n  };\n  /**\n   * @override\n   */\n  CartesianAxisPointer.prototype.updateHandleTransform = function (transform, delta, axisModel, axisPointerModel) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisExtent = axis.getGlobalExtent(true);\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var dimIndex = axis.dim === 'x' ? 0 : 1;\n    var currPosition = [transform.x, transform.y];\n    currPosition[dimIndex] += delta[dimIndex];\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\n    cursorPoint[dimIndex] = currPosition[dimIndex];\n    // Make tooltip do not overlap axisPointer and in the middle of the grid.\n    var tooltipOptions = [{\n      verticalAlign: 'middle'\n    }, {\n      align: 'center'\n    }];\n    return {\n      x: currPosition[0],\n      y: currPosition[1],\n      rotation: transform.rotation,\n      cursorPoint: cursorPoint,\n      tooltipOption: tooltipOptions[dimIndex]\n    };\n  };\n  return CartesianAxisPointer;\n}(BaseAxisPointer);\nfunction getCartesian(grid, axis) {\n  var opt = {};\n  opt[axis.dim + 'AxisIndex'] = axis.index;\n  return grid.getCartesian(opt);\n}\nvar pointerShapeBuilder = {\n  line: function (axis, pixelValue, otherExtent) {\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getAxisDimIndex(axis));\n    return {\n      type: 'Line',\n      subPixelOptimize: true,\n      shape: targetShape\n    };\n  },\n  shadow: function (axis, pixelValue, otherExtent) {\n    var bandWidth = Math.max(1, axis.getBandWidth());\n    var span = otherExtent[1] - otherExtent[0];\n    return {\n      type: 'Rect',\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getAxisDimIndex(axis))\n    };\n  }\n};\nfunction getAxisDimIndex(axis) {\n  return axis.dim === 'x' ? 0 : 1;\n}\nexport default CartesianAxisPointer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nimport tokens from '../../visual/tokens.js';\nvar AxisPointerModel = /** @class */function (_super) {\n  __extends(AxisPointerModel, _super);\n  function AxisPointerModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = AxisPointerModel.type;\n    return _this;\n  }\n  AxisPointerModel.type = 'axisPointer';\n  AxisPointerModel.defaultOption = {\n    // 'auto' means that show when triggered by tooltip or handle.\n    show: 'auto',\n    // zlevel: 0,\n    z: 50,\n    type: 'line',\n    // axispointer triggered by tootip determine snap automatically,\n    // see `modelHelper`.\n    snap: false,\n    triggerTooltip: true,\n    triggerEmphasis: true,\n    value: null,\n    status: null,\n    link: [],\n    // Do not set 'auto' here, otherwise global animation: false\n    // will not effect at this axispointer.\n    animation: null,\n    animationDurationUpdate: 200,\n    lineStyle: {\n      color: tokens.color.border,\n      width: 1,\n      type: 'dashed'\n    },\n    shadowStyle: {\n      color: tokens.color.shadowTint\n    },\n    label: {\n      show: true,\n      formatter: null,\n      precision: 'auto',\n      margin: 3,\n      color: tokens.color.neutral00,\n      padding: [5, 7, 5, 7],\n      backgroundColor: tokens.color.accent60,\n      borderColor: null,\n      borderWidth: 0,\n      borderRadius: 3\n    },\n    handle: {\n      show: false,\n      // eslint-disable-next-line\n      icon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',\n      size: 45,\n      // handle margin is from symbol center to axis, which is stable when circular move.\n      margin: 50,\n      // color: '#1b8bbd'\n      // color: '#2f4554'\n      color: tokens.color.accent40,\n      // For mobile performance\n      throttle: 40\n    }\n  };\n  return AxisPointerModel;\n}(ComponentModel);\nexport default AxisPointerModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nvar each = zrUtil.each;\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n * @param {Function} handler\n *      param: {string} currTrigger\n *      param: {Array.<number>} point\n */\nexport function register(key, api, handler) {\n  if (env.node) {\n    return;\n  }\n  var zr = api.getZr();\n  inner(zr).records || (inner(zr).records = {});\n  initGlobalListeners(zr, api);\n  var record = inner(zr).records[key] || (inner(zr).records[key] = {});\n  record.handler = handler;\n}\nfunction initGlobalListeners(zr, api) {\n  if (inner(zr).initialized) {\n    return;\n  }\n  inner(zr).initialized = true;\n  useHandler('click', zrUtil.curry(doEnter, 'click'));\n  useHandler('mousemove', zrUtil.curry(doEnter, 'mousemove'));\n  // useHandler('mouseout', onLeave);\n  useHandler('globalout', onLeave);\n  function useHandler(eventType, cb) {\n    zr.on(eventType, function (e) {\n      var dis = makeDispatchAction(api);\n      each(inner(zr).records, function (record) {\n        record && cb(record, e, dis.dispatchAction);\n      });\n      dispatchTooltipFinally(dis.pendings, api);\n    });\n  }\n}\nfunction dispatchTooltipFinally(pendings, api) {\n  var showLen = pendings.showTip.length;\n  var hideLen = pendings.hideTip.length;\n  var actuallyPayload;\n  if (showLen) {\n    actuallyPayload = pendings.showTip[showLen - 1];\n  } else if (hideLen) {\n    actuallyPayload = pendings.hideTip[hideLen - 1];\n  }\n  if (actuallyPayload) {\n    actuallyPayload.dispatchAction = null;\n    api.dispatchAction(actuallyPayload);\n  }\n}\nfunction onLeave(record, e, dispatchAction) {\n  record.handler('leave', null, dispatchAction);\n}\nfunction doEnter(currTrigger, record, e, dispatchAction) {\n  record.handler(currTrigger, e, dispatchAction);\n}\nfunction makeDispatchAction(api) {\n  var pendings = {\n    showTip: [],\n    hideTip: []\n  };\n  // FIXME\n  // better approach?\n  // 'showTip' and 'hideTip' can be triggered by axisPointer and tooltip,\n  // which may be conflict, (axisPointer call showTip but tooltip call hideTip);\n  // So we have to add \"final stage\" to merge those dispatched actions.\n  var dispatchAction = function (payload) {\n    var pendingList = pendings[payload.type];\n    if (pendingList) {\n      pendingList.push(payload);\n    } else {\n      payload.dispatchAction = dispatchAction;\n      api.dispatchAction(payload);\n    }\n  };\n  return {\n    dispatchAction: dispatchAction,\n    pendings: pendings\n  };\n}\nexport function unregister(key, api) {\n  if (env.node) {\n    return;\n  }\n  var zr = api.getZr();\n  var record = (inner(zr).records || {})[key];\n  if (record) {\n    inner(zr).records[key] = null;\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as globalListener from './globalListener.js';\nimport ComponentView from '../../view/Component.js';\nvar AxisPointerView = /** @class */function (_super) {\n  __extends(AxisPointerView, _super);\n  function AxisPointerView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = AxisPointerView.type;\n    return _this;\n  }\n  AxisPointerView.prototype.render = function (globalAxisPointerModel, ecModel, api) {\n    var globalTooltipModel = ecModel.getComponent('tooltip');\n    var triggerOn = globalAxisPointerModel.get('triggerOn') || globalTooltipModel && globalTooltipModel.get('triggerOn') || 'mousemove|click';\n    // Register global listener in AxisPointerView to enable\n    // AxisPointerView to be independent to Tooltip.\n    globalListener.register('axisPointer', api, function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none' && (currTrigger === 'leave' || triggerOn.indexOf(currTrigger) >= 0)) {\n        dispatchAction({\n          type: 'updateAxisPointer',\n          currTrigger: currTrigger,\n          x: e && e.offsetX,\n          y: e && e.offsetY\n        });\n      }\n    });\n  };\n  AxisPointerView.prototype.remove = function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n  };\n  AxisPointerView.prototype.dispose = function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n  };\n  AxisPointerView.type = 'axisPointer';\n  return AxisPointerView;\n}(ComponentView);\nexport default AxisPointerView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../../util/model.js';\n/**\n * @param finder contains {seriesIndex, dataIndex, dataIndexInside}\n * @param ecModel\n * @return  {point: [x, y], el: ...} point Will not be null.\n */\nexport default function findPointFromSeries(finder, ecModel) {\n  var point = [];\n  var seriesIndex = finder.seriesIndex;\n  var seriesModel;\n  if (seriesIndex == null || !(seriesModel = ecModel.getSeriesByIndex(seriesIndex))) {\n    return {\n      point: []\n    };\n  }\n  var data = seriesModel.getData();\n  var dataIndex = modelUtil.queryDataIndex(data, finder);\n  if (dataIndex == null || dataIndex < 0 || zrUtil.isArray(dataIndex)) {\n    return {\n      point: []\n    };\n  }\n  var el = data.getItemGraphicEl(dataIndex);\n  var coordSys = seriesModel.coordinateSystem;\n  if (seriesModel.getTooltipPosition) {\n    point = seriesModel.getTooltipPosition(dataIndex) || [];\n  } else if (coordSys && coordSys.dataToPoint) {\n    if (finder.isStacked) {\n      var baseAxis = coordSys.getBaseAxis();\n      var valueAxis = coordSys.getOtherAxis(baseAxis);\n      var valueAxisDim = valueAxis.dim;\n      var baseAxisDim = baseAxis.dim;\n      var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n      var baseDim = data.mapDimension(baseAxisDim);\n      var stackedData = [];\n      stackedData[baseDataOffset] = data.get(baseDim, dataIndex);\n      stackedData[1 - baseDataOffset] = data.get(data.getCalculationInfo('stackResultDimension'), dataIndex);\n      point = coordSys.dataToPoint(stackedData) || [];\n    } else {\n      point = coordSys.dataToPoint(data.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\n        return data.mapDimension(dim);\n      }), dataIndex)) || [];\n    }\n  } else if (el) {\n    // Use graphic bounding rect\n    var rect = el.getBoundingRect().clone();\n    rect.applyTransform(el.transform);\n    point = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n  }\n  return {\n    point: point,\n    el: el\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner } from '../../util/model.js';\nimport * as modelHelper from './modelHelper.js';\nimport findPointFromSeries from './findPointFromSeries.js';\nimport { each, curry, bind, extend } from 'zrender/lib/core/util.js';\nvar inner = makeInner();\n/**\n * Basic logic: check all axis, if they do not demand show/highlight,\n * then hide/downplay them.\n *\n * @return content of event obj for echarts.connect.\n */\nexport default function axisTrigger(payload, ecModel, api) {\n  var currTrigger = payload.currTrigger;\n  var point = [payload.x, payload.y];\n  var finder = payload;\n  var dispatchAction = payload.dispatchAction || bind(api.dispatchAction, api);\n  var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n  // Pending\n  // See #6121. But we are not able to reproduce it yet.\n  if (!coordSysAxesInfo) {\n    return;\n  }\n  if (illegalPoint(point)) {\n    // Used in the default behavior of `connection`: use the sample seriesIndex\n    // and dataIndex. And also used in the tooltipView trigger.\n    point = findPointFromSeries({\n      seriesIndex: finder.seriesIndex,\n      // Do not use dataIndexInside from other ec instance.\n      // FIXME: auto detect it?\n      dataIndex: finder.dataIndex\n    }, ecModel).point;\n  }\n  var isIllegalPoint = illegalPoint(point);\n  // Axis and value can be specified when calling dispatchAction({type: 'updateAxisPointer'}).\n  // Notice: In this case, it is difficult to get the `point` (which is necessary to show\n  // tooltip, so if point is not given, we just use the point found by sample seriesIndex\n  // and dataIndex.\n  var inputAxesInfo = finder.axesInfo;\n  var axesInfo = coordSysAxesInfo.axesInfo;\n  var shouldHide = currTrigger === 'leave' || illegalPoint(point);\n  var outputPayload = {};\n  var showValueMap = {};\n  var dataByCoordSys = {\n    list: [],\n    map: {}\n  };\n  var updaters = {\n    showPointer: curry(showPointer, showValueMap),\n    showTooltip: curry(showTooltip, dataByCoordSys)\n  };\n  // Process for triggered axes.\n  each(coordSysAxesInfo.coordSysMap, function (coordSys, coordSysKey) {\n    // If a point given, it must be contained by the coordinate system.\n    var coordSysContainsPoint = isIllegalPoint || coordSys.containPoint(point);\n    each(coordSysAxesInfo.coordSysAxesInfo[coordSysKey], function (axisInfo, key) {\n      var axis = axisInfo.axis;\n      var inputAxisInfo = findInputAxisInfo(inputAxesInfo, axisInfo);\n      // If no inputAxesInfo, no axis is restricted.\n      if (!shouldHide && coordSysContainsPoint && (!inputAxesInfo || inputAxisInfo)) {\n        var val = inputAxisInfo && inputAxisInfo.value;\n        if (val == null && !isIllegalPoint) {\n          val = axis.pointToData(point);\n        }\n        val != null && processOnAxis(axisInfo, val, updaters, false, outputPayload);\n      }\n    });\n  });\n  // Process for linked axes.\n  var linkTriggers = {};\n  each(axesInfo, function (tarAxisInfo, tarKey) {\n    var linkGroup = tarAxisInfo.linkGroup;\n    // If axis has been triggered in the previous stage, it should not be triggered by link.\n    if (linkGroup && !showValueMap[tarKey]) {\n      each(linkGroup.axesInfo, function (srcAxisInfo, srcKey) {\n        var srcValItem = showValueMap[srcKey];\n        // If srcValItem exist, source axis is triggered, so link to target axis.\n        if (srcAxisInfo !== tarAxisInfo && srcValItem) {\n          var val = srcValItem.value;\n          linkGroup.mapper && (val = tarAxisInfo.axis.scale.parse(linkGroup.mapper(val, makeMapperParam(srcAxisInfo), makeMapperParam(tarAxisInfo))));\n          linkTriggers[tarAxisInfo.key] = val;\n        }\n      });\n    }\n  });\n  each(linkTriggers, function (val, tarKey) {\n    processOnAxis(axesInfo[tarKey], val, updaters, true, outputPayload);\n  });\n  updateModelActually(showValueMap, axesInfo, outputPayload);\n  dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction);\n  dispatchHighDownActually(axesInfo, dispatchAction, api);\n  return outputPayload;\n}\nfunction processOnAxis(axisInfo, newValue, updaters, noSnap, outputFinder) {\n  var axis = axisInfo.axis;\n  if (axis.scale.isBlank() || !axis.containData(newValue)) {\n    return;\n  }\n  if (!axisInfo.involveSeries) {\n    updaters.showPointer(axisInfo, newValue);\n    return;\n  }\n  // Heavy calculation. So put it after axis.containData checking.\n  var payloadInfo = buildPayloadsBySeries(newValue, axisInfo);\n  var payloadBatch = payloadInfo.payloadBatch;\n  var snapToValue = payloadInfo.snapToValue;\n  // Fill content of event obj for echarts.connect.\n  // By default use the first involved series data as a sample to connect.\n  if (payloadBatch[0] && outputFinder.seriesIndex == null) {\n    extend(outputFinder, payloadBatch[0]);\n  }\n  // If no linkSource input, this process is for collecting link\n  // target, where snap should not be accepted.\n  if (!noSnap && axisInfo.snap) {\n    if (axis.containData(snapToValue) && snapToValue != null) {\n      newValue = snapToValue;\n    }\n  }\n  updaters.showPointer(axisInfo, newValue, payloadBatch);\n  // Tooltip should always be snapToValue, otherwise there will be\n  // incorrect \"axis value ~ series value\" mapping displayed in tooltip.\n  updaters.showTooltip(axisInfo, payloadInfo, snapToValue);\n}\nfunction buildPayloadsBySeries(value, axisInfo) {\n  var axis = axisInfo.axis;\n  var dim = axis.dim;\n  var snapToValue = value;\n  var payloadBatch = [];\n  var minDist = Number.MAX_VALUE;\n  var minDiff = -1;\n  each(axisInfo.seriesModels, function (series, idx) {\n    var dataDim = series.getData().mapDimensionsAll(dim);\n    var seriesNestestValue;\n    var dataIndices;\n    if (series.getAxisTooltipData) {\n      var result = series.getAxisTooltipData(dataDim, value, axis);\n      dataIndices = result.dataIndices;\n      seriesNestestValue = result.nestestValue;\n    } else {\n      dataIndices = series.indicesOfNearest(dim, dataDim[0], value,\n      // Add a threshold to avoid find the wrong dataIndex\n      // when data length is not same.\n      // false,\n      axis.type === 'category' ? 0.5 : null);\n      if (!dataIndices.length) {\n        return;\n      }\n      seriesNestestValue = series.getData().get(dataDim[0], dataIndices[0]);\n    }\n    if (seriesNestestValue == null || !isFinite(seriesNestestValue)) {\n      return;\n    }\n    var diff = value - seriesNestestValue;\n    var dist = Math.abs(diff);\n    // Consider category case\n    if (dist <= minDist) {\n      if (dist < minDist || diff >= 0 && minDiff < 0) {\n        minDist = dist;\n        minDiff = diff;\n        snapToValue = seriesNestestValue;\n        payloadBatch.length = 0;\n      }\n      each(dataIndices, function (dataIndex) {\n        payloadBatch.push({\n          seriesIndex: series.seriesIndex,\n          dataIndexInside: dataIndex,\n          dataIndex: series.getData().getRawIndex(dataIndex)\n        });\n      });\n    }\n  });\n  return {\n    payloadBatch: payloadBatch,\n    snapToValue: snapToValue\n  };\n}\nfunction showPointer(showValueMap, axisInfo, value, payloadBatch) {\n  showValueMap[axisInfo.key] = {\n    value: value,\n    payloadBatch: payloadBatch\n  };\n}\nfunction showTooltip(dataByCoordSys, axisInfo, payloadInfo, value) {\n  var payloadBatch = payloadInfo.payloadBatch;\n  var axis = axisInfo.axis;\n  var axisModel = axis.model;\n  var axisPointerModel = axisInfo.axisPointerModel;\n  // If no data, do not create anything in dataByCoordSys,\n  // whose length will be used to judge whether dispatch action.\n  if (!axisInfo.triggerTooltip || !payloadBatch.length) {\n    return;\n  }\n  var coordSysModel = axisInfo.coordSys.model;\n  var coordSysKey = modelHelper.makeKey(coordSysModel);\n  var coordSysItem = dataByCoordSys.map[coordSysKey];\n  if (!coordSysItem) {\n    coordSysItem = dataByCoordSys.map[coordSysKey] = {\n      coordSysId: coordSysModel.id,\n      coordSysIndex: coordSysModel.componentIndex,\n      coordSysType: coordSysModel.type,\n      coordSysMainType: coordSysModel.mainType,\n      dataByAxis: []\n    };\n    dataByCoordSys.list.push(coordSysItem);\n  }\n  coordSysItem.dataByAxis.push({\n    axisDim: axis.dim,\n    axisIndex: axisModel.componentIndex,\n    axisType: axisModel.type,\n    axisId: axisModel.id,\n    value: value,\n    // Caustion: viewHelper.getValueLabel is actually on \"view stage\", which\n    // depends that all models have been updated. So it should not be performed\n    // here. Considering axisPointerModel used here is volatile, which is hard\n    // to be retrieve in TooltipView, we prepare parameters here.\n    valueLabelOpt: {\n      precision: axisPointerModel.get(['label', 'precision']),\n      formatter: axisPointerModel.get(['label', 'formatter'])\n    },\n    seriesDataIndices: payloadBatch.slice()\n  });\n}\nfunction updateModelActually(showValueMap, axesInfo, outputPayload) {\n  var outputAxesInfo = outputPayload.axesInfo = [];\n  // Basic logic: If no 'show' required, 'hide' this axisPointer.\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    var valItem = showValueMap[key];\n    if (valItem) {\n      !axisInfo.useHandle && (option.status = 'show');\n      option.value = valItem.value;\n      // For label formatter param and highlight.\n      option.seriesDataIndices = (valItem.payloadBatch || []).slice();\n    }\n    // When always show (e.g., handle used), remain\n    // original value and status.\n    else {\n      // If hide, value still need to be set, consider\n      // click legend to toggle axis blank.\n      !axisInfo.useHandle && (option.status = 'hide');\n    }\n    // If status is 'hide', should be no info in payload.\n    option.status === 'show' && outputAxesInfo.push({\n      axisDim: axisInfo.axis.dim,\n      axisIndex: axisInfo.axis.model.componentIndex,\n      value: option.value\n    });\n  });\n}\nfunction dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction) {\n  // Basic logic: If no showTip required, hideTip will be dispatched.\n  if (illegalPoint(point) || !dataByCoordSys.list.length) {\n    dispatchAction({\n      type: 'hideTip'\n    });\n    return;\n  }\n  // In most case only one axis (or event one series is used). It is\n  // convenient to fetch payload.seriesIndex and payload.dataIndex\n  // directly. So put the first seriesIndex and dataIndex of the first\n  // axis on the payload.\n  var sampleItem = ((dataByCoordSys.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {};\n  dispatchAction({\n    type: 'showTip',\n    escapeConnect: true,\n    x: point[0],\n    y: point[1],\n    tooltipOption: payload.tooltipOption,\n    position: payload.position,\n    dataIndexInside: sampleItem.dataIndexInside,\n    dataIndex: sampleItem.dataIndex,\n    seriesIndex: sampleItem.seriesIndex,\n    dataByCoordSys: dataByCoordSys.list\n  });\n}\nfunction dispatchHighDownActually(axesInfo, dispatchAction, api) {\n  // FIXME\n  // highlight status modification should be a stage of main process?\n  // (Consider confilct (e.g., legend and axisPointer) and setOption)\n  var zr = api.getZr();\n  var highDownKey = 'axisPointerLastHighlights';\n  var lastHighlights = inner(zr)[highDownKey] || {};\n  var newHighlights = inner(zr)[highDownKey] = {};\n  // Update highlight/downplay status according to axisPointer model.\n  // Build hash map and remove duplicate incidentally.\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    option.status === 'show' && axisInfo.triggerEmphasis && each(option.seriesDataIndices, function (batchItem) {\n      var key = batchItem.seriesIndex + ' | ' + batchItem.dataIndex;\n      newHighlights[key] = batchItem;\n    });\n  });\n  // Diff.\n  var toHighlight = [];\n  var toDownplay = [];\n  each(lastHighlights, function (batchItem, key) {\n    !newHighlights[key] && toDownplay.push(batchItem);\n  });\n  each(newHighlights, function (batchItem, key) {\n    !lastHighlights[key] && toHighlight.push(batchItem);\n  });\n  toDownplay.length && api.dispatchAction({\n    type: 'downplay',\n    escapeConnect: true,\n    // Not blur others when highlight in axisPointer.\n    notBlur: true,\n    batch: toDownplay\n  });\n  toHighlight.length && api.dispatchAction({\n    type: 'highlight',\n    escapeConnect: true,\n    // Not blur others when highlight in axisPointer.\n    notBlur: true,\n    batch: toHighlight\n  });\n}\nfunction findInputAxisInfo(inputAxesInfo, axisInfo) {\n  for (var i = 0; i < (inputAxesInfo || []).length; i++) {\n    var inputAxisInfo = inputAxesInfo[i];\n    if (axisInfo.axis.dim === inputAxisInfo.axisDim && axisInfo.axis.model.componentIndex === inputAxisInfo.axisIndex) {\n      return inputAxisInfo;\n    }\n  }\n}\nfunction makeMapperParam(axisInfo) {\n  var axisModel = axisInfo.axis.model;\n  var item = {};\n  var dim = item.axisDim = axisInfo.axis.dim;\n  item.axisIndex = item[dim + 'AxisIndex'] = axisModel.componentIndex;\n  item.axisName = item[dim + 'AxisName'] = axisModel.name;\n  item.axisId = item[dim + 'AxisId'] = axisModel.id;\n  return item;\n}\nfunction illegalPoint(point) {\n  return !point || point[0] == null || isNaN(point[0]) || point[1] == null || isNaN(point[1]);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport AxisView from '../axis/AxisView.js';\nimport CartesianAxisPointer from './CartesianAxisPointer.js';\nimport AxisPointerModel from './AxisPointerModel.js';\nimport AxisPointerView from './AxisPointerView.js';\nimport { isArray } from 'zrender/lib/core/util.js';\nimport { collect } from './modelHelper.js';\nimport axisTrigger from './axisTrigger.js';\nexport function install(registers) {\n  // CartesianAxisPointer is not supposed to be required here. But consider\n  // echarts.simple.js and online build tooltip, which only require gridSimple,\n  // CartesianAxisPointer should be able to required somewhere.\n  AxisView.registerAxisPointerClass('CartesianAxisPointer', CartesianAxisPointer);\n  registers.registerComponentModel(AxisPointerModel);\n  registers.registerComponentView(AxisPointerView);\n  registers.registerPreprocessor(function (option) {\n    // Always has a global axisPointerModel for default setting.\n    if (option) {\n      (!option.axisPointer || option.axisPointer.length === 0) && (option.axisPointer = {});\n      var link = option.axisPointer.link;\n      // Normalize to array to avoid object mergin. But if link\n      // is not set, remain null/undefined, otherwise it will\n      // override existent link setting.\n      if (link && !isArray(link)) {\n        option.axisPointer.link = [link];\n      }\n    }\n  });\n  // This process should proformed after coordinate systems created\n  // and series data processed. So put it on statistic processing stage.\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, function (ecModel, api) {\n    // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n    // allAxesInfo should be updated when setOption performed.\n    ecModel.getComponent('axisPointer').coordSysAxesInfo = collect(ecModel, api);\n  });\n  // Broadcast to all views.\n  registers.registerAction({\n    type: 'updateAxisPointer',\n    event: 'updateAxisPointer',\n    update: ':updateAxisPointer'\n  }, axisTrigger);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { install as installSimple } from './installSimple.js';\nimport { install as installAxisPointer } from '../axisPointer/install.js';\nimport { use } from '../../extension.js';\nexport function install(registers) {\n  use(installSimple);\n  use(installAxisPointer);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { indexOf, createHashMap, assert } from 'zrender/lib/core/util.js';\nexport var DATA_ZOOM_AXIS_DIMENSIONS = ['x', 'y', 'radius', 'angle', 'single'];\n// Supported coords.\n// FIXME: polar has been broken (but rarely used).\nvar SERIES_COORDS = ['cartesian2d', 'polar', 'singleAxis'];\nexport function isCoordSupported(seriesModel) {\n  var coordType = seriesModel.get('coordinateSystem');\n  return indexOf(SERIES_COORDS, coordType) >= 0;\n}\nexport function getAxisMainType(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n  return axisDim + 'Axis';\n}\nexport function getAxisIndexPropName(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n  return axisDim + 'AxisIndex';\n}\nexport function getAxisIdPropName(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n  return axisDim + 'AxisId';\n}\n/**\n * If two dataZoomModels has the same axis controlled, we say that they are 'linked'.\n * This function finds all linked dataZoomModels start from the given payload.\n */\nexport function findEffectedDataZooms(ecModel, payload) {\n  // Key: `DataZoomAxisDimension`\n  var axisRecords = createHashMap();\n  var effectedModels = [];\n  // Key: uid of dataZoomModel\n  var effectedModelMap = createHashMap();\n  // Find the dataZooms specified by payload.\n  ecModel.eachComponent({\n    mainType: 'dataZoom',\n    query: payload\n  }, function (dataZoomModel) {\n    if (!effectedModelMap.get(dataZoomModel.uid)) {\n      addToEffected(dataZoomModel);\n    }\n  });\n  // Start from the given dataZoomModels, travel the graph to find\n  // all of the linked dataZoom models.\n  var foundNewLink;\n  do {\n    foundNewLink = false;\n    ecModel.eachComponent('dataZoom', processSingle);\n  } while (foundNewLink);\n  function processSingle(dataZoomModel) {\n    if (!effectedModelMap.get(dataZoomModel.uid) && isLinked(dataZoomModel)) {\n      addToEffected(dataZoomModel);\n      foundNewLink = true;\n    }\n  }\n  function addToEffected(dataZoom) {\n    effectedModelMap.set(dataZoom.uid, true);\n    effectedModels.push(dataZoom);\n    markAxisControlled(dataZoom);\n  }\n  function isLinked(dataZoomModel) {\n    var isLink = false;\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      var axisIdxArr = axisRecords.get(axisDim);\n      if (axisIdxArr && axisIdxArr[axisIndex]) {\n        isLink = true;\n      }\n    });\n    return isLink;\n  }\n  function markAxisControlled(dataZoomModel) {\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      (axisRecords.get(axisDim) || axisRecords.set(axisDim, []))[axisIndex] = true;\n    });\n  }\n  return effectedModels;\n}\n/**\n * Find the first target coordinate system.\n * Available after model built.\n *\n * @return Like {\n *                  grid: [\n *                      {model: coord0, axisModels: [axis1, axis3], coordIndex: 1},\n *                      {model: coord1, axisModels: [axis0, axis2], coordIndex: 0},\n *                      ...\n *                  ],  // cartesians must not be null/undefined.\n *                  polar: [\n *                      {model: coord0, axisModels: [axis4], coordIndex: 0},\n *                      ...\n *                  ],  // polars must not be null/undefined.\n *                  singleAxis: [\n *                      {model: coord0, axisModels: [], coordIndex: 0}\n *                  ]\n *              }\n */\nexport function collectReferCoordSysModelInfo(dataZoomModel) {\n  var ecModel = dataZoomModel.ecModel;\n  var coordSysInfoWrap = {\n    infoList: [],\n    infoMap: createHashMap()\n  };\n  dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n    var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n    if (!axisModel) {\n      return;\n    }\n    var coordSysModel = axisModel.getCoordSysModel();\n    if (!coordSysModel) {\n      return;\n    }\n    var coordSysUid = coordSysModel.uid;\n    var coordSysInfo = coordSysInfoWrap.infoMap.get(coordSysUid);\n    if (!coordSysInfo) {\n      coordSysInfo = {\n        model: coordSysModel,\n        axisModels: []\n      };\n      coordSysInfoWrap.infoList.push(coordSysInfo);\n      coordSysInfoWrap.infoMap.set(coordSysUid, coordSysInfo);\n    }\n    coordSysInfo.axisModels.push(axisModel);\n  });\n  return coordSysInfoWrap;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { each, createHashMap, merge, assert } from 'zrender/lib/core/util.js';\nimport ComponentModel from '../../model/Component.js';\nimport { getAxisMainType, DATA_ZOOM_AXIS_DIMENSIONS } from './helper.js';\nimport { MULTIPLE_REFERRING, SINGLE_REFERRING } from '../../util/model.js';\nvar DataZoomAxisInfo = /** @class */function () {\n  function DataZoomAxisInfo() {\n    this.indexList = [];\n    this.indexMap = [];\n  }\n  DataZoomAxisInfo.prototype.add = function (axisCmptIdx) {\n    // Remove duplication.\n    if (!this.indexMap[axisCmptIdx]) {\n      this.indexList.push(axisCmptIdx);\n      this.indexMap[axisCmptIdx] = true;\n    }\n  };\n  return DataZoomAxisInfo;\n}();\nvar DataZoomModel = /** @class */function (_super) {\n  __extends(DataZoomModel, _super);\n  function DataZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = DataZoomModel.type;\n    _this._autoThrottle = true;\n    _this._noTarget = true;\n    /**\n     * It is `[rangeModeForMin, rangeModeForMax]`.\n     * The optional values for `rangeMode`:\n     * + `'value'` mode: the axis extent will always be determined by\n     *     `dataZoom.startValue` and `dataZoom.endValue`, despite\n     *     how data like and how `axis.min` and `axis.max` are.\n     * + `'percent'` mode: `100` represents 100% of the `[dMin, dMax]`,\n     *     where `dMin` is `axis.min` if `axis.min` specified, otherwise `data.extent[0]`,\n     *     and `dMax` is `axis.max` if `axis.max` specified, otherwise `data.extent[1]`.\n     *     Axis extent will be determined by the result of the percent of `[dMin, dMax]`.\n     *\n     * For example, when users are using dynamic data (update data periodically via `setOption`),\n     * if in `'value`' mode, the window will be kept in a fixed value range despite how\n     * data are appended, while if in `'percent'` mode, whe window range will be changed alone with\n     * the appended data (suppose `axis.min` and `axis.max` are not specified).\n     */\n    _this._rangePropMode = ['percent', 'percent'];\n    return _this;\n  }\n  DataZoomModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputRawOption = retrieveRawOption(option);\n    /**\n     * Suppose a \"main process\" start at the point that model prepared (that is,\n     * model initialized or merged or method called in `action`).\n     * We should keep the `main process` idempotent, that is, given a set of values\n     * on `option`, we get the same result.\n     *\n     * But sometimes, values on `option` will be updated for providing users\n     * a \"final calculated value\" (`dataZoomProcessor` will do that). Those value\n     * should not be the base/input of the `main process`.\n     *\n     * So in that case we should save and keep the input of the `main process`\n     * separately, called `settledOption`.\n     *\n     * For example, consider the case:\n     * (Step_1) brush zoom the grid by `toolbox.dataZoom`,\n     *     where the original input `option.startValue`, `option.endValue` are earsed by\n     *     calculated value.\n     * (Step)2) click the legend to hide and show a series,\n     *     where the new range is calculated by the earsed `startValue` and `endValue`,\n     *     which brings incorrect result.\n     */\n    this.settledOption = inputRawOption;\n    this.mergeDefaultAndTheme(option, ecModel);\n    this._doInit(inputRawOption);\n  };\n  DataZoomModel.prototype.mergeOption = function (newOption) {\n    var inputRawOption = retrieveRawOption(newOption);\n    // FIX #2591\n    merge(this.option, newOption, true);\n    merge(this.settledOption, inputRawOption, true);\n    this._doInit(inputRawOption);\n  };\n  DataZoomModel.prototype._doInit = function (inputRawOption) {\n    var thisOption = this.option;\n    this._setDefaultThrottle(inputRawOption);\n    this._updateRangeUse(inputRawOption);\n    var settledOption = this.settledOption;\n    each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n      // start/end has higher priority over startValue/endValue if they\n      // both set, but we should make chart.setOption({endValue: 1000})\n      // effective, rather than chart.setOption({endValue: 1000, end: null}).\n      if (this._rangePropMode[index] === 'value') {\n        thisOption[names[0]] = settledOption[names[0]] = null;\n      }\n      // Otherwise do nothing and use the merge result.\n    }, this);\n    this._resetTarget();\n  };\n  DataZoomModel.prototype._resetTarget = function () {\n    var optionOrient = this.get('orient', true);\n    var targetAxisIndexMap = this._targetAxisInfoMap = createHashMap();\n    var hasAxisSpecified = this._fillSpecifiedTargetAxis(targetAxisIndexMap);\n    if (hasAxisSpecified) {\n      this._orient = optionOrient || this._makeAutoOrientByTargetAxis();\n    } else {\n      this._orient = optionOrient || 'horizontal';\n      this._fillAutoTargetAxisByOrient(targetAxisIndexMap, this._orient);\n    }\n    this._noTarget = true;\n    targetAxisIndexMap.each(function (axisInfo) {\n      if (axisInfo.indexList.length) {\n        this._noTarget = false;\n      }\n    }, this);\n  };\n  DataZoomModel.prototype._fillSpecifiedTargetAxis = function (targetAxisIndexMap) {\n    var hasAxisSpecified = false;\n    each(DATA_ZOOM_AXIS_DIMENSIONS, function (axisDim) {\n      var refering = this.getReferringComponents(getAxisMainType(axisDim), MULTIPLE_REFERRING);\n      // When user set axisIndex as a empty array, we think that user specify axisIndex\n      // but do not want use auto mode. Because empty array may be encountered when\n      // some error occurred.\n      if (!refering.specified) {\n        return;\n      }\n      hasAxisSpecified = true;\n      var axisInfo = new DataZoomAxisInfo();\n      each(refering.models, function (axisModel) {\n        axisInfo.add(axisModel.componentIndex);\n      });\n      targetAxisIndexMap.set(axisDim, axisInfo);\n    }, this);\n    return hasAxisSpecified;\n  };\n  DataZoomModel.prototype._fillAutoTargetAxisByOrient = function (targetAxisIndexMap, orient) {\n    var ecModel = this.ecModel;\n    var needAuto = true;\n    // Find axis that parallel to dataZoom as default.\n    if (needAuto) {\n      var axisDim = orient === 'vertical' ? 'y' : 'x';\n      var axisModels = ecModel.findComponents({\n        mainType: axisDim + 'Axis'\n      });\n      setParallelAxis(axisModels, axisDim);\n    }\n    // Find axis that parallel to dataZoom as default.\n    if (needAuto) {\n      var axisModels = ecModel.findComponents({\n        mainType: 'singleAxis',\n        filter: function (axisModel) {\n          return axisModel.get('orient', true) === orient;\n        }\n      });\n      setParallelAxis(axisModels, 'single');\n    }\n    function setParallelAxis(axisModels, axisDim) {\n      // At least use the first parallel axis as the target axis.\n      var axisModel = axisModels[0];\n      if (!axisModel) {\n        return;\n      }\n      var axisInfo = new DataZoomAxisInfo();\n      axisInfo.add(axisModel.componentIndex);\n      targetAxisIndexMap.set(axisDim, axisInfo);\n      needAuto = false;\n      // Find parallel axes in the same grid.\n      if (axisDim === 'x' || axisDim === 'y') {\n        var gridModel_1 = axisModel.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n        gridModel_1 && each(axisModels, function (axModel) {\n          if (axisModel.componentIndex !== axModel.componentIndex && gridModel_1 === axModel.getReferringComponents('grid', SINGLE_REFERRING).models[0]) {\n            axisInfo.add(axModel.componentIndex);\n          }\n        });\n      }\n    }\n    if (needAuto) {\n      // If no parallel axis, find the first category axis as default. (Also consider polar).\n      each(DATA_ZOOM_AXIS_DIMENSIONS, function (axisDim) {\n        if (!needAuto) {\n          return;\n        }\n        var axisModels = ecModel.findComponents({\n          mainType: getAxisMainType(axisDim),\n          filter: function (axisModel) {\n            return axisModel.get('type', true) === 'category';\n          }\n        });\n        if (axisModels[0]) {\n          var axisInfo = new DataZoomAxisInfo();\n          axisInfo.add(axisModels[0].componentIndex);\n          targetAxisIndexMap.set(axisDim, axisInfo);\n          needAuto = false;\n        }\n      }, this);\n    }\n  };\n  DataZoomModel.prototype._makeAutoOrientByTargetAxis = function () {\n    var dim;\n    // Find the first axis\n    this.eachTargetAxis(function (axisDim) {\n      !dim && (dim = axisDim);\n    }, this);\n    return dim === 'y' ? 'vertical' : 'horizontal';\n  };\n  DataZoomModel.prototype._setDefaultThrottle = function (inputRawOption) {\n    // When first time user set throttle, auto throttle ends.\n    if (inputRawOption.hasOwnProperty('throttle')) {\n      this._autoThrottle = false;\n    }\n    if (this._autoThrottle) {\n      var globalOption = this.ecModel.option;\n      this.option.throttle = globalOption.animation && globalOption.animationDurationUpdate > 0 ? 100 : 20;\n    }\n  };\n  DataZoomModel.prototype._updateRangeUse = function (inputRawOption) {\n    var rangePropMode = this._rangePropMode;\n    var rangeModeInOption = this.get('rangeMode');\n    each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n      var percentSpecified = inputRawOption[names[0]] != null;\n      var valueSpecified = inputRawOption[names[1]] != null;\n      if (percentSpecified && !valueSpecified) {\n        rangePropMode[index] = 'percent';\n      } else if (!percentSpecified && valueSpecified) {\n        rangePropMode[index] = 'value';\n      } else if (rangeModeInOption) {\n        rangePropMode[index] = rangeModeInOption[index];\n      } else if (percentSpecified) {\n        // percentSpecified && valueSpecified\n        rangePropMode[index] = 'percent';\n      }\n      // else remain its original setting.\n    });\n  };\n  DataZoomModel.prototype.noTarget = function () {\n    return this._noTarget;\n  };\n  DataZoomModel.prototype.getFirstTargetAxisModel = function () {\n    var firstAxisModel;\n    this.eachTargetAxis(function (axisDim, axisIndex) {\n      if (firstAxisModel == null) {\n        firstAxisModel = this.ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n      }\n    }, this);\n    return firstAxisModel;\n  };\n  /**\n   * @param {Function} callback param: axisModel, dimNames, axisIndex, dataZoomModel, ecModel\n   */\n  DataZoomModel.prototype.eachTargetAxis = function (callback, context) {\n    this._targetAxisInfoMap.each(function (axisInfo, axisDim) {\n      each(axisInfo.indexList, function (axisIndex) {\n        callback.call(context, axisDim, axisIndex);\n      });\n    });\n  };\n  /**\n   * @return If not found, return null/undefined.\n   */\n  DataZoomModel.prototype.getAxisProxy = function (axisDim, axisIndex) {\n    var axisModel = this.getAxisModel(axisDim, axisIndex);\n    if (axisModel) {\n      return axisModel.__dzAxisProxy;\n    }\n  };\n  /**\n   * @return If not found, return null/undefined.\n   */\n  DataZoomModel.prototype.getAxisModel = function (axisDim, axisIndex) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(axisDim && axisIndex != null);\n    }\n    var axisInfo = this._targetAxisInfoMap.get(axisDim);\n    if (axisInfo && axisInfo.indexMap[axisIndex]) {\n      return this.ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n    }\n  };\n  /**\n   * If not specified, set to undefined.\n   */\n  DataZoomModel.prototype.setRawRange = function (opt) {\n    var thisOption = this.option;\n    var settledOption = this.settledOption;\n    each([['start', 'startValue'], ['end', 'endValue']], function (names) {\n      // Consider the pair <start, startValue>:\n      // If one has value and the other one is `null/undefined`, we both set them\n      // to `settledOption`. This strategy enables the feature to clear the original\n      // value in `settledOption` to `null/undefined`.\n      // But if both of them are `null/undefined`, we do not set them to `settledOption`\n      // and keep `settledOption` with the original value. This strategy enables users to\n      // only set <end or endValue> but not set <start or startValue> when calling\n      // `dispatchAction`.\n      // The pair <end, endValue> is treated in the same way.\n      if (opt[names[0]] != null || opt[names[1]] != null) {\n        thisOption[names[0]] = settledOption[names[0]] = opt[names[0]];\n        thisOption[names[1]] = settledOption[names[1]] = opt[names[1]];\n      }\n    }, this);\n    this._updateRangeUse(opt);\n  };\n  DataZoomModel.prototype.setCalculatedRange = function (opt) {\n    var option = this.option;\n    each(['start', 'startValue', 'end', 'endValue'], function (name) {\n      option[name] = opt[name];\n    });\n  };\n  DataZoomModel.prototype.getPercentRange = function () {\n    var axisProxy = this.findRepresentativeAxisProxy();\n    if (axisProxy) {\n      return axisProxy.getDataPercentWindow();\n    }\n  };\n  /**\n   * For example, chart.getModel().getComponent('dataZoom').getValueRange('y', 0);\n   *\n   * @return [startValue, endValue] value can only be '-' or finite number.\n   */\n  DataZoomModel.prototype.getValueRange = function (axisDim, axisIndex) {\n    if (axisDim == null && axisIndex == null) {\n      var axisProxy = this.findRepresentativeAxisProxy();\n      if (axisProxy) {\n        return axisProxy.getDataValueWindow();\n      }\n    } else {\n      return this.getAxisProxy(axisDim, axisIndex).getDataValueWindow();\n    }\n  };\n  /**\n   * @param axisModel If axisModel given, find axisProxy\n   *      corresponding to the axisModel\n   */\n  DataZoomModel.prototype.findRepresentativeAxisProxy = function (axisModel) {\n    if (axisModel) {\n      return axisModel.__dzAxisProxy;\n    }\n    // Find the first hosted axisProxy\n    var firstProxy;\n    var axisDimList = this._targetAxisInfoMap.keys();\n    for (var i = 0; i < axisDimList.length; i++) {\n      var axisDim = axisDimList[i];\n      var axisInfo = this._targetAxisInfoMap.get(axisDim);\n      for (var j = 0; j < axisInfo.indexList.length; j++) {\n        var proxy = this.getAxisProxy(axisDim, axisInfo.indexList[j]);\n        if (proxy.hostedBy(this)) {\n          return proxy;\n        }\n        if (!firstProxy) {\n          firstProxy = proxy;\n        }\n      }\n    }\n    // If no hosted proxy found, still need to return a proxy.\n    // This case always happens in toolbox dataZoom, where axes are all hosted by\n    // other dataZooms.\n    return firstProxy;\n  };\n  DataZoomModel.prototype.getRangePropMode = function () {\n    return this._rangePropMode.slice();\n  };\n  DataZoomModel.prototype.getOrient = function () {\n    if (process.env.NODE_ENV !== 'production') {\n      // Should not be called before initialized.\n      assert(this._orient);\n    }\n    return this._orient;\n  };\n  DataZoomModel.type = 'dataZoom';\n  DataZoomModel.dependencies = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'series', 'toolbox'];\n  DataZoomModel.defaultOption = {\n    // zlevel: 0,\n    z: 4,\n    filterMode: 'filter',\n    start: 0,\n    end: 100\n  };\n  return DataZoomModel;\n}(ComponentModel);\n/**\n * Retrieve those raw params from option, which will be cached separately,\n * because they will be overwritten by normalized/calculated values in the main\n * process.\n */\nfunction retrieveRawOption(option) {\n  var ret = {};\n  each(['start', 'end', 'startValue', 'endValue', 'throttle'], function (name) {\n    option.hasOwnProperty(name) && (ret[name] = option[name]);\n  });\n  return ret;\n}\nexport default DataZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel.js';\nvar SelectDataZoomModel = /** @class */function (_super) {\n  __extends(SelectDataZoomModel, _super);\n  function SelectDataZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SelectDataZoomModel.type;\n    return _this;\n  }\n  SelectDataZoomModel.type = 'dataZoom.select';\n  return SelectDataZoomModel;\n}(DataZoomModel);\nexport default SelectDataZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component.js';\nvar DataZoomView = /** @class */function (_super) {\n  __extends(DataZoomView, _super);\n  function DataZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = DataZoomView.type;\n    return _this;\n  }\n  DataZoomView.prototype.render = function (dataZoomModel, ecModel, api, payload) {\n    this.dataZoomModel = dataZoomModel;\n    this.ecModel = ecModel;\n    this.api = api;\n  };\n  DataZoomView.type = 'dataZoom';\n  return DataZoomView;\n}(ComponentView);\nexport default DataZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomView from './DataZoomView.js';\nvar SelectDataZoomView = /** @class */function (_super) {\n  __extends(SelectDataZoomView, _super);\n  function SelectDataZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SelectDataZoomView.type;\n    return _this;\n  }\n  SelectDataZoomView.type = 'dataZoom.select';\n  return SelectDataZoomView;\n}(DataZoomView);\nexport default SelectDataZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as numberUtil from '../../util/number.js';\nimport sliderMove from '../helper/sliderMove.js';\nimport { unionAxisExtentFromData } from '../../coord/axisHelper.js';\nimport { ensureScaleRawExtentInfo } from '../../coord/scaleRawExtentInfo.js';\nimport { getAxisMainType, isCoordSupported } from './helper.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\nvar each = zrUtil.each;\nvar asc = numberUtil.asc;\n/**\n * Operate single axis.\n * One axis can only operated by one axis operator.\n * Different dataZoomModels may be defined to operate the same axis.\n * (i.e. 'inside' data zoom and 'slider' data zoom components)\n * So dataZoomModels share one axisProxy in that case.\n */\nvar AxisProxy = /** @class */function () {\n  function AxisProxy(dimName, axisIndex, dataZoomModel, ecModel) {\n    this._dimName = dimName;\n    this._axisIndex = axisIndex;\n    this.ecModel = ecModel;\n    this._dataZoomModel = dataZoomModel;\n    // /**\n    //  * @readOnly\n    //  * @private\n    //  */\n    // this.hasSeriesStacked;\n  }\n  /**\n   * Whether the axisProxy is hosted by dataZoomModel.\n   */\n  AxisProxy.prototype.hostedBy = function (dataZoomModel) {\n    return this._dataZoomModel === dataZoomModel;\n  };\n  /**\n   * @return Value can only be NaN or finite value.\n   */\n  AxisProxy.prototype.getDataValueWindow = function () {\n    return this._valueWindow.slice();\n  };\n  /**\n   * @return {Array.<number>}\n   */\n  AxisProxy.prototype.getDataPercentWindow = function () {\n    return this._percentWindow.slice();\n  };\n  AxisProxy.prototype.getTargetSeriesModels = function () {\n    var seriesModels = [];\n    this.ecModel.eachSeries(function (seriesModel) {\n      if (isCoordSupported(seriesModel)) {\n        var axisMainType = getAxisMainType(this._dimName);\n        var axisModel = seriesModel.getReferringComponents(axisMainType, SINGLE_REFERRING).models[0];\n        if (axisModel && this._axisIndex === axisModel.componentIndex) {\n          seriesModels.push(seriesModel);\n        }\n      }\n    }, this);\n    return seriesModels;\n  };\n  AxisProxy.prototype.getAxisModel = function () {\n    return this.ecModel.getComponent(this._dimName + 'Axis', this._axisIndex);\n  };\n  AxisProxy.prototype.getMinMaxSpan = function () {\n    return zrUtil.clone(this._minMaxSpan);\n  };\n  /**\n   * Only calculate by given range and this._dataExtent, do not change anything.\n   */\n  AxisProxy.prototype.calculateDataWindow = function (opt) {\n    var dataExtent = this._dataExtent;\n    var axisModel = this.getAxisModel();\n    var scale = axisModel.axis.scale;\n    var rangePropMode = this._dataZoomModel.getRangePropMode();\n    var percentExtent = [0, 100];\n    var percentWindow = [];\n    var valueWindow = [];\n    var hasPropModeValue;\n    each(['start', 'end'], function (prop, idx) {\n      var boundPercent = opt[prop];\n      var boundValue = opt[prop + 'Value'];\n      // Notice: dataZoom is based either on `percentProp` ('start', 'end') or\n      // on `valueProp` ('startValue', 'endValue'). (They are based on the data extent\n      // but not min/max of axis, which will be calculated by data window then).\n      // The former one is suitable for cases that a dataZoom component controls multiple\n      // axes with different unit or extent, and the latter one is suitable for accurate\n      // zoom by pixel (e.g., in dataZoomSelect).\n      // we use `getRangePropMode()` to mark which prop is used. `rangePropMode` is updated\n      // only when setOption or dispatchAction, otherwise it remains its original value.\n      // (Why not only record `percentProp` and always map to `valueProp`? Because\n      // the map `valueProp` -> `percentProp` -> `valueProp` probably not the original\n      // `valueProp`. consider two axes constrolled by one dataZoom. They have different\n      // data extent. All of values that are overflow the `dataExtent` will be calculated\n      // to percent '100%').\n      if (rangePropMode[idx] === 'percent') {\n        boundPercent == null && (boundPercent = percentExtent[idx]);\n        // Use scale.parse to math round for category or time axis.\n        boundValue = scale.parse(numberUtil.linearMap(boundPercent, percentExtent, dataExtent));\n      } else {\n        hasPropModeValue = true;\n        boundValue = boundValue == null ? dataExtent[idx] : scale.parse(boundValue);\n        // Calculating `percent` from `value` may be not accurate, because\n        // This calculation can not be inversed, because all of values that\n        // are overflow the `dataExtent` will be calculated to percent '100%'\n        boundPercent = numberUtil.linearMap(boundValue, dataExtent, percentExtent);\n      }\n      // valueWindow[idx] = round(boundValue);\n      // percentWindow[idx] = round(boundPercent);\n      // fallback to extent start/end when parsed value or percent is invalid\n      valueWindow[idx] = boundValue == null || isNaN(boundValue) ? dataExtent[idx] : boundValue;\n      percentWindow[idx] = boundPercent == null || isNaN(boundPercent) ? percentExtent[idx] : boundPercent;\n    });\n    asc(valueWindow);\n    asc(percentWindow);\n    // The windows from user calling of `dispatchAction` might be out of the extent,\n    // or do not obey the `min/maxSpan`, `min/maxValueSpan`. But we don't restrict window\n    // by `zoomLock` here, because we see `zoomLock` just as a interaction constraint,\n    // where API is able to initialize/modify the window size even though `zoomLock`\n    // specified.\n    var spans = this._minMaxSpan;\n    hasPropModeValue ? restrictSet(valueWindow, percentWindow, dataExtent, percentExtent, false) : restrictSet(percentWindow, valueWindow, percentExtent, dataExtent, true);\n    function restrictSet(fromWindow, toWindow, fromExtent, toExtent, toValue) {\n      var suffix = toValue ? 'Span' : 'ValueSpan';\n      sliderMove(0, fromWindow, fromExtent, 'all', spans['min' + suffix], spans['max' + suffix]);\n      for (var i = 0; i < 2; i++) {\n        toWindow[i] = numberUtil.linearMap(fromWindow[i], fromExtent, toExtent, true);\n        toValue && (toWindow[i] = scale.parse(toWindow[i]));\n      }\n    }\n    return {\n      valueWindow: valueWindow,\n      percentWindow: percentWindow\n    };\n  };\n  /**\n   * Notice: reset should not be called before series.restoreData() is called,\n   * so it is recommended to be called in \"process stage\" but not \"model init\n   * stage\".\n   */\n  AxisProxy.prototype.reset = function (dataZoomModel) {\n    if (dataZoomModel !== this._dataZoomModel) {\n      return;\n    }\n    var targetSeries = this.getTargetSeriesModels();\n    // Culculate data window and data extent, and record them.\n    this._dataExtent = calculateDataExtent(this, this._dimName, targetSeries);\n    // `calculateDataWindow` uses min/maxSpan.\n    this._updateMinMaxSpan();\n    var dataWindow = this.calculateDataWindow(dataZoomModel.settledOption);\n    this._valueWindow = dataWindow.valueWindow;\n    this._percentWindow = dataWindow.percentWindow;\n    // Update axis setting then.\n    this._setAxisModel();\n  };\n  AxisProxy.prototype.filterData = function (dataZoomModel, api) {\n    if (dataZoomModel !== this._dataZoomModel) {\n      return;\n    }\n    var axisDim = this._dimName;\n    var seriesModels = this.getTargetSeriesModels();\n    var filterMode = dataZoomModel.get('filterMode');\n    var valueWindow = this._valueWindow;\n    if (filterMode === 'none') {\n      return;\n    }\n    // FIXME\n    // Toolbox may has dataZoom injected. And if there are stacked bar chart\n    // with NaN data, NaN will be filtered and stack will be wrong.\n    // So we need to force the mode to be set empty.\n    // In fect, it is not a big deal that do not support filterMode-'filter'\n    // when using toolbox#dataZoom, utill tooltip#dataZoom support \"single axis\n    // selection\" some day, which might need \"adapt to data extent on the\n    // otherAxis\", which is disabled by filterMode-'empty'.\n    // But currently, stack has been fixed to based on value but not index,\n    // so this is not an issue any more.\n    // let otherAxisModel = this.getOtherAxisModel();\n    // if (dataZoomModel.get('$fromToolbox')\n    //     && otherAxisModel\n    //     && otherAxisModel.hasSeriesStacked\n    // ) {\n    //     filterMode = 'empty';\n    // }\n    // TODO\n    // filterMode 'weakFilter' and 'empty' is not optimized for huge data yet.\n    each(seriesModels, function (seriesModel) {\n      var seriesData = seriesModel.getData();\n      var dataDims = seriesData.mapDimensionsAll(axisDim);\n      if (!dataDims.length) {\n        return;\n      }\n      if (filterMode === 'weakFilter') {\n        var store_1 = seriesData.getStore();\n        var dataDimIndices_1 = zrUtil.map(dataDims, function (dim) {\n          return seriesData.getDimensionIndex(dim);\n        }, seriesData);\n        seriesData.filterSelf(function (dataIndex) {\n          var leftOut;\n          var rightOut;\n          var hasValue;\n          for (var i = 0; i < dataDims.length; i++) {\n            var value = store_1.get(dataDimIndices_1[i], dataIndex);\n            var thisHasValue = !isNaN(value);\n            var thisLeftOut = value < valueWindow[0];\n            var thisRightOut = value > valueWindow[1];\n            if (thisHasValue && !thisLeftOut && !thisRightOut) {\n              return true;\n            }\n            thisHasValue && (hasValue = true);\n            thisLeftOut && (leftOut = true);\n            thisRightOut && (rightOut = true);\n          }\n          // If both left out and right out, do not filter.\n          return hasValue && leftOut && rightOut;\n        });\n      } else {\n        each(dataDims, function (dim) {\n          if (filterMode === 'empty') {\n            seriesModel.setData(seriesData = seriesData.map(dim, function (value) {\n              return !isInWindow(value) ? NaN : value;\n            }));\n          } else {\n            var range = {};\n            range[dim] = valueWindow;\n            // console.time('select');\n            seriesData.selectRange(range);\n            // console.timeEnd('select');\n          }\n        });\n      }\n      each(dataDims, function (dim) {\n        seriesData.setApproximateExtent(valueWindow, dim);\n      });\n    });\n    function isInWindow(value) {\n      return value >= valueWindow[0] && value <= valueWindow[1];\n    }\n  };\n  AxisProxy.prototype._updateMinMaxSpan = function () {\n    var minMaxSpan = this._minMaxSpan = {};\n    var dataZoomModel = this._dataZoomModel;\n    var dataExtent = this._dataExtent;\n    each(['min', 'max'], function (minMax) {\n      var percentSpan = dataZoomModel.get(minMax + 'Span');\n      var valueSpan = dataZoomModel.get(minMax + 'ValueSpan');\n      valueSpan != null && (valueSpan = this.getAxisModel().axis.scale.parse(valueSpan));\n      // minValueSpan and maxValueSpan has higher priority than minSpan and maxSpan\n      if (valueSpan != null) {\n        percentSpan = numberUtil.linearMap(dataExtent[0] + valueSpan, dataExtent, [0, 100], true);\n      } else if (percentSpan != null) {\n        valueSpan = numberUtil.linearMap(percentSpan, [0, 100], dataExtent, true) - dataExtent[0];\n      }\n      minMaxSpan[minMax + 'Span'] = percentSpan;\n      minMaxSpan[minMax + 'ValueSpan'] = valueSpan;\n    }, this);\n  };\n  AxisProxy.prototype._setAxisModel = function () {\n    var axisModel = this.getAxisModel();\n    var percentWindow = this._percentWindow;\n    var valueWindow = this._valueWindow;\n    if (!percentWindow) {\n      return;\n    }\n    // [0, 500]: arbitrary value, guess axis extent.\n    var precision = numberUtil.getPixelPrecision(valueWindow, [0, 500]);\n    precision = Math.min(precision, 20);\n    // For value axis, if min/max/scale are not set, we just use the extent obtained\n    // by series data, which may be a little different from the extent calculated by\n    // `axisHelper.getScaleExtent`. But the different just affects the experience a\n    // little when zooming. So it will not be fixed until some users require it strongly.\n    var rawExtentInfo = axisModel.axis.scale.rawExtentInfo;\n    if (percentWindow[0] !== 0) {\n      rawExtentInfo.setDeterminedMinMax('min', +valueWindow[0].toFixed(precision));\n    }\n    if (percentWindow[1] !== 100) {\n      rawExtentInfo.setDeterminedMinMax('max', +valueWindow[1].toFixed(precision));\n    }\n    rawExtentInfo.freeze();\n  };\n  return AxisProxy;\n}();\nfunction calculateDataExtent(axisProxy, axisDim, seriesModels) {\n  var dataExtent = [Infinity, -Infinity];\n  each(seriesModels, function (seriesModel) {\n    unionAxisExtentFromData(dataExtent, seriesModel.getData(), axisDim);\n  });\n  // It is important to get \"consistent\" extent when more then one axes is\n  // controlled by a `dataZoom`, otherwise those axes will not be synchronized\n  // when zooming. But it is difficult to know what is \"consistent\", considering\n  // axes have different type or even different meanings (For example, two\n  // time axes are used to compare data of the same date in different years).\n  // So basically dataZoom just obtains extent by series.data (in category axis\n  // extent can be obtained from axis.data).\n  // Nevertheless, user can set min/max/scale on axes to make extent of axes\n  // consistent.\n  var axisModel = axisProxy.getAxisModel();\n  var rawExtentResult = ensureScaleRawExtentInfo(axisModel.axis.scale, axisModel, dataExtent).calculate();\n  return [rawExtentResult.min, rawExtentResult.max];\n}\nexport default AxisProxy;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createHashMap, each } from 'zrender/lib/core/util.js';\nimport { getAxisMainType } from './helper.js';\nimport AxisProxy from './AxisProxy.js';\nvar dataZoomProcessor = {\n  // `dataZoomProcessor` will only be performed in needed series. Consider if\n  // there is a line series and a pie series, it is better not to update the\n  // line series if only pie series is needed to be updated.\n  getTargetSeries: function (ecModel) {\n    function eachAxisModel(cb) {\n      ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n        dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n          var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n          cb(axisDim, axisIndex, axisModel, dataZoomModel);\n        });\n      });\n    }\n    // FIXME: it brings side-effect to `getTargetSeries`.\n    // Prepare axis proxies.\n    eachAxisModel(function (axisDim, axisIndex, axisModel, dataZoomModel) {\n      // dispose all last axis proxy, in case that some axis are deleted.\n      axisModel.__dzAxisProxy = null;\n    });\n    var proxyList = [];\n    eachAxisModel(function (axisDim, axisIndex, axisModel, dataZoomModel) {\n      // Different dataZooms may constrol the same axis. In that case,\n      // an axisProxy serves both of them.\n      if (!axisModel.__dzAxisProxy) {\n        // Use the first dataZoomModel as the main model of axisProxy.\n        axisModel.__dzAxisProxy = new AxisProxy(axisDim, axisIndex, dataZoomModel, ecModel);\n        proxyList.push(axisModel.__dzAxisProxy);\n      }\n    });\n    var seriesModelMap = createHashMap();\n    each(proxyList, function (axisProxy) {\n      each(axisProxy.getTargetSeriesModels(), function (seriesModel) {\n        seriesModelMap.set(seriesModel.uid, seriesModel);\n      });\n    });\n    return seriesModelMap;\n  },\n  // Consider appendData, where filter should be performed. Because data process is\n  // in block mode currently, it is not need to worry about that the overallProgress\n  // execute every frame.\n  overallReset: function (ecModel, api) {\n    ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n      // We calculate window and reset axis here but not in model\n      // init stage and not after action dispatch handler, because\n      // reset should be called after seriesData.restoreData.\n      dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n        dataZoomModel.getAxisProxy(axisDim, axisIndex).reset(dataZoomModel);\n      });\n      // Caution: data zoom filtering is order sensitive when using\n      // percent range and no min/max/scale set on axis.\n      // For example, we have dataZoom definition:\n      // [\n      //      {xAxisIndex: 0, start: 30, end: 70},\n      //      {yAxisIndex: 0, start: 20, end: 80}\n      // ]\n      // In this case, [20, 80] of y-dataZoom should be based on data\n      // that have filtered by x-dataZoom using range of [30, 70],\n      // but should not be based on full raw data. Thus sliding\n      // x-dataZoom will change both ranges of xAxis and yAxis,\n      // while sliding y-dataZoom will only change the range of yAxis.\n      // So we should filter x-axis after reset x-axis immediately,\n      // and then reset y-axis and filter y-axis.\n      dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n        dataZoomModel.getAxisProxy(axisDim, axisIndex).filterData(dataZoomModel, api);\n      });\n    });\n    ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n      // Fullfill all of the range props so that user\n      // is able to get them from chart.getOption().\n      var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n      if (axisProxy) {\n        var percentRange = axisProxy.getDataPercentWindow();\n        var valueRange = axisProxy.getDataValueWindow();\n        dataZoomModel.setCalculatedRange({\n          start: percentRange[0],\n          end: percentRange[1],\n          startValue: valueRange[0],\n          endValue: valueRange[1]\n        });\n      }\n    });\n  }\n};\nexport default dataZoomProcessor;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { findEffectedDataZooms } from './helper.js';\nimport { each } from 'zrender/lib/core/util.js';\nexport default function installDataZoomAction(registers) {\n  registers.registerAction('dataZoom', function (payload, ecModel) {\n    var effectedModels = findEffectedDataZooms(ecModel, payload);\n    each(effectedModels, function (dataZoomModel) {\n      dataZoomModel.setRawRange({\n        start: payload.start,\n        end: payload.end,\n        startValue: payload.startValue,\n        endValue: payload.endValue\n      });\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport dataZoomProcessor from './dataZoomProcessor.js';\nimport installDataZoomAction from './dataZoomAction.js';\nvar installed = false;\nexport default function installCommon(registers) {\n  if (installed) {\n    return;\n  }\n  installed = true;\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.FILTER, dataZoomProcessor);\n  installDataZoomAction(registers);\n  registers.registerSubTypeDefaulter('dataZoom', function () {\n    // Default 'slider' when no type specified.\n    return 'slider';\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SelectZoomModel from './SelectZoomModel.js';\nimport SelectZoomView from './SelectZoomView.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  registers.registerComponentModel(SelectZoomModel);\n  registers.registerComponentView(SelectZoomView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nvar ToolboxFeature = /** @class */function () {\n  function ToolboxFeature() {}\n  return ToolboxFeature;\n}();\nexport { ToolboxFeature };\nvar features = {};\nexport function registerFeature(name, ctor) {\n  features[name] = ctor;\n}\nexport function getFeature(name) {\n  return features[name];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as featureManager from './featureManager.js';\nimport ComponentModel from '../../model/Component.js';\nimport tokens from '../../visual/tokens.js';\nvar ToolboxModel = /** @class */function (_super) {\n  __extends(ToolboxModel, _super);\n  function ToolboxModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ToolboxModel.type;\n    return _this;\n  }\n  ToolboxModel.prototype.optionUpdated = function () {\n    _super.prototype.optionUpdated.apply(this, arguments);\n    var ecModel = this.ecModel;\n    zrUtil.each(this.option.feature, function (featureOpt, featureName) {\n      var Feature = featureManager.getFeature(featureName);\n      if (Feature) {\n        if (Feature.getDefaultOption) {\n          Feature.defaultOption = Feature.getDefaultOption(ecModel);\n        }\n        zrUtil.merge(featureOpt, Feature.defaultOption);\n      }\n    });\n  };\n  ToolboxModel.type = 'toolbox';\n  ToolboxModel.layoutMode = {\n    type: 'box',\n    ignoreSize: true\n  };\n  ToolboxModel.defaultOption = {\n    show: true,\n    z: 6,\n    // zlevel: 0,\n    orient: 'horizontal',\n    left: 'right',\n    top: 'top',\n    // right\n    // bottom\n    backgroundColor: 'transparent',\n    borderColor: tokens.color.border,\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: tokens.size.m,\n    itemSize: 15,\n    itemGap: tokens.size.s,\n    showTitle: true,\n    iconStyle: {\n      borderColor: tokens.color.accent50,\n      color: 'none'\n    },\n    emphasis: {\n      iconStyle: {\n        borderColor: tokens.color.accent50\n      }\n    },\n    // textStyle: {},\n    // feature\n    tooltip: {\n      show: false,\n      position: 'bottom'\n    }\n  };\n  return ToolboxModel;\n}(ComponentModel);\nexport default ToolboxModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as formatUtil from '../../util/format.js';\nimport * as graphic from '../../util/graphic.js';\n;\nexport function makeBackground(rect, componentModel) {\n  var padding = formatUtil.normalizeCssArray(componentModel.get('padding'));\n  var style = componentModel.getItemStyle(['color', 'opacity']);\n  style.fill = componentModel.get('backgroundColor');\n  var bgRect = new graphic.Rect({\n    shape: {\n      x: rect.x - padding[3],\n      y: rect.y - padding[0],\n      width: rect.width + padding[1] + padding[3],\n      height: rect.height + padding[0] + padding[2],\n      r: componentModel.get('borderRadius')\n    },\n    style: style,\n    silent: true,\n    z2: -1\n  });\n  // FIXME\n  // `subPixelOptimizeRect` may bring some gap between edge of viewpart\n  // and background rect when setting like `left: 0`, `top: 0`.\n  // graphic.subPixelOptimizeRect(rect);\n  return bgRect;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as textContain from 'zrender/lib/contain/text.js';\nimport * as graphic from '../../util/graphic.js';\nimport { enterEmphasis, leaveEmphasis } from '../../util/states.js';\nimport Model from '../../model/Model.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport * as listComponentHelper from '../helper/listComponent.js';\nimport ComponentView from '../../view/Component.js';\nimport { ToolboxFeature, getFeature } from './featureManager.js';\nimport { getUID } from '../../util/component.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport { getFont } from '../../label/labelStyle.js';\nimport { box, createBoxLayoutReference, getLayoutRect, positionElement } from '../../util/layout.js';\nimport tokens from '../../visual/tokens.js';\nvar ToolboxView = /** @class */function (_super) {\n  __extends(ToolboxView, _super);\n  function ToolboxView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  ToolboxView.prototype.render = function (toolboxModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n    if (!toolboxModel.get('show')) {\n      return;\n    }\n    var itemSize = +toolboxModel.get('itemSize');\n    var isVertical = toolboxModel.get('orient') === 'vertical';\n    var featureOpts = toolboxModel.get('feature') || {};\n    var features = this._features || (this._features = {});\n    var featureNames = [];\n    zrUtil.each(featureOpts, function (opt, name) {\n      featureNames.push(name);\n    });\n    new DataDiffer(this._featureNames || [], featureNames).add(processFeature).update(processFeature).remove(zrUtil.curry(processFeature, null)).execute();\n    // Keep for diff.\n    this._featureNames = featureNames;\n    function processFeature(newIndex, oldIndex) {\n      var featureName = featureNames[newIndex];\n      var oldName = featureNames[oldIndex];\n      var featureOpt = featureOpts[featureName];\n      var featureModel = new Model(featureOpt, toolboxModel, toolboxModel.ecModel);\n      var feature;\n      // FIX#11236, merge feature title from MagicType newOption. TODO: consider seriesIndex ?\n      if (payload && payload.newTitle != null && payload.featureName === featureName) {\n        featureOpt.title = payload.newTitle;\n      }\n      if (featureName && !oldName) {\n        // Create\n        if (isUserFeatureName(featureName)) {\n          feature = {\n            onclick: featureModel.option.onclick,\n            featureName: featureName\n          };\n        } else {\n          var Feature = getFeature(featureName);\n          if (!Feature) {\n            return;\n          }\n          feature = new Feature();\n        }\n        features[featureName] = feature;\n      } else {\n        feature = features[oldName];\n        // If feature does not exist.\n        if (!feature) {\n          return;\n        }\n      }\n      feature.uid = getUID('toolbox-feature');\n      feature.model = featureModel;\n      feature.ecModel = ecModel;\n      feature.api = api;\n      var isToolboxFeature = feature instanceof ToolboxFeature;\n      if (!featureName && oldName) {\n        isToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n        return;\n      }\n      if (!featureModel.get('show') || isToolboxFeature && feature.unusable) {\n        isToolboxFeature && feature.remove && feature.remove(ecModel, api);\n        return;\n      }\n      createIconPaths(featureModel, feature, featureName);\n      featureModel.setIconStatus = function (iconName, status) {\n        var option = this.option;\n        var iconPaths = this.iconPaths;\n        option.iconStatus = option.iconStatus || {};\n        option.iconStatus[iconName] = status;\n        if (iconPaths[iconName]) {\n          (status === 'emphasis' ? enterEmphasis : leaveEmphasis)(iconPaths[iconName]);\n        }\n      };\n      if (feature instanceof ToolboxFeature) {\n        if (feature.render) {\n          feature.render(featureModel, ecModel, api, payload);\n        }\n      }\n    }\n    function createIconPaths(featureModel, feature, featureName) {\n      var iconStyleModel = featureModel.getModel('iconStyle');\n      var iconStyleEmphasisModel = featureModel.getModel(['emphasis', 'iconStyle']);\n      // If one feature has multiple icons, they are organized as\n      // {\n      //     icon: {\n      //         foo: '',\n      //         bar: ''\n      //     },\n      //     title: {\n      //         foo: '',\n      //         bar: ''\n      //     }\n      // }\n      var icons = feature instanceof ToolboxFeature && feature.getIcons ? feature.getIcons() : featureModel.get('icon');\n      var titles = featureModel.get('title') || {};\n      var iconsMap;\n      var titlesMap;\n      if (zrUtil.isString(icons)) {\n        iconsMap = {};\n        iconsMap[featureName] = icons;\n      } else {\n        iconsMap = icons;\n      }\n      if (zrUtil.isString(titles)) {\n        titlesMap = {};\n        titlesMap[featureName] = titles;\n      } else {\n        titlesMap = titles;\n      }\n      var iconPaths = featureModel.iconPaths = {};\n      zrUtil.each(iconsMap, function (iconStr, iconName) {\n        var path = graphic.createIcon(iconStr, {}, {\n          x: -itemSize / 2,\n          y: -itemSize / 2,\n          width: itemSize,\n          height: itemSize\n        }); // TODO handling image\n        path.setStyle(iconStyleModel.getItemStyle());\n        var pathEmphasisState = path.ensureState('emphasis');\n        pathEmphasisState.style = iconStyleEmphasisModel.getItemStyle();\n        // Text position calculation\n        // TODO: extract `textStyle` from `iconStyle` and use `createTextStyle`\n        var textContent = new ZRText({\n          style: {\n            text: titlesMap[iconName],\n            align: iconStyleEmphasisModel.get('textAlign'),\n            borderRadius: iconStyleEmphasisModel.get('textBorderRadius'),\n            padding: iconStyleEmphasisModel.get('textPadding'),\n            fill: null,\n            font: getFont({\n              fontStyle: iconStyleEmphasisModel.get('textFontStyle'),\n              fontFamily: iconStyleEmphasisModel.get('textFontFamily'),\n              fontSize: iconStyleEmphasisModel.get('textFontSize'),\n              fontWeight: iconStyleEmphasisModel.get('textFontWeight')\n            }, ecModel)\n          },\n          ignore: true\n        });\n        path.setTextContent(textContent);\n        graphic.setTooltipConfig({\n          el: path,\n          componentModel: toolboxModel,\n          itemName: iconName,\n          formatterParamsExtra: {\n            title: titlesMap[iconName]\n          }\n        });\n        path.__title = titlesMap[iconName];\n        path.on('mouseover', function () {\n          // Should not reuse above hoverStyle, which might be modified.\n          var hoverStyle = iconStyleEmphasisModel.getItemStyle();\n          var defaultTextPosition = isVertical ? toolboxModel.get('right') == null && toolboxModel.get('left') !== 'right' ? 'right' : 'left' : toolboxModel.get('bottom') == null && toolboxModel.get('top') !== 'bottom' ? 'bottom' : 'top';\n          textContent.setStyle({\n            fill: iconStyleEmphasisModel.get('textFill') || hoverStyle.fill || hoverStyle.stroke || tokens.color.neutral99,\n            backgroundColor: iconStyleEmphasisModel.get('textBackgroundColor')\n          });\n          path.setTextConfig({\n            position: iconStyleEmphasisModel.get('textPosition') || defaultTextPosition\n          });\n          textContent.ignore = !toolboxModel.get('showTitle');\n          // Use enterEmphasis and leaveEmphasis provide by ec.\n          // There are flags managed by the echarts.\n          api.enterEmphasis(this);\n        }).on('mouseout', function () {\n          if (featureModel.get(['iconStatus', iconName]) !== 'emphasis') {\n            api.leaveEmphasis(this);\n          }\n          textContent.hide();\n        });\n        (featureModel.get(['iconStatus', iconName]) === 'emphasis' ? enterEmphasis : leaveEmphasis)(path);\n        group.add(path);\n        path.on('click', zrUtil.bind(feature.onclick, feature, ecModel, api, iconName));\n        iconPaths[iconName] = path;\n      });\n    }\n    var refContainer = createBoxLayoutReference(toolboxModel, api).refContainer;\n    var boxLayoutParams = toolboxModel.getBoxLayoutParams();\n    var padding = toolboxModel.get('padding');\n    var viewRect = getLayoutRect(boxLayoutParams, refContainer, padding);\n    box(toolboxModel.get('orient'), group, toolboxModel.get('itemGap'), viewRect.width, viewRect.height);\n    positionElement(group, boxLayoutParams, refContainer, padding);\n    // Render background after group is layout\n    // FIXME\n    group.add(listComponentHelper.makeBackground(group.getBoundingRect(), toolboxModel));\n    // Adjust icon title positions to avoid them out of screen\n    isVertical || group.eachChild(function (icon) {\n      var titleText = icon.__title;\n      // const hoverStyle = icon.hoverStyle;\n      // TODO simplify code?\n      var emphasisState = icon.ensureState('emphasis');\n      var emphasisTextConfig = emphasisState.textConfig || (emphasisState.textConfig = {});\n      var textContent = icon.getTextContent();\n      var emphasisTextState = textContent && textContent.ensureState('emphasis');\n      // May be background element\n      if (emphasisTextState && !zrUtil.isFunction(emphasisTextState) && titleText) {\n        var emphasisTextStyle = emphasisTextState.style || (emphasisTextState.style = {});\n        var rect = textContain.getBoundingRect(titleText, ZRText.makeFont(emphasisTextStyle));\n        var offsetX = icon.x + group.x;\n        var offsetY = icon.y + group.y + itemSize;\n        var needPutOnTop = false;\n        if (offsetY + rect.height > api.getHeight()) {\n          emphasisTextConfig.position = 'top';\n          needPutOnTop = true;\n        }\n        var topOffset = needPutOnTop ? -5 - rect.height : itemSize + 10;\n        if (offsetX + rect.width / 2 > api.getWidth()) {\n          emphasisTextConfig.position = ['100%', topOffset];\n          emphasisTextStyle.align = 'right';\n        } else if (offsetX - rect.width / 2 < 0) {\n          emphasisTextConfig.position = [0, topOffset];\n          emphasisTextStyle.align = 'left';\n        }\n      }\n    });\n  };\n  ToolboxView.prototype.updateView = function (toolboxModel, ecModel, api, payload) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.updateView && feature.updateView(feature.model, ecModel, api, payload);\n    });\n  };\n  // updateLayout(toolboxModel, ecModel, api, payload) {\n  //     zrUtil.each(this._features, function (feature) {\n  //         feature.updateLayout && feature.updateLayout(feature.model, ecModel, api, payload);\n  //     });\n  // },\n  ToolboxView.prototype.remove = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.remove && feature.remove(ecModel, api);\n    });\n    this.group.removeAll();\n  };\n  ToolboxView.prototype.dispose = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n    });\n  };\n  ToolboxView.type = 'toolbox';\n  return ToolboxView;\n}(ComponentView);\nfunction isUserFeatureName(featureName) {\n  return featureName.indexOf('my') === 0;\n}\nexport default ToolboxView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global window, Uint8Array, document */\nimport env from 'zrender/lib/core/env.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport tokens from '../../../visual/tokens.js';\nvar SaveAsImage = /** @class */function (_super) {\n  __extends(SaveAsImage, _super);\n  function SaveAsImage() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  SaveAsImage.prototype.onclick = function (ecModel, api) {\n    var model = this.model;\n    var title = model.get('name') || ecModel.get('title.0.text') || 'echarts';\n    var isSvg = api.getZr().painter.getType() === 'svg';\n    var type = isSvg ? 'svg' : model.get('type', true) || 'png';\n    var url = api.getConnectedDataURL({\n      type: type,\n      backgroundColor: model.get('backgroundColor', true) || ecModel.get('backgroundColor') || tokens.color.neutral00,\n      connectedBackgroundColor: model.get('connectedBackgroundColor'),\n      excludeComponents: model.get('excludeComponents'),\n      pixelRatio: model.get('pixelRatio')\n    });\n    var browser = env.browser;\n    // Chrome, Firefox, New Edge\n    if (typeof MouseEvent === 'function' && (browser.newEdge || !browser.ie && !browser.edge)) {\n      var $a = document.createElement('a');\n      $a.download = title + '.' + type;\n      $a.target = '_blank';\n      $a.href = url;\n      var evt = new MouseEvent('click', {\n        // some micro front-end framework window maybe is a Proxy\n        view: document.defaultView,\n        bubbles: true,\n        cancelable: false\n      });\n      $a.dispatchEvent(evt);\n    }\n    // IE or old Edge\n    else {\n      // @ts-ignore\n      if (window.navigator.msSaveOrOpenBlob || isSvg) {\n        var parts = url.split(',');\n        // data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n        var base64Encoded = parts[0].indexOf('base64') > -1;\n        var bstr = isSvg\n        // should decode the svg data uri first\n        ? decodeURIComponent(parts[1]) : parts[1];\n        // only `atob` when the data uri is encoded with base64\n        // otherwise, like `svg` data uri exported by zrender,\n        // there will be an error, for it's not encoded with base64.\n        // (just a url-encoded string through `encodeURIComponent`)\n        base64Encoded && (bstr = window.atob(bstr));\n        var filename = title + '.' + type;\n        // @ts-ignore\n        if (window.navigator.msSaveOrOpenBlob) {\n          var n = bstr.length;\n          var u8arr = new Uint8Array(n);\n          while (n--) {\n            u8arr[n] = bstr.charCodeAt(n);\n          }\n          var blob = new Blob([u8arr]); // @ts-ignore\n          window.navigator.msSaveOrOpenBlob(blob, filename);\n        } else {\n          var frame = document.createElement('iframe');\n          document.body.appendChild(frame);\n          var cw = frame.contentWindow;\n          var doc = cw.document;\n          doc.open('image/svg+xml', 'replace');\n          doc.write(bstr);\n          doc.close();\n          cw.focus();\n          doc.execCommand('SaveAs', true, filename);\n          document.body.removeChild(frame);\n        }\n      } else {\n        var lang = model.get('lang');\n        var html = '' + '<body style=\"margin:0;\">' + '<img src=\"' + url + '\" style=\"max-width:100%;\" title=\"' + (lang && lang[0] || '') + '\" />' + '</body>';\n        var tab = window.open();\n        tab.document.write(html);\n        tab.document.title = title;\n      }\n    }\n  };\n  SaveAsImage.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      icon: 'M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0',\n      title: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'title']),\n      type: 'png',\n      // Default use option.backgroundColor\n      // backgroundColor: '#fff',\n      connectedBackgroundColor: tokens.color.neutral00,\n      name: '',\n      excludeComponents: ['toolbox'],\n      // use current pixel ratio of device by default\n      // pixelRatio: 1,\n      lang: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'lang'])\n    };\n    return defaultOption;\n  };\n  return SaveAsImage;\n}(ToolboxFeature);\nexport default SaveAsImage;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { SINGLE_REFERRING } from '../../../util/model.js';\nvar INNER_STACK_KEYWORD = '__ec_magicType_stack__';\nvar ICON_TYPES = ['line', 'bar', 'stack'];\n// stack and tiled appears in pair for the title\nvar TITLE_TYPES = ['line', 'bar', 'stack', 'tiled'];\nvar radioTypes = [['line', 'bar'], ['stack']];\nvar MagicType = /** @class */function (_super) {\n  __extends(MagicType, _super);\n  function MagicType() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  MagicType.prototype.getIcons = function () {\n    var model = this.model;\n    var availableIcons = model.get('icon');\n    var icons = {};\n    zrUtil.each(model.get('type'), function (type) {\n      if (availableIcons[type]) {\n        icons[type] = availableIcons[type];\n      }\n    });\n    return icons;\n  };\n  MagicType.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      type: [],\n      // Icon group\n      icon: {\n        line: 'M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4',\n        bar: 'M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7',\n        // eslint-disable-next-line\n        stack: 'M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z' // jshint ignore:line\n      },\n      // `line`, `bar`, `stack`, `tiled`\n      title: ecModel.getLocaleModel().get(['toolbox', 'magicType', 'title']),\n      option: {},\n      seriesIndex: {}\n    };\n    return defaultOption;\n  };\n  MagicType.prototype.onclick = function (ecModel, api, type) {\n    var model = this.model;\n    var seriesIndex = model.get(['seriesIndex', type]);\n    // Not supported magicType\n    if (!seriesOptGenreator[type]) {\n      return;\n    }\n    var newOption = {\n      series: []\n    };\n    var generateNewSeriesTypes = function (seriesModel) {\n      var seriesType = seriesModel.subType;\n      var seriesId = seriesModel.id;\n      var newSeriesOpt = seriesOptGenreator[type](seriesType, seriesId, seriesModel, model);\n      if (newSeriesOpt) {\n        // PENDING If merge original option?\n        zrUtil.defaults(newSeriesOpt, seriesModel.option);\n        newOption.series.push(newSeriesOpt);\n      }\n      // Modify boundaryGap\n      var coordSys = seriesModel.coordinateSystem;\n      if (coordSys && coordSys.type === 'cartesian2d' && (type === 'line' || type === 'bar')) {\n        var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n        if (categoryAxis) {\n          var axisDim = categoryAxis.dim;\n          var axisType = axisDim + 'Axis';\n          var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n          var axisIndex = axisModel.componentIndex;\n          newOption[axisType] = newOption[axisType] || [];\n          for (var i = 0; i <= axisIndex; i++) {\n            newOption[axisType][axisIndex] = newOption[axisType][axisIndex] || {};\n          }\n          newOption[axisType][axisIndex].boundaryGap = type === 'bar';\n        }\n      }\n    };\n    zrUtil.each(radioTypes, function (radio) {\n      if (zrUtil.indexOf(radio, type) >= 0) {\n        zrUtil.each(radio, function (item) {\n          model.setIconStatus(item, 'normal');\n        });\n      }\n    });\n    model.setIconStatus(type, 'emphasis');\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: seriesIndex == null ? null : {\n        seriesIndex: seriesIndex\n      }\n    }, generateNewSeriesTypes);\n    var newTitle;\n    var currentType = type;\n    // Change title of stack\n    if (type === 'stack') {\n      // use titles in model instead of ecModel\n      // as stack and tiled appears in pair, just flip them\n      // no need of checking stack state\n      newTitle = zrUtil.merge({\n        stack: model.option.title.tiled,\n        tiled: model.option.title.stack\n      }, model.option.title);\n      if (model.get(['iconStatus', type]) !== 'emphasis') {\n        currentType = 'tiled';\n      }\n    }\n    api.dispatchAction({\n      type: 'changeMagicType',\n      currentType: currentType,\n      newOption: newOption,\n      newTitle: newTitle,\n      featureName: 'magicType'\n    });\n  };\n  return MagicType;\n}(ToolboxFeature);\nvar seriesOptGenreator = {\n  'line': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'bar') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'line',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'line']) || {}, true);\n    }\n  },\n  'bar': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'line') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'bar',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'bar']) || {}, true);\n    }\n  },\n  'stack': function (seriesType, seriesId, seriesModel, model) {\n    var isStack = seriesModel.get('stack') === INNER_STACK_KEYWORD;\n    if (seriesType === 'line' || seriesType === 'bar') {\n      model.setIconStatus('stack', isStack ? 'normal' : 'emphasis');\n      return zrUtil.merge({\n        id: seriesId,\n        stack: isStack ? '' : INNER_STACK_KEYWORD\n      }, model.get(['option', 'stack']) || {}, true);\n    }\n  }\n};\n// TODO: SELF REGISTERED.\necharts.registerAction({\n  type: 'changeMagicType',\n  event: 'magicTypeChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.mergeOption(payload.newOption);\n});\nexport default MagicType;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global document */\nimport * as echarts from '../../../core/echarts.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { addEventListener } from 'zrender/lib/core/event.js';\nimport { warn } from '../../../util/log.js';\nimport tokens from '../../../visual/tokens.js';\n/* global document */\nvar BLOCK_SPLITER = new Array(60).join('-');\nvar ITEM_SPLITER = '\\t';\n/**\n * Group series into two types\n *  1. on category axis, like line, bar\n *  2. others, like scatter, pie\n */\nfunction groupSeries(ecModel) {\n  var seriesGroupByCategoryAxis = {};\n  var otherSeries = [];\n  var meta = [];\n  ecModel.eachRawSeries(function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys && (coordSys.type === 'cartesian2d' || coordSys.type === 'polar')) {\n      // TODO: TYPE Consider polar? Include polar may increase unecessary bundle size.\n      var baseAxis = coordSys.getBaseAxis();\n      if (baseAxis.type === 'category') {\n        var key = baseAxis.dim + '_' + baseAxis.index;\n        if (!seriesGroupByCategoryAxis[key]) {\n          seriesGroupByCategoryAxis[key] = {\n            categoryAxis: baseAxis,\n            valueAxis: coordSys.getOtherAxis(baseAxis),\n            series: []\n          };\n          meta.push({\n            axisDim: baseAxis.dim,\n            axisIndex: baseAxis.index\n          });\n        }\n        seriesGroupByCategoryAxis[key].series.push(seriesModel);\n      } else {\n        otherSeries.push(seriesModel);\n      }\n    } else {\n      otherSeries.push(seriesModel);\n    }\n  });\n  return {\n    seriesGroupByCategoryAxis: seriesGroupByCategoryAxis,\n    other: otherSeries,\n    meta: meta\n  };\n}\n/**\n * Assemble content of series on cateogory axis\n * @inner\n */\nfunction assembleSeriesWithCategoryAxis(groups) {\n  var tables = [];\n  zrUtil.each(groups, function (group, key) {\n    var categoryAxis = group.categoryAxis;\n    var valueAxis = group.valueAxis;\n    var valueAxisDim = valueAxis.dim;\n    var headers = [' '].concat(zrUtil.map(group.series, function (series) {\n      return series.name;\n    }));\n    // @ts-ignore TODO Polar\n    var columns = [categoryAxis.model.getCategories()];\n    zrUtil.each(group.series, function (series) {\n      var rawData = series.getRawData();\n      columns.push(series.getRawData().mapArray(rawData.mapDimension(valueAxisDim), function (val) {\n        return val;\n      }));\n    });\n    // Assemble table content\n    var lines = [headers.join(ITEM_SPLITER)];\n    for (var i = 0; i < columns[0].length; i++) {\n      var items = [];\n      for (var j = 0; j < columns.length; j++) {\n        items.push(columns[j][i]);\n      }\n      lines.push(items.join(ITEM_SPLITER));\n    }\n    tables.push(lines.join('\\n'));\n  });\n  return tables.join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n/**\n * Assemble content of other series\n */\nfunction assembleOtherSeries(series) {\n  return zrUtil.map(series, function (series) {\n    var data = series.getRawData();\n    var lines = [series.name];\n    var vals = [];\n    data.each(data.dimensions, function () {\n      var argLen = arguments.length;\n      var dataIndex = arguments[argLen - 1];\n      var name = data.getName(dataIndex);\n      for (var i = 0; i < argLen - 1; i++) {\n        vals[i] = arguments[i];\n      }\n      lines.push((name ? name + ITEM_SPLITER : '') + vals.join(ITEM_SPLITER));\n    });\n    return lines.join('\\n');\n  }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\nfunction getContentFromModel(ecModel) {\n  var result = groupSeries(ecModel);\n  return {\n    value: zrUtil.filter([assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis), assembleOtherSeries(result.other)], function (str) {\n      return !!str.replace(/[\\n\\t\\s]/g, '');\n    }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n'),\n    meta: result.meta\n  };\n}\nfunction trim(str) {\n  return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n}\n/**\n * If a block is tsv format\n */\nfunction isTSVFormat(block) {\n  // Simple method to find out if a block is tsv format\n  var firstLine = block.slice(0, block.indexOf('\\n'));\n  if (firstLine.indexOf(ITEM_SPLITER) >= 0) {\n    return true;\n  }\n}\nvar itemSplitRegex = new RegExp('[' + ITEM_SPLITER + ']+', 'g');\n/**\n * @param {string} tsv\n * @return {Object}\n */\nfunction parseTSVContents(tsv) {\n  var tsvLines = tsv.split(/\\n+/g);\n  var headers = trim(tsvLines.shift()).split(itemSplitRegex);\n  var categories = [];\n  var series = zrUtil.map(headers, function (header) {\n    return {\n      name: header,\n      data: []\n    };\n  });\n  for (var i = 0; i < tsvLines.length; i++) {\n    var items = trim(tsvLines[i]).split(itemSplitRegex);\n    categories.push(items.shift());\n    for (var j = 0; j < items.length; j++) {\n      series[j] && (series[j].data[i] = items[j]);\n    }\n  }\n  return {\n    series: series,\n    categories: categories\n  };\n}\nfunction parseListContents(str) {\n  var lines = str.split(/\\n+/g);\n  var seriesName = trim(lines.shift());\n  var data = [];\n  for (var i = 0; i < lines.length; i++) {\n    // if line is empty, ignore it.\n    // there is a case that a user forgot to delete `\\n`.\n    var line = trim(lines[i]);\n    if (!line) {\n      continue;\n    }\n    var items = line.split(itemSplitRegex);\n    var name_1 = '';\n    var value = void 0;\n    var hasName = false;\n    if (isNaN(items[0])) {\n      // First item is name\n      hasName = true;\n      name_1 = items[0];\n      items = items.slice(1);\n      data[i] = {\n        name: name_1,\n        value: []\n      };\n      value = data[i].value;\n    } else {\n      value = data[i] = [];\n    }\n    for (var j = 0; j < items.length; j++) {\n      value.push(+items[j]);\n    }\n    if (value.length === 1) {\n      hasName ? data[i].value = value[0] : data[i] = value[0];\n    }\n  }\n  return {\n    name: seriesName,\n    data: data\n  };\n}\nfunction parseContents(str, blockMetaList) {\n  var blocks = str.split(new RegExp('\\n*' + BLOCK_SPLITER + '\\n*', 'g'));\n  var newOption = {\n    series: []\n  };\n  zrUtil.each(blocks, function (block, idx) {\n    if (isTSVFormat(block)) {\n      var result = parseTSVContents(block);\n      var blockMeta = blockMetaList[idx];\n      var axisKey = blockMeta.axisDim + 'Axis';\n      if (blockMeta) {\n        newOption[axisKey] = newOption[axisKey] || [];\n        newOption[axisKey][blockMeta.axisIndex] = {\n          data: result.categories\n        };\n        newOption.series = newOption.series.concat(result.series);\n      }\n    } else {\n      var result = parseListContents(block);\n      newOption.series.push(result);\n    }\n  });\n  return newOption;\n}\nvar DataView = /** @class */function (_super) {\n  __extends(DataView, _super);\n  function DataView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  DataView.prototype.onclick = function (ecModel, api) {\n    // FIXME: better way?\n    setTimeout(function () {\n      api.dispatchAction({\n        type: 'hideTip'\n      });\n    });\n    var container = api.getDom();\n    var model = this.model;\n    if (this._dom) {\n      container.removeChild(this._dom);\n    }\n    var root = document.createElement('div');\n    // use padding to avoid 5px whitespace\n    root.style.cssText = 'position:absolute;top:0;bottom:0;left:0;right:0;padding:5px';\n    root.style.backgroundColor = model.get('backgroundColor') || tokens.color.neutral00;\n    // Create elements\n    var header = document.createElement('h4');\n    var lang = model.get('lang') || [];\n    header.innerHTML = lang[0] || model.get('title');\n    header.style.cssText = 'margin:10px 20px';\n    header.style.color = model.get('textColor');\n    var viewMain = document.createElement('div');\n    var textarea = document.createElement('textarea');\n    viewMain.style.cssText = 'overflow:auto';\n    var optionToContent = model.get('optionToContent');\n    var contentToOption = model.get('contentToOption');\n    var result = getContentFromModel(ecModel);\n    if (zrUtil.isFunction(optionToContent)) {\n      var htmlOrDom = optionToContent(api.getOption());\n      if (zrUtil.isString(htmlOrDom)) {\n        viewMain.innerHTML = htmlOrDom;\n      } else if (zrUtil.isDom(htmlOrDom)) {\n        viewMain.appendChild(htmlOrDom);\n      }\n    } else {\n      // Use default textarea\n      textarea.readOnly = model.get('readOnly');\n      var style = textarea.style;\n      // eslint-disable-next-line max-len\n      style.cssText = 'display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none';\n      style.color = model.get('textColor');\n      style.borderColor = model.get('textareaBorderColor');\n      style.backgroundColor = model.get('textareaColor');\n      textarea.value = result.value;\n      viewMain.appendChild(textarea);\n    }\n    var blockMetaList = result.meta;\n    var buttonContainer = document.createElement('div');\n    buttonContainer.style.cssText = 'position:absolute;bottom:5px;left:0;right:0';\n    // eslint-disable-next-line max-len\n    var buttonStyle = 'float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px';\n    var closeButton = document.createElement('div');\n    var refreshButton = document.createElement('div');\n    buttonStyle += ';background-color:' + model.get('buttonColor');\n    buttonStyle += ';color:' + model.get('buttonTextColor');\n    var self = this;\n    function close() {\n      container.removeChild(root);\n      self._dom = null;\n    }\n    addEventListener(closeButton, 'click', close);\n    addEventListener(refreshButton, 'click', function () {\n      if (contentToOption == null && optionToContent != null || contentToOption != null && optionToContent == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          // eslint-disable-next-line\n          warn('It seems you have just provided one of `contentToOption` and `optionToContent` functions but missed the other one. Data change is ignored.');\n        }\n        close();\n        return;\n      }\n      var newOption;\n      try {\n        if (zrUtil.isFunction(contentToOption)) {\n          newOption = contentToOption(viewMain, api.getOption());\n        } else {\n          newOption = parseContents(textarea.value, blockMetaList);\n        }\n      } catch (e) {\n        close();\n        throw new Error('Data view format error ' + e);\n      }\n      if (newOption) {\n        api.dispatchAction({\n          type: 'changeDataView',\n          newOption: newOption\n        });\n      }\n      close();\n    });\n    closeButton.innerHTML = lang[1];\n    refreshButton.innerHTML = lang[2];\n    refreshButton.style.cssText = closeButton.style.cssText = buttonStyle;\n    !model.get('readOnly') && buttonContainer.appendChild(refreshButton);\n    buttonContainer.appendChild(closeButton);\n    root.appendChild(header);\n    root.appendChild(viewMain);\n    root.appendChild(buttonContainer);\n    viewMain.style.height = container.clientHeight - 80 + 'px';\n    container.appendChild(root);\n    this._dom = root;\n  };\n  DataView.prototype.remove = function (ecModel, api) {\n    this._dom && api.getDom().removeChild(this._dom);\n  };\n  DataView.prototype.dispose = function (ecModel, api) {\n    this.remove(ecModel, api);\n  };\n  DataView.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      readOnly: false,\n      optionToContent: null,\n      contentToOption: null,\n      // eslint-disable-next-line\n      icon: 'M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28',\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'title']),\n      lang: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'lang']),\n      backgroundColor: tokens.color.background,\n      textColor: tokens.color.primary,\n      textareaColor: tokens.color.background,\n      textareaBorderColor: tokens.color.border,\n      buttonColor: tokens.color.accent50,\n      buttonTextColor: tokens.color.neutral00\n    };\n    return defaultOption;\n  };\n  return DataView;\n}(ToolboxFeature);\n/**\n * @inner\n */\nfunction tryMergeDataOption(newData, originalData) {\n  return zrUtil.map(newData, function (newVal, idx) {\n    var original = originalData && originalData[idx];\n    if (zrUtil.isObject(original) && !zrUtil.isArray(original)) {\n      var newValIsObject = zrUtil.isObject(newVal) && !zrUtil.isArray(newVal);\n      if (!newValIsObject) {\n        newVal = {\n          value: newVal\n        };\n      }\n      // original data has name but new data has no name\n      var shouldDeleteName = original.name != null && newVal.name == null;\n      // Original data has option\n      newVal = zrUtil.defaults(newVal, original);\n      shouldDeleteName && delete newVal.name;\n      return newVal;\n    } else {\n      return newVal;\n    }\n  });\n}\n// TODO: SELF REGISTERED.\necharts.registerAction({\n  type: 'changeDataView',\n  event: 'dataViewChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  var newSeriesOptList = [];\n  zrUtil.each(payload.newOption.series, function (seriesOpt) {\n    var seriesModel = ecModel.getSeriesByName(seriesOpt.name)[0];\n    if (!seriesModel) {\n      // New created series\n      // Geuss the series type\n      newSeriesOptList.push(zrUtil.extend({\n        // Default is scatter\n        type: 'scatter'\n      }, seriesOpt));\n    } else {\n      var originalData = seriesModel.get('data');\n      newSeriesOptList.push({\n        name: seriesOpt.name,\n        data: tryMergeDataOption(seriesOpt.data, originalData)\n      });\n    }\n  });\n  ecModel.mergeOption(zrUtil.defaults({\n    series: newSeriesOptList\n  }, payload.newOption));\n});\nexport default DataView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nvar each = zrUtil.each;\nvar inner = makeInner();\n/**\n * @param ecModel\n * @param newSnapshot key is dataZoomId\n */\nexport function push(ecModel, newSnapshot) {\n  var storedSnapshots = getStoreSnapshots(ecModel);\n  // If previous dataZoom can not be found,\n  // complete an range with current range.\n  each(newSnapshot, function (batchItem, dataZoomId) {\n    var i = storedSnapshots.length - 1;\n    for (; i >= 0; i--) {\n      var snapshot = storedSnapshots[i];\n      if (snapshot[dataZoomId]) {\n        break;\n      }\n    }\n    if (i < 0) {\n      // No origin range set, create one by current range.\n      var dataZoomModel = ecModel.queryComponents({\n        mainType: 'dataZoom',\n        subType: 'select',\n        id: dataZoomId\n      })[0];\n      if (dataZoomModel) {\n        var percentRange = dataZoomModel.getPercentRange();\n        storedSnapshots[0][dataZoomId] = {\n          dataZoomId: dataZoomId,\n          start: percentRange[0],\n          end: percentRange[1]\n        };\n      }\n    }\n  });\n  storedSnapshots.push(newSnapshot);\n}\nexport function pop(ecModel) {\n  var storedSnapshots = getStoreSnapshots(ecModel);\n  var head = storedSnapshots[storedSnapshots.length - 1];\n  storedSnapshots.length > 1 && storedSnapshots.pop();\n  // Find top for all dataZoom.\n  var snapshot = {};\n  each(head, function (batchItem, dataZoomId) {\n    for (var i = storedSnapshots.length - 1; i >= 0; i--) {\n      batchItem = storedSnapshots[i][dataZoomId];\n      if (batchItem) {\n        snapshot[dataZoomId] = batchItem;\n        break;\n      }\n    }\n  });\n  return snapshot;\n}\nexport function clear(ecModel) {\n  inner(ecModel).snapshots = null;\n}\nexport function count(ecModel) {\n  return getStoreSnapshots(ecModel).length;\n}\n/**\n * History length of each dataZoom may be different.\n * this._history[0] is used to store origin range.\n */\nfunction getStoreSnapshots(ecModel) {\n  var store = inner(ecModel);\n  if (!store.snapshots) {\n    store.snapshots = [{}];\n  }\n  return store.snapshots;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts.js';\nimport * as history from '../../dataZoom/history.js';\nimport { ToolboxFeature } from '../featureManager.js';\nvar RestoreOption = /** @class */function (_super) {\n  __extends(RestoreOption, _super);\n  function RestoreOption() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  RestoreOption.prototype.onclick = function (ecModel, api) {\n    history.clear(ecModel);\n    api.dispatchAction({\n      type: 'restore',\n      from: this.uid\n    });\n  };\n  RestoreOption.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      // eslint-disable-next-line\n      icon: 'M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5',\n      title: ecModel.getLocaleModel().get(['toolbox', 'restore', 'title'])\n    };\n    return defaultOption;\n  };\n  return RestoreOption;\n}(ToolboxFeature);\n// TODO: SELF REGISTERED.\necharts.registerAction({\n  type: 'restore',\n  event: 'restore',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.resetOption('recreate');\n});\nexport default RestoreOption;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, indexOf, curry, assert, map, createHashMap } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as brushHelper from './brushHelper.js';\nimport { parseFinder as modelUtilParseFinder } from '../../util/model.js';\n// FIXME\n// how to genarialize to more coordinate systems.\nvar INCLUDE_FINDER_MAIN_TYPES = ['grid', 'xAxis', 'yAxis', 'geo', 'graph', 'polar', 'radiusAxis', 'angleAxis', 'bmap'];\nvar BrushTargetManager = /** @class */function () {\n  /**\n   * @param finder contains Index/Id/Name of xAxis/yAxis/geo/grid\n   *        Each can be {number|Array.<number>}. like: {xAxisIndex: [3, 4]}\n   * @param opt.include include coordinate system types.\n   */\n  function BrushTargetManager(finder, ecModel, opt) {\n    var _this = this;\n    this._targetInfoList = [];\n    var foundCpts = parseFinder(ecModel, finder);\n    each(targetInfoBuilders, function (builder, type) {\n      if (!opt || !opt.include || indexOf(opt.include, type) >= 0) {\n        builder(foundCpts, _this._targetInfoList);\n      }\n    });\n  }\n  BrushTargetManager.prototype.setOutputRanges = function (areas, ecModel) {\n    this.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      (area.coordRanges || (area.coordRanges = [])).push(coordRange);\n      // area.coordRange is the first of area.coordRanges\n      if (!area.coordRange) {\n        area.coordRange = coordRange;\n        // In 'category' axis, coord to pixel is not reversible, so we can not\n        // rebuild range by coordRange accrately, which may bring trouble when\n        // brushing only one item. So we use __rangeOffset to rebuilding range\n        // by coordRange. And this it only used in brush component so it is no\n        // need to be adapted to coordRanges.\n        var result = coordConvert[area.brushType](0, coordSys, coordRange);\n        area.__rangeOffset = {\n          offset: diffProcessor[area.brushType](result.values, area.range, [1, 1]),\n          xyMinMax: result.xyMinMax\n        };\n      }\n    });\n    return areas;\n  };\n  BrushTargetManager.prototype.matchOutputRanges = function (areas, ecModel, cb) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n      if (targetInfo && targetInfo !== true) {\n        each(targetInfo.coordSyses, function (coordSys) {\n          var result = coordConvert[area.brushType](1, coordSys, area.range, true);\n          cb(area, result.values, coordSys, ecModel);\n        });\n      }\n    }, this);\n  };\n  /**\n   * the `areas` is `BrushModel.areas`.\n   * Called in layout stage.\n   * convert `area.coordRange` to global range and set panelId to `area.range`.\n   */\n  BrushTargetManager.prototype.setInputRanges = function (areas, ecModel) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n      if (process.env.NODE_ENV !== 'production') {\n        assert(!targetInfo || targetInfo === true || area.coordRange, 'coordRange must be specified when coord index specified.');\n        assert(!targetInfo || targetInfo !== true || area.range, 'range must be specified in global brush.');\n      }\n      area.range = area.range || [];\n      // convert coordRange to global range and set panelId.\n      if (targetInfo && targetInfo !== true) {\n        area.panelId = targetInfo.panelId;\n        // (1) area.range should always be calculate from coordRange but does\n        // not keep its original value, for the sake of the dataZoom scenario,\n        // where area.coordRange remains unchanged but area.range may be changed.\n        // (2) Only support converting one coordRange to pixel range in brush\n        // component. So do not consider `coordRanges`.\n        // (3) About __rangeOffset, see comment above.\n        var result = coordConvert[area.brushType](0, targetInfo.coordSys, area.coordRange);\n        var rangeOffset = area.__rangeOffset;\n        area.range = rangeOffset ? diffProcessor[area.brushType](result.values, rangeOffset.offset, getScales(result.xyMinMax, rangeOffset.xyMinMax)) : result.values;\n      }\n    }, this);\n  };\n  BrushTargetManager.prototype.makePanelOpts = function (api, getDefaultBrushType) {\n    return map(this._targetInfoList, function (targetInfo) {\n      var rect = targetInfo.getPanelRect();\n      return {\n        panelId: targetInfo.panelId,\n        defaultBrushType: getDefaultBrushType ? getDefaultBrushType(targetInfo) : null,\n        clipPath: brushHelper.makeRectPanelClipPath(rect),\n        isTargetByCursor: brushHelper.makeRectIsTargetByCursor(rect, api, targetInfo.coordSysModel),\n        getLinearBrushOtherExtent: brushHelper.makeLinearBrushOtherExtent(rect)\n      };\n    });\n  };\n  BrushTargetManager.prototype.controlSeries = function (area, seriesModel, ecModel) {\n    // Check whether area is bound in coord, and series do not belong to that coord.\n    // If do not do this check, some brush (like lineX) will controll all axes.\n    var targetInfo = this.findTargetInfo(area, ecModel);\n    return targetInfo === true || targetInfo && indexOf(targetInfo.coordSyses, seriesModel.coordinateSystem) >= 0;\n  };\n  /**\n   * If return Object, a coord found.\n   * If return true, global found.\n   * Otherwise nothing found.\n   */\n  BrushTargetManager.prototype.findTargetInfo = function (area, ecModel) {\n    var targetInfoList = this._targetInfoList;\n    var foundCpts = parseFinder(ecModel, area);\n    for (var i = 0; i < targetInfoList.length; i++) {\n      var targetInfo = targetInfoList[i];\n      var areaPanelId = area.panelId;\n      if (areaPanelId) {\n        if (targetInfo.panelId === areaPanelId) {\n          return targetInfo;\n        }\n      } else {\n        for (var j = 0; j < targetInfoMatchers.length; j++) {\n          if (targetInfoMatchers[j](foundCpts, targetInfo)) {\n            return targetInfo;\n          }\n        }\n      }\n    }\n    return true;\n  };\n  return BrushTargetManager;\n}();\nfunction formatMinMax(minMax) {\n  minMax[0] > minMax[1] && minMax.reverse();\n  return minMax;\n}\nfunction parseFinder(ecModel, finder) {\n  return modelUtilParseFinder(ecModel, finder, {\n    includeMainTypes: INCLUDE_FINDER_MAIN_TYPES\n  });\n}\nvar targetInfoBuilders = {\n  grid: function (foundCpts, targetInfoList) {\n    var xAxisModels = foundCpts.xAxisModels;\n    var yAxisModels = foundCpts.yAxisModels;\n    var gridModels = foundCpts.gridModels;\n    // Remove duplicated.\n    var gridModelMap = createHashMap();\n    var xAxesHas = {};\n    var yAxesHas = {};\n    if (!xAxisModels && !yAxisModels && !gridModels) {\n      return;\n    }\n    each(xAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n    });\n    each(yAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      yAxesHas[gridModel.id] = true;\n    });\n    each(gridModels, function (gridModel) {\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n      yAxesHas[gridModel.id] = true;\n    });\n    gridModelMap.each(function (gridModel) {\n      var grid = gridModel.coordinateSystem;\n      var cartesians = [];\n      each(grid.getCartesians(), function (cartesian, index) {\n        if (indexOf(xAxisModels, cartesian.getAxis('x').model) >= 0 || indexOf(yAxisModels, cartesian.getAxis('y').model) >= 0) {\n          cartesians.push(cartesian);\n        }\n      });\n      targetInfoList.push({\n        panelId: 'grid--' + gridModel.id,\n        gridModel: gridModel,\n        coordSysModel: gridModel,\n        // Use the first one as the representitive coordSys.\n        coordSys: cartesians[0],\n        coordSyses: cartesians,\n        getPanelRect: panelRectBuilders.grid,\n        xAxisDeclared: xAxesHas[gridModel.id],\n        yAxisDeclared: yAxesHas[gridModel.id]\n      });\n    });\n  },\n  geo: function (foundCpts, targetInfoList) {\n    each(foundCpts.geoModels, function (geoModel) {\n      var coordSys = geoModel.coordinateSystem;\n      targetInfoList.push({\n        panelId: 'geo--' + geoModel.id,\n        geoModel: geoModel,\n        coordSysModel: geoModel,\n        coordSys: coordSys,\n        coordSyses: [coordSys],\n        getPanelRect: panelRectBuilders.geo\n      });\n    });\n  }\n};\nvar targetInfoMatchers = [\n// grid\nfunction (foundCpts, targetInfo) {\n  var xAxisModel = foundCpts.xAxisModel;\n  var yAxisModel = foundCpts.yAxisModel;\n  var gridModel = foundCpts.gridModel;\n  !gridModel && xAxisModel && (gridModel = xAxisModel.axis.grid.model);\n  !gridModel && yAxisModel && (gridModel = yAxisModel.axis.grid.model);\n  return gridModel && gridModel === targetInfo.gridModel;\n},\n// geo\nfunction (foundCpts, targetInfo) {\n  var geoModel = foundCpts.geoModel;\n  return geoModel && geoModel === targetInfo.geoModel;\n}];\nvar panelRectBuilders = {\n  grid: function () {\n    // grid is not Transformable.\n    return this.coordSys.master.getRect().clone();\n  },\n  geo: function () {\n    var coordSys = this.coordSys;\n    var rect = coordSys.getBoundingRect().clone();\n    // geo roam and zoom transform\n    rect.applyTransform(graphic.getTransform(coordSys));\n    return rect;\n  }\n};\nvar coordConvert = {\n  lineX: curry(axisConvert, 0),\n  lineY: curry(axisConvert, 1),\n  rect: function (to, coordSys, rangeOrCoordRange, clamp) {\n    var xminymin = to ? coordSys.pointToData([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp);\n    var xmaxymax = to ? coordSys.pointToData([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp);\n    var values = [formatMinMax([xminymin[0], xmaxymax[0]]), formatMinMax([xminymin[1], xmaxymax[1]])];\n    return {\n      values: values,\n      xyMinMax: values\n    };\n  },\n  polygon: function (to, coordSys, rangeOrCoordRange, clamp) {\n    var xyMinMax = [[Infinity, -Infinity], [Infinity, -Infinity]];\n    var values = map(rangeOrCoordRange, function (item) {\n      var p = to ? coordSys.pointToData(item, clamp) : coordSys.dataToPoint(item, clamp);\n      xyMinMax[0][0] = Math.min(xyMinMax[0][0], p[0]);\n      xyMinMax[1][0] = Math.min(xyMinMax[1][0], p[1]);\n      xyMinMax[0][1] = Math.max(xyMinMax[0][1], p[0]);\n      xyMinMax[1][1] = Math.max(xyMinMax[1][1], p[1]);\n      return p;\n    });\n    return {\n      values: values,\n      xyMinMax: xyMinMax\n    };\n  }\n};\nfunction axisConvert(axisNameIndex, to, coordSys, rangeOrCoordRange) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(coordSys.type === 'cartesian2d', 'lineX/lineY brush is available only in cartesian2d.');\n  }\n  var axis = coordSys.getAxis(['x', 'y'][axisNameIndex]);\n  var values = formatMinMax(map([0, 1], function (i) {\n    return to ? axis.coordToData(axis.toLocalCoord(rangeOrCoordRange[i]), true) : axis.toGlobalCoord(axis.dataToCoord(rangeOrCoordRange[i]));\n  }));\n  var xyMinMax = [];\n  xyMinMax[axisNameIndex] = values;\n  xyMinMax[1 - axisNameIndex] = [NaN, NaN];\n  return {\n    values: values,\n    xyMinMax: xyMinMax\n  };\n}\nvar diffProcessor = {\n  lineX: curry(axisDiffProcessor, 0),\n  lineY: curry(axisDiffProcessor, 1),\n  rect: function (values, refer, scales) {\n    return [[values[0][0] - scales[0] * refer[0][0], values[0][1] - scales[0] * refer[0][1]], [values[1][0] - scales[1] * refer[1][0], values[1][1] - scales[1] * refer[1][1]]];\n  },\n  polygon: function (values, refer, scales) {\n    return map(values, function (item, idx) {\n      return [item[0] - scales[0] * refer[idx][0], item[1] - scales[1] * refer[idx][1]];\n    });\n  }\n};\nfunction axisDiffProcessor(axisNameIndex, values, refer, scales) {\n  return [values[0] - scales[axisNameIndex] * refer[0], values[1] - scales[axisNameIndex] * refer[1]];\n}\n// We have to process scale caused by dataZoom manually,\n// although it might be not accurate.\n// Return [0~1, 0~1]\nfunction getScales(xyMinMaxCurr, xyMinMaxOrigin) {\n  var sizeCurr = getSize(xyMinMaxCurr);\n  var sizeOrigin = getSize(xyMinMaxOrigin);\n  var scales = [sizeCurr[0] / sizeOrigin[0], sizeCurr[1] / sizeOrigin[1]];\n  isNaN(scales[0]) && (scales[0] = 1);\n  isNaN(scales[1]) && (scales[1] = 1);\n  return scales;\n}\nfunction getSize(xyMinMax) {\n  return xyMinMax ? [xyMinMax[0][1] - xyMinMax[0][0], xyMinMax[1][1] - xyMinMax[1][0]] : [NaN, NaN];\n}\nexport default BrushTargetManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n// TODO depends on DataZoom and Brush\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BrushController from '../../helper/BrushController.js';\nimport BrushTargetManager from '../../helper/BrushTargetManager.js';\nimport * as history from '../../dataZoom/history.js';\nimport sliderMove from '../../helper/sliderMove.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { makeInternalComponentId, parseFinder } from '../../../util/model.js';\nimport { registerInternalOptionCreator } from '../../../model/internalComponentCreator.js';\nimport tokens from '../../../visual/tokens.js';\nvar each = zrUtil.each;\nvar DATA_ZOOM_ID_BASE = makeInternalComponentId('toolbox-dataZoom_');\nvar ICON_TYPES = ['zoom', 'back'];\nvar DataZoomFeature = /** @class */function (_super) {\n  __extends(DataZoomFeature, _super);\n  function DataZoomFeature() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  DataZoomFeature.prototype.render = function (featureModel, ecModel, api, payload) {\n    if (!this._brushController) {\n      this._brushController = new BrushController(api.getZr());\n      this._brushController.on('brush', zrUtil.bind(this._onBrush, this)).mount();\n    }\n    updateZoomBtnStatus(featureModel, ecModel, this, payload, api);\n    updateBackBtnStatus(featureModel, ecModel);\n  };\n  DataZoomFeature.prototype.onclick = function (ecModel, api, type) {\n    handlers[type].call(this);\n  };\n  DataZoomFeature.prototype.remove = function (ecModel, api) {\n    this._brushController && this._brushController.unmount();\n  };\n  DataZoomFeature.prototype.dispose = function (ecModel, api) {\n    this._brushController && this._brushController.dispose();\n  };\n  DataZoomFeature.prototype._onBrush = function (eventParam) {\n    var areas = eventParam.areas;\n    if (!eventParam.isEnd || !areas.length) {\n      return;\n    }\n    var snapshot = {};\n    var ecModel = this.ecModel;\n    this._brushController.updateCovers([]); // remove cover\n    var brushTargetManager = new BrushTargetManager(makeAxisFinder(this.model), ecModel, {\n      include: ['grid']\n    });\n    brushTargetManager.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      if (coordSys.type !== 'cartesian2d') {\n        return;\n      }\n      var brushType = area.brushType;\n      if (brushType === 'rect') {\n        setBatch('x', coordSys, coordRange[0]);\n        setBatch('y', coordSys, coordRange[1]);\n      } else {\n        setBatch({\n          lineX: 'x',\n          lineY: 'y'\n        }[brushType], coordSys, coordRange);\n      }\n    });\n    history.push(ecModel, snapshot);\n    this._dispatchZoomAction(snapshot);\n    function setBatch(dimName, coordSys, minMax) {\n      var axis = coordSys.getAxis(dimName);\n      var axisModel = axis.model;\n      var dataZoomModel = findDataZoom(dimName, axisModel, ecModel);\n      // Restrict range.\n      var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy(axisModel).getMinMaxSpan();\n      if (minMaxSpan.minValueSpan != null || minMaxSpan.maxValueSpan != null) {\n        minMax = sliderMove(0, minMax.slice(), axis.scale.getExtent(), 0, minMaxSpan.minValueSpan, minMaxSpan.maxValueSpan);\n      }\n      dataZoomModel && (snapshot[dataZoomModel.id] = {\n        dataZoomId: dataZoomModel.id,\n        startValue: minMax[0],\n        endValue: minMax[1]\n      });\n    }\n    function findDataZoom(dimName, axisModel, ecModel) {\n      var found;\n      ecModel.eachComponent({\n        mainType: 'dataZoom',\n        subType: 'select'\n      }, function (dzModel) {\n        var has = dzModel.getAxisModel(dimName, axisModel.componentIndex);\n        has && (found = dzModel);\n      });\n      return found;\n    }\n  };\n  ;\n  DataZoomFeature.prototype._dispatchZoomAction = function (snapshot) {\n    var batch = [];\n    // Convert from hash map to array.\n    each(snapshot, function (batchItem, dataZoomId) {\n      batch.push(zrUtil.clone(batchItem));\n    });\n    batch.length && this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      batch: batch\n    });\n  };\n  DataZoomFeature.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      filterMode: 'filter',\n      // Icon group\n      icon: {\n        zoom: 'M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1',\n        back: 'M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26'\n      },\n      // `zoom`, `back`\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataZoom', 'title']),\n      brushStyle: {\n        borderWidth: 0,\n        color: tokens.color.backgroundTint\n      }\n    };\n    return defaultOption;\n  };\n  return DataZoomFeature;\n}(ToolboxFeature);\nvar handlers = {\n  zoom: function () {\n    var nextActive = !this._isZoomActive;\n    this.api.dispatchAction({\n      type: 'takeGlobalCursor',\n      key: 'dataZoomSelect',\n      dataZoomSelectActive: nextActive\n    });\n  },\n  back: function () {\n    this._dispatchZoomAction(history.pop(this.ecModel));\n  }\n};\nfunction makeAxisFinder(dzFeatureModel) {\n  var setting = {\n    xAxisIndex: dzFeatureModel.get('xAxisIndex', true),\n    yAxisIndex: dzFeatureModel.get('yAxisIndex', true),\n    xAxisId: dzFeatureModel.get('xAxisId', true),\n    yAxisId: dzFeatureModel.get('yAxisId', true)\n  };\n  // If both `xAxisIndex` `xAxisId` not set, it means 'all'.\n  // If both `yAxisIndex` `yAxisId` not set, it means 'all'.\n  // Some old cases set like this below to close yAxis control but leave xAxis control:\n  // `{ feature: { dataZoom: { yAxisIndex: false } }`.\n  if (setting.xAxisIndex == null && setting.xAxisId == null) {\n    setting.xAxisIndex = 'all';\n  }\n  if (setting.yAxisIndex == null && setting.yAxisId == null) {\n    setting.yAxisIndex = 'all';\n  }\n  return setting;\n}\nfunction updateBackBtnStatus(featureModel, ecModel) {\n  featureModel.setIconStatus('back', history.count(ecModel) > 1 ? 'emphasis' : 'normal');\n}\nfunction updateZoomBtnStatus(featureModel, ecModel, view, payload, api) {\n  var zoomActive = view._isZoomActive;\n  if (payload && payload.type === 'takeGlobalCursor') {\n    zoomActive = payload.key === 'dataZoomSelect' ? payload.dataZoomSelectActive : false;\n  }\n  view._isZoomActive = zoomActive;\n  featureModel.setIconStatus('zoom', zoomActive ? 'emphasis' : 'normal');\n  var brushTargetManager = new BrushTargetManager(makeAxisFinder(featureModel), ecModel, {\n    include: ['grid']\n  });\n  var panels = brushTargetManager.makePanelOpts(api, function (targetInfo) {\n    return targetInfo.xAxisDeclared && !targetInfo.yAxisDeclared ? 'lineX' : !targetInfo.xAxisDeclared && targetInfo.yAxisDeclared ? 'lineY' : 'rect';\n  });\n  view._brushController.setPanels(panels).enableBrush(zoomActive && panels.length ? {\n    brushType: 'auto',\n    brushStyle: featureModel.getModel('brushStyle').getItemStyle()\n  } : false);\n}\nregisterInternalOptionCreator('dataZoom', function (ecModel) {\n  var toolboxModel = ecModel.getComponent('toolbox', 0);\n  var featureDataZoomPath = ['feature', 'dataZoom'];\n  if (!toolboxModel || toolboxModel.get(featureDataZoomPath) == null) {\n    return;\n  }\n  var dzFeatureModel = toolboxModel.getModel(featureDataZoomPath);\n  var dzOptions = [];\n  var finder = makeAxisFinder(dzFeatureModel);\n  var finderResult = parseFinder(ecModel, finder);\n  each(finderResult.xAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'xAxis', 'xAxisIndex');\n  });\n  each(finderResult.yAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'yAxis', 'yAxisIndex');\n  });\n  function buildInternalOptions(axisModel, axisMainType, axisIndexPropName) {\n    var axisIndex = axisModel.componentIndex;\n    var newOpt = {\n      type: 'select',\n      $fromToolbox: true,\n      // Default to be filter\n      filterMode: dzFeatureModel.get('filterMode', true) || 'filter',\n      // Id for merge mapping.\n      id: DATA_ZOOM_ID_BASE + axisMainType + axisIndex\n    };\n    newOpt[axisIndexPropName] = axisIndex;\n    dzOptions.push(newOpt);\n  }\n  return dzOptions;\n});\nexport default DataZoomFeature;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport { install as installDataZoomSelect } from '../../component/dataZoom/installDataZoomSelect.js';\nimport ToolboxModel from './ToolboxModel.js';\nimport ToolboxView from './ToolboxView.js';\n// TODOD: REGISTER IN INSTALL\nimport { registerFeature } from './featureManager.js';\nimport SaveAsImage from './feature/SaveAsImage.js';\nimport MagicType from './feature/MagicType.js';\nimport DataView from './feature/DataView.js';\nimport Restore from './feature/Restore.js';\nimport DataZoom from './feature/DataZoom.js';\nexport function install(registers) {\n  registers.registerComponentModel(ToolboxModel);\n  registers.registerComponentView(ToolboxView);\n  registerFeature('saveAsImage', SaveAsImage);\n  registerFeature('magicType', MagicType);\n  registerFeature('dataView', DataView);\n  registerFeature('dataZoom', DataZoom);\n  registerFeature('restore', Restore);\n  use(installDataZoomSelect);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nimport tokens from '../../visual/tokens.js';\nvar TooltipModel = /** @class */function (_super) {\n  __extends(TooltipModel, _super);\n  function TooltipModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TooltipModel.type;\n    return _this;\n  }\n  TooltipModel.type = 'tooltip';\n  TooltipModel.dependencies = ['axisPointer'];\n  TooltipModel.defaultOption = {\n    // zlevel: 0,\n    z: 60,\n    show: true,\n    // tooltip main content\n    showContent: true,\n    // 'trigger' only works on coordinate system.\n    // 'item' | 'axis' | 'none'\n    trigger: 'item',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: 'mousemove|click',\n    alwaysShowContent: false,\n    renderMode: 'auto',\n    // whether restraint content inside viewRect.\n    // If renderMode: 'richText', default true.\n    // If renderMode: 'html', defaults to `false` (for backward compat).\n    confine: null,\n    showDelay: 0,\n    hideDelay: 100,\n    // Animation transition time, unit is second\n    transitionDuration: 0.4,\n    displayTransition: true,\n    enterable: false,\n    backgroundColor: tokens.color.neutral00,\n    // box shadow\n    shadowBlur: 10,\n    shadowColor: 'rgba(0, 0, 0, .2)',\n    shadowOffsetX: 1,\n    shadowOffsetY: 2,\n    // tooltip border radius, unit is px, default is 4\n    borderRadius: 4,\n    // tooltip border width, unit is px, default is 0 (no border)\n    borderWidth: 1,\n    defaultBorderColor: tokens.color.border,\n    // Tooltip inside padding, default is 5 for all direction\n    // Array is allowed to set up, right, bottom, left, same with css\n    // The default value: See `tooltip/tooltipMarkup.ts#getPaddingFromTooltipModel`.\n    padding: null,\n    // Extra css text\n    extraCssText: '',\n    // axis indicator, trigger by axis\n    axisPointer: {\n      // default is line\n      // legal values: 'line' | 'shadow' | 'cross'\n      type: 'line',\n      // Valid when type is line, appoint tooltip line locate on which line. Optional\n      // legal values: 'x' | 'y' | 'angle' | 'radius' | 'auto'\n      // default is 'auto', chose the axis which type is category.\n      // for multiply y axis, cartesian coord chose x axis, polar chose angle axis\n      axis: 'auto',\n      animation: 'auto',\n      animationDurationUpdate: 200,\n      animationEasingUpdate: 'exponentialOut',\n      crossStyle: {\n        color: tokens.color.borderShade,\n        width: 1,\n        type: 'dashed',\n        // TODO formatter\n        textStyle: {}\n      }\n      // lineStyle and shadowStyle should not be specified here,\n      // otherwise it will always override those styles on option.axisPointer.\n    },\n    textStyle: {\n      color: tokens.color.tertiary,\n      fontSize: 14\n    }\n  };\n  return TooltipModel;\n}(ComponentModel);\nexport default TooltipModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { toCamelCase } from '../../util/format.js';\nimport env from 'zrender/lib/core/env.js';\n/* global document */\nexport function shouldTooltipConfine(tooltipModel) {\n  var confineOption = tooltipModel.get('confine');\n  return confineOption != null ? !!confineOption\n  // In richText mode, the outside part can not be visible.\n  : tooltipModel.get('renderMode') === 'richText';\n}\nfunction testStyle(styleProps) {\n  if (!env.domSupported) {\n    return;\n  }\n  var style = document.documentElement.style;\n  for (var i = 0, len = styleProps.length; i < len; i++) {\n    if (styleProps[i] in style) {\n      return styleProps[i];\n    }\n  }\n}\nexport var TRANSFORM_VENDOR = testStyle(['transform', 'webkitTransform', 'OTransform', 'MozTransform', 'msTransform']);\nexport var TRANSITION_VENDOR = testStyle(['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);\nexport function toCSSVendorPrefix(styleVendor, styleProp) {\n  if (!styleVendor) {\n    return styleProp;\n  }\n  styleProp = toCamelCase(styleProp, true);\n  var idx = styleVendor.indexOf(styleProp);\n  styleVendor = idx === -1 ? styleProp : \"-\" + styleVendor.slice(0, idx) + \"-\" + styleProp;\n  return styleVendor.toLowerCase();\n}\nexport function getComputedStyle(el, style) {\n  var stl = el.currentStyle || document.defaultView && document.defaultView.getComputedStyle(el);\n  return stl ? style ? stl[style] : stl : null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isString, indexOf, each, bind, isFunction, isArray, isDom, retrieve2 } from 'zrender/lib/core/util.js';\nimport { normalizeEvent } from 'zrender/lib/core/event.js';\nimport { transformLocalCoord, transformLocalCoordClear } from 'zrender/lib/core/dom.js';\nimport env from 'zrender/lib/core/env.js';\nimport { convertToColorString, toCamelCase, normalizeCssArray } from '../../util/format.js';\nimport { shouldTooltipConfine, toCSSVendorPrefix, getComputedStyle, TRANSFORM_VENDOR, TRANSITION_VENDOR } from './helper.js';\nimport { getPaddingFromTooltipModel } from './tooltipMarkup.js';\n/* global document, window */\nvar CSS_TRANSITION_VENDOR = toCSSVendorPrefix(TRANSITION_VENDOR, 'transition');\nvar CSS_TRANSFORM_VENDOR = toCSSVendorPrefix(TRANSFORM_VENDOR, 'transform');\n// eslint-disable-next-line\nvar gCssText = \"position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;\" + (env.transform3dSupported ? 'will-change:transform;' : '');\nfunction mirrorPos(pos) {\n  pos = pos === 'left' ? 'right' : pos === 'right' ? 'left' : pos === 'top' ? 'bottom' : 'top';\n  return pos;\n}\nfunction assembleArrow(tooltipModel, borderColor, arrowPosition) {\n  if (!isString(arrowPosition) || arrowPosition === 'inside') {\n    return '';\n  }\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var borderWidth = tooltipModel.get('borderWidth');\n  borderColor = convertToColorString(borderColor);\n  var arrowPos = mirrorPos(arrowPosition);\n  var arrowSize = Math.max(Math.round(borderWidth) * 1.5, 6);\n  var positionStyle = '';\n  var transformStyle = CSS_TRANSFORM_VENDOR + ':';\n  var rotateDeg;\n  if (indexOf(['left', 'right'], arrowPos) > -1) {\n    positionStyle += 'top:50%';\n    transformStyle += \"translateY(-50%) rotate(\" + (rotateDeg = arrowPos === 'left' ? -225 : -45) + \"deg)\";\n  } else {\n    positionStyle += 'left:50%';\n    transformStyle += \"translateX(-50%) rotate(\" + (rotateDeg = arrowPos === 'top' ? 225 : 45) + \"deg)\";\n  }\n  var rotateRadian = rotateDeg * Math.PI / 180;\n  var arrowWH = arrowSize + borderWidth;\n  var rotatedWH = arrowWH * Math.abs(Math.cos(rotateRadian)) + arrowWH * Math.abs(Math.sin(rotateRadian));\n  var arrowOffset = Math.round(((rotatedWH - Math.SQRT2 * borderWidth) / 2 + Math.SQRT2 * borderWidth - (rotatedWH - arrowWH) / 2) * 100) / 100;\n  positionStyle += \";\" + arrowPos + \":-\" + arrowOffset + \"px\";\n  var borderStyle = borderColor + \" solid \" + borderWidth + \"px;\";\n  var styleCss = [\"position:absolute;width:\" + arrowSize + \"px;height:\" + arrowSize + \"px;z-index:-1;\", positionStyle + \";\" + transformStyle + \";\", \"border-bottom:\" + borderStyle, \"border-right:\" + borderStyle, \"background-color:\" + backgroundColor + \";\"];\n  return \"<div style=\\\"\" + styleCss.join('') + \"\\\"></div>\";\n}\nfunction assembleTransition(duration, onlyFadeTransition, enableDisplayTransition) {\n  var transitionCurve = 'cubic-bezier(0.23,1,0.32,1)';\n  var transitionOption = '';\n  var transitionText = '';\n  if (enableDisplayTransition) {\n    transitionOption = \" \" + duration / 2 + \"s \" + transitionCurve;\n    transitionText = \"opacity\" + transitionOption + \",visibility\" + transitionOption;\n  }\n  if (!onlyFadeTransition) {\n    transitionOption = \" \" + duration + \"s \" + transitionCurve;\n    transitionText += (transitionText.length ? ',' : '') + (env.transformSupported ? \"\" + CSS_TRANSFORM_VENDOR + transitionOption : \",left\" + transitionOption + \",top\" + transitionOption);\n  }\n  return CSS_TRANSITION_VENDOR + ':' + transitionText;\n}\nfunction assembleTransform(x, y, toString) {\n  // If using float on style, the final width of the dom might\n  // keep changing slightly while mouse move. So `toFixed(0)` them.\n  var x0 = x.toFixed(0) + 'px';\n  var y0 = y.toFixed(0) + 'px';\n  // not support transform, use `left` and `top` instead.\n  if (!env.transformSupported) {\n    return toString ? \"top:\" + y0 + \";left:\" + x0 + \";\" : [['top', y0], ['left', x0]];\n  }\n  // support transform\n  var is3d = env.transform3dSupported;\n  var translate = \"translate\" + (is3d ? '3d' : '') + \"(\" + x0 + \",\" + y0 + (is3d ? ',0' : '') + \")\";\n  return toString ? 'top:0;left:0;' + CSS_TRANSFORM_VENDOR + ':' + translate + ';' : [['top', 0], ['left', 0], [TRANSFORM_VENDOR, translate]];\n}\n/**\n * @param {Object} textStyle\n * @return {string}\n * @inner\n */\nfunction assembleFont(textStyleModel) {\n  var cssText = [];\n  var fontSize = textStyleModel.get('fontSize');\n  var color = textStyleModel.getTextColor();\n  color && cssText.push('color:' + color);\n  cssText.push('font:' + textStyleModel.getFont());\n  // @ts-ignore, leave it to the tooltip refactor.\n  var lineHeight = retrieve2(textStyleModel.get('lineHeight'), Math.round(fontSize * 3 / 2));\n  fontSize && cssText.push('line-height:' + lineHeight + 'px');\n  var shadowColor = textStyleModel.get('textShadowColor');\n  var shadowBlur = textStyleModel.get('textShadowBlur') || 0;\n  var shadowOffsetX = textStyleModel.get('textShadowOffsetX') || 0;\n  var shadowOffsetY = textStyleModel.get('textShadowOffsetY') || 0;\n  shadowColor && shadowBlur && cssText.push('text-shadow:' + shadowOffsetX + 'px ' + shadowOffsetY + 'px ' + shadowBlur + 'px ' + shadowColor);\n  each(['decoration', 'align'], function (name) {\n    var val = textStyleModel.get(name);\n    val && cssText.push('text-' + name + ':' + val);\n  });\n  return cssText.join(';');\n}\nfunction assembleCssText(tooltipModel, enableTransition, onlyFadeTransition, enableDisplayTransition) {\n  var cssText = [];\n  var transitionDuration = tooltipModel.get('transitionDuration');\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var shadowBlur = tooltipModel.get('shadowBlur');\n  var shadowColor = tooltipModel.get('shadowColor');\n  var shadowOffsetX = tooltipModel.get('shadowOffsetX');\n  var shadowOffsetY = tooltipModel.get('shadowOffsetY');\n  var textStyleModel = tooltipModel.getModel('textStyle');\n  var padding = getPaddingFromTooltipModel(tooltipModel, 'html');\n  var boxShadow = shadowOffsetX + \"px \" + shadowOffsetY + \"px \" + shadowBlur + \"px \" + shadowColor;\n  cssText.push('box-shadow:' + boxShadow);\n  // Animation transition. Do not animate when transitionDuration <= 0.\n  enableTransition && transitionDuration > 0 && cssText.push(assembleTransition(transitionDuration, onlyFadeTransition, enableDisplayTransition));\n  if (backgroundColor) {\n    cssText.push('background-color:' + backgroundColor);\n  }\n  // Border style\n  each(['width', 'color', 'radius'], function (name) {\n    var borderName = 'border-' + name;\n    var camelCase = toCamelCase(borderName);\n    var val = tooltipModel.get(camelCase);\n    val != null && cssText.push(borderName + ':' + val + (name === 'color' ? '' : 'px'));\n  });\n  // Text style\n  cssText.push(assembleFont(textStyleModel));\n  // Padding\n  if (padding != null) {\n    cssText.push('padding:' + normalizeCssArray(padding).join('px ') + 'px');\n  }\n  return cssText.join(';') + ';';\n}\n// If not able to make, do not modify the input `out`.\nfunction makeStyleCoord(out, zr, container, zrX, zrY) {\n  var zrPainter = zr && zr.painter;\n  if (container) {\n    var zrViewportRoot = zrPainter && zrPainter.getViewportRoot();\n    if (zrViewportRoot) {\n      // Some APPs might use scale on body, so we support CSS transform here.\n      transformLocalCoord(out, zrViewportRoot, container, zrX, zrY);\n    }\n  } else {\n    out[0] = zrX;\n    out[1] = zrY;\n    // xy should be based on canvas root. But tooltipContent is\n    // the sibling of canvas root. So padding of ec container\n    // should be considered here.\n    var viewportRootOffset = zrPainter && zrPainter.getViewportRootOffset();\n    if (viewportRootOffset) {\n      out[0] += viewportRootOffset.offsetLeft;\n      out[1] += viewportRootOffset.offsetTop;\n    }\n  }\n  out[2] = out[0] / zr.getWidth();\n  out[3] = out[1] / zr.getHeight();\n}\nvar TooltipHTMLContent = /** @class */function () {\n  function TooltipHTMLContent(api, opt) {\n    this._show = false;\n    this._styleCoord = [0, 0, 0, 0];\n    this._enterable = true;\n    this._alwaysShowContent = false;\n    this._firstShow = true;\n    this._longHide = true;\n    if (env.wxa) {\n      return null;\n    }\n    var el = document.createElement('div');\n    // TODO: TYPE\n    el.domBelongToZr = true;\n    this.el = el;\n    var zr = this._zr = api.getZr();\n    var appendTo = opt.appendTo;\n    var container = appendTo && (isString(appendTo) ? document.querySelector(appendTo) : isDom(appendTo) ? appendTo : isFunction(appendTo) && appendTo(api.getDom()));\n    makeStyleCoord(this._styleCoord, zr, container, api.getWidth() / 2, api.getHeight() / 2);\n    (container || api.getDom()).appendChild(el);\n    this._api = api;\n    this._container = container;\n    // FIXME\n    // Is it needed to trigger zr event manually if\n    // the browser do not support `pointer-events: none`.\n    var self = this;\n    el.onmouseenter = function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n      self._inContent = true;\n    };\n    el.onmousemove = function (e) {\n      e = e || window.event;\n      if (!self._enterable) {\n        // `pointer-events: none` is set to tooltip content div\n        // if `enterable` is set as `false`, and `el.onmousemove`\n        // can not be triggered. But in browser that do not\n        // support `pointer-events`, we need to do this:\n        // Try trigger zrender event to avoid mouse\n        // in and out shape too frequently\n        var handler = zr.handler;\n        var zrViewportRoot = zr.painter.getViewportRoot();\n        normalizeEvent(zrViewportRoot, e, true);\n        handler.dispatch('mousemove', e);\n      }\n    };\n    el.onmouseleave = function () {\n      // set `_inContent` to `false` before `hideLater`\n      self._inContent = false;\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n    };\n  }\n  /**\n   * Update when tooltip is rendered\n   */\n  TooltipHTMLContent.prototype.update = function (tooltipModel) {\n    // FIXME\n    // Move this logic to ec main?\n    if (!this._container) {\n      var container = this._api.getDom();\n      var position = getComputedStyle(container, 'position');\n      var domStyle = container.style;\n      if (domStyle.position !== 'absolute' && position !== 'absolute') {\n        domStyle.position = 'relative';\n      }\n    }\n    // move tooltip if chart resized\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    alwaysShowContent && this._moveIfResized();\n    // update alwaysShowContent\n    this._alwaysShowContent = alwaysShowContent;\n    this._enableDisplayTransition = tooltipModel.get('displayTransition') && tooltipModel.get('transitionDuration') > 0;\n    // update className\n    this.el.className = tooltipModel.get('className') || '';\n    // Hide the tooltip\n    // PENDING\n    // this.hide();\n  };\n  TooltipHTMLContent.prototype.show = function (tooltipModel, nearPointColor) {\n    clearTimeout(this._hideTimeout);\n    clearTimeout(this._longHideTimeout);\n    var el = this.el;\n    var style = el.style;\n    var styleCoord = this._styleCoord;\n    if (!el.innerHTML) {\n      style.display = 'none';\n    } else {\n      style.cssText = gCssText + assembleCssText(tooltipModel, !this._firstShow, this._longHide, this._enableDisplayTransition)\n      // initial transform\n      + assembleTransform(styleCoord[0], styleCoord[1], true) + (\"border-color:\" + convertToColorString(nearPointColor) + \";\") + (tooltipModel.get('extraCssText') || '')\n      // If mouse occasionally move over the tooltip, a mouseout event will be\n      // triggered by canvas, and cause some unexpectable result like dragging\n      // stop, \"unfocusAdjacency\". Here `pointer-events: none` is used to solve\n      // it. Although it is not supported by IE8~IE10, fortunately it is a rare\n      // scenario.\n      + (\";pointer-events:\" + (this._enterable ? 'auto' : 'none'));\n    }\n    this._show = true;\n    this._firstShow = false;\n    this._longHide = false;\n  };\n  TooltipHTMLContent.prototype.setContent = function (content, markers, tooltipModel, borderColor, arrowPosition) {\n    var el = this.el;\n    if (content == null) {\n      el.innerHTML = '';\n      return;\n    }\n    var arrow = '';\n    if (isString(arrowPosition) && tooltipModel.get('trigger') === 'item' && !shouldTooltipConfine(tooltipModel)) {\n      arrow = assembleArrow(tooltipModel, borderColor, arrowPosition);\n    }\n    if (isString(content)) {\n      el.innerHTML = content + arrow;\n    } else if (content) {\n      // Clear previous\n      el.innerHTML = '';\n      if (!isArray(content)) {\n        content = [content];\n      }\n      for (var i = 0; i < content.length; i++) {\n        if (isDom(content[i]) && content[i].parentNode !== el) {\n          el.appendChild(content[i]);\n        }\n      }\n      // no arrow if empty\n      if (arrow && el.childNodes.length) {\n        // no need to create a new parent element, but it's not supported by IE 10 and older.\n        // const arrowEl = document.createRange().createContextualFragment(arrow);\n        var arrowEl = document.createElement('div');\n        arrowEl.innerHTML = arrow;\n        el.appendChild(arrowEl);\n      }\n    }\n  };\n  TooltipHTMLContent.prototype.setEnterable = function (enterable) {\n    this._enterable = enterable;\n  };\n  TooltipHTMLContent.prototype.getSize = function () {\n    var el = this.el;\n    return el ? [el.offsetWidth, el.offsetHeight] : [0, 0];\n  };\n  TooltipHTMLContent.prototype.moveTo = function (zrX, zrY) {\n    if (!this.el) {\n      return;\n    }\n    var styleCoord = this._styleCoord;\n    makeStyleCoord(styleCoord, this._zr, this._container, zrX, zrY);\n    if (styleCoord[0] != null && styleCoord[1] != null) {\n      var style_1 = this.el.style;\n      var transforms = assembleTransform(styleCoord[0], styleCoord[1]);\n      each(transforms, function (transform) {\n        style_1[transform[0]] = transform[1];\n      });\n    }\n  };\n  /**\n   * when `alwaysShowContent` is true,\n   * move the tooltip after chart resized\n   */\n  TooltipHTMLContent.prototype._moveIfResized = function () {\n    // The ratio of left to width\n    var ratioX = this._styleCoord[2];\n    // The ratio of top to height\n    var ratioY = this._styleCoord[3];\n    this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\n  };\n  TooltipHTMLContent.prototype.hide = function () {\n    var _this = this;\n    var style = this.el.style;\n    if (this._enableDisplayTransition) {\n      style.visibility = 'hidden';\n      style.opacity = '0';\n    } else {\n      style.display = 'none';\n    }\n    env.transform3dSupported && (style.willChange = '');\n    this._show = false;\n    this._longHideTimeout = setTimeout(function () {\n      return _this._longHide = true;\n    }, 500);\n  };\n  TooltipHTMLContent.prototype.hideLater = function (time) {\n    if (this._show && !(this._inContent && this._enterable) && !this._alwaysShowContent) {\n      if (time) {\n        this._hideDelay = time;\n        // Set show false to avoid invoke hideLater multiple times\n        this._show = false;\n        this._hideTimeout = setTimeout(bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  };\n  TooltipHTMLContent.prototype.isShow = function () {\n    return this._show;\n  };\n  TooltipHTMLContent.prototype.dispose = function () {\n    clearTimeout(this._hideTimeout);\n    clearTimeout(this._longHideTimeout);\n    var zr = this._zr;\n    transformLocalCoordClear(zr && zr.painter && zr.painter.getViewportRoot(), this._container);\n    var el = this.el;\n    if (el) {\n      el.onmouseenter = el.onmousemove = el.onmouseleave = null;\n      var parentNode = el.parentNode;\n      parentNode && parentNode.removeChild(el);\n    }\n    this.el = this._container = null;\n  };\n  return TooltipHTMLContent;\n}();\nexport default TooltipHTMLContent;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport { getPaddingFromTooltipModel } from './tooltipMarkup.js';\nimport { throwError } from '../../util/log.js';\nvar TooltipRichContent = /** @class */function () {\n  function TooltipRichContent(api) {\n    this._show = false;\n    this._styleCoord = [0, 0, 0, 0];\n    this._alwaysShowContent = false;\n    this._enterable = true;\n    this._zr = api.getZr();\n    makeStyleCoord(this._styleCoord, this._zr, api.getWidth() / 2, api.getHeight() / 2);\n  }\n  /**\n   * Update when tooltip is rendered\n   */\n  TooltipRichContent.prototype.update = function (tooltipModel) {\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    alwaysShowContent && this._moveIfResized();\n    // update alwaysShowContent\n    this._alwaysShowContent = alwaysShowContent;\n  };\n  TooltipRichContent.prototype.show = function () {\n    if (this._hideTimeout) {\n      clearTimeout(this._hideTimeout);\n    }\n    this.el.show();\n    this._show = true;\n  };\n  /**\n   * Set tooltip content\n   */\n  TooltipRichContent.prototype.setContent = function (content, markupStyleCreator, tooltipModel, borderColor, arrowPosition) {\n    var _this = this;\n    if (zrUtil.isObject(content)) {\n      throwError(process.env.NODE_ENV !== 'production' ? 'Passing DOM nodes as content is not supported in richText tooltip!' : '');\n    }\n    if (this.el) {\n      this._zr.remove(this.el);\n    }\n    var textStyleModel = tooltipModel.getModel('textStyle');\n    this.el = new ZRText({\n      style: {\n        rich: markupStyleCreator.richTextStyles,\n        text: content,\n        lineHeight: 22,\n        borderWidth: 1,\n        borderColor: borderColor,\n        textShadowColor: textStyleModel.get('textShadowColor'),\n        fill: tooltipModel.get(['textStyle', 'color']),\n        padding: getPaddingFromTooltipModel(tooltipModel, 'richText'),\n        verticalAlign: 'top',\n        align: 'left'\n      },\n      z: tooltipModel.get('z')\n    });\n    zrUtil.each(['backgroundColor', 'borderRadius', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'], function (propName) {\n      _this.el.style[propName] = tooltipModel.get(propName);\n    });\n    zrUtil.each(['textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'], function (propName) {\n      _this.el.style[propName] = textStyleModel.get(propName) || 0;\n    });\n    this._zr.add(this.el);\n    var self = this;\n    this.el.on('mouseover', function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n      self._inContent = true;\n    });\n    this.el.on('mouseout', function () {\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n      self._inContent = false;\n    });\n  };\n  TooltipRichContent.prototype.setEnterable = function (enterable) {\n    this._enterable = enterable;\n  };\n  TooltipRichContent.prototype.getSize = function () {\n    var el = this.el;\n    var bounding = this.el.getBoundingRect();\n    // bounding rect does not include shadow. For renderMode richText,\n    // if overflow, it will be cut. So calculate them accurately.\n    var shadowOuterSize = calcShadowOuterSize(el.style);\n    return [bounding.width + shadowOuterSize.left + shadowOuterSize.right, bounding.height + shadowOuterSize.top + shadowOuterSize.bottom];\n  };\n  TooltipRichContent.prototype.moveTo = function (x, y) {\n    var el = this.el;\n    if (el) {\n      var styleCoord = this._styleCoord;\n      makeStyleCoord(styleCoord, this._zr, x, y);\n      x = styleCoord[0];\n      y = styleCoord[1];\n      var style = el.style;\n      var borderWidth = mathMaxWith0(style.borderWidth || 0);\n      var shadowOuterSize = calcShadowOuterSize(style);\n      // rich text x, y do not include border.\n      el.x = x + borderWidth + shadowOuterSize.left;\n      el.y = y + borderWidth + shadowOuterSize.top;\n      el.markRedraw();\n    }\n  };\n  /**\n   * when `alwaysShowContent` is true,\n   * move the tooltip after chart resized\n   */\n  TooltipRichContent.prototype._moveIfResized = function () {\n    // The ratio of left to width\n    var ratioX = this._styleCoord[2];\n    // The ratio of top to height\n    var ratioY = this._styleCoord[3];\n    this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\n  };\n  TooltipRichContent.prototype.hide = function () {\n    if (this.el) {\n      this.el.hide();\n    }\n    this._show = false;\n  };\n  TooltipRichContent.prototype.hideLater = function (time) {\n    if (this._show && !(this._inContent && this._enterable) && !this._alwaysShowContent) {\n      if (time) {\n        this._hideDelay = time;\n        // Set show false to avoid invoke hideLater multiple times\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  };\n  TooltipRichContent.prototype.isShow = function () {\n    return this._show;\n  };\n  TooltipRichContent.prototype.dispose = function () {\n    this._zr.remove(this.el);\n  };\n  return TooltipRichContent;\n}();\nfunction mathMaxWith0(val) {\n  return Math.max(0, val);\n}\nfunction calcShadowOuterSize(style) {\n  var shadowBlur = mathMaxWith0(style.shadowBlur || 0);\n  var shadowOffsetX = mathMaxWith0(style.shadowOffsetX || 0);\n  var shadowOffsetY = mathMaxWith0(style.shadowOffsetY || 0);\n  return {\n    left: mathMaxWith0(shadowBlur - shadowOffsetX),\n    right: mathMaxWith0(shadowBlur + shadowOffsetX),\n    top: mathMaxWith0(shadowBlur - shadowOffsetY),\n    bottom: mathMaxWith0(shadowBlur + shadowOffsetY)\n  };\n}\nfunction makeStyleCoord(out, zr, zrX, zrY) {\n  out[0] = zrX;\n  out[1] = zrY;\n  out[2] = out[0] / zr.getWidth();\n  out[3] = out[1] / zr.getHeight();\n}\nexport default TooltipRichContent;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport { __extends } from \"tslib\";\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { bind, each, clone, trim, isString, isFunction, isArray, isObject, extend } from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport TooltipHTMLContent from './TooltipHTMLContent.js';\nimport TooltipRichContent from './TooltipRichContent.js';\nimport { convertToColorString, encodeHTML, formatTpl } from '../../util/format.js';\nimport { parsePercent } from '../../util/number.js';\nimport { Rect } from '../../util/graphic.js';\nimport findPointFromSeries from '../axisPointer/findPointFromSeries.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport Model from '../../model/Model.js';\nimport * as globalListener from '../axisPointer/globalListener.js';\nimport * as axisHelper from '../../coord/axisHelper.js';\nimport * as axisPointerViewHelper from '../axisPointer/viewHelper.js';\nimport { getTooltipRenderMode, preParseFinder, queryReferringComponents } from '../../util/model.js';\nimport ComponentView from '../../view/Component.js';\nimport { format as timeFormat } from '../../util/time.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { shouldTooltipConfine } from './helper.js';\nimport { normalizeTooltipFormatResult } from '../../model/mixin/dataFormat.js';\nimport { createTooltipMarkup, buildTooltipMarkup, TooltipMarkupStyleCreator } from './tooltipMarkup.js';\nimport { findEventDispatcher } from '../../util/event.js';\nimport { clear, createOrUpdate } from '../../util/throttle.js';\nvar proxyRect = new Rect({\n  shape: {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  }\n});\nvar TooltipView = /** @class */function (_super) {\n  __extends(TooltipView, _super);\n  function TooltipView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TooltipView.type;\n    return _this;\n  }\n  TooltipView.prototype.init = function (ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    }\n    var tooltipModel = ecModel.getComponent('tooltip');\n    var renderMode = this._renderMode = getTooltipRenderMode(tooltipModel.get('renderMode'));\n    this._tooltipContent = renderMode === 'richText' ? new TooltipRichContent(api) : new TooltipHTMLContent(api, {\n      appendTo: tooltipModel.get('appendToBody', true) ? 'body' : tooltipModel.get('appendTo', true)\n    });\n  };\n  TooltipView.prototype.render = function (tooltipModel, ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    }\n    // Reset\n    this.group.removeAll();\n    this._tooltipModel = tooltipModel;\n    this._ecModel = ecModel;\n    this._api = api;\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.update(tooltipModel);\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n    this._initGlobalListener();\n    this._keepShow();\n    // PENDING\n    // `mousemove` event will be triggered very frequently when the mouse moves fast,\n    // which causes that the `updatePosition` function was also called frequently.\n    // In Chrome with devtools open and Firefox, tooltip looks laggy and shakes. See #14695 #16101\n    // To avoid frequent triggering,\n    // consider throttling it in 50ms when transition is enabled\n    if (this._renderMode !== 'richText' && tooltipModel.get('transitionDuration')) {\n      createOrUpdate(this, '_updatePosition', 50, 'fixRate');\n    } else {\n      clear(this, '_updatePosition');\n    }\n  };\n  TooltipView.prototype._initGlobalListener = function () {\n    var tooltipModel = this._tooltipModel;\n    var triggerOn = tooltipModel.get('triggerOn');\n    globalListener.register('itemTooltip', this._api, bind(function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none') {\n        if (triggerOn.indexOf(currTrigger) >= 0) {\n          this._tryShow(e, dispatchAction);\n        } else if (currTrigger === 'leave') {\n          this._hide(dispatchAction);\n        }\n      }\n    }, this));\n  };\n  TooltipView.prototype._keepShow = function () {\n    var tooltipModel = this._tooltipModel;\n    var ecModel = this._ecModel;\n    var api = this._api;\n    var triggerOn = tooltipModel.get('triggerOn');\n    // Try to keep the tooltip show when refreshing\n    if (this._lastX != null && this._lastY != null\n    // When user is willing to control tooltip totally using API,\n    // self.manuallyShowTip({x, y}) might cause tooltip hide,\n    // which is not expected.\n    && triggerOn !== 'none' && triggerOn !== 'click') {\n      var self_1 = this;\n      clearTimeout(this._refreshUpdateTimeout);\n      this._refreshUpdateTimeout = setTimeout(function () {\n        // Show tip next tick after other charts are rendered\n        // In case highlight action has wrong result\n        // FIXME\n        !api.isDisposed() && self_1.manuallyShowTip(tooltipModel, ecModel, api, {\n          x: self_1._lastX,\n          y: self_1._lastY,\n          dataByCoordSys: self_1._lastDataByCoordSys\n        });\n      });\n    }\n  };\n  /**\n   * Show tip manually by\n   * dispatchAction({\n   *     type: 'showTip',\n   *     x: 10,\n   *     y: 10\n   * });\n   * Or\n   * dispatchAction({\n   *      type: 'showTip',\n   *      seriesIndex: 0,\n   *      dataIndex or dataIndexInside or name\n   * });\n   *\n   *  TODO Batch\n   */\n  TooltipView.prototype.manuallyShowTip = function (tooltipModel, ecModel, api, payload) {\n    if (payload.from === this.uid || env.node || !api.getDom()) {\n      return;\n    }\n    var dispatchAction = makeDispatchAction(payload, api);\n    // Reset ticket\n    this._ticket = '';\n    // When triggered from axisPointer.\n    var dataByCoordSys = payload.dataByCoordSys;\n    var cmptRef = findComponentReference(payload, ecModel, api);\n    if (cmptRef) {\n      var rect = cmptRef.el.getBoundingRect().clone();\n      rect.applyTransform(cmptRef.el.transform);\n      this._tryShow({\n        offsetX: rect.x + rect.width / 2,\n        offsetY: rect.y + rect.height / 2,\n        target: cmptRef.el,\n        position: payload.position,\n        // When manully trigger, the mouse is not on the el, so we'd better to\n        // position tooltip on the bottom of the el and display arrow is possible.\n        positionDefault: 'bottom'\n      }, dispatchAction);\n    } else if (payload.tooltip && payload.x != null && payload.y != null) {\n      var el = proxyRect;\n      el.x = payload.x;\n      el.y = payload.y;\n      el.update();\n      getECData(el).tooltipConfig = {\n        name: null,\n        option: payload.tooltip\n      };\n      // Manually show tooltip while view is not using zrender elements.\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        target: el\n      }, dispatchAction);\n    } else if (dataByCoordSys) {\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        dataByCoordSys: dataByCoordSys,\n        tooltipOption: payload.tooltipOption\n      }, dispatchAction);\n    } else if (payload.seriesIndex != null) {\n      if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\n        return;\n      }\n      var pointInfo = findPointFromSeries(payload, ecModel);\n      var cx = pointInfo.point[0];\n      var cy = pointInfo.point[1];\n      if (cx != null && cy != null) {\n        this._tryShow({\n          offsetX: cx,\n          offsetY: cy,\n          target: pointInfo.el,\n          position: payload.position,\n          // When manully trigger, the mouse is not on the el, so we'd better to\n          // position tooltip on the bottom of the el and display arrow is possible.\n          positionDefault: 'bottom'\n        }, dispatchAction);\n      }\n    } else if (payload.x != null && payload.y != null) {\n      // FIXME\n      // should wrap dispatchAction like `axisPointer/globalListener` ?\n      api.dispatchAction({\n        type: 'updateAxisPointer',\n        x: payload.x,\n        y: payload.y\n      });\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        target: api.getZr().findHover(payload.x, payload.y).target\n      }, dispatchAction);\n    }\n  };\n  TooltipView.prototype.manuallyHideTip = function (tooltipModel, ecModel, api, payload) {\n    var tooltipContent = this._tooltipContent;\n    if (this._tooltipModel) {\n      tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\n    }\n    this._lastX = this._lastY = this._lastDataByCoordSys = null;\n    if (payload.from !== this.uid) {\n      this._hide(makeDispatchAction(payload, api));\n    }\n  };\n  // Be compatible with previous design, that is, when tooltip.type is 'axis' and\n  // dispatchAction 'showTip' with seriesIndex and dataIndex will trigger axis pointer\n  // and tooltip.\n  TooltipView.prototype._manuallyAxisShowTip = function (tooltipModel, ecModel, api, payload) {\n    var seriesIndex = payload.seriesIndex;\n    var dataIndex = payload.dataIndex;\n    // @ts-ignore\n    var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n    if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\n      return;\n    }\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n    if (!seriesModel) {\n      return;\n    }\n    var data = seriesModel.getData();\n    var tooltipCascadedModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model], this._tooltipModel);\n    if (tooltipCascadedModel.get('trigger') !== 'axis') {\n      return;\n    }\n    api.dispatchAction({\n      type: 'updateAxisPointer',\n      seriesIndex: seriesIndex,\n      dataIndex: dataIndex,\n      position: payload.position\n    });\n    return true;\n  };\n  TooltipView.prototype._tryShow = function (e, dispatchAction) {\n    var el = e.target;\n    var tooltipModel = this._tooltipModel;\n    if (!tooltipModel) {\n      return;\n    }\n    // Save mouse x, mouse y. So we can try to keep showing the tip if chart is refreshed\n    this._lastX = e.offsetX;\n    this._lastY = e.offsetY;\n    var dataByCoordSys = e.dataByCoordSys;\n    if (dataByCoordSys && dataByCoordSys.length) {\n      this._showAxisTooltip(dataByCoordSys, e);\n    } else if (el) {\n      var ecData = getECData(el);\n      if (ecData.ssrType === 'legend') {\n        // Don't trigger tooltip for legend tooltip item\n        return;\n      }\n      this._lastDataByCoordSys = null;\n      var seriesDispatcher_1;\n      var cmptDispatcher_1;\n      findEventDispatcher(el, function (target) {\n        if (target.tooltipDisabled) {\n          seriesDispatcher_1 = cmptDispatcher_1 = null;\n          return true;\n        }\n        if (seriesDispatcher_1 || cmptDispatcher_1) {\n          return;\n        }\n        // Always show item tooltip if mouse is on the element with dataIndex\n        if (getECData(target).dataIndex != null) {\n          seriesDispatcher_1 = target;\n        }\n        // Tooltip provided directly. Like legend.\n        else if (getECData(target).tooltipConfig != null) {\n          cmptDispatcher_1 = target;\n        }\n      }, true);\n      if (seriesDispatcher_1) {\n        this._showSeriesItemTooltip(e, seriesDispatcher_1, dispatchAction);\n      } else if (cmptDispatcher_1) {\n        this._showComponentItemTooltip(e, cmptDispatcher_1, dispatchAction);\n      } else {\n        this._hide(dispatchAction);\n      }\n    } else {\n      this._lastDataByCoordSys = null;\n      this._hide(dispatchAction);\n    }\n  };\n  TooltipView.prototype._showOrMove = function (tooltipModel, cb) {\n    // showDelay is used in this case: tooltip.enterable is set\n    // as true. User intent to move mouse into tooltip and click\n    // something. `showDelay` makes it easier to enter the content\n    // but tooltip do not move immediately.\n    var delay = tooltipModel.get('showDelay');\n    cb = bind(cb, this);\n    clearTimeout(this._showTimout);\n    delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();\n  };\n  TooltipView.prototype._showAxisTooltip = function (dataByCoordSys, e) {\n    var ecModel = this._ecModel;\n    var globalTooltipModel = this._tooltipModel;\n    var point = [e.offsetX, e.offsetY];\n    var singleTooltipModel = buildTooltipModel([e.tooltipOption], globalTooltipModel);\n    var renderMode = this._renderMode;\n    var cbParamsList = [];\n    var articleMarkup = createTooltipMarkup('section', {\n      blocks: [],\n      noHeader: true\n    });\n    // Only for legacy: `Serise['formatTooltip']` returns a string.\n    var markupTextArrLegacy = [];\n    var markupStyleCreator = new TooltipMarkupStyleCreator();\n    each(dataByCoordSys, function (itemCoordSys) {\n      each(itemCoordSys.dataByAxis, function (axisItem) {\n        var axisModel = ecModel.getComponent(axisItem.axisDim + 'Axis', axisItem.axisIndex);\n        var axisValue = axisItem.value;\n        if (!axisModel || axisValue == null) {\n          return;\n        }\n        // FIXME: when using `tooltip.trigger: 'axis'`, the precision of the axis value displayed in tooltip\n        //  should match the original series values rather than using the default stretegy in Interval.ts\n        //  (getPrecision(interval) + 2); otherwise it may cuase confusion.\n        var axisValueLabel = axisPointerViewHelper.getValueLabel(axisValue, axisModel.axis, ecModel, axisItem.seriesDataIndices, axisItem.valueLabelOpt);\n        var axisSectionMarkup = createTooltipMarkup('section', {\n          header: axisValueLabel,\n          noHeader: !trim(axisValueLabel),\n          sortBlocks: true,\n          blocks: []\n        });\n        articleMarkup.blocks.push(axisSectionMarkup);\n        each(axisItem.seriesDataIndices, function (idxItem) {\n          var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n          var dataIndex = idxItem.dataIndexInside;\n          var cbParams = series.getDataParams(dataIndex);\n          // Can't find data.\n          if (cbParams.dataIndex < 0) {\n            return;\n          }\n          cbParams.axisDim = axisItem.axisDim;\n          cbParams.axisIndex = axisItem.axisIndex;\n          cbParams.axisType = axisItem.axisType;\n          cbParams.axisId = axisItem.axisId;\n          cbParams.axisValue = axisHelper.getAxisRawValue(axisModel.axis, {\n            value: axisValue\n          });\n          cbParams.axisValueLabel = axisValueLabel;\n          // Pre-create marker style for makers. Users can assemble richText\n          // text in `formatter` callback and use those markers style.\n          cbParams.marker = markupStyleCreator.makeTooltipMarker('item', convertToColorString(cbParams.color), renderMode);\n          var seriesTooltipResult = normalizeTooltipFormatResult(series.formatTooltip(dataIndex, true, null));\n          var frag = seriesTooltipResult.frag;\n          if (frag) {\n            var valueFormatter = buildTooltipModel([series], globalTooltipModel).get('valueFormatter');\n            axisSectionMarkup.blocks.push(valueFormatter ? extend({\n              valueFormatter: valueFormatter\n            }, frag) : frag);\n          }\n          if (seriesTooltipResult.text) {\n            markupTextArrLegacy.push(seriesTooltipResult.text);\n          }\n          cbParamsList.push(cbParams);\n        });\n      });\n    });\n    // In most cases, the second axis is displays upper on the first one.\n    // So we reverse it to look better.\n    articleMarkup.blocks.reverse();\n    markupTextArrLegacy.reverse();\n    var positionExpr = e.position;\n    var orderMode = singleTooltipModel.get('order');\n    var builtMarkupText = buildTooltipMarkup(articleMarkup, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), singleTooltipModel.get('textStyle'));\n    builtMarkupText && markupTextArrLegacy.unshift(builtMarkupText);\n    var blockBreak = renderMode === 'richText' ? '\\n\\n' : '<br/>';\n    var allMarkupText = markupTextArrLegacy.join(blockBreak);\n    this._showOrMove(singleTooltipModel, function () {\n      if (this._updateContentNotChangedOnAxis(dataByCoordSys, cbParamsList)) {\n        this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, cbParamsList);\n      } else {\n        this._showTooltipContent(singleTooltipModel, allMarkupText, cbParamsList, Math.random() + '', point[0], point[1], positionExpr, null, markupStyleCreator);\n      }\n    });\n    // Do not trigger events here, because this branch only be entered\n    // from dispatchAction.\n  };\n  TooltipView.prototype._showSeriesItemTooltip = function (e, dispatcher, dispatchAction) {\n    var ecModel = this._ecModel;\n    var ecData = getECData(dispatcher);\n    // Use dataModel in element if possible\n    // Used when mouseover on a element like markPoint or edge\n    // In which case, the data is not main data in series.\n    var seriesIndex = ecData.seriesIndex;\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n    // For example, graph link.\n    var dataModel = ecData.dataModel || seriesModel;\n    var dataIndex = ecData.dataIndex;\n    var dataType = ecData.dataType;\n    var data = dataModel.getData(dataType);\n    var renderMode = this._renderMode;\n    var positionDefault = e.positionDefault;\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model], this._tooltipModel, positionDefault ? {\n      position: positionDefault\n    } : null);\n    var tooltipTrigger = tooltipModel.get('trigger');\n    if (tooltipTrigger != null && tooltipTrigger !== 'item') {\n      return;\n    }\n    var params = dataModel.getDataParams(dataIndex, dataType);\n    var markupStyleCreator = new TooltipMarkupStyleCreator();\n    // Pre-create marker style for makers. Users can assemble richText\n    // text in `formatter` callback and use those markers style.\n    params.marker = markupStyleCreator.makeTooltipMarker('item', convertToColorString(params.color), renderMode);\n    var seriesTooltipResult = normalizeTooltipFormatResult(dataModel.formatTooltip(dataIndex, false, dataType));\n    var orderMode = tooltipModel.get('order');\n    var valueFormatter = tooltipModel.get('valueFormatter');\n    var frag = seriesTooltipResult.frag;\n    var markupText = frag ? buildTooltipMarkup(valueFormatter ? extend({\n      valueFormatter: valueFormatter\n    }, frag) : frag, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), tooltipModel.get('textStyle')) : seriesTooltipResult.text;\n    var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\n    this._showOrMove(tooltipModel, function () {\n      this._showTooltipContent(tooltipModel, markupText, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target, markupStyleCreator);\n    });\n    // FIXME\n    // duplicated showtip if manuallyShowTip is called from dispatchAction.\n    dispatchAction({\n      type: 'showTip',\n      dataIndexInside: dataIndex,\n      dataIndex: data.getRawIndex(dataIndex),\n      seriesIndex: seriesIndex,\n      from: this.uid\n    });\n  };\n  TooltipView.prototype._showComponentItemTooltip = function (e, el, dispatchAction) {\n    var isHTMLRenderMode = this._renderMode === 'html';\n    var ecData = getECData(el);\n    var tooltipConfig = ecData.tooltipConfig;\n    var tooltipOpt = tooltipConfig.option || {};\n    var encodeHTMLContent = tooltipOpt.encodeHTMLContent;\n    if (isString(tooltipOpt)) {\n      var content = tooltipOpt;\n      tooltipOpt = {\n        content: content,\n        // Fixed formatter\n        formatter: content\n      };\n      // when `tooltipConfig.option` is a string rather than an object,\n      // we can't know if the content needs to be encoded\n      // for the sake of security, encode it by default.\n      encodeHTMLContent = true;\n    }\n    if (encodeHTMLContent && isHTMLRenderMode && tooltipOpt.content) {\n      // clone might be unnecessary?\n      tooltipOpt = clone(tooltipOpt);\n      tooltipOpt.content = encodeHTML(tooltipOpt.content);\n    }\n    var tooltipModelCascade = [tooltipOpt];\n    var cmpt = this._ecModel.getComponent(ecData.componentMainType, ecData.componentIndex);\n    if (cmpt) {\n      tooltipModelCascade.push(cmpt);\n    }\n    // In most cases, component tooltip formatter has different params with series tooltip formatter,\n    // so that they cannot share the same formatter. Since the global tooltip formatter is used for series\n    // by convention, we do not use it as the default formatter for component.\n    tooltipModelCascade.push({\n      formatter: tooltipOpt.content\n    });\n    var positionDefault = e.positionDefault;\n    var subTooltipModel = buildTooltipModel(tooltipModelCascade, this._tooltipModel, positionDefault ? {\n      position: positionDefault\n    } : null);\n    var defaultHtml = subTooltipModel.get('content');\n    var asyncTicket = Math.random() + '';\n    // PENDING: this case do not support richText style yet.\n    var markupStyleCreator = new TooltipMarkupStyleCreator();\n    // Do not check whether `trigger` is 'none' here, because `trigger`\n    // only works on coordinate system. In fact, we have not found case\n    // that requires setting `trigger` nothing on component yet.\n    this._showOrMove(subTooltipModel, function () {\n      // Use formatterParams from element defined in component\n      // Avoid users modify it.\n      var formatterParams = clone(subTooltipModel.get('formatterParams') || {});\n      this._showTooltipContent(subTooltipModel, defaultHtml, formatterParams, asyncTicket, e.offsetX, e.offsetY, e.position, el, markupStyleCreator);\n    });\n    // If not dispatch showTip, tip may be hide triggered by axis.\n    dispatchAction({\n      type: 'showTip',\n      from: this.uid\n    });\n  };\n  TooltipView.prototype._showTooltipContent = function (\n  // Use Model<TooltipOption> insteadof TooltipModel because this model may be from series or other options.\n  // Instead of top level tooltip.\n  tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el, markupStyleCreator) {\n    // Reset ticket\n    this._ticket = '';\n    if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\n      return;\n    }\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n    var formatter = tooltipModel.get('formatter');\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var html = defaultHtml;\n    var nearPoint = this._getNearestPoint([x, y], params, tooltipModel.get('trigger'), tooltipModel.get('borderColor'), tooltipModel.get('defaultBorderColor', true));\n    var nearPointColor = nearPoint.color;\n    if (formatter) {\n      if (isString(formatter)) {\n        var useUTC = tooltipModel.ecModel.get('useUTC');\n        var params0 = isArray(params) ? params[0] : params;\n        var isTimeAxis = params0 && params0.axisType && params0.axisType.indexOf('time') >= 0;\n        html = formatter;\n        if (isTimeAxis) {\n          html = timeFormat(params0.axisValue, html, useUTC);\n        }\n        html = formatTpl(html, params, true);\n      } else if (isFunction(formatter)) {\n        var callback = bind(function (cbTicket, html) {\n          if (cbTicket === this._ticket) {\n            tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\n            this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n          }\n        }, this);\n        this._ticket = asyncTicket;\n        html = formatter(params, asyncTicket, callback);\n      } else {\n        html = formatter;\n      }\n    }\n    tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\n    tooltipContent.show(tooltipModel, nearPointColor);\n    this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n  };\n  TooltipView.prototype._getNearestPoint = function (point, tooltipDataParams, trigger, borderColor, defaultBorderColor) {\n    if (trigger === 'axis' || isArray(tooltipDataParams)) {\n      return {\n        color: borderColor || defaultBorderColor\n      };\n    }\n    if (!isArray(tooltipDataParams)) {\n      return {\n        color: borderColor || tooltipDataParams.color || tooltipDataParams.borderColor\n      };\n    }\n  };\n  TooltipView.prototype._updatePosition = function (tooltipModel, positionExpr, x,\n  // Mouse x\n  y,\n  // Mouse y\n  content, params, el) {\n    var viewWidth = this._api.getWidth();\n    var viewHeight = this._api.getHeight();\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var contentSize = content.getSize();\n    var align = tooltipModel.get('align');\n    var vAlign = tooltipModel.get('verticalAlign');\n    var rect = el && el.getBoundingRect().clone();\n    el && rect.applyTransform(el.transform);\n    if (isFunction(positionExpr)) {\n      // Callback of position can be an array or a string specify the position\n      positionExpr = positionExpr([x, y], params, content.el, rect, {\n        viewSize: [viewWidth, viewHeight],\n        contentSize: contentSize.slice()\n      });\n    }\n    if (isArray(positionExpr)) {\n      x = parsePercent(positionExpr[0], viewWidth);\n      y = parsePercent(positionExpr[1], viewHeight);\n    } else if (isObject(positionExpr)) {\n      var boxLayoutPosition = positionExpr;\n      boxLayoutPosition.width = contentSize[0];\n      boxLayoutPosition.height = contentSize[1];\n      var layoutRect = getLayoutRect(boxLayoutPosition, {\n        width: viewWidth,\n        height: viewHeight\n      });\n      x = layoutRect.x;\n      y = layoutRect.y;\n      align = null;\n      // When positionExpr is left/top/right/bottom,\n      // align and verticalAlign will not work.\n      vAlign = null;\n    }\n    // Specify tooltip position by string 'top' 'bottom' 'left' 'right' around graphic element\n    else if (isString(positionExpr) && el) {\n      var pos = calcTooltipPosition(positionExpr, rect, contentSize, tooltipModel.get('borderWidth'));\n      x = pos[0];\n      y = pos[1];\n    } else {\n      var pos = refixTooltipPosition(x, y, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\n      x = pos[0];\n      y = pos[1];\n    }\n    align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\n    vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\n    if (shouldTooltipConfine(tooltipModel)) {\n      var pos = confineTooltipPosition(x, y, content, viewWidth, viewHeight);\n      x = pos[0];\n      y = pos[1];\n    }\n    content.moveTo(x, y);\n  };\n  // FIXME\n  // Should we remove this but leave this to user?\n  TooltipView.prototype._updateContentNotChangedOnAxis = function (dataByCoordSys, cbParamsList) {\n    var lastCoordSys = this._lastDataByCoordSys;\n    var lastCbParamsList = this._cbParamsList;\n    var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;\n    contentNotChanged && each(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\n      var lastDataByAxis = lastItemCoordSys.dataByAxis || [];\n      var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\n      var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\n      contentNotChanged = contentNotChanged && lastDataByAxis.length === thisDataByAxis.length;\n      contentNotChanged && each(lastDataByAxis, function (lastItem, indexAxis) {\n        var thisItem = thisDataByAxis[indexAxis] || {};\n        var lastIndices = lastItem.seriesDataIndices || [];\n        var newIndices = thisItem.seriesDataIndices || [];\n        contentNotChanged = contentNotChanged && lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;\n        contentNotChanged && each(lastIndices, function (lastIdxItem, j) {\n          var newIdxItem = newIndices[j];\n          contentNotChanged = contentNotChanged && lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;\n        });\n        // check is cbParams data value changed\n        lastCbParamsList && each(lastItem.seriesDataIndices, function (idxItem) {\n          var seriesIdx = idxItem.seriesIndex;\n          var cbParams = cbParamsList[seriesIdx];\n          var lastCbParams = lastCbParamsList[seriesIdx];\n          if (cbParams && lastCbParams && lastCbParams.data !== cbParams.data) {\n            contentNotChanged = false;\n          }\n        });\n      });\n    });\n    this._lastDataByCoordSys = dataByCoordSys;\n    this._cbParamsList = cbParamsList;\n    return !!contentNotChanged;\n  };\n  TooltipView.prototype._hide = function (dispatchAction) {\n    // Do not directly hideLater here, because this behavior may be prevented\n    // in dispatchAction when showTip is dispatched.\n    // FIXME\n    // duplicated hideTip if manuallyHideTip is called from dispatchAction.\n    this._lastDataByCoordSys = null;\n    dispatchAction({\n      type: 'hideTip',\n      from: this.uid\n    });\n  };\n  TooltipView.prototype.dispose = function (ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    }\n    clear(this, '_updatePosition');\n    this._tooltipContent.dispose();\n    globalListener.unregister('itemTooltip', api);\n  };\n  TooltipView.type = 'tooltip';\n  return TooltipView;\n}(ComponentView);\n/**\n * From top to bottom. (the last one should be globalTooltipModel);\n */\nfunction buildTooltipModel(modelCascade, globalTooltipModel, defaultTooltipOption) {\n  // Last is always tooltip model.\n  var ecModel = globalTooltipModel.ecModel;\n  var resultModel;\n  if (defaultTooltipOption) {\n    resultModel = new Model(defaultTooltipOption, ecModel, ecModel);\n    resultModel = new Model(globalTooltipModel.option, resultModel, ecModel);\n  } else {\n    resultModel = globalTooltipModel;\n  }\n  for (var i = modelCascade.length - 1; i >= 0; i--) {\n    var tooltipOpt = modelCascade[i];\n    if (tooltipOpt) {\n      if (tooltipOpt instanceof Model) {\n        tooltipOpt = tooltipOpt.get('tooltip', true);\n      }\n      // In each data item tooltip can be simply write:\n      // {\n      //  value: 10,\n      //  tooltip: 'Something you need to know'\n      // }\n      if (isString(tooltipOpt)) {\n        tooltipOpt = {\n          formatter: tooltipOpt\n        };\n      }\n      if (tooltipOpt) {\n        resultModel = new Model(tooltipOpt, resultModel, ecModel);\n      }\n    }\n  }\n  return resultModel;\n}\nfunction makeDispatchAction(payload, api) {\n  return payload.dispatchAction || bind(api.dispatchAction, api);\n}\nfunction refixTooltipPosition(x, y, content, viewWidth, viewHeight, gapH, gapV) {\n  var size = content.getSize();\n  var width = size[0];\n  var height = size[1];\n  if (gapH != null) {\n    // Add extra 2 pixels for this case:\n    // At present the \"values\" in default tooltip are using CSS `float: right`.\n    // When the right edge of the tooltip box is on the right side of the\n    // viewport, the `float` layout might push the \"values\" to the second line.\n    if (x + width + gapH + 2 > viewWidth) {\n      x -= width + gapH;\n    } else {\n      x += gapH;\n    }\n  }\n  if (gapV != null) {\n    if (y + height + gapV > viewHeight) {\n      y -= height + gapV;\n    } else {\n      y += gapV;\n    }\n  }\n  return [x, y];\n}\nfunction confineTooltipPosition(x, y, content, viewWidth, viewHeight) {\n  var size = content.getSize();\n  var width = size[0];\n  var height = size[1];\n  x = Math.min(x + width, viewWidth) - width;\n  y = Math.min(y + height, viewHeight) - height;\n  x = Math.max(x, 0);\n  y = Math.max(y, 0);\n  return [x, y];\n}\nfunction calcTooltipPosition(position, rect, contentSize, borderWidth) {\n  var domWidth = contentSize[0];\n  var domHeight = contentSize[1];\n  var offset = Math.ceil(Math.SQRT2 * borderWidth) + 8;\n  var x = 0;\n  var y = 0;\n  var rectWidth = rect.width;\n  var rectHeight = rect.height;\n  switch (position) {\n    case 'inside':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n    case 'top':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y - domHeight - offset;\n      break;\n    case 'bottom':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight + offset;\n      break;\n    case 'left':\n      x = rect.x - domWidth - offset;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n    case 'right':\n      x = rect.x + rectWidth + offset;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n  }\n  return [x, y];\n}\nfunction isCenterAlign(align) {\n  return align === 'center' || align === 'middle';\n}\n/**\n * Find target component by payload like:\n * ```js\n * { legendId: 'some_id', name: 'xxx' }\n * { toolboxIndex: 1, name: 'xxx' }\n * { geoName: 'some_name', name: 'xxx' }\n * ```\n * PENDING: at present only\n *\n * If not found, return null/undefined.\n */\nfunction findComponentReference(payload, ecModel, api) {\n  var queryOptionMap = preParseFinder(payload).queryOptionMap;\n  var componentMainType = queryOptionMap.keys()[0];\n  if (!componentMainType || componentMainType === 'series') {\n    return;\n  }\n  var queryResult = queryReferringComponents(ecModel, componentMainType, queryOptionMap.get(componentMainType), {\n    useDefault: false,\n    enableAll: false,\n    enableNone: false\n  });\n  var model = queryResult.models[0];\n  if (!model) {\n    return;\n  }\n  var view = api.getViewOfComponentModel(model);\n  var el;\n  view.group.traverse(function (subEl) {\n    var tooltipConfig = getECData(subEl).tooltipConfig;\n    if (tooltipConfig && tooltipConfig.name === payload.name) {\n      el = subEl;\n      return true; // stop\n    }\n  });\n  if (el) {\n    return {\n      componentMainType: componentMainType,\n      componentIndex: model.componentIndex,\n      el: el\n    };\n  }\n}\nexport default TooltipView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { install as installAxisPointer } from '../axisPointer/install.js';\nimport { use } from '../../extension.js';\nimport TooltipModel from './TooltipModel.js';\nimport TooltipView from './TooltipView.js';\nimport { noop } from 'zrender/lib/core/util.js';\nexport function install(registers) {\n  use(installAxisPointer);\n  registers.registerComponentModel(TooltipModel);\n  registers.registerComponentView(TooltipView);\n  /**\n   * @action\n   * @property {string} type\n   * @property {number} seriesIndex\n   * @property {number} dataIndex\n   * @property {number} [x]\n   * @property {number} [y]\n   */\n  registers.registerAction({\n    type: 'showTip',\n    event: 'showTip',\n    update: 'tooltip:manuallyShowTip'\n  }, noop);\n  registers.registerAction({\n    type: 'hideTip',\n    event: 'hideTip',\n    update: 'tooltip:manuallyHideTip'\n  }, noop);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport { createBoxLayoutReference, getLayoutRect } from '../../util/layout.js';\nimport ComponentModel from '../../model/Component.js';\nimport ComponentView from '../../view/Component.js';\nimport { windowOpen } from '../../util/format.js';\nimport tokens from '../../visual/tokens.js';\nvar TitleModel = /** @class */function (_super) {\n  __extends(TitleModel, _super);\n  function TitleModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TitleModel.type;\n    _this.layoutMode = {\n      type: 'box',\n      ignoreSize: true\n    };\n    return _this;\n  }\n  TitleModel.type = 'title';\n  TitleModel.defaultOption = {\n    // zlevel: 0,\n    z: 6,\n    show: true,\n    text: '',\n    target: 'blank',\n    subtext: '',\n    subtarget: 'blank',\n    left: 'center',\n    top: tokens.size.m,\n    backgroundColor: tokens.color.transparent,\n    borderColor: tokens.color.primary,\n    borderWidth: 0,\n    padding: 5,\n    itemGap: 10,\n    textStyle: {\n      fontSize: 18,\n      fontWeight: 'bold',\n      color: tokens.color.primary\n    },\n    subtextStyle: {\n      fontSize: 12,\n      color: tokens.color.quaternary\n    }\n  };\n  return TitleModel;\n}(ComponentModel);\n// View\nvar TitleView = /** @class */function (_super) {\n  __extends(TitleView, _super);\n  function TitleView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TitleView.type;\n    return _this;\n  }\n  TitleView.prototype.render = function (titleModel, ecModel, api) {\n    this.group.removeAll();\n    if (!titleModel.get('show')) {\n      return;\n    }\n    var group = this.group;\n    var textStyleModel = titleModel.getModel('textStyle');\n    var subtextStyleModel = titleModel.getModel('subtextStyle');\n    var textAlign = titleModel.get('textAlign');\n    var textVerticalAlign = zrUtil.retrieve2(titleModel.get('textBaseline'), titleModel.get('textVerticalAlign'));\n    var textEl = new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        text: titleModel.get('text'),\n        fill: textStyleModel.getTextColor()\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var textRect = textEl.getBoundingRect();\n    var subText = titleModel.get('subtext');\n    var subTextEl = new graphic.Text({\n      style: createTextStyle(subtextStyleModel, {\n        text: subText,\n        fill: subtextStyleModel.getTextColor(),\n        y: textRect.height + titleModel.get('itemGap'),\n        verticalAlign: 'top'\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var link = titleModel.get('link');\n    var sublink = titleModel.get('sublink');\n    var triggerEvent = titleModel.get('triggerEvent', true);\n    textEl.silent = !link && !triggerEvent;\n    subTextEl.silent = !sublink && !triggerEvent;\n    if (link) {\n      textEl.on('click', function () {\n        windowOpen(link, '_' + titleModel.get('target'));\n      });\n    }\n    if (sublink) {\n      subTextEl.on('click', function () {\n        windowOpen(sublink, '_' + titleModel.get('subtarget'));\n      });\n    }\n    getECData(textEl).eventData = getECData(subTextEl).eventData = triggerEvent ? {\n      componentType: 'title',\n      componentIndex: titleModel.componentIndex\n    } : null;\n    group.add(textEl);\n    subText && group.add(subTextEl);\n    // If no subText, but add subTextEl, there will be an empty line.\n    var groupRect = group.getBoundingRect();\n    var layoutOption = titleModel.getBoxLayoutParams();\n    layoutOption.width = groupRect.width;\n    layoutOption.height = groupRect.height;\n    var layoutRef = createBoxLayoutReference(titleModel, api);\n    var layoutRect = getLayoutRect(layoutOption, layoutRef.refContainer, titleModel.get('padding'));\n    // Adjust text align based on position\n    if (!textAlign) {\n      // Align left if title is on the left. center and right is same\n      textAlign = titleModel.get('left') || titleModel.get('right');\n      // @ts-ignore\n      if (textAlign === 'middle') {\n        textAlign = 'center';\n      }\n      // Adjust layout by text align\n      if (textAlign === 'right') {\n        layoutRect.x += layoutRect.width;\n      } else if (textAlign === 'center') {\n        layoutRect.x += layoutRect.width / 2;\n      }\n    }\n    if (!textVerticalAlign) {\n      textVerticalAlign = titleModel.get('top') || titleModel.get('bottom');\n      // @ts-ignore\n      if (textVerticalAlign === 'center') {\n        textVerticalAlign = 'middle';\n      }\n      if (textVerticalAlign === 'bottom') {\n        layoutRect.y += layoutRect.height;\n      } else if (textVerticalAlign === 'middle') {\n        layoutRect.y += layoutRect.height / 2;\n      }\n      textVerticalAlign = textVerticalAlign || 'top';\n    }\n    group.x = layoutRect.x;\n    group.y = layoutRect.y;\n    group.markRedraw();\n    var alignStyle = {\n      align: textAlign,\n      verticalAlign: textVerticalAlign\n    };\n    textEl.setStyle(alignStyle);\n    subTextEl.setStyle(alignStyle);\n    // Render background\n    // Get groupRect again because textAlign has been changed\n    groupRect = group.getBoundingRect();\n    var padding = layoutRect.margin;\n    var style = titleModel.getItemStyle(['color', 'opacity']);\n    style.fill = titleModel.get('backgroundColor');\n    var rect = new graphic.Rect({\n      shape: {\n        x: groupRect.x - padding[3],\n        y: groupRect.y - padding[0],\n        width: groupRect.width + padding[1] + padding[3],\n        height: groupRect.height + padding[0] + padding[2],\n        r: titleModel.get('borderRadius')\n      },\n      style: style,\n      subPixelOptimize: true,\n      silent: true\n    });\n    group.add(rect);\n  };\n  TitleView.type = 'title';\n  return TitleView;\n}(ComponentView);\nexport function install(registers) {\n  registers.registerComponentModel(TitleModel);\n  registers.registerComponentView(TitleView);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Model from '../../model/Model.js';\nimport { isNameSpecified } from '../../util/model.js';\nimport ComponentModel from '../../model/Component.js';\nimport tokens from '../../visual/tokens.js';\nvar getDefaultSelectorOptions = function (ecModel, type) {\n  if (type === 'all') {\n    return {\n      type: 'all',\n      title: ecModel.getLocaleModel().get(['legend', 'selector', 'all'])\n    };\n  } else if (type === 'inverse') {\n    return {\n      type: 'inverse',\n      title: ecModel.getLocaleModel().get(['legend', 'selector', 'inverse'])\n    };\n  }\n};\nvar LegendModel = /** @class */function (_super) {\n  __extends(LegendModel, _super);\n  function LegendModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = LegendModel.type;\n    _this.layoutMode = {\n      type: 'box',\n      // legend.width/height are maxWidth/maxHeight actually,\n      // whereas real width/height is calculated by its content.\n      // (Setting {left: 10, right: 10} does not make sense).\n      // So consider the case:\n      // `setOption({legend: {left: 10});`\n      // then `setOption({legend: {right: 10});`\n      // The previous `left` should be cleared by setting `ignoreSize`.\n      ignoreSize: true\n    };\n    return _this;\n  }\n  LegendModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n    option.selected = option.selected || {};\n    this._updateSelector(option);\n  };\n  LegendModel.prototype.mergeOption = function (option, ecModel) {\n    _super.prototype.mergeOption.call(this, option, ecModel);\n    this._updateSelector(option);\n  };\n  LegendModel.prototype._updateSelector = function (option) {\n    var selector = option.selector;\n    var ecModel = this.ecModel;\n    if (selector === true) {\n      selector = option.selector = ['all', 'inverse'];\n    }\n    if (zrUtil.isArray(selector)) {\n      zrUtil.each(selector, function (item, index) {\n        zrUtil.isString(item) && (item = {\n          type: item\n        });\n        selector[index] = zrUtil.merge(item, getDefaultSelectorOptions(ecModel, item.type));\n      });\n    }\n  };\n  LegendModel.prototype.optionUpdated = function () {\n    this._updateData(this.ecModel);\n    var legendData = this._data;\n    // If selectedMode is single, try to select one\n    if (legendData[0] && this.get('selectedMode') === 'single') {\n      var hasSelected = false;\n      // If has any selected in option.selected\n      for (var i = 0; i < legendData.length; i++) {\n        var name_1 = legendData[i].get('name');\n        if (this.isSelected(name_1)) {\n          // Force to unselect others\n          this.select(name_1);\n          hasSelected = true;\n          break;\n        }\n      }\n      // Try select the first if selectedMode is single\n      !hasSelected && this.select(legendData[0].get('name'));\n    }\n  };\n  LegendModel.prototype._updateData = function (ecModel) {\n    var potentialData = [];\n    var availableNames = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      var seriesName = seriesModel.name;\n      availableNames.push(seriesName);\n      var isPotential;\n      if (seriesModel.legendVisualProvider) {\n        var provider = seriesModel.legendVisualProvider;\n        var names = provider.getAllNames();\n        if (!ecModel.isSeriesFiltered(seriesModel)) {\n          availableNames = availableNames.concat(names);\n        }\n        if (names.length) {\n          potentialData = potentialData.concat(names);\n        } else {\n          isPotential = true;\n        }\n      } else {\n        isPotential = true;\n      }\n      if (isPotential && isNameSpecified(seriesModel)) {\n        potentialData.push(seriesModel.name);\n      }\n    });\n    /**\n     * @type {Array.<string>}\n     * @private\n     */\n    this._availableNames = availableNames;\n    // If legend.data is not specified in option, use availableNames as data,\n    // which is convenient for user preparing option.\n    var rawData = this.get('data') || potentialData;\n    var legendNameMap = zrUtil.createHashMap();\n    var legendData = zrUtil.map(rawData, function (dataItem) {\n      // Can be string or number\n      if (zrUtil.isString(dataItem) || zrUtil.isNumber(dataItem)) {\n        dataItem = {\n          name: dataItem\n        };\n      }\n      if (legendNameMap.get(dataItem.name)) {\n        // remove legend name duplicate\n        return null;\n      }\n      legendNameMap.set(dataItem.name, true);\n      return new Model(dataItem, this, this.ecModel);\n    }, this);\n    /**\n     * @type {Array.<module:echarts/model/Model>}\n     * @private\n     */\n    this._data = zrUtil.filter(legendData, function (item) {\n      return !!item;\n    });\n  };\n  LegendModel.prototype.getData = function () {\n    return this._data;\n  };\n  LegendModel.prototype.select = function (name) {\n    var selected = this.option.selected;\n    var selectedMode = this.get('selectedMode');\n    if (selectedMode === 'single') {\n      var data = this._data;\n      zrUtil.each(data, function (dataItem) {\n        selected[dataItem.get('name')] = false;\n      });\n    }\n    selected[name] = true;\n  };\n  LegendModel.prototype.unSelect = function (name) {\n    if (this.get('selectedMode') !== 'single') {\n      this.option.selected[name] = false;\n    }\n  };\n  LegendModel.prototype.toggleSelected = function (name) {\n    var selected = this.option.selected;\n    // Default is true\n    if (!selected.hasOwnProperty(name)) {\n      selected[name] = true;\n    }\n    this[selected[name] ? 'unSelect' : 'select'](name);\n  };\n  LegendModel.prototype.allSelect = function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      selected[dataItem.get('name', true)] = true;\n    });\n  };\n  LegendModel.prototype.inverseSelect = function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      var name = dataItem.get('name', true);\n      // Initially, default value is true\n      if (!selected.hasOwnProperty(name)) {\n        selected[name] = true;\n      }\n      selected[name] = !selected[name];\n    });\n  };\n  LegendModel.prototype.isSelected = function (name) {\n    var selected = this.option.selected;\n    return !(selected.hasOwnProperty(name) && !selected[name]) && zrUtil.indexOf(this._availableNames, name) >= 0;\n  };\n  LegendModel.prototype.getOrient = function () {\n    return this.get('orient') === 'vertical' ? {\n      index: 1,\n      name: 'vertical'\n    } : {\n      index: 0,\n      name: 'horizontal'\n    };\n  };\n  LegendModel.type = 'legend.plain';\n  LegendModel.dependencies = ['series'];\n  LegendModel.defaultOption = {\n    // zlevel: 0,\n    z: 4,\n    show: true,\n    orient: 'horizontal',\n    left: 'center',\n    // right: 'center',\n    // top: 0,\n    bottom: tokens.size.m,\n    align: 'auto',\n    backgroundColor: tokens.color.transparent,\n    borderColor: tokens.color.border,\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: 5,\n    itemGap: 8,\n    itemWidth: 25,\n    itemHeight: 14,\n    symbolRotate: 'inherit',\n    symbolKeepAspect: true,\n    inactiveColor: tokens.color.disabled,\n    inactiveBorderColor: tokens.color.disabled,\n    inactiveBorderWidth: 'auto',\n    itemStyle: {\n      color: 'inherit',\n      opacity: 'inherit',\n      borderColor: 'inherit',\n      borderWidth: 'auto',\n      borderCap: 'inherit',\n      borderJoin: 'inherit',\n      borderDashOffset: 'inherit',\n      borderMiterLimit: 'inherit'\n    },\n    lineStyle: {\n      width: 'auto',\n      color: 'inherit',\n      inactiveColor: tokens.color.disabled,\n      inactiveWidth: 2,\n      opacity: 'inherit',\n      type: 'inherit',\n      cap: 'inherit',\n      join: 'inherit',\n      dashOffset: 'inherit',\n      miterLimit: 'inherit'\n    },\n    textStyle: {\n      color: tokens.color.secondary\n    },\n    selectedMode: true,\n    selector: false,\n    selectorLabel: {\n      show: true,\n      borderRadius: 10,\n      padding: [3, 5, 3, 5],\n      fontSize: 12,\n      fontFamily: 'sans-serif',\n      color: tokens.color.tertiary,\n      borderWidth: 1,\n      borderColor: tokens.color.border\n    },\n    emphasis: {\n      selectorLabel: {\n        show: true,\n        color: tokens.color.quaternary\n      }\n    },\n    selectorPosition: 'auto',\n    selectorItemGap: 7,\n    selectorButtonGap: 10,\n    tooltip: {\n      show: false\n    },\n    triggerEvent: false\n  };\n  return LegendModel;\n}(ComponentModel);\nexport default LegendModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parse, stringify } from 'zrender/lib/tool/color.js';\nimport * as graphic from '../../util/graphic.js';\nimport { enableHoverEmphasis } from '../../util/states.js';\nimport { setLabelStyle, createTextStyle } from '../../label/labelStyle.js';\nimport { makeBackground } from '../helper/listComponent.js';\nimport * as layoutUtil from '../../util/layout.js';\nimport ComponentView from '../../view/Component.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport { createOrUpdatePatternFromDecal } from '../../util/decal.js';\nimport { getECData } from '../../util/innerStore.js';\nimport tokens from '../../visual/tokens.js';\nvar curry = zrUtil.curry;\nvar each = zrUtil.each;\nvar Group = graphic.Group;\nvar LegendView = /** @class */function (_super) {\n  __extends(LegendView, _super);\n  function LegendView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = LegendView.type;\n    _this.newlineDisabled = false;\n    return _this;\n  }\n  LegendView.prototype.init = function () {\n    this.group.add(this._contentGroup = new Group());\n    this.group.add(this._selectorGroup = new Group());\n    this._isFirstRender = true;\n  };\n  /**\n   * @protected\n   */\n  LegendView.prototype.getContentGroup = function () {\n    return this._contentGroup;\n  };\n  /**\n   * @protected\n   */\n  LegendView.prototype.getSelectorGroup = function () {\n    return this._selectorGroup;\n  };\n  /**\n   * @override\n   */\n  LegendView.prototype.render = function (legendModel, ecModel, api) {\n    var isFirstRender = this._isFirstRender;\n    this._isFirstRender = false;\n    this.resetInner();\n    if (!legendModel.get('show', true)) {\n      return;\n    }\n    var itemAlign = legendModel.get('align');\n    var orient = legendModel.get('orient');\n    if (!itemAlign || itemAlign === 'auto') {\n      itemAlign = legendModel.get('left') === 'right' && orient === 'vertical' ? 'right' : 'left';\n    }\n    // selector has been normalized to an array in model\n    var selector = legendModel.get('selector', true);\n    var selectorPosition = legendModel.get('selectorPosition', true);\n    if (selector && (!selectorPosition || selectorPosition === 'auto')) {\n      selectorPosition = orient === 'horizontal' ? 'end' : 'start';\n    }\n    this.renderInner(itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition);\n    // Perform layout.\n    var refContainer = layoutUtil.createBoxLayoutReference(legendModel, api).refContainer;\n    var positionInfo = legendModel.getBoxLayoutParams();\n    var padding = legendModel.get('padding');\n    var maxSize = layoutUtil.getLayoutRect(positionInfo, refContainer, padding);\n    var mainRect = this.layoutInner(legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition);\n    // Place mainGroup, based on the calculated `mainRect`.\n    var layoutRect = layoutUtil.getLayoutRect(zrUtil.defaults({\n      width: mainRect.width,\n      height: mainRect.height\n    }, positionInfo), refContainer, padding);\n    this.group.x = layoutRect.x - mainRect.x;\n    this.group.y = layoutRect.y - mainRect.y;\n    this.group.markRedraw();\n    // Render background after group is layout.\n    this.group.add(this._backgroundEl = makeBackground(mainRect,\n    // FXIME: most itemStyle options does not work in background because inherit is not handled yet.\n    legendModel));\n  };\n  LegendView.prototype.resetInner = function () {\n    this.getContentGroup().removeAll();\n    this._backgroundEl && this.group.remove(this._backgroundEl);\n    this.getSelectorGroup().removeAll();\n  };\n  LegendView.prototype.renderInner = function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var legendDrawnMap = zrUtil.createHashMap();\n    var selectMode = legendModel.get('selectedMode');\n    var triggerEvent = legendModel.get('triggerEvent');\n    var excludeSeriesId = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      !seriesModel.get('legendHoverLink') && excludeSeriesId.push(seriesModel.id);\n    });\n    each(legendModel.getData(), function (legendItemModel, dataIndex) {\n      var _this = this;\n      var name = legendItemModel.get('name');\n      // Use empty string or \\n as a newline string\n      if (!this.newlineDisabled && (name === '' || name === '\\n')) {\n        var g = new Group();\n        // @ts-ignore\n        g.newline = true;\n        contentGroup.add(g);\n        return;\n      }\n      // Representitive series.\n      var seriesModel = ecModel.getSeriesByName(name)[0];\n      if (legendDrawnMap.get(name)) {\n        // Have been drawn\n        return;\n      }\n      // Legend to control series.\n      if (seriesModel) {\n        var data = seriesModel.getData();\n        var lineVisualStyle = data.getVisual('legendLineStyle') || {};\n        var legendIcon = data.getVisual('legendIcon');\n        /**\n         * `data.getVisual('style')` may be the color from the register\n         * in series. For example, for line series,\n         */\n        var style = data.getVisual('style');\n        var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, style, legendIcon, selectMode, api);\n        itemGroup.on('click', curry(dispatchSelectAction, name, null, api, excludeSeriesId)).on('mouseover', curry(dispatchHighlightAction, seriesModel.name, null, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, seriesModel.name, null, api, excludeSeriesId));\n        if (ecModel.ssr) {\n          itemGroup.eachChild(function (child) {\n            var ecData = getECData(child);\n            ecData.seriesIndex = seriesModel.seriesIndex;\n            ecData.dataIndex = dataIndex;\n            ecData.ssrType = 'legend';\n          });\n        }\n        if (triggerEvent) {\n          itemGroup.eachChild(function (child) {\n            _this.packEventData(child, legendModel, seriesModel, dataIndex, name);\n          });\n        }\n        legendDrawnMap.set(name, true);\n      } else {\n        // Legend to control data. In pie and funnel.\n        ecModel.eachRawSeries(function (seriesModel) {\n          var _this = this;\n          // In case multiple series has same data name\n          if (legendDrawnMap.get(name)) {\n            return;\n          }\n          if (seriesModel.legendVisualProvider) {\n            var provider = seriesModel.legendVisualProvider;\n            if (!provider.containName(name)) {\n              return;\n            }\n            var idx = provider.indexOfName(name);\n            var style = provider.getItemVisual(idx, 'style');\n            var legendIcon = provider.getItemVisual(idx, 'legendIcon');\n            var colorArr = parse(style.fill);\n            // Color may be set to transparent in visualMap when data is out of range.\n            // Do not show nothing.\n            if (colorArr && colorArr[3] === 0) {\n              colorArr[3] = 0.2;\n              // TODO color is set to 0, 0, 0, 0. Should show correct RGBA\n              style = zrUtil.extend(zrUtil.extend({}, style), {\n                fill: stringify(colorArr, 'rgba')\n              });\n            }\n            var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, {}, style, legendIcon, selectMode, api);\n            // FIXME: consider different series has items with the same name.\n            itemGroup.on('click', curry(dispatchSelectAction, null, name, api, excludeSeriesId))\n            // Should not specify the series name, consider legend controls\n            // more than one pie series.\n            .on('mouseover', curry(dispatchHighlightAction, null, name, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, null, name, api, excludeSeriesId));\n            if (ecModel.ssr) {\n              itemGroup.eachChild(function (child) {\n                var ecData = getECData(child);\n                ecData.seriesIndex = seriesModel.seriesIndex;\n                ecData.dataIndex = dataIndex;\n                ecData.ssrType = 'legend';\n              });\n            }\n            if (triggerEvent) {\n              itemGroup.eachChild(function (child) {\n                _this.packEventData(child, legendModel, seriesModel, dataIndex, name);\n              });\n            }\n            legendDrawnMap.set(name, true);\n          }\n        }, this);\n      }\n      if (process.env.NODE_ENV !== 'production') {\n        if (!legendDrawnMap.get(name)) {\n          console.warn(name + ' series not exists. Legend data should be same with series name or data name.');\n        }\n      }\n    }, this);\n    if (selector) {\n      this._createSelector(selector, legendModel, api, orient, selectorPosition);\n    }\n  };\n  LegendView.prototype.packEventData = function (el, legendModel, seriesModel, dataIndex, name) {\n    var eventData = {\n      componentType: 'legend',\n      componentIndex: legendModel.componentIndex,\n      dataIndex: dataIndex,\n      value: name,\n      seriesIndex: seriesModel.seriesIndex\n    };\n    getECData(el).eventData = eventData;\n  };\n  ;\n  LegendView.prototype._createSelector = function (selector, legendModel, api, orient, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    each(selector, function createSelectorButton(selectorItem) {\n      var type = selectorItem.type;\n      var labelText = new graphic.Text({\n        style: {\n          x: 0,\n          y: 0,\n          align: 'center',\n          verticalAlign: 'middle'\n        },\n        onclick: function () {\n          api.dispatchAction({\n            type: type === 'all' ? 'legendAllSelect' : 'legendInverseSelect',\n            legendId: legendModel.id\n          });\n        }\n      });\n      selectorGroup.add(labelText);\n      var labelModel = legendModel.getModel('selectorLabel');\n      var emphasisLabelModel = legendModel.getModel(['emphasis', 'selectorLabel']);\n      setLabelStyle(labelText, {\n        normal: labelModel,\n        emphasis: emphasisLabelModel\n      }, {\n        defaultText: selectorItem.title\n      });\n      enableHoverEmphasis(labelText);\n    });\n  };\n  LegendView.prototype._createItem = function (seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, itemVisualStyle, legendIcon, selectMode, api) {\n    var drawType = seriesModel.visualDrawType;\n    var itemWidth = legendModel.get('itemWidth');\n    var itemHeight = legendModel.get('itemHeight');\n    var isSelected = legendModel.isSelected(name);\n    var iconRotate = legendItemModel.get('symbolRotate');\n    var symbolKeepAspect = legendItemModel.get('symbolKeepAspect');\n    var legendIconType = legendItemModel.get('icon');\n    legendIcon = legendIconType || legendIcon || 'roundRect';\n    var style = getLegendStyle(legendIcon, legendItemModel, lineVisualStyle, itemVisualStyle, drawType, isSelected, api);\n    var itemGroup = new Group();\n    var textStyleModel = legendItemModel.getModel('textStyle');\n    if (zrUtil.isFunction(seriesModel.getLegendIcon) && (!legendIconType || legendIconType === 'inherit')) {\n      // Series has specific way to define legend icon\n      itemGroup.add(seriesModel.getLegendIcon({\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        icon: legendIcon,\n        iconRotate: iconRotate,\n        itemStyle: style.itemStyle,\n        lineStyle: style.lineStyle,\n        symbolKeepAspect: symbolKeepAspect\n      }));\n    } else {\n      // Use default legend icon policy for most series\n      var rotate = legendIconType === 'inherit' && seriesModel.getData().getVisual('symbol') ? iconRotate === 'inherit' ? seriesModel.getData().getVisual('symbolRotate') : iconRotate : 0; // No rotation for no icon\n      itemGroup.add(getDefaultLegendIcon({\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        icon: legendIcon,\n        iconRotate: rotate,\n        itemStyle: style.itemStyle,\n        lineStyle: style.lineStyle,\n        symbolKeepAspect: symbolKeepAspect\n      }));\n    }\n    var textX = itemAlign === 'left' ? itemWidth + 5 : -5;\n    var textAlign = itemAlign;\n    var formatter = legendModel.get('formatter');\n    var content = name;\n    if (zrUtil.isString(formatter) && formatter) {\n      content = formatter.replace('{name}', name != null ? name : '');\n    } else if (zrUtil.isFunction(formatter)) {\n      content = formatter(name);\n    }\n    var textColor = isSelected ? textStyleModel.getTextColor() : legendItemModel.get('inactiveColor');\n    itemGroup.add(new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        text: content,\n        x: textX,\n        y: itemHeight / 2,\n        fill: textColor,\n        align: textAlign,\n        verticalAlign: 'middle'\n      }, {\n        inheritColor: textColor\n      })\n    }));\n    // Add a invisible rect to increase the area of mouse hover\n    var hitRect = new graphic.Rect({\n      shape: itemGroup.getBoundingRect(),\n      style: {\n        // Cannot use 'invisible' because SVG SSR will miss the node\n        fill: 'transparent'\n      }\n    });\n    var tooltipModel = legendItemModel.getModel('tooltip');\n    if (tooltipModel.get('show')) {\n      graphic.setTooltipConfig({\n        el: hitRect,\n        componentModel: legendModel,\n        itemName: name,\n        itemTooltipOption: tooltipModel.option\n      });\n    }\n    itemGroup.add(hitRect);\n    itemGroup.eachChild(function (child) {\n      child.silent = true;\n    });\n    hitRect.silent = !selectMode;\n    this.getContentGroup().add(itemGroup);\n    enableHoverEmphasis(itemGroup);\n    // @ts-ignore\n    itemGroup.__legendDataIndex = dataIndex;\n    return itemGroup;\n  };\n  LegendView.prototype.layoutInner = function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var selectorGroup = this.getSelectorGroup();\n    // Place items in contentGroup.\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), maxSize.width, maxSize.height);\n    var contentRect = contentGroup.getBoundingRect();\n    var contentPos = [-contentRect.x, -contentRect.y];\n    selectorGroup.markRedraw();\n    contentGroup.markRedraw();\n    if (selector) {\n      // Place buttons in selectorGroup\n      layoutUtil.box(\n      // Buttons in selectorGroup always layout horizontally\n      'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n      var selectorRect = selectorGroup.getBoundingRect();\n      var selectorPos = [-selectorRect.x, -selectorRect.y];\n      var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n      var orientIdx = legendModel.getOrient().index;\n      var wh = orientIdx === 0 ? 'width' : 'height';\n      var hw = orientIdx === 0 ? 'height' : 'width';\n      var yx = orientIdx === 0 ? 'y' : 'x';\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += contentRect[wh] + selectorButtonGap;\n      } else {\n        contentPos[orientIdx] += selectorRect[wh] + selectorButtonGap;\n      }\n      // Always align selector to content as 'middle'\n      selectorPos[1 - orientIdx] += contentRect[hw] / 2 - selectorRect[hw] / 2;\n      selectorGroup.x = selectorPos[0];\n      selectorGroup.y = selectorPos[1];\n      contentGroup.x = contentPos[0];\n      contentGroup.y = contentPos[1];\n      var mainRect = {\n        x: 0,\n        y: 0\n      };\n      mainRect[wh] = contentRect[wh] + selectorButtonGap + selectorRect[wh];\n      mainRect[hw] = Math.max(contentRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(0, selectorRect[yx] + selectorPos[1 - orientIdx]);\n      return mainRect;\n    } else {\n      contentGroup.x = contentPos[0];\n      contentGroup.y = contentPos[1];\n      return this.group.getBoundingRect();\n    }\n  };\n  /**\n   * @protected\n   */\n  LegendView.prototype.remove = function () {\n    this.getContentGroup().removeAll();\n    this._isFirstRender = true;\n  };\n  LegendView.type = 'legend.plain';\n  return LegendView;\n}(ComponentView);\nfunction getLegendStyle(iconType, legendItemModel, lineVisualStyle, itemVisualStyle, drawType, isSelected, api) {\n  /**\n   * Use series style if is inherit;\n   * elsewise, use legend style\n   */\n  function handleCommonProps(style, visualStyle) {\n    // If lineStyle.width is 'auto', it is set to be 2 if series has border\n    if (style.lineWidth === 'auto') {\n      style.lineWidth = visualStyle.lineWidth > 0 ? 2 : 0;\n    }\n    each(style, function (propVal, propName) {\n      style[propName] === 'inherit' && (style[propName] = visualStyle[propName]);\n    });\n  }\n  // itemStyle\n  var itemStyleModel = legendItemModel.getModel('itemStyle');\n  var itemStyle = itemStyleModel.getItemStyle();\n  var iconBrushType = iconType.lastIndexOf('empty', 0) === 0 ? 'fill' : 'stroke';\n  var decalStyle = itemStyleModel.getShallow('decal');\n  itemStyle.decal = !decalStyle || decalStyle === 'inherit' ? itemVisualStyle.decal : createOrUpdatePatternFromDecal(decalStyle, api);\n  if (itemStyle.fill === 'inherit') {\n    /**\n     * Series with visualDrawType as 'stroke' should have\n     * series stroke as legend fill\n     */\n    itemStyle.fill = itemVisualStyle[drawType];\n  }\n  if (itemStyle.stroke === 'inherit') {\n    /**\n     * icon type with \"emptyXXX\" should use fill color\n     * in visual style\n     */\n    itemStyle.stroke = itemVisualStyle[iconBrushType];\n  }\n  if (itemStyle.opacity === 'inherit') {\n    /**\n     * Use lineStyle.opacity if drawType is stroke\n     */\n    itemStyle.opacity = (drawType === 'fill' ? itemVisualStyle : lineVisualStyle).opacity;\n  }\n  handleCommonProps(itemStyle, itemVisualStyle);\n  // lineStyle\n  var legendLineModel = legendItemModel.getModel('lineStyle');\n  var lineStyle = legendLineModel.getLineStyle();\n  handleCommonProps(lineStyle, lineVisualStyle);\n  // Fix auto color to real color\n  itemStyle.fill === 'auto' && (itemStyle.fill = itemVisualStyle.fill);\n  itemStyle.stroke === 'auto' && (itemStyle.stroke = itemVisualStyle.fill);\n  lineStyle.stroke === 'auto' && (lineStyle.stroke = itemVisualStyle.fill);\n  if (!isSelected) {\n    var borderWidth = legendItemModel.get('inactiveBorderWidth');\n    /**\n     * Since stroke is set to be inactiveBorderColor, it may occur that\n     * there is no border in series but border in legend, so we need to\n     * use border only when series has border if is set to be auto\n     */\n    var visualHasBorder = itemStyle[iconBrushType];\n    itemStyle.lineWidth = borderWidth === 'auto' ? itemVisualStyle.lineWidth > 0 && visualHasBorder ? 2 : 0 : itemStyle.lineWidth;\n    itemStyle.fill = legendItemModel.get('inactiveColor');\n    itemStyle.stroke = legendItemModel.get('inactiveBorderColor');\n    lineStyle.stroke = legendLineModel.get('inactiveColor');\n    lineStyle.lineWidth = legendLineModel.get('inactiveWidth');\n  }\n  return {\n    itemStyle: itemStyle,\n    lineStyle: lineStyle\n  };\n}\nfunction getDefaultLegendIcon(opt) {\n  var symboType = opt.icon || 'roundRect';\n  var icon = createSymbol(symboType, 0, 0, opt.itemWidth, opt.itemHeight, opt.itemStyle.fill, opt.symbolKeepAspect);\n  icon.setStyle(opt.itemStyle);\n  icon.rotation = (opt.iconRotate || 0) * Math.PI / 180;\n  icon.setOrigin([opt.itemWidth / 2, opt.itemHeight / 2]);\n  if (symboType.indexOf('empty') > -1) {\n    icon.style.stroke = icon.style.fill;\n    icon.style.fill = tokens.color.neutral00;\n    icon.style.lineWidth = 2;\n  }\n  return icon;\n}\nfunction dispatchSelectAction(seriesName, dataName, api, excludeSeriesId) {\n  // downplay before unselect\n  dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId);\n  api.dispatchAction({\n    type: 'legendToggleSelect',\n    name: seriesName != null ? seriesName : dataName\n  });\n  // highlight after select\n  // TODO highlight immediately may cause animation loss.\n  dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId);\n}\nfunction isUseHoverLayer(api) {\n  var list = api.getZr().storage.getDisplayList();\n  var emphasisState;\n  var i = 0;\n  var len = list.length;\n  while (i < len && !(emphasisState = list[i].states.emphasis)) {\n    i++;\n  }\n  return emphasisState && emphasisState.hoverLayer;\n}\nfunction dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  if (!isUseHoverLayer(api)) {\n    api.dispatchAction({\n      type: 'highlight',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\nfunction dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  if (!isUseHoverLayer(api)) {\n    api.dispatchAction({\n      type: 'downplay',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\nexport default LegendView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function legendFilter(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n  if (legendModels && legendModels.length) {\n    ecModel.filterSeries(function (series) {\n      // If in any legend component the status is not selected.\n      // Because in legend series is assumed selected when it is not in the legend data.\n      for (var i = 0; i < legendModels.length; i++) {\n        if (!legendModels[i].isSelected(series.name)) {\n          return false;\n        }\n      }\n      return true;\n    });\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { curry, each, hasOwn } from 'zrender/lib/core/util.js';\nfunction legendSelectActionHandler(methodName, payload, ecModel) {\n  var isAllSelect = methodName === 'allSelect' || methodName === 'inverseSelect';\n  var selectedMap = {};\n  var actionLegendIndices = [];\n  ecModel.eachComponent({\n    mainType: 'legend',\n    query: payload\n  }, function (legendModel) {\n    if (isAllSelect) {\n      legendModel[methodName]();\n    } else {\n      legendModel[methodName](payload.name);\n    }\n    makeSelectedMap(legendModel, selectedMap);\n    actionLegendIndices.push(legendModel.componentIndex);\n  });\n  var allSelectedMap = {};\n  // make selectedMap from all legend components\n  ecModel.eachComponent('legend', function (legendModel) {\n    each(selectedMap, function (isSelected, name) {\n      // Force other legend has same selected status\n      // Or the first is toggled to true and other are toggled to false\n      // In the case one legend has some item unSelected in option. And if other legend\n      // doesn't has the item, they will assume it is selected.\n      legendModel[isSelected ? 'select' : 'unSelect'](name);\n    });\n    makeSelectedMap(legendModel, allSelectedMap);\n  });\n  // Return the event explicitly\n  return isAllSelect ? {\n    selected: allSelectedMap,\n    // return legendIndex array to tell the developers which legends are allSelect / inverseSelect\n    legendIndex: actionLegendIndices\n  } : {\n    name: payload.name,\n    selected: allSelectedMap\n  };\n}\nfunction makeSelectedMap(legendModel, out) {\n  var selectedMap = out || {};\n  each(legendModel.getData(), function (model) {\n    var name = model.get('name');\n    // Wrap element\n    if (name === '\\n' || name === '') {\n      return;\n    }\n    var isItemSelected = legendModel.isSelected(name);\n    if (hasOwn(selectedMap, name)) {\n      // Unselected if any legend is unselected\n      selectedMap[name] = selectedMap[name] && isItemSelected;\n    } else {\n      selectedMap[name] = isItemSelected;\n    }\n  });\n  return selectedMap;\n}\nexport function installLegendAction(registers) {\n  /**\n   * @event legendToggleSelect\n   * @type {Object}\n   * @property {string} type 'legendToggleSelect'\n   * @property {string} [from]\n   * @property {string} name Series name or data item name\n   */\n  registers.registerAction('legendToggleSelect', 'legendselectchanged', curry(legendSelectActionHandler, 'toggleSelected'));\n  registers.registerAction('legendAllSelect', 'legendselectall', curry(legendSelectActionHandler, 'allSelect'));\n  registers.registerAction('legendInverseSelect', 'legendinverseselect', curry(legendSelectActionHandler, 'inverseSelect'));\n  /**\n   * @event legendSelect\n   * @type {Object}\n   * @property {string} type 'legendSelect'\n   * @property {string} name Series name or data item name\n   */\n  registers.registerAction('legendSelect', 'legendselected', curry(legendSelectActionHandler, 'select'));\n  /**\n   * @event legendUnSelect\n   * @type {Object}\n   * @property {string} type 'legendUnSelect'\n   * @property {string} name Series name or data item name\n   */\n  registers.registerAction('legendUnSelect', 'legendunselected', curry(legendSelectActionHandler, 'unSelect'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport LegendModel from './LegendModel.js';\nimport LegendView from './LegendView.js';\nimport legendFilter from './legendFilter.js';\nimport { installLegendAction } from './legendAction.js';\nexport function install(registers) {\n  registers.registerComponentModel(LegendModel);\n  registers.registerComponentView(LegendView);\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.SERIES_FILTER, legendFilter);\n  registers.registerSubTypeDefaulter('legend', function () {\n    return 'plain';\n  });\n  installLegendAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport LegendModel from './LegendModel.js';\nimport { mergeLayoutParam, getLayoutParams } from '../../util/layout.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nimport tokens from '../../visual/tokens.js';\nvar ScrollableLegendModel = /** @class */function (_super) {\n  __extends(ScrollableLegendModel, _super);\n  function ScrollableLegendModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ScrollableLegendModel.type;\n    return _this;\n  }\n  /**\n   * @param {number} scrollDataIndex\n   */\n  ScrollableLegendModel.prototype.setScrollDataIndex = function (scrollDataIndex) {\n    this.option.scrollDataIndex = scrollDataIndex;\n  };\n  ScrollableLegendModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputPositionParams = getLayoutParams(option);\n    _super.prototype.init.call(this, option, parentModel, ecModel);\n    mergeAndNormalizeLayoutParams(this, option, inputPositionParams);\n  };\n  /**\n   * @override\n   */\n  ScrollableLegendModel.prototype.mergeOption = function (option, ecModel) {\n    _super.prototype.mergeOption.call(this, option, ecModel);\n    mergeAndNormalizeLayoutParams(this, this.option, option);\n  };\n  ScrollableLegendModel.type = 'legend.scroll';\n  ScrollableLegendModel.defaultOption = inheritDefaultOption(LegendModel.defaultOption, {\n    scrollDataIndex: 0,\n    pageButtonItemGap: 5,\n    pageButtonGap: null,\n    pageButtonPosition: 'end',\n    pageFormatter: '{current}/{total}',\n    pageIcons: {\n      horizontal: ['M0,0L12,-10L12,10z', 'M0,0L-12,-10L-12,10z'],\n      vertical: ['M0,0L20,0L10,-20z', 'M0,0L20,0L10,20z']\n    },\n    pageIconColor: tokens.color.accent50,\n    pageIconInactiveColor: tokens.color.accent10,\n    pageIconSize: 15,\n    pageTextStyle: {\n      color: tokens.color.tertiary\n    },\n    animationDurationUpdate: 800\n  });\n  return ScrollableLegendModel;\n}(LegendModel);\n;\n// Do not `ignoreSize` to enable setting {left: 10, right: 10}.\nfunction mergeAndNormalizeLayoutParams(legendModel, target, raw) {\n  var orient = legendModel.getOrient();\n  var ignoreSize = [1, 1];\n  ignoreSize[orient.index] = 0;\n  mergeLayoutParam(target, raw, {\n    type: 'box',\n    ignoreSize: !!ignoreSize\n  });\n}\nexport default ScrollableLegendModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Separate legend and scrollable legend to reduce package size.\n */\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as layoutUtil from '../../util/layout.js';\nimport LegendView from './LegendView.js';\nvar Group = graphic.Group;\nvar WH = ['width', 'height'];\nvar XY = ['x', 'y'];\nvar ScrollableLegendView = /** @class */function (_super) {\n  __extends(ScrollableLegendView, _super);\n  function ScrollableLegendView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ScrollableLegendView.type;\n    _this.newlineDisabled = true;\n    _this._currentIndex = 0;\n    return _this;\n  }\n  ScrollableLegendView.prototype.init = function () {\n    _super.prototype.init.call(this);\n    this.group.add(this._containerGroup = new Group());\n    this._containerGroup.add(this.getContentGroup());\n    this.group.add(this._controllerGroup = new Group());\n  };\n  /**\n   * @override\n   */\n  ScrollableLegendView.prototype.resetInner = function () {\n    _super.prototype.resetInner.call(this);\n    this._controllerGroup.removeAll();\n    this._containerGroup.removeClipPath();\n    this._containerGroup.__rectSize = null;\n  };\n  /**\n   * @override\n   */\n  ScrollableLegendView.prototype.renderInner = function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var self = this;\n    // Render content items.\n    _super.prototype.renderInner.call(this, itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition);\n    var controllerGroup = this._controllerGroup;\n    // FIXME: support be 'auto' adapt to size number text length,\n    // e.g., '3/12345' should not overlap with the control arrow button.\n    var pageIconSize = legendModel.get('pageIconSize', true);\n    var pageIconSizeArr = zrUtil.isArray(pageIconSize) ? pageIconSize : [pageIconSize, pageIconSize];\n    createPageButton('pagePrev', 0);\n    var pageTextStyleModel = legendModel.getModel('pageTextStyle');\n    controllerGroup.add(new graphic.Text({\n      name: 'pageText',\n      style: {\n        // Placeholder to calculate a proper layout.\n        text: 'xx/xx',\n        fill: pageTextStyleModel.getTextColor(),\n        font: pageTextStyleModel.getFont(),\n        verticalAlign: 'middle',\n        align: 'center'\n      },\n      silent: true\n    }));\n    createPageButton('pageNext', 1);\n    function createPageButton(name, iconIdx) {\n      var pageDataIndexName = name + 'DataIndex';\n      var icon = graphic.createIcon(legendModel.get('pageIcons', true)[legendModel.getOrient().name][iconIdx], {\n        // Buttons will be created in each render, so we do not need\n        // to worry about avoiding using legendModel kept in scope.\n        onclick: zrUtil.bind(self._pageGo, self, pageDataIndexName, legendModel, api)\n      }, {\n        x: -pageIconSizeArr[0] / 2,\n        y: -pageIconSizeArr[1] / 2,\n        width: pageIconSizeArr[0],\n        height: pageIconSizeArr[1]\n      });\n      icon.name = name;\n      controllerGroup.add(icon);\n    }\n  };\n  /**\n   * @override\n   */\n  ScrollableLegendView.prototype.layoutInner = function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    var orientIdx = legendModel.getOrient().index;\n    var wh = WH[orientIdx];\n    var xy = XY[orientIdx];\n    var hw = WH[1 - orientIdx];\n    var yx = XY[1 - orientIdx];\n    selector && layoutUtil.box(\n    // Buttons in selectorGroup always layout horizontally\n    'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n    var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n    var selectorRect = selectorGroup.getBoundingRect();\n    var selectorPos = [-selectorRect.x, -selectorRect.y];\n    var processMaxSize = zrUtil.clone(maxSize);\n    selector && (processMaxSize[wh] = maxSize[wh] - selectorRect[wh] - selectorButtonGap);\n    var mainRect = this._layoutContentAndController(legendModel, isFirstRender, processMaxSize, orientIdx, wh, hw, yx, xy);\n    if (selector) {\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += mainRect[wh] + selectorButtonGap;\n      } else {\n        var offset = selectorRect[wh] + selectorButtonGap;\n        selectorPos[orientIdx] -= offset;\n        mainRect[xy] -= offset;\n      }\n      mainRect[wh] += selectorRect[wh] + selectorButtonGap;\n      selectorPos[1 - orientIdx] += mainRect[yx] + mainRect[hw] / 2 - selectorRect[hw] / 2;\n      mainRect[hw] = Math.max(mainRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(mainRect[yx], selectorRect[yx] + selectorPos[1 - orientIdx]);\n      selectorGroup.x = selectorPos[0];\n      selectorGroup.y = selectorPos[1];\n      selectorGroup.markRedraw();\n    }\n    return mainRect;\n  };\n  ScrollableLegendView.prototype._layoutContentAndController = function (legendModel, isFirstRender, maxSize, orientIdx, wh, hw, yx, xy) {\n    var contentGroup = this.getContentGroup();\n    var containerGroup = this._containerGroup;\n    var controllerGroup = this._controllerGroup;\n    // Place items in contentGroup.\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), !orientIdx ? null : maxSize.width, orientIdx ? null : maxSize.height);\n    layoutUtil.box(\n    // Buttons in controller are layout always horizontally.\n    'horizontal', controllerGroup, legendModel.get('pageButtonItemGap', true));\n    var contentRect = contentGroup.getBoundingRect();\n    var controllerRect = controllerGroup.getBoundingRect();\n    var showController = this._showController = contentRect[wh] > maxSize[wh];\n    // In case that the inner elements of contentGroup layout do not based on [0, 0]\n    var contentPos = [-contentRect.x, -contentRect.y];\n    // Remain contentPos when scroll animation perfroming.\n    // If first rendering, `contentGroup.position` is [0, 0], which\n    // does not make sense and may cause unexepcted animation if adopted.\n    if (!isFirstRender) {\n      contentPos[orientIdx] = contentGroup[xy];\n    }\n    // Layout container group based on 0.\n    var containerPos = [0, 0];\n    var controllerPos = [-controllerRect.x, -controllerRect.y];\n    var pageButtonGap = zrUtil.retrieve2(legendModel.get('pageButtonGap', true), legendModel.get('itemGap', true));\n    // Place containerGroup and controllerGroup and contentGroup.\n    if (showController) {\n      var pageButtonPosition = legendModel.get('pageButtonPosition', true);\n      // controller is on the right / bottom.\n      if (pageButtonPosition === 'end') {\n        controllerPos[orientIdx] += maxSize[wh] - controllerRect[wh];\n      }\n      // controller is on the left / top.\n      else {\n        containerPos[orientIdx] += controllerRect[wh] + pageButtonGap;\n      }\n    }\n    // Always align controller to content as 'middle'.\n    controllerPos[1 - orientIdx] += contentRect[hw] / 2 - controllerRect[hw] / 2;\n    contentGroup.setPosition(contentPos);\n    containerGroup.setPosition(containerPos);\n    controllerGroup.setPosition(controllerPos);\n    // Calculate `mainRect` and set `clipPath`.\n    // mainRect should not be calculated by `this.group.getBoundingRect()`\n    // for sake of the overflow.\n    var mainRect = {\n      x: 0,\n      y: 0\n    };\n    // Consider content may be overflow (should be clipped).\n    mainRect[wh] = showController ? maxSize[wh] : contentRect[wh];\n    mainRect[hw] = Math.max(contentRect[hw], controllerRect[hw]);\n    // `containerRect[yx] + containerPos[1 - orientIdx]` is 0.\n    mainRect[yx] = Math.min(0, controllerRect[yx] + controllerPos[1 - orientIdx]);\n    containerGroup.__rectSize = maxSize[wh];\n    if (showController) {\n      var clipShape = {\n        x: 0,\n        y: 0\n      };\n      clipShape[wh] = Math.max(maxSize[wh] - controllerRect[wh] - pageButtonGap, 0);\n      clipShape[hw] = mainRect[hw];\n      containerGroup.setClipPath(new graphic.Rect({\n        shape: clipShape\n      }));\n      // Consider content may be larger than container, container rect\n      // can not be obtained from `containerGroup.getBoundingRect()`.\n      containerGroup.__rectSize = clipShape[wh];\n    } else {\n      // Do not remove or ignore controller. Keep them set as placeholders.\n      controllerGroup.eachChild(function (child) {\n        child.attr({\n          invisible: true,\n          silent: true\n        });\n      });\n    }\n    // Content translate animation.\n    var pageInfo = this._getPageInfo(legendModel);\n    pageInfo.pageIndex != null && graphic.updateProps(contentGroup, {\n      x: pageInfo.contentPosition[0],\n      y: pageInfo.contentPosition[1]\n    },\n    // When switch from \"show controller\" to \"not show controller\", view should be\n    // updated immediately without animation, otherwise causes weird effect.\n    showController ? legendModel : null);\n    this._updatePageInfoView(legendModel, pageInfo);\n    return mainRect;\n  };\n  ScrollableLegendView.prototype._pageGo = function (to, legendModel, api) {\n    var scrollDataIndex = this._getPageInfo(legendModel)[to];\n    scrollDataIndex != null && api.dispatchAction({\n      type: 'legendScroll',\n      scrollDataIndex: scrollDataIndex,\n      legendId: legendModel.id\n    });\n  };\n  ScrollableLegendView.prototype._updatePageInfoView = function (legendModel, pageInfo) {\n    var controllerGroup = this._controllerGroup;\n    zrUtil.each(['pagePrev', 'pageNext'], function (name) {\n      var key = name + 'DataIndex';\n      var canJump = pageInfo[key] != null;\n      var icon = controllerGroup.childOfName(name);\n      if (icon) {\n        icon.setStyle('fill', canJump ? legendModel.get('pageIconColor', true) : legendModel.get('pageIconInactiveColor', true));\n        icon.cursor = canJump ? 'pointer' : 'default';\n      }\n    });\n    var pageText = controllerGroup.childOfName('pageText');\n    var pageFormatter = legendModel.get('pageFormatter');\n    var pageIndex = pageInfo.pageIndex;\n    var current = pageIndex != null ? pageIndex + 1 : 0;\n    var total = pageInfo.pageCount;\n    pageText && pageFormatter && pageText.setStyle('text', zrUtil.isString(pageFormatter) ? pageFormatter.replace('{current}', current == null ? '' : current + '').replace('{total}', total == null ? '' : total + '') : pageFormatter({\n      current: current,\n      total: total\n    }));\n  };\n  /**\n   *  contentPosition: Array.<number>, null when data item not found.\n   *  pageIndex: number, null when data item not found.\n   *  pageCount: number, always be a number, can be 0.\n   *  pagePrevDataIndex: number, null when no previous page.\n   *  pageNextDataIndex: number, null when no next page.\n   * }\n   */\n  ScrollableLegendView.prototype._getPageInfo = function (legendModel) {\n    var scrollDataIndex = legendModel.get('scrollDataIndex', true);\n    var contentGroup = this.getContentGroup();\n    var containerRectSize = this._containerGroup.__rectSize;\n    var orientIdx = legendModel.getOrient().index;\n    var wh = WH[orientIdx];\n    var xy = XY[orientIdx];\n    var targetItemIndex = this._findTargetItemIndex(scrollDataIndex);\n    var children = contentGroup.children();\n    var targetItem = children[targetItemIndex];\n    var itemCount = children.length;\n    var pCount = !itemCount ? 0 : 1;\n    var result = {\n      contentPosition: [contentGroup.x, contentGroup.y],\n      pageCount: pCount,\n      pageIndex: pCount - 1,\n      pagePrevDataIndex: null,\n      pageNextDataIndex: null\n    };\n    if (!targetItem) {\n      return result;\n    }\n    var targetItemInfo = getItemInfo(targetItem);\n    result.contentPosition[orientIdx] = -targetItemInfo.s;\n    // Strategy:\n    // (1) Always align based on the left/top most item.\n    // (2) It is user-friendly that the last item shown in the\n    // current window is shown at the begining of next window.\n    // Otherwise if half of the last item is cut by the window,\n    // it will have no chance to display entirely.\n    // (3) Consider that item size probably be different, we\n    // have calculate pageIndex by size rather than item index,\n    // and we can not get page index directly by division.\n    // (4) The window is to narrow to contain more than\n    // one item, we should make sure that the page can be fliped.\n    for (var i = targetItemIndex + 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i <= itemCount; ++i) {\n      currItemInfo = getItemInfo(children[i]);\n      if (\n      // Half of the last item is out of the window.\n      !currItemInfo && winEndItemInfo.e > winStartItemInfo.s + containerRectSize\n      // If the current item does not intersect with the window, the new page\n      // can be started at the current item or the last item.\n      || currItemInfo && !intersect(currItemInfo, winStartItemInfo.s)) {\n        if (winEndItemInfo.i > winStartItemInfo.i) {\n          winStartItemInfo = winEndItemInfo;\n        } else {\n          // e.g., when page size is smaller than item size.\n          winStartItemInfo = currItemInfo;\n        }\n        if (winStartItemInfo) {\n          if (result.pageNextDataIndex == null) {\n            result.pageNextDataIndex = winStartItemInfo.i;\n          }\n          ++result.pageCount;\n        }\n      }\n      winEndItemInfo = currItemInfo;\n    }\n    for (var i = targetItemIndex - 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i >= -1; --i) {\n      currItemInfo = getItemInfo(children[i]);\n      if (\n      // If the the end item does not intersect with the window started\n      // from the current item, a page can be settled.\n      (!currItemInfo || !intersect(winEndItemInfo, currItemInfo.s)\n      // e.g., when page size is smaller than item size.\n      ) && winStartItemInfo.i < winEndItemInfo.i) {\n        winEndItemInfo = winStartItemInfo;\n        if (result.pagePrevDataIndex == null) {\n          result.pagePrevDataIndex = winStartItemInfo.i;\n        }\n        ++result.pageCount;\n        ++result.pageIndex;\n      }\n      winStartItemInfo = currItemInfo;\n    }\n    return result;\n    function getItemInfo(el) {\n      if (el) {\n        var itemRect = el.getBoundingRect();\n        var start = itemRect[xy] + el[xy];\n        return {\n          s: start,\n          e: start + itemRect[wh],\n          i: el.__legendDataIndex\n        };\n      }\n    }\n    function intersect(itemInfo, winStart) {\n      return itemInfo.e >= winStart && itemInfo.s <= winStart + containerRectSize;\n    }\n  };\n  ScrollableLegendView.prototype._findTargetItemIndex = function (targetDataIndex) {\n    if (!this._showController) {\n      return 0;\n    }\n    var index;\n    var contentGroup = this.getContentGroup();\n    var defaultIndex;\n    contentGroup.eachChild(function (child, idx) {\n      var legendDataIdx = child.__legendDataIndex;\n      // FIXME\n      // If the given targetDataIndex (from model) is illegal,\n      // we use defaultIndex. But the index on the legend model and\n      // action payload is still illegal. That case will not be\n      // changed until some scenario requires.\n      if (defaultIndex == null && legendDataIdx != null) {\n        defaultIndex = idx;\n      }\n      if (legendDataIdx === targetDataIndex) {\n        index = idx;\n      }\n    });\n    return index != null ? index : defaultIndex;\n  };\n  ScrollableLegendView.type = 'legend.scroll';\n  return ScrollableLegendView;\n}(LegendView);\nexport default ScrollableLegendView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function installScrollableLegendAction(registers) {\n  /**\n   * @event legendScroll\n   * @type {Object}\n   * @property {string} type 'legendScroll'\n   * @property {string} scrollDataIndex\n   */\n  registers.registerAction('legendScroll', 'legendscroll', function (payload, ecModel) {\n    var scrollDataIndex = payload.scrollDataIndex;\n    scrollDataIndex != null && ecModel.eachComponent({\n      mainType: 'legend',\n      subType: 'scroll',\n      query: payload\n    }, function (legendModel) {\n      legendModel.setScrollDataIndex(scrollDataIndex);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport { install as installLegendPlain } from './installLegendPlain.js';\nimport ScrollableLegendModel from './ScrollableLegendModel.js';\nimport ScrollableLegendView from './ScrollableLegendView.js';\nimport installScrollableLegendAction from './scrollableLegendAction.js';\nexport function install(registers) {\n  use(installLegendPlain);\n  registers.registerComponentModel(ScrollableLegendModel);\n  registers.registerComponentView(ScrollableLegendView);\n  installScrollableLegendAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport { install as installLegendPlain } from './installLegendPlain.js';\nimport { install as installLegendScroll } from './installLegendScroll.js';\nexport function install(registers) {\n  use(installLegendPlain);\n  use(installLegendScroll);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport CanvasPainter from 'zrender/lib/canvas/Painter.js';\nexport function install(registers) {\n  registers.registerPainter('canvas', CanvasPainter);\n}","export default function ascending(a, b) {\n  return a == null || b == null ? NaN : a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function descending(a, b) {\n  return a == null || b == null ? NaN\n    : b < a ? -1\n    : b > a ? 1\n    : b >= a ? 0\n    : NaN;\n}\n","import ascending from \"./ascending.js\";\nimport descending from \"./descending.js\";\n\nexport default function bisector(f) {\n  let compare1, compare2, delta;\n\n  // If an accessor is specified, promote it to a comparator. In this case we\n  // can test whether the search value is (self-) comparable. We cant do this\n  // for a comparator (except for specific, known comparators) because we cant\n  // tell if the comparator is symmetric, and an asymmetric comparator cant be\n  // used to test whether a single value is comparable.\n  if (f.length !== 2) {\n    compare1 = ascending;\n    compare2 = (d, x) => ascending(f(d), x);\n    delta = (d, x) => f(d) - x;\n  } else {\n    compare1 = f === ascending || f === descending ? f : zero;\n    compare2 = f;\n    delta = f;\n  }\n\n  function left(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function right(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) <= 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function center(a, x, lo = 0, hi = a.length) {\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction zero() {\n  return 0;\n}\n","export default function number(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","// https://github.com/python/cpython/blob/a74eea238f5baba15797e2e8b570d153bc8690a7/Modules/mathmodule.c#L1423\nexport class Adder {\n  constructor() {\n    this._partials = new Float64Array(32);\n    this._n = 0;\n  }\n  add(x) {\n    const p = this._partials;\n    let i = 0;\n    for (let j = 0; j < this._n && j < 32; j++) {\n      const y = p[j],\n        hi = x + y,\n        lo = Math.abs(x) < Math.abs(y) ? x - (hi - y) : y - (hi - x);\n      if (lo) p[i++] = lo;\n      x = hi;\n    }\n    p[i] = x;\n    this._n = i + 1;\n    return this;\n  }\n  valueOf() {\n    const p = this._partials;\n    let n = this._n, x, y, lo, hi = 0;\n    if (n > 0) {\n      hi = p[--n];\n      while (n > 0) {\n        x = hi;\n        y = p[--n];\n        hi = x + y;\n        lo = y - (hi - x);\n        if (lo) break;\n      }\n      if (n > 0 && ((lo < 0 && p[n - 1] < 0) || (lo > 0 && p[n - 1] > 0))) {\n        y = lo * 2;\n        x = hi + y;\n        if (y == x - hi) hi = x;\n      }\n    }\n    return hi;\n  }\n}\n\nexport function fsum(values, valueof) {\n  const adder = new Adder();\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        adder.add(value);\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        adder.add(value);\n      }\n    }\n  }\n  return +adder;\n}\n\nexport function fcumsum(values, valueof) {\n  const adder = new Adder();\n  let index = -1;\n  return Float64Array.from(values, valueof === undefined\n      ? v => adder.add(+v || 0)\n      : v => adder.add(+valueof(v, ++index, values) || 0)\n  );\n}\n","const e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nfunction tickSpec(start, stop, count) {\n  const step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log10(step)),\n      error = step / Math.pow(10, power),\n      factor = error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1;\n  let i1, i2, inc;\n  if (power < 0) {\n    inc = Math.pow(10, -power) / factor;\n    i1 = Math.round(start * inc);\n    i2 = Math.round(stop * inc);\n    if (i1 / inc < start) ++i1;\n    if (i2 / inc > stop) --i2;\n    inc = -inc;\n  } else {\n    inc = Math.pow(10, power) * factor;\n    i1 = Math.round(start / inc);\n    i2 = Math.round(stop / inc);\n    if (i1 * inc < start) ++i1;\n    if (i2 * inc > stop) --i2;\n  }\n  if (i2 < i1 && 0.5 <= count && count < 2) return tickSpec(start, stop, count * 2);\n  return [i1, i2, inc];\n}\n\nexport default function ticks(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  if (!(count > 0)) return [];\n  if (start === stop) return [start];\n  const reverse = stop < start, [i1, i2, inc] = reverse ? tickSpec(stop, start, count) : tickSpec(start, stop, count);\n  if (!(i2 >= i1)) return [];\n  const n = i2 - i1 + 1, ticks = new Array(n);\n  if (reverse) {\n    if (inc < 0) for (let i = 0; i < n; ++i) ticks[i] = (i2 - i) / -inc;\n    else for (let i = 0; i < n; ++i) ticks[i] = (i2 - i) * inc;\n  } else {\n    if (inc < 0) for (let i = 0; i < n; ++i) ticks[i] = (i1 + i) / -inc;\n    else for (let i = 0; i < n; ++i) ticks[i] = (i1 + i) * inc;\n  }\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  return tickSpec(start, stop, count)[2];\n}\n\nexport function tickStep(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  const reverse = stop < start, inc = reverse ? tickIncrement(stop, start, count) : tickIncrement(start, stop, count);\n  return (reverse ? -1 : 1) * (inc < 0 ? 1 / -inc : inc);\n}\n","function* flatten(arrays) {\n  for (const array of arrays) {\n    yield* array;\n  }\n}\n\nexport default function merge(arrays) {\n  return Array.from(flatten(arrays));\n}\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we dont ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isnt worried about live collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// dont; wed rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and were done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","function responseJson(response) {\n  if (!response.ok) throw new Error(response.status + \" \" + response.statusText);\n  if (response.status === 204 || response.status === 205) return;\n  return response.json();\n}\n\nexport default function(input, init) {\n  return fetch(input, init).then(responseJson);\n}\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer value part that can be\n        // grouped, and fractional or exponential suffix part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","export var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var quarterPi = pi / 4;\nexport var tau = pi * 2;\n\nexport var degrees = 180 / pi;\nexport var radians = pi / 180;\n\nexport var abs = Math.abs;\nexport var atan = Math.atan;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var ceil = Math.ceil;\nexport var exp = Math.exp;\nexport var floor = Math.floor;\nexport var hypot = Math.hypot;\nexport var log = Math.log;\nexport var pow = Math.pow;\nexport var sin = Math.sin;\nexport var sign = Math.sign || function(x) { return x > 0 ? 1 : x < 0 ? -1 : 0; };\nexport var sqrt = Math.sqrt;\nexport var tan = Math.tan;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x > 1 ? halfPi : x < -1 ? -halfPi : Math.asin(x);\n}\n\nexport function haversin(x) {\n  return (x = sin(x / 2)) * x;\n}\n","export default function noop() {}\n","function streamGeometry(geometry, stream) {\n  if (geometry && streamGeometryType.hasOwnProperty(geometry.type)) {\n    streamGeometryType[geometry.type](geometry, stream);\n  }\n}\n\nvar streamObjectType = {\n  Feature: function(object, stream) {\n    streamGeometry(object.geometry, stream);\n  },\n  FeatureCollection: function(object, stream) {\n    var features = object.features, i = -1, n = features.length;\n    while (++i < n) streamGeometry(features[i].geometry, stream);\n  }\n};\n\nvar streamGeometryType = {\n  Sphere: function(object, stream) {\n    stream.sphere();\n  },\n  Point: function(object, stream) {\n    object = object.coordinates;\n    stream.point(object[0], object[1], object[2]);\n  },\n  MultiPoint: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) object = coordinates[i], stream.point(object[0], object[1], object[2]);\n  },\n  LineString: function(object, stream) {\n    streamLine(object.coordinates, stream, 0);\n  },\n  MultiLineString: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamLine(coordinates[i], stream, 0);\n  },\n  Polygon: function(object, stream) {\n    streamPolygon(object.coordinates, stream);\n  },\n  MultiPolygon: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamPolygon(coordinates[i], stream);\n  },\n  GeometryCollection: function(object, stream) {\n    var geometries = object.geometries, i = -1, n = geometries.length;\n    while (++i < n) streamGeometry(geometries[i], stream);\n  }\n};\n\nfunction streamLine(coordinates, stream, closed) {\n  var i = -1, n = coordinates.length - closed, coordinate;\n  stream.lineStart();\n  while (++i < n) coordinate = coordinates[i], stream.point(coordinate[0], coordinate[1], coordinate[2]);\n  stream.lineEnd();\n}\n\nfunction streamPolygon(coordinates, stream) {\n  var i = -1, n = coordinates.length;\n  stream.polygonStart();\n  while (++i < n) streamLine(coordinates[i], stream, 1);\n  stream.polygonEnd();\n}\n\nexport default function(object, stream) {\n  if (object && streamObjectType.hasOwnProperty(object.type)) {\n    streamObjectType[object.type](object, stream);\n  } else {\n    streamGeometry(object, stream);\n  }\n}\n","import {asin, atan2, cos, sin, sqrt} from \"./math.js\";\n\nexport function spherical(cartesian) {\n  return [atan2(cartesian[1], cartesian[0]), asin(cartesian[2])];\n}\n\nexport function cartesian(spherical) {\n  var lambda = spherical[0], phi = spherical[1], cosPhi = cos(phi);\n  return [cosPhi * cos(lambda), cosPhi * sin(lambda), sin(phi)];\n}\n\nexport function cartesianDot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\nexport function cartesianCross(a, b) {\n  return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]];\n}\n\n// TODO return a\nexport function cartesianAddInPlace(a, b) {\n  a[0] += b[0], a[1] += b[1], a[2] += b[2];\n}\n\nexport function cartesianScale(vector, k) {\n  return [vector[0] * k, vector[1] * k, vector[2] * k];\n}\n\n// TODO return d\nexport function cartesianNormalizeInPlace(d) {\n  var l = sqrt(d[0] * d[0] + d[1] * d[1] + d[2] * d[2]);\n  d[0] /= l, d[1] /= l, d[2] /= l;\n}\n","export default function(a, b) {\n\n  function compose(x, y) {\n    return x = a(x, y), b(x[0], x[1]);\n  }\n\n  if (a.invert && b.invert) compose.invert = function(x, y) {\n    return x = b.invert(x, y), x && a.invert(x[0], x[1]);\n  };\n\n  return compose;\n}\n","import compose from \"./compose.js\";\nimport {abs, asin, atan2, cos, degrees, pi, radians, sin, tau} from \"./math.js\";\n\nfunction rotationIdentity(lambda, phi) {\n  if (abs(lambda) > pi) lambda -= Math.round(lambda / tau) * tau;\n  return [lambda, phi];\n}\n\nrotationIdentity.invert = rotationIdentity;\n\nexport function rotateRadians(deltaLambda, deltaPhi, deltaGamma) {\n  return (deltaLambda %= tau) ? (deltaPhi || deltaGamma ? compose(rotationLambda(deltaLambda), rotationPhiGamma(deltaPhi, deltaGamma))\n    : rotationLambda(deltaLambda))\n    : (deltaPhi || deltaGamma ? rotationPhiGamma(deltaPhi, deltaGamma)\n    : rotationIdentity);\n}\n\nfunction forwardRotationLambda(deltaLambda) {\n  return function(lambda, phi) {\n    lambda += deltaLambda;\n    if (abs(lambda) > pi) lambda -= Math.round(lambda / tau) * tau;\n    return [lambda, phi];\n  };\n}\n\nfunction rotationLambda(deltaLambda) {\n  var rotation = forwardRotationLambda(deltaLambda);\n  rotation.invert = forwardRotationLambda(-deltaLambda);\n  return rotation;\n}\n\nfunction rotationPhiGamma(deltaPhi, deltaGamma) {\n  var cosDeltaPhi = cos(deltaPhi),\n      sinDeltaPhi = sin(deltaPhi),\n      cosDeltaGamma = cos(deltaGamma),\n      sinDeltaGamma = sin(deltaGamma);\n\n  function rotation(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaPhi + x * sinDeltaPhi;\n    return [\n      atan2(y * cosDeltaGamma - k * sinDeltaGamma, x * cosDeltaPhi - z * sinDeltaPhi),\n      asin(k * cosDeltaGamma + y * sinDeltaGamma)\n    ];\n  }\n\n  rotation.invert = function(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaGamma - y * sinDeltaGamma;\n    return [\n      atan2(y * cosDeltaGamma + z * sinDeltaGamma, x * cosDeltaPhi + k * sinDeltaPhi),\n      asin(k * cosDeltaPhi - x * sinDeltaPhi)\n    ];\n  };\n\n  return rotation;\n}\n\nexport default function(rotate) {\n  rotate = rotateRadians(rotate[0] * radians, rotate[1] * radians, rotate.length > 2 ? rotate[2] * radians : 0);\n\n  function forward(coordinates) {\n    coordinates = rotate(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  }\n\n  forward.invert = function(coordinates) {\n    coordinates = rotate.invert(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  };\n\n  return forward;\n}\n","import {cartesian, cartesianNormalizeInPlace, spherical} from \"./cartesian.js\";\nimport constant from \"./constant.js\";\nimport {acos, cos, degrees, epsilon, radians, sin, tau} from \"./math.js\";\nimport {rotateRadians} from \"./rotation.js\";\n\n// Generates a circle centered at [0, 0], with a given radius and precision.\nexport function circleStream(stream, radius, delta, direction, t0, t1) {\n  if (!delta) return;\n  var cosRadius = cos(radius),\n      sinRadius = sin(radius),\n      step = direction * delta;\n  if (t0 == null) {\n    t0 = radius + direction * tau;\n    t1 = radius - step / 2;\n  } else {\n    t0 = circleRadius(cosRadius, t0);\n    t1 = circleRadius(cosRadius, t1);\n    if (direction > 0 ? t0 < t1 : t0 > t1) t0 += direction * tau;\n  }\n  for (var point, t = t0; direction > 0 ? t > t1 : t < t1; t -= step) {\n    point = spherical([cosRadius, -sinRadius * cos(t), -sinRadius * sin(t)]);\n    stream.point(point[0], point[1]);\n  }\n}\n\n// Returns the signed angle of a cartesian point relative to [cosRadius, 0, 0].\nfunction circleRadius(cosRadius, point) {\n  point = cartesian(point), point[0] -= cosRadius;\n  cartesianNormalizeInPlace(point);\n  var radius = acos(-point[1]);\n  return ((-point[2] < 0 ? -radius : radius) + tau - epsilon) % tau;\n}\n\nexport default function() {\n  var center = constant([0, 0]),\n      radius = constant(90),\n      precision = constant(2),\n      ring,\n      rotate,\n      stream = {point: point};\n\n  function point(x, y) {\n    ring.push(x = rotate(x, y));\n    x[0] *= degrees, x[1] *= degrees;\n  }\n\n  function circle() {\n    var c = center.apply(this, arguments),\n        r = radius.apply(this, arguments) * radians,\n        p = precision.apply(this, arguments) * radians;\n    ring = [];\n    rotate = rotateRadians(-c[0] * radians, -c[1] * radians, 0).invert;\n    circleStream(stream, r, p, 1);\n    c = {type: \"Polygon\", coordinates: [ring]};\n    ring = rotate = null;\n    return c;\n  }\n\n  circle.center = function(_) {\n    return arguments.length ? (center = typeof _ === \"function\" ? _ : constant([+_[0], +_[1]]), circle) : center;\n  };\n\n  circle.radius = function(_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), circle) : radius;\n  };\n\n  circle.precision = function(_) {\n    return arguments.length ? (precision = typeof _ === \"function\" ? _ : constant(+_), circle) : precision;\n  };\n\n  return circle;\n}\n","import noop from \"../noop.js\";\n\nexport default function() {\n  var lines = [],\n      line;\n  return {\n    point: function(x, y, m) {\n      line.push([x, y, m]);\n    },\n    lineStart: function() {\n      lines.push(line = []);\n    },\n    lineEnd: noop,\n    rejoin: function() {\n      if (lines.length > 1) lines.push(lines.pop().concat(lines.shift()));\n    },\n    result: function() {\n      var result = lines;\n      lines = [];\n      line = null;\n      return result;\n    }\n  };\n}\n","import {abs, epsilon} from \"./math.js\";\n\nexport default function(a, b) {\n  return abs(a[0] - b[0]) < epsilon && abs(a[1] - b[1]) < epsilon;\n}\n","import pointEqual from \"../pointEqual.js\";\nimport {epsilon} from \"../math.js\";\n\nfunction Intersection(point, points, other, entry) {\n  this.x = point;\n  this.z = points;\n  this.o = other; // another intersection\n  this.e = entry; // is an entry?\n  this.v = false; // visited\n  this.n = this.p = null; // next & previous\n}\n\n// A generalized polygon clipping algorithm: given a polygon that has been cut\n// into its visible line segments, and rejoins the segments by interpolating\n// along the clip edge.\nexport default function(segments, compareIntersection, startInside, interpolate, stream) {\n  var subject = [],\n      clip = [],\n      i,\n      n;\n\n  segments.forEach(function(segment) {\n    if ((n = segment.length - 1) <= 0) return;\n    var n, p0 = segment[0], p1 = segment[n], x;\n\n    if (pointEqual(p0, p1)) {\n      if (!p0[2] && !p1[2]) {\n        stream.lineStart();\n        for (i = 0; i < n; ++i) stream.point((p0 = segment[i])[0], p0[1]);\n        stream.lineEnd();\n        return;\n      }\n      // handle degenerate cases by moving the point\n      p1[0] += 2 * epsilon;\n    }\n\n    subject.push(x = new Intersection(p0, segment, null, true));\n    clip.push(x.o = new Intersection(p0, null, x, false));\n    subject.push(x = new Intersection(p1, segment, null, false));\n    clip.push(x.o = new Intersection(p1, null, x, true));\n  });\n\n  if (!subject.length) return;\n\n  clip.sort(compareIntersection);\n  link(subject);\n  link(clip);\n\n  for (i = 0, n = clip.length; i < n; ++i) {\n    clip[i].e = startInside = !startInside;\n  }\n\n  var start = subject[0],\n      points,\n      point;\n\n  while (1) {\n    // Find first unvisited intersection.\n    var current = start,\n        isSubject = true;\n    while (current.v) if ((current = current.n) === start) return;\n    points = current.z;\n    stream.lineStart();\n    do {\n      current.v = current.o.v = true;\n      if (current.e) {\n        if (isSubject) {\n          for (i = 0, n = points.length; i < n; ++i) stream.point((point = points[i])[0], point[1]);\n        } else {\n          interpolate(current.x, current.n.x, 1, stream);\n        }\n        current = current.n;\n      } else {\n        if (isSubject) {\n          points = current.p.z;\n          for (i = points.length - 1; i >= 0; --i) stream.point((point = points[i])[0], point[1]);\n        } else {\n          interpolate(current.x, current.p.x, -1, stream);\n        }\n        current = current.p;\n      }\n      current = current.o;\n      points = current.z;\n      isSubject = !isSubject;\n    } while (!current.v);\n    stream.lineEnd();\n  }\n}\n\nfunction link(array) {\n  if (!(n = array.length)) return;\n  var n,\n      i = 0,\n      a = array[0],\n      b;\n  while (++i < n) {\n    a.n = b = array[i];\n    b.p = a;\n    a = b;\n  }\n  a.n = b = array[0];\n  b.p = a;\n}\n","import {Adder} from \"d3-array\";\nimport {cartesian, cartesianCross, cartesianNormalizeInPlace} from \"./cartesian.js\";\nimport {abs, asin, atan2, cos, epsilon, epsilon2, halfPi, pi, quarterPi, sign, sin, tau} from \"./math.js\";\n\nfunction longitude(point) {\n  return abs(point[0]) <= pi ? point[0] : sign(point[0]) * ((abs(point[0]) + pi) % tau - pi);\n}\n\nexport default function(polygon, point) {\n  var lambda = longitude(point),\n      phi = point[1],\n      sinPhi = sin(phi),\n      normal = [sin(lambda), -cos(lambda), 0],\n      angle = 0,\n      winding = 0;\n\n  var sum = new Adder();\n\n  if (sinPhi === 1) phi = halfPi + epsilon;\n  else if (sinPhi === -1) phi = -halfPi - epsilon;\n\n  for (var i = 0, n = polygon.length; i < n; ++i) {\n    if (!(m = (ring = polygon[i]).length)) continue;\n    var ring,\n        m,\n        point0 = ring[m - 1],\n        lambda0 = longitude(point0),\n        phi0 = point0[1] / 2 + quarterPi,\n        sinPhi0 = sin(phi0),\n        cosPhi0 = cos(phi0);\n\n    for (var j = 0; j < m; ++j, lambda0 = lambda1, sinPhi0 = sinPhi1, cosPhi0 = cosPhi1, point0 = point1) {\n      var point1 = ring[j],\n          lambda1 = longitude(point1),\n          phi1 = point1[1] / 2 + quarterPi,\n          sinPhi1 = sin(phi1),\n          cosPhi1 = cos(phi1),\n          delta = lambda1 - lambda0,\n          sign = delta >= 0 ? 1 : -1,\n          absDelta = sign * delta,\n          antimeridian = absDelta > pi,\n          k = sinPhi0 * sinPhi1;\n\n      sum.add(atan2(k * sign * sin(absDelta), cosPhi0 * cosPhi1 + k * cos(absDelta)));\n      angle += antimeridian ? delta + sign * tau : delta;\n\n      // Are the longitudes either side of the points meridian (lambda),\n      // and are the latitudes smaller than the parallel (phi)?\n      if (antimeridian ^ lambda0 >= lambda ^ lambda1 >= lambda) {\n        var arc = cartesianCross(cartesian(point0), cartesian(point1));\n        cartesianNormalizeInPlace(arc);\n        var intersection = cartesianCross(normal, arc);\n        cartesianNormalizeInPlace(intersection);\n        var phiArc = (antimeridian ^ delta >= 0 ? -1 : 1) * asin(intersection[2]);\n        if (phi > phiArc || phi === phiArc && (arc[0] || arc[1])) {\n          winding += antimeridian ^ delta >= 0 ? 1 : -1;\n        }\n      }\n    }\n  }\n\n  // First, determine whether the South pole is inside or outside:\n  //\n  // It is inside if:\n  // * the polygon winds around it in a clockwise direction.\n  // * the polygon does not (cumulatively) wind around it, but has a negative\n  //   (counter-clockwise) area.\n  //\n  // Second, count the (signed) number of times a segment crosses a lambda\n  // from the point to the South pole.  If it is zero, then the point is the\n  // same side as the South pole.\n\n  return (angle < -epsilon || angle < epsilon && sum < -epsilon2) ^ (winding & 1);\n}\n","import clipBuffer from \"./buffer.js\";\nimport clipRejoin from \"./rejoin.js\";\nimport {epsilon, halfPi} from \"../math.js\";\nimport polygonContains from \"../polygonContains.js\";\nimport {merge} from \"d3-array\";\n\nexport default function(pointVisible, clipLine, interpolate, start) {\n  return function(sink) {\n    var line = clipLine(sink),\n        ringBuffer = clipBuffer(),\n        ringSink = clipLine(ringBuffer),\n        polygonStarted = false,\n        polygon,\n        segments,\n        ring;\n\n    var clip = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() {\n        clip.point = pointRing;\n        clip.lineStart = ringStart;\n        clip.lineEnd = ringEnd;\n        segments = [];\n        polygon = [];\n      },\n      polygonEnd: function() {\n        clip.point = point;\n        clip.lineStart = lineStart;\n        clip.lineEnd = lineEnd;\n        segments = merge(segments);\n        var startInside = polygonContains(polygon, start);\n        if (segments.length) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          clipRejoin(segments, compareIntersection, startInside, interpolate, sink);\n        } else if (startInside) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          interpolate(null, null, 1, sink);\n          sink.lineEnd();\n        }\n        if (polygonStarted) sink.polygonEnd(), polygonStarted = false;\n        segments = polygon = null;\n      },\n      sphere: function() {\n        sink.polygonStart();\n        sink.lineStart();\n        interpolate(null, null, 1, sink);\n        sink.lineEnd();\n        sink.polygonEnd();\n      }\n    };\n\n    function point(lambda, phi) {\n      if (pointVisible(lambda, phi)) sink.point(lambda, phi);\n    }\n\n    function pointLine(lambda, phi) {\n      line.point(lambda, phi);\n    }\n\n    function lineStart() {\n      clip.point = pointLine;\n      line.lineStart();\n    }\n\n    function lineEnd() {\n      clip.point = point;\n      line.lineEnd();\n    }\n\n    function pointRing(lambda, phi) {\n      ring.push([lambda, phi]);\n      ringSink.point(lambda, phi);\n    }\n\n    function ringStart() {\n      ringSink.lineStart();\n      ring = [];\n    }\n\n    function ringEnd() {\n      pointRing(ring[0][0], ring[0][1]);\n      ringSink.lineEnd();\n\n      var clean = ringSink.clean(),\n          ringSegments = ringBuffer.result(),\n          i, n = ringSegments.length, m,\n          segment,\n          point;\n\n      ring.pop();\n      polygon.push(ring);\n      ring = null;\n\n      if (!n) return;\n\n      // No intersections.\n      if (clean & 1) {\n        segment = ringSegments[0];\n        if ((m = segment.length - 1) > 0) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          for (i = 0; i < m; ++i) sink.point((point = segment[i])[0], point[1]);\n          sink.lineEnd();\n        }\n        return;\n      }\n\n      // Rejoin connected segments.\n      // TODO reuse ringBuffer.rejoin()?\n      if (n > 1 && clean & 2) ringSegments.push(ringSegments.pop().concat(ringSegments.shift()));\n\n      segments.push(ringSegments.filter(validSegment));\n    }\n\n    return clip;\n  };\n}\n\nfunction validSegment(segment) {\n  return segment.length > 1;\n}\n\n// Intersections are sorted along the clip edge. For both antimeridian cutting\n// and circle clipping, the same comparison is used.\nfunction compareIntersection(a, b) {\n  return ((a = a.x)[0] < 0 ? a[1] - halfPi - epsilon : halfPi - a[1])\n       - ((b = b.x)[0] < 0 ? b[1] - halfPi - epsilon : halfPi - b[1]);\n}\n","import clip from \"./index.js\";\nimport {abs, atan, cos, epsilon, halfPi, pi, sin} from \"../math.js\";\n\nexport default clip(\n  function() { return true; },\n  clipAntimeridianLine,\n  clipAntimeridianInterpolate,\n  [-pi, -halfPi]\n);\n\n// Takes a line and cuts into visible segments. Return values: 0 - there were\n// intersections or the line was empty; 1 - no intersections; 2 - there were\n// intersections, and the first and last segments should be rejoined.\nfunction clipAntimeridianLine(stream) {\n  var lambda0 = NaN,\n      phi0 = NaN,\n      sign0 = NaN,\n      clean; // no intersections\n\n  return {\n    lineStart: function() {\n      stream.lineStart();\n      clean = 1;\n    },\n    point: function(lambda1, phi1) {\n      var sign1 = lambda1 > 0 ? pi : -pi,\n          delta = abs(lambda1 - lambda0);\n      if (abs(delta - pi) < epsilon) { // line crosses a pole\n        stream.point(lambda0, phi0 = (phi0 + phi1) / 2 > 0 ? halfPi : -halfPi);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        stream.point(lambda1, phi0);\n        clean = 0;\n      } else if (sign0 !== sign1 && delta >= pi) { // line crosses antimeridian\n        if (abs(lambda0 - sign0) < epsilon) lambda0 -= sign0 * epsilon; // handle degeneracies\n        if (abs(lambda1 - sign1) < epsilon) lambda1 -= sign1 * epsilon;\n        phi0 = clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        clean = 0;\n      }\n      stream.point(lambda0 = lambda1, phi0 = phi1);\n      sign0 = sign1;\n    },\n    lineEnd: function() {\n      stream.lineEnd();\n      lambda0 = phi0 = NaN;\n    },\n    clean: function() {\n      return 2 - clean; // if intersections, rejoin first and last segments\n    }\n  };\n}\n\nfunction clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1) {\n  var cosPhi0,\n      cosPhi1,\n      sinLambda0Lambda1 = sin(lambda0 - lambda1);\n  return abs(sinLambda0Lambda1) > epsilon\n      ? atan((sin(phi0) * (cosPhi1 = cos(phi1)) * sin(lambda1)\n          - sin(phi1) * (cosPhi0 = cos(phi0)) * sin(lambda0))\n          / (cosPhi0 * cosPhi1 * sinLambda0Lambda1))\n      : (phi0 + phi1) / 2;\n}\n\nfunction clipAntimeridianInterpolate(from, to, direction, stream) {\n  var phi;\n  if (from == null) {\n    phi = direction * halfPi;\n    stream.point(-pi, phi);\n    stream.point(0, phi);\n    stream.point(pi, phi);\n    stream.point(pi, 0);\n    stream.point(pi, -phi);\n    stream.point(0, -phi);\n    stream.point(-pi, -phi);\n    stream.point(-pi, 0);\n    stream.point(-pi, phi);\n  } else if (abs(from[0] - to[0]) > epsilon) {\n    var lambda = from[0] < to[0] ? pi : -pi;\n    phi = direction * lambda / 2;\n    stream.point(-lambda, phi);\n    stream.point(0, phi);\n    stream.point(lambda, phi);\n  } else {\n    stream.point(to[0], to[1]);\n  }\n}\n","import {cartesian, cartesianAddInPlace, cartesianCross, cartesianDot, cartesianScale, spherical} from \"../cartesian.js\";\nimport {circleStream} from \"../circle.js\";\nimport {abs, cos, epsilon, pi, radians, sqrt} from \"../math.js\";\nimport pointEqual from \"../pointEqual.js\";\nimport clip from \"./index.js\";\n\nexport default function(radius) {\n  var cr = cos(radius),\n      delta = 2 * radians,\n      smallRadius = cr > 0,\n      notHemisphere = abs(cr) > epsilon; // TODO optimise for this common case\n\n  function interpolate(from, to, direction, stream) {\n    circleStream(stream, radius, delta, direction, from, to);\n  }\n\n  function visible(lambda, phi) {\n    return cos(lambda) * cos(phi) > cr;\n  }\n\n  // Takes a line and cuts into visible segments. Return values used for polygon\n  // clipping: 0 - there were intersections or the line was empty; 1 - no\n  // intersections 2 - there were intersections, and the first and last segments\n  // should be rejoined.\n  function clipLine(stream) {\n    var point0, // previous point\n        c0, // code for previous point\n        v0, // visibility of previous point\n        v00, // visibility of first point\n        clean; // no intersections\n    return {\n      lineStart: function() {\n        v00 = v0 = false;\n        clean = 1;\n      },\n      point: function(lambda, phi) {\n        var point1 = [lambda, phi],\n            point2,\n            v = visible(lambda, phi),\n            c = smallRadius\n              ? v ? 0 : code(lambda, phi)\n              : v ? code(lambda + (lambda < 0 ? pi : -pi), phi) : 0;\n        if (!point0 && (v00 = v0 = v)) stream.lineStart();\n        if (v !== v0) {\n          point2 = intersect(point0, point1);\n          if (!point2 || pointEqual(point0, point2) || pointEqual(point1, point2))\n            point1[2] = 1;\n        }\n        if (v !== v0) {\n          clean = 0;\n          if (v) {\n            // outside going in\n            stream.lineStart();\n            point2 = intersect(point1, point0);\n            stream.point(point2[0], point2[1]);\n          } else {\n            // inside going out\n            point2 = intersect(point0, point1);\n            stream.point(point2[0], point2[1], 2);\n            stream.lineEnd();\n          }\n          point0 = point2;\n        } else if (notHemisphere && point0 && smallRadius ^ v) {\n          var t;\n          // If the codes for two points are different, or are both zero,\n          // and there this segment intersects with the small circle.\n          if (!(c & c0) && (t = intersect(point1, point0, true))) {\n            clean = 0;\n            if (smallRadius) {\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1]);\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n            } else {\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1], 3);\n            }\n          }\n        }\n        if (v && (!point0 || !pointEqual(point0, point1))) {\n          stream.point(point1[0], point1[1]);\n        }\n        point0 = point1, v0 = v, c0 = c;\n      },\n      lineEnd: function() {\n        if (v0) stream.lineEnd();\n        point0 = null;\n      },\n      // Rejoin first and last segments if there were intersections and the first\n      // and last points were visible.\n      clean: function() {\n        return clean | ((v00 && v0) << 1);\n      }\n    };\n  }\n\n  // Intersects the great circle between a and b with the clip circle.\n  function intersect(a, b, two) {\n    var pa = cartesian(a),\n        pb = cartesian(b);\n\n    // We have two planes, n1.p = d1 and n2.p = d2.\n    // Find intersection line p(t) = c1 n1 + c2 n2 + t (n1  n2).\n    var n1 = [1, 0, 0], // normal\n        n2 = cartesianCross(pa, pb),\n        n2n2 = cartesianDot(n2, n2),\n        n1n2 = n2[0], // cartesianDot(n1, n2),\n        determinant = n2n2 - n1n2 * n1n2;\n\n    // Two polar points.\n    if (!determinant) return !two && a;\n\n    var c1 =  cr * n2n2 / determinant,\n        c2 = -cr * n1n2 / determinant,\n        n1xn2 = cartesianCross(n1, n2),\n        A = cartesianScale(n1, c1),\n        B = cartesianScale(n2, c2);\n    cartesianAddInPlace(A, B);\n\n    // Solve |p(t)|^2 = 1.\n    var u = n1xn2,\n        w = cartesianDot(A, u),\n        uu = cartesianDot(u, u),\n        t2 = w * w - uu * (cartesianDot(A, A) - 1);\n\n    if (t2 < 0) return;\n\n    var t = sqrt(t2),\n        q = cartesianScale(u, (-w - t) / uu);\n    cartesianAddInPlace(q, A);\n    q = spherical(q);\n\n    if (!two) return q;\n\n    // Two intersection points.\n    var lambda0 = a[0],\n        lambda1 = b[0],\n        phi0 = a[1],\n        phi1 = b[1],\n        z;\n\n    if (lambda1 < lambda0) z = lambda0, lambda0 = lambda1, lambda1 = z;\n\n    var delta = lambda1 - lambda0,\n        polar = abs(delta - pi) < epsilon,\n        meridian = polar || delta < epsilon;\n\n    if (!polar && phi1 < phi0) z = phi0, phi0 = phi1, phi1 = z;\n\n    // Check that the first point is between a and b.\n    if (meridian\n        ? polar\n          ? phi0 + phi1 > 0 ^ q[1] < (abs(q[0] - lambda0) < epsilon ? phi0 : phi1)\n          : phi0 <= q[1] && q[1] <= phi1\n        : delta > pi ^ (lambda0 <= q[0] && q[0] <= lambda1)) {\n      var q1 = cartesianScale(u, (-w + t) / uu);\n      cartesianAddInPlace(q1, A);\n      return [q, spherical(q1)];\n    }\n  }\n\n  // Generates a 4-bit vector representing the location of a point relative to\n  // the small circle's bounding box.\n  function code(lambda, phi) {\n    var r = smallRadius ? radius : pi - radius,\n        code = 0;\n    if (lambda < -r) code |= 1; // left\n    else if (lambda > r) code |= 2; // right\n    if (phi < -r) code |= 4; // below\n    else if (phi > r) code |= 8; // above\n    return code;\n  }\n\n  return clip(visible, clipLine, interpolate, smallRadius ? [0, -radius] : [-pi, radius - pi]);\n}\n","export default function(a, b, x0, y0, x1, y1) {\n  var ax = a[0],\n      ay = a[1],\n      bx = b[0],\n      by = b[1],\n      t0 = 0,\n      t1 = 1,\n      dx = bx - ax,\n      dy = by - ay,\n      r;\n\n  r = x0 - ax;\n  if (!dx && r > 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dx > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = x1 - ax;\n  if (!dx && r < 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dx > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  r = y0 - ay;\n  if (!dy && r > 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dy > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = y1 - ay;\n  if (!dy && r < 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dy > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  if (t0 > 0) a[0] = ax + t0 * dx, a[1] = ay + t0 * dy;\n  if (t1 < 1) b[0] = ax + t1 * dx, b[1] = ay + t1 * dy;\n  return true;\n}\n","import {abs, epsilon} from \"../math.js\";\nimport clipBuffer from \"./buffer.js\";\nimport clipLine from \"./line.js\";\nimport clipRejoin from \"./rejoin.js\";\nimport {merge} from \"d3-array\";\n\nvar clipMax = 1e9, clipMin = -clipMax;\n\n// TODO Use d3-polygons polygonContains here for the ring check?\n// TODO Eliminate duplicate buffering in clipBuffer and polygon.push?\n\nexport default function clipRectangle(x0, y0, x1, y1) {\n\n  function visible(x, y) {\n    return x0 <= x && x <= x1 && y0 <= y && y <= y1;\n  }\n\n  function interpolate(from, to, direction, stream) {\n    var a = 0, a1 = 0;\n    if (from == null\n        || (a = corner(from, direction)) !== (a1 = corner(to, direction))\n        || comparePoint(from, to) < 0 ^ direction > 0) {\n      do stream.point(a === 0 || a === 3 ? x0 : x1, a > 1 ? y1 : y0);\n      while ((a = (a + direction + 4) % 4) !== a1);\n    } else {\n      stream.point(to[0], to[1]);\n    }\n  }\n\n  function corner(p, direction) {\n    return abs(p[0] - x0) < epsilon ? direction > 0 ? 0 : 3\n        : abs(p[0] - x1) < epsilon ? direction > 0 ? 2 : 1\n        : abs(p[1] - y0) < epsilon ? direction > 0 ? 1 : 0\n        : direction > 0 ? 3 : 2; // abs(p[1] - y1) < epsilon\n  }\n\n  function compareIntersection(a, b) {\n    return comparePoint(a.x, b.x);\n  }\n\n  function comparePoint(a, b) {\n    var ca = corner(a, 1),\n        cb = corner(b, 1);\n    return ca !== cb ? ca - cb\n        : ca === 0 ? b[1] - a[1]\n        : ca === 1 ? a[0] - b[0]\n        : ca === 2 ? a[1] - b[1]\n        : b[0] - a[0];\n  }\n\n  return function(stream) {\n    var activeStream = stream,\n        bufferStream = clipBuffer(),\n        segments,\n        polygon,\n        ring,\n        x__, y__, v__, // first point\n        x_, y_, v_, // previous point\n        first,\n        clean;\n\n    var clipStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: polygonStart,\n      polygonEnd: polygonEnd\n    };\n\n    function point(x, y) {\n      if (visible(x, y)) activeStream.point(x, y);\n    }\n\n    function polygonInside() {\n      var winding = 0;\n\n      for (var i = 0, n = polygon.length; i < n; ++i) {\n        for (var ring = polygon[i], j = 1, m = ring.length, point = ring[0], a0, a1, b0 = point[0], b1 = point[1]; j < m; ++j) {\n          a0 = b0, a1 = b1, point = ring[j], b0 = point[0], b1 = point[1];\n          if (a1 <= y1) { if (b1 > y1 && (b0 - a0) * (y1 - a1) > (b1 - a1) * (x0 - a0)) ++winding; }\n          else { if (b1 <= y1 && (b0 - a0) * (y1 - a1) < (b1 - a1) * (x0 - a0)) --winding; }\n        }\n      }\n\n      return winding;\n    }\n\n    // Buffer geometry within a polygon and then clip it en masse.\n    function polygonStart() {\n      activeStream = bufferStream, segments = [], polygon = [], clean = true;\n    }\n\n    function polygonEnd() {\n      var startInside = polygonInside(),\n          cleanInside = clean && startInside,\n          visible = (segments = merge(segments)).length;\n      if (cleanInside || visible) {\n        stream.polygonStart();\n        if (cleanInside) {\n          stream.lineStart();\n          interpolate(null, null, 1, stream);\n          stream.lineEnd();\n        }\n        if (visible) {\n          clipRejoin(segments, compareIntersection, startInside, interpolate, stream);\n        }\n        stream.polygonEnd();\n      }\n      activeStream = stream, segments = polygon = ring = null;\n    }\n\n    function lineStart() {\n      clipStream.point = linePoint;\n      if (polygon) polygon.push(ring = []);\n      first = true;\n      v_ = false;\n      x_ = y_ = NaN;\n    }\n\n    // TODO rather than special-case polygons, simply handle them separately.\n    // Ideally, coincident intersection points should be jittered to avoid\n    // clipping issues.\n    function lineEnd() {\n      if (segments) {\n        linePoint(x__, y__);\n        if (v__ && v_) bufferStream.rejoin();\n        segments.push(bufferStream.result());\n      }\n      clipStream.point = point;\n      if (v_) activeStream.lineEnd();\n    }\n\n    function linePoint(x, y) {\n      var v = visible(x, y);\n      if (polygon) ring.push([x, y]);\n      if (first) {\n        x__ = x, y__ = y, v__ = v;\n        first = false;\n        if (v) {\n          activeStream.lineStart();\n          activeStream.point(x, y);\n        }\n      } else {\n        if (v && v_) activeStream.point(x, y);\n        else {\n          var a = [x_ = Math.max(clipMin, Math.min(clipMax, x_)), y_ = Math.max(clipMin, Math.min(clipMax, y_))],\n              b = [x = Math.max(clipMin, Math.min(clipMax, x)), y = Math.max(clipMin, Math.min(clipMax, y))];\n          if (clipLine(a, b, x0, y0, x1, y1)) {\n            if (!v_) {\n              activeStream.lineStart();\n              activeStream.point(a[0], a[1]);\n            }\n            activeStream.point(b[0], b[1]);\n            if (!v) activeStream.lineEnd();\n            clean = false;\n          } else if (v) {\n            activeStream.lineStart();\n            activeStream.point(x, y);\n            clean = false;\n          }\n        }\n      }\n      x_ = x, y_ = y, v_ = v;\n    }\n\n    return clipStream;\n  };\n}\n","export default x => x;\n","import {Adder} from \"d3-array\";\nimport {abs} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nvar areaSum = new Adder(),\n    areaRingSum = new Adder(),\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    areaStream.lineStart = areaStream.lineEnd = areaStream.point = noop;\n    areaSum.add(abs(areaRingSum));\n    areaRingSum = new Adder();\n  },\n  result: function() {\n    var area = areaSum / 2;\n    areaSum = new Adder();\n    return area;\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaPointFirst(x, y) {\n  areaStream.point = areaPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction areaPoint(x, y) {\n  areaRingSum.add(y0 * x - x0 * y);\n  x0 = x, y0 = y;\n}\n\nfunction areaRingEnd() {\n  areaPoint(x00, y00);\n}\n\nexport default areaStream;\n","import noop from \"../noop.js\";\n\nvar x0 = Infinity,\n    y0 = x0,\n    x1 = -x0,\n    y1 = x1;\n\nvar boundsStream = {\n  point: boundsPoint,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: noop,\n  polygonEnd: noop,\n  result: function() {\n    var bounds = [[x0, y0], [x1, y1]];\n    x1 = y1 = -(y0 = x0 = Infinity);\n    return bounds;\n  }\n};\n\nfunction boundsPoint(x, y) {\n  if (x < x0) x0 = x;\n  if (x > x1) x1 = x;\n  if (y < y0) y0 = y;\n  if (y > y1) y1 = y;\n}\n\nexport default boundsStream;\n","import {sqrt} from \"../math.js\";\n\n// TODO Enforce positive area for exterior, negative area for interior?\n\nvar X0 = 0,\n    Y0 = 0,\n    Z0 = 0,\n    X1 = 0,\n    Y1 = 0,\n    Z1 = 0,\n    X2 = 0,\n    Y2 = 0,\n    Z2 = 0,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar centroidStream = {\n  point: centroidPoint,\n  lineStart: centroidLineStart,\n  lineEnd: centroidLineEnd,\n  polygonStart: function() {\n    centroidStream.lineStart = centroidRingStart;\n    centroidStream.lineEnd = centroidRingEnd;\n  },\n  polygonEnd: function() {\n    centroidStream.point = centroidPoint;\n    centroidStream.lineStart = centroidLineStart;\n    centroidStream.lineEnd = centroidLineEnd;\n  },\n  result: function() {\n    var centroid = Z2 ? [X2 / Z2, Y2 / Z2]\n        : Z1 ? [X1 / Z1, Y1 / Z1]\n        : Z0 ? [X0 / Z0, Y0 / Z0]\n        : [NaN, NaN];\n    X0 = Y0 = Z0 =\n    X1 = Y1 = Z1 =\n    X2 = Y2 = Z2 = 0;\n    return centroid;\n  }\n};\n\nfunction centroidPoint(x, y) {\n  X0 += x;\n  Y0 += y;\n  ++Z0;\n}\n\nfunction centroidLineStart() {\n  centroidStream.point = centroidPointFirstLine;\n}\n\nfunction centroidPointFirstLine(x, y) {\n  centroidStream.point = centroidPointLine;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidPointLine(x, y) {\n  var dx = x - x0, dy = y - y0, z = sqrt(dx * dx + dy * dy);\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidLineEnd() {\n  centroidStream.point = centroidPoint;\n}\n\nfunction centroidRingStart() {\n  centroidStream.point = centroidPointFirstRing;\n}\n\nfunction centroidRingEnd() {\n  centroidPointRing(x00, y00);\n}\n\nfunction centroidPointFirstRing(x, y) {\n  centroidStream.point = centroidPointRing;\n  centroidPoint(x00 = x0 = x, y00 = y0 = y);\n}\n\nfunction centroidPointRing(x, y) {\n  var dx = x - x0,\n      dy = y - y0,\n      z = sqrt(dx * dx + dy * dy);\n\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n\n  z = y0 * x - x0 * y;\n  X2 += z * (x0 + x);\n  Y2 += z * (y0 + y);\n  Z2 += z * 3;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nexport default centroidStream;\n","import {tau} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nexport default function PathContext(context) {\n  this._context = context;\n}\n\nPathContext.prototype = {\n  _radius: 4.5,\n  pointRadius: function(_) {\n    return this._radius = _, this;\n  },\n  polygonStart: function() {\n    this._line = 0;\n  },\n  polygonEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line === 0) this._context.closePath();\n    this._point = NaN;\n  },\n  point: function(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._context.moveTo(x, y);\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._context.lineTo(x, y);\n        break;\n      }\n      default: {\n        this._context.moveTo(x + this._radius, y);\n        this._context.arc(x, y, this._radius, 0, tau);\n        break;\n      }\n    }\n  },\n  result: noop\n};\n","import {Adder} from \"d3-array\";\nimport {sqrt} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nvar lengthSum = new Adder(),\n    lengthRing,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar lengthStream = {\n  point: noop,\n  lineStart: function() {\n    lengthStream.point = lengthPointFirst;\n  },\n  lineEnd: function() {\n    if (lengthRing) lengthPoint(x00, y00);\n    lengthStream.point = noop;\n  },\n  polygonStart: function() {\n    lengthRing = true;\n  },\n  polygonEnd: function() {\n    lengthRing = null;\n  },\n  result: function() {\n    var length = +lengthSum;\n    lengthSum = new Adder();\n    return length;\n  }\n};\n\nfunction lengthPointFirst(x, y) {\n  lengthStream.point = lengthPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction lengthPoint(x, y) {\n  x0 -= x, y0 -= y;\n  lengthSum.add(sqrt(x0 * x0 + y0 * y0));\n  x0 = x, y0 = y;\n}\n\nexport default lengthStream;\n","// Simple caching for constant-radius points.\nlet cacheDigits, cacheAppend, cacheRadius, cacheCircle;\n\nexport default class PathString {\n  constructor(digits) {\n    this._append = digits == null ? append : appendRound(digits);\n    this._radius = 4.5;\n    this._ = \"\";\n  }\n  pointRadius(_) {\n    this._radius = +_;\n    return this;\n  }\n  polygonStart() {\n    this._line = 0;\n  }\n  polygonEnd() {\n    this._line = NaN;\n  }\n  lineStart() {\n    this._point = 0;\n  }\n  lineEnd() {\n    if (this._line === 0) this._ += \"Z\";\n    this._point = NaN;\n  }\n  point(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._append`M${x},${y}`;\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._append`L${x},${y}`;\n        break;\n      }\n      default: {\n        this._append`M${x},${y}`;\n        if (this._radius !== cacheRadius || this._append !== cacheAppend) {\n          const r = this._radius;\n          const s = this._;\n          this._ = \"\"; // stash the old string so we can cache the circle path fragment\n          this._append`m0,${r}a${r},${r} 0 1,1 0,${-2 * r}a${r},${r} 0 1,1 0,${2 * r}z`;\n          cacheRadius = r;\n          cacheAppend = this._append;\n          cacheCircle = this._;\n          this._ = s;\n        }\n        this._ += cacheCircle;\n        break;\n      }\n    }\n  }\n  result() {\n    const result = this._;\n    this._ = \"\";\n    return result.length ? result : null;\n  }\n}\n\nfunction append(strings) {\n  let i = 1;\n  this._ += strings[0];\n  for (const j = strings.length; i < j; ++i) {\n    this._ += arguments[i] + strings[i];\n  }\n}\n\nfunction appendRound(digits) {\n  const d = Math.floor(digits);\n  if (!(d >= 0)) throw new RangeError(`invalid digits: ${digits}`);\n  if (d > 15) return append;\n  if (d !== cacheDigits) {\n    const k = 10 ** d;\n    cacheDigits = d;\n    cacheAppend = function append(strings) {\n      let i = 1;\n      this._ += strings[0];\n      for (const j = strings.length; i < j; ++i) {\n        this._ += Math.round(arguments[i] * k) / k + strings[i];\n      }\n    };\n  }\n  return cacheAppend;\n}\n","import identity from \"../identity.js\";\nimport stream from \"../stream.js\";\nimport pathArea from \"./area.js\";\nimport pathBounds from \"./bounds.js\";\nimport pathCentroid from \"./centroid.js\";\nimport PathContext from \"./context.js\";\nimport pathMeasure from \"./measure.js\";\nimport PathString from \"./string.js\";\n\nexport default function(projection, context) {\n  let digits = 3,\n      pointRadius = 4.5,\n      projectionStream,\n      contextStream;\n\n  function path(object) {\n    if (object) {\n      if (typeof pointRadius === \"function\") contextStream.pointRadius(+pointRadius.apply(this, arguments));\n      stream(object, projectionStream(contextStream));\n    }\n    return contextStream.result();\n  }\n\n  path.area = function(object) {\n    stream(object, projectionStream(pathArea));\n    return pathArea.result();\n  };\n\n  path.measure = function(object) {\n    stream(object, projectionStream(pathMeasure));\n    return pathMeasure.result();\n  };\n\n  path.bounds = function(object) {\n    stream(object, projectionStream(pathBounds));\n    return pathBounds.result();\n  };\n\n  path.centroid = function(object) {\n    stream(object, projectionStream(pathCentroid));\n    return pathCentroid.result();\n  };\n\n  path.projection = function(_) {\n    if (!arguments.length) return projection;\n    projectionStream = _ == null ? (projection = null, identity) : (projection = _).stream;\n    return path;\n  };\n\n  path.context = function(_) {\n    if (!arguments.length) return context;\n    contextStream = _ == null ? (context = null, new PathString(digits)) : new PathContext(context = _);\n    if (typeof pointRadius !== \"function\") contextStream.pointRadius(pointRadius);\n    return path;\n  };\n\n  path.pointRadius = function(_) {\n    if (!arguments.length) return pointRadius;\n    pointRadius = typeof _ === \"function\" ? _ : (contextStream.pointRadius(+_), +_);\n    return path;\n  };\n\n  path.digits = function(_) {\n    if (!arguments.length) return digits;\n    if (_ == null) digits = null;\n    else {\n      const d = Math.floor(_);\n      if (!(d >= 0)) throw new RangeError(`invalid digits: ${_}`);\n      digits = d;\n    }\n    if (context === null) contextStream = new PathString(digits);\n    return path;\n  };\n\n  return path.projection(projection).digits(digits).context(context);\n}\n","export default function(methods) {\n  return {\n    stream: transformer(methods)\n  };\n}\n\nexport function transformer(methods) {\n  return function(stream) {\n    var s = new TransformStream;\n    for (var key in methods) s[key] = methods[key];\n    s.stream = stream;\n    return s;\n  };\n}\n\nfunction TransformStream() {}\n\nTransformStream.prototype = {\n  constructor: TransformStream,\n  point: function(x, y) { this.stream.point(x, y); },\n  sphere: function() { this.stream.sphere(); },\n  lineStart: function() { this.stream.lineStart(); },\n  lineEnd: function() { this.stream.lineEnd(); },\n  polygonStart: function() { this.stream.polygonStart(); },\n  polygonEnd: function() { this.stream.polygonEnd(); }\n};\n","import {default as geoStream} from \"../stream.js\";\nimport boundsStream from \"../path/bounds.js\";\n\nfunction fit(projection, fitBounds, object) {\n  var clip = projection.clipExtent && projection.clipExtent();\n  projection.scale(150).translate([0, 0]);\n  if (clip != null) projection.clipExtent(null);\n  geoStream(object, projection.stream(boundsStream));\n  fitBounds(boundsStream.result());\n  if (clip != null) projection.clipExtent(clip);\n  return projection;\n}\n\nexport function fitExtent(projection, extent, object) {\n  return fit(projection, function(b) {\n    var w = extent[1][0] - extent[0][0],\n        h = extent[1][1] - extent[0][1],\n        k = Math.min(w / (b[1][0] - b[0][0]), h / (b[1][1] - b[0][1])),\n        x = +extent[0][0] + (w - k * (b[1][0] + b[0][0])) / 2,\n        y = +extent[0][1] + (h - k * (b[1][1] + b[0][1])) / 2;\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n\nexport function fitSize(projection, size, object) {\n  return fitExtent(projection, [[0, 0], size], object);\n}\n\nexport function fitWidth(projection, width, object) {\n  return fit(projection, function(b) {\n    var w = +width,\n        k = w / (b[1][0] - b[0][0]),\n        x = (w - k * (b[1][0] + b[0][0])) / 2,\n        y = -k * b[0][1];\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n\nexport function fitHeight(projection, height, object) {\n  return fit(projection, function(b) {\n    var h = +height,\n        k = h / (b[1][1] - b[0][1]),\n        x = -k * b[0][0],\n        y = (h - k * (b[1][1] + b[0][1])) / 2;\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n","import {cartesian} from \"../cartesian.js\";\nimport {abs, asin, atan2, cos, epsilon, radians, sqrt} from \"../math.js\";\nimport {transformer} from \"../transform.js\";\n\nvar maxDepth = 16, // maximum depth of subdivision\n    cosMinDistance = cos(30 * radians); // cos(minimum angular distance)\n\nexport default function(project, delta2) {\n  return +delta2 ? resample(project, delta2) : resampleNone(project);\n}\n\nfunction resampleNone(project) {\n  return transformer({\n    point: function(x, y) {\n      x = project(x, y);\n      this.stream.point(x[0], x[1]);\n    }\n  });\n}\n\nfunction resample(project, delta2) {\n\n  function resampleLineTo(x0, y0, lambda0, a0, b0, c0, x1, y1, lambda1, a1, b1, c1, depth, stream) {\n    var dx = x1 - x0,\n        dy = y1 - y0,\n        d2 = dx * dx + dy * dy;\n    if (d2 > 4 * delta2 && depth--) {\n      var a = a0 + a1,\n          b = b0 + b1,\n          c = c0 + c1,\n          m = sqrt(a * a + b * b + c * c),\n          phi2 = asin(c /= m),\n          lambda2 = abs(abs(c) - 1) < epsilon || abs(lambda0 - lambda1) < epsilon ? (lambda0 + lambda1) / 2 : atan2(b, a),\n          p = project(lambda2, phi2),\n          x2 = p[0],\n          y2 = p[1],\n          dx2 = x2 - x0,\n          dy2 = y2 - y0,\n          dz = dy * dx2 - dx * dy2;\n      if (dz * dz / d2 > delta2 // perpendicular projected distance\n          || abs((dx * dx2 + dy * dy2) / d2 - 0.5) > 0.3 // midpoint close to an end\n          || a0 * a1 + b0 * b1 + c0 * c1 < cosMinDistance) { // angular distance\n        resampleLineTo(x0, y0, lambda0, a0, b0, c0, x2, y2, lambda2, a /= m, b /= m, c, depth, stream);\n        stream.point(x2, y2);\n        resampleLineTo(x2, y2, lambda2, a, b, c, x1, y1, lambda1, a1, b1, c1, depth, stream);\n      }\n    }\n  }\n  return function(stream) {\n    var lambda00, x00, y00, a00, b00, c00, // first point\n        lambda0, x0, y0, a0, b0, c0; // previous point\n\n    var resampleStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() { stream.polygonStart(); resampleStream.lineStart = ringStart; },\n      polygonEnd: function() { stream.polygonEnd(); resampleStream.lineStart = lineStart; }\n    };\n\n    function point(x, y) {\n      x = project(x, y);\n      stream.point(x[0], x[1]);\n    }\n\n    function lineStart() {\n      x0 = NaN;\n      resampleStream.point = linePoint;\n      stream.lineStart();\n    }\n\n    function linePoint(lambda, phi) {\n      var c = cartesian([lambda, phi]), p = project(lambda, phi);\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x0 = p[0], y0 = p[1], lambda0 = lambda, a0 = c[0], b0 = c[1], c0 = c[2], maxDepth, stream);\n      stream.point(x0, y0);\n    }\n\n    function lineEnd() {\n      resampleStream.point = point;\n      stream.lineEnd();\n    }\n\n    function ringStart() {\n      lineStart();\n      resampleStream.point = ringPoint;\n      resampleStream.lineEnd = ringEnd;\n    }\n\n    function ringPoint(lambda, phi) {\n      linePoint(lambda00 = lambda, phi), x00 = x0, y00 = y0, a00 = a0, b00 = b0, c00 = c0;\n      resampleStream.point = linePoint;\n    }\n\n    function ringEnd() {\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x00, y00, lambda00, a00, b00, c00, maxDepth, stream);\n      resampleStream.lineEnd = lineEnd;\n      lineEnd();\n    }\n\n    return resampleStream;\n  };\n}\n","import clipAntimeridian from \"../clip/antimeridian.js\";\nimport clipCircle from \"../clip/circle.js\";\nimport clipRectangle from \"../clip/rectangle.js\";\nimport compose from \"../compose.js\";\nimport identity from \"../identity.js\";\nimport {cos, degrees, radians, sin, sqrt} from \"../math.js\";\nimport {rotateRadians} from \"../rotation.js\";\nimport {transformer} from \"../transform.js\";\nimport {fitExtent, fitSize, fitWidth, fitHeight} from \"./fit.js\";\nimport resample from \"./resample.js\";\n\nvar transformRadians = transformer({\n  point: function(x, y) {\n    this.stream.point(x * radians, y * radians);\n  }\n});\n\nfunction transformRotate(rotate) {\n  return transformer({\n    point: function(x, y) {\n      var r = rotate(x, y);\n      return this.stream.point(r[0], r[1]);\n    }\n  });\n}\n\nfunction scaleTranslate(k, dx, dy, sx, sy) {\n  function transform(x, y) {\n    x *= sx; y *= sy;\n    return [dx + k * x, dy - k * y];\n  }\n  transform.invert = function(x, y) {\n    return [(x - dx) / k * sx, (dy - y) / k * sy];\n  };\n  return transform;\n}\n\nfunction scaleTranslateRotate(k, dx, dy, sx, sy, alpha) {\n  if (!alpha) return scaleTranslate(k, dx, dy, sx, sy);\n  var cosAlpha = cos(alpha),\n      sinAlpha = sin(alpha),\n      a = cosAlpha * k,\n      b = sinAlpha * k,\n      ai = cosAlpha / k,\n      bi = sinAlpha / k,\n      ci = (sinAlpha * dy - cosAlpha * dx) / k,\n      fi = (sinAlpha * dx + cosAlpha * dy) / k;\n  function transform(x, y) {\n    x *= sx; y *= sy;\n    return [a * x - b * y + dx, dy - b * x - a * y];\n  }\n  transform.invert = function(x, y) {\n    return [sx * (ai * x - bi * y + ci), sy * (fi - bi * x - ai * y)];\n  };\n  return transform;\n}\n\nexport default function projection(project) {\n  return projectionMutator(function() { return project; })();\n}\n\nexport function projectionMutator(projectAt) {\n  var project,\n      k = 150, // scale\n      x = 480, y = 250, // translate\n      lambda = 0, phi = 0, // center\n      deltaLambda = 0, deltaPhi = 0, deltaGamma = 0, rotate, // pre-rotate\n      alpha = 0, // post-rotate angle\n      sx = 1, // reflectX\n      sy = 1, // reflectX\n      theta = null, preclip = clipAntimeridian, // pre-clip angle\n      x0 = null, y0, x1, y1, postclip = identity, // post-clip extent\n      delta2 = 0.5, // precision\n      projectResample,\n      projectTransform,\n      projectRotateTransform,\n      cache,\n      cacheStream;\n\n  function projection(point) {\n    return projectRotateTransform(point[0] * radians, point[1] * radians);\n  }\n\n  function invert(point) {\n    point = projectRotateTransform.invert(point[0], point[1]);\n    return point && [point[0] * degrees, point[1] * degrees];\n  }\n\n  projection.stream = function(stream) {\n    return cache && cacheStream === stream ? cache : cache = transformRadians(transformRotate(rotate)(preclip(projectResample(postclip(cacheStream = stream)))));\n  };\n\n  projection.preclip = function(_) {\n    return arguments.length ? (preclip = _, theta = undefined, reset()) : preclip;\n  };\n\n  projection.postclip = function(_) {\n    return arguments.length ? (postclip = _, x0 = y0 = x1 = y1 = null, reset()) : postclip;\n  };\n\n  projection.clipAngle = function(_) {\n    return arguments.length ? (preclip = +_ ? clipCircle(theta = _ * radians) : (theta = null, clipAntimeridian), reset()) : theta * degrees;\n  };\n\n  projection.clipExtent = function(_) {\n    return arguments.length ? (postclip = _ == null ? (x0 = y0 = x1 = y1 = null, identity) : clipRectangle(x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1]), reset()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n\n  projection.scale = function(_) {\n    return arguments.length ? (k = +_, recenter()) : k;\n  };\n\n  projection.translate = function(_) {\n    return arguments.length ? (x = +_[0], y = +_[1], recenter()) : [x, y];\n  };\n\n  projection.center = function(_) {\n    return arguments.length ? (lambda = _[0] % 360 * radians, phi = _[1] % 360 * radians, recenter()) : [lambda * degrees, phi * degrees];\n  };\n\n  projection.rotate = function(_) {\n    return arguments.length ? (deltaLambda = _[0] % 360 * radians, deltaPhi = _[1] % 360 * radians, deltaGamma = _.length > 2 ? _[2] % 360 * radians : 0, recenter()) : [deltaLambda * degrees, deltaPhi * degrees, deltaGamma * degrees];\n  };\n\n  projection.angle = function(_) {\n    return arguments.length ? (alpha = _ % 360 * radians, recenter()) : alpha * degrees;\n  };\n\n  projection.reflectX = function(_) {\n    return arguments.length ? (sx = _ ? -1 : 1, recenter()) : sx < 0;\n  };\n\n  projection.reflectY = function(_) {\n    return arguments.length ? (sy = _ ? -1 : 1, recenter()) : sy < 0;\n  };\n\n  projection.precision = function(_) {\n    return arguments.length ? (projectResample = resample(projectTransform, delta2 = _ * _), reset()) : sqrt(delta2);\n  };\n\n  projection.fitExtent = function(extent, object) {\n    return fitExtent(projection, extent, object);\n  };\n\n  projection.fitSize = function(size, object) {\n    return fitSize(projection, size, object);\n  };\n\n  projection.fitWidth = function(width, object) {\n    return fitWidth(projection, width, object);\n  };\n\n  projection.fitHeight = function(height, object) {\n    return fitHeight(projection, height, object);\n  };\n\n  function recenter() {\n    var center = scaleTranslateRotate(k, 0, 0, sx, sy, alpha).apply(null, project(lambda, phi)),\n        transform = scaleTranslateRotate(k, x - center[0], y - center[1], sx, sy, alpha);\n    rotate = rotateRadians(deltaLambda, deltaPhi, deltaGamma);\n    projectTransform = compose(project, transform);\n    projectRotateTransform = compose(rotate, projectTransform);\n    projectResample = resample(projectTransform, delta2);\n    return reset();\n  }\n\n  function reset() {\n    cache = cacheStream = null;\n    return projection;\n  }\n\n  return function() {\n    project = projectAt.apply(this, arguments);\n    projection.invert = project.invert && invert;\n    return recenter();\n  };\n}\n","import {atan, exp, halfPi, log, pi, tan, tau} from \"../math.js\";\nimport rotation from \"../rotation.js\";\nimport projection from \"./index.js\";\n\nexport function mercatorRaw(lambda, phi) {\n  return [lambda, log(tan((halfPi + phi) / 2))];\n}\n\nmercatorRaw.invert = function(x, y) {\n  return [x, 2 * atan(exp(y)) - halfPi];\n};\n\nexport default function() {\n  return mercatorProjection(mercatorRaw)\n      .scale(961 / tau);\n}\n\nexport function mercatorProjection(project) {\n  var m = projection(project),\n      center = m.center,\n      scale = m.scale,\n      translate = m.translate,\n      clipExtent = m.clipExtent,\n      x0 = null, y0, x1, y1; // clip extent\n\n  m.scale = function(_) {\n    return arguments.length ? (scale(_), reclip()) : scale();\n  };\n\n  m.translate = function(_) {\n    return arguments.length ? (translate(_), reclip()) : translate();\n  };\n\n  m.center = function(_) {\n    return arguments.length ? (center(_), reclip()) : center();\n  };\n\n  m.clipExtent = function(_) {\n    return arguments.length ? ((_ == null ? x0 = y0 = x1 = y1 = null : (x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1])), reclip()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n\n  function reclip() {\n    var k = pi * scale(),\n        t = m(rotation(m.rotate()).invert([0, 0]));\n    return clipExtent(x0 == null\n        ? [[t[0] - k, t[1] - k], [t[0] + k, t[1] + k]] : project === mercatorRaw\n        ? [[Math.max(t[0] - k, x0), y0], [Math.min(t[0] + k, x1), y1]]\n        : [[x0, Math.max(t[1] - k, y0)], [x1, Math.min(t[1] + k, y1)]]);\n  }\n\n  return reclip();\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function number(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n"],"names":["Browser","Env","env","detect","ua","browser","firefox","ie","edge","weChat","domSupported","style","DEFAULT_FONT_SIZE","DEFAULT_FONT_FAMILY","DEFAULT_FONT","OFFSET","SCALE","defaultWidthMapStr","getTextWidthMap","mapStr","map","i","char","size","DEFAULT_TEXT_WIDTH_MAP","platformApi","_ctx","_cachedFont","text","font","canvas","res","fontSize","width","preCalcWidth","src","onload","onerror","image","BUILTIN_OBJECT","reduce","obj","val","TYPED_ARRAY","objToString","arrayProto","nativeForEach","nativeFilter","nativeSlice","nativeMap","ctorFunction","protoFunction","protoKey","idStart","guid","logError","args","_i","clone","source","result","typeStr","isPrimitive","len","Ctor","isDom","key","merge","target","overwrite","isObject","targetProp","sourceProp","isArray","isBuiltInObject","extend","defaults","overlay","keysArr","keys","indexOf","array","value","inherits","clazz","baseClazz","clazzPrototype","F","prop","mixin","override","keyList","isArrayLike","data","each","arr","cb","context","slice","memo","filter","find","bindPolyfill","func","bind","isFunction","curry","isString","isStringSafe","isNumber","type","isTypedArray","isGradientObject","isImagePatternObject","eqNaN","retrieve","retrieve2","value0","value1","retrieve3","value2","normalizeCssArray","assert","condition","message","trim","str","primitiveKey","setAsPrimitive","MapPolyfill","existed","callback","isNativeMapSupported","maybeNativeMap","HashMap","isArr","thisMap","visit","createHashMap","concatArray","a","b","newArray","offset","createObject","proto","properties","StyleCtor","disableUserSelect","dom","domStyle","hasOwn","own","noop","RADIAN_TO_DEGREE","create","x","y","copy","out","v","set","add","v1","v2","scaleAndAdd","sub","lenSquare","scale","s","normalize","d","distance","dist","distanceSquare","distSquare","applyTransform","m","min","max","Param","e","Draggable","handler","draggingTarget","dx","dy","dropTarget","lastDropTarget","Eventful","eventProcessors","event","query","_h","eventProcessor","wrap","lastIndex","lastWrap","eventName","eventType","newList","l","argLen","hItem","ctx","LN2","determinant","rows","rank","rowStart","rowMask","colMask","detCache","cacheKey","fullRank","colStart","subRowMask","subRowStart","sum","j","colLocalIdx","colTag","buildTransformer","dest","mA","det","vh","srcPointX","srcPointY","pk","EVENT_SAVED_PROP","_calcOut","transformLocalCoord","elFrom","elTarget","inX","inY","transformCoordWithViewport","transformLocalCoordClear","dealClear","el","saved","inverse","isCanvasEl","markers","prepareCoordMarkers","transformer","preparePointerTransformer","propLR","propTB","marker","stl","idxLR","idxTB","transformerName","oldSrcCoords","srcCoords","destCoords","oldCoordTheSame","rect","ii","replaceReg","replaceMap","encodeHTML","c","MOUSE_EVENT_REG","firefoxNotSupportOffsetXY","clientToLocal","calculate","calculateZrXY","ex","ey","box","getNativeEvent","normalizeEvent","isTouch","touch","wheelDelta","getWheelDeltaMayPolyfill","button","rawWheelDelta","deltaX","deltaY","delta","sign","addEventListener","name","opt","removeEventListener","stop","isMiddleOrRightButtonOnMouseUpDown","GestureMgr","root","touches","trackItem","pos","eventUtil.clientToLocal","recognizers","gestureInfo","pointPair","center","tracks","trackLen","pinchEnd","pinchPre","pinchScale","pinchCenter","identity","mul","m1","m2","out0","out1","out2","out3","out4","out5","translate","rotate","rad","pivot","aa","ac","atx","ab","ad","aty","st","ct","vx","vy","invert","Point","other","scalar","input","p","p2","p0","p1","t","onet","mathMin","mathMax","mathAbs","XY","WH","lt","rb","lb","rt","_intersectCtx","createIntersectContext","_minTv","_maxTv","_lenMinMax","BoundingRect","height","sx","sy","matrix.create","matrix.translate","matrix.scale","mtv","outIntersectRect","clamp","_tmpIntersectA","_tmpIntersectB","useMTV","touchThreshold","ax0","ax1","ay0","ay1","bx0","bx1","by0","by1","overlap","intersectOneDim","tx","ty","maxX","maxY","a0","a1","b0","b1","updateDimIdx","d0","d1","d01min","updateDim","zeroDim","wh","_direction","_dirCheckVec","_dirTmp","minTv","dirMinTv","squareMag","dirSin","dirCos","dotProd","nearZero","SILENT","makeEventPacket","eveType","targetInfo","stopEvent","eventTool.stop","EmptyProxy","_super","__extends","_this","HoveredResult","handlerNames","tmpRect","Handler","storage","painter","proxy","painterRoot","pointerSize","util.each","isOutside","isOutsideBoundary","lastHovered","lastHoveredTarget","hovered","hoveredTarget","eventControl","eventArgs","cursorStyle","eventKey","eventPacket","layer","exclude","list","setHoverTarget","candidates","targetSizeHalf","pointerRect","rStep","thetaStep","PI2","r","theta","x1","y1","stage","gestureMgr","vec2.dist","isHover","displayable","isSilent","ignoreClip","clipPath","hostEl","hoverCheckResult","handlerInstance","DEFAULT_MIN_MERGE","DEFAULT_MIN_GALLOPING","minRunLength","n","makeAscendingRun","lo","hi","compare","runHi","reverseRun","binaryInsertionSort","start","left","right","mid","gallopLeft","length","hint","lastOffset","maxOffset","tmp","gallopRight","TimSort","minGallop","runStart","runLength","stackSize","pushRun","_runStart","_runLength","mergeRuns","mergeAt","forceMergeRuns","start1","length1","start2","length2","k","mergeLow","mergeHigh","cursor1","cursor2","_minGallop","count1","count2","exit","customCursor","customDest","sort","remaining","ts","minRun","force","REDRAW_BIT","STYLE_CHANGED_BIT","SHAPE_CHANGED_BIT","invalidZErrorLogged","logInvalidZError","shapeCompareFunc","Storage","update","includeIgnore","displayList","roots","timsort","parentClipPaths","userSetClipPath","parentHasClipPaths","clipPathIdx","thisClipPaths","idx","currentClipPath","parentClipPath","children","child","disp","decalEl","textGuide","textEl","util.indexOf","requestAnimationFrame","easingFuncs","mathPow","mathSqrt","EPSILON","EPSILON_NUMERIC","THREE_SQRT","ONE_THIRD","_v0","v2Create","_v1","_v2","isAroundZero","isNotAroundZero","cubicAt","p3","cubicDerivativeAt","cubicRootAt","A","B","C","t1","disc","K","t2","discSqrt","Y1","Y2","T","ASqrt","t3","cubicExtrema","extrema","cubicSubdivide","p01","p12","p23","p012","p123","p0123","cubicProjectPoint","x0","y0","x2","y2","x3","y3","interval","prev","next","d2","_t","v2DistSquare","cubicLength","iteration","px","py","step","quadraticAt","quadraticDerivativeAt","quadraticRootAt","quadraticExtremum","divider","quadraticSubdivide","quadraticProjectPoint","quadraticLength","regexp","createCubicEasingFunc","cubicEasingStr","cubic","points","a_1","b_1","c_1","d_1","roots_1","Clip","opts","globalTime","deltaTime","life","elapsedTime","percent","easingFunc","schedule","remainder","easing","Entry","LinkedList","entry","LRU","maxSize","removed","leastUsedEntry","kCSSColorTable","clampCssByte","clampCssFloat","f","parseCssInt","parseCssFloat","cssHueToRgb","h","setRgba","g","copyRgba","colorCache","lastRemovedArr","putToCache","colorStr","rgbaArr","parse","cached","strLen","iv","op","ep","fname","params","alpha","hsla2rgba","hsla","rgba","rgba2hsla","R","G","vMin","vMax","L","H","S","deltaR","deltaG","deltaB","lift","color","level","colorArr","stringify","modifyHSL","arrColor","lum","backgroundLum","liftedColorCache","liftColor","liftedColor","ret","isLinearGradient","isRadialGradient","arraySlice","interpolateNumber","interpolate1DArray","interpolate2DArray","len2","add1DArray","add2DArray","fillColorStops","val0","val1","len0","len1","shorterArr","shorterLen","last","fillArray","arrDim","arr0","arr1","arr0Len","arr1Len","isPreviousLarger","cloneValue","rgba2String","guessArrayDim","VALUE_TYPE_NUMBER","VALUE_TYPE_1D_ARRAY","VALUE_TYPE_2D_ARRAY","VALUE_TYPE_COLOR","VALUE_TYPE_LINEAR_GRADIENT","VALUE_TYPE_RADIAL_GRADIENT","VALUE_TYPE_UNKOWN","isGradientValueType","valType","isArrayValueType","tmpRgba","Track","propName","time","rawValue","keyframes","discrete","arrayDim","colorArray","color.parse","parsedGradient","colorStop","kf","maxTime","additiveTrack","kfs","kfsLen","lastKf","isDiscrete","isGradient","lastValue","startValue","isAdditive","valueKey","kfsNum","isValueColor","frameIdx","lastFrame","frame","nextFrame","w","targetArr","nextVal_1","isLinearGradient_1","nextColorStop","additiveValue","Animator","loop","allowDiscreteAnimation","additiveTo","props","propNames","track","initialValue","addtiveTrackKfs","lastFinalKf","duration","doneList","animation","abortedList","tracksKeys","trackName","additiveAnimators","self","clip","stillHasAdditiveAnimator","onframeList","forwardToLast","allAborted","trackKeys","firstOrLast","finalProps","getTime","Animation","animator","notTriggerFrameAndStageUpdate","nextClip","finished","options","TOUCH_CLICK_DELAY","globalEventSupported","localNativeListenerNames","mouseHandlerNames","touchHandlerNames","pointerEventNameMap","pointerHandlerNames","zrUtil.map","nm","globalNativeListenerNames","wheelEventSupported","isPointerFromTouch","pointerType","setTouchTimer","scope","markTouch","normalizeGlobalEvent","instance","FakeGlobalEvent","isLocalEl","elTmp","isLocal","zrUtil.noop","localDOMHandlers","downPoint","element","zrUtil.each","globalDOMHandlers","pointerCaptureReleasing","mountLocalDOMEventListeners","domHandlers","nativeEventName","mountSingleDOMEventListener","mountGlobalDOMEventListeners","mount","nativeEventListener","listener","unmountDOMEventListeners","mounted","DOMHandlerScope","domTarget","HandlerDomProxy","isPointerCapturing","globalHandlerScope","dpr","devicePixelRatio","DARK_MODE_THRESHOLD","DARK_LABEL_COLOR","LIGHT_LABEL_COLOR","LIGHTER_LABEL_COLOR","mIdentity","matrix.identity","scaleTmp","tmpTransform","originTransform","abs","Transformable","parentTransform","needLocalTransform","matrix.mul","matrix.copy","globalScaleRatio","relX","relY","matrix.invert","transformNode","ancestors","rotation","shearX","parent","ox","oy","invTransform","vector.applyTransform","transform","copyTransform","ax","ay","skewX","skewY","matrix.rotate","TRANSFORMABLE_PROPS","ensureFontMeasureInfo","_fontMeasureInfoCache","measureInfo","tryCreateASCIIWidthMap","_getASCIIWidthMapLongCount","GET_ASCII_WIDTH_LONG_COUNT_MAX","asciiWidthMap","code","cost","measureCharWidth","fontMeasureInfo","charCode","measureWidth","strWidthCache","innerGetBoundingRect","textAlign","textBaseline","getLineHeight","adjustTextX","adjustTextY","getBoundingRect","textLines","uniondRect","verticalAlign","parsePercent","maxValue","calculateTextPosition","textPosition","halfHeight","textVerticalAlign","PRESERVED_NORMAL_STATE","PRIMARY_STATES_KEYS","DEFAULT_ANIMATABLE_MAP","tmpTextPosCalcRes","tmpBoundingRect","tmpInnerTextTrans","Element","forceUpdate","textConfig","innerTransformable","textStyleChanged","innerOrigin","hasPosition","autoOverflowArea","layoutRect","textOrigin","relOriginX","relOriginY","textOffset","innerTextDefaultStyle","overflowRect","isInside","textFill","textStroke","autoStroke","backgroundColor","isDark","keyOrObj","toState","normalState","fromStateTransition","targetName","primaryKeys","states","noAnimation","stateName","keepCurrentStates","forceUseHoverLayer","toNormalState","hasStates","currentStates","animationCfg","state","useHoverLayer","textContent","stateObjects","notChange","stateObj","lastStateObj","mergedState","oldState","newState","forceAdd","newStateExists","enable","mergedTextConfig","transition","needsRestoreToNormal","transitionTarget","hasTransition","propNeedsTransition","componentEl","zr","previousTextContent","cfg","guideLine","inHover","animators","leftAnimators","animationProps","animateTo","elProto","createLegacyProperty","privateKey","xKey","yKey","enhanceArray","animatable","reverse","animateToShallow","finishCount","doneHappened","cfgDone","cfgAborted","doneCb","abortedCb","copyArrShallow","is2DArray","copyValue","sourceArr","isValueSame","val2","is1DArraySame","topKey","animateObj","targetKeys","delay","additive","setToFinal","animateAll","existsAnimators","animationKeys","innerKey","targetVal","keyLen","revertedSource","reversedTarget","sourceClone","Group","nextSibling","oldChild","newChild","zrUtil.indexOf","index","old","stopped","includeChildren","tmpMat","childRect","painterCtors","instances","delInstance","id","isDarkMode","colorStops","totalLum","ZRender","rendererType","zrUtil.keys","ssrMode","handlerProxy","HandlerProxy","useCoarsePointer","usePointerSize","defaultPointerSize","zrUtil.retrieve2","zLevel","config","darkMode","fromInside","triggerRendered","end","stillFramesCount","eventHandler","init","zrUtil.guid","registerPainter","STYLE_MAGIC_KEY","DEFAULT_COMMON_STYLE","DEFAULT_COMMON_ANIMATION_PROPS","PRIMARY_STATES_KEYS_IN_HOVER_LAYER","Displayable","viewWidth","viewHeight","considerClipPath","considerAncestors","isDisplayableCulled","parent_1","coord","elRect","shadowSize","shadowOffsetX","shadowOffsetY","tolerance","paintRect","targetKey","notRedraw","targetStyle","sourceStyle","changedKeys","statesKeys","mergedStyle","dispProto","viewRect","mathSin","mathCos","vec2.create","extremity","fromPoints","top","bottom","fromLine","xDim","yDim","fromCubic","curve.cubicExtrema","curve.cubicAt","fromQuadratic","curve.quadraticExtremum","curve.quadraticAt","fromArc","rx","ry","startAngle","endAngle","anticlockwise","vec2Min","vec2.min","vec2Max","vec2.max","diff","angle","CMD","tmpOutX","tmpOutY","min2","max2","PI","hasTypedArray","tmpAngles","modPI2","radian","normalizeArcAngles","angles","newStartAngle","newEndAngle","PathProxy","notSaveData","segmentIgnoreThreshold","exceedUnit","cx","cy","radius","path","appendSize","oldData","appendPathData","cmd","newData","xi","yi","isFirst","ux","uy","pathSegLen","pathTotalLen","segCount","drawPart","accumLength","displayedLength","pendingPtDist","pendingPtX","pendingPtY","psi","isEllipse","breakBuild","newProxy","containStroke","lineWidth","_l","_a","_b","_s","curve.cubicProjectPoint","normalizeRadian","windingLine","dir","x_","isAroundEqual","swapExtrema","windingCubic","nRoots","curve.cubicRootAt","nExtrema","y0_","y1_","unit","windingQuadratic","curve.quadraticRootAt","y_","windingArc","dTheta","tmp_1","containPath","isStroke","line.containStroke","cubic.containStroke","quadratic.containStroke","_x","arc.containStroke","contain","pathProxy","DEFAULT_PATH_STYLE","DEFAULT_PATH_ANIMATION_PROPS","pathCopyParams","Path","decalElStyle","defaultStyle","pathFill","fillLum","isDarkLabel","shapeCfg","inBatch","stroke","fill","needsUpdateRect","firstInvoke","rectStroke","lineScale","strokeContainThreshold","localPos","pathContain.containStroke","pathContain.contain","shape","targetShape","targetShapePrimaryProps","shapeKeys","mergedShape","defaultProps","Sub","pathProto","mathAtan2","transformPath","nPoint","M","Q","v2ApplyTransform","p_1","vMag","vRatio","u","vAngle","processArc","fa","fs","psiDeg","xp","yp","lambda","cxp","cyp","commandReg","numberReg","createPathProxyFromString","cpx","cpy","subpathX","subpathY","prevCmd","cmdList","cmdText","cmdStr","pLen","off","ctlPtx","ctlPty","pathData","SVGPath","isPathProxy","createPathOptions","innerOpts","beProxy","createFromString","extendFromString","defaultOpts","mergePath","pathEls","pathList","pathEl","pathBundle","DEFAULT_IMAGE_STYLE","DEFAULT_IMAGE_ANIMATION_PROPS","isImageLike","ZRImage","dim","imageSource","otherDim","otherDimSize","CircleShape","Circle","buildPath","r1","r2","r3","r4","total","round","subPixelOptimizeLine","outputShape","inputShape","subPixelOptimize","subPixelOptimizeRect","originX","originY","originWidth","originHeight","position","positiveOrNegative","doubledPosition","RectShape","subPixelOptimizeOutputShape","Rect","optimizedShape","roundRectHelper.buildPath","EllipseShape","Ellipse","LineShape","Line","smoothBezier","smooth","isLoop","constraint","cps","prevPoint","nextPoint","v2Min","v2Max","point","v2Clone","v2Sub","v2Scale","v2Distance","cp0","v2Add","cp1","closePath","controlPoints","cp2","PolygonShape","Polygon","polyHelper.buildPath","PolylineShape","Polyline","Gradient","LinearGradient","globalCoord","RadialGradient","globalImageCache","findExistImage","newImageOrSrc","cachedImgObj","createOrUpdateImage","cbPayload","pendingWrap","isImageReady","imageOnLoad","STYLE_REG","truncateText2","containerWidth","ellipsis","prepareTruncateOptions","isTruncated","truncateOut","truncateSingleLine","preparedOpts","minChar","ascCharWidth","contentWidth","ellipsisWidth","textLine","subLength","estimateLength","parsePlainText","rawText","defaultOuterWidth","defaultOuterHeight","formatText","overflow","padding","paddingH","paddingV","truncate","calculatedLineHeight","lineHeight","truncateLineOverflow","lines","wrapText","contentHeight","lineCount","singleOut","outerHeight","outerWidth","RichTextToken","RichTextLine","tokens","RichTextContentBlock","parseRichText","topTextAlign","contentBlock","stlPadding","stlPaddingH","stlPaddingV","topWidth","topHeight","wrapInfo","matchedIndex","pushTokens","pendingList","calculatedHeight","calculatedWidth","truncateLine","tmpTruncateOut","finishLine","line","outer","token","tokenStyle","textPadding","tokenHeight","originalLength","styleTokenWidth","tokenWidthNotSpecified","textBackgroundColor","bgImg","imageHelper.findExistImage","imageHelper.isImageReady","remainTruncWidth","percentWidth","block","styleName","isEmptyStr","newLine","strLines","linesWidths","tokenPadding","tokenPaddingH","outerWidth_1","tokensLen","isAlphabeticLetter","ch","breakCharMap","isWordBreakChar","isBreakAll","lastAccumWidth","currentWord","currentWordWidth","accumWidth","chWidth","inWord","calcInnerTextOverflowArea","baseX","baseY","textWidth","textHeight","tmpCITCTextRect","tmpCITCIntersectRectOpt","tSpanCreateBoundingRect","tSpanCreateBoundingRect2","forceLineWidth","tSpanHasStroke","DEFAULT_TSPAN_STYLE","TSpan","tspanProto","mathACos","mathATan2","intersect","dx10","dy10","dx32","dy32","computeCornerTangents","cr","clockwise","x01","y01","x11","y11","x10","y10","x00","y00","cx0","cy0","cx1","cy1","dx0","dy0","dx1","dy1","normalizeCornerRadius","innerRadius","hasRadius","hasInnerRadius","arc","mod","icrStart","icrEnd","ocrStart","ocrEnd","ocrs","ocre","icrs","icre","ocrMax","icrMax","limitedOcrMax","limitedIcrMax","xre","yre","xirs","yirs","xrs","yrs","xire","yire","hasArc","cornerRadius","halfRd","it_1","crStart","crEnd","ct0","ct1","SectorShape","Sector","roundSectorHelper.buildPath","CompoundPath","paths","dirtyPath","IncrementalDisplayable","notPersistent","displayables","Displayble","DEFAULT_RICH_TEXT_COLOR","DEFAULT_STROKE_LINE_WIDTH","tmpCITOverflowAreaOut","DEFAULT_TEXT_ANIMATION_PROPS","ZRText","normalizeTextStyle","defaultTextStyle","sourceRich","targetRich","richNames","richName","textFont","getStyleText","needDrawBg","needDrawBackground","bgColorDrawn","textX","textY","boxX","boxY","getTextXForPadding","defaultLineWidth","usingDefaultStroke","useDefaultFill","getFill","getStroke","hasShadow","subElStyle","setSeparateFont","xLeft","lineTop","xRight","tokenCount","remainedWidth","leftIndex","lineXLeft","lineXRight","rightIndex","parentBgColorDrawn","topStyle","textBorderWidth","textBorderColor","isImageBg","isPlainOrGradientBg","textBorderRadius","rectEl","imgEl","rectShape","rectStyle","imgStyle","commonStyle","hasSeparateFont","parseFontSize","VALID_TEXT_ALIGN","VALID_TEXT_VERTICAL_ALIGN","FONT_PARTS","fontProp","normalizeStyle","ArcShape","Arc","unitX","unitY","BezierCurveShape","someVectorAt","isTangent","cpx2","cpy2","BezierCurve","cpx1","cpy1","vec2.normalize","RingShape","Ring","_extent","_extent2","OrientedBoundingRect","corners","axes","overlapped","noMtv","axis","dist0","dist1","origin","proj","proj_1","isSafeNum","num","createLinearGradient","canvasGradient","createRadialGradient","getCanvasGradient","isClipPathChanged","clipPaths","prevClipPaths","parseInt10","getSize","whIdx","cwh","plt","prb","normalizeLineDash","lineType","getLineDash","lineDash","lineDashOffset","lineScale_1","rawVal","pathProxyForDraw","styleHasStroke","isValidStrokeFillStyle","strokeOrFill","styleHasFill","doFillPath","originalGlobalAlpha","doStrokePath","createCanvasPattern","pattern","canvasPattern","matrix","brushPath","hasStroke","hasFill","strokePercent","strokePart","firstDraw","dirtyFlag","hasFillGradient","hasStrokeGradient","hasFillPattern","hasStrokePattern","fillGradient","strokeGradient","fillPattern","strokePattern","needsRebuild","brushImage","aspect","sWidth","sHeight","brushText","SHADOW_NUMBER_PROPS","STROKE_PROPS","bindCommonProps","prevStyle","forceSetAll","styleChanged","flushPathDrawn","opacity","bindPathAndTextCommonStyle","prevEl","getStyle","newLineWidth","bindImageStyle","setContextTransform","updateClipStatus","allClipped","isTransformChanged","m0","DRAW_TYPE_PATH","DRAW_TYPE_IMAGE","DRAW_TYPE_TEXT","DRAW_TYPE_INCREMENTAL","canPathBatch","brushSingle","brush","isLast","prevElClipPaths","forceSetTransform","forceSetStyle","canBatchPath","brushIncremental","temporalDisplayables","innerScope","i_1","len_1","createDom","newDom","newDomStyle","Layer","util.isObject","util.disableUserSelect","prevList","mergedRepaintRects","maxRepaintRectCount","full","pendingRect","addRectToMergePool","boundingRect","isMerged","minDeltaArea","bestRectToMergeIdx","mergedRect","pendingRect_1","aArea","bArea","pendingArea","deltaArea","shouldPaint","prevRect","curRect","hasIntersections","domBack","clearAll","clearColor","repaintRects","haveMotionBLur","lastFrameAlpha","doClear","clearColorGradientOrPattern","util.isGradientObject","shouldCache","util.isImagePatternObject","HOVER_LAYER_ZLEVEL","CANVAS_ZLEVEL","EL_AFTER_INCREMENTAL_INC","INCREMENTAL_INC","isLayerValid","createRoot","domRoot","CanvasPainter","singleCanvas","util.extend","rootStyle","zlevelList","layers","rootCanvas","mainLayer","viewportRoot","paintAll","z","hoverLayer","redrawId","needsRefreshHover","self_1","layerList","useDirtyRect","zi","zlevel","_loop_1","this_1","useTimer","startTime","firstEl","repaint","repaintRect","dTime","currentLayer","virtual","util.merge","layersMap","prevLayer","prevDom","updatePrevLayer","incrementalLayerCount","prevZlevel","util.logError","layerConfig","_zlevel","imageLayer","width_1","height_1","TYPE_DELIMITER","IS_CONTAINER","IS_EXTENDED_CLASS","parseClassType","componentType","typeArr","checkClassType","zrUtil.assert","isExtendedClass","clz","enableClassExtend","rootClz","mandatoryMethods","superClass","ExtendedClass","isESClass","class_1","zrUtil.inherits","zrUtil.extend","superCall","superApply","fn","zrUtil.isFunction","mountExtend","SubClz","SupperClz","classBase","enableClassCheck","classAttr","methodName","enableClassManagement","componentFullType","componentTypeInfo","container","makeContainer","mainType","subType","throwWhenNotFound","o","types","makeStyleMapper","ignoreParent","model","excludes","includes","AREA_STYLE_KEY_MAP","getAreaStyle","AreaStyleMixin","RADIAN_EPSILON","ROUND_SUPPORTED_PRECISION_MAX","_trim","linearMap","domain","range","r0","subDomain","subRange","parsePositionOption","option","percentBase","percentOffset","parsePositionSizeOption","zrUtil.isString","precision","returnStr","asc","getPrecision","getPrecisionSafe","eIndex","exp","significandPartLen","dotIndex","decimalPartLen","getPixelPrecision","dataExtent","pixelExtent","log","LN10","dataQuantity","sizeQuantity","addSafe","maxPrecision","remRadian","pi2","isRadianAroundZero","TIME_REG","parseDate","match","hour","quantity","quantityExponent","nice","exponent","exp10","nf","numericToNumber","valFloat","isNumeric","getRandomIdBase","getGreatestCommonDividor","getLeastCommonMultiple","ECHARTS_PREFIX","hasConsole","outputLog","onlyOnce","error","throwError","msg","DUMMY_COMPONENT_NAME_PREFIX","INTERNAL_COMPONENT_ID_PREFIX","normalizeToArray","defaultEmphasis","subOpts","subOptName","TEXT_STYLE_OPTIONS","getDataItemValue","dataItem","isDataItemOption","mappingToExists","existings","newCmptOptions","mode","isNormalMergeMode","isReplaceMergeMode","isReplaceAllMode","existingIdIdxMap","cmptOption","prepareResult","mappingById","mappingByName","mappingByIndex","mappingInReplaceAllMode","makeIdAndName","existing","isComponentIdInternal","optionId","makeComparableKey","existingIdx","resultItem","keyExistAndEqual","brandNew","nextIdx","mapResult","idMap","item","keyInfo","idNum","attr","obj1","obj2","key1","convertOptionIdName","key2","idOrName","defaultValue","isNameSpecified","componentModel","makeInternalComponentId","idSuffix","setComponentTypeToKeyInfo","mappingResult","componentModelCtor","newOption","determineSubType","newCmptOption","existComponent","queryDataIndex","payload","makeInner","innerUniqueIndex","hostObj","parseFinder","ecModel","finderInput","preParseFinder","mainTypeSpecified","queryOptionMap","others","defaultMainType","queryOption","queryResult","queryReferringComponents","finder","parsedKey","queryType","SINGLE_REFERRING","MULTIPLE_REFERRING","userOption","indexOption","idOption","nameOption","firstCmpt","setAttribute","getAttribute","getTooltipRenderMode","renderModeOption","getECData","setCommonECData","seriesIndex","dataType","dataIdx","ecData","childECData","_highlightNextDigit","_highlightKeyMap","getSavedStates","getComponentStates","HOVER_STATE_NORMAL","HOVER_STATE_BLUR","HOVER_STATE_EMPHASIS","SPECIAL_STATES","DISPLAY_STATES","Z2_EMPHASIS_LIFT","Z2_SELECT_LIFT","HIGHLIGHT_ACTION_TYPE","DOWNPLAY_ACTION_TYPE","SELECT_ACTION_TYPE","UNSELECT_ACTION_TYPE","TOGGLE_SELECT_ACTION_TYPE","SELECT_CHANGED_EVENT_TYPE","hasFillOrStroke","fillOrStroke","doChangeHoverState","hoverStateEnum","singleEnterEmphasis","singleLeaveEmphasis","singleEnterBlur","singleLeaveBlur","singleEnterSelect","singleLeaveSelect","updateElementState","updater","commonParam","traverseUpdateState","getFromStateStyle","toStateName","fromState","createEmphasisDefaultState","targetStates","hasSelect","cloned","store","fromFill","fromStroke","emphasisStyle","z2EmphasisLift","createSelectDefaultState","z2SelectLift","createBlurDefaultState","hasBlur","currentOpacity","blurStyle","elementStateProxy","setDefaultStateProxy","enterEmphasisWhenMouseOver","shouldSilent","leaveEmphasisWhenMouseOut","enterEmphasis","highlightDigit","leaveEmphasis","enterBlur","leaveBlur","enterSelect","leaveSelect","allLeaveBlur","api","leaveBlurredSeries","allComponentViews","componentStates","isSeries","view","blurSeries","targetSeriesIndex","focus","blurScope","leaveBlurOfIndices","dataIndices","itemEl","targetSeriesModel","targetCoordSys","blurredSeries","seriesModel","sameSeries","coordSys","sameCoordSys","dataTypes","blurComponent","componentMainType","componentIndex","blurSeriesFromHighlightPayload","dataIndex","count","current","focus_1","findComponentHighDownDispatchers","dispatchers","focusSelf","handleGlobalMouseOverForHighDown","dispatcher","handleGlobalMouseOutForHighDown","toggleSelectionFromPayload","isSelectChangePayload","updateSeriesElementSelection","allData","getAllSelectedIndices","enableHoverEmphasis","setAsHighDownDispatcher","enableHoverFocus","disableHoverEmphasis","toggleHoverEmphasis","isDisabled","asDispatcher","disable","extendedEl","isHighDownDispatcher","getHighlightDigit","highlightKey","payloadType","isHighDownPayload","savePathStates","selectState","transitionStore","getAnimationConfig","animationType","animatableModel","extraOpts","extraDelayParams","animationPayload","updatePayload","animationEnabled","isUpdate","animateOrSetProps","during","isFrom","removeOpt","isRemove","animationConfig","animationDelay","animationEasing","animateConfig","updateProps","initProps","isElementRemoved","removeElement","fadeOutDisplayable","done","removeElementWithFadeOut","doRemove","saveOldStyle","_customShapeMap","extendShape","extendPathFromString","pathTool.extendFromString","extendPath","registerShape","ShapeClass","getShapeClass","makePath","layout","pathTool.createFromString","centerGraphic","resizePath","makeImage","imageUrl","zrImg","img","pathTool.mergePath","pathRect","subPixelOptimizeUtil.subPixelOptimizeLine","subPixelOptimizeUtil.subPixelOptimizeRect","subPixelOptimizeUtil.subPixelOptimize","getTransform","ancestor","mat","transformDirection","direction","hBase","vBase","vertex","isNotGroup","isPath","groupTransition","g1","g2","getElMap","elMap","getAnimatableProps","elMap1","oldEl","newProp","clipPointsByRect","clipRectByRect","targetRect","createIcon","iconStr","linePolygonIntersect","a1x","a1y","a2x","a2y","lineLineIntersect","b1x","b1y","b2x","b2y","mx","my","nx","ny","nmCrossProduct","crossProduct2d","b1a1x","b1a1y","q","expandOrShrinkRect","shrinkOrExpand","noNegative","minSize","_tmpExpandRectDelta","expandRectOnOneDimension","xy","ltIdx","rbIdx","deltaSum","oldSize","setTooltipConfig","itemTooltipOption","itemName","itemTooltipOptionObj","formatterParams","formatterParamsExtra","traverseElement","traverseElements","els","isBoundingRectAxisAligned","AXIS_ALIGN_EPSILON","ensureCopyRect","ensureCopyTransform","retrieveZInfo","calcZ2Range","visitEl","calcZ2","entity","z2","traverseUpdateZ","doUpdateZ","maxZ2","label","labelLine","isGroup","textGuideLineConfig","EMPTY_OBJ","setLabelText","labelTexts","oldStates","getLabelText","stateModels","interpolatedValue","labelFetcher","labelDataIndex","labelDimIndex","normalModel","baseText","statesText","stateModel","setLabelStyle","targetEl","labelStatesModels","stateSpecified","isSetOnText","needsCreateText","labelStatesTexts","showNormal","normalStyle","createTextStyle","createTextConfig","stateShow","targetElEmphasisState","labelInner","getLabelStatesModels","itemModel","labelName","statesModels","textStyleModel","specifiedTextStyle","isNotNormal","isAttached","textStyle","setTextStyleCommon","labelPosition","labelRotate","labelDistance","labelOffset","globalTextStyle","richItemNames","getRichItemNames","richResult","richInheritPlainLabelOptionName","richInheritPlainLabel","name_1","richTextStyle","setTokenTextStyle","lineOverflow","labelTextStyle","minMargin","LabelMarginType","textMargin","richItemNameMap","rich","richKeys","richKey","TEXT_PROPS_WITH_GLOBAL","TEXT_PROPS_SELF","TEXT_PROPS_BOX","plainTextModel","isBlock","inRich","inheritColor","fillColor","strokeColor","textBorderType","textBorderDashOffset","baseline","borderType","getFont","gTextStyleModel","PATH_COLOR","textStyleParams","tmpText","TextStyleMixin","isEmphasis","LINE_STYLE_KEY_MAP","getLineStyle","LineStyleMixin","ITEM_STYLE_KEY_MAP","getItemStyle","ItemStyleMixin","Model","parentModel","hasPath","pathFinal","pathArr","dataIndexMapValueLength","valNumOrArrLengthMoreThan2","defaultKeyGetter","DataDiffer","oldArr","newArr","oldKeyGetter","newKeyGetter","diffMode","newDataIndexMap","oldDataKeyArr","newDataKeyArr","oldKey","newIdxMapVal","newIdxMapValLen","newIdx","oldDataIndexMap","oldIdxMapVal","oldIdxMapValLen","newKey","idxMapValLen","keyArr","keyGetterName","cbModeMultiple","idxMapVal","VISUAL_DIMENSIONS","SOURCE_FORMAT_ORIGINAL","SOURCE_FORMAT_ARRAY_ROWS","SOURCE_FORMAT_OBJECT_ROWS","SOURCE_FORMAT_KEYED_COLUMNS","SOURCE_FORMAT_TYPED_ARRAY","SOURCE_FORMAT_UNKNOWN","SERIES_LAYOUT_BY_COLUMN","SERIES_LAYOUT_BY_ROW","BE_ORDINAL","innerGlobalModel","resetSourceDefaulter","makeSeriesEncodeForAxisCoordSys","coordDimensions","encode","datasetModel","querySeriesUpstreamDatasetModel","encodeItemName","encodeSeriesName","datasetMap","baseCategoryDimIndex","categoryWayValueDimStart","coordDimInfoLoose","coordDimIdx","coordDimInfo","getDataDimCountOnCoordDim","datasetRecord","coordDimName","pushDim","dimIdxArr","idxFrom","idxCount","dimsDef","thisData","queryDatasetUpstreamDatasetModels","guessOrdinal","dimIndex","doGuessOrdinal","sourceFormat","seriesLayoutBy","dimensionsDefine","startIndex","maxLoop","dimName","dimType","dimDefItem","dataArrayRows","sample","detectValue","row","dataObjectRows","dataKeyedColumns","dataOriginal","beStr","SourceImpl","fields","isSourceInstance","createSource","sourceData","thisMetaRawOption","detectSourceFormat","determined","determineSourceDimensions","createSourceFromSeriesDataOption","cloneSourceShallow","sourceHeader","dimensionsDetectedCount","normalizeDimensionsOption","arrayRowsTravelFirst","objectRowsCollectDimensions","colArr","firstIndex","nameMap","rawItem","exist","shouldRetrieveDataByName","_c","_d","providerMethods","mountMethods","DefaultDataProvider","sourceParam","dimSize","provider","methods","getMethodMapKey","getItemForTypedArray","countForTypedArray","fillStorageForTypedArray","rawItemGetter","getRawSourceItemGetter","rawCounter","getRawSourceDataCounter","extent","dimExtent","appendDataSimply","newCol","oldCol","validateSimply","rawData","getItemSimply","rawSourceItemGetterMap","col","method","countSimply","rawSourceDataCounterMap","getRawValueSimply","property","rawSourceValueGetterMap","getRawSourceValueGetter","retrieveRawValue","DimensionUserOuput","dimRequest","summarizeDimensions","schema","summary","notExtraCoordDimMap","defaultedLabel","defaultedTooltip","userOutputEncode","dimItem","coordDim","coordDimIndex","getOrCreateEncodeArr","mayLabelDimType","encodeArr","dataDimsOnCoord","encodeFirstDimNotExtra","dimArr","encodeLabel","encodeTooltip","getDimensionTypeByAxis","axisType","SeriesDimensionDefine","parseDataValue","SortOrderComparator","order","incomparable","isDesc","lval","rval","lvalFloat","rvalFloat","lvalNotNumeric","rvalNotNumeric","lvalIsStr","rvalIsStr","UNDEFINED","CtorUint32Array","CtorUint16Array","CtorInt32Array","CtorFloat64Array","dataCtors","defaultDimValueGetters","getIndicesCtor","rawCount","getInitialExtent","cloneChunk","originalChunk","prepareStore","dimIdx","append","DataCtor","oldStore","oldLen","newStore","DataStore","inputDimensions","dimValueGetter","defaultGetter","calcDimNameToIdx","dimensions","calcDimIdx","ordinalMeta","chunk","rawExtents","dimRawExtent","dimInfo","values","minFillLen","chunks","dimLen","rawExtent","emptyDataItem","sourceIdx","dimNames","dimStorage","dimStore","rawIdx","dimData","dimDataArray","sortedDimDataArray","rawIndex","indices","rawDataIndex","newIndices","thisCount","dims","dim0","keep","originalCount","storeArr","quickFinished","dimStorage2","dimk","targetChunks","tmpRetValue","dataCount","retValue","rawExtentOnDim","valueDimension","rate","targetStorage","sampledIndex","frameSize","currentRawIndex","maxArea","area","nextRawIndex","nextFrameStart","nextFrameEnd","avgX","avgY","frameStart","frameEnd","pointAX","pointAY","firstNaNIndex","countNaN","minIndex","minValue","maxIndex","thisFrameSize","rawMinIndex","rawMaxIndex","dimension","sampleValue","sampleIndex","frameValues","sampleFrameIdx","initialExtent","currEnd","useRaw","clonedDims","ignoreIndices","clonedDimsMap","getDimValueSimply","inner","dimTypeShort","SeriesDataSchema","dimensionOmitted","ensureSourceDimNameMap","dimCount","willRetrieveDataByName","makeHashStrict","shouldOmitUnusedDimensions","dimHash","fullDimIdx","seriesDimIdx","seriesDimDef","sourceDimDef","hash","dimDef","isSeriesDataSchema","createDimNameMap","dataDimNameMap","dimDefItemRaw","userDimName","innerSource","zrUtil.isObject","ID_PREFIX","INDEX_NOT_FOUND","TRANSFERABLE_PROPERTIES","CLONE_PROPERTIES","prepareInvertedIndex","getId","getIdNameFromStore","normalizeDimensions","transferProperties","cloneListForMapAndSample","makeIdFromName","SeriesData","dimensionsInput","hostModel","assignStoreDimIdx","dimensionInfos","dimensionNames","invertedIndicesMap","needsHasOwn","emptyObj","dimInfoInput","dimensionInfo","dimensionName","otherDims","zrUtil.isNumber","dimIdxToName_1","zrUtil.createHashMap","dimensionsSummary","nameList","zrUtil.isArrayLike","names","shouldMakeIdFromName","idList","isFormatOriginal","sharedDataItem","itemId","ordinal","zrUtil.isArray","dataDimIndicesOnCoord","invertedIndices","fCtx","dimIndices","zrUtil.bind","innerRange","ctxCompat","otherList","thisList","visual","kvObj","itemVisual","itemVisuals","injectFunction","originalMethod","zrUtil.slice","original","zrUtil.clone","nameDimIdx","idDimIdx","nameRepeatCount","nmCnt","prepareSeriesDataSchema","sysDims","coordDimNameMap","resultList","getDimCount","omitUnusedDimensions","isUsingSourceDimensionsDef","encodeDef","encodeDefMap","indicesMap","getResultItem","dataDimsRaw","dataDims","validDataDims","resultDimIdxOrName","resultDimIdx","applyDim","availDimIdx","sysDimItemRaw","sysDimItemDimsDef","sysDimItemOtherDims","sysDimItem","sysDimItemDimsDefItem","generateCoord","generateCoordCount","fromZero","extra","ifNoNameFillWithCoordName","item0","item1","genCoordDimName","removeDuplication","duplicationMap","dimOriginalName","optDimCount","nonSeriesBoxCoordSysCreators","normalCoordSysCreators","CoordinateSystemManager","dealCreate","creatorMap","canBeNonSeriesBox","coordinateSystems","creator","canBeNonSeriesBoxCoordSys","coordSysType","BoxCoordinateSystemCoordFrom","coordSysUseMap","getCoordForBoxCoordSys","from","CoordinateSystemUsageKind","decideCoordSysUsageKind","printError","coordSysUsageOption","kind","injectCoordSysByOption","targetModel","coordSysProvider","isDefaultDataCoordSys","declaredType","CoordSysInfo","coordSysName","getCoordSysInfoBySeries","fetch","fetchers","axisMap","categoryAxisMap","xAxisModel","yAxisModel","isCategory","singleAxisModel","polarModel","radiusAxisModel","angleAxisModel","parallelModel","coordSysDims","axisIndex","axisModel","axisDim","matrixModel","xModel","yModel","enableDataStack","byIndex","stackedCoordDimension","dimensionDefineList","isLegacyDimensionsInput","mayStack","stackedByDimInfo","stackedDimInfo","stackResultDimension","stackedOverDimension","stackedDimCoordDim_1","stackedDimType","stackedDimCoordIndex_1","stackedOverDimensionDefine","stackResultDimensionDefine","isDimensionStacked","stackedDim","getStackedDimension","targetDim","getCoordSysDimDefs","coordSysInfo","registeredCoordSys","CoordinateSystem","coordSysDimDefs","injectOrdinalMeta","dimInfoList","createInvertedIndices","firstCategoryDimIndex","hasNameEncode","categoryAxisModel","createSeriesData","sourceRaw","sourceManager","isOriginalSource","useEncodeDefaulter","encodeDefaulter","zrUtil.curry","createDimensionOptions","stackCalculationInfo","isNeedCompleteOrdinalData","itemOpt","sampleItem","firstDataNotNull","base","getUID","enableSubTypeDefaulter","subTypeDefaulters","defaulter","componentTypeMain","enableTopologicalTravel","dependencyGetter","targetNameList","fullNameList","makeDepndencyGraph","graph","noEntryList","targetNameSet","currComponentType","currVertex","isInTargetNameSet","removeEdgeAndAdd","removeEdge","errMsg","succComponentType","thisItem","createDependencyGraphItem","originalDeps","availableDeps","getAvailableDependencies","dependentName","thatItem","dep","inheritDefaultOption","superOption","subOption","zrUtil.merge","langEN","langZH","LOCALE_ZH","LOCALE_EN","DEFAULT_LOCALE","localeStorage","localeModels","SYSTEM_LANG","langStr","registerLocale","locale","localeObj","createLocaleObject","getLocaleModel","lang","getDefaultLocaleModel","_impl","getScaleBreakHelper","ONE_SECOND","ONE_MINUTE","ONE_HOUR","ONE_DAY","ONE_YEAR","primaryTimeUnitFormatterMatchers","defaultFormatterSeed","defaultFullFormatter","fullDayFormatter","fullLeveledFormatter","primaryTimeUnits","timeUnits","parseTimeAxisLabelFormatter","formatter","parseTimeAxisLabelFormatterDictionary","dictOption","dict","canAddHighlight","lowestUnit","lowestUnitIdx","upperDictOption","lowerTpl","upperUnitIdx","upperUnit","upperDictItemOption","tplArr","pad","getPrimaryTimeUnit","timeUnit","isPrimaryTimeUnit","getDefaultFormatPrecisionOfInterval","format","template","isUTC","date","numberUtil.parseDate","fullYearGetterName","monthGetterName","dateGetterName","hoursGetterName","minutesGetterName","secondsGetterName","millisecondsGetterName","localeModel","timeModel","month","monthAbbr","dayOfWeek","dayOfWeekAbbr","leveledFormat","tick","scaleBreakHelper","tickTime","leveledTplArr","getUnitFromValue","isSecond","isMinute","isHour","isDay","isMonth","isYear","roundTime","monthSetterName","dateSetterName","hoursSetterName","minutesSetterName","secondsSetterName","millisecondsSetterName","fullYearSetterName","addCommas","parts","toCamelCase","upperCaseFirst","group1","zrUtil.normalizeCssArray","makeValueReadable","valueType","useUTC","USER_READABLE_DEFUALT_TIME_PATTERN","stringToUserReadable","zrUtil.trim","isNumberUserReadable","isTypeTime","isValueDate","timeFormat","zrUtil.isStringSafe","numericResult","TPL_VAR_ALIAS","wrapVar","varName","seriesIdx","formatTpl","tpl","paramsList","seriesLen","$vars","alias","getTooltipMarker","inOpt","extraCssText","renderMode","markerId","convertToColorString","defaultColor","windowOpen","link","blank","LOCATION_PARAMS","HV_NAMES","boxLayout","orient","group","gap","maxWidth","maxHeight","currentLineMaxSize","nextChild","nextChildRect","nextX","nextY","moveX","moveY","getBoxLayoutParams","boxLayoutModel","getLayoutRect","positionInfo","containerRect","margin","formatUtil.normalizeCssArray","containerHeight","verticalMargin","horizontalMargin","applyPreserveAspect","component","preserveAspect","actualAspect","preserveAspectAlign","preserveAspectVerticalAlign","layoutOptInner","isCover","BoxLayoutReferenceType","createBoxLayoutReference","refContainer","refPoint","layoutRefType","boxCoordSys","boxCoordFrom","positionElement","zrUtil.defaults","fetchLayoutMode","ins","layoutMode","mergeLayoutParam","targetOption","ignoreSize","hResult","vResult","hvIdx","newParams","newValueCount","merged","mergedValueCount","enoughParamNumber","zrUtil.hasOwn","hasValue","getLayoutParams","copyLayoutParams","ComponentModel","componentUtil.getUID","layout.fetchLayoutMode","inputPositionParams","layout.getLayoutParams","themeModel","layout.mergeLayoutParam","newCptOption","isInit","ctor","optList","defaultOption","indexKey","idKey","layout.getBoxLayoutParams","componentUtil.enableSubTypeDefaulter","componentUtil.enableTopologicalTravel","getDependencies","deps","innerColor","PaletteMixin","requestNum","defaultPalette","layeredPalette","getFromPalette","clearPalette","getNearestPalette","palettes","requestColorNum","paletteNum","that","scopeFields","paletteIdx","paletteNameMap","palette","pickedPaletteItem","DIMENSION_LABEL_REG","DataFormatMixin","borderColor","userOutput","status","extendParams","dimStr","dimLoose","multipleSeries","normalizeTooltipFormatResult","markupText","markupFragment","createTask","define","Task","performArgs","upTask","skip","planResult","lastModBy","normalizeModBy","lastModDataCount","modBy","modDataCount","forceFirstProgress","progress","outputDueEnd","iterator","downstream","downTask","winCount","it","sStep","sCount","modNext","sequentialNext","ExternalSource","createExternalSource","internalSource","externalTransform","extSource","sourceHeaderCount","dimsByName","dimDefExt","errMsg_1","getRawData","cloneRawData","rawValueGetter","retrieveValueFromItem","getDimensionInfo","cloneAllDimensionInfo","upstream","isSupportedSourceFormat","externalTransformMap","registerExternalTransform","typeParsed","isBuiltIn","applyDataTransform","rawTransOption","sourceList","infoForPrint","pipedTransOption","pipeLen","transOption","applySingleDataTransform","upSourceList","pipeIndex","transType","extUpSourceList","upSource","resultIndex","resultMetaRawOption","firstUpSource","SourceManager","sourceHost","upstreamSignList","upSourceMgrList","hasUpstream","resultSourceList","upSourceMgr","newMetaRawOption","upMetaRawOption","needsCreateSource","upMgrList","transformOption","fromTransformResult","doThrow","upMgr","upSrcMgr","sourceIndex","seriesDimRequest","storeDims","seriesSource","sourceReadKey","storeList","cachedStoreMap","cachedStore","hex","TOOLTIP_LINE_HEIGHT_CSS","getTooltipLineHeight","getTooltipTextStyle","nameFontColor","nameFontSize","nameFontWeight","valueFontColor","valueFontSize","valueFontWeight","HTML_GAPS","RICH_TEXT_GAPS","createTooltipMarkup","isSectionFragment","frag","getBuilder","buildSection","buildNameValue","getBlockGapLevel","gapLevel_1","subBlockLen","hasInnerGap_1","subBlock","subGapLevel","fragment","topMarginForOuterGap","toolTipTextStyle","noHeader","gaps","getGap","subMarkupTextList","subBlocks","orderMode","orderMap","comparator_1","valueFormatter","subMarkupText","wrapBlockHTML","displayableHeader","nameStyle","tooltipLineHeight","wrapInlineNameRichText","noName","noValue","noMarker","valueTypeOption","markerStr","readableName","readableValueList","valueAlignRight","valueCloseToMarker","valueStyle","wrapInlineValueRichText","wrapInlineNameHTML","wrapInlineValueHTML","buildTooltipMarkup","markupStyleCreator","builder","gapLevel","encodedContent","topGap","clearfix","marginCSS","leftHasMarker","marginCss","valueList","alignRight","paddingStr","alignCSS","styles","paddingLeft","retrieveVisualColorForTooltipMarker","series","getPaddingFromTooltipModel","TooltipMarkupStyleCreator","markerType","finalStl","defaultSeriesFormatTooltip","tooltipDims","tooltipDimLen","isValueArr","markerColor","inlineValue","inlineValueType","sortParam","formatArrResult","formatTooltipArrayValue","seriesNameSpecified","seriesName","inlineName","isValueMultipleLine","inlineValues","inlineValueTypes","blocks","setEachItem","modelUtil.makeInner","getSelectionKey","SERIES_UNIVERSAL_TRANSITION_PROP","SeriesModel","dataTaskCount","dataTaskReset","wrapData","autoSeriesName","themeSubType","modelUtil.defaultEmphasis","newSeriesOption","zrUtil.isTypedArray","task","getCurrentTask","mainData","colorBy","maxDistance","targetCoord","nearestIndices","minDist","minDiff","nearestIndicesLen","dimValue","dataCoord","innerDataIndices","selectedMap","selectedMode","nameOrId","tmpArr","selectedDataIndicesMap","nameOrIds","universalTransitionOpt","lastDataIndex","zrUtil.mixin","modelUtil.isNameSpecified","getSeriesAutoName","nameArr","dataDim","dataTaskProgress","param","zrUtil.concatArray","onDataChange","scheduler","pipeline","agentStubMap","Triangle","graphic.Path","Diamond","Pin","tanX","tanY","cpLen","cpLen2","Arrow","symbolCtors","graphic.Line","graphic.Rect","graphic.Circle","symbolShapeMakers","symbolBuildProxies","SymbolClz","inBundle","symbolType","proxySymbol","symbolPathSetColor","symbolStyle","createSymbol","keepAspect","isEmpty","symbolPath","graphic.makeImage","graphic.makePath","normalizeSymbolSize","symbolSize","normalizeSymbolOffset","symbolOffset","getDefaultLabel","labelDims","vals","Symbol","seriesScope","driftSymbol","toLastFrame","draggable","hasCursorOption","disableAnimation","graphic.updateProps","graphic.initProps","emphasisItemStyle","blurItemStyle","selectItemStyle","emphasisDisabled","hoverScale","emphasisModel","symbolRotate","visualColor","pathStyle","liftZ","z2Origin","useNameLabel","getLabelDefaultText","emphasisState","scaleRatio","animationOpt","graphic.removeElement","graphic.Group","symbolNeedsDraw","normalizeUpdateOpt","makeSeriesScope","SymbolDraw","SymbolCtor","symbolUpdateOpt","getSymbolPoint","symbolEl","oldIdx","newSymbolType","oldSymbolType","taskParams","updateIncrementalAndHover","graphic.traverseElements","enableAnimation","createRenderPlanner","pipelineContext","originalLarge","originalProgressive","large","progressive","renderPlanner","ChartView","renderTaskPlan","renderTaskReset","toggleHighlight","elSetState","modelUtil.queryDataIndex","modelUtil.normalizeToArray","clazzUtil.enableClassExtend","clazzUtil.enableClassManagement","progressiveRender","updateMethod","progressMethodMap","STACK_PREFIX","getSeriesStackId","getAxisKey","prepareLayoutBarSeries","seriesType","seriesModels","isOnCartesian","getValueAxesMinGaps","barSeries","axisValues","cartesian","baseAxis","cnt","axisMinGaps","valuesInAxis","makeColumnLayout","seriesInfoList","axisExtent","bandWidth","minGap","extentSpan","scaleSpan","barWidth","barMaxWidth","barMinWidth","isInLargeMode","barGap","barCategoryGap","defaultBarGap","doCalBarWidthAndOffset","columnsMap","seriesInfo","axisKey","columnsOnAxis","stacks","stackId","categoryGapPercent","columnCount","categoryGap","barGapPercent","autoWidthCount","autoWidth","column","minWidth","finalWidth","widthSum","lastColumn","retrieveColumnLayout","barWidthAndOffset","ORIGIN_METHOD","RATE","THROTTLE_TYPE","throttle","debounce","currCall","lastCall","lastExec","timer","debounceNextCall","exec","cbArgs","thisDelay","thisDebounce","debounceDelay","createOrUpdate","fnAttr","throttleType","originFn","lastThrottleType","lastRate","clear","handleSeriesLegacySelectEvents","eventPostfix","ecIns","legacyEventName","selected","handleLegacySelectEvents","messageCenter","LABEL_LAYOUT_BASE_PROPS","LABEL_LAYOUT_DIRTY_BIT_OTHERS","LABEL_LAYOUT_DIRTY_BIT_OBB","LABEL_LAYOUT_DIRTY_ALL","setLabelLayoutDirty","labelGeometry","dirtyOrClear","dirtyBits","isLabelLayoutDirty","ensureLabelLayoutWithGeometry","labelLayout","computeLabelGeometry","rawTransform","outLocalRect","labelStyleExt","marginForce","minMarginForce","marginDefault","marginType","_tmpLabelMargin","outGlobalRect","computeLabelGeometry2","rawLocalRect","labelLayoutApplyTranslation","globalRect","obb","newLabelLayoutWithGeometry","newBaseWithDefaults","ensureOBB","hideOverlap","labelList","displayedLabels","hideEl","labelItem","labelIntersect","baseLayoutInfo","targetLayoutInfo","intersectOpt","LegendVisualProvider","getDataWithEncodedVisual","dataWithEncodedVisual","platform","decalColor","themeColor","lightThemeColor","globalDefault","internalOptionCreatorMap","registerInternalOptionCreator","concatInternalOptions","newCmptOptionList","internalOptionCreator","internalOptions","reCreateSeriesIndices","assertSeriesInitialized","initBase","OPTION_INNER_KEY","OPTION_INNER_VALUE","GlobalModel","theme","optionManager","optionPreprocessorFuncs","innerOpt","normalizeSetOptionInput","optionChanged","baseOption","timelineOption","mediaOptions","mediaOption","componentsMap","componentsCount","newCmptTypes","newCmptTypeMap","replaceMergeMainTypeMap","componentOption","mainTypeInReplaceMerge","visitComponent","oldCmptList","mergeMode","modelUtil.mappingToExists","modelUtil.setComponentTypeToKeyInfo","optionsByMainType","cmptsByMainType","cmptsCountByMainType","tooltipExists","isSeriesType","ComponentModelClass","extraOpt","optInMainType","realLen","metNonInner","modelUtil.isComponentIdInternal","cmpt","cmpts","queryByIdOrName","filterBySubType","queryCond","getQueryCond","doFilter","indexAttr","idAttr","nameAttr","ctxForAll_1","cbForAll_1","nameStr","modelUtil.convertOptionIdName","oneSeries","rawSeriesIndex","newSeriesIndices","seriesRawIdx","componentTypes","components","isNotTargetSeries","seriesIndices","airaOption","mergeTheme","notMergeColorLayer","themeItem","keyMap_1","idOrNameItem","idName","idName_1","availableMethods","ExtensionAPI","ecInstance","QUERY_REG","OptionManager","rawOption","dataset","optionBackup","newParsedOption","parseRawOption","isRecreate","timelineOptions","timelineModel","ecWidth","ecHeight","mediaList","mediaDefault","applyMediaQuery","indicesEquals","isNew","declaredBaseOption","timelineOnRoot","timelineOptionsOnRoot","mediaOnRoot","hasMedia","hasTimeline","singleMedia","doPreprocess","media","preProcess","realMap","applicable","matched","operator","realAttr","real","expect","indices1","indices2","POSSIBLE_STYLES","compatEC2ItemStyle","itemStyleOpt","normalItemStyleOpt","emphasisItemStyleOpt","convertNormalEmphasis","optType","useExtend","normalOpt","emphasisOpt","removeEC3NormalStatus","compatTextStyle","labelOptSingle","modelUtil.TEXT_STYLE_OPTIONS","textPropName","compatEC3CommonStyles","processSeries","seriesOpt","markPoint","markLine","markArea","edgeData","mpData","mlData","toArr","toObj","globalCompatStyle","isTheme","axisName","axisOpt","parallelOpt","parallelAxisDefault","calendarOpt","radarOpt","geoOpt","regionObj","timelineOpt","toolboxOpt","featureOpt","get","compatLayoutProperties","LAYOUT_PROPERTIES","COMPATITABLE_COMPONENTS","BAR_ITEM_STYLE_MAP","compatBarItemStyle","itemStyle","oldName","newName","compatPieLabel","compatSunburstState","compatGraphFocus","traverseTree","globalBackwardCompat","compatStyle","pointerColor","highlightPolicy","componentName","dataStack","stackInfoMap","stack","stackInfoList","stackInfo","firstSeries","stackOrder","calculateStack","targetStackInfo","idxInStack","resultVal","resultNaN","targetData","isStackedByIndex","stackStrategy","v0","byValue","stackedDataRawIndex","stackedOver","ComponentView","isBlur","defaultStyleMappers","defaultColorKey","getStyleMapper","stylePath","styleMapper","getDefaultColorKey","colorKey","seriesStyleTask","styleModel","globalStyle","decalOption","colorCallback","hasAutoColor","colorPalette","dataParams","sharedModel","dataStyleTask","existsStyle","dataColorPaletteTask","paletteScopeGroupByType","colorScope","dataAll","idxMap","fromPalette","defaultLoading","mask","graphic.Text","labelRect","graphic.Arc","Scheduler","dataProcessorHandlers","visualHandlers","taskRecord","overallTask","pCtx","incremental","pipelineId","dataLen","pipelineMap","stageTaskMap","record","renderTask","stageHandlers","unfinished","stageHandler","stageHandlerRecord","seriesTaskMap","overallNeedDirty_1","stub","needSetDirty","performArgs_1","oldSeriesTaskMap","newSeriesTaskMap","getTargetSeries","seriesTaskPlan","seriesTaskReset","seriesTaskCount","overallTaskReset","oldAgentStubMap","newAgentStubMap","overallProgress","shouldOverallTaskDirty","createStub","stubReset","stubOnDirty","visualType","detectSeriseType","stubProgress","resetDefines","makeSeriesTaskProgress","singleSeriesTaskProgress","resetDefineIdx","resetDefine","legacyFunc","ecModelMock","apiMock","mockMethods","cond","Clz","axisCommon","matrixAxis","radar","ECEventProcessor","cptQuery","dataQuery","otherQuery","condCptType","suffixes_1","dataKeys_1","reserved","propSuffix","suffixPos","eventInfo","packedEvent","check","host","propOnHost","SYMBOL_PROPS_WITH_CB","SYMBOL_PROPS","seriesSymbolTask","symbolOptions","symbolOptionsCb","hasCallback","symbolPropName","symbolPropsCb","dataEach","dataSymbolTask","getItemVisualFromData","getVisualFromData","findEventDispatcher","returnFirstMatch","found","wmUniqueIndex","supportDefineProperty","WeakMap","decalMap","decalCache","decalKeys","createOrUpdatePatternFromDecal","decalObject","isSVG","oldPattern","decalOpt","setPatternnSource","isValidKey","cache","dashArrayX","normalizeDashArrayX","dashArrayY","normalizeDashArrayY","symbolArray","normalizeSymbolArray","lineBlockLengthsX","getLineBlockLengthX","lineBlockLengthY","getLineBlockLengthY","svgRoot","pSize","getPatternSize","brushDecal","xlen","symbolRepeats","ySum","yId","yIdTotal","xId0","symbolYId","xId1","xId1Total","xSum","top_1","symbolXId","brushSymbol","symbol","symbolVNode","isAllString","dash","dashValue","isAllNumber","dashValue_1","blockLength","decalVisual","decal","lifecycle","implsStore","registerImpl","impl","getImpl","TEST_FRAME_REMAIN_TIME","PRIORITY_PROCESSOR_SERIES_FILTER","PRIORITY_PROCESSOR_DATASTACK","PRIORITY_PROCESSOR_FILTER","PRIORITY_PROCESSOR_DEFAULT","PRIORITY_PROCESSOR_STATISTIC","PRIORITY_VISUAL_LAYOUT","PRIORITY_VISUAL_PROGRESSIVE_LAYOUT","PRIORITY_VISUAL_GLOBAL","PRIORITY_VISUAL_CHART","PRIORITY_VISUAL_COMPONENT","PRIORITY_VISUAL_CHART_DATA_CUSTOM","PRIORITY_VISUAL_POST_CHART_LAYOUT","PRIORITY_VISUAL_BRUSH","PRIORITY_VISUAL_ARIA","PRIORITY_VISUAL_DECAL","PRIORITY","IN_MAIN_PROCESS_KEY","MAIN_PROCESS_VERSION_KEY","PENDING_UPDATE","STATUS_NEEDS_UPDATE_KEY","ACTION_REG","CONNECT_STATUS_KEY","CONNECT_STATUS_PENDING","CONNECT_STATUS_UPDATING","CONNECT_STATUS_UPDATED","createRegisterEventWithLowercaseECharts","toLowercaseNameAndCallEventful","createRegisterEventWithLowercaseMessageCenter","MessageCenter","messageCenterProto","prepare","prepareView","updateDirectly","updateMethods","doConvertPixel","updateStreamModes","doDispatchAction","flushPendingActions","triggerUpdatedEvent","bindRenderedEvent","bindMouseEvent","render","renderComponents","renderSeries","createExtensionAPI","enableConnect","markStatusToUpdate","applyChangedStates","updateMainProcessVersion","ECharts","defaultRenderer","defaultCoarsePointer","defaultUseDirtyRect","zrender.init","prioritySortFunc","visualFuncs","dataProcessorFuncs","silent","remainTime","notMerge","lazyUpdate","replaceMerge","transitionOpt","updateParams","themeStorage","backwardCompat","excludeComponents","excludesComponentViews","url","isSvg","groupId","MAX_NUMBER","connectedGroups","left_1","right_1","bottom_1","canvasList_1","dpr_1","chart","targetCanvas","zr_1","content_1","graphic.Image","findResult","modelUtil.parseFinder","models","parsedFinder","dataIndexInside","MOUSE_EVENT_NAMES","eveName","isGlobalOut","dataModel","publicEventTypeMap","_","modelUtil.setAttribute","DOM_ATTRIBUTE_KEY","needPrepare","loadingEffects","eventObj","connectionEventRevertMap","actions","flush","isComponent","viewList","viewMap","doPrepare","requireNewView","viewId","classType","Clazz","callView","excludeSeriesId","excludeSeriesIdMap","modelId","isExcluded","coordSysMgr","clearColorPalette","componentDirtyList","componentView","seriesDirtyMap","chartView","doConvertPixelImpl","coordSysList","chartsMap","escapeConnect","actionInfo","cptTypeTmp","cptType","payloads","batched","eventObjBatch","actionResultBatch","nonRefinedEventType","isSelectChange","isHighDown","batchItem","actionResult","modelUtil.preParseFinder","refinedEvent","eventContent","pendingActions","actionType","allocateZlevels","componentZLevels","seriesZLevels","hasSeparateZLevel","zlevelKey","zLevels","lastSeriesZLevel_1","lastSeriesKey_1","dirtyList","clearStates","updateZ","updateStates","dirtyMap","updateBlend","updateHoverLayerStatus","graphic.isElementRemoved","applyElementStates","newStates","elCount","blendMode","zInfo","graphic.retrieveZInfo","graphic.traverseUpdateZ","stateAnimationModel","stateTransition","prevStates","modelInfo","updateConnectedChartsStatus","charts","otherChart","action_1","otherCharts_1","echartsProto","wrapped","args2","idBase","existInstance","getInstanceByDom","modelUtil.getAttribute","registerTheme","registerPreprocessor","preprocessorFunc","registerProcessor","priority","processor","normalizeRegister","registerPostInit","postInitFunc","registerUpdateLifecycle","registerPostUpdate","postUpdateFunc","registerAction","arg0","arg1","action","publicEventType","refineEvent","publishNonRefinedEvent","createEventType","actionOrEventType","registerCoordinateSystem","coordSysCreator","registerLayout","layoutTask","registerVisual","visualTask","registeredTasks","targetList","defaultPriority","registerLoading","loadingFx","registerMap","mapName","geoJson","specialAreas","registerTransform","loadingDefault","makeSelectChangedEvent","darkTheme","extensions","extensionRegisters","ComponentViewClass","SeriesModelClass","ChartViewClass","renderItem","painterType","PainterCtor","use","ext","singleExt","OUTER_BOUNDS_DEFAULT","OUTER_BOUNDS_CLAMP_DEFAULT","GridModel","outerBoundsCp","AxisModelCommonMixin","CartesianAxisModel","categoryAxis","valueAxis","timeAxis","logAxis","axisDefault","uidBase","OrdinalMeta","categories","getName","category","needCollect","AXIS_TYPES","getAxisBreakHelper","axisModelCreator","registers","BaseAxisModelClass","extraDefaultOption","AxisModel","getAxisType","thisOption","isIntervalOrLogScale","intervalScaleNiceTicks","spanWithBreaks","splitNumber","minInterval","maxInterval","getIntervalPrecision","niceTickExtent","fixExtent","increaseInterval","ScaleCalculator","brkCtx","logTransform","noClampNegative","loggedBase","Scale","setting","thisExtent","breakOptionList","parsed","isBlank","OrdinalScale","scaleHelper.contain","ticks","info","infoOrdinalNumbers","ordinalsByTick","ticksByOrdinal","tickNum","allCategoryLen","ordinalNumber","unusedOrdinal","ticksByOrdinalNumber","tickNumber","ordinalNumbersByTick","cateogry","roundNumber","numberUtil.round","IntervalScale","helper.contain","helper.getIntervalPrecision","intervalPrecision","safeLimit","estimateNiceMultiple","tickVal","targetTick","moreMultiple","lastNiceTick","minorTicks","nextTick","prevTick","minorTicksGroup","minorInterval","minorIntervalPrecision","minorTick","numberUtil.getPrecision","dataNum","formatUtil.addCommas","span","helper.intervalScaleNiceTicks","expandSize","intervalPrecition","bisect","TimeScale","settings","labelFormatter","extent0Unit","innerTicks","getIntervalTicks","extent1Unit","upperUnitIndex","maxLevel","approxTickNum","scaleIntervalsLen","scaleIntervals","scaleHelper.getIntervalPrecision","isPrimaryUnitValueAndGreaterSame","valueA","valueB","getDateInterval","approxInterval","daysInMonth","getMonthInterval","APPROX_ONE_MONTH","getHourInterval","getMinutesAndSecondsInterval","isMinutes","getMillisecondsInterval","numberUtil.nice","getFirstTimestampOfUnit","timestamp","unitName","createEstimateNiceMultiple","setMethodName","dateMethodInterval","tmpDate","tmpTime","approxTimeInterval","targetValue","bottomUnitName","extentSpanWithBreaks","unitNames","iter","addTicksInSpan","minTimestamp","maxTimestamp","getMethodName","isDate","dateTime","addLevelTicks","lastLevelTicks","levelTicks","newAddedTicks","isFirstLevel","startTick","endTick","getterName","setterName","levelsTicks","currentLevelTicks","tickCount","lastLevelTickCount","primaryTimeUnit","nextPrimaryTimeUnit","levelTicksRemoveDuplicated","tickValue","targetTickNum","levelsTicksInExtent","fixRound","mathFloor","mathCeil","mathLog","LogScale","originalExtent","roundingCriterion","powVal","vBreak","fixRoundingError","loggedExtent","loggedOther","numberUtil.quantity","err","niceExtent","originalVal","ScaleRawExtentInfo","isOrdinal","axisMinValue","modelMinRaw","parseAxisModelMinMax","modelMaxRaw","boundaryGap","boundaryGapArr","dataMin","dataMax","axisDataLen","boundaryGapInner","minFixed","maxFixed","determinedMin","determinedMax","minMaxName","DATA_MIN_MAX_ATTR","DETERMINED_MIN_MAX_ATTR","ensureScaleRawExtentInfo","rawExtentInfo","minMax","getScaleExtent","scaleType","rawExtentResult","barSeriesModels","isBaseAxisAndHasBarSeries_1","adjustedScale","adjustScaleForOverflow","axisLength","barsOnCurrentAxis","minOverflow","maxOverflow","totalOverFlow","oldRange","oldRangePercentOfNew","overflowBuffer","niceScaleExtent","inModel","extentInfo","isIntervalOrTime","retrieveAxisBreaksOption","createScaleByModel","ifAxisCrossZero","makeLabelFormatter","parsed_1","getAxisRawValue","scaleBreakHelper_1","getOptionCategoryInterval","shouldShowAllLabels","getDataDimensionsOnAxis","dataDimMap","unionAxisExtentFromData","seriesExtent","isNameLocationCenter","nameLocation","shouldAxisShow","Cartesian","zrUtil.filter","cartesian2DDimensions","canCalculateAffineTransform","Cartesian2D","xAxisScale","yAxisScale","xScaleExtent","yScaleExtent","xScaleSpan","yScaleSpan","scaleX","scaleY","translateX","translateY","axisX","axisY","data1","data2","zoneDiag1","zoneDiag2","zone","xVal","yVal","xAxis","yAxis","xScale","yScale","xAxisExtent","yAxisExtent","xExtent","yExtent","modelInner","axisInner","AxisTickLabelComputingKind","createAxisLabelsComputingContext","tickValuesToNumbers","nums","createAxisLabels","custom","labelFormatter_1","extent_1","tickNumbers","numval","makeCategoryLabels","makeRealNumberLabels","createAxisTicks","tickModel","extent_2","makeCategoryTicks","labelModel","makeCategoryLabelsActually","labelsCache","ensureCategoryLabelCache","optionLabelInterval","isEstimate","result_1","axisCacheGet","labels","numericLabelInterval","makeLabelsByCustomizedCategoryInterval","makeAutoCategoryInterval","makeLabelsByNumericCategoryInterval","axisCacheSet","ticksCache","ensureCategoryTickCache","optionTickInterval","tickCategoryInterval","labelsResult","initAxisCacheMethod","result_2","calculateCategoryInterval","fetchAutoCategoryIntervalCalculationParams","ordinalScale","ordinalExtent","maxCount","unitSpan","unitW","unitH","maxW","maxH","textContain.getBoundingRect","dw","dh","calculateCategoryIntervalTryDetermine","lastInterval","calculateCategoryIntervalDealCache","lastAutoInterval","lastTickCount","categoryInterval","onlyTick","showAllLabel","includeMinLabel","includeMaxLabel","addItem","tickObj","rawLabel","NORMALIZED_EXTENT","Axis","fixExtentWithBands","ticksCoords","alignWithLabel","fixOnBandTicksCoords","minorTickModel","minorTicksCoords","nTick","ticksLen","diffSize","crossLen","shift_1","ticksItem","littleThan","Axis2D","coordExtent","AXIS_BREAK_EXPAND_ACTION_TYPE","DEFAULT_CENTER_NAME_MARGIN_LEVELS","DEFAULT_ENDS_NAME_MARGIN_LEVELS","getLabelInner","getTickInner","AxisBuilderSharedContext","resolveAxisNameOverlap","recordMap","records","resetOverlapRecordToShared","shared","labelLayoutList","labelInfoList","stOccupiedRect","useStOccupiedRect","hasAxisName","layoutInfo","transGroup","matrixUtil.invert","_stTransTmp","matrixUtil.identity","matrixUtil.mul","_stLabelRectTmp","sortByDim","sortByValue","info1","info2","axisLineX","axisLineWidth","matrixUtil.create","resolveAxisNameOverlapDefault","nameLayoutInfo","nameMoveDirVec","thisRecord","moveIfOverlap","moveIfOverlapByLinearLabels","basedLayoutInfo","movableLayoutInfo","moveDirVec","baseLayoutInfoList","baseDirVec","sameDir","labelInfo","AxisBuilder","raw","axisModelDefaultOption","nameMoveOverlapOption","transformGroup","axisPartNameMap","extraParams","AXIS_BUILDER_AXIS_PART_NAMES","partName","builders","axisRotation","textRotation","rotationDiff","eventData","tooltipOpt","local","shown","pt1","pt2","lineStyle","pathBaseProp","graphic.subPixelOptimizeLine","arrows","arrowSize","arrowOffset","symbolWidth_1","symbolHeight_1","pt","needCallLayout","dealLastTickLabelResultReusable","layOutAxisTickLabel","ticksEls","buildAxisMajorTicks","syncLabelIgnoreToMajorTicks","buildAxisMinorTicks","sharedRecord","nameDirection","gapStartEndSignal","mt","matrixUtil.rotate","nameRotation","axisNameAvailableWidth","endTextLayout","truncateOpt","nameMarginLevel","graphic.setTooltipConfig","nameLayout","axisLabelBuildResultExists","buildAxisLabel","updateAxisLabelChangableProps","optionHideOverlap","fixMinMaxLabelShow","textRotate","onLeft","deal","showMinMaxLabel","outmostLabelIdx","innerLabelIdx","outmostLabelLayout","innerLabelLayout","ignoreEl","showMinLabel","showMaxLabel","labelsLen","tickEls","tickEl","tickInner","createTicks","tickTransform","tickEndCoord","tickLineStyle","anidPrefix","tickCoord","lineStyleModel","tickDirection","minorTickLineStyle","minorTicksEls","axisLabelsCreationContext","noPxChangeTryDetermine","canDetermine","axisLabelBuildResultSet","show","labelGroup","axisLabelCreationCtx","labelRotation","rawCategoryData","labelEls","triggerEvent","z2Min","z2Max","formattedLabel","itemLabelModel","rawCategoryItem","textColor","align","alignMin","alignMax","verticalAlignMin","verticalAlignMax","addBreakEventHandler","labelMargin","geometry","labelEl","_tmpLayoutEl","_tmpLayoutElReset","visualBreak","otherAxisOnZeroOf","rawAxisPosition","axisPosition","rectBound","axisOffset","posBound","onZeroCoord","dirMap","zrUtil.retrieve","isCartesian2DInjectedAsDataCoordSys","findAxisModels","axisModelMap","createCartesianAxisViewCommonPartBuilder","gridRect","cartesians","defaultNameMoveOverlap","layoutResult","axisLineAutoShow","axisTickAutoShow","updateCartesianAxisViewCommonPartBuilder","axisBuilder","newRaw","alignScaleTicks","alignToScale","intervalScaleProto","alignToTicks","alignToNicedTicks","alignToSplitNumber","alignToInterval","scaleExtent","isMinFixed","isMaxFixed","nicedSplitNumber","t0","XY_TO_MARGIN_IDX","Grid","gridModel","axesMap","updateAxisTicks","alignTo","axesIndices","axisNeedsAlign","onZeroRecords","fixAxisOnZero","beforeDataProcessing","layoutRef","coordsList","optionContainLabel","updateAllAxisExtentTransByGridRect","axisBuilderSharedCtx","createAxisBiulders","noPxChange","layOutGridByOuterBounds","prepareOuterBounds","outerBoundsRect","parsedOuterBoundsContain","outerBoundsClamp","createOrUpdateAxesView","axesMapOnDim","xAxisIndex","yAxisIndex","coordList","grid","axisPositionUsed","axesCount","createAxisCreator","isAxisUsedInTheGrid","categorySortInfo","axesModelMap","unionExtent","baseAxes","otherAxes","otherAxis","grids","otherAxisDim","onZero","onZeroAxisIndex","canOnZeroToAxis","getOnZeroRecordKey","updateAxisTransform","coordBase","axisExtentSum","updateAxisExtentTransByGridRect","gridXY","gridWH","outerBoundsContain","fillLabelNameOverflowOnOneDimension","fillMarginOnOneDimension","xyIdx","proportion","itemRect","overflow1","overflow2","applyProportion","minIdx","maxIdx","resolveAxisNameOverlapForGrid","axisList","isDetermine","nameMarginLevelMap","calcNameMarginLevel","rawRridRect","optionOuterBoundsMode","optionOuterBoundsContain","perpendicularDim","perpenRecord","collect","collectAxesInfo","collectSeriesInfo","globalTooltipModel","globalAxisPointerModel","linksOption","linkGroups","coordSysKey","makeKey","axesInfoInCoordSys","coordSysModel","baseTooltipModel","saveTooltipAxisInfo","triggerAxis","cross","tooltipAxes","fromTooltip","triggerTooltip","axisPointerModel","axisPointerShow","isHandleTrigger","makeAxisPointerModel","snap","triggerEmphasis","involveSeries","axisInfo","groupIndex","getLinkGroupIndex","linkGroup","tooltipAxisPointerModel","volatileOption","field","labelOption","tooltipAxisPointerLabelShow","crossStyle","seriesTooltipTrigger","seriesTooltipShow","linkOption","checkPropInLink","linkPropValue","axisPropValue","fixValue","getAxisInfo","useHandle","coordSysAxesInfo","getAxisPointerModel","axisPointerClazz","AxisView","axisPointerModelHelper.fixValue","axisPointer","forceRender","axisPointerModelHelper.getAxisPointerModel","rectCoordAxisBuildSplitArea","axisView","axisGroup","splitAreaModel","areaStyleModel","areaColors","areaColorsLen","lastSplitAreaColors","newSplitAreaColors","colorIndex","cIndex","areaStyle","rectCoordAxisHandleRemove","selfBuilderAttrs","CartesianAxisView","oldAxisGroup","axisElementBuilders","isInitialSortFromBarRacing","graphic.groupTransition","splitLineModel","lineColors","showMinLine","showMaxLine","isHorizontal","minorSplitLineModel","CartesianXAxisView","CartesianYAxisView","GridView","extraOption","install","take","resourceKey","userKey","release","uKey","isTaken","echarts.registerAction","IRRELEVANT_EXCLUDES","onIrrelevantElement","targetComponent","eventElComponent","eventElCoordSys","eventElCmptZInfo","targetCmptZInfo","RoamController","mousedownHandler","mousemoveHandler","mouseupHandler","mousewheelHandler","pinchHandler","controlType","rawOpt","zInfoParsed","triggerInfo","addRoamZrListener","removeRoamZrListener","roamTrigger","inArea","forReverse","eventTool.isMiddleOrRightButtonOnMouseUpDown","eventConsumed","interactionMutex.isTaken","isAvailableBehavior","oldX","oldY","trigger","shouldZoom","shouldMove","absWheelDeltaDelta","factor","absDelta","scrollDelta","controller","behaviorToCheck","contollerEvent","innerZrStore","ensureZrStore","roam","listenerList","currZInfo","ensureUniformListener","removeUniformListener","uniform","updateViewOnPan","controllerHost","updateViewOnZoom","zoomDelta","zoomX","zoomY","zoomLimit","newZoom","clampByZoomLimit","zoomScale","zoomTransformableByOrigin","getCenterCoord","updateCenterAndZoomInAction","previousZoom","deltaZoom","zoom","zoomMin","zoomMax","View","rawParent","centerCoord","rawRect","centerOption","rawTransformMatrix","roamTransform","defaultCenter","roamTransformable","rawTransformable","dummyTransformable","noRoam","vector.copy","getCoordSys","pixel","linkSeriesData","datas","linkAll","transferInjection","cloneShallowInjection","changeInjection","isMainData","linkSingle","getLinkedData","getLinkedDataAll","categoryFilter","legendModels","graphSeries","categoriesData","categoryNames","categoryVisual","paletteScope","categoryNameIdxMap","symbolVisualList","symbolVisual","categoryIdx","categoryStyle","visualList","graphEdgeVisual","nodeStyle","KEY_DELIMITER","getAutoCurvenessParams","createCurveness","appendLength","autoCurvenessParmas","curvenessList","getKeyOfEdges","n1","n2","getOppositeKey","getEdgeFromMap","getTotalLengthBetweenNodes","getEdgeMapLengthWithKey","lenV","edgeMap","initCurvenessList","createEdgeMapForCurveness","oppositeEdges","getCurvenessForEdge","needReverse","autoCurvenessParams","isArrayParam","edgeArray","edgeIndex","totalLen","curKey","parityCorrection","oppositeKey","resValue","simpleLayout","node","simpleLayoutEdge","curveness","zrUtil.retrieve3","vec2.clone","graphSimpleLayout","data_1","dimensions_1","getNodeGlobalScale","nodeScaleRatio","groupZoom","roamZoom","nodeScale","getSymbolSize","_symbolRadiansHalf","circularLayout","basedOn","draggingNode","pointer","nodeData","tempX","tempY","vec2.scale","circularRotateLabel","rotateNodeLabel","_layoutNodesBasedOn","x12","y12","unitAngle","radianHalf","sumRadian","symbolRadianHalf","halfRemainRadian","nodeModel","isLeft","graphCircularLayout","vec2.scaleAndAdd","forceLayout","inNodes","inEdges","nodes","edges","gravity","initialFriction","friction","beforeStepCallback","afterStepCallback","v12","nLen","vec2.sub","vec2.len","vec2.set","repFact","vec2.copy","graphForceLayout","preservedPoints_1","graph_1","nodeData_1","forceModel","initLayout","nodeDataExtent_1","edgeDataExtent_1","repulsion","edgeLength","repulsionArr_1","edgeLengthArr_1","nodes_1","rep","edgeModel","forceInstance","getViewRect","createViewCoordSys","positions","bbox.fromPoints","bbWidth","bbHeight","viewCoordSys","straightLineProto","bezierCurveProto","graphic.BezierCurve","StraightLineShape","CurveShape","isStraightLine","ECLinePath","SYMBOL_CATEGORIES","makeSymbolTypeKey","symbolCategory","makeSymbolTypeValue","lineData","symbolKeepAspect","symbolSizeArr","symbolUtil.normalizeSymbolSize","symbolOffsetArr","symbolUtil.normalizeSymbolOffset","symbolUtil.createSymbol","createLine","setLinePoints","linePoints","emphasisLineStyle","blurLineStyle","selectLineStyle","lineState","lineStateStyle","stateStyle","labelNormalModel","linePath","lineGroup","symbolFrom","symbolTo","invScale","parentNode","fromPos","toPos","vector.sub","vector.normalize","setSymbolRotation","specifiedRotation","tangent","distanceX","distanceY","halfPercent","cp","LineDraw","LineCtor","LineGroup","lineDraw","oldLineData","isEffectObject","itemLayout","lineNeedsDraw","newLineData","isPointNaN","pts","v3","curveTool.quadraticAt","vec2.distSquare","intersectCurveCircle","curvePoints","radiusSquare","nextDiff","adjustEdge","tmp0","curveTool.quadraticSubdivide","pts2","fromSymbol","toSymbol","originalPoints","getThumbnailBridge","isViewCoordSys","GraphView","symbolDraw","mainGroup","isForceLayout","thumbnailInfo","groupNewProp","layoutAnimation","firstRendered","clipRect","bridge","bridgeGroup","symbolNodes","lineNodes","symbolGroup","subShape","subThumbnail","lineThumbnail","generateNodeKey","Graph","directed","nodesMap","GraphNode","edgesMap","GraphEdge","startNode","edgeType","queue","currentNode","otherNode","adjacentEdge","connectedEdgesMap","connectedNodesMap","sourceNodesQueue","targetNodesQueue","nodeIteratorIndex","sourceNode","sourceNodeInEdges","inEdge","inEdgeDataIndex","targetNode","targetNodeOutEdges","len_2","outEdge","outEdgeDataIndex","sourceNodes","targetNodes","createGraphDataProxyMixin","hostName","dataName","createGraphFromNodeEdge","beforeLink","linkNameList","validEdges","linkCount","coordSysCtor","GraphSeriesModel","getCategoriesData","categoriesModels","categoryModel","oldGetModel","newGetModel","resolveParentPath","newPathArr","sourceName","nodeMarkup","edgeVisual","createView","graphView","sliderMove","handleEnds","handleIndex","minSpan","maxSpan","restrict","handleSpan","originalDistSign","getSpanSign","extentMinSpan","realExtent","currDistSign","BRUSH_PANEL_GLOBAL","COVER_Z","UNSELECT_THRESHOLD","MIN_RESIZE_LINE_WIDTH","MUTEX_RESOURCE_KEY","DIRECTION_MAP","CURSOR_MAP","DEFAULT_BRUSH_OPT","baseUID","BrushController","pointerHandlers","brushOption","interactionMutex.take","interactionMutex.release","panelOpts","panels_1","thisGroup","coverConfigList","coverConfig","tmpIdPrefix","oldCovers","newCovers","creatingCover","oldGetKey","getKey","addOrUpdate","remove","cover","newIndex","oldIndex","newBrushInternal","endCreating","createCover","updateCoverAfterCreation","clearCovers","coverRenderers","coverRenderer","getCoverRenderer","updateCoverShape","getPanelByPoint","localCursorPoint","panels","panel","pn","getPanelByCover","panelId","covers","areas","shouldShowCover","getTrackEnds","tail","createBaseRectCover","rectRangeConverter","edgeNameSequences","makeStyle","driftRect","nameSequence","updateBaseRect","localRange","handleSize","xa","ya","x2a","y2a","widtha","heighta","updateRectShape","updateCommon","transformable","mainEl","globalDir","getGlobalDirection1","getGlobalDirection2","pointsToRect","clipByPanel","formatRectRange","graphic.getTransform","localDirName","inverseMap","graphic.transformDirection","localDirNameSeq","dirNameSequence","rectRange","localDelta","toLocalDelta","dirName","ind","driftPolygon","localD","localZero","xmin","ymin","xmax","ymax","resetCursor","isOutsideZrArea","currPanel","preventDefault","rawE","mainShapeContain","updateCoverByMouse","isEnd","thisBrushOption","eventParams","determineBrushType","coverBrushOption","brushType","handleDragEnd","getLineRenderer","returnInput","localTrack","ends","graphic.Polyline","graphic.Polygon","xyIndex","otherExtent","makeRectPanelClipPath","normalizeRect","localPoints","graphicUtil.clipPointsByRect","makeLinearBrushOtherExtent","specifiedXYIndex","brushWidth","makeRectIsTargetByCursor","BaseAxisPointer","handle","elOption","graphicKey","moveAnimation","doUpdateProps","updateMandatoryProps","isCategoryAxis","useSnap","animationThreshold","seriesDataCount","axisPointerModelHelper.getAxisInfo","pointerOption","pointerEl","graphic","updateLabelShowHide","handleModel","graphic.createIcon","throttleUtil.createOrUpdate","getHandleTransProps","trans","payloadInfo","throttleUtil.clear","xDimIndex","animationModel","propsEqual","lastProps","newProps","equals_1","buildElStyle","axisPointerType","buildLabelElOption","labelPos","getValueLabel","paddings","textRect","confineInContainer","bgColor","seriesDataIndices","params_1","axisHelper.getAxisRawValue","idxItem","getTransformedPosition","graphic.applyTransform","buildCartesianSingleLabelElOption","textLayout","makeLineShape","makeRectShape","CartesianAxisPointer","getCartesian","pixelValue","elStyle","viewHelper.buildElStyle","pointerShapeBuilder","cartesianAxisHelper.layout","viewHelper.buildCartesianSingleLabelElOption","viewHelper.getTransformedPosition","currPosition","cursorOtherValue","cursorPoint","tooltipOptions","viewHelper.makeLineShape","getAxisDimIndex","viewHelper.makeRectShape","AxisPointerModel","register","initGlobalListeners","useHandler","doEnter","onLeave","dis","makeDispatchAction","dispatchTooltipFinally","pendings","showLen","hideLen","actuallyPayload","dispatchAction","currTrigger","unregister","AxisPointerView","triggerOn","globalListener.register","globalListener.unregister","findPointFromSeries","valueAxisDim","baseAxisDim","baseDataOffset","baseDim","stackedData","axisTrigger","illegalPoint","isIllegalPoint","inputAxesInfo","axesInfo","shouldHide","outputPayload","showValueMap","dataByCoordSys","updaters","showPointer","showTooltip","coordSysContainsPoint","inputAxisInfo","findInputAxisInfo","processOnAxis","linkTriggers","tarAxisInfo","tarKey","srcAxisInfo","srcKey","srcValItem","makeMapperParam","updateModelActually","dispatchTooltipActually","dispatchHighDownActually","newValue","noSnap","outputFinder","buildPayloadsBySeries","payloadBatch","snapToValue","seriesNestestValue","modelHelper.makeKey","coordSysItem","outputAxesInfo","valItem","highDownKey","lastHighlights","newHighlights","toHighlight","toDownplay","installSimple","installAxisPointer","DATA_ZOOM_AXIS_DIMENSIONS","SERIES_COORDS","isCoordSupported","coordType","getAxisMainType","findEffectedDataZooms","axisRecords","effectedModels","effectedModelMap","dataZoomModel","addToEffected","foundNewLink","processSingle","isLinked","dataZoom","markAxisControlled","isLink","axisIdxArr","DataZoomAxisInfo","axisCmptIdx","DataZoomModel","inputRawOption","retrieveRawOption","settledOption","optionOrient","targetAxisIndexMap","hasAxisSpecified","refering","needAuto","axisModels","setParallelAxis","gridModel_1","axModel","globalOption","rangePropMode","rangeModeInOption","percentSpecified","valueSpecified","firstAxisModel","axisProxy","firstProxy","axisDimList","SelectDataZoomModel","DataZoomView","SelectDataZoomView","numberUtil.asc","AxisProxy","axisMainType","percentExtent","percentWindow","valueWindow","hasPropModeValue","boundPercent","boundValue","numberUtil.linearMap","spans","restrictSet","fromWindow","toWindow","fromExtent","toExtent","toValue","suffix","targetSeries","calculateDataExtent","dataWindow","filterMode","seriesData","store_1","dataDimIndices_1","leftOut","rightOut","thisHasValue","thisLeftOut","thisRightOut","isInWindow","minMaxSpan","percentSpan","valueSpan","numberUtil.getPixelPrecision","dataZoomProcessor","eachAxisModel","proxyList","seriesModelMap","percentRange","valueRange","installDataZoomAction","installed","installCommon","SelectZoomModel","SelectZoomView","ToolboxFeature","features","registerFeature","getFeature","ToolboxModel","featureName","Feature","featureManager.getFeature","makeBackground","bgRect","ToolboxView","toolboxModel","itemSize","isVertical","featureOpts","featureNames","processFeature","featureModel","feature","isUserFeatureName","isToolboxFeature","createIconPaths","iconName","iconPaths","iconStyleModel","iconStyleEmphasisModel","icons","titles","iconsMap","titlesMap","pathEmphasisState","hoverStyle","defaultTextPosition","boxLayoutParams","listComponentHelper.makeBackground","icon","titleText","emphasisTextConfig","emphasisTextState","emphasisTextStyle","offsetX","offsetY","needPutOnTop","topOffset","SaveAsImage","title","$a","evt","base64Encoded","bstr","filename","u8arr","blob","cw","doc","html","tab","INNER_STACK_KEYWORD","radioTypes","MagicType","availableIcons","seriesOptGenreator","generateNewSeriesTypes","seriesId","newSeriesOpt","radio","newTitle","currentType","isStack","BLOCK_SPLITER","ITEM_SPLITER","groupSeries","seriesGroupByCategoryAxis","otherSeries","meta","assembleSeriesWithCategoryAxis","groups","tables","headers","columns","items","assembleOtherSeries","getContentFromModel","isTSVFormat","firstLine","itemSplitRegex","parseTSVContents","tsv","tsvLines","header","parseListContents","hasName","parseContents","blockMetaList","blockMeta","DataView","viewMain","textarea","optionToContent","contentToOption","htmlOrDom","zrUtil.isDom","buttonContainer","buttonStyle","closeButton","refreshButton","close","tryMergeDataOption","originalData","newVal","newValIsObject","shouldDeleteName","newSeriesOptList","push","newSnapshot","storedSnapshots","getStoreSnapshots","dataZoomId","snapshot","pop","head","RestoreOption","history.clear","INCLUDE_FINDER_MAIN_TYPES","BrushTargetManager","foundCpts","targetInfoBuilders","coordRange","coordConvert","diffProcessor","rangeOffset","getScales","getDefaultBrushType","brushHelper.makeRectPanelClipPath","brushHelper.makeRectIsTargetByCursor","brushHelper.makeLinearBrushOtherExtent","targetInfoList","areaPanelId","targetInfoMatchers","formatMinMax","modelUtilParseFinder","xAxisModels","yAxisModels","gridModels","gridModelMap","xAxesHas","yAxesHas","panelRectBuilders","geoModel","axisConvert","to","rangeOrCoordRange","xminymin","xmaxymax","xyMinMax","axisNameIndex","axisDiffProcessor","refer","scales","xyMinMaxCurr","xyMinMaxOrigin","sizeCurr","sizeOrigin","DATA_ZOOM_ID_BASE","DataZoomFeature","updateZoomBtnStatus","updateBackBtnStatus","handlers","eventParam","brushTargetManager","makeAxisFinder","setBatch","history.push","findDataZoom","dzModel","has","batch","nextActive","history.pop","dzFeatureModel","history.count","zoomActive","featureDataZoomPath","dzOptions","finderResult","buildInternalOptions","axisIndexPropName","newOpt","DataZoom","Restore","installDataZoomSelect","TooltipModel","shouldTooltipConfine","tooltipModel","confineOption","testStyle","styleProps","TRANSFORM_VENDOR","TRANSITION_VENDOR","toCSSVendorPrefix","styleVendor","styleProp","getComputedStyle","CSS_TRANSITION_VENDOR","CSS_TRANSFORM_VENDOR","gCssText","mirrorPos","assembleArrow","arrowPosition","borderWidth","arrowPos","positionStyle","transformStyle","rotateDeg","rotateRadian","arrowWH","rotatedWH","borderStyle","styleCss","assembleTransition","onlyFadeTransition","enableDisplayTransition","transitionCurve","transitionOption","transitionText","assembleTransform","toString","is3d","assembleFont","cssText","shadowColor","shadowBlur","assembleCssText","enableTransition","transitionDuration","boxShadow","borderName","camelCase","makeStyleCoord","zrX","zrY","zrPainter","zrViewportRoot","viewportRootOffset","TooltipHTMLContent","appendTo","alwaysShowContent","nearPointColor","styleCoord","content","arrow","arrowEl","enterable","style_1","transforms","ratioX","ratioY","TooltipRichContent","bounding","shadowOuterSize","calcShadowOuterSize","mathMaxWith0","proxyRect","TooltipView","tooltipContent","cmptRef","findComponentReference","pointInfo","tooltipCascadedModel","buildTooltipModel","seriesDispatcher_1","cmptDispatcher_1","singleTooltipModel","cbParamsList","articleMarkup","markupTextArrLegacy","itemCoordSys","axisItem","axisValue","axisValueLabel","axisPointerViewHelper.getValueLabel","axisSectionMarkup","cbParams","seriesTooltipResult","positionExpr","builtMarkupText","blockBreak","allMarkupText","positionDefault","tooltipTrigger","asyncTicket","isHTMLRenderMode","tooltipConfig","encodeHTMLContent","tooltipModelCascade","subTooltipModel","defaultHtml","nearPoint","params0","isTimeAxis","cbTicket","tooltipDataParams","defaultBorderColor","contentSize","vAlign","boxLayoutPosition","calcTooltipPosition","refixTooltipPosition","isCenterAlign","confineTooltipPosition","lastCoordSys","lastCbParamsList","contentNotChanged","lastItemCoordSys","indexCoordSys","lastDataByAxis","thisItemCoordSys","thisDataByAxis","lastItem","indexAxis","lastIndices","lastIdxItem","newIdxItem","lastCbParams","modelCascade","defaultTooltipOption","resultModel","gapH","gapV","domWidth","domHeight","rectWidth","rectHeight","subEl","TitleModel","TitleView","titleModel","subtextStyleModel","subText","subTextEl","sublink","groupRect","layoutOption","alignStyle","getDefaultSelectorOptions","LegendModel","selector","legendData","hasSelected","potentialData","availableNames","isPotential","legendNameMap","LegendView","legendModel","isFirstRender","itemAlign","selectorPosition","layoutUtil.createBoxLayoutReference","layoutUtil.getLayoutRect","mainRect","contentGroup","legendDrawnMap","selectMode","legendItemModel","lineVisualStyle","legendIcon","itemGroup","dispatchSelectAction","dispatchHighlightAction","dispatchDownplayAction","selectorGroup","selectorItem","labelText","emphasisLabelModel","itemVisualStyle","drawType","itemWidth","itemHeight","isSelected","iconRotate","legendIconType","getLegendStyle","getDefaultLegendIcon","hitRect","layoutUtil.box","contentRect","contentPos","selectorRect","selectorPos","selectorButtonGap","orientIdx","hw","yx","iconType","handleCommonProps","visualStyle","propVal","itemStyleModel","iconBrushType","decalStyle","legendLineModel","visualHasBorder","symboType","isUseHoverLayer","legendFilter","legendSelectActionHandler","isAllSelect","actionLegendIndices","makeSelectedMap","allSelectedMap","isItemSelected","installLegendAction","ScrollableLegendModel","scrollDataIndex","mergeAndNormalizeLayoutParams","ScrollableLegendView","controllerGroup","pageIconSize","pageIconSizeArr","createPageButton","pageTextStyleModel","iconIdx","pageDataIndexName","processMaxSize","containerGroup","controllerRect","showController","containerPos","controllerPos","pageButtonGap","pageButtonPosition","clipShape","pageInfo","canJump","pageText","pageFormatter","pageIndex","containerRectSize","targetItemIndex","targetItem","itemCount","pCount","targetItemInfo","getItemInfo","winStartItemInfo","winEndItemInfo","currItemInfo","itemInfo","winStart","targetDataIndex","defaultIndex","legendDataIdx","installScrollableLegendAction","installLegendPlain","installLegendScroll","ascending","descending","bisector","compare1","compare2","zero","number","ascendingBisect","bisectRight","Adder","e10","e5","e2","tickSpec","power","i1","i2","inc","tickIncrement","tickStep","flatten","arrays","dispatch","Dispatch","parseTypenames","typenames","typename","xhtml","namespaces","namespace","prefix","creatorInherit","document","uri","creatorFixed","fullname","none","selection_select","select","subgroups","subgroup","subnode","Selection","empty","selectorAll","arrayAll","selection_selectAll","parents","matcher","childMatcher","childFind","childFirst","selection_selectChild","childrenFilter","selection_selectChildren","selection_filter","sparse","selection_enter","EnterNode","datum","constant$1","bindIndex","enter","groupLength","dataLength","bindKey","nodeByKeyValue","keyValues","keyValue","selection_data","constant","arraylike","enterGroup","updateGroup","exitGroup","i0","previous","selection_exit","selection_join","onenter","onupdate","onexit","selection_merge","selection","groups0","groups1","merges","group0","selection_order","selection_sort","compareNode","sortgroups","sortgroup","selection_call","selection_nodes","selection_node","selection_size","selection_empty","selection_each","attrRemove","attrRemoveNS","attrConstant","attrConstantNS","attrFunction","attrFunctionNS","selection_attr","defaultView","styleRemove","styleConstant","styleFunction","selection_style","styleValue","propertyRemove","propertyConstant","propertyFunction","selection_property","classArray","string","classList","ClassList","classedAdd","classedRemove","classedTrue","classedFalse","classedFunction","selection_classed","textRemove","textConstant","textFunction","selection_text","htmlRemove","htmlConstant","htmlFunction","selection_html","raise","selection_raise","lower","selection_lower","selection_append","constantNull","selection_insert","before","selection_remove","selection_cloneShallow","selection_cloneDeep","selection_clone","deep","selection_datum","contextListener","onRemove","on","onAdd","selection_on","dispatchEvent","window","dispatchConstant","dispatchFunction","selection_dispatch","selection_iterator","selection_selection","constructor","factory","prototype","definition","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","channels","color_formatHex","color_formatHex8","color_formatHsl","color_formatRgb","hslConvert","rgbn","Rgb","rgbConvert","rgb","clampi","clampa","rgb_formatHex","rgb_formatHex8","rgb_formatRgb","Hsl","hsl","hsl2rgb","clamph","clampt","linear","exponential","gamma","nogamma","interpolateRgb","rgbGamma","colorRgb","numberArray","isNumberArray","genericArray","nb","na","object","reA","reB","one","interpolateString","bi","am","bm","bs","interpolate$1","interpolateRound","degrees","decompose","svgNode","parseCss","parseSvg","interpolateTransform","pxComma","pxParen","degParen","xb","yb","interpolateTransformCss","interpolateTransformSvg","timeout","pokeDelay","taskHead","taskTail","clockLast","clockNow","clockSkew","clock","setFrame","now","clearNow","Timer","sleep","timerFlush","wake","nap","poke","elapsed","emptyOn","emptyTween","CREATED","SCHEDULED","STARTING","STARTED","RUNNING","ENDING","ENDED","timing","schedules","tween","interrupt","active","selection_interrupt","tweenRemove","tween0","tween1","tweenFunction","transition_tween","tweenValue","interpolate","string00","string1","interpolate0","string0","string10","transition_attr","attrInterpolate","attrInterpolateNS","attrTweenNS","attrTween","transition_attrTween","delayFunction","delayConstant","transition_delay","durationFunction","durationConstant","transition_duration","easeConstant","transition_ease","easeVarying","transition_easeVarying","transition_filter","Transition","transition_merge","onFunction","on0","on1","sit","transition_on","removeFunction","transition_remove","transition_select","transition_selectAll","inherit","transition_selection","styleNull","styleMaybeRemove","listener0","transition_style","styleInterpolate","styleTween","transition_styleTween","transition_text","textInterpolate","textTween","transition_textTween","transition_transition","id0","id1","newId","transition_end","resolve","reject","cancel","selection_prototype","cubicInOut","defaultTiming","easeCubicInOut","selection_transition","responseJson","response","json","formatDecimal","formatDecimalParts","coefficient","formatGroup","grouping","thousands","formatNumerals","numerals","re","formatSpecifier","specifier","FormatSpecifier","formatTrim","prefixExponent","formatPrefixAuto","formatRounded","formatTypes","identity$2","prefixes","formatLocale","currencyPrefix","currencySuffix","decimal","minus","nan","newFormat","comma","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","formatPrefix","defaultLocale","precisionFixed","precisionPrefix","precisionRound","epsilon","pi","halfPi","quarterPi","tau","radians","atan","atan2","cos","sin","sqrt","tan","acos","asin","streamGeometry","stream","streamGeometryType","streamObjectType","coordinates","streamLine","streamPolygon","geometries","closed","coordinate","geoStream","spherical","phi","cosPhi","cartesianDot","cartesianCross","cartesianAddInPlace","cartesianScale","vector","cartesianNormalizeInPlace","compose","rotationIdentity","rotateRadians","deltaLambda","deltaPhi","deltaGamma","rotationLambda","rotationPhiGamma","forwardRotationLambda","cosDeltaPhi","sinDeltaPhi","cosDeltaGamma","sinDeltaGamma","forward","circleStream","cosRadius","sinRadius","circleRadius","clipBuffer","pointEqual","Intersection","clipRejoin","segments","compareIntersection","startInside","subject","segment","isSubject","longitude","polygonContains","polygon","sinPhi","normal","winding","ring","point0","lambda0","phi0","sinPhi0","cosPhi0","lambda1","sinPhi1","cosPhi1","point1","phi1","antimeridian","intersection","phiArc","pointVisible","clipLine","sink","ringBuffer","ringSink","polygonStarted","lineStart","lineEnd","pointRing","ringStart","ringEnd","pointLine","clean","ringSegments","validSegment","clipAntimeridian","clipAntimeridianLine","clipAntimeridianInterpolate","sign0","sign1","clipAntimeridianIntersect","sinLambda0Lambda1","clipCircle","smallRadius","notHemisphere","visible","c0","v00","point2","two","pa","pb","n2n2","n1n2","c1","c2","n1xn2","uu","polar","meridian","q1","bx","by","clipMax","clipMin","clipRectangle","corner","comparePoint","ca","activeStream","bufferStream","x__","y__","v__","v_","first","clipStream","polygonStart","polygonEnd","polygonInside","cleanInside","linePoint","identity$1","areaSum","areaRingSum","areaStream","areaRingStart","areaRingEnd","areaPointFirst","areaPoint","boundsStream","boundsPoint","bounds","X0","Y0","Z0","X1","Z1","X2","Z2","centroidStream","centroidPoint","centroidLineStart","centroidLineEnd","centroidRingStart","centroidRingEnd","centroid","centroidPointFirstLine","centroidPointLine","centroidPointFirstRing","centroidPointRing","PathContext","lengthSum","lengthRing","lengthStream","lengthPointFirst","lengthPoint","cacheDigits","cacheAppend","cacheRadius","cacheCircle","PathString","digits","appendRound","strings","projection","pointRadius","projectionStream","contextStream","pathArea","pathMeasure","pathBounds","pathCentroid","TransformStream","fit","fitBounds","fitExtent","fitSize","fitWidth","fitHeight","maxDepth","cosMinDistance","resample","project","delta2","resampleNone","resampleLineTo","depth","phi2","lambda2","dx2","dy2","dz","lambda00","a00","b00","c00","resampleStream","ringPoint","transformRadians","transformRotate","scaleTranslate","scaleTranslateRotate","cosAlpha","sinAlpha","ai","ci","fi","projectionMutator","projectAt","preclip","postclip","projectResample","projectTransform","projectRotateTransform","cacheStream","reset","recenter","mercatorRaw","mercator","mercatorProjection","clipExtent","reclip","initRange","constants","clamper","bimap","polymap","interpolateValue","untransform","unknown","piecewise","output","rescale","continuous","tickFormat","linearish","prestep","maxIter","Transform","location"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426]}